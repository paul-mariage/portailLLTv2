actuate.util.Package.define("actuate.widget.lib");actuate.widget.lib.Region=function(C,D,A,B){this.top=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this[0]=B;};actuate.widget.lib.Region.prototype={contains:function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom);},getArea:function(){return((this.bottom-this.top)*(this.right-this.left));},intersect:function(E){var C=Math.max(this.top,E.top);var D=Math.min(this.right,E.right);var A=Math.min(this.bottom,E.bottom);var B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new actuate.widget.lib.Region(C,D,A,B);}else{return null;}},union:function(E){var C=Math.min(this.top,E.top);var D=Math.max(this.right,E.right);var A=Math.max(this.bottom,E.bottom);var B=Math.min(this.left,E.left);return new actuate.widget.lib.Region(C,D,A,B);},constrainTo:function(A){this.top=this.top.constrain(A.top,A.bottom);this.bottom=this.bottom.constrain(A.top,A.bottom);this.left=this.left.constrain(A.left,A.right);this.right=this.right.constrain(A.left,A.right);return this;},adjust:function(C,B,A,D){this.top+=C;this.left+=B;this.right+=D;this.bottom+=A;return this;}};actuate.widget.lib.Region.getRegion=function(D){var F=actuate.widget.lib.Dom.getXY(D);var C=F[1];var E=F[0]+D.offsetWidth;var A=F[1]+D.offsetHeight;var B=F[0];return new actuate.widget.lib.Region(C,E,A,B);};actuate.widget.lib.Point=function(A,B){if(actuate.util.Utility.isArray(A)){B=A[1];A=A[0];}this.x=this.right=this.left=this[0]=A;this.y=this.top=this.bottom=this[1]=B;};actuate.widget.lib.Point.prototype=new actuate.widget.lib.Region();actuate.util.Package.define("actuate.widget.lib");(function(){var A;actuate.widget.lib.Dom={getViewWidth:function(C){return C?this.getDocumentWidth():this.getViewportWidth();},getViewHeight:function(C){return C?this.getDocumentHeight():this.getViewportHeight();},getDocumentHeight:function(){var C=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(C,this.getViewportHeight());},getDocumentWidth:function(){var C=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(C,this.getViewportWidth());},getViewportHeight:function(){if(actuate.util.Utility.isIE){return actuate.util.Utility.isStrict?document.documentElement.clientHeight:document.body.clientHeight;}else{return self.innerHeight;}},getViewportWidth:function(){if(actuate.util.Utility.isIE){return actuate.util.Utility.isStrict?document.documentElement.clientWidth:document.body.clientWidth;}else{return self.innerWidth;}},isAncestor:function(D,E){D=actuate.widget.Element.getDom(D);E=actuate.widget.Element.getDom(E);if(!D||!E){return false;}if(D.contains&&!actuate.util.Utility.isSafari){return D.contains(E);}else{if(D.compareDocumentPosition){return !!(D.compareDocumentPosition(E)&16);}else{var C=E.parentNode;while(C){if(C==D){return true;}else{if(!C.tagName||C.tagName.toUpperCase()=="HTML"){return false;}}C=C.parentNode;}return false;}}},getRegion:function(C){return actuate.widget.lib.Region.getRegion(C);},getY:function(C){return this.getXY(C)[1];},getX:function(C){return this.getXY(C)[0];},getXY:function(E){var D,J,L,M,H=(document.body||document.documentElement);E=actuate.widget.Element.getDom(E);if(E==H){return[0,0];}if(E.getBoundingClientRect){if(actuate.util.Utility.isIE){try{L=E.getBoundingClientRect();}catch(I){L={top:E.offsetTop,left:E.offsetLeft};}}else{L=E.getBoundingClientRect();}M=B(document).getScroll();return[L.left+M.left,L.top+M.top];}var N=0,K=0;D=E;var C=B(E).getStyle("position")=="absolute";while(D){N+=D.offsetLeft;K+=D.offsetTop;if(!C&&B(D).getStyle("position")=="absolute"){C=true;}if(actuate.util.Utility.isGecko){J=B(D);var O=parseInt(J.getStyle("borderTopWidth"),10)||0;var F=parseInt(J.getStyle("borderLeftWidth"),10)||0;N+=F;K+=O;if(D!=E&&J.getStyle("overflow")!="visible"){N+=F;K+=O;}}D=D.offsetParent;}if(actuate.util.Utility.isSafari&&C){N-=H.offsetLeft;K-=H.offsetTop;}if(actuate.util.Utility.isGecko&&!C){var G=B(H);N+=parseInt(G.getStyle("borderLeftWidth"),10)||0;K+=parseInt(G.getStyle("borderTopWidth"),10)||0;}D=E.parentNode;while(D&&D!=H){if(!actuate.util.Utility.isOpera||(D.tagName!="TR"&&B(D).getStyle("display")!="inline")){N-=D.scrollLeft;K-=D.scrollTop;}D=D.parentNode;}return[N,K];},setXY:function(C,D){C=actuate.widget.Element.fly(C,"_setXY");C.position();var E=C.translatePoints(D);if(D[0]!==false){C.dom.style.left=E.left+"px";}if(D[1]!==false){C.dom.style.top=E.top+"px";}},setX:function(D,C){this.setXY(D,[C,false]);},setY:function(C,D){this.setXY(C,[false,D]);}};actuate.widget.lib.Region=function(E,F,C,D){this.top=E;this[1]=E;this.right=F;this.bottom=C;this.left=D;this[0]=D;};actuate.widget.lib.Region.prototype={contains:function(C){return(C.left>=this.left&&C.right<=this.right&&C.top>=this.top&&C.bottom<=this.bottom);},getArea:function(){return((this.bottom-this.top)*(this.right-this.left));},intersect:function(G){var E=Math.max(this.top,G.top);var F=Math.min(this.right,G.right);var C=Math.min(this.bottom,G.bottom);var D=Math.max(this.left,G.left);if(C>=E&&F>=D){return new actuate.widget.lib.Region(E,F,C,D);}else{return null;}},union:function(G){var E=Math.min(this.top,G.top);var F=Math.max(this.right,G.right);var C=Math.max(this.bottom,G.bottom);var D=Math.min(this.left,G.left);return new actuate.widget.lib.Region(E,F,C,D);},constrainTo:function(C){this.top=this.top.constrain(C.top,C.bottom);this.bottom=this.bottom.constrain(C.top,C.bottom);this.left=this.left.constrain(C.left,C.right);this.right=this.right.constrain(C.left,C.right);return this;},adjust:function(E,D,C,F){this.top+=E;this.left+=D;this.right+=F;this.bottom+=C;return this;}};actuate.widget.lib.Region.getRegion=function(F){var H=actuate.widget.lib.Dom.getXY(F);var E=H[1];var G=H[0]+F.offsetWidth;var C=H[1]+F.offsetHeight;var D=H[0];return new actuate.widget.lib.Region(E,G,C,D);};function B(C){if(!A){A=new actuate.widget.Element.Flyweight();}A.dom=C;return A;}})();actuate.util.Package.define("actuate.widget.lib");(function(){actuate.widget.lib.Event=function(){var C=false;var E=[];var I=[];var G=0;var F=[];var B=0;var H=null;var D=actuate.util.Utility.isGecko?function(J){return Object.prototype.toString.call(J)=="[object XULElement]";}:actuate.Method.empty;return{POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,_interval:null,startInterval:function(){if(!this._interval){var J=this;var K=function(){J._tryPreloadAttach();};this._interval=setInterval(K,this.POLL_INTERVAL);}},onAvailable:function(L,J,M,K){F.push({id:L,fn:J,obj:M,override:K,checkReady:false});G=this.POLL_RETRYS;this.startInterval();},addListener:function(O,K,N){K=K.toLowerCase();if(actuate.util.browser&&(actuate.util.browser.isAndroid||actuate.util.browser.isIPad)){if(K=="click"){}else{if(K=="mousemove"){K="touchmove";}else{if(K=="mousedown"){K="touchstart";}else{if(K=="mouseup"){K="touchend";}}}}}O=actuate.widget.Element.getDom(O);if(!O||!N){return false;}if("unload"==K){I[I.length]=[O,K,N];return true;}var M=function(P){return typeof actuate!="undefined"?N(actuate.widget.lib.Event.getEvent(P)):false;};var J=[O,K,N,M];var L=E.length;E[L]=J;this.doAdd(O,K,M,false);return true;},removeListener:function(Q,M,P){var O,L;M=M.toLowerCase();if(actuate.util.browser&&(actuate.util.browser.isAndroid||actuate.util.browser.isIPad)){if(M=="click"){}else{if(M=="mousemove"){M="touchmove";}else{if(M=="mousedown"){M="touchstart";}else{if(M=="mouseup"){M="touchend";}}}}}Q=actuate.widget.Element.getDom(Q);if(!P){return this.purgeElement(Q,false,M);}if("unload"==M){for(O=0,L=I.length;O<L;O++){var K=I[O];if(K&&K[0]==Q&&K[1]==M&&K[2]==P){I.splice(O,1);return true;}}return false;}var J=null;var N=arguments[3];if("undefined"==typeof N){N=this._getCacheIndex(Q,M,P);}if(N>=0){J=E[N];}if(!Q||!J){return false;}this.doRemove(Q,M,J[this.WFN],false);delete E[N][this.WFN];delete E[N][this.FN];E.splice(N,1);return true;},getTarget:function(L,K){L=L.browserEvent||L;var J=L.target||L.srcElement;return this.resolveTextNode(J);},resolveTextNode:function(J){if(actuate.util.Utility.isSafari&&J&&3==J.nodeType){return J.parentNode;}else{return J&&!D(J)&&3==J.nodeType?J.parentNode:J;}return ;},getPageX:function(K){K=K.browserEvent||K;if(K.touches&&K.touches[0]){return K.touches[0].pageX;}var J=K.pageX;if(!J&&0!==J){J=K.clientX||0;if(actuate.util.Utility.isIE){J+=this.getScroll()[1];}}return J;},getPageY:function(J){J=J.browserEvent||J;if(J.touches&&J.touches[0]){return J.touches[0].pageY;}var K=J.pageY;if(!K&&0!==K){K=J.clientY||0;if(actuate.util.Utility.isIE){K+=this.getScroll()[0];}}return K;},getXY:function(J){J=J.browserEvent||J;return[this.getPageX(J),this.getPageY(J)];},getRelatedTarget:function(K){K=K.browserEvent||K;var J=K.relatedTarget;if(!J){if(K.type=="mouseout"){J=K.toElement;}else{if(K.type=="mouseover"){J=K.fromElement;}}}return this.resolveTextNode(J);},getTime:function(L){L=L.browserEvent||L;if(!L.time){var K=new Date().getTime();try{L.time=K;}catch(J){this.lastError=J;return K;}}return L.time;},stopEvent:function(J){this.stopPropagation(J);this.preventDefault(J);},stopPropagation:function(J){J=J.browserEvent||J;if(J.stopPropagation){J.stopPropagation();}else{J.cancelBubble=true;}},preventDefault:function(J){J=J.browserEvent||J;if(J.preventDefault){J.preventDefault();}else{J.returnValue=false;}},getEvent:function(K){var J=K||window.event;if(!J){var L=this.getEvent.caller;while(L){J=L.arguments[0];if(J&&Event==J.constructor){break;}L=L.caller;}}return J;},getCharCode:function(J){J=J.browserEvent||J;return J.charCode||J.keyCode||0;},_getCacheIndex:function(O,L,N){for(var M=0,K=E.length;M<K;++M){var J=E[M];if(J&&J[this.FN]==N&&J[this.EL]==O&&J[this.TYPE]==L){return M;}}return -1;},elCache:{},getEl:function(J){return document.getElementById(J);},clearCache:function(){},_load:function(K){C=true;var J=actuate.widget.lib.Event;if(actuate.util.Utility.isIE){J.doRemove(window,"load",J._load);}},_tryPreloadAttach:function(){if(this.locked){return false;}this.locked=true;var P=!C;if(!P){P=(G>0);}var O=[];for(var K=0,J=F.length;K<J;++K){var N=F[K];if(N){var M=this.getEl(N.id);if(M){if(!N.checkReady||C||M.nextSibling||(document&&document.body)){var L=M;if(N.override){if(N.override===true){L=N.obj;}else{L=N.override;}}N.fn.call(L,N.obj);F[K]=null;}}else{O.push(N);}}}G=(O.length===0)?0:G-1;if(P){this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;return true;},purgeElement:function(N,O,L){var P=this.getListeners(N,L);if(P){for(var M=0,J=P.length;M<J;++M){var K=P[M];this.removeListener(N,K.type,K.fn);}}if(O&&N&&N.childNodes){for(M=0,J=N.childNodes.length;M<J;++M){this.purgeElement(N.childNodes[M],O,L);}}},getListeners:function(K,P){var N=[],J;if(!P){J=[E,I];}else{if(P=="unload"){J=[I];}else{J=[E];}}for(var M=0;M<J.length;++M){var R=J[M];if(R&&R.length>0){for(var O=0,Q=R.length;O<Q;++O){var L=R[O];if(L&&L[this.EL]===K&&(!P||P===L[this.TYPE])){N.push({type:L[this.TYPE],fn:L[this.FN],obj:L[this.OBJ],adjust:L[this.ADJ_SCOPE],index:O});}}}}return(N.length)?N:null;},_unload:function(Q){var P=actuate.widget.lib.Event,N,M,K,J,L;for(N=0,J=I.length;N<J;++N){K=I[N];if(K){var O=window;if(K[P.ADJ_SCOPE]){if(K[P.ADJ_SCOPE]===true){O=K[P.OBJ];}else{O=K[P.ADJ_SCOPE];}}K[P.FN].call(O,P.getEvent(Q),K[P.OBJ]);I[N]=null;K=null;O=null;}}I=null;if(E&&E.length>0){M=E.length;while(M){L=M-1;K=E[L];if(K){P.removeListener(K[P.EL],K[P.TYPE],K[P.FN],L);}M=M-1;}K=null;P.clearCache();}P.doRemove(window,"unload",P._unload);},getScroll:function(){var J=document.documentElement,K=document.body;if(J&&(J.scrollTop||J.scrollLeft)){return[J.scrollTop,J.scrollLeft];}else{if(K){return[K.scrollTop,K.scrollLeft];}else{return[0,0];}}},doAdd:function(){if(window.addEventListener){return function(M,K,L,J){M.addEventListener(K,L,(J));};}else{if(window.attachEvent){return function(M,K,L,J){M.attachEvent("on"+K,L);};}else{return function(){};}}}(),doRemove:function(){if(window.removeEventListener){return function(M,K,L,J){M.removeEventListener(K,L,(J));};}else{if(window.detachEvent){return function(L,J,K){L.detachEvent("on"+J,K);};}else{return function(){};}}}()};}();var A=actuate.widget.lib.Event;A.on=A.addListener;A.un=A.removeListener;if(document&&document.body){A._load();}else{A.doAdd(window,"load",A._load);}A.doAdd(window,"unload",A._unload);A._tryPreloadAttach();})();actuate.util.Package.define("actuate.widget.lib");actuate.widget.lib.AnimBase=actuate.Class.create();actuate.widget.lib.AnimBase.prototype={initialize:function(C,H,G,A){if(!C){return ;}var B=false;var D=null;var F=0;C=actuate.widget.Element.getDom(C);this.attributes=H||{};this.duration=G||1;this.method=A||actuate.widget.lib.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=actuate.widget.lib.AnimMgr.fps;this.getEl=function(){return C;};this.isAnimated=function(){return B;};this.getStartTime=function(){return D;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(actuate.widget.lib.AnimMgr.fps*this.duration):this.duration;actuate.widget.lib.AnimMgr.registerElement(this);};this.stop=function(K){if(K){this.currentFrame=this.totalFrames;this._onTween.fire();}actuate.widget.lib.AnimMgr.stop(this);};var J=function(){this.onStart.fire();this.runtimeAttributes={};for(var K in this.attributes){this.setRuntimeAttribute(K);}B=true;F=0;D=new Date();};var I=function(){var M={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};M.toString=function(){return("duration: "+M.duration+", currentFrame: "+M.currentFrame);};this.onTween.fire(M);var L=this.runtimeAttributes;for(var K in L){this.setAttribute(K,this.doMethod(K,L[K].start,L[K].end),L[K].unit);}F+=1;};var E=function(){var K=(new Date()-D)/1000;var L={duration:K,frames:F,fps:F/K};L.toString=function(){return("duration: "+L.duration+", frames: "+L.frames+", fps: "+L.fps);};B=false;F=0;this.onComplete.fire(L);};this._onStart=new actuate.widget.Event(this);this.onStart=new actuate.widget.Event(this);this.onTween=new actuate.widget.Event(this);this._onTween=new actuate.widget.Event(this);this.onComplete=new actuate.widget.Event(this);this._onComplete=new actuate.widget.Event(this);this._onStart.addListener(J);this._onTween.addListener(I);this._onComplete.addListener(E);},toString:function(){var A=this.getEl();var B=A.id||A.tagName;return("Anim "+B);},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(A,C,B){return this.method(this.currentFrame,C,B-C,this.totalFrames);},setAttribute:function(A,C,B){if(this.patterns.noNegatives.test(A)){C=(C>0)?C:0;}actuate.widget.Element.fly(this.getEl(),"_anim").setStyle(A,C+B);},getAttribute:function(A){var C=this.getEl();var E=actuate.widget.Element.fly(C).getStyle(A);if(E!=="auto"&&!this.patterns.offsetUnit.test(E)){return parseFloat(E);}var B=this.patterns.offsetAttribute.exec(A)||[];var F=!!(B[3]);var D=!!(B[2]);if(D||(fly(C).getStyle("position")=="absolute"&&F)){E=C["offset"+B[0].charAt(0).toUpperCase()+B[0].substr(1)];}else{E=0;}return E;},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px";}return"";},animateX:function(C,A){var B=function(){this.onComplete.removeListener(B);if(typeof C=="function"){C.call(A||this,this);}};this.onComplete.addListener(B,this);this.animate();},setRuntimeAttribute:function(B){var G;var C;var D=this.attributes;this.runtimeAttributes[B]={};var F=function(H){return(typeof H!=="undefined");};if(!F(D[B]["to"])&&!F(D[B]["by"])){return false;}G=(F(D[B]["from"]))?D[B]["from"]:this.getAttribute(B);if(F(D[B]["to"])){C=D[B]["to"];}else{if(F(D[B]["by"])){if(G.constructor==Array){C=[];for(var E=0,A=G.length;E<A;++E){C[E]=G[E]+D[B]["by"][E];}}else{C=G+D[B]["by"];}}}this.runtimeAttributes[B].start=G;this.runtimeAttributes[B].end=C;this.runtimeAttributes[B].unit=(F(D[B].unit))?D[B]["unit"]:this.getDefaultUnit(B);}};actuate.widget.lib.ColorAnim=actuate.Class.create();actuate.widget.lib.ColorAnim.superclass=actuate.widget.lib.AnimBase.prototype;actuate.widget.lib.ColorAnim.prototype=actuate.Class.extend(new actuate.widget.lib.AnimBase(),{initialize:function(B,A,C,D){actuate.widget.lib.ColorAnim.superclass.initialize.call(this,B,A,C,D);}});actuate.widget.lib.Motion=actuate.Class.create();actuate.widget.lib.Motion.superclass=actuate.widget.lib.ColorAnim.prototype;actuate.widget.lib.Motion.prototype=actuate.Class.extend(new actuate.widget.lib.ColorAnim(),{initialize:function(B,A,C,D){actuate.widget.lib.Motion.superclass.initialize.call(this,B,A,C,D);}});actuate.widget.lib.Scroll=actuate.Class.create();actuate.widget.lib.Scroll.superclass=actuate.widget.lib.ColorAnim.prototype;actuate.widget.lib.Scroll.prototype=actuate.Class.extend(new actuate.widget.lib.ColorAnim(),{initialize:function(B,A,C,D){actuate.widget.lib.Scroll.superclass.initialize.call(this,B,A,C,D);}});(function(){var B;actuate.widget.lib.Anim={scroll:function(G,E,H,I,D,F){return this.run(G,E,H,I,D,F,actuate.widget.lib.Scroll);},motion:function(G,E,H,I,D,F){return this.run(G,E,H,I,D,F,actuate.widget.lib.Motion);},color:function(G,E,H,I,D,F){return this.run(G,E,H,I,D,F,actuate.widget.lib.ColorAnim);},run:function(H,E,J,K,D,G,F){F=F||actuate.widget.lib.AnimBase;if(typeof K=="string"){K=actuate.widget.lib.Easing[K];}var I=new F(H,E,J,K);I.animateX(function(){if(typeof D=="function"){D.call(G);}});return I;}};function C(D){if(!B){B=new actuate.widget.Element.Flyweight();}B.dom=D;return B;}if(actuate.util.Utility.isIE){function A(){var D=Function.prototype;delete D.createSequence;delete D.defer;delete D.createDelegate;delete D.createCallback;delete D.createInterceptor;window.detachEvent("onunload",A);}window.attachEvent("onunload",A);}actuate.widget.lib.AnimMgr=new function(){var F=null;var E=[];var D=0;this.fps=1000;this.delay=1;this.registerElement=function(I){E[E.length]=I;D+=1;I._onStart.fire();this.start();};this.unRegister=function(J,I){J._onComplete.fire();I=I||H(J);if(I!=-1){E.splice(I,1);}D-=1;if(D<=0){this.stop();}};this.start=function(){if(F===null){F=setInterval(this.run,this.delay);}};this.stop=function(K){if(!K){clearInterval(F);for(var J=0,I=E.length;J<I;++J){if(E[0].isAnimated()){this.unRegister(E[0],0);}}E=[];F=null;D=0;}else{this.unRegister(K);}};this.run=function(){for(var K=0,I=E.length;K<I;++K){var J=E[K];if(!J||!J.isAnimated()){continue;}if(J.currentFrame<J.totalFrames||J.totalFrames===null){J.currentFrame+=1;if(J.useSeconds){G(J);}J._onTween.fire();}else{actuate.widget.lib.AnimMgr.stop(J,K);}}};var H=function(K){for(var J=0,I=E.length;J<I;++J){if(E[J]==K){return J;}}return -1;};var G=function(J){var M=J.totalFrames;var L=J.currentFrame;var K=(J.currentFrame*J.duration*1000/J.totalFrames);var I=(new Date()-J.getStartTime());var N=0;if(I<J.duration*1000){N=Math.round((I/K-1)*J.currentFrame);}else{N=M-(L+1);}if(N>0&&isFinite(N)){if(J.currentFrame+N>=M){N=M-(L+1);}J.currentFrame+=N;}};};actuate.widget.lib.Easing={easeNone:function(E,D,G,F){return G*E/F+D;},easeIn:function(E,D,G,F){return G*(E/=F)*E+D;},easeOut:function(E,D,G,F){return -G*(E/=F)*(E-2)+D;},easeBoth:function(E,D,G,F){if((E/=F/2)<1){return G/2*E*E+D;}return -G/2*((--E)*(E-2)-1)+D;},easeInStrong:function(E,D,G,F){return G*(E/=F)*E*E*E+D;},easeOutStrong:function(E,D,G,F){return -G*((E=E/F-1)*E*E*E-1)+D;},easeBothStrong:function(E,D,G,F){if((E/=F/2)<1){return G/2*E*E*E*E+D;}return -G/2*((E-=2)*E*E*E-2)+D;},elasticIn:function(F,D,J,I,E,H){if(F==0){return D;}if((F/=I)==1){return D+J;}if(!H){H=I*0.3;}if(!E||E<Math.abs(J)){E=J;var G=H/4;}else{var G=H/(2*Math.PI)*Math.asin(J/E);}return -(E*Math.pow(2,10*(F-=1))*Math.sin((F*I-G)*(2*Math.PI)/H))+D;},elasticOut:function(F,D,J,I,E,H){if(F==0){return D;}if((F/=I)==1){return D+J;}if(!H){H=I*0.3;}if(!E||E<Math.abs(J)){E=J;var G=H/4;}else{var G=H/(2*Math.PI)*Math.asin(J/E);}return E*Math.pow(2,-10*F)*Math.sin((F*I-G)*(2*Math.PI)/H)+J+D;},elasticBoth:function(F,D,J,I,E,H){if(F==0){return D;}if((F/=I/2)==2){return D+J;}if(!H){H=I*(0.3*1.5);}if(!E||E<Math.abs(J)){E=J;var G=H/4;}else{var G=H/(2*Math.PI)*Math.asin(J/E);}if(F<1){return -0.5*(E*Math.pow(2,10*(F-=1))*Math.sin((F*I-G)*(2*Math.PI)/H))+D;}return E*Math.pow(2,-10*(F-=1))*Math.sin((F*I-G)*(2*Math.PI)/H)*0.5+J+D;},backIn:function(E,D,H,G,F){if(typeof F=="undefined"){F=1.70158;}return H*(E/=G)*E*((F+1)*E-F)+D;},backOut:function(E,D,H,G,F){if(typeof F=="undefined"){F=1.70158;}return H*((E=E/G-1)*E*((F+1)*E+F)+1)+D;},backBoth:function(E,D,H,G,F){if(typeof F=="undefined"){F=1.70158;}if((E/=G/2)<1){return H/2*(E*E*(((F*=(1.525))+1)*E-F))+D;}return H/2*((E-=2)*E*(((F*=(1.525))+1)*E+F)+2)+D;},bounceIn:function(E,D,G,F){return G-actuate.widget.lib.Easing.bounceOut(F-E,0,G,F)+D;},bounceOut:function(E,D,G,F){if((E/=F)<(1/2.75)){return G*(7.5625*E*E)+D;}else{if(E<(2/2.75)){return G*(7.5625*(E-=(1.5/2.75))*E+0.75)+D;}else{if(E<(2.5/2.75)){return G*(7.5625*(E-=(2.25/2.75))*E+0.9375)+D;}}}return G*(7.5625*(E-=(2.625/2.75))*E+0.984375)+D;},bounceBoth:function(E,D,G,F){if(E<F/2){return actuate.widget.lib.Easing.bounceIn(E*2,0,G,F)*0.5+D;}return actuate.widget.lib.Easing.bounceOut(E*2-F,0,G,F)*0.5+G*0.5+D;}};(function(){var E=actuate.widget.lib;var F=E.ColorAnim.superclass;var D=E.ColorAnim.prototype;D.toString=function(){var G=this.getEl();var H=G.id||G.tagName;return("ColorAnim "+H);};D.patterns.color=/color$/i;D.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;D.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;D.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;D.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;D.parseColor=function(G){if(G.length==3){return G;}var H=this.patterns.hex.exec(G);if(H&&H.length==4){return[parseInt(H[1],16),parseInt(H[2],16),parseInt(H[3],16)];}H=this.patterns.rgb.exec(G);if(H&&H.length==4){return[parseInt(H[1],10),parseInt(H[2],10),parseInt(H[3],10)];}H=this.patterns.hex3.exec(G);if(H&&H.length==4){return[parseInt(H[1]+H[1],16),parseInt(H[2]+H[2],16),parseInt(H[3]+H[3],16)];}return null;};D.getAttribute=function(G){var I=this.getEl();if(this.patterns.color.test(G)){var J=C(I).getStyle(G);if(this.patterns.transparent.test(J)){var H=I.parentNode;J=C(H).getStyle(G);while(H&&this.patterns.transparent.test(J)){H=H.parentNode;J=C(H).getStyle(G);if(H.tagName.toUpperCase()=="HTML"){J="#fff";}}}}else{J=F.getAttribute.call(this,G);}return J;};D.doMethod=function(H,L,I){var K;if(this.patterns.color.test(H)){K=[];for(var J=0,G=L.length;J<G;++J){K[J]=F.doMethod.call(this,H,L[J],I[J]);}K="rgb("+Math.floor(K[0])+","+Math.floor(K[1])+","+Math.floor(K[2])+")";}else{K=F.doMethod.call(this,H,L,I);}return K;};D.setRuntimeAttribute=function(H){F.setRuntimeAttribute.call(this,H);if(this.patterns.color.test(H)){var J=this.attributes;var L=this.parseColor(this.runtimeAttributes[H].start);var I=this.parseColor(this.runtimeAttributes[H].end);if(typeof J[H]["to"]==="undefined"&&typeof J[H]["by"]!=="undefined"){I=this.parseColor(J[H].by);for(var K=0,G=L.length;K<G;++K){I[K]=L[K]+I[K];}}this.runtimeAttributes[H].start=L;this.runtimeAttributes[H].end=I;}};})();(function(){var G=actuate.widget.lib;var H=G.Motion.superclass;var E=G.Motion.prototype;E.toString=function(){var I=this.getEl();var J=I.id||I.tagName;return("Motion "+J);};E.patterns.points=/^points$/i;E.setAttribute=function(I,K,J){if(this.patterns.points.test(I)){J=J||"px";H.setAttribute.call(this,"left",K[0],J);H.setAttribute.call(this,"top",K[1],J);}else{H.setAttribute.call(this,I,K,J);}};E.getAttribute=function(I){if(this.patterns.points.test(I)){var J=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")];}else{J=H.getAttribute.call(this,I);}return J;};E.doMethod=function(I,M,J){var L=null;if(this.patterns.points.test(I)){var K=this.method(this.currentFrame,0,100,this.totalFrames)/100;L=G.Bezier.getPosition(this.runtimeAttributes[I],K);}else{L=H.doMethod.call(this,I,M,J);}return L;};E.setRuntimeAttribute=function(R){if(this.patterns.points.test(R)){var J=this.getEl();var L=this.attributes;var I;var N=L["points"]["control"]||[];var K;var O,Q;if(N.length>0&&!actuate.util.Utility.isArray(N[0])){N=[N];}else{var M=[];for(O=0,Q=N.length;O<Q;++O){M[O]=N[O];}N=M;}actuate.widget.Element.fly(J,"_anim").position();if(F(L["points"]["from"])){actuate.widget.lib.Dom.setXY(J,L["points"]["from"]);}else{actuate.widget.lib.Dom.setXY(J,actuate.widget.lib.Dom.getXY(J));}I=this.getAttribute("points");if(F(L["points"]["to"])){K=D.call(this,L["points"]["to"],I);var P=actuate.widget.lib.Dom.getXY(this.getEl());for(O=0,Q=N.length;O<Q;++O){N[O]=D.call(this,N[O],I);}}else{if(F(L["points"]["by"])){K=[I[0]+L["points"]["by"][0],I[1]+L["points"]["by"][1]];for(O=0,Q=N.length;O<Q;++O){N[O]=[I[0]+N[O][0],I[1]+N[O][1]];}}}this.runtimeAttributes[R]=[I];if(N.length>0){this.runtimeAttributes[R]=this.runtimeAttributes[R].concat(N);}this.runtimeAttributes[R][this.runtimeAttributes[R].length]=K;}else{H.setRuntimeAttribute.call(this,R);}};var D=function(I,K){var J=actuate.widget.lib.Dom.getXY(this.getEl());I=[I[0]-J[0]+K[0],I[1]-J[1]+K[1]];return I;};var F=function(I){return(typeof I!=="undefined");};})();(function(){var E=actuate.widget.lib;var F=E.Scroll.superclass;var D=E.Scroll.prototype;D.toString=function(){var G=this.getEl();var H=G.id||G.tagName;return("Scroll "+H);};D.doMethod=function(G,J,H){var I=null;if(G=="scroll"){I=[this.method(this.currentFrame,J[0],H[0]-J[0],this.totalFrames),this.method(this.currentFrame,J[1],H[1]-J[1],this.totalFrames)];}else{I=F.doMethod.call(this,G,J,H);}return I;};D.getAttribute=function(G){var I=null;var H=this.getEl();if(G=="scroll"){I=[H.scrollLeft,H.scrollTop];}else{I=F.getAttribute.call(this,G);}return I;};D.setAttribute=function(G,J,I){var H=this.getEl();if(G=="scroll"){H.scrollLeft=J[0];H.scrollTop=J[1];}else{F.setAttribute.call(this,G,J,I);}};})();})();actuate.util.Package.define("actuate.widget");actuate.widget.DomHelper=function(){var L=null;var F=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i;var B=/^table|tbody|tr|td$/i;var A=function(T){if(typeof T=="string"){return T;}var O="";if(actuate.util.Utility.isArray(T)){for(var R=0,P=T.length;R<P;R++){O+=A(T[R]);}return O;}if(!T.tag){T.tag="div";}O+="<"+T.tag;for(var N in T){if(N=="tag"||N=="children"||N=="cn"||N=="html"||typeof T[N]=="function"){continue;}if(N=="style"){var S=T["style"];if(typeof S=="function"){S=S.call();}if(typeof S=="string"){O+=' style="'+S+'"';}else{if(typeof S=="object"){O+=' style="';for(var Q in S){if(typeof S[Q]!="function"){O+=Q+":"+S[Q]+";";}}O+='"';}}}else{if(N=="cls"){O+=' class="'+T["cls"]+'"';}else{if(N=="htmlFor"){O+=' for="'+T["htmlFor"]+'"';}else{O+=" "+N+'="'+T[N]+'"';}}}}if(F.test(T.tag)){O+="/>";}else{O+=">";var U=T.children||T.cn;if(U){O+=A(U);}else{if(T.html){O+=T.html;}}O+="</"+T.tag+">";}return O;};var M=function(T,O){var S;if(actuate.util.Utility.isArray(T)){S=document.createDocumentFragment();for(var R=0,P=T.length;R<P;R++){M(T[R],S);}}else{if(typeof T=="string"){S=document.createTextNode(T);}else{S=document.createElement(T.tag||"div");var Q=!!S.setAttribute;for(var N in T){if(N=="tag"||N=="children"||N=="cn"||N=="html"||N=="style"||typeof T[N]=="function"){continue;}if(N=="cls"){S.className=T["cls"];}else{if(Q){S.setAttribute(N,T[N]);}else{S[N]=T[N];}}}actuate.widget.DomHelper.applyStyles(S,T.style);var U=T.children||T.cn;if(U){M(U,S);}else{if(T.html){S.innerHTML=T.html;}}}}if(O){O.appendChild(S);}return S;};var I=function(S,Q,P,R){L.innerHTML=[Q,P,R].join("");var N=-1,O=L;while(++N<S){O=O.firstChild;}return O;};var J="<table>",E="</table>",C=J+"<tbody>",K="</tbody>"+E,H=C+"<tr>",D="</tr>"+K;var G=function(N,O,Q,P){if(!L){L=document.createElement("div");}var R;var S=null;if(N=="td"){if(O=="afterbegin"||O=="beforeend"){return ;}if(O=="beforebegin"){S=Q;Q=Q.parentNode;}else{S=Q.nextSibling;Q=Q.parentNode;}R=I(4,H,P,D);}else{if(N=="tr"){if(O=="beforebegin"){S=Q;Q=Q.parentNode;R=I(3,C,P,K);}else{if(O=="afterend"){S=Q.nextSibling;Q=Q.parentNode;R=I(3,C,P,K);}else{if(O=="afterbegin"){S=Q.firstChild;}R=I(4,H,P,D);}}}else{if(N=="tbody"){if(O=="beforebegin"){S=Q;Q=Q.parentNode;R=I(2,J,P,E);}else{if(O=="afterend"){S=Q.nextSibling;Q=Q.parentNode;R=I(2,J,P,E);}else{if(O=="afterbegin"){S=Q.firstChild;}R=I(3,C,P,K);}}}else{if(O=="beforebegin"||O=="afterend"){return ;}if(O=="afterbegin"){S=Q.firstChild;}R=I(2,J,P,E);}}}Q.insertBefore(R,S);return R;};return{useDom:false,markup:function(N){return A(N);},applyStyles:function(P,Q){if(Q){P=actuate.widget.Element.fly(P);if(typeof Q=="string"){var O=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;var R;while((R=O.exec(Q))!=null){if(R[2]&&R[2].toLowerCase()!="undefined"){P.setStyle(R[1],R[2]);}}}else{if(typeof Q=="object"){for(var N in Q){P.setStyle(N,Q[N]);}}else{if(typeof Q=="function"){actuate.widget.DomHelper.applyStyles(P,Q.call());}}}}},insertHtml:function(P,R,Q){P=P.toLowerCase();if(R&&R.insertAdjacentHTML){if(B.test(R.tagName)){var O;if(O=G(R.tagName.toLowerCase(),P,R,Q)){return O;}}switch(P){case"beforebegin":R.insertAdjacentHTML("BeforeBegin",Q);return R.previousSibling;case"afterbegin":R.insertAdjacentHTML("AfterBegin",Q);return R.firstChild;case"beforeend":R.insertAdjacentHTML("BeforeEnd",Q);return R.lastChild;case"afterend":R.insertAdjacentHTML("AfterEnd",Q);return R.nextSibling;}throw'Illegal insertion point -> "'+P+'"';}var N=R.ownerDocument.createRange();var S;switch(P){case"beforebegin":N.setStartBefore(R);S=actuate.util.Utility.createContextualFragment(Q,N);R.parentNode.insertBefore(S,R);return R.previousSibling;case"afterbegin":if(R.firstChild){N.setStartBefore(R.firstChild);S=actuate.util.Utility.createContextualFragment(Q,N);R.insertBefore(S,R.firstChild);return R.firstChild;}else{R.innerHTML=Q;return R.firstChild;}case"beforeend":if(R.lastChild){N.setStartAfter(R.lastChild);S=actuate.util.Utility.createContextualFragment(Q,N);R.appendChild(S);return R.lastChild;}else{R.innerHTML=Q;return R.lastChild;}case"afterend":N.setStartAfter(R);S=actuate.util.Utility.createContextualFragment(Q,N);R.parentNode.insertBefore(S,R.nextSibling);return R.nextSibling;}throw'Illegal insertion point -> "'+P+'"';},insertBefore:function(N,P,O){return this.doInsert(N,P,O,"beforeBegin");},insertAfter:function(N,P,O){return this.doInsert(N,P,O,"afterEnd","nextSibling");},insertFirst:function(N,P,O){return this.doInsert(N,P,O,"afterBegin","firstChild");},doInsert:function(Q,S,R,T,P){Q=actuate.widget.Element.getDom(Q);var O;if(this.useDom){O=M(S,null);(P==="firstChild"?Q:Q.parentNode).insertBefore(O,P?Q[P]:Q);}else{var N=A(S);O=this.insertHtml(T,Q,N);}return R?actuate.widget.Element.get(O,true):O;},removeNode:actuate.util.Utility.isIE?function(){var N;return function(O){if(O&&O.tagName!="BODY"){N=N||document.createElement("div");N.appendChild(O);N.innerHTML="";}};}():function(N){if(N&&N.parentNode&&N.tagName!="BODY"){N.parentNode.removeChild(N);}},append:function(P,R,Q){P=actuate.widget.Element.getDom(P);var O;if(this.useDom){O=M(R,null);P.appendChild(O);}else{var N=A(R);O=this.insertHtml("beforeEnd",P,N);}return Q?actuate.widget.Element.get(O,true):O;},overwrite:function(N,P,O){N=actuate.widget.Element.getDom(N);N.innerHTML=A(P);return O?actuate.widget.Element.get(N.firstChild,true):N.firstChild;},createTemplate:function(O){var N=A(O);return new actuate.widget.Template(N);}};}();actuate.widget.DomQuery=function(){var cache={},simpleCache={},valueCache={};var nonSpace=/\S/;var trimRe=/^\s+|\s+$/g;var tplRe=/\{(\d+)\}/g;var modeRe=/^(\s?[\/>+~]\s?|\s|$)/;var tagTokenRe=/^(#)?([\w-\*]+)/;var nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/;function child(p,index){var i=0;var n=p.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n;}}n=n.nextSibling;}return null;}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n;}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n;}function children(d){var n=d.firstChild,ni=-1;while(n){var nx=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){d.removeChild(n);}else{n.nodeIndex=++ni;}n=nx;}return this;}function byClassName(c,a,v){if(!v){return c;}var r=[],ri=-1,cn;for(var i=0,ci;ci=c[i];i++){if((" "+ci.className+" ").indexOf(v)!=-1){r[++ri]=ci;}}return r;}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0];}if(!n){return null;}if(attr=="for"){return n.htmlFor;}if(attr=="class"||attr=="className"){return n.className;}return n.getAttribute(attr)||n[attr];}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result;}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns];}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci;}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.children||ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj;}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n;}}}else{if(mode=="~"){for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&(n.nodeType!=1||(tagName=="*"||n.tagName.toLowerCase()!=tagName))){}if(n){result[++ri]=n;}}}}}}return result;}function concat(a,b){if(b.slice){return a.concat(b);}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i];}return a;}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs];}if(!tagName){return cs;}var r=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){r[++ri]=ci;}}return r;}function byId(cs,attr,id){if(cs.tagName||cs==document){cs=[cs];}if(!id){return cs;}var r=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){r[++ri]=ci;return r;}}return r;}function byAttribute(cs,attr,value,op,custom){var r=[],ri=-1,st=custom=="{";var f=actuate.widget.DomQuery.operators[op];for(var i=0,ci;ci=cs[i];i++){var a;if(st){a=actuate.widget.DomQuery.getStyle(ci,attr);}else{if(attr=="class"||attr=="className"){a=ci.className;}else{if(attr=="for"){a=ci.htmlFor;}else{if(attr=="href"){a=ci.getAttribute("href",2);}else{a=ci.getAttribute(attr);}}}}if((f&&f(a,value))||(!f&&a)){r[++ri]=ci;}}return r;}function byPseudo(cs,name,value){return actuate.widget.DomQuery.pseudos[name](cs,value);}var isIE=window.ActiveXObject?true:false;eval("var batch = 30803;");var key=30803;function nodupIEXml(cs){var d=++key;cs[0].setAttribute("_nodup",d);var r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c;}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup");}return r;}function nodup(cs){if(!cs){return[];}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs;}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs);}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d;}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j];}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj;}}return r;}}return r;}function quickDiffIEXml(c1,c2){var d=++key;for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d);}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i];}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff");}return r;}function quickDiff(c1,c2){var len1=c1.length;if(!len1){return c2;}if(isIE&&c1[0].selectSingleNode){return quickDiffIEXml(c1,c2);}var d=++key;for(var i=0;i<len1;i++){c1[i]._qdiff=d;}var r=[];for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i];}}return r;}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id);}ns=getNodes(ns,mode,"*");return byId(ns,null,id);}return{getStyle:function(el,name){return actuate.widget.Element.fly(el).getStyle(name);},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"];var q=path,mode,lq;var tk=actuate.widget.DomQuery.matchers;var tklen=tk.length;var mm;var lmode=q.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';q=q.replace(lmode[1],"");}while(path.substr(0,1)=="/"){path=path.substr(1);}while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);if(type=="select"){if(tm){if(tm[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");';}else{fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");';}q=q.replace(tm[0],"");}else{if(q.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");';}}}else{if(tm){if(tm[1]=="#"){fn[fn.length]='n = byId(n, null, "'+tm[2]+'");';}else{fn[fn.length]='n = byTag(n, "'+tm[2]+'");';}q=q.replace(tm[0],"");}}while(!(mm=q.match(modeRe))){var matched=false;for(var j=0;j<tklen;j++){var t=tk[j];var m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i];});q=q.replace(m[0],"");matched=true;break;}}if(!matched){throw'Error parsing selector, parsing failed at "'+q+'"';}}if(mm[1]){fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";';q=q.replace(mm[1],"");}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f;},select:function(path,root,type){if(!root||root==document){root=document;}if(typeof root=="string"){root=document.getElementById(root);}var paths=path.split(",");var results=[];for(var i=0,len=paths.length;i<len;i++){var p=paths[i].replace(trimRe,"");if(!cache[p]){cache[p]=actuate.widget.DomQuery.compile(p);if(!cache[p]){throw p+" is not a valid selector";}}var result=cache[p](root);if(result&&result!=document){results=results.concat(result);}}if(paths.length>1){return nodup(results);}return results;},selectNode:function(path,root){return actuate.widget.DomQuery.select(path,root)[0];},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=actuate.widget.DomQuery.compile(path,"select");}var n=valueCache[path](root);n=n[0]?n[0]:n;var v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v);},selectNumber:function(path,root,defaultValue){var v=actuate.widget.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v);},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el);}var isArray=actuate.util.Utility.isArray(el);var result=actuate.widget.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0);},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=actuate.widget.DomQuery.compile(ss,"simple");}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result;},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v;},"!=":function(a,v){return a!=v;},"^=":function(a,v){return a&&a.substr(0,v.length)==v;},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v;},"*=":function(a,v){return a&&a.indexOf(v)!==-1;},"%=":function(a,v){return(a%v)==0;},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-");},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1;}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci;}}return r;},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci;}}return r;},"nth-child":function(c,a){var r=[],ri=-1;var m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a);var f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j;}}pn._batch=batch;}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n;}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n;}}}return r;},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci;}}return r;},"empty":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break;}}if(empty){r[++ri]=ci;}}return r;},"contains":function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci;}}return r;},"nodeValue":function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci;}}return r;},"checked":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci;}}return r;},"not":function(c,ss){return actuate.widget.DomQuery.filter(c,ss,true);},"any":function(c,selectors){var ss=selectors.split("|");var r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(actuate.widget.DomQuery.is(ci,s)){r[++ri]=ci;break;}}}return r;},"odd":function(c){return this["nth-child"](c,"odd");},"even":function(c){return this["nth-child"](c,"even");},"nth":function(c,a){return c[a-1]||[];},"first":function(c){return c[0]||[];},"last":function(c){return c[c.length-1]||[];},"has":function(c,ss){var s=actuate.widget.DomQuery.select;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci;}}return r;},"next":function(c,ss){var is=actuate.widget.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci;}}return r;},"prev":function(c,ss){var is=actuate.widget.DomQuery.is;var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci;}}return r;}}};}();actuate.util.Package.define("actuate.widget");actuate.widget.Template=actuate.Class.create();actuate.widget.Template.prototype={_disableFormats:false,_re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,_html:null,initialize:function(E){var B=arguments;if(actuate.util.Utility.isArray(E)){E=E.join("");}else{if(B.length>1){var C=[];for(var D=0,A=B.length;D<A;D++){if(typeof B[D]=="object"){actuate.Class.extend(this,B[D]);}else{C[C.length]=B[D];}}E=C.join("");}}this._html=E;},applyTemplate:function(B){var A=this._disableFormats!==true;var E=actuate.widget.util.Format,C=this;var D=function(G,I,L,H){if(L&&A){if(L.substr(0,5)=="this."){return C.call(L.substr(5),B[I],B);}else{if(H){var K=/^\s*['"](.*)["']\s*$/;H=H.split(",");for(var J=0,F=H.length;J<F;J++){H[J]=H[J].replace(K,"$1");}H=[B[I]].concat(H);}else{H=[B[I]];}return E[L].apply(E,H);}}else{return B[I]!==undefined?B[I]:"";}};return this._html.replace(this._re,D);},insertFirst:function(B,A,C){return this._doInsert("afterBegin",B,A,C);},_insertBefore:function(B,A,C){return this._doInsert("beforeBegin",B,A,C);},_insertAfter:function(B,A,C){return this._doInsert("afterEnd",B,A,C);},_append:function(B,A,C){return this._doInsert("beforeEnd",B,A,C);},_doInsert:function(C,E,B,A){E=actuate.widget.Element.prototype.getDom(E);var D=this.insertHtml(C,E,this.applyTemplate(B));return A?actuate.widget.Element.prototype.get(D,true):D;},createHtml:function(A){var C=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i;if(typeof A=="string"){return A;}var F="";if(actuate.util.Utility.isArray(A)){for(var D=0,B=A.length;D<B;D++){F+=createHtml(A[D]);}return F;}if(!A.tag){A.tag="div";}F+="<"+A.tag;for(var E in A){if(E=="tag"||E=="children"||E=="cn"||E=="html"||typeof A[E]=="function"){continue;}if(E=="style"){var I=A["style"];if(typeof I=="function"){I=I.call();}if(typeof I=="string"){F+=' style="'+I+'"';}else{if(typeof I=="object"){F+=' style="';for(var H in I){if(typeof I[H]!="function"){F+=H+":"+I[H]+";";}}F+='"';}}}else{if(E=="cls"){F+=' class="'+A["cls"]+'"';}else{if(E=="htmlFor"){F+=' for="'+A["htmlFor"]+'"';}else{F+=" "+E+'="'+A[E]+'"';}}}}if(C.test(A.tag)){F+="/>";}else{F+=">";var G=A.children||A.cn;if(G){F+=this.createHtml(G);}else{if(A.html){F+=A.html;}}F+="</"+A.tag+">";}return F;},insertHtml:function(D,F,E){var A=/^table|tbody|tr|td$/i;D=D.toLowerCase();if(F.insertAdjacentHTML){if(A.test(F.tagName)){var C;if(C=this.insertIntoTable(F.tagName.toLowerCase(),D,F,E)){return C;}}switch(D){case"beforebegin":F.insertAdjacentHTML("BeforeBegin",E);return F.previousSibling;case"afterbegin":F.insertAdjacentHTML("AfterBegin",E);return F.firstChild;case"beforeend":F.insertAdjacentHTML("BeforeEnd",E);return F.lastChild;case"afterend":F.insertAdjacentHTML("AfterEnd",E);return F.nextSibling;}throw'Illegal insertion point  "'+D+'"';}var B=F.ownerDocument.createRange();var G;switch(D){case"beforebegin":B.setStartBefore(F);G=actuate.util.Utility.createContextualFragment(E,B);F.parentNode.insertBefore(G,F);return F.previousSibling;case"afterbegin":if(F.firstChild){B.setStartBefore(F.firstChild);G=actuate.util.Utility.createContextualFragment(E,B);F.insertBefore(G,F.firstChild);return F.firstChild;}else{F.innerHTML=E;return F.firstChild;}case"beforeend":if(F.lastChild){B.setStartAfter(F.lastChild);G=actuate.util.Utility.createContextualFragment(E,B);F.appendChild(G);return F.lastChild;}else{F.innerHTML=E;return F.lastChild;}case"afterend":B.setStartAfter(F);G=actuate.util.Utility.createContextualFragment(E,B);F.parentNode.insertBefore(G,F.nextSibling);return F.nextSibling;}throw'Illegal insertion point  "'+D+'"';},ts:"<table>",te:"</table>",tbs:this.ts+"<tbody>",tbe:"</tbody>"+this.te,trs:this.tbs+"<tr>",tre:"</tr>"+this.tbe,tempTableEl:null,ieTable:function(F,D,C,E){this.tempTableEl.innerHTML=[D,C,E].join("");var A=-1,B=this.tempTableEl;while(++A<F){B=B.firstChild;}return B;},insertIntoTable:function(A,B,D,C){if(!this.tempTableEl){this.tempTableEl=document.createElement("div");}var E;var F=null;if(A=="td"){if(B=="afterbegin"||B=="beforeend"){return ;}if(B=="beforebegin"){F=D;D=D.parentNode;}else{F=D.nextSibling;D=D.parentNode;}E=ieTable(4,this.trs,C,this.tre);}else{if(A=="tr"){if(B=="beforebegin"){F=D;D=D.parentNode;E=ieTable(3,this.tbs,C,this.tbe);}else{if(B=="afterend"){F=D.nextSibling;D=D.parentNode;E=ieTable(3,this.tbs,C,this.tbe);}else{if(B=="afterbegin"){F=D.firstChild;}E=ieTable(4,this.trs,C,this.tre);}}}else{if(A=="tbody"){if(B=="beforebegin"){F=D;D=D.parentNode;E=ieTable(2,this.ts,C,this.te);}else{if(B=="afterend"){F=D.nextSibling;D=D.parentNode;E=ieTable(2,this.ts,C,this.te);}else{if(B=="afterbegin"){F=D.firstChild;}E=ieTable(3,this.tbs,C,this.tbe);}}}else{if(B=="beforebegin"||B=="afterend"){return ;}if(B=="afterbegin"){F=D.firstChild;}E=ieTable(2,this.ts,C,this.te);}}}D.insertBefore(E,F);return E;},compile:function(){var fm=actuate.widget.util.Format;var useF=this.disableFormats!==true;var sep="+";var fn=function(m,name,format,args){if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"(";}else{format='this.call("'+format.substr(5)+'", ';args=", values";}}else{args="";format="(values['"+name+"'] == undefined ? '' : ";}return"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'";};var body;body="this.compiled = function(values){ return '"+this._html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this._re,fn)+"';};";eval(body);return this;},overwrite:function(B,A,C){B=actuate.widget.Element.getDom(B);B.innerHTML=this.applyTemplate(A);return C?actuate.widget.Element.get(B.firstChild,true):B.firstChild;}};actuate.widget.Template.prototype.append=actuate.widget.Template.prototype._append;actuate.widget.Template.prototype.apply=actuate.widget.Template.prototype.applyTemplate;actuate.widget.XTemplate=actuate.Class.create();actuate.widget.XTemplate.superclass=actuate.widget.Template.prototype;actuate.widget.XTemplate.prototype=actuate.Class.extend(new actuate.widget.Template(),{initialize:function(){actuate.widget.XTemplate.superclass.initialize.apply(this,arguments);var P=this._html;P=["<tpl>",P,"</tpl>"].join("");var O=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/;var N=/^<tpl\b[^>]*?for="(.*?)"/;var L=/^<tpl\b[^>]*?if="(.*?)"/;var J=/^<tpl\b[^>]*?exec="(.*?)"/;var C,B=0;var G=[];while(C=P.match(O)){var M=C[0].match(N);var K=C[0].match(L);var I=C[0].match(J);var E=null,H=null,D=null;var A=M&&M[1]?M[1]:"";if(K){E=K&&K[1]?K[1]:null;if(E){H=new Function("values","parent","xindex","xcount","with(values){ return "+(actuate.widget.util.Format.htmlDecode(E))+"; }");}}if(I){E=I&&I[1]?I[1]:null;if(E){D=new Function("values","parent","xindex","xcount","with(values){ "+(actuate.widget.util.Format.htmlDecode(E))+"; }");}}if(A){switch(A){case".":A=new Function("values","parent","with(values){ return values; }");break;case"..":A=new Function("values","parent","with(values){ return parent; }");break;default:A=new Function("values","parent","with(values){ return "+A+"; }");}}G.push({id:B,target:A,exec:D,test:H,body:C[1]||""});P=P.replace(C[0],"{xtpl"+B+"}");++B;}for(var F=G.length-1;F>=0;--F){this.compileTpl(G[F]);}this.master=G[G.length-1];this.tpls=G;},re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(A,H,G,D,C){var J=this.tpls[A];if(J.test&&!J.test.call(this,H,G,D,C)){return"";}if(J.exec&&J.exec.call(this,H,G,D,C)){return"";}var I=J.target?J.target.call(this,H,G):H;G=J.target?H:G;if(J.target&&actuate.util.Utility.isArray(I)){var B=[];for(var E=0,F=I.length;E<F;E++){B[B.length]=J.compiled.call(this,I[E],G,E+1,F);}return B.join("");}return J.compiled.call(this,I,G,D,C);},compileTpl:function(tpl){var fm=actuate.widget.util.Format;var useF=this.disableFormats!==true;var sep=actuate.util.Utility.isGecko?"+":",";var fn=function(m,name,format,args,math){if(name.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'";}var v;if(name==="."){v="values";}else{if(name==="#"){v="xindex";}else{if(name.indexOf(".")!=-1){v=name;}else{v="values['"+name+"']";}}}if(math){v="("+v+math+")";}if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"(";}else{format='this.call("'+format.substr(5)+'", ';args=", values";}}else{args="";format="("+v+" === undefined ? '' : ";}return"'"+sep+format+v+args+")"+sep+"'";};var codeFn=function(m,code){return"'"+sep+"("+code+")"+sep+"'";};var body;if(actuate.util.Utility.isGecko){body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};";}else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("");}eval(body);return this;},applyTemplate:function(A){return this.master.compiled.call(this,A,{},1,1);},compile:function(){return this;}});actuate.widget.XTemplate.prototype.apply=actuate.widget.XTemplate.prototype.applyTemplate;actuate.widget.XTemplate.from=function(A){A=actuate.widget.Element.getDom(A);return new actuate.widget.XTemplate(A.value||A.innerHTML);};actuate.widget.KeyMap=actuate.Class.create();actuate.widget.KeyMap.prototype={initialize:function(C,B,A){this._ele=actuate.widget.Element.get(C);this.eventName=A||"keyup";this.bindings=[];if(B){this.addBinding(B);}this.enable();},stopEvent:false,addBinding:function(D){if(actuate.util.Utility.isArray(D)){for(var F=0,H=D.length;F<H;F++){this.addBinding(D[F]);}return ;}var N=D.key,C=D.shift,A=D.ctrl,G=D.alt,J=D.fn||D.handler,M=D.scope;if(D.stopEvent){this.stopEvent=D.stopEvent;}if(typeof N=="string"){var K=[];var I=N.toUpperCase();for(var E=0,H=I.length;E<H;E++){K.push(I.charCodeAt(E));}N=K;}var B=actuate.util.Utility.isArray(N);var L=function(R){if((!C||R.shiftKey)&&(!A||R.ctrlKey)&&(!G||R.altKey)){var P=R.getKey();if(B){for(var Q=0,O=N.length;Q<O;Q++){if(N[Q]==P){if(this.stopEvent){R.stopEvent();}J.call(M||window,P,R);return ;}}}else{if(P==N){if(this.stopEvent){R.stopEvent();}J.call(M||window,P,R);}}}};this.bindings.push(L);},on:function(B,D,C){var G,A,E,F;if(typeof B=="object"&&!actuate.util.Utility.isArray(B)){G=B.key;A=B.shift;E=B.ctrl;F=B.alt;}else{G=B;}this.addBinding({key:G,shift:A,ctrl:E,alt:F,fn:D,scope:C});},handleKeyDown:function(D){if(this.enabled){var B=this.bindings;for(var C=0,A=B.length;C<A;C++){B[C].call(this,D);}}},isEnabled:function(){return this.enabled;},enable:function(){if(!this.enabled){this._ele._addListener(this.eventName,this.handleKeyDown,this);this.enabled=true;}},disable:function(){if(this.enabled){this._ele._removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false;}}};actuate.widget.KeyNav=actuate.Class.create();actuate.widget.KeyNav.prototype={disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,initialize:function(B,A){actuate.Class.extend(this,A||{});if(!B){return ;}this._ele=actuate.widget.Element.get(B);if(!this.disabled){this.disabled=true;this.enable();}},prepareEvent:function(C){var A=C.getKey();var B=this.keyToHandler[A];if(actuate.util.Utility.isSafari2&&B&&A>=37&&A<=40){C.stopEvent();}},relay:function(C){var A=C.getKey();var B=this.keyToHandler[A];if(B&&this[B]){if(this.doRelay(C,this[B],B)!==true){C[this.defaultEventAction]();}}},doRelay:function(C,B,A){return B.call(this.scope||this,C);},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},enable:function(){if(this.disabled){if(this.forceKeyDown||actuate.util.Utility.isIE||actuate.util.Utility.isSafari3||actuate.util.Utility.isAir){this._ele.on("keydown",this.relay,this);}else{this._ele.on("keydown",this.prepareEvent,this);this._ele.on("keypress",this.relay,this);}this.disabled=false;}},disable:function(){if(!this.disabled){if(this.forceKeyDown||actuate.util.Utility.isIE||actuate.util.Utility.isSafari3||actuate.util.Utility.isAir){this._ele.un("keydown",this.relay,this);}else{this._ele.un("keydown",this.prepareEvent,this);this._ele.un("keypress",this.relay,this);}this.disabled=true;}}};actuate.util.Package.define("actuate.widget");(function(){var B=actuate.widget.lib.Dom;var Q=actuate.widget.lib.Event;var I=actuate.widget.lib.Anim;var L=actuate.util.Utility;var M={};var J=/(-[a-z])/gi;var C=function(A,D){return D.charAt(1).toUpperCase();};var O=document.defaultView;var H;var N=actuate.util.Browser.isStrict?{select:1}:{input:1,select:1,textarea:1};var K=actuate.Class.create();K.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';K._idSeed=0;K._cache={};K._propCache={};K._classReCache={};var J=/(-[a-z])/gi;var C=function(A,D){return D.charAt(1).toUpperCase();};K._id=function(A,D){D=D||"actuate-gen";A=this.getDom(A);K._idSeed+=1;var E=D+(K._idSeed);return A?(A.id?A.id:(A.id=E)):E;};K.id=K._id;K.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};K.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};K.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};K.prototype={_defaultUnit:"px",_unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,dom:null,originalDisplay:"",visibilityMode:1,DISPLAY:2,autoBoxAdjust:true,matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],trimRe:/^\s+|\s+$/g,each:function(S,R){var E=this.elements;for(var D=0,A=E.length;D<A;D++){if(S.call(R||E[D],E[D],this,D)===false){break;}}return this;},insertFirst:function(D,A){D=D||{};if(typeof D=="object"&&!D.nodeType&&!D.dom){return this.createChild(D,this.dom.firstChild,A);}else{D=this.getDom(D);this.dom.insertBefore(D,this.dom.firstChild);return !A?this.get(D):D;}},findParentNode:function(R,E,A){var D=K.fly(this.dom.parentNode,"_internal");return D?D.findParent(R,E,A):null;},up:function(D,A){return this.findParentNode(D,A,true);},down:function(A,D){var E=actuate.widget.DomQuery.selectNode(" > "+A,this.dom);return D?E:actuate.widget.Element.prototype.get(E);},_domCache:{},initialize:function(A,D){var E=typeof A=="string"?document.getElementById(A):A;if(!E){return null;}var R=E.id;if(D!==true&&R&&K._cache[R]){return K._cache[R];}this.dom=E;this.id=R||K.id(E);},getTextWidth:function(R,D,A){var E=actuate.widget.util.TextMetrics.measure(this.dom,actuate.util.Utility.value(R,this.dom.innerHTML,true)).width;return Math.min(Math.max(E,D||0),A||1000000);},repaint:function(){var A=this.dom;this.addClass("actuate-widget-repaint");setTimeout(function(){actuate.widget.Element.get(A).removeClass("actuate-widget-repaint");},1);return this;},_setVisibilityMode:function(A){this.visibilityMode=A;return this;},enableDisplayMode:function(A){this._setVisibilityMode(this.DISPLAY);if(typeof A!="undefined"){this.originalDisplay=A;}return this;},is:function(A){return actuate.widget.DomQuery.is(this.dom,A);},anim:function(R,S,D,T,E,A){D=D||"run";S=S||{};var U=actuate.widget.lib.Anim[D](this.dom,R,(S.duration||T)||0.35,(S.easing||E)||"easeOut",function(){actuate.Method.callback(A,this);actuate.Method.callback(S.callback,S.scope||this,[this,S]);},this);S.anim=U;return U;},preanim:function(A,D){return !A[D]?false:(typeof A[D]=="object"?A[D]:{duration:A[D+1],callback:A[D+2],easing:A[D+3]});},select:function(D){if(D.indexOf(".")>=0||D.indexOf(" ")){return this.selectExt.apply(this,arguments);}var A=new actuate.widget.CompositeElementLite();A.add(this._getNodes(this.dom,null,D));return A;},selectExt:function(A,R,E){if(!E){E=this.dom;}var D;if(typeof A=="string"){D=actuate.widget.DomQuery.select(A,E);}else{if(A.length!==undefined){D=A;}else{throw"Invalid selector";}}if(R===true){return new actuate.widget.CompositeElement(D);}else{return new actuate.widget.CompositeElementLite(D);}},query:function(A){return actuate.widget.DomQuery.select(A,this.dom);},child:function(A,D){var E=actuate.widget.DomQuery.selectNode(A,this.dom);return D?E:actuate.widget.Element.get(E);},_selectNode:function(D,A){return this._select(D,A)[0];},_select:function(W,T,S){if(!T||T==document){T=document;}if(typeof T=="string"){T=document.getElementById(T);}var V=W.split(",");var D=[];for(var E=0,R=V.length;E<R;E++){var A=V[E].replace(this.trimRe,"");var U=this._retrieveNode(T);if(U&&U!=document){D=D.concat(U);}}return D;},_retrieveNode:function(A){var D;var E=A||document;E=this._getNodes(E,D,"span");return E;},_getNodes:function(W,U,E){var b=[],Y=-1,V;if(!W){return b;}E=E||"*";if(typeof W.getElementsByTagName!="undefined"){W=[W];}if(!U){for(var S=0,A;A=W[S];S++){V=A.getElementsByTagName(E);for(var R=0,a;a=V[R];R++){b[++Y]=a;}}}else{if(U=="/"||U==">"){var T=E.toUpperCase();for(var S=0,A,X;A=W[S];S++){X=A.children||A.childNodes;for(var R=0,Z;Z=X[R];R++){if(Z.nodeName==T||Z.nodeName==E||E=="*"){b[++Y]=Z;}}}}else{if(U=="+"){var T=E.toUpperCase();for(var S=0,D;D=W[S];S++){while((D=D.nextSibling)&&D.nodeType!=1){}if(D&&(D.nodeName==T||D.nodeName==E||E=="*")){b[++Y]=D;}}}else{if(U=="~"){for(var S=0,D;D=W[S];S++){while((D=D.nextSibling)&&(D.nodeType!=1||(E=="*"||D.tagName.toLowerCase()!=E))){}if(D){b[++Y]=D;}}}}}}return b;},_setVisible:function(A){if(this.visibilityMode==this.DISPLAY){this._setDisplayed(A);}else{this._fixDisplay();this.dom.style.visibility=A?"visible":"hidden";}return this;},_fixDisplay:function(){if(this.getStyle("display")=="none"){this.setStyle("visibility","hidden");this.setStyle("display",this.originalDisplay);if(this.getStyle("display")=="none"){this.setStyle("display","block");}}},_setDisplayed:function(A){if(typeof A=="boolean"){A=A?this.originalDisplay:"none";}this.setStyle("display",A);return this;},addClass:function(E){if(actuate.util.Utility.isArray(E)){for(var D=0,A=E.length;D<A;D++){this.addClass(E[D]);}}else{if(E&&!this.hasClass(E)){this.dom.className=this.dom.className+" "+E;}}return this;},removeClass:function(R){if(!R||!this.dom.className){return this;}if(actuate.util.Utility.isArray(R)){for(var D=0,A=R.length;D<A;D++){this.removeClass(R[D]);}}else{if(this.hasClass(R)){var E=K._classReCache[R];if(!E){E=new RegExp("(?:^|\\s+)"+R+"(?:\\s+|$)","g");K._classReCache[R]=E;}this.dom.className=this.dom.className.replace(E," ");}}return this;},hasClass:function(A){return A&&(" "+this.dom.className+" ").indexOf(" "+A+" ")!=-1;},replaceClass:function(D,A){this.removeClass(D);this.addClass(A);return this;},setStyle:function(T,S){if(typeof T=="string"){var E;if(!(E=K._propCache[T])){var D=/(-[a-z])/gi;var A=function(U,V){return V.charAt(1).toUpperCase();};E=K._propCache[T]=T.replace(D,A);}if(E=="opacity"){this.setOpacity(S);}else{this.dom.style[E]=S;}}else{for(var R in T){if(typeof T[R]!="function"){this.setStyle(R,T[R]);}}}return this;},_applyStyles:function(R){var E;if(R){E=this.get(this.dom);if(typeof R=="string"){var D=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;var S;while((S=D.exec(R))!=null){E.setStyle(S[1],S[2]);}}else{if(typeof R=="object"){for(var A in R){E.setStyle(A,R[A]);}}else{if(typeof R=="function"){this._applyStyles(E,R.call());}}}}return this;},hide:function(){this._setVisible(false);return this;},show:function(){this._setVisible(true);return this;},update:function(D,A,E){if(typeof D=="undefined"){D="";}if(A!==true){this.dom.innerHTML=D;if(typeof E=="function"){E();}return this;}},unselectable:function(){this.dom.unselectable="on";this._applyStyles("-moz-user-select:none;-khtml-user-select:none;");this.addClass("actuate-unselectable");return this;},createChild:function(D,A,E){D=D||{tag:"div"};if(A){return actuate.widget.DomHelper.insertBefore(A,D,E!==true);}return actuate.widget.DomHelper[!this.dom.firstChild?"overwrite":"append"](this.dom,D,E!==true);},insertBefore:function(A){A=K.getDom(A);A.parentNode.insertBefore(this.dom,A);return this;},insertAfter:function(A){A=K.getDom(A);A.parentNode.insertBefore(this.dom,A.nextSibling);return this;},insertFirst:function(D,A){D=D||{};if(typeof D=="object"&&!D.nodeType&&!D.dom){return this.createChild(D,this.dom.firstChild,A);}else{D=K.getDom(D);this.dom.insertBefore(D,this.dom.firstChild);return !A?K.get(D):D;}},insertSibling:function(U,R,T){var D;if(actuate.util.Utility.isArray(U)){for(var S=0,A=U.length;S<A;S++){D=this.insertSibling(U[S],R,T);}return D;}R=R?R.toLowerCase():"before";U=U||{};var E=R=="before"?this.dom:this.dom.nextSibling;if(typeof U=="object"&&!U.nodeType&&!U.dom){if(R=="after"&&!this.dom.nextSibling){D=actuate.widget.DomHelper.append(this.dom.parentNode,U,!T);}else{D=actuate.widget.DomHelper[R=="after"?"insertAfter":"insertBefore"](this.dom,U,!T);}}else{D=this.dom.parentNode.insertBefore(K.getDom(U),E);if(!T){D=K.get(D);}}return D;},_append:function(E,S,R){E=this.getDom(E);var D=actuate.widget.Template.prototype.createHtml(S);var A=actuate.widget.Template.prototype.insertHtml("beforeEnd",E,D);return R?this.get(A,true):A;},getValue:function(A){return A?parseInt(this.dom.value,10):this.dom.value;},_adjustWidth:function(A){if(typeof A=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){A-=(this.getBorderWidth("lr")+this.getPadding("lr"));}if(A<0){A=0;}}return A;},_adjustHeight:function(A){if(typeof A=="number"){if(this.autoBoxAdjust&&!this.isBorderBox()){A-=(this.getBorderWidth("tb")+this.getPadding("tb"));}if(A<0){A=0;}}return A;},setWidth:function(A){if(A!="auto"&&isNaN(A)&&(!this._unitPattern.test(A))){return ;}A=this._adjustWidth(A);this.dom.style.width=this._addUnits(A,this._defaultUnit);return this;},setHeight:function(A){if(A!="auto"&&isNaN(A)&&(!this._unitPattern.test(A))){return ;}A=this._adjustHeight(A);this.dom.style.height=this._addUnits(A,this._defaultUnit);return this;},setSize:function(D,A){if(typeof D=="object"){A=D.height;D=D.width;}D=this._adjustWidth(D);A=this._adjustHeight(A);this.dom.style.width=this._addUnits(D,this._defaultUnit);this.dom.style.height=this._addUnits(A,this._defaultUnit);return this;},_addListener:function(A,R,E,D){actuate.widget.EventManager.on(this.dom,A,R,E||this,D);},_removeListener:function(A,E,D){actuate.widget.EventManager.removeListener(this.dom,A,E,D||this);return this;},removeAllListeners:function(){actuate.widget.EventManager.removeAll(this.dom);return this;},_addUnits:function(D,A){if(D===""||D=="auto"){return D;}else{if(D=="auto2"){return"auto";}}if(D===undefined){return"";}if(typeof D=="number"||!this._unitPattern.test(D)){return D+(A||"px");}return D;},getDom:function(A){if(!A||!document){return null;}return A.dom?A.dom:(typeof A=="string"?document.getElementById(A):A);},getDoc:function(){return this.get(document);},getBody:function(){return this.get(document.body||document.documentElement);},getStyleSize:function(){var A,E,R=this.dom,D=R.style;if(D.width&&D.width!="auto"){A=parseInt(D.width,10);if(actuate.util.Utility.isBorderBox){A-=this.getFrameWidth("lr");}}if(D.height&&D.height!="auto"){E=parseInt(D.height,10);if(actuate.util.Utility.isBorderBox){E-=this.getFrameWidth("tb");}}return{width:A||this.getWidth(true),height:E||this.getHeight(true)};},getFrameWidth:function(D,A){return A&&actuate.util.Utility.isBorderBox?0:(this.getPadding(D)+this.getBorderWidth(D));},setBox:function(R,S,D){var A=R.width,E=R.height;if((S&&!this.autoBoxAdjust)&&!this.isBorderBox()){A-=(this.getBorderWidth("lr")+this.getPadding("lr"));E-=(this.getBorderWidth("tb")+this.getPadding("tb"));}this.setBounds(R.x,R.y,A,E);return this;},setBounds:function(D,R,E,A){this.setSize(E,A);this.setLocation(D,R);return this;},getPadding:function(A){return this.addStyles(A,actuate.widget.Element.paddings);},getBorderWidth:function(A){return this.addStyles(A,actuate.widget.Element.borders);},getMargins:function(A){if(!A){return{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0};}else{return this.addStyles(A,actuate.widget.Element.margins);}},addStyles:function(T,S){var U=0,E,D;for(var R=0,A=T.length;R<A;R++){E=this.getStyle(S[T.charAt(R)]);if(E){D=parseInt(E,10);if(D){U+=(D>=0?D:-1*D);}}}return U;},getHeight:function(D){var A=this.dom.offsetHeight||0;A=D!==true?A:A-this.getBorderWidth("tb")-this.getPadding("tb");return A<0?0:A;},getWidth:function(D){var A=this.dom.offsetWidth||0;A=D!==true?A:A-this.getBorderWidth("lr")-this.getPadding("lr");return A<0?0:A;},getStyle:function(){var A=document.defaultView;return A&&A.getComputedStyle?function(T){var S=this.dom,D,R,E;if(T=="float"){T="cssFloat";}if(D=S.style[T]){return D;}if(R=A.getComputedStyle(S,"")){if(!(E=actuate.widget.Element._propCache[T])){E=actuate.widget.Element._propCache[T]=T.replace(J,C);}return R[E];}return null;}:function(V){var T=this.dom,E,S,R;if(V=="opacity"){if(typeof T.style.filter=="string"){var D=T.style.filter.match(/alpha\(opacity=(.*)\)/i);if(D){var U=parseFloat(D[1]);if(!isNaN(U)){return U?U/100:0;}}}return 1;}else{if(V=="float"){V="styleFloat";}}if(!(R=actuate.widget.Element._propCache[V])){R=actuate.widget.Element._propCache[V]=V.replace(J,C);}if(E=T.style[R]){return E;}if(S=T.currentStyle){return S[R];}return null;};}(),getColor:function(S,U,R){var W=this.getStyle(S);if(!W||W=="transparent"||W=="inherit"){return U;}var A=typeof R=="undefined"?"#":R;if(W.substr(0,4)=="rgb("){var V=W.slice(4,W.length-1).split(",");for(var D=0;D<3;D++){var E=parseInt(V[D]);var X=E.toString(16);if(E<16){X="0"+X;}A+=X;}}else{if(W.substr(0,1)=="#"){if(W.length==4){for(var D=1;D<4;D++){var T=W.charAt(D);A+=T+T;}}else{if(W.length==7){A+=W.substr(1);}}}}return(A.length>5?A.toLowerCase():U);},get:function(D){var A,S,R;if(!D){return null;}if(typeof D=="string"){if(!(S=document.getElementById(D))){return null;}if(A=K._cache[D]){A.dom=S;}else{A=K._cache[D]=new K(S);}return A;}else{if(D.tagName){if(!(R=D.id)){R=K._id(D);}if(A=K._cache[R]){A.dom=D;}else{A=K._cache[R]=new K(D);}return A;}else{if(D instanceof K){if(D!=H){D.dom=document.getElementById(D.id)||D.dom;K._cache[D.id]=D;}return D;}else{if(D==document){if(!H){var E=function(){};E.prototype=K.prototype;H=new E();H.dom=document;}return H;}}}}return null;},focus:function(){try{this.dom.focus();}catch(A){}return this;},blur:function(){try{this.dom.blur();}catch(A){}return this;},wrap:function(A,D){if(!A){A={tag:"div"};}var E=actuate.widget.DomHelper.insertBefore(this.dom,A,!D);E.dom?E.dom.appendChild(this.dom):E.appendChild(this.dom);return E;},remove:function(){actuate.widget.DomHelper.removeNode(this.dom);},hover:function(R,E,S){var D=function(T){if(!T.within(this,true)){R.apply(S||this,arguments);}};var A=function(T){if(!T.within(this,true)){E.apply(S||this,arguments);}};this._addListener("mouseover",D,this.dom);this._addListener("mouseout",A,this.dom);return this;},addClassOnOver:function(E,D,A){this.hover(function(){if(typeof D=="function"){D(E);}else{K.fly(this,"_internal").addClass(E);}},function(){if(typeof A=="function"){A(E);}else{K.fly(this,"_internal").removeClass(E);}});return this;},addClassOnFocus:function(E,A,D){this.on("focus",function(){if(typeof A=="function"){A(E);}else{K.fly(this,"_internal").addClass(E);}},this.dom);this.on("blur",function(){if(typeof D=="function"){D(E);}else{K.fly(this,"_internal").removeClass(E);}},this.dom);return this;},addClassOnClick:function(D,R,A){var E=this.dom;this._addListener("mousedown",function(){if(typeof R=="function"){R(D);}else{K.fly(E,"_internal").addClass(D);}var T=K.getDoc();var S=function(){if(typeof A=="function"){A(D);}else{K.fly(E,"_internal").removeClass(D);}T._removeListener("mouseup",S);};T._addListener("mouseup",S);});return this;},getHeight:function(D){var A=this.dom.offsetHeight||0;A=D!==true?A:A-this.getBorderWidth("tb")-this.getPadding("tb");return A<0?0:A;},getWidth:function(D){var A=this.dom.offsetWidth||0;A=D!==true?A:A-this.getBorderWidth("lr")-this.getPadding("lr");return A<0?0:A;},getComputedHeight:function(){var A=Math.max(this.dom.offsetHeight,this.dom.clientHeight);if(!A){A=parseInt(this.getStyle("height"),10)||0;if(!this.isBorderBox()){A+=this.getFrameWidth("tb");}}return A;},getBorderWidth:function(A){return this._addStyles(A,K.borders);},getPadding:function(A){return this._addStyles(A,K.paddings);},_addStyles:function(T,S){var U=0,E,D;for(var R=0,A=T.length;R<A;R++){E=this.getStyle(S[T.charAt(R)]);if(E){D=parseInt(E,10);if(D){U+=(D>=0?D:-1*D);}}}return U;},contains:function(A){if(!A){return false;}try{return B.isAncestor(this.dom,(!A.childNodes&&A.dom)?A.dom:A);}catch(D){return false;}},getStyles:function(){var D=arguments,A=D.length,R={};for(var E=0;E<A;E++){R[D[E]]=this.getStyle(D[E]);}return R;},getStyle:function(){return O&&O.getComputedStyle?function(S){var R=this.dom,A,E,D;if(S=="float"){S="cssFloat";}if(A=R.style[S]){return A;}if(E=O.getComputedStyle(R,"")){if(!(D=M[S])){D=M[S]=S.replace(J,C);}return E[D];}return null;}:function(U){var S=this.dom,D,R,E;if(U=="opacity"){if(typeof S.style.filter=="string"){var A=S.style.filter.match(/alpha\(opacity=(.*)\)/i);if(A){var T=parseFloat(A[1]);if(!isNaN(T)){return T?T/100:0;}}}return 1;}else{if(U=="float"){U="styleFloat";}}if(!(E=M[U])){E=M[U]=U.replace(J,C);}if(D=S.style[E]){return D;}if(R=S.currentStyle){return R[E];}return null;};}(),setStyle:function(R,E){if(typeof R=="string"){var A;if(!(A=M[R])){A=M[R]=R.replace(J,C);}if(A=="opacity"){this.setOpacity(E);}else{this.dom.style[A]=E;}}else{for(var D in R){if(typeof R[D]!="function"){this.setStyle(D,R[D]);}}}return this;},applyStyles:function(A){actuate.widget.DomHelper.applyStyles(this.dom,A);return this;},getLeft:function(A){if(!A){return this.getX();}else{return parseInt(this.getStyle("left"),10)||0;}},getRight:function(A){if(!A){return this.getX()+this.getWidth();}else{return(this.getLeft(true)+this.getWidth())||0;}},getTop:function(A){if(!A){return this.getY();}else{return parseInt(this.getStyle("top"),10)||0;}},getBottom:function(A){if(!A){return this.getY()+this.getHeight();}else{return(this.getTop(true)+this.getHeight())||0;}},clip:function(){if(!this.isClipped){this.isClipped=true;this.originalClip={"o":this.getStyle("overflow"),"x":this.getStyle("overflow-x"),"y":this.getStyle("overflow-y")};this.setStyle("overflow","hidden");this.setStyle("overflow-x","hidden");this.setStyle("overflow-y","hidden");}return this;},unclip:function(){if(this.isClipped){this.isClipped=false;var A=this.originalClip;if(A.o){this.setStyle("overflow",A.o);}if(A.x){this.setStyle("overflow-x",A.x);}if(A.y){this.setStyle("overflow-y",A.y);}}return this;},position:function(R,E,A,D){if(!R){if(this.getStyle("position")=="static"){this.setStyle("position","relative");}}else{this.setStyle("position",R);}if(E){this.setStyle("z-index",E);}if(A!==undefined&&D!==undefined){this.setXY([A,D]);}else{if(A!==undefined){this.setX(A);}else{if(D!==undefined){this.setY(D);}}}},clearPositioning:function(A){A=A||"";this.setStyle({"left":A,"right":A,"top":A,"bottom":A,"z-index":"","position":"static"});return this;},getPositioning:function(){var A=this.getStyle("left");var D=this.getStyle("top");return{"position":this.getStyle("position"),"left":A,"right":A?"":this.getStyle("right"),"top":D,"bottom":D?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")};},setPositioning:function(A){this.applyStyles(A);if(A.right=="auto"){this.dom.style.right="";}if(A.bottom=="auto"){this.dom.style.bottom="";}return this;},swallowEvent:function(D,E){var S=function(T){T.stopPropagation();if(E){T.preventDefault();}};if(L.isArray(D)){for(var R=0,A=D.length;R<A;R++){this.on(D[R],S);}return this;}this.on(D,S);return this;},isBorderBox:function(){return N[this.dom.tagName.toLowerCase()]||actuate.util.Utility.isBorderBox;},getBox:function(T,X){var a;if(!X){a=this.getXY();}else{var E=parseInt(this.getStyle("left"),10)||0;var W=parseInt(this.getStyle("top"),10)||0;a=[E,W];}var D=this.dom,Y=D.offsetWidth,S=D.offsetHeight,U;if(!T){U={x:a[0],y:a[1],0:a[0],1:a[1],width:Y,height:S};}else{var R=this.getBorderWidth("l")+this.getPadding("l");var A=this.getBorderWidth("r")+this.getPadding("r");var Z=this.getBorderWidth("t")+this.getPadding("t");var V=this.getBorderWidth("b")+this.getPadding("b");U={x:a[0]+R,y:a[1]+Z,0:a[0]+R,1:a[1]+Z,width:Y-(R+A),height:S-(Z+V)};}U.right=U.x+U.width;U.bottom=U.y+U.height;return U;},getFrameWidth:function(D,A){return A&&actuate.widget.isBorderBox?0:(this.getPadding(D)+this.getBorderWidth(D));},alignTo:function(D,A,E){var R=this.getAlignToXY(D,A,E);this.setXY(R);return this;},getAlignToXY:function(S,e,g){S=K.get(S);if(!S||!S.dom){throw"Element.alignToXY with an element that doesn't exist";}var s=this.dom;var t=false;var R="",D="";g=g||[0,0];if(!e){e="tl-bl";}else{if(e=="?"){e="tl-bl?";}else{if(e.indexOf("-")==-1){e="tl-"+e;}}}e=e.toLowerCase();var k=e.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!k){throw"Element.alignTo with an invalid alignment "+e;}R=k[1];D=k[2];t=!!k[3];var v=this.getAnchorXY(R,true);var u=S.getAnchorXY(D,false);var W=u[0]-v[0]+g[0];var V=u[1]-v[1]+g[1];if(t){var X=this.getWidth(),n=this.getHeight(),a=S.getRegion();var Y=B.getViewWidth()-5,q=B.getViewHeight()-5;var A=R.charAt(0),E=R.charAt(R.length-1);var T=D.charAt(0),U=D.charAt(D.length-1);var Z=((A=="t"&&T=="b")||(A=="b"&&T=="t"));var b=((E=="r"&&U=="l")||(E=="l"&&U=="r"));var z=document;var l=(z.documentElement.scrollLeft||z.body.scrollLeft||0)+5;var i=(z.documentElement.scrollTop||z.body.scrollTop||0)+5;if((W+X)>Y+l){W=b?a.left-X:Y+l-X;}if(W<l){W=b?a.right:l;}if((V+n)>q+i){V=Z?a.top-n:q+i-n;}if(V<i){V=Z?a.bottom:i;}}return[W,V];},getAnchorXY:function(R,W,Z){var Y,S,D=false;if(!Z){var T=this.dom;if(T==document.body||T==document){D=true;Y=B.getViewWidth();S=B.getViewHeight();}else{Y=this.getWidth();S=this.getHeight();}}else{Y=Z.width;S=Z.height;}var X=0,V=0,A=Math.round;switch((R||"tl").toLowerCase()){case"c":X=A(Y*0.5);V=A(S*0.5);break;case"t":X=A(Y*0.5);V=0;break;case"l":X=0;V=A(S*0.5);break;case"r":X=Y;V=A(S*0.5);break;case"b":X=A(Y*0.5);V=S;break;case"tl":X=0;V=0;break;case"bl":X=0;V=S;break;case"br":X=Y;V=S;break;case"tr":X=Y;V=0;break;}if(W===true){return[X,V];}if(D){var U=this.getScroll();return[X+U.left,V+U.top];}var E=this.getXY();return[X+E[0],V+E[1]];},getX:function(){return B.getX(this.dom);},getY:function(){return B.getY(this.dom);},getXY:function(){return B.getXY(this.dom);},getScroll:function(){var R=this.dom,E=document;if(R==E||R==E.body){var A,D;if(L.isIE&&L.isStrict){A=E.documentElement.scrollLeft||(E.body.scrollLeft||0);D=E.documentElement.scrollTop||(E.body.scrollTop||0);}else{A=window.pageXOffset||(E.body.scrollLeft||0);D=window.pageYOffset||(E.body.scrollTop||0);}return{left:A,top:D};}else{return{left:R.scrollLeft,top:R.scrollTop};}},getRegion:function(){return B.getRegion(this.dom);},setX:function(A){B.setX(this.dom,A);return this;},setY:function(A){B.setY(this.dom,A);return this;},setXY:function(A){B.setXY(this.dom,A);return this;},setLocation:function(A,D){this.setXY([A,D]);return this;},moveTo:function(A,D){this.setXY([A,D]);return this;},setX:function(A){B.setX(this.dom,A);return this;},setY:function(A){B.setY(this.dom,A);return this;},setLeft:function(A){this.setStyle("left",this._addUnits(A));return this;},setTop:function(A){this.setStyle("top",this._addUnits(A));return this;},setRight:function(A){this.setStyle("right",this._addUnits(A));return this;},setBottom:function(A){this.setStyle("bottom",this._addUnits(A));return this;},translatePoints:function(A,T){if(typeof A=="object"||L.isArray(A)){T=A[1];A=A[0];}var R=this.getStyle("position");var S=this.getXY();var D=parseInt(this.getStyle("left"),10);var E=parseInt(this.getStyle("top"),10);if(isNaN(D)){D=(R=="relative")?0:this.dom.offsetLeft;}if(isNaN(E)){E=(R=="relative")?0:this.dom.offsetTop;}return{left:(A-S[0]+D),top:(T-S[1]+E)};},setOverflow:function(A){if(A=="auto"&&L.isMac&&L.isGecko2){this.dom.style.overflow="hidden";actuate.Method.defer(1,(function(){this.dom.style.overflow="auto";}),this);}else{this.dom.style.overflow=A;}},getSize:function(A){return{width:this.getWidth(A),height:this.getHeight(A)};},scrollChildIntoView:function(D,A){K.fly(D,"_scrollChildIntoView").scrollIntoView(this,A);},scrollIntoView:function(E,T){var Y=K.getDom(E)||K.getBody().dom;var S=this.dom;var R=this.getOffsetsTo(Y),V=R[0]+Y.scrollLeft,d=R[1]+Y.scrollTop,Z=d+S.offsetHeight,D=V+S.offsetWidth;var A=Y.clientHeight;var W=parseInt(Y.scrollTop,10);var a=parseInt(Y.scrollLeft,10);var U=W+A;var X=a+Y.clientWidth;if(S.offsetHeight>A||d<W){Y.scrollTop=d;}else{if(Z>U){Y.scrollTop=Z-A;}}Y.scrollTop=Y.scrollTop;if(T!==false){if(S.offsetWidth>Y.clientWidth||V<a){Y.scrollLeft=V;}else{if(D>X){Y.scrollLeft=D-Y.clientWidth;}}Y.scrollLeft=Y.scrollLeft;}return this;},getOffsetsTo:function(A){var E=this.getXY();var D=K.fly(A,"_internal").getXY();return[E[0]-D[0],E[1]-D[1]];},findParent:function(V,U,D){var R=this.dom,A=document.body,T=0,S=actuate.widget.DomQuery,E;U=U||50;if(typeof U!="number"){E=actuate.widget.Element.getDom(U);U=10;}while(R&&R.nodeType==1&&T<U&&R!=A&&R!=E){if(S.is(R,V)){return D?K.get(R):R;}T++;R=R.parentNode;}return null;},isVisible:function(A){var D=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none");if(A!==true||!D){return D;}var E=this.dom.parentNode;while(E&&E.tagName.toLowerCase()!="body"){if(!K.fly(E,"_isVisible").isVisible()){return false;}E=E.parentNode;}return true;},setStyle:function(R,E){if(typeof R=="string"){var A;if(!(A=M[R])){A=M[R]=R.replace(J,C);}if(A=="opacity"){this.setOpacity(E);}else{this.dom.style[A]=E;}}else{for(var D in R){if(typeof R[D]!="function"){this.setStyle(D,R[D]);}}}return this;},setLeftTop:function(D,A){this.dom.style.left=this._addUnits(D);this.dom.style.top=this._addUnits(A);return this;},getViewSize:function(){var R=this.dom,E=document,D=0,A=0;if(R==E||R==E.body){return{width:B.getViewWidth(),height:B.getViewHeight()};}else{return{width:R.clientWidth,height:R.clientHeight};}},addKeyListener:function(D,R,E){var A;if(typeof D!="object"||actuate.util.Utility.isArray(D)){A={key:D,fn:R,scope:E};}else{A={key:D.key,shift:D.shift,ctrl:D.ctrl,alt:D.alt,fn:R,scope:E};}return new actuate.widget.KeyMap(this,A);},fly:function(A){return K.fly(A);},insertHtml:function(D,E,A){var R=actuate.widget.DomHelper.insertHtml(D,this.dom,E);return A?K.get(R):R;},isScrollable:function(){var A=this.dom;return A.scrollHeight>A.clientHeight||A.scrollWidth>A.clientWidth;},scrollTo:function(D,E,A){var S=D.toLowerCase()=="left"?"scrollLeft":"scrollTop";if(!A||!I){this.dom[S]=E;}else{var R=S=="scrollLeft"?[E,this.dom.scrollTop]:[this.dom.scrollLeft,E];this.anim({scroll:{"to":R}},this.preanim(arguments,2),"scroll");}return this;},scroll:function(X,D,R){if(!this.isScrollable()){return ;}var S=this.dom;var T=S.scrollLeft,b=S.scrollTop;var Y=S.scrollWidth,V=S.scrollHeight;var U=S.clientWidth,A=S.clientHeight;X=X.toLowerCase();var E=false;var W=this.preanim(arguments,2);switch(X){case"l":case"left":if(Y-T>U){var Z=Math.min(T+D,Y-U);this.scrollTo("left",Z,W);E=true;}break;case"r":case"right":if(T>0){var Z=Math.max(T-D,0);this.scrollTo("left",Z,W);E=true;}break;case"t":case"top":case"up":if(b>0){var Z=Math.max(b-D,0);this.scrollTo("top",Z,W);E=true;}break;case"b":case"bottom":case"down":if(V-b>A){var Z=Math.min(b+D,V-A);this.scrollTo("top",Z,W);E=true;}break;}return E;},getConstrainToXY:function(){var A={top:0,left:0,bottom:0,right:0};return function(E,d,S,U){E=K.get(E);S=S?actuate.util.Utility.applyIf(S,A):A;var c,i,b=0,a=0;if(E.dom==document.body||E.dom==document){c=actuate.widget.lib.Dom.getViewWidth();i=actuate.widget.lib.Dom.getViewHeight();}else{c=E.dom.clientWidth;i=E.dom.clientHeight;if(!d){var Z=E.getXY();b=Z[0];a=Z[1];}}var Y=E.getScroll();b+=S.left+Y.left;a+=S.top+Y.top;c-=S.right;i-=S.bottom;var e=b+c;var D=a+i;var R=U||(!d?this.getXY():[this.getLeft(true),this.getTop(true)]);var W=R[0],V=R[1];var X=this.dom.offsetWidth,g=this.dom.offsetHeight;var T=false;if((W+X)>e){W=e-X;T=true;}if((V+g)>D){V=D-g;T=true;}if(W<b){W=b;T=true;}if(V<a){V=a;T=true;}return T?[W,V]:false;};}(),adjustForConstraints:function(E,A,D){return this.getConstrainToXY(A||document,false,D,E)||E;},createProxy:function(A,R,E){A=typeof A=="object"?A:{tag:"div",cls:A};var D;if(R){D=actuate.widget.DomHelper.append(R,A,true);}else{D=actuate.widget.DomHelper.insertBefore(this.dom,A,true);}if(E){D.setBox(this.getBox());}return D;},mask:function(E,A){if(this.getStyle("position")=="static"){this.addClass("actuate-masked-relative");}if(this._maskMsg){this._maskMsg.remove();}if(this._mask){this._mask.remove();}this._mask=actuate.widget.DomHelper.append(this.dom,{cls:"actuate-el-mask"},true);this.addClass("actuate-masked");this._mask.setDisplayed(true);if(typeof E=="string"){this._maskMsg=actuate.widget.DomHelper.append(this.dom,{cls:"actuate-el-mask-msg",cn:{tag:"div"}},true);var D=this._maskMsg;D.dom.className=A?"actuate-el-mask-msg "+A:"actuate-el-mask-msg";D.dom.firstChild.innerHTML=E;D.setDisplayed(true);D.center(this);}if(actuate.util.Utility.isIE&&!(actuate.util.Utility.isIE7&&actuate.widget.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(this.getWidth(),this.getHeight());}return this._mask;},unmask:function(){if(this._mask){if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg;}this._mask.remove();delete this._mask;}this.removeClass(["actuate-masked","actuate-masked-relative"]);},isMasked:function(){return this._mask&&this._mask.isVisible();},addKeyListener:function(D,R,E){var A;if(typeof D!="object"||actuate.util.Utility.isArray(D)){A={key:D,fn:R,scope:E};}else{A={key:D.key,shift:D.shift,ctrl:D.ctrl,alt:D.alt,fn:R,scope:E};}return new actuate.widget.KeyMap(this,A);},parent:function(A,D){return this.matchNode("parentNode","parentNode",A,D);},next:function(A,D){return this.matchNode("nextSibling","nextSibling",A,D);},prev:function(A,D){return this.matchNode("previousSibling","previousSibling",A,D);},first:function(A,D){return this.matchNode("nextSibling","firstChild",A,D);},last:function(A,D){return this.matchNode("previousSibling","lastChild",A,D);},matchNode:function(D,S,A,E){var R=this.dom[S];while(R){if(R.nodeType==1&&(!A||actuate.widget.DomQuery.is(R,A))){return !E?K.get(R):R;}R=R[D];}return null;},getAttributeNS:(actuate.util.Utility.isIE&&(!(actuate.util.Utility.isIE9&&document.documentMode===9)&&!(actuate.util.Utility.isIE10)))?function(E,A){var R=this.dom;var D=typeof R[E+":"+A];if(D!="undefined"&&D!="unknown"){return R[E+":"+A];}return R[A];}:function(D,A){var E=this.dom;return E.getAttributeNS(D,A)||E.getAttribute(D+":"+A)||E.getAttribute(A)||E[A];}};K.uncache=function(R){for(var E=0,D=arguments,A=D.length;E<A;E++){if(D[E]){delete K._cache[D[E].id||D[E]];}}};K.get=K.prototype.get;K.getDom=K.prototype.getDom;K.getDoc=K.prototype.getDoc;K.getBody=K.prototype.getBody;K.prototype.setVisible=K.prototype._setVisible;var F=function(){};F.prototype=K.prototype;var G=new F();K.Flyweight=function(A){this.dom=A;};K.Flyweight.prototype=G;K.Flyweight.prototype.isFlyweight=true;K._flyweights={};K.fly=function(D,A){A=A||"_global";D=K.getDom(D);if(!D){return null;}if(!K._flyweights[A]){K._flyweights[A]=new K.Flyweight();}K._flyweights[A].dom=D;return K._flyweights[A];};K.destroy=function(){for(var R=0,E=arguments,A=E.length;R<A;R++){var D=E[R];if(D){if(typeof D.destroy=="function"){D.destroy();}else{if(D.dom){D.removeAllListeners();D.remove();}}}}};K.setDisplayed=K._setDisplayed;K.prototype.setDisplayed=K.prototype._setDisplayed;var P=K.prototype;P.on=P._addListener;P.un=P._removeListener;actuate.widget.Element=K;})();actuate.widget.Element.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"};actuate.widget.Element.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"};actuate.widget.Element.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"};(function(){actuate.widget.Layer=actuate.Class.create();var B=[];var A=actuate.widget.Element.prototype;actuate.widget.Layer.superclass=A;actuate.widget.Layer.prototype=actuate.Class.extend(new actuate.widget.Element(),{initialize:function(D,C){D=D||{};var E=actuate.widget.DomHelper;var G=D.parentEl,F=G?actuate.widget.Element.getDom(G):document.body;if(C){this.dom=actuate.widget.Element.getDom(C);}if(!this.dom){var H=D.dh||{tag:"div",cls:"actuate-layer"};this.dom=E.append(F,H);}if(D.cls){this.addClass(D.cls);}this.constrain=D.constrain!==false;this.visibilityMode=actuate.widget.Element.VISIBILITY;if(D.id){this.id=this.dom.id=D.id;}else{this.id=actuate.widget.Element._id(this.dom);}this.zindex=D.zindex||this.getZIndex();this.position("absolute",this.zindex);if(D.shadow){this.shadowOffset=D.shadowOffset||6;this.shadow=new actuate.widget.Shadow({offset:this.shadowOffset,mode:D.shadow});}else{this.shadowOffset=0;}this.useShim=D.shim!==false&&actuate.widget.useShims;this.useDisplay=D.useDisplay;this.hide();},getZIndex:function(){return this.zindex||parseInt(this.getStyle("z-index"),10)||11000;},getShim:function(){if(!this.useShim){return null;}if(this.shim){return this.shim;}var D=B.shift();if(!D){D=this.createShim();D.enableDisplayMode("block");D.dom.style.display="none";D.dom.style.visibility="visible";}var C=this.dom.parentNode;if(D.dom.parentNode!=C){C.insertBefore(D.dom,this.dom);}D.setStyle("z-index",this.getZIndex()-2);this.shim=D;return D;},hideShim:function(){if(this.shim){this.shim._setDisplayed(false);B.push(this.shim);delete this.shim;}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0;}},enableShadow:function(C){if(this.shadow){this.shadowDisabled=false;this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset;if(C){this.sync(true);}}},sync:function(C){var I=this.shadow;if(!this.updating&&this.isVisible()&&(I||this.useShim)){var F=this.getShim();var H=this.getWidth(),E=this.getHeight();var D=this.getLeft(true),J=this.getTop(true);if(I&&!this.shadowDisabled){if(C&&!I.isVisible()){I.show(this);}else{I.realign(D,J,H,E);}if(F){if(C){F.show();}var G=I.adjusts,K=F.dom.style;K.left=(Math.min(D,D+G.l))+"px";K.top=(Math.min(J,J+G.t))+"px";K.width=(H+G.w)+"px";K.height=(E+G.h)+"px";}}else{if(F){if(C){F.show();}F.setSize(H,E);F.setLeftTop(D,J);}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide();}this.removeAllListeners();actuate.widget.DomHelper.removeNode(this.dom);actuate.widget.Element.uncache(this.id);},remove:function(){this.destroy();},beginUpdate:function(){this.updating=true;},endUpdate:function(){this.updating=false;this.sync(true);},hideUnders:function(C){if(this.shadow){this.shadow.hide();}this.hideShim();},constrainXY:function(){if(this.constrain){var G=actuate.widget.lib.Dom.getViewWidth(),C=actuate.widget.lib.Dom.getViewHeight();var L=actuate.widget.Element.getDoc().getScroll();var K=this.getXY();var H=K[0],F=K[1];var I=this.dom.offsetWidth+this.shadowOffset,D=this.dom.offsetHeight+this.shadowOffset;var E=false;if((H+I)>G+L.left){H=G-I-this.shadowOffset;E=true;}if((F+D)>C+L.top){F=C-D-this.shadowOffset;E=true;}if(H<L.left){H=L.left;E=true;}if(F<L.top){F=L.top;E=true;}if(E){if(this.avoidY){var J=this.avoidY;if(F<=J&&(F+D)>=J){F=J-D-5;}}K=[H,F];this.storeXY(K);A.setXY.call(this,K);this.sync();}}},isVisible:function(){return this.visible;},showAction:function(){this.visible=true;if(this.useDisplay===true){this._setDisplayed("");}else{if(this.lastXY){A.setXY.call(this,this.lastXY);}else{if(this.lastLT){A.setLeftTop.call(this,this.lastLT[0],this.lastLT[1]);}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this._setDisplayed(false);}else{this.setLeftTop(-10000,-10000);}},_setVisible:function(E,D,G,H,F){if(E){this.showAction();}if(D&&E){var C=function(){this.sync(true);if(H){H();}}.createDelegate(this);A._setVisible.call(this,true,true,G,C,F);}else{if(!E){this.hideUnders(true);}var C=H;if(D){C=function(){this.hideAction();if(H){H();}}.createDelegate(this);}A._setVisible.call(this,E,D,G,C,F);if(E){this.sync(true);}else{if(!D){this.hideAction();}}}},storeXY:function(C){delete this.lastLT;this.lastXY=C;},storeLeftTop:function(D,C){delete this.lastXY;this.lastLT=[D,C];},afterFx:function(){actuate.widget.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible());},_beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide();}},setLeft:function(C){this.storeLeftTop(C,this.getTop(true));A.setLeft.apply(this,arguments);this.sync();},setTop:function(C){this.storeLeftTop(this.getLeft(true),C);A.setTop.apply(this,arguments);this.sync();},setLeftTop:function(D,C){this.storeLeftTop(D,C);A.setLeftTop.apply(this,arguments);this.sync();},setXY:function(F,D,G,H,E){this._fixDisplay();this._beforeAction();this.storeXY(F);var C=this.createCB(H);A.setXY.call(this,F,D,G,C,E);if(!D){C();}},createCB:function(D){var C=this;return function(){C.constrainXY();C.sync(true);if(D){D();}};},setX:function(C,D,F,G,E){this.setXY([C,this.getY()],D,F,G,E);},setY:function(G,C,E,F,D){this.setXY([this.getX(),G],C,E,F,D);},setSize:function(E,F,D,H,I,G){this._beforeAction();var C=this.createCB(I);A.setSize.call(this,E,F,D,H,C,G);if(!D){C();}},setWidth:function(E,D,G,H,F){this._beforeAction();var C=this.createCB(H);A.setWidth.call(this,E,D,G,C,F);if(!D){C();}},setHeight:function(E,D,G,H,F){this._beforeAction();var C=this.createCB(H);A.setHeight.call(this,E,D,G,C,F);if(!D){C();}},setBounds:function(J,H,K,D,I,F,G,E){this._beforeAction();var C=this.createCB(G);if(!I){this.storeXY([J,H]);A.setXY.call(this,[J,H]);A.setSize.call(this,K,D,I,F,C,E);C();}else{A.setBounds.call(this,J,H,K,D,I,F,C,E);}return this;},setZIndex:function(C){this.zindex=C;this.setStyle("z-index",C+2);if(this.shadow){this.shadow.setZIndex(C+1);}if(this.shim){this.shim.setStyle("z-index",C);}}});})();actuate.util.Package.define("actuate.widget");actuate.widget.Observable=actuate.Class.create();actuate.widget.Observable.prototype={_event_map:null,initialize:function(A){this._event_map={};actuate.Class.extend(this,A);if(this.listeners){for(var B in this.listeners){this.registerEventHandler(B,this.listeners[B]);}delete this.listeners;}},_closure:function(C,B){var A=C+"_c";var D=this[A];if(!D){return this[A]=actuate.Method.bind(this[C],B||this);}return D;},hasListener:function(A){var B=this._event_map[A];return typeof B=="object"&&B.listeners.length>0;},registerEventHandler:function(A,B){A=A.toLowerCase();if(!this._event_map[A]){this._event_map[A]=[];}this._event_map[A].push(B);},unregisterEventHandler:function(C,D){var A=this._event_map[C.toLowerCase()];if(A){for(var B=0;B<A.length;B++){if(A[B]==D){A.splice(B,1);break;}}}},fireEvent:function(D,G){if(this._eventsSuspended!==true){var D=arguments[0].toLowerCase();var A=this._event_map[D];var F=true;if(A){var B=Array.prototype.slice.call(arguments,1);for(var C=0;C<A.length;C++){var E=A[C];if(E){if(E.apply(null,B)===false){F=false;}}}}return F;}return true;},purgeListeners:function(){for(var A in this._event_map){if(typeof this._event_map[A]=="object"){delete this._event_map[A];}}},relayEvents:function(F,D){var E=actuate.Method.createDelegate(function(G){return actuate.Method.createDelegate(function(){var H=[G];for(var I=0;I<arguments.length;I++){H.push(arguments[I]);}return this.fireEvent.apply(this,H);},this);},this);for(var C=0,A=D.length;C<A;C++){var B=D[C];F.on(B,E(B),this);}},suspendEvents:function(){this._eventsSuspended=true;},resumeEvents:function(){this._eventsSuspended=false;}};actuate.widget.Observable.prototype.registerEvent=actuate.widget.Observable.prototype.registerEventHandler;actuate.widget.Observable.prototype.unregisterEvent=actuate.widget.Observable.prototype.unregisterEventHandler;actuate.widget.Observable.prototype.on=function(A,C,B){if(B!=undefined){C=actuate.Method.bind(C,B);}this.registerEventHandler(A,C);};actuate.widget.Observable.prototype.un=actuate.widget.Observable.prototype.unregisterEventHandler;(function(){var B=function(F,G,E){var D=new actuate.widget.util.DelayedTask();return function(){D.delay(G.buffer,F,E,Array.prototype.slice.call(arguments,0));};};var C=function(F,G,E,D){return function(){G.removeListener(E,D);return F.apply(D,arguments);};};var A=function(E,F,D){return function(){var G=Array.prototype.slice.call(arguments,0);setTimeout(function(){E.apply(D,G);},F.delay||10);};};actuate.widget.Event=function(E,D){this.name=D;this.obj=E;this.listeners=[];};actuate.widget.Event.prototype={addListener:function(G,F,E){F=F||this.obj;if(!this.isListening(G,F)){var D=this.createListener(G,F,E);if(!this.firing){this.listeners.push(D);}else{this.listeners=this.listeners.slice(0);this.listeners.push(D);}}},createListener:function(G,F,H){H=H||{};F=F||this.obj;var D={fn:G,scope:F,options:H};var E=G;if(H.delay){E=A(E,H,F);}if(H.single){E=C(E,this,G,F);}if(H.buffer){E=B(E,H,F);}D.fireFn=E;return D;},findListener:function(I,H){H=H||this.obj;var F=this.listeners;for(var G=0,D=F.length;G<D;G++){var E=F[G];if(E.fn==I&&E.scope==H){return G;}}return -1;},isListening:function(E,D){return this.findListener(E,D)!=-1;},removeListener:function(F,E){var D;if((D=this.findListener(F,E))!=-1){if(!this.firing){this.listeners.splice(D,1);}else{this.listeners=this.listeners.slice(0);this.listeners.splice(D,1);}return true;}return false;},clearListeners:function(){this.listeners=[];},fire:function(){var F=this.listeners,I,D=F.length;if(D>0){this.firing=true;var G=Array.prototype.slice.call(arguments,0);for(var H=0;H<D;H++){var E=F[H];if(E.fireFn.apply(E.scope||this.obj||window,arguments)===false){this.firing=false;return false;}}this.firing=false;}return true;}};})();actuate.widget.EventManager=function(){var X,Q,M=false;var N,W,H,S;var P=actuate.widget.lib.Event;var R=actuate.widget.lib.Dom;var A="actuat"+"e";var J={};var O=function(b,E,a,Z,Y){if(actuate.util.browser&&(actuate.util.browser.isAndroid||actuate.util.browser.isIPad)){if(E=="click"){}else{if(E=="mousemove"){E="touchmove";}else{if(E=="mousedown"){E="touchstart";}else{if(E=="mouseup"){E="touchend";}}}}}var d=actuate.widget.Element._id(b);if(!J[d]){J[d]={};}var c=J[d];if(!c[E]){c[E]=[];}var D=c[E];D.push({id:d,ename:E,fn:a,wrap:Z,scope:Y});P.on(b,E,Z);if(E=="mousewheel"&&b.addEventListener){b.addEventListener("DOMMouseScroll",Z,false);P.on(window,"unload",function(){b.removeEventListener("DOMMouseScroll",Z,false);});}if(E=="mousedown"&&b==document){actuate.widget.EventManager.stoppedMouseDownEvent.addListener(Z);}};var I=function(Y,a,e,h){Y=actuate.widget.Element.getDom(Y);var D=actuate.widget.Element._id(Y),g=J[D],E;if(g){var c=g[a],Z;if(c){for(var b=0,d=c.length;b<d;b++){Z=c[b];if(Z.fn==e&&(!h||Z.scope==h)){E=Z.wrap;P.un(Y,a,E);c.splice(b,1);break;}}}}if(a=="mousewheel"&&Y.addEventListener&&E){Y.removeEventListener("DOMMouseScroll",E,false);}if(a=="mousedown"&&Y==document&&E){actuate.widget.EventManager.stoppedMouseDownEvent.removeListener(E);}};var F=function(a){a=actuate.widget.Element.getDom(a);var c=actuate.widget.Element._id(a),b=J[c],E;if(b){for(var Z in b){if(b.hasOwnProperty(Z)){E=b[Z];for(var Y=0,D=E.length;Y<D;Y++){P.un(a,Z,E[Y].wrap);E[Y]=null;}}b[Z]=null;}delete J[c];}};var C=function(){if(!M){M=true;actuate.util.Utility.isReady=true;if(Q){clearInterval(Q);}if(actuate.util.Utility.isGecko||actuate.util.Utility.isOpera){document.removeEventListener("DOMContentLoaded",C,false);}if(actuate.util.Utility.isIE){var D=document.getElementById("ie-deferred-loader");if(D){D.onreadystatechange=null;D.parentNode.removeChild(D);}}if(X){X.fire();X.clearListeners();}}};var B=function(){X=new actuate.widget.Event();if(actuate.util.Utility.isGecko||actuate.util.Utility.isOpera){document.addEventListener("DOMContentLoaded",C,false);}else{if(actuate.util.Utility.isIE){document.write("<s"+'cript id="ie-deferred-loader" defer="defer" src="/'+'/:"></s'+"cript>");var D=document.getElementById("ie-deferred-loader");D.onreadystatechange=function(){if(this.readyState=="complete"){C();}};}else{if(actuate.util.Utility.isSafari){Q=setInterval(function(){var E=document.readyState;if(E=="complete"){C();}},10);}}}P.on(window,"load",C);};var V=function(E,Y){var D=new actuate.widget.util.DelayedTask(E);return function(Z){Z=new actuate.widget.EventObjectImpl(Z);D.delay(Y.buffer,E,null,[Z]);};};var T=function(a,Z,D,Y,E){return function(b){actuate.widget.EventManager.removeListener(Z,D,Y,E);a(b);};};var G=function(D,E){return function(Y){Y=new actuate.widget.EventObjectImpl(Y);setTimeout(function(){D(Y);},E.delay||10);};};var L=function(Y,E,D,c,b){var d=(!D||typeof D=="boolean")?{}:D;c=c||d.fn;b=b||d.scope;if(typeof (c)!="function"){throw'Invalid function: "'+c+'"';}var a=actuate.widget.Element.getDom(Y);if(!a){throw'Error listening for "'+E+'". Element "'+Y+"\" doesn't exist.";}var Z=function(h){if(!window[A]){return ;}h=actuate.widget.EventObject.setEvent(h);var g;if(d.delegate){g=h.getTarget(d.delegate,a);if(!g){return ;}}else{g=h.target;}if(d.stopEvent===true){h.stopEvent();}if(d.preventDefault===true){h.preventDefault();}if(d.stopPropagation===true){h.stopPropagation();}if(d.normalized===false){h=h.browserEvent;}c.call(b||a,h,g,d);};if(d.delay){Z=G(Z,d);}if(d.single){Z=T(Z,a,E,c,b);}if(d.buffer){Z=V(Z,d);}O(a,E,c,Z,b);return Z;};var K=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;var U={addListener:function(Y,D,a,Z,E){if(typeof D=="object"){var c=D;for(var b in c){if(K.test(b)){continue;}if(typeof c[b]=="function"){L(Y,b,c,c[b],c.scope);}else{L(Y,b,c[b]);}}return ;}return L(Y,D,E,a,Z);},removeListener:function(E,D,Z,Y){return I(E,D,Z,Y);},removeAll:function(D){return F(D);},onDocumentReady:function(Y,E,D){if(M){X.addListener(Y,E,D);X.fire();X.clearListeners();return ;}if(!X){B();}D=D||{};if(!D.delay){D.delay=1;}X.addListener(Y,E,D);},doResizeEvent:function(){N.fire(R.getViewWidth(),R.getViewHeight());},onWindowResize:function(Y,E,D){if(!N){N=new actuate.widget.Event();W=new actuate.widget.util.DelayedTask(this.doResizeEvent);P.on(window,"resize",this.fireWindowResize,this);}N.addListener(Y,E,D);},fireWindowResize:function(){if(N){if((actuate.util.Utility.isIE||actuate.util.Utility.isAir)&&W){W.delay(50);}else{N.fire(R.getViewWidth(),R.getViewHeight());}}},onTextResize:function(Z,Y,D){if(!H){H=new actuate.widget.Event();var E=new actuate.widget.Element(document.createElement("div"));E.dom.className="x-text-resize";E.dom.innerHTML="X";E.appendTo(document.body);S=E.dom.offsetHeight;setInterval(function(){if(E.dom.offsetHeight!=S){H.fire(S,S=E.dom.offsetHeight);}},this.textResizeInterval);}H.addListener(Z,Y,D);},removeResizeListener:function(E,D){if(N){N.removeListener(E,D);}},fireResize:function(){if(N){N.fire(R.getViewWidth(),R.getViewHeight());}},ieDeferSrc:false,textResizeInterval:50};U.on=U.addListener;U.un=U.removeListener;U.stoppedMouseDownEvent=new actuate.widget.Event();return U;}();actuate.widget.onReady=actuate.widget.EventManager.onDocumentReady;(function(){var A=function(){var C=actuate.util.Utility;var D=document.body||document.getElementsByTagName("body")[0];if(!D){return false;}var B=[" ",C.isIE?"actuate-browser-ie "+(C.isIE6?"actuate-browser-ie6":(C.isIE7?"actuate-browser-ie7":"actuate-browser-ie8")):C.isGecko?"actuate-browser-gecko "+(C.isGecko2?"actuate-browser-gecko2":"actuate-browser-gecko3"):C.isOpera?"actuate-browser-opera":C.isSafari?"actuate-browser-safari":C.isChrome?"actuate-browser-chrome":""];if(C.isIE8Compat){B.push("actuate-browser-ie8compat");}if(C.isMac){B.push("actuate-browser-mac");}if(C.isLinux){B.push("actuate-browser-linux");}if(C.isBorderBox){B.push("actuate-browser-border-box");}if(C.isStrict){var E=D.parentNode;if(E){E.className+=" actuate-browser-strict";}}D.className+=B.join(" ");return true;};if(!A()){actuate.widget.onReady(A);}})();actuate.widget.EventObject=function(){var B=actuate.widget.lib.Event;var A={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};var C=actuate.util.Utility.isIE?{1:0,4:1,2:2}:(actuate.util.Utility.isSafari?{1:0,2:1,3:2}:{0:0,1:1,2:2});actuate.widget.EventObjectImpl=function(D){if(D){this.setEvent(D.browserEvent||D);}};actuate.widget.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:false,ctrlKey:false,altKey:false,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,setEvent:function(D){if(D==this||(D&&D.browserEvent)){return D;}this.browserEvent=D;if(D){this.button=D.button?C[D.button]:(D.which?D.which-1:-1);if(D.type=="click"&&this.button==-1){this.button=0;}this.type=D.type;this.shiftKey=D.shiftKey;this.ctrlKey=D.ctrlKey||D.metaKey;this.altKey=D.altKey;this.keyCode=D.keyCode;this.charCode=D.charCode;this.target=B.getTarget(D);this.xy=B.getXY(D);}else{this.button=-1;this.shiftKey=false;this.ctrlKey=false;this.altKey=false;this.keyCode=0;this.charCode=0;this.target=null;this.xy=[0,0];}return this;},stopEvent:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){actuate.widget.EventManager.stoppedMouseDownEvent.fire(this);}B.stopEvent(this.browserEvent);}},preventDefault:function(){if(this.browserEvent){B.preventDefault(this.browserEvent);}},isNavKeyPress:function(){var D=this.keyCode;D=actuate.util.Utility.isSafari?(A[D]||D):D;return(D>=33&&D<=40)||D==this.RETURN||D==this.TAB||D==this.ESC;},isSpecialKey:function(){var D=this.keyCode;return(this.type=="keypress"&&this.ctrlKey)||D==9||D==13||D==40||D==27||(D==16)||(D==17)||(D>=18&&D<=20)||(D>=33&&D<=35)||(D>=36&&D<=39)||(D>=44&&D<=45);},stopPropagation:function(){if(this.browserEvent){if(this.browserEvent.type=="mousedown"){actuate.widget.EventManager.stoppedMouseDownEvent.fire(this);}B.stopPropagation(this.browserEvent);}},getCharCode:function(){return this.charCode||this.keyCode;},getKey:function(){var D=this.keyCode||this.charCode;return actuate.util.Utility.isSafari?(A[D]||D):D;},getPageX:function(){return this.xy[0];},getPageY:function(){return this.xy[1];},getTime:function(){if(this.browserEvent){return B.getTime(this.browserEvent);}return null;},getXY:function(){return this.xy;},getTarget:function(E,F,D){return E?actuate.widget.Element.fly(this.target).findParent(E,F,D):(D?actuate.widget.Element.get(this.target):this.target);},getRelatedTarget:function(){if(this.browserEvent){return B.getRelatedTarget(this.browserEvent);}return null;},getWheelDelta:function(){var D=this.browserEvent;var E=0;if(D.wheelDelta){E=D.wheelDelta/120;}else{if(D.detail){E=-D.detail/3;}}return E;},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)?true:false;},within:function(F,G,D){var E=this[G?"getRelatedTarget":"getTarget"]();return E&&F&&((D?(E===actuate.widget.Element.getDom(F)):false)||actuate.widget.Element.fly(F).contains(E));},getPoint:function(){return new actuate.widget.lib.Point(this.xy[0],this.xy[1]);}};return new actuate.widget.EventObjectImpl();}();actuate.widget.ComponentMgr=function(){var B={};var A={};return{register:function(C){if(C&&C.id){B[C.id]=C;}},unregister:function(C){if(C&&C.id){delete B[C.id];}},get:function(C){return C?B[C]:null;}};}();actuate.util.Package.define("actuate.widget");actuate.widget.Component=actuate.Class.create();actuate.widget.Component.superclass=actuate.widget.Observable.prototype;actuate.widget.Component.prototype=actuate.Class.extend(new actuate.widget.Observable(),{rendered:false,id:null,_ele:null,_template:null,disabledClass:"actuate-item-disabled",disabled:false,hideParent:false,hideMode:"display",types:{},_actionMode:"_ele",registerType:function(B,A){this.types[B]=A;A.xtype=B;},isXType:function(B,A){if(typeof B=="function"){B=B.xtype;}else{if(typeof B=="object"){B=B.constructor.xtype;}}return !A?("/"+this.getXTypes()+"/").indexOf("/"+B+"/")!=-1:this.constructor.xtype==B;},initPlugin:function(A){A.init(this);return A;},getXTypes:function(){var A=this.constructor;if(!A.xtypes){var C=[],B=this;while(B&&B.constructor.xtype){C.unshift(B.constructor.xtype);B=B.constructor.superclass;}A.xtypeChain=C;A.xtypes=C.join("/");}return A.xtypes;},initialize:function(B){this.id=null;B=B||{};this.initialConfig=B;actuate.widget.Observable.prototype.initialize.call(this,B);this._getId();actuate.widget.ComponentMgr.register(this);this._initComponent();if(this.plugins){if(actuate.util.Utility.isArray(this.plugins)){for(var C=0,A=this.plugins.length;C<A;C++){this.plugins[C]=this.initPlugin(this.plugins[C]);}}else{this.plugins=this.initPlugin(this.plugins);}}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo;}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo;}}},_initComponent:function(){},_onRender:function(B,A){if(this.autoEl){if(typeof this.autoEl=="string"){this._ele=document.createElement(this.autoEl);}else{var C=document.createElement("div");actuate.widget.DomHelper.overwrite(C,this.autoEl);this._ele=C.firstChild;}if(!this._ele.id){this._ele.id=this._getId();}}if(this._ele){this._ele=actuate.widget.Element.get(this._ele);if(this.allowDomMove!==false){B.dom.insertBefore(this._ele.dom,A);}}},_afterRender:function(A){},render:function(B,A){if(!this.rendered){this.container=actuate.widget.Element.prototype.get(B?B:document.body);if(A!==undefined){if(typeof A=="number"){var C=this.container.dom.childNodes;A=((C&&C.length>A)?C[A]:undefined);}else{A=actuate.widget.Element.getDom(A);}}this.rendered=true;this._onRender(this.container,A||null);if(this.cls){this._ele.addClass(this.cls);delete this.cls;}if(this.style){var D=this._wrap?this._wrap:this.wrap;var E=D?D:this._ele;E.applyStyles(this.style);delete this.style;}this.fireEvent("render",this);this._afterRender();if(this.disabled){if(actuate.util.browser.__isIE()){this._disableTimer=window.setTimeout(actuate.Method.createDelegate(this.disable,this),100);}else{this.disable();}}if(this.hidden){this._onHide();}}return this;},disable:function(){if(this.rendered){this._onDisable();}this.disabled=true;this.fireEvent("disable",this);return this;},_onDisable:function(){if(this._disableTimer){window.clearTimeout(this._disableTimer);this._disableTimer=null;}this._ele.addClass(this.disabledClass);this._ele.dom.disabled=true;},enable:function(){if(this.rendered){this._onEnable();}this.disabled=false;this.fireEvent("enable",this);return this;},_onEnable:function(){if(this._disableTimer){window.clearTimeout(this._disableTimer);this._disableTimer=null;}this._ele.removeClass(this.disabledClass);this._ele.dom.disabled=false;},setDisabled:function(A){if(this.disabled!=A){if(A){this.disable();}else{this.enable();}}},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(typeof this.autoRender=="boolean"?actuate.widget.Element.getBody():this.autoRender);}if(this.rendered){this._onShow();}this.fireEvent("show",this);}return this;},_onShow:function(){if(this.hideParent){this.container.removeClass("actuate-hide-"+this.hideMode);}else{this._ele.removeClass("actuate-hide-"+this.hideMode);}},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.hidden=true;if(this.rendered){this._onHide();}this.fireEvent("hide",this);}return this;},_onHide:function(){if(this.hideParent){this.container.addClass("actuate-hide-"+this.hideMode);}else{this._ele.addClass("actuate-hide-"+this.hideMode);}},destroy:function(){if(this.fireEvent("beforedestroy",this)!==false){this._beforeDestroy();if(this.rendered){this._ele.removeAllListeners();this._ele.remove();if(this._actionMode=="container"){this.container.remove();}}this._onDestroy();actuate.widget.ComponentMgr.unregister(this);this.fireEvent("destroy",this);}},_onDestroy:function(){},_beforeDestroy:function(){},focus:function(A){if(this.rendered){this._ele.focus();if(A===true){this._ele.dom.select();}}return this;},blur:function(){if(this.rendered){this._ele.blur();}return this;},setVisibility:function(A){if(!A==this.hidden){return this;}if(A){this.show();}else{this.hide();}return this;},addClass:function(A){if(this._ele){this._ele.addClass(A);}else{this.cls=this.cls?this.cls+" "+A:A;}},removeClass:function(A){if(this._ele){this._ele.removeClass(A);}else{if(this.cls){var B=this.cls.split(" ");actuate.util.Utility.arrayRemoveValue(B,A);this.cls=B.join(" ");}}},getEl:function(){return this._ele;},_getId:function(){if(!this.id){actuate.widget.Component.AUTO_ID++;this.id="actu-widget-"+actuate.widget.Component.AUTO_ID;}return this.id;},getItemId:function(){return this.itemId||this._getId();},applyToMarkup:function(A){this.allowDomMove=false;this._ele=actuate.widget.Element.get(A);this.render(this._ele.dom.parentNode);},getState:function(){return null;},isVisible:function(){return this.rendered&&this._getActionEl().isVisible();},_getActionEl:function(){return this[this._actionMode];},_mon:function(E,B,D,C,A){if(!this.mons){this.mons=[];this.registerEventHandler("beforedestroy",actuate.Method.bind(function(){for(var H=0,G=this.mons.length;H<G;H++){var F=this.mons[H];F.item.un(F.ename,F.fn,F.scope);}},this));}this.mons.push({item:E,ename:B,fn:D,scope:C});E._addListener(B,actuate.Method.bind(D,C,A));}});actuate.widget.Component.AUTO_ID=1000;actuate.util.Package.define("actuate.widget");actuate.widget.BoxComponent=actuate.Class.create();actuate.widget.BoxComponent.superclass=actuate.widget.Component.prototype;actuate.widget.BoxComponent.prototype=actuate.Class.extend(new actuate.widget.Component(),{initialize:function(A){actuate.widget.BoxComponent.superclass.initialize.call(this,A);},_boxReady:false,_deferHeight:false,setSize:function(B,D){if(typeof B=="object"){D=B.height;B=B.width;}if(!this._boxReady){this.width=B;this.height=D;return this;}if(this.lastSize&&this.lastSize.width==B&&this.lastSize.height==D){return this;}this.lastSize={width:B,height:D};var C=this._adjustSize(B,D);var F=C.width,A=C.height;if(F!==undefined||A!==undefined){var E=this.getResizeEl();if(!this._deferHeight&&F!==undefined&&A!==undefined){E.setSize(F,A);}else{if(!this._deferHeight&&A!==undefined){E.setHeight(A);}else{if(F!==undefined){E.setWidth(F);}}}this._onResize(F,A,B,D);this.fireEvent("resize",this,F,A,B,D);}return this;},setWidth:function(A){return this.setSize(A);},setHeight:function(A){return this.setSize(undefined,A);},getSize:function(){if(this._ele!=null){return this._ele.getSize();}},getPosition:function(A){if(A===true){return[this._ele.getLeft(true),this._ele.getTop(true)];}return this.xy||this._ele.getXY();},getBox:function(A){var B=this._ele.getSize();if(A===true){B.x=this._ele.getLeft(true);B.y=this._ele.getTop(true);}else{var C=this.xy||this._ele.getXY();B.x=C[0];B.y=C[1];}return B;},updateBox:function(A){this.setSize(A.width,A.height);this.setPagePosition(A.x,A.y);return this;},getResizeEl:function(){return this.resizeEl||this._ele;},getPositionEl:function(){return this.positionEl||this._ele;},setPosition:function(A,F){if(A&&typeof A[1]=="number"){F=A[1];A=A[0];}this.x=A;this.y=F;if(!this._boxReady){return this;}var B=this._adjustPosition(A,F);var E=B.x,D=B.y;var C=this.getPositionEl();if(E!==undefined||D!==undefined){if(E!==undefined&&D!==undefined){C.setLeftTop(E,D);}else{if(E!==undefined){C.setLeft(E);}else{if(D!==undefined){C.setTop(D);}}}this._onPosition(E,D);this.fireEvent("move",this,E,D);}return this;},setPagePosition:function(A,C){if(A&&typeof A[1]=="number"){C=A[1];A=A[0];}this.pageX=A;this.pageY=C;if(!this._boxReady){return ;}if(A===undefined||C===undefined){return ;}var B=this._ele.translatePoints(A,C);this.setPosition(B.left,B.top);return this;},_onRender:function(B,A){actuate.widget.BoxComponent.superclass._onRender.call(this,B,A);if(this.resizeEl){this.resizeEl=actuate.widget.Element.get(this.resizeEl);}if(this.positionEl){this.positionEl=actuate.widget.Element.get(this.positionEl);}},_afterRender:function(){actuate.widget.BoxComponent.superclass._afterRender.call(this);this._boxReady=true;this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y);}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY);}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this._ele.getWidth(),this.autoHeight?undefined:this._ele.getHeight());return this;},_onResize:function(D,B,A,C){},_onPosition:function(A,B){},_adjustSize:function(A,B){if(this.autoWidth){A="auto";}if(this.autoHeight){B="auto";}return{width:A,height:B};},_adjustPosition:function(A,B){return{x:A,y:B};}});actuate.util.Package.define("actuate.widget");actuate.widget.Container=actuate.Class.create();actuate.widget.Container.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.Container.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{layouts:{},defaultType:"panel",layout:null,_initComponent:function(){actuate.widget.Container.superclass._initComponent.call(this);var A=this.items;if(A&&A.length>0){delete this.items;if(actuate.util.Utility.isArray(A)&&A.length>0){this._add.apply(this,A);}else{this._add(A);}}},_add:function(C){if(!this.items){this._initItems();}var B=arguments,A=B.length;if(A>1){for(var D=0;D<A;D++){if(B[D]){this._add(B[D]);}}return ;}var F=this._lookupComponent(this._applyDefaults(C));var E=this.items.length;if(this.fireEvent("beforeadd",this,F,E)!==false&&this._onBeforeAdd(F)!==false){this.items.add(F);F.ownerCt=this;this.fireEvent("add",this,F,E);}return F;},add:function(B,C,A){this._add(B);if(C||C==undefined){if(A){this.layout.layout();}else{this._doLayout();}}},getComponent:function(A){if(typeof A=="object"){return A;}if(this.items&&this.items.get){return this.items.get(A);}return null;},_lookupComponent:function(A){if(!A.initialConfig){return this._createComponent(A);}return A;},_createComponent:function(A){return new this.types[A.xtype||this.defaultType](A);},_initItems:function(){if(!this.items){this.items=new actuate.widget.util.MixedCollection(false,this.getComponentId);this._getLayout();}},_getLayout:function(){if(!this.layout){var A=new actuate.widget.panel.layout.ContainerLayout(this.layoutConfig);this._setLayout(A);}return this.layout;},_setLayout:function(A){this._initItems();if(A){this.layout=A;A.setContainer(this);}},_doLayout:function(D){if(this.rendered&&this.layout){this.layout.layout();}if(D!==false&&this.items){var C=this.items.items;if(!C){return ;}for(var B=0,A=C.length;B<A;B++){var E=C[B];if(E._doLayout){E._doLayout();}}}},render:function(){actuate.widget.Component.prototype.render.call(this,arguments[0],arguments[1]);if(this.layout){if(typeof this.layout=="string"){this.layout=new actuate.widget.Container.prototype.layouts[this.layout.toLowerCase()](this.layoutConfig);}this._setLayout(this.layout);}if(this.activeItem!==undefined){var A=this.activeItem;delete this.activeItem;this.layout.setActiveItem(A);return ;}if(!this.ownerCt){this._doLayout();}if(this.monitorResize===true){actuate.widget.EventManager.onWindowResize(this._doLayout,this,[false]);}actuate.widget.Container.superclass._afterRender(this);},getLayoutTarget:function(){return this._ele;},insert:function(D,C){if(!this.items){this._initItems();}var B=arguments,A=B.length;if(A>2){for(var E=A-1;E>=1;--E){this.insert(D,B[E]);}return ;}var F=this._lookupComponent(this._applyDefaults(C));if(F.ownerCt==this&&this.items.indexOf(F)<D){--D;}if(this.fireEvent("beforeadd",this,F,D)!==false&&this._onBeforeAdd(F)!==false){this.items.insert(D,F);F.ownerCt=this;this.fireEvent("add",this,F,D);}return F;},_applyDefaults:function(A){if(!A){return ;}if(this.defaults){if(typeof A=="string"){A=ctuate.widget.ComponentMgr.get(A);actuate.Class.extend(A,this.defaults);}else{if(!A.events){actuate.util.Utility.applyIf(A,this.defaults);}else{actuate.Class.extend(A,this.defaults);}}}return A;},_onBeforeAdd:function(A){if(A.ownerCt){A.ownerCt.remove(A,false);}if(this.hideBorders==true){A.border=(A.border==true);}},remove:function(A,B){var C=this.getComponent(A);if(C&&this.fireEvent("beforeremove",this,C)!==false){this.items.remove(C);delete C.ownerCt;if(B===true||(B!==false&&this.autoDestroy)){C.destroy();}if(this.layout&&this.layout.activeItem==C){delete this.layout.activeItem;}this.fireEvent("remove",this,C);}return C;},removeAll:function(B){var C,A=[];while((C=this.items.last())){A.unshift(this.remove(C,B));}this.items=null;this._initItems();return A;},_beforeDestroy:function(){if(this.items){actuate.widget.Element.destroy.apply(actuate.widget.Element,this.items.items);}if(this.monitorResize){actuate.widget.EventManager.removeResizeListener(this._doLayout,this);}if(this.layout&&this.layout.destroy){this.layout.destroy();}actuate.widget.Container.superclass._beforeDestroy.call(this);},_onShow:function(){actuate.widget.Container.superclass._onShow.apply(this,arguments);this._doLayout(true);}});actuate.widget.DataView=actuate.Class.extendClass(actuate.widget.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,last:false,initialize:function(A){this._onBeforeLoad_c=actuate.Method.bind(this._onBeforeLoad,this);this._refresh_c=actuate.Method.bind(this.refresh,this);this._onAdd_c=actuate.Method.bind(this._onAdd,this);this._onRemove_c=actuate.Method.bind(this._onRemove,this);this._onUpdate_c=actuate.Method.bind(this._onUpdate,this);actuate.widget.DataView.superclass.initialize.call(this,A);},_initComponent:function(){actuate.widget.DataView.superclass._initComponent.call(this);if(typeof this.tpl=="string"){this.tpl=new actuate.widget.XTemplate(this.tpl);}this.all=new actuate.widget.CompositeElementLite();this.selected=new actuate.widget.CompositeElementLite();},select:function(D,G,B,F){if(actuate.util.Utility.isArray(D)){if(!G){this.clearSelections(true);}for(var C=0,A=D.length;C<A;C++){this.select(D[C],true,true);}if(!B){this.fireEvent("selectionchange",this,this.selected.elements);}}else{var E=this.getNode(D);if(!G){this.clearSelections(true);}if(E&&!this.isSelected(E)){if(this.fireEvent("beforeselect",this,E,this.selected.elements,F)!==false){actuate.widget.Element.fly(E).removeClass(this.overClass);actuate.widget.Element.fly(E).addClass(this.selectedClass);this.selected.add(E);this.last=E.viewIndex;if(!B){this.fireEvent("selectionchange",this,this.selected.elements);}}}}},setTemplate:function(A){this.tpl=A;if(typeof this.tpl=="string"){this.tpl=new actuate.widget.XTemplate(this.tpl);}this.refresh();},_onRender:function(){if(!this._ele){this._ele=document.createElement("div");this._ele.id=this.id;}actuate.widget.DataView.superclass._onRender.apply(this,arguments);},_afterRender:function(){actuate.widget.DataView.superclass._afterRender.call(this);this._ele.on("click",actuate.Method.bind(this._onClick,this));this._ele.on("dblclick",actuate.Method.bind(this._onDblClick,this));this._ele.on("contextmenu",actuate.Method.bind(this._onContextMenu,this));if(this.overClass||this.trackOver){this._ele.on("mouseover",actuate.Method.bind(this._onMouseOver,this));this._ele.on("mouseout",actuate.Method.bind(this._onMouseOut,this));}var A=new actuate.widget.dd.DragTracker({_onBeforeStart:actuate.Method.createDelegate(this._onBeforeDragStart,this),_onStart:actuate.Method.createDelegate(this._onDragStart,this),_onDrag:actuate.Method.createDelegate(this._onDrag,this),_onEnd:actuate.Method.createDelegate(this._onDragEnd,this),tolerance:3,autoStart:300});A._initEl(this._ele);this.registerEventHandler("beforedestroy",actuate.Method.bind(A.destroy,A));if(this.store){this.setStore(this.store,true);}},refresh:function(){this.clearSelections(false,true);this._ele.update("");var A=null;if(!!this.store){A=this.store.getRange();}if(!!A&&A.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){this._ele.update(this.emptyText);}this.hasSkippedEmptyText=true;this.all.clear();return ;}if(!!A){this.tpl.overwrite(this._ele,this.collectData(A,0));}this.all.fill(actuate.widget.DomQuery.select(this.itemSelector,this._ele.dom));this.updateIndexes(0);},prepareData:function(D){if(D){var B={};var C=this.valueField?D[this.valueField]:null;var E=this.displayField?D[this.displayField]:null;var F=this.titleField?D[this.titleField]:null;for(var A in D){B[A]=D[A];}if(this.displayField&&!this.htmlEncode){if(actuate.util.Utility.isArray(E)){B[this.displayField]=actuate.util.Json.makeArray(E);}else{B[this.displayField]=actuate.util.Utility.htmlEncode(E);}}if(this.valueField){B[this.valueField]=actuate.util.Utility.htmlEncode(C);}if(this.titleField&&(!this.htmlEncode||(this.titleField==this.valueField))){B[this.titleField]=actuate.util.Utility.htmlEncode(F);}return B;}return D;},setFields:function(B,C,A){this.valueField=B;this.displayField=C;this.titleField=A;},collectData:function(B,E){var D=[];for(var C=0,A=B.length;C<A;C++){D[D.length]=this.prepareData(B[C].data,E+C,B[C]);}return D;},bufferRender:function(A){var B=document.createElement("div");this.tpl.overwrite(B,this.collectData(A));return actuate.widget.DomQuery.select(this.itemSelector,B);},_onUpdate:function(F,A){var B=this.store.indexOf(A);var E=this.isSelected(B);var C=this.all.elements[B];var D=this.bufferRender([A],B)[0];this.all.replaceElement(B,D,true);if(E){this.selected.replaceElement(C,D);this.all.item(B).addClass(this.selectedClass);}this.updateIndexes(B,B);},_onAdd:function(E,C,D){if(this.all.getCount()==0){this.refresh();return ;}var B=this.bufferRender(C,D),F,A=this.all.elements;if(D<this.all.getCount()){F=this.all.item(D).insertSibling(B,"before",true);A.splice.apply(A,[D,0].concat(B));}else{F=this.all.last().insertSibling(B,"after",true);A.push.apply(A,B);}this.updateIndexes(D);},_onRemove:function(C,A,B){this.deselect(B);this.all.removeElement(B,true);this.updateIndexes(B);},refreshNode:function(A){this._onUpdate(this.store,this.store.getAt(A));},updateIndexes:function(D,C){var B=this.all.elements;D=D||0;C=C||((C===0)?0:(B.length-1));for(var A=D;A<=C;A++){B[A].viewIndex=A;}},getStore:function(){return this.store;},setStore:function(A,B){if(!B&&this.store){this.store.un("beforeload",this._onBeforeLoad_c);this.store.un("datachanged",this._refresh_c);this.store.un("add",this._onAdd_c);this.store.un("remove",this._onRemove_c);this.store.un("update",this._onUpdate_c);this.store.un("clear",this._refresh_c);}if(A){A.on("beforeload",this._onBeforeLoad_c);A.on("datachanged",this._refresh_c);A.on("add",this._onAdd_c);A.on("remove",this._onRemove_c);A.on("update",this._onUpdate_c);A.on("clear",this._refresh_c);}this.store=A;if(A){this.refresh();}},findItemFromChild:function(A){return actuate.widget.Element.fly(A).findParent(this.itemSelector,this._ele);},_onClick:function(C){var B=C.getTarget(this.itemSelector,this._ele);if(B){var A=this.indexOf(B);if(this._onItemClick(B,A,C)!==false){this.fireEvent("click",this,A,B,C);}}else{if(this.fireEvent("containerclick",this,C)!==false){this.clearSelections();}}},_onContextMenu:function(B){var A=B.getTarget(this.itemSelector,this._ele);if(A){this.fireEvent("contextmenu",this,this.indexOf(A),A,B);}},_onDblClick:function(B){var A=B.getTarget(this.itemSelector,this._ele);if(A){this.fireEvent("dblclick",this,this.indexOf(A),A,B);}},_onMouseOver:function(B){var A=B.getTarget(this.itemSelector,this._ele);if(A&&A!==this.lastItem){if(this.lastItem){var C=actuate.widget.Element.fly(this.lastItem);if(C){C.removeClass(this.overClass);}}this.lastItem=A;actuate.widget.Element.fly(A).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(A),A,B);}},_onMouseOut:function(A){if(this.lastItem){if(!A.within(this.lastItem,true,true)){actuate.widget.Element.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,A);delete this.lastItem;}}},_onItemClick:function(B,A,C){if(this.fireEvent("beforeclick",this,A,B,C)===false){return false;}if(this.multiSelect){this._doMultiSelection(B,A,C);C.preventDefault();}else{if(this.singleSelect){this._doSingleSelection(B,A,C);C.preventDefault();}}return true;},_onBeforeDragStart:function(A){this.dragStartIndex=-1;this.dragEndIndex=-1;return !this.disabled;},_onDragStart:function(A){if(A&&A.target&&this.dragStartIndex<=0){this.dragStartIndex=this.indexOf(A.target);}this.dragging=true;this.fireEvent("dragstart",this,A);},_onDrag:function(B){if(B&&B.target&&this.dragStartIndex>=0){this.dragEndIndex=this.indexOf(B.target);if(this.multiSelect){var C=this.dragStartIndex;var A=this.dragEndIndex;if(C>A){C=this.dragEndIndex;A=this.dragStartIndex;}if(C>=0&&A>=0){this.selectRange(C,A,false,true);}}else{this.clearSelections(true);this.select(this.dragEndIndex,false,true);}}this.fireEvent("drag",this,B);},_onDragEnd:function(A){if(this.dragging&&this.dragStartIndex!=this.dragEndIndex){this.fireEvent("selectionchange",this,this.selected.elements);}this.dragStartIndex=-1;this.dragEndIndex=-1;this.dragging=false;this.fireEvent("dragend",this,A);},_doSingleSelection:function(B,A,C){if(C.ctrlKey&&this.isSelected(A)){this.deselect(A);}else{this.select(A,false,false,C);}},_doMultiSelection:function(C,A,D){if(D.shiftKey&&this.last!==false){var B=this.last;this.selectRange(B,A,D.ctrlKey);this.last=B;}else{if((D.ctrlKey||this.simpleSelect)&&this.isSelected(A)){this.deselect(A);}else{this.select(A,D.ctrlKey||D.shiftKey||this.simpleSelect);}}},getSelectionCount:function(){return this.selected.getCount();},getSelectedNodes:function(){return this.selected.elements;},getSelectedIndexes:function(){var B=[],D=this.selected.elements;for(var C=0,A=D.length;C<A;C++){B.push(D[C].viewIndex);}return B;},getSelectedRecords:function(){var D=[],C=this.selected.elements;for(var B=0,A=C.length;B<A;B++){D[D.length]=this.store.getAt(C[B].viewIndex);}return D;},getRecords:function(B){var E=[],D=B;for(var C=0,A=D.length;C<A;C++){E[E.length]=this.store.getAt(D[C].viewIndex);}return E;},getRecord:function(A){return this.store.getAt(A.viewIndex);},clearSelections:function(A,B){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!B){this.selected.removeClass(this.selectedClass);}this.selected.clear();this.last=false;if(!A){this.fireEvent("selectionchange",this,this.selected.elements);}}},isSelected:function(A){return this.selected.contains(this.getNode(A));},deselect:function(A){if(this.isSelected(A)){A=this.getNode(A);this.selected.removeElement(A);if(this.last==A.viewIndex){this.last=false;}actuate.widget.Element.fly(A).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements);}},selectRange:function(D,A,C,B){if(!C){this.clearSelections(true);}this.select(this.getNodes(D,A),true,B);},getNode:function(A){if(typeof A=="string"){return document.getElementById(A);}else{if(typeof A=="number"){return this.all.elements[A];}}return A;},getNodes:function(E,A){var D=this.all.elements;E=E||0;A=typeof A=="undefined"?Math.max(D.length-1,0):A;var B=[],C;if(E<=A){for(C=E;C<=A&&D[C];C++){B.push(D[C]);}}else{for(C=E;C>=A&&D[C];C--){B.push(D[C]);}}return B;},indexOf:function(A){A=this.getNode(A);if(typeof A.viewIndex=="number"){return A.viewIndex;}return this.all.indexOf(A);},_onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this._ele.update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear();}},_onDestroy:function(){actuate.widget.DataView.superclass._onDestroy.call(this);this.setStore(null);}});actuate.widget.Component.prototype.registerType("dataview",actuate.widget.DataView);actuate.widget.CompositeElement=actuate.Class.createClass({initialize:function(A){this.elements=[];this.addElements(A);},isComposite:true,addElements:function(E){if(!E){return this;}if(typeof E=="string"){E=actuate.widget.Element.selectorFunction(E);}var D=this.elements;var B=D.length-1;for(var C=0,A=E.length;C<A;C++){D[++B]=actuate.widget.Element.get(E[C]);}return this;},fill:function(A){this.elements=[];this.add(A);return this;},filter:function(A){var B=[];this.each(function(C){if(C.is(A)){B[B.length]=C.dom;}});this.fill(B);return this;},invoke:function(E,B){var D=this.elements;for(var C=0,A=D.length;C<A;C++){actuate.widget.Element.prototype[E].apply(D[C],B);}return this;},add:function(A){if(typeof A=="string"){this.addElements(actuate.widget.Element.selectorFunction(A));}else{if(A.length!==undefined){this.addElements(A);}else{this.addElements([A]);}}return this;},each:function(E,D){var C=this.elements;for(var B=0,A=C.length;B<A;B++){if(E.call(D||C[B],C[B],this,B)===false){break;}}return this;},item:function(A){return this.elements[A]||null;},first:function(){return this.item(0);},last:function(){return this.item(this.elements.length-1);},getCount:function(){return this.elements.length;},contains:function(A){return this.indexOf(A)!==-1;},indexOf:function(A){return actuate.util.Utility.arrayIndexOf(this.elements,actuate.widget.Element.get(A));},removeElement:function(D,F){if(actuate.util.Utility.isArray(D)){for(var C=0,A=D.length;C<A;C++){this.removeElement(D[C]);}return this;}var B=typeof D=="number"?D:this.indexOf(D);if(B!==-1&&this.elements[B]){if(F){var E=this.elements[B];if(E.dom){E.remove();}else{actuate.widget.DomHelper.removeNode(E);}}this.elements.splice(B,1);}return this;},replaceElement:function(D,C,A){var B=typeof D=="number"?D:this.indexOf(D);if(B!==-1){if(A){this.elements[B].replaceWith(C);}else{this.elements.splice(B,1,actuate.widget.Element.get(C));}}return this;},clear:function(){this.elements=[];}});(function(){actuate.widget.CompositeElement.createCall=function(B,C){if(!B[C]){B[C]=function(){return this.invoke(C,arguments);};}};for(var A in actuate.widget.Element.prototype){if(typeof actuate.widget.Element.prototype[A]=="function"){actuate.widget.CompositeElement.createCall(actuate.widget.CompositeElement.prototype,A);}}})();actuate.widget.CompositeElementLite=actuate.Class.extendClass(actuate.widget.CompositeElement,{initialize:function(A){actuate.widget.CompositeElementLite.superclass.initialize.call(this,A);this._ele=new actuate.widget.Element.Flyweight();},addElements:function(E){if(E){if(actuate.util.Utility.isArray(E)){this.elements=this.elements.concat(E);}else{var D=this.elements;var B=D.length-1;for(var C=0,A=E.length;C<A;C++){D[++B]=E[C];}}}return this;},invoke:function(F,B){var D=this.elements;var E=this._ele;for(var C=0,A=D.length;C<A;C++){E.dom=D[C];actuate.widget.Element.prototype[F].apply(E,B);}return this;},item:function(A){if(!this.elements[A]){return null;}this._ele.dom=this.elements[A];return this._ele;},addListener:function(B,G,F,E){var D=this.elements;for(var C=0,A=D.length;C<A;C++){actuate.widget.EventManager.on(D[C],B,G,F||D[C],E);}return this;},each:function(F,E){var C=this.elements;var D=this._ele;for(var B=0,A=C.length;B<A;B++){D.dom=C[B];if(F.call(E||D,D,this,B)===false){break;}}return this;},indexOf:function(A){return actuate.util.Utility.arrayIndexOf(this.elements,actuate.widget.Element.getDom(A));},replaceElement:function(D,C,A){var B=typeof D=="number"?D:this.indexOf(D);if(B!==-1){C=actuate.widget.Element.getDom(C);if(A){var E=this.elements[B];E.parentNode.insertBefore(C,E);actuate.widget.DomHelper.removeNode(E);}this.elements.splice(B,1,C);}return this;}});actuate.widget.CompositeElementLite.prototype.on=actuate.widget.CompositeElementLite.prototype.addListener;if(actuate.widget.DomQuery){actuate.widget.Element.selectorFunction=actuate.widget.DomQuery.select;}actuate.util.Package.define("actuate.widget");actuate.widget.SplitBar=actuate.Class.create();actuate.widget.SplitBar.superclass=actuate.widget.Observable.prototype;actuate.widget.SplitBar.prototype=actuate.Class.extend(new actuate.widget.Observable(),{initialize:function(C,E,B,D,A){this._ele=actuate.widget.Element.get(C,true);this._ele.dom.unselectable="on";this.resizingEl=actuate.widget.Element.get(E,true);this.orientation=B||actuate.widget.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!A){this.proxy=actuate.widget.SplitBar.createProxy(this.orientation);}else{this.proxy=actuate.widget.SplitBar.get(A).dom;}this.dd=new actuate.widget.dd.DDProxy(this._ele.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd._b4StartDrag=actuate.Method.createDelegate(this.onStartProxyDrag,this);this.dd.endDrag=actuate.Method.createDelegate(this.onEndProxyDrag,this);this.dragSpecs={};this.adapter=new actuate.widget.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==actuate.widget.SplitBar.HORIZONTAL){this.placement=D||(this._ele.getX()>this.resizingEl.getX()?actuate.widget.SplitBar.LEFT:actuate.widget.SplitBar.RIGHT);this._ele.addClass("actuate-widget-splitbar-h");}else{this.placement=D||(this._ele.getY()>this.resizingEl.getY()?actuate.widget.SplitBar.TOP:actuate.widget.SplitBar.BOTTOM);this._ele.addClass("actuate-widget-splitbar-v");}actuate.widget.SplitBar.superclass.initialize.call(this);},onStartProxyDrag:function(A,E){this.fireEvent("beforeresize",this);this.overlay=actuate.widget.DomHelper.append(document.body,{cls:"actuate-drag-overlay",html:"&#160;"},true);this.overlay.unselectable();this.overlay.setSize(actuate.widget.lib.Dom.getViewWidth(true),actuate.widget.lib.Dom.getViewHeight(true));this.overlay.show();actuate.widget.Element.get(this.proxy)._setDisplayed("block");var C=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var D=C-this.activeMinSize;var B=Math.max(this.activeMaxSize-C,0);if(this.orientation==actuate.widget.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==actuate.widget.SplitBar.LEFT?D:B,this.placement==actuate.widget.SplitBar.LEFT?B:D);this.dd.setYConstraint(0,0);}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==actuate.widget.SplitBar.TOP?D:B,this.placement==actuate.widget.SplitBar.TOP?B:D);}this.dragSpecs.startSize=C;this.dragSpecs.startPoint=[A,E];actuate.widget.dd.DDProxy.prototype._b4StartDrag.call(this.dd,A,E);},onEndProxyDrag:function(C){actuate.widget.Element.get(this.proxy)._setDisplayed("none");var B=actuate.widget.lib.Event.getXY(C);if(this.overlay){actuate.widget.Element.destroy(this.overlay);delete this.overlay;}var A;if(this.orientation==actuate.widget.SplitBar.HORIZONTAL){A=this.dragSpecs.startSize+(this.placement==actuate.widget.SplitBar.LEFT?B[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-B[0]);}else{A=this.dragSpecs.startSize+(this.placement==actuate.widget.SplitBar.TOP?B[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-B[1]);}A=Math.min(Math.max(A,this.activeMinSize),this.activeMaxSize);if(A!=this.dragSpecs.startSize){if(this.fireEvent("beforeapply",this,A)!==false){this.adapter.setElementSize(this,A);this.fireEvent("moved",this,A);this.fireEvent("resize",this,A);}}},getAdapter:function(){return this.adapter;},setAdapter:function(A){this.adapter=A;this.adapter.init(this);},getMinimumSize:function(){return this.minSize;},setMinimumSize:function(A){this.minSize=A;},getMaximumSize:function(){return this.maxSize;},setMaximumSize:function(A){this.maxSize=A;},setCurrentSize:function(B){var A=this.animate;this.animate=false;this.adapter.setElementSize(this,B);this.animate=A;},destroy:function(A){if(this.shim){this.shim.remove();}this.dd.unreg();actuate.widget.Element.destroy(actuate.widget.Element.get(this.proxy));if(A){this._ele.remove();}}});actuate.widget.SplitBar.createProxy=function(C){var B=actuate.widget.Element.prototype.get(document.createElement("div"));B.unselectable();var A="actuate-widget-splitbar-proxy";B.addClass(A+" "+(C==actuate.widget.SplitBar.HORIZONTAL?A+"-h":A+"-v"));document.body.appendChild(B.dom);return B.dom;};actuate.widget.SplitBar.BasicLayoutAdapter=function(){};actuate.widget.SplitBar.BasicLayoutAdapter.prototype={init:function(A){},getElementSize:function(A){if(A.orientation==actuate.widget.SplitBar.HORIZONTAL){return A.resizingEl.getWidth();}else{return A.resizingEl.getHeight();}},setElementSize:function(B,A,C){if(B.orientation==actuate.widget.SplitBar.HORIZONTAL){if(!B.animate){B.resizingEl.setWidth(A);if(C){C(B,A);}}else{B.resizingEl.setWidth(A,true,0.1,C,"easeOut");}}else{if(!B.animate){B.resizingEl.setHeight(A);if(C){C(B,A);}}else{B.resizingEl.setHeight(A,true,0.1,C,"easeOut");}}}};actuate.widget.SplitBar.AbsoluteLayoutAdapter=function(A){this.basic=new actuate.widget.SplitBar.BasicLayoutAdapter();this.container=actuate.widget.Element.get(A);};actuate.widget.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(A){this.basic.init(A);},getElementSize:function(A){return this.basic.getElementSize(A);},setElementSize:function(B,A,C){this.basic.setElementSize(B,A,actuate.Method.createDelegate(this.moveSplitter,this,[B]));},moveSplitter:function(A){var B=actuate.widget.SplitBar;switch(A.placement){case B.LEFT:A.el.setX(A.resizingEl.getRight());break;case B.RIGHT:A.el.setStyle("right",(this.container.getWidth()-A.resizingEl.getLeft())+"px");break;case B.TOP:A.el.setY(A.resizingEl.getBottom());break;case B.BOTTOM:A.el.setY(A.resizingEl.getTop()-A.el.getHeight());break;}}};actuate.widget.SplitBar.VERTICAL=1;actuate.widget.SplitBar.HORIZONTAL=2;actuate.widget.SplitBar.LEFT=1;actuate.widget.SplitBar.RIGHT=2;actuate.widget.SplitBar.TOP=3;actuate.widget.SplitBar.BOTTOM=4;actuate.widget.DatePicker=actuate.Class.extendClass(actuate.widget.Component,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",constrainToViewport:true,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,locale:"",initialize:function(C){actuate.widget.DatePicker.superclass.initialize.apply(this,arguments);if(!this.monthNames){this.monthNames=actuate.util.Date.monthNames;}if(!this.dayNames){this.dayNames=actuate.util.Date.dayNames;}var B=actuate.util.Utility.getLocalizedStrings("DatePicker",["okText","cancelText","todayText","minText","maxText","disabledDaysText","disabledDatesText","nextText","prevText","monthYearText"]);var A=new actuate.RequestOptions(actuate.getDefaultRequestOptions());this.okText=B.okText;this.cancelText=B.cancelText;this.todayText=B.todayText;this.minText=B.minText;this.maxText=B.maxText;this.disabledDaysText=B.disabledDaysText;this.nextText=B.nextText;this.prevText=B.prevText;this.monthYearText=B.monthYearText;this.format=actuate.util.Utility.getLocalizedString("dateFormat.shortDate");this.locale=A._customParameters.__locale;if(this.locale==null){this.locale=A._locale;}},_initComponent:function(){actuate.widget.DatePicker.superclass._initComponent.call(this);this.value=this.value?this.value.clearTime():new actuate.util.Date().clearTime();if(this.handler){this.on("select",this.handler,this.scope||this);}this._initDisabledDays();},_initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var A=this.disabledDates;var C="(?:";for(var B=0;B<A.length;B++){C+=A[B];if(B!=A.length-1){C+="|";}}this.disabledDatesRE=new RegExp(C+")");}},setDisabledDates:function(A){if(actuate.util.Utility.isArray(A)){this.disabledDates=A;this.disabledDatesRE=null;}else{this.disabledDatesRE=A;}this._initDisabledDays();this._update(this.value,true);},setDisabledDays:function(A){this.disabledDays=A;this._update(this.value,true);},setMinDate:function(A){this.minDate=A;this._update(this.value,true);},setMaxDate:function(A){this.maxDate=A;this._update(this.value,true);},setValue:function(B){var A=this.value;this.value=B.clearTime(true);if(this._ele){this._update(this.value,arguments[1]);}},getValue:function(){return this.value;},focus:function(){if(this._ele){this._update(this.activeDate);}},_onRender:function(A,F){var C=['<table cellspacing="0">','<tr><td class="actuate-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="actuate-date-middle" align="center"></td><td class="actuate-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="actuate-date-inner" cellspacing="0"><thead><tr>'];var E=this.dayNames;for(var D=0;D<7;D++){var G=this.startDay+D;if(G>6){G=G-7;}if(this.locale&&this.locale.toLowerCase().indexOf("zh")!=-1){C.push("<th><span>",E[G].substr(E[G].length-1,E[G].length),"</span></th>");}else{if(this.locale&&this.locale.toLowerCase().indexOf("ar")!=-1){C.push("<th><span>",E[G],"</span></th>");}else{C.push("<th><span>",E[G].substr(0,1),"</span></th>");}}}C[C.length]="</tr></thead><tbody><tr>";for(var D=0;D<42;D++){if(D%7==0&&D!=0){C[C.length]="</tr><tr>";}C[C.length]='<td><a href="#" hidefocus="on" class="actuate-date-date" tabIndex="1"><em><span></span></em></a></td>';}C.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="actuate-date-bottom" align="center"></td></tr>':"",'</table><div class="actuate-date-mp"></div>');var B=document.createElement("div");B.className="actuate-date-picker";B.innerHTML=C.join("");B.style.width="182px";A.dom.insertBefore(B,F);this._ele=actuate.widget.Element.get(B);this.eventEl=actuate.widget.Element.get(B.firstChild);this.leftClickRpt=new actuate.widget.util.ClickRepeater(this._ele.child("td.actuate-date-left a"),{handler:this._showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.rightClickRpt=new actuate.widget.util.ClickRepeater(this._ele.child("td.actuate-date-right a"),{handler:this._showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.eventEl.on("mousewheel",this._handleMouseWheel,this);this.monthPicker=this._ele.down("div.actuate-date-mp");this.monthPicker.enableDisplayMode("block");var I=new actuate.widget.KeyNav(this.eventEl,{"left":function(J){J.ctrlKey?this._showPrevMonth():this._update(this.activeDate.add("d",-1));},"right":function(J){J.ctrlKey?this._showNextMonth():this._update(this.activeDate.add("d",1));},"up":function(J){J.ctrlKey?this._showNextYear():this._update(this.activeDate.add("d",-7));},"down":function(J){J.ctrlKey?this._showPrevYear():this._update(this.activeDate.add("d",7));},"pageUp":function(J){this._showNextMonth();},"pageDown":function(J){this._showPrevMonth();},"enter":function(J){J.stopPropagation();return true;},scope:this});this.eventEl.on("click",this._handleDateClick,this,{delegate:"a.actuate-date-date"});this._ele.unselectable();this.cells=this._ele.select("table.actuate-date-inner tbody td");this.textNodes=this._ele.query("table.actuate-date-inner tbody span");this.mbtn=new actuate.widget.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this._ele.child("td.actuate-date-middle",true)});this.mbtn.on("click",this._showMonthPicker,this);this.mbtn._ele.child(this.mbtn.menuClassTarget).addClass("actuate-btn-with-menu");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(actuate.widget.EventObject.SPACE,this._selectToday,this);var H=(new actuate.util.Date()).dateFormat(this.format);this.todayBtn=new actuate.widget.Button({renderTo:this._ele.child("td.actuate-date-bottom",true),text:actuate.util.String.format(this.todayText,H),tooltip:actuate.util.String.format(this.todayTip,H),handler:this._selectToday,scope:this});}if(actuate.util.Utility.isIE){this._ele.repaint();}this._update(this.value);},_createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var A=['<table border="0" cellspacing="0">'];for(var B=0;B<6;B++){A.push('<tr><td class="actuate-date-mp-month"><a href="#">',this.monthNames[B].substr(0,3),"</a></td>",'<td class="actuate-date-mp-month actuate-date-mp-sep"><a href="#">',this.monthNames[B+6].substr(0,3),"</a></td>",B==0?'<td class="actuate-date-mp-ybtn" align="center"><a class="actuate-date-mp-prev"></a></td><td class="actuate-date-mp-ybtn" align="center"><a class="actuate-date-mp-next"></a></td></tr>':'<td class="actuate-date-mp-year"><a href="#"></a></td><td class="actuate-date-mp-year"><a href="#"></a></td></tr>');}A.push('<tr class="actuate-date-mp-btns"><td colspan="4"><button type="button" class="actuate-date-mp-ok">',this.okText,'</button><button type="button" class="actuate-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>");this.monthPicker.update(A.join(""));this.monthPicker.on("click",this._onMonthClick,this);this.monthPicker.on("dblclick",this._onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.actuate-date-mp-month");this.mpYears=this.monthPicker.select("td.actuate-date-mp-year");this.mpMonths.each(function(C,D,E){E+=1;if((E%2)==0){C.dom.xmonth=5+Math.round(E*0.5);}else{C.dom.xmonth=Math.round((E-1)*0.5);}});}},_showMonthPicker:function(){this._createMonthPicker();var B=this._ele.getSize();this.monthPicker.setSize(B);this.monthPicker.child("table").setSize(B);this.mpSelMonth=(this.activeDate||this.value||this.minDate).getMonth();this._updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value||this.minDate).getFullYear();this._updateMPYear(this.mpSelYear);var A=this.monthPicker.dom.style;A.position="absolute";A.left="0";A.bottom="0";this.monthPicker.show();},_updateMPYear:function(E){this.mpyear=E;var C=this.mpYears.elements;for(var B=1;B<=10;B++){var D=C[B-1],A;if((B%2)==0){A=E+Math.round(B*0.5);D.firstChild.innerHTML=A;D.xyear=A;}else{A=E-(5-Math.round(B*0.5));D.firstChild.innerHTML=A;D.xyear=A;}this.mpYears.item(B-1)[A==this.mpSelYear?"addClass":"removeClass"]("actuate-date-mp-sel");}},_updateMPMonth:function(A){this.mpMonths.each(function(B,C,D){B[B.dom.xmonth==A?"addClass":"removeClass"]("actuate-date-mp-sel");});},_selectMPMonth:function(A){},_onMonthClick:function(D,B){D.stopEvent();var C=new actuate.widget.Element(B),A;if(C.is("button.actuate-date-mp-cancel")){this._hideMonthPicker();}else{if(C.is("button.actuate-date-mp-ok")){var E=new actuate.util.Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(E.getMonth()!=this.mpSelMonth){E=new actuate.util.Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth();}this._update(E);this._hideMonthPicker();}else{if(A=C.up("td.actuate-date-mp-month",2)){this.mpMonths.removeClass("actuate-date-mp-sel");A.addClass("actuate-date-mp-sel");this.mpSelMonth=A.dom.xmonth;}else{if(A=C.up("td.actuate-date-mp-year",2)){this.mpYears.removeClass("actuate-date-mp-sel");A.addClass("actuate-date-mp-sel");this.mpSelYear=A.dom.xyear;}else{if(C.is("a.actuate-date-mp-prev")){this._updateMPYear(this.mpyear-10);}else{if(C.is("a.actuate-date-mp-next")){this._updateMPYear(this.mpyear+10);}}}}}}},_onMonthDblClick:function(D,B){D.stopEvent();var C=new actuate.widget.Element(B),A;if(A=C.up("td.actuate-date-mp-month",2)){this._update(new actuate.util.Date(this.mpSelYear,A.dom.xmonth,(this.activeDate||this.value).getDate()));this._hideMonthPicker();}else{if(A=C.up("td.actuate-date-mp-year",2)){this._update(new actuate.util.Date(A.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this._hideMonthPicker();}}},_hideMonthPicker:function(A){if(this.monthPicker){this.monthPicker.hide();}},_showPrevMonth:function(A){this._update(this.activeDate.add("mo",-1));},_showNextMonth:function(A){this._update(this.activeDate.add("mo",1));},_showPrevYear:function(){this._update(this.activeDate.add("y",-1));},_showNextYear:function(){this._update(this.activeDate.add("y",1));},_handleMouseWheel:function(A){var B=A.getWheelDelta();if(B>0){this._showPrevMonth();A.stopEvent();}else{if(B<0){this._showNextMonth();A.stopEvent();}}},_handleDateClick:function(B,A){B.stopEvent();if(A.dateValue&&!actuate.widget.Element.fly(A.parentNode).hasClass("actuate-date-disabled")){this.setValue(new actuate.util.Date(A.dateValue));this.fireEvent("select",this,this.value);}},_selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new actuate.util.Date().clearTime());this.fireEvent("select",this,this.value);}},_update:function(b,V){var A=this.activeDate;this.activeDate=b;if(!V&&A&&this._ele){var L=b.getTime();if(A.getMonth()==b.getMonth()&&A.getFullYear()==b.getFullYear()){this.cells.removeClass("actuate-date-selected");this.cells.each(function(d){if(d.dom.firstChild.dateValue==L){d.addClass("actuate-date-selected");setTimeout(function(){try{d.dom.firstChild.focus();}catch(g){}},50);return false;}});return ;}}var H=b.getDaysInMonth();var M=b.getFirstDateOfMonth();var E=M.getDay()-this.startDay;if(E<=this.startDay){E+=7;}var W=b.add("mo",-1);var F=W.getDaysInMonth()-E;var D=this.cells.elements;var N=this.textNodes;H+=E;var S=86400000;var Y=(new actuate.util.Date(W.getFullYear(),W.getMonth(),F)).clearTime();var X=new actuate.util.Date().clearTime().getTime();var Q=b.clearTime().getTime();var P=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY;var T=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY;if(P.getTime){P=P.getTime();}if(T.getTime){T=T.getTime();}var a=this.disabledDatesRE;var O=this.disabledDatesText;var e=this.disabledDays?this.disabledDays.join(""):false;var Z=this.disabledDaysText;var U=this.format;if(this.showToday){var J=new actuate.util.Date().clearTime();var C=(J<P||J>T||(a&&U&&a.test(J.dateFormat(U)))||(e&&e.indexOf(J.getDay())!=-1));this.todayBtn.setDisabled(C);this.todayKeyListener[C?"disable":"enable"]();}var I=function(i,d){d.title="";var g=Y.getTime();d.firstChild.dateValue=g;if(g==X){d.className+=" actuate-date-today";d.title=i.todayText;}if(g==Q){d.className+=" actuate-date-selected";setTimeout(function(){try{d.firstChild.focus();}catch(k){}},50);}if(g<P){d.className=" actuate-date-disabled";d.title=i.minText;return ;}if(g>T){d.className=" actuate-date-disabled";d.title=i.maxText;return ;}if(e){if(e.indexOf(Y.getDay())!=-1){d.title=Z;d.className=" actuate-date-disabled";}}if(a&&U){var h=Y.dateFormat(U);if(a.test(h)){d.title=O.replace("%0",h);d.className=" actuate-date-disabled";}}};var R=0;for(;R<E;R++){N[R].innerHTML=(++F);Y.setDate(Y.getDate()+1);D[R].className="actuate-date-prevday";I(this,D[R]);}for(;R<H;R++){var B=R-E+1;N[R].innerHTML=(B);Y.setDate(Y.getDate()+1);D[R].className="actuate-date-active";I(this,D[R]);}var c=0;for(;R<42;R++){N[R].innerHTML=(++c);Y.setDate(Y.getDate()+1);D[R].className="actuate-date-nextday";I(this,D[R]);}if(this.format&&(this.format.toLowerCase().indexOf("m")<this.format.toLowerCase().indexOf("y"))){this.mbtn.setText(this.monthNames[b.getMonth()]+" "+b.getFullYear());}else{this.mbtn.setText(b.getFullYear()+" "+this.monthNames[b.getMonth()]);}if(!this.internalRender){var G=this._ele.dom.firstChild;var K=G.offsetWidth;this._ele.setWidth(K+this._ele.getBorderWidth("lr"));actuate.widget.Element.fly(G).setWidth(K);this.internalRender=true;if(actuate.util.Utility.isOpera&&!this.secondPass){G.rows[0].cells[1].style.width=(K-(G.rows[0].cells[0].offsetWidth+G.rows[0].cells[2].offsetWidth))+"px";this.secondPass=true;actuate.Method.defer(10,this._update,this,[b]);}}},_beforeDestroy:function(){if(this.rendered){actuate.widget.Element.destroy(this.leftClickRpt,this.rightClickRpt,this.monthPicker,this.eventEl,this.mbtn,this.todayBtn);}}});actuate.widget.Component.prototype.registerType("datepicker",actuate.widget.DatePicker);actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.ContainerLayout=actuate.Class.create();actuate.widget.panel.layout.ContainerLayout.prototype={monitorResize:false,activeItem:null,initialize:function(A){actuate.Class.extend(this,A);},layout:function(){var A=this.container.getLayoutTarget();this.onLayout(this.container,A);this.container.fireEvent("afterlayout",this.container,this);},onLayout:function(A,B){this.renderAll(A,B);},isValidParent:function(C,B){var A=C.getPositionEl?C.getPositionEl():C.getEl();return A.dom.parentNode==B.dom;},renderAll:function(D,E){var B=D.items.items;for(var C=0,A=B.length;C<A;C++){var F=B[C];if(F&&(!F.rendered||!this.isValidParent(F,E))){this.renderItem(F,C,E);}}},renderItem:function(D,A,C){if(D&&!D.rendered){D.render(C,A);if(this.extraCls){var B=D.getPositionEl?D.getPositionEl():D;B.addClass(this.extraCls);}if(this.renderHidden&&D!=this.activeItem){D.hide();}}else{if(D&&!this.isValidParent(D,C)){if(this.extraCls){var B=D.getPositionEl?D.getPositionEl():D;B.addClass(this.extraCls);}if(typeof A=="number"){A=C.dom.childNodes[A];}C.dom.insertBefore(D.getEl().dom,A||null);if(this.renderHidden&&D!=this.activeItem){D.hide();}}}},onResize:function(){if(this.container.collapsed){return ;}var A=this.container.bufferResize;if(A){if(!this.resizeTask){this.resizeBuffer=typeof A=="number"?A:100;}this.resizeTask.delay(this.resizeBuffer);}else{this.layout();}},setContainer:function(A){if(this.monitorResize&&A!=this.container){if(this.container){this.container.unregisterEventHandler("resize",actuate.Method.bind(this.onResize,this));}if(A){A.registerEventHandler("resize",actuate.Method.bind(this.onResize,this));}}this.container=A;},parseMargins:function(B){var C=B.split(" ");var A=C.length;if(A==1){C[1]=C[0];C[2]=C[0];C[3]=C[0];}if(A==2){C[2]=C[0];C[3]=C[1];}return{top:parseInt(C[0],10)||0,right:parseInt(C[1],10)||0,bottom:parseInt(C[2],10)||0,left:parseInt(C[3],10)||0};},destroy:actuate.util.Utility.emptyFn};actuate.widget.Container.prototype.layouts["auto"]=actuate.widget.panel.layout.ContainerLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.FitLayout=actuate.Class.create();actuate.widget.panel.layout.FitLayout.superclass=actuate.widget.panel.layout.ContainerLayout.prototype;actuate.widget.panel.layout.FitLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{monitorResize:true,onLayout:function(A,B){actuate.widget.panel.layout.FitLayout.superclass.onLayout.call(this,A,B);if(!this.container.collapsed){this.setItemSize(this.activeItem||A.items.items[0],B.getStyleSize());}},setItemSize:function(B,A){if(B&&A.height>0&&B.rendered){B.setSize(A);}}});actuate.widget.Container.prototype.layouts["fit"]=actuate.widget.panel.layout.FitLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.AccordionLayout=actuate.Class.extendClass(actuate.widget.panel.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,renderItem:function(A){if(this.animate===false){A.animCollapse=false;}A.collapsible=true;if(this.autoWidth){A.autoWidth=true;}if(this.titleCollapse){A.titleCollapse=true;}if(this.hideCollapseTool){A.hideCollapseTool=true;}if(this.collapseFirst!==undefined){A.collapseFirst=this.collapseFirst;}if(!this.activeItem&&!A.collapsed){this.activeItem=A;}else{if(this.activeItem){A.collapsed=true;}}actuate.widget.panel.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);if(!!A.header){A.header.addClass("actuate-widget-accordion-hd");}A.registerEventHandler("beforeexpand",actuate.Method.bind(this._beforeExpand,this));},_beforeExpand:function(C,B){var A=this.activeItem;if(A){if(this.sequence){delete this.activeItem;if(!A.collapsed){A._collapse({callback:function(){C.expand(B||true);},scope:this});return false;}}else{A._collapse(this.animate);}}this.activeItem=C;if(this.activeOnTop){C._ele.dom.parentNode.insertBefore(C._ele.dom,C._ele.dom.parentNode.firstChild);}this.layout();},setItemSize:function(F,E){if(this.fill&&F){var B=this.container.items.items;var D=0;for(var C=0,A=B.length;C<A;C++){var G=B[C];if(G!=F){D+=(G.getSize().height-G.bwrap.getHeight());}}E.height-=D;F.setSize(E);}}});actuate.widget.Container.prototype.layouts["accordion"]=actuate.widget.panel.layout.AccordionLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.BorderLayout=actuate.Class.create();actuate.widget.panel.layout.BorderLayout.superclass=actuate.widget.panel.layout.ContainerLayout.prototype;actuate.widget.panel.layout.BorderLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{monitorResize:true,rendered:false,onLayout:function(B,X){var C;if(!this.rendered){X.position();X.addClass("actuate-widget-border-layout-ct");var M=B.items.items;C=[];for(var Q=0,R=M.length;Q<R;Q++){var U=M[Q];var F=U.region;if(U.collapsed){C.push(U);}U.collapsed=false;if(!U.rendered){U.cls=U.cls?U.cls+" actuate-widget-border-panel":"actuate-widget-border-panel";U.render(X,Q);}this[F]=F!="center"&&U.split?new actuate.widget.panel.layout.BorderLayout.SplitRegion(this,U.initialConfig,F):new actuate.widget.panel.layout.BorderLayout.Region(this,U.initialConfig,F);this[F].render(X,U);}this.rendered=true;}var L=X.getViewSize();if(L.width<20||L.height<20){if(C){this.restoreCollapsed=C;}return ;}else{if(this.restoreCollapsed){C=this.restoreCollapsed;delete this.restoreCollapsed;}}var J=L.width,S=L.height;var I=J,P=S,G=0,H=0;var N=this.north,K=this.south,E=this.west,T=this.east,U=this.center;if(!U&&actuate.widget.panel.layout.BorderLayout.WARN!==false){throw"No center region defined in BorderLayout "+B.id;}if(N&&N.isVisible()){var W=N.getSize();var O=N.getMargins();W.width=J-(O.left+O.right);W.x=O.left;W.y=O.top;G=W.height+W.y+O.bottom;P-=G;N.applyLayout(W);}if(K&&K.isVisible()){var W=K.getSize();var O=K.getMargins();W.width=J-(O.left+O.right);W.x=O.left;var V=(W.height+O.top+O.bottom);W.y=S-V+O.top;P-=V;K.applyLayout(W);}if(E&&E.isVisible()){var W=E.getSize();var O=E.getMargins();W.height=P-(O.top+O.bottom);W.x=O.left;W.y=G+O.top;var A=(W.width+O.left+O.right);H+=A;I-=A;E.applyLayout(W);}if(T&&T.isVisible()){var W=T.getSize();var O=T.getMargins();W.height=P-(O.top+O.bottom);var A=(W.width+O.left+O.right);W.x=J-A+O.left;W.y=G+O.top;I-=A;T.applyLayout(W);}if(U){var O=U.getMargins();var D={x:H+O.left,y:G+O.top,width:I-(O.left+O.right),height:P-(O.top+O.bottom)};U.applyLayout(D);}if(C){for(var Q=0,R=C.length;Q<R;Q++){C[Q].collapse(false);}}if(actuate.util.Utility.isIE&&actuate.util.Utility.isStrict){X.repaint();}},destroy:function(){var B=["north","south","east","west"];for(var A=0;A<B.length;A++){var C=this[B[A]];if(C){if(C.destroy){C.destroy();}else{if(C.split){C.split.destroy(true);}}}}actuate.widget.panel.layout.BorderLayout.superclass.destroy.call(this);}});actuate.widget.panel.layout.BorderLayout.Region=actuate.Class.create(),actuate.widget.panel.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},isCollapsed:false,initialize:function(B,A,C){actuate.Class.extend(this,A);this.layout=B;this.position=C;this.state={};if(typeof this.margins=="string"){this.margins=this.layout.parseMargins(this.margins);}this.margins=actuate.util.Utility.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins=="string"){this.cmargins=this.layout.parseMargins(this.cmargins);}if(this.collapseMode=="mini"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0};}else{this.cmargins=actuate.util.Utility.applyIf(this.cmargins||{},C=="north"||C=="south"?this.defaultNSCMargins:this.defaultEWCMargins);}}},render:function(C,D){this.panel=D;D._ele.enableDisplayMode();this.targetEl=C;this._ele=D._ele;var A=D.getState,E=this.position;var B=function(){return actuate.Class.extend(A.call(D)||{},this.state);};D.getState=actuate.Method.createDelegate(B,this);if(E!="center"){D.allowQueuedExpand=false;D.registerEventHandler("beforecollapse",actuate.Method.bind(this.beforeCollapse,this));D.registerEventHandler("collapse",actuate.Method.bind(this.onCollapse,this));D.registerEventHandler("beforeexpand",actuate.Method.bind(this.beforeExpand,this));D.registerEventHandler("expand",actuate.Method.bind(this.onExpand,this));D.registerEventHandler("hide",actuate.Method.bind(this.onHide,this));D.registerEventHandler("show",actuate.Method.bind(this.onShow,this));if(this.collapsible){D.collapseEl="_ele";D.slideAnchor=this.getSlideAnchor();}if(D.tools&&D.tools.toggle){D.tools.toggle.addClass("actuate-widget-tool-collapse-"+E);D.tools.toggle.addClassOnOver("actuate-widget-tool-collapse-"+E+"-over");}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var B=new actuate.widget.Template('<div class="actuate-widget-tool actuate-widget-tool-{id}">&#160;</div>');B.disableFormats=true;B.compile();actuate.widget.panel.layout.BorderLayout.Region.prototype.toolTemplate=B;}this.collapsedEl=this.targetEl.createChild({cls:"actuate-widget-layout-collapsed actuate-widget-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"});this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini"){this.collapsedEl.addClass("actuate-widget-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"actuate-widget-layout-mini actuate-widget-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("actuate-widget-layout-mini-over");this.collapsedEl.addClassOnOver("actuate-widget-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:true});}else{var A=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},true);A.addClassOnOver("actuate-widget-tool-expand-"+this.position+"-over");A.on("click",this.onExpandClick,this,{stopEvent:true});if(this.floatable!==false){this.collapsedEl.addClassOnOver("actuate-widget-layout-collapsed-over");this.collapsedEl.on("click",this.collapseClick,this);}}}return this.collapsedEl;},onExpandClick:function(A){if(this.isSlid){this.afterSlideIn();this.panel._expand(false);}else{this.panel._expand();}},onCollapseClick:function(A){this.panel._collapse();},beforeCollapse:function(B,A){this.lastAnim=A;if(this.splitEl){this.splitEl.hide();}this.getCollapsedEl().show();this.panel._ele.setStyle("z-index",100);this.isCollapsed=true;this.layout.layout();},onCollapse:function(A){this.panel._ele.setStyle("z-index",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility="visible";}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2});}this.state.collapsed=true;},beforeExpand:function(A){var B=this.getCollapsedEl();this._ele.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,B.getHeight());}else{this.panel.setSize(B.getWidth(),undefined);}B.hide();B.dom.style.visibility="hidden";this.panel._ele.setStyle("z-index",100);},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show();}this.layout.layout();this.panel._ele.setStyle("z-index",1);this.state.collapsed=false;},collapseClick:function(A){if(this.isSlid){A.stopPropagation();this.slideIn();}else{A.stopPropagation();this.slideOut();}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide();}else{if(this.splitEl){this.splitEl.hide();}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show();}else{if(this.splitEl){this.splitEl.show();}}},isVisible:function(){return !this.panel.hidden;},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins;},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize();},setPanel:function(A){this.panel=A;},getMinWidth:function(){return this.minWidth;},getMinHeight:function(){return this.minHeight;},applyLayoutCollapsed:function(A){var B=this.getCollapsedEl();B.setLeftTop(A.x,A.y);B.setSize(A.width,A.height);},applyLayout:function(A){if(this.isCollapsed){this.applyLayoutCollapsed(A);}else{this.panel.setPosition(A.x,A.y);this.panel.setSize(A.width,A.height);}},beforeSlide:function(){this.panel._beforeEffect();},afterSlide:function(){this.panel._afterEffect();},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){var A=new actuate.widget.util.DelayedTask(this.slideIn,this);this.autoHideHd={"mouseout":function(B){if(!B.within(this._ele,true)){A.delay(500);}},"mouseover":function(B){A.cancel();},scope:this};}this._ele.on(this.autoHideHd);}},clearAutoHide:function(){if(this.autoHide!==false){this._ele._removeListener("mouseout",this.autoHideHd.mouseout);this._ele._removeListener("mouseover",this.autoHideHd.mouseover);}},clearMonitor:function(){actuate.widget.Element.getDoc()._removeListener("click",this.slideInIf,this);},slideOut:function(){if(this.isSlid){return ;}this.isSlid=true;var A=this.panel.tools;if(A&&A.toggle){A.toggle.hide();}this._ele.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,this.collapsedEl.getHeight());}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined);}this.restoreLT=[this._ele.dom.style.left,this._ele.dom.style.top];this._ele.alignTo(this.collapsedEl,this.getCollapseAnchor());this._ele.setStyle("z-index",102);this.panel._ele.replaceClass("actuate-widget-panel-collapsed","actuate-widget-panel-floating");if(this.animFloat!==false){this.beforeSlide();this._ele.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();actuate.widget.Element.getDoc()._addListener("click",this.slideInIf,this);},scope:this,block:true});}else{this.initAutoHide();actuate.widget.Element.getDoc()._addListener("click",this.slideInIf,this);}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this._ele.setStyle("z-index","");this.panel._ele.replaceClass("actuate-widget-panel-floating","actuate-widget-panel-collapsed");this._ele.dom.style.left=this.restoreLT[0];this._ele.dom.style.top=this.restoreLT[1];var A=this.panel.tools;if(A&&A.toggle){A.toggle.show();}},slideIn:function(A){if(!this.isSlid){return ;}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this._ele.slideOut(this.getSlideAnchor(),{callback:function(){this._ele.hide();this.afterSlide();this.afterSlideIn();},scope:this,block:true});}else{this._ele.hide();this.afterSlideIn();}},slideInIf:function(A){if(!A.within(this._ele)){this.slideIn();}},anchors:{"west":"left","east":"right","north":"top","south":"bottom"},sanchors:{"west":"l","east":"r","north":"t","south":"b"},canchors:{"west":"tl-tr","east":"tr-tl","north":"tl-bl","south":"bl-tl"},getAnchor:function(){return this.anchors[this.position];},getCollapseAnchor:function(){return this.canchors[this.position];},getSlideAnchor:function(){return this.sanchors[this.position];},getAlignAdj:function(){var A=this.cmargins;switch(this.position){case"west":return[0,0];break;case"east":return[0,0];break;case"north":return[0,0];break;case"south":return[0,0];break;}},getExpandAdj:function(){var B=this.collapsedEl,A=this.cmargins;switch(this.position){case"west":return[-(A.right+B.getWidth()+A.left),0];break;case"east":return[A.right+B.getWidth()+A.left,0];break;case"north":return[0,-(A.top+A.bottom+B.getHeight())];break;case"south":return[0,A.top+A.bottom+B.getHeight()];break;}}};actuate.widget.panel.layout.BorderLayout.SplitRegion=function(B,A,C){actuate.widget.panel.layout.BorderLayout.SplitRegion.superclass.initialize.call(this,B,A,C);this.applyLayout=this.applyFns[C];};actuate.widget.panel.layout.BorderLayout.SplitRegion.superclass=actuate.widget.panel.layout.BorderLayout.Region.prototype;actuate.widget.panel.layout.BorderLayout.SplitRegion.prototype=actuate.Class.extend(new actuate.widget.panel.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:false,splitSettings:{north:{orientation:actuate.widget.SplitBar.VERTICAL,placement:actuate.widget.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:actuate.widget.SplitBar.VERTICAL,placement:actuate.widget.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:actuate.widget.SplitBar.HORIZONTAL,placement:actuate.widget.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:actuate.widget.SplitBar.HORIZONTAL,placement:actuate.widget.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C);}var D=this.splitEl.dom,B=D.style;this.panel.setPosition(C.x,C.y);var A=D.offsetWidth;B.left=(C.x+C.width-A)+"px";B.top=(C.y)+"px";B.height=Math.max(0,C.height)+"px";this.panel.setSize(C.width-A,C.height);},east:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C);}var D=this.splitEl.dom,B=D.style;var A=D.offsetWidth;this.panel.setPosition(C.x+A,C.y);B.left=(C.x)+"px";B.top=(C.y)+"px";B.height=Math.max(0,C.height)+"px";this.panel.setSize(C.width-A,C.height);},north:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C);}var D=this.splitEl.dom,B=D.style;var A=D.offsetHeight;this.panel.setPosition(C.x,C.y);B.left=(C.x)+"px";B.top=(C.y+C.height-A)+"px";B.width=Math.max(0,C.width)+"px";this.panel.setSize(C.width,C.height-A);},south:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C);}var D=this.splitEl.dom,B=D.style;var A=D.offsetHeight;this.panel.setPosition(C.x,C.y+A);B.left=(C.x)+"px";B.top=(C.y)+"px";B.width=Math.max(0,C.width)+"px";this.panel.setSize(C.width,C.height-A);}},render:function(B,D){actuate.widget.panel.layout.BorderLayout.SplitRegion.superclass.render.call(this,B,D);var E=this.position;this.splitEl=B.createChild({cls:"actuate-widget-layout-split actuate-widget-layout-split-"+E,html:"&#160;",id:this.panel.id+"-xsplit"});if(this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"actuate-widget-layout-mini actuate-widget-layout-mini-"+E,html:"&#160;"});this.miniSplitEl.addClassOnOver("actuate-widget-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:true});}var C=this.splitSettings[E];this.split=new actuate.widget.SplitBar(this.splitEl.dom,D._ele,C.orientation);this.split.placement=C.placement;var A=this[C.maxFn];this.split.getMaximumSize=actuate.Method.createDelegate(A,this);this.split.minSize=this.minSize||this[C.minProp];this.split.registerEventHandler("beforeapply",actuate.Method.bind(this.onSplitMove,this));this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[C.maxProp];if(D.hidden){this.splitEl.hide();}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip;}if(this.collapsible){this.splitEl.on("dblclick",this.onCollapseClick,this);}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize();}var A=this.panel.getSize();if(this.position=="north"||this.position=="south"){A.height+=this.splitEl.dom.offsetHeight;}else{A.width+=this.splitEl.dom.offsetWidth;}return A;},getHMaxSize:function(){var B=this.maxSize||10000;var A=this.layout.center;return Math.min(B,(this._ele.getWidth()+A._ele.getWidth())-A.getMinWidth());},getVMaxSize:function(){var B=this.maxSize||10000;var A=this.layout.center;return Math.min(B,(this._ele.getHeight()+A._ele.getHeight())-A.getMinHeight());},onSplitMove:function(B,A){var C=this.panel.getSize();if(this.position=="north"||this.position=="south"){A=Math.max(A,(this.panel.minHeight!=undefined)?this.panel.minHeight:0);this.panel.setSize(C.width,A);this.state.height=A;}else{A=Math.max(A,(this.panel.minWidth!=undefined)?this.panel.minWidth:0);this.panel.setSize(A,C.height);this.state.width=A;}this.lastSplitSize=A;this.layout.layout();this.panel.layout.layout();return false;},getSplitBar:function(){return this.split;},destroy:function(){actuate.widget.Element.destroy(this.miniSplitEl,this.split,this.splitEl);}});actuate.widget.Container.prototype.layouts["border"]=actuate.widget.panel.layout.BorderLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.CardLayout=actuate.Class.create();actuate.widget.panel.layout.CardLayout.superclass=actuate.widget.panel.layout.FitLayout.prototype;actuate.widget.panel.layout.CardLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.FitLayout(),{deferredRender:false,renderHidden:true,setActiveItem:function(A){A=this.container.getComponent(A);if(this.activeItem!=A){if(this.activeItem){this.activeItem.hide();}this.activeItem=A;A.show();this.layout();}},renderAll:function(A,B){if(this.deferredRender){this.renderItem(this.activeItem,undefined,B);}else{actuate.widget.panel.layout.CardLayout.superclass.renderAll.call(this,A,B);}}});actuate.widget.Container.prototype.layouts["card"]=actuate.widget.panel.layout.CardLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.FormLayout=actuate.Class.create();actuate.widget.panel.layout.FormLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{labelSeparator:":",monitorResize:true,getAnchorViewSize:function(A,B){return(A.body||A._ele).getStyleSize();},onLayout:function(F,I){actuate.widget.panel.layout.ContainerLayout.prototype.onLayout.call(this,F,I);var O=this.getAnchorViewSize(F,I);var M=O.width,E=O.height;if(M<20||E<20){return ;}var B,K;if(F.anchorSize){if(typeof F.anchorSize=="number"){B=F.anchorSize;}else{B=F.anchorSize.width;K=F.anchorSize.height;}}else{B=F.initialConfig.width;K=F.initialConfig.height;}var H=F.items.items,G=H.length,D,J,L,C,A;for(D=0;D<G;D++){J=H[D];if(J.anchor){L=J.anchorSpec;if(!L){var N=J.anchor.split(" ");J.anchorSpec=L={right:this.parseAnchor(N[0],J.initialConfig.width,B),bottom:this.parseAnchor(N[1],J.initialConfig.height,K)};}C=L.right?this.adjustWidthAnchor(L.right(M),J):undefined;A=L.bottom?this.adjustHeightAnchor(L.bottom(E),J):undefined;if(C||A){J.setSize(C||undefined,A||undefined);}}}},parseAnchor:function(B,F,A){if(B&&B!="none"){var D;if(/^(r|right|b|bottom)$/i.test(B)){var E=A-F;return function(G){if(G!==D){D=G;return G-E;}};}else{if(B.indexOf("%")!=-1){var C=parseFloat(B.replace("%",""))*0.01;return function(G){if(G!==D){D=G;return Math.floor(G*C);}};}else{B=parseInt(B,10);if(!isNaN(B)){return function(G){if(G!==D){D=G;return G+B;}};}}}}return false;},adjustWidthAnchor:function(B,A){return B;},adjustHeightAnchor:function(B,A){return B;},setContainer:function(B){actuate.widget.panel.layout.ContainerLayout.prototype.setContainer.call(this,B);if(B.labelAlign){B.addClass("actuate-form-label-"+B.labelAlign);}if(B.hideLabels){this.labelStyle="display:none";this.elementStyle="padding-left:0;";this.labelAdjust=0;}else{this.labelSeparator=B.labelSeparator||this.labelSeparator;B.labelWidth=B.labelWidth||100;if(typeof B.labelWidth=="number"){var C=(typeof B.labelPad=="number"?B.labelPad:5);this.labelAdjust=B.labelWidth+C;this.labelStyle="width:"+B.labelWidth+"px;";this.elementStyle="padding-left:"+(B.labelWidth+C)+"px";}if(B.labelAlign=="top"){this.labelStyle="width:auto;";this.labelAdjust=0;this.elementStyle="padding-left:0;";}}if(!this.fieldTpl){var A=new actuate.widget.Template('<div class="actuate-form-item {5}" tabIndex="-1">','<label for="{0}" style="{2}" class="actuate-form-item-label">{1}{4}</label>','<div class="actuate-form-element" id="{0}" style="{3}">','</div><div class="{6}"></div>',"</div>");A.disableFormats=true;A.compile();actuate.widget.panel.layout.FormLayout.prototype.fieldTpl=A;}},getLabelStyle:function(E){var B="",C=[this.labelStyle,E];for(var D=0,A=C.length;D<A;++D){if(C[D]){B+=C[D];if(B.substr(-1,1)!=";"){B+=";";}}}return B;},renderItem:function(E,A,D){if(E&&!E.rendered&&E.isFormField&&E.inputType!="hidden"){var B=[(E.getItemId?E.getItemId():E.id),E.fieldLabel,this.getLabelStyle(E.labelStyle),this.elementStyle||"",typeof E.labelSeparator=="undefined"?this.labelSeparator:E.labelSeparator,(E.itemCls||this.container.itemCls||"")+(E.hideLabel?"actuate-hide-label":""),E.clearCls||"actuate-form-clear-left"];if(typeof A=="number"){A=D.dom.childNodes[A]||null;}if(A){this.fieldTpl._insertBefore(A,B);}else{this.fieldTpl._append(D,B);}E.render(E.getItemId?E.getItemId():E.id);}else{if(E&&!E.rendered){E.render(D,A);if(this.extraCls){var C=E.getPositionEl?E.getPositionEl():E;C.addClass(this.extraCls);}if(this.renderHidden&&E!=this.activeItem){E.hide();}}else{if(E&&!this.isValidParent(E,D)){if(this.extraCls){var C=E.getPositionEl?E.getPositionEl():E;C.addClass(this.extraCls);}if(typeof A=="number"){A=D.dom.childNodes[A];}D.dom.insertBefore(E.getEl().dom,A||null);if(this.renderHidden&&E!=this.activeItem){E.hide();}}}}},adjustWidthAnchor:function(B,A){return B-(A.isFormField?(A.hideLabel?0:this.labelAdjust):0);},isValidParent:function(B,A){return true;}});actuate.widget.Container.prototype.layouts["form"]=actuate.widget.panel.layout.FormLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.ColumnLayout=actuate.Class.create();actuate.widget.panel.layout.ColumnLayout.superclass=actuate.widget.panel.layout.ContainerLayout.prototype;actuate.widget.panel.layout.ColumnLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{monitorResize:true,extraCls:"actuate-widget-column",scrollOffset:0,isValidParent:function(B,A){return(B.getPositionEl?B.getPositionEl():B.getEl()).dom.parentNode==this.innerCt.dom;},onLayout:function(C,F){var D=C.items.items,E=D.length,G,A;if(!this.innerCt){F.addClass("actuate-widget-column-layout-ct");this.innerCt=F.createChild({cls:"actuate-widget-column-inner"});this.innerCt.createChild({cls:"actuate-widget-clear"});}this.renderAll(C,this.innerCt);var J=F.getStyleSize();if(J.width<1&&J.height<1){return ;}var H=J.width-F.getPadding("lr")-this.scrollOffset,B=J.height-F.getPadding("tb"),I=H;this.innerCt.setWidth(H);for(A=0;A<E;A++){G=D[A];if(!G.columnWidth){I-=(G.getSize().width+G.getEl().getMargins("lr"));}}I=I<0?0:I;for(A=0;A<E;A++){G=D[A];if(G.columnWidth){G.setSize(Math.floor(G.columnWidth*I)-G.getEl().getMargins("lr"));}}}});actuate.widget.Container.prototype.layouts["column"]=actuate.widget.panel.layout.ColumnLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.TableLayout=actuate.Class.create();actuate.widget.panel.layout.TableLayout.superclass=actuate.widget.panel.layout.ContainerLayout.prototype;actuate.widget.panel.layout.TableLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{columns:null,rows:null,tableAttr:null,monitorResize:false,setContainer:function(A){actuate.widget.panel.layout.TableLayout.superclass.setContainer.call(this,A);this._reset();},_reset:function(){this.currentRow=0;this.currentColumn=0;this.cells=[];},onLayout:function(C,F){var E=C.items.items,A=E.length,G,B;if(!this.table){var D={tag:"table",cls:"actuate-widget-table-layout",cellspacing:0,cn:{tag:"tbody"}};if(this.tableAttr){D=actuate.Class.extend(D,this.tableAttr);}F.addClass("actuate-widget-table-layout-ct");this.table=F.createChild(D,null,true);this._reset();this.renderAll(C,F);}},getRow:function(A){var B=this.table.tBodies[0].childNodes[A];if(!B){B=document.createElement("tr");this.table.tBodies[0].appendChild(B);}return B;},getNextCell:function(H){var A=this.getNextNonSpan(this.currentColumn,this.currentRow);var E=this.currentColumn=A[0],D=this.currentRow=A[1];for(var G=D;G<D+(H.rowspan||1);G++){if(!this.cells[G]){this.cells[G]=[];}for(var C=E;C<E+(H.colspan||1);C++){this.cells[G][C]=true;}}var F=document.createElement("td");if(H.cellId){F.id=H.cellId;}var B="actuate-widget-table-layout-cell";if(H.cellCls){B+=" "+H.cellCls;}F.className=B;if(H.colspan){F.colSpan=H.colspan;}if(H.rowspan){F.rowSpan=H.rowspan;}this.getRow(D).appendChild(F);return F;},getNextNonSpan:function(A,D){if(this.rows){var B=this.rows;while((B&&D>=B)||(this.cells[D]&&this.cells[D][A])){if(B&&D>=B){A++;D=0;}else{D++;}}}else{var C=this.columns;while((C&&A>=C)||(this.cells[D]&&this.cells[D][A])){if(C&&A>=C){D++;A=0;}else{A++;}}}return[A,D];},renderItem:function(E,B,D){if(E&&!E.rendered){var A=this.getNextCell(E);E.render(A);if(this.extraCls){var C=E.getPositionEl?E.getPositionEl():E;C.addClass(this.extraCls);}if(E.cellStyle){actuate.widget.Element.fly(A).setStyle(E.cellStyle);}}},isValidParent:function(B,A){return true;},destroy:function(){if(this.table){this.table.parentNode.removeChild(this.table);this.table=null;}}});actuate.widget.Container.prototype.layouts["table"]=actuate.widget.panel.layout.TableLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.AnchorLayout=actuate.Class.create();actuate.widget.panel.layout.AnchorLayout.superclass=actuate.widget.panel.layout.ContainerLayout.prototype;actuate.widget.panel.layout.AnchorLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.ContainerLayout(),{monitorResize:true,getAnchorViewSize:function(A,B){return B.dom==document.body?B.getViewSize():B.getStyleSize();},onLayout:function(F,I){actuate.widget.panel.layout.AnchorLayout.superclass.onLayout.call(this,F,I);var O=this.getAnchorViewSize(F,I);var M=O.width,E=O.height;if(M<20||E<20){return ;}var B,K;if(F.anchorSize){if(typeof F.anchorSize=="number"){B=F.anchorSize;}else{B=F.anchorSize.width;K=F.anchorSize.height;}}else{B=F.initialConfig.width;K=F.initialConfig.height;}var H=F.items.items,G=H.length,D,J,L,C,A;for(D=0;D<G;D++){J=H[D];if(J.anchor){L=J.anchorSpec;if(!L){var N=J.anchor.split(" ");J.anchorSpec=L={right:this.parseAnchor(N[0],J.initialConfig.width,B),bottom:this.parseAnchor(N[1],J.initialConfig.height,K)};}C=L.right?this.adjustWidthAnchor(L.right(M),J):undefined;A=L.bottom?this.adjustHeightAnchor(L.bottom(E),J):undefined;if(C||A){J.setSize(C||undefined,A||undefined);}}}},parseAnchor:function(B,F,A){if(B&&B!="none"){var D;if(/^(r|right|b|bottom)$/i.test(B)){var E=A-F;return function(G){if(G!==D){D=G;return G-E;}};}else{if(B.indexOf("%")!=-1){var C=parseFloat(B.replace("%",""))*0.01;return function(G){if(G!==D){D=G;return Math.floor(G*C);}};}else{B=parseInt(B,10);if(!isNaN(B)){return function(G){if(G!==D){D=G;return G+B;}};}}}}return false;},adjustWidthAnchor:function(B,A){return B;},adjustHeightAnchor:function(B,A){return B;}});actuate.widget.Container.prototype.layouts["anchor"]=actuate.widget.panel.layout.AnchorLayout;actuate.util.Package.define("actuate.widget.panel.layout");actuate.widget.panel.layout.AbsoluteLayout=actuate.Class.create();actuate.widget.panel.layout.AbsoluteLayout.superclass=actuate.widget.panel.layout.AnchorLayout.prototype;actuate.widget.panel.layout.AbsoluteLayout.prototype=actuate.Class.extend(new actuate.widget.panel.layout.AnchorLayout(),{extraCls:"actuate-widget-abs-layout-item",isForm:false,setContainer:function(A){actuate.widget.panel.layout.AbsoluteLayout.superclass.setContainer.call(this,A);if(A.isXType("form")){this.isForm=true;}},onLayout:function(A,B){if(this.isForm){A.body.position();}else{B.position();}actuate.widget.panel.layout.AbsoluteLayout.superclass.onLayout.call(this,A,B);},getAnchorViewSize:function(A,B){return this.isForm?A.body.getStyleSize():actuate.widget.panel.layout.AbsoluteLayout.superclass.getAnchorViewSize.call(this,A,B);},isValidParent:function(B,A){return this.isForm?true:actuate.widget.panel.layout.AbsoluteLayout.superclass.isValidParent.call(this,B,A);},adjustWidthAnchor:function(B,A){return B?B-A.getPosition(true)[0]:B;},adjustHeightAnchor:function(B,A){return B?B-A.getPosition(true)[1]:B;}});actuate.widget.Container.prototype.layouts["absolute"]=actuate.widget.panel.layout.AbsoluteLayout;actuate.util.Package.define("actuate.widget.panel");actuate.widget.panel.Panel=actuate.Class.create();actuate.widget.panel.Panel.superclass=actuate.widget.Container.prototype;actuate.widget.panel.Panel.prototype=actuate.Class.extend(new actuate.widget.Container(),{baseCls:"actuate-widget-panel",collapsedCls:"actuate-widget-panel-collapsed",headerAsText:true,headerTextWrappable:false,collapsed:false,collapseFirst:true,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",_deferHeight:true,buttonAlign:"right",__draggableHandlers:[],draggableIDs:null,allowDragOnHeader:true,allowDragOnBody:false,allowDragOnFooter:false,hideBorderBottom:false,containerClass:null,_initComponent:function(){actuate.widget.panel.Panel.superclass._initComponent.call(this);if(this.tbar){this.elements+=",tbar";if(typeof this.tbar=="object"){this.topToolbar=this.tbar;}delete this.tbar;}if(this.bbar){this.elements+=",bbar";if(typeof this.bbar=="object"){this.bottomToolbar=this.bbar;}delete this.bbar;}if(this.header===true){this.elements+=",header";delete this.header;}else{if(this.title&&this.header!==false){this.elements+=",header";}}if(this.footer===true){this.elements+=",footer";delete this.footer;}if(this.buttons){var C=this.buttons;this.buttons=[];for(var B=0,A=C.length;B<A;B++){if(C[B].render){C[B].ownerCt=this;this.buttons.push(C[B]);}else{this.addButton(C[B]);}}}},getKeyMap:function(){if(!this.keyMap){this.keyMap=new actuate.widget.KeyMap(this._ele,this.keys);}return this.keyMap;},_initEvents:function(){if(this.keys){this.getKeyMap();}if(this.draggable){this._initDraggable();}this._ele._addListener("keydown",this._onKeyDown,this);this._ele._addListener("keyup",this._onKeyUp,this);},_onKeyDown:function(B){var A=this._preventBackspace(B);if(A){return ;}},_onKeyUp:function(){return ;},_preventBackspace:function(A){if(this.readOnly===true){if(A.BACKSPACE===A.getKey()){if(A.preventDefault){A.preventDefault();}return true;}}return false;},_initDraggable:function(){this.__draggableHandlers=this.draggableIDs==null?[]:this.draggableIDs;if(this.allowDragOnHeader){this.__draggableHandlers.push(this.header.id);this.__draggableHandlers.push("actuate-window-header-text-id");}if(this.allowDragOnBody){this.__draggableHandlers.push(this.body.id);}if(this.allowDragOnFooter){this.__draggableHandlers.push(this.footer.id);this.__draggableHandlers.push("actuate-widget-panel-btns-id");}this.dd=this.__createDD();},__createDD:function(){this.dd=new actuate.widget.panel.PanelDD(this,typeof this.draggable=="boolean"?null:this.draggable);},getFrameWidth:function(){var B=this._ele.getFrameWidth("lr");var C=actuate.widget.Element;if(this.frame){var A=this.bwrap.dom.firstChild;B+=(C.fly(A).getFrameWidth("l")+C.fly(A.firstChild).getFrameWidth("r"));var D=this.bwrap.dom.firstChild.firstChild.firstChild;B+=C.fly(D).getFrameWidth("lr");}return B;},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth();},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight();},_createElement:function(A,C){if(this[A]){C.appendChild(this[A].dom);return ;}if(A==="bwrap"||this.elements.indexOf(A)!=-1){if(this[A+"Cfg"]){this[A]=actuate.widget.Element.get(C).createChild(this[A+"Cfg"]);}else{var B=document.createElement("div");B.className=this[A+"Cls"];this[A]=actuate.widget.Element.get(C.appendChild(B));}if(this[A+"CssClass"]){this[A].addClass(this[A+"CssClass"]);}if(this[A+"Style"]){if(this[A].applyStyles){this[A].applyStyles(this[A+"Style"]);}}}},_onRender:function(H,G){actuate.widget.panel.Panel.superclass._onRender.call(this,H,G);this._createClasses();if(this._ele){this._ele.addClass(this.baseCls);this.header=this._ele.down("."+this.headerCls);this.bwrap=this._ele.down("."+this.bwrapCls);var M=this.bwrap?this.bwrap:this.el;if(M){this.tbar=M.down("."+this.tbarCls);this.body=M.down("."+this.bodyCls);this.bbar=M.down("."+this.bbarCls);this.footer=M.down("."+this.footerCls);this.fromMarkup=true;}}else{this._ele=H.createChild({id:this.getItemId(),cls:this.baseCls},G);}var A=this._ele,K=A.dom;if(this.cls){this._ele.addClass(this.cls);}if(this.buttons){this.elements+=",footer";}if(this.frame){A.insertHtml("afterBegin",actuate.util.String.format(actuate.widget.Element.boxMarkup,this.baseCls));this._createElement("header",K.firstChild.firstChild.firstChild);this._createElement("bwrap",K);var O=this.bwrap.dom;var E=K.childNodes[1],B=K.childNodes[2];O.appendChild(E);O.appendChild(B);var P=O.firstChild.firstChild.firstChild;if(this.containerClass!=null){P.className+=" "+this.containerClass;}this._createElement("tbar",P);this._createElement("body",P);this._createElement("bbar",P);this._createElement("footer",O.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=" actuate-widget-panel-nofooter";}if(this.hideBorderBottom){this.bwrap.dom.lastChild.style.display="none";this.body.dom.style.borderBottom="none";}}else{this._createElement("header",K);this._createElement("bwrap",K);var O=this.bwrap.dom;this._createElement("tbar",O);this._createElement("body",O);this._createElement("bbar",O);this._createElement("footer",O);if(!this.header){this.body.addClass(this.bodyCls+"-noheader");if(this.tbar){this.tbar.addClass(this.tbarCls+"-noheader");}}}if(this.border===false){this._ele.addClass(this.baseCls+"-noborder");this.body.addClass(this.bodyCls+"-noborder");if(this.header){this.header.addClass(this.headerCls+"-noborder");}if(this.footer){this.footer.addClass(this.footerCls+"-noborder");}if(this.tbar){this.tbar.addClass(this.tbarCls+"-noborder");}if(this.bbar){this.bbar.addClass(this.bbarCls+"-noborder");}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+"-noborder");}if(this.bwrap){this.bwrap.enableDisplayMode("block");}if(this.header){if(!this.header_selectable){this.header.unselectable();}if(this.headerAsText){var Q='<span id="actuate-window-header-text-id" class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>";if(this.headerTextWrappable==true){Q='<div id="actuate-window-header-text-id" class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</div>";}this.header.dom.innerHTML=Q;if(this.iconCls){this.setIconClass(this.iconCls);}}}if(this.floating){this._makeFloating(this.floating);}if(this.collapsible){this.tools=this.tools?this.tools.slice(0):[];if(!this.hideCollapseTool){this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this._toggleCollapse,scope:this});}if(this.titleCollapse&&this.header){this.header._addListener("click",this._toggleCollapse,this,false);this.header.setStyle("cursor","pointer");}}if(this.tools){var J=this.tools;this.tools={};this._addTool.apply(this,J);}else{this.tools={};}if(this.buttons&&this.buttons.length>0){var D=this.footer.createChild({cls:"actuate-widget-panel-btns-ct",cn:{id:"actuate-widget-panel-btns-id",cls:"actuate-widget-panel-btns actuate-widget-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr></tr></tbody></table><div class="actuate-widget-clear"></div>'}},null,true);var L=D.getElementsByTagName("tr")[0];for(var F=0,I=this.buttons.length;F<I;F++){var N=this.buttons[F];var C=document.createElement("td");C.className="actuate-widget-panel-btn-td";N.render(L.appendChild(C));}}if(this.tbar&&this.topToolbar){if(actuate.util.Utility.isArray(this.topToolbar)){this.topToolbar=new actuate.widget.Toolbar(this.topToolbar);}this.topToolbar.render(this.tbar);this.topToolbar.ownerCt=this;}if(this.bbar&&this.bottomToolbar){if(actuate.util.Utility.isArray(this.bottomToolbar)){this.bottomToolbar=new actuate.widget.Toolbar(this.bottomToolbar);}this.bottomToolbar.render(this.bbar);this.bottomToolbar.ownerCt=this;}},_makeFloating:function(A){this.floating=true;this._ele=new actuate.widget.Layer(typeof A=="object"?A:{shadow:this.shadow!==undefined?this.shadow:"frame",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined},this._ele);},_getTopToolbar:function(){return this.topToolbar;},_getBottomToolbar:function(){return this.bottomToolbar;},addButton:function(A,D,C){var E={handler:D,scope:C,minWidth:this.minButtonWidth,hideParent:true};if(typeof A=="string"){E.text=A;}else{E=actuate.Class.extend(E,A);}var B=new actuate.widget.button.Button(E);B.ownerCt=this;if(!this.buttons){this.buttons=[];}this.buttons.push(B);return B;},_addTool:function(){if(!this[this.toolTarget]){return ;}if(!this.toolTemplate){var F=new actuate.widget.Template('<div class="actuate-widget-tool actuate-widget-tool-{id}">&#160;</div>');F.disableFormats=true;actuate.widget.panel.Panel.prototype.toolTemplate=F;}for(var E=0,C=arguments,B=C.length;E<B;E++){var A=C[E];if(!this.tools[A.id]){var G="actuate-widget-tool-"+A.id+"-over";var D=this.toolTemplate.insertFirst((A.align!=="left")?this[this.toolTarget]:this[this.toolTarget].child("span"),A,true);this.tools[A.id]=D;if(A.text){D.insertHtml("BeforeEnd",A.text);}D._addListener("click",this._createToolHandler(D,A,G,this));D.enableDisplayMode("block");if(A.hidden){D.hide();}if(A.qtip){if(typeof A.qtip=="object"){actuate.widget.tips.QuickTips.register(actuate.util.Utility.apply({target:D.id},A.qtip));}else{D.dom.qtip=A.qtip;}}D.addClassOnOver(G);}}},_createToolHandler:function(C,A,D,B){return function(E){C.removeClass(D);E.stopEvent();if(A.handler){A.handler.call(A.scope||C,E,C,B);}};},_afterRender:function(){if(this.fromMarkup&&this.height===undefined&&!this.autoHeight){this.height=this._ele.getHeight();}if(this.floating&&!this.hidden&&!this.initHidden){this._ele.show();}if(this.title){this.setTitle(this.title);}this._setAutoScroll();if(this.html){this.body.update(this.html);delete this.html;}if(this.contentEl){var A=actuate.widget.Element.getDom(this.contentEl);actuate.widget.Element.get(A).removeClass(["actuate-hidden","actuate-hide-display"]);this.body.dom.appendChild(A);}if(this.collapsed){this.collapsed=false;this._collapse();}actuate.widget.panel.Panel.superclass._afterRender.call(this);this._initEvents();},setContentEl:function(A){this.contentEl=A;this._afterRender();},_setAutoScroll:function(){if(this.rendered&&this.autoScroll){var A=this.body||this.el;if(A){A.setOverflow("auto");}}},_beforeEffect:function(){if(this.floating){this._ele.beforeAction();}if(this._ele){this._ele.addClass("actuate-widget-panel-animated");}},_afterEffect:function(){if(this._ele){this._ele.removeClass("actuate-widget-panel-animated");}},_collapse:function(){if(this.collapsed||this.fireEvent("beforecollapse",this)===false){return ;}this._beforeEffect();this._onCollapse();return this;},_onCollapse:function(){if(this[this.collapseEl]){this[this.collapseEl].hide();}this._afterCollapse();},_afterCollapse:function(){this.collapsed=true;if(this._ele){this._ele.addClass(this.collapsedCls);}this._afterEffect();this.fireEvent("collapse",this);},_expand:function(A){if(!this.collapsed||this.fireEvent("beforeexpand",this)===false){if(A){this.fireEvent("expand",this);}return ;}if(this._ele){this._ele.removeClass(this.collapsedCls);}this._beforeEffect();this._onExpand();return this;},_onExpand:function(){if(this[this.collapseEl]){this[this.collapseEl].show();}this._afterExpand();},_onShow:function(){if(this.floating){return this._ele.show();}actuate.widget.panel.Panel.superclass._onShow.call(this);},_onHide:function(){if(this.floating){return this._ele.hide();}actuate.widget.panel.Panel.superclass._onHide.call(this);},_afterExpand:function(){this.collapsed=false;this._afterEffect();this.fireEvent("expand",this);},_toggleCollapse:function(){this[this.collapsed?"_expand":"_collapse"]();return this;},_onDisable:function(){if(this.rendered&&this.maskDisabled){this._ele.mask();}actuate.widget.panel.Panel.superclass._onDisable.call(this);},_onEnable:function(){if(this.rendered&&this.maskDisabled){this._ele.unmask();}actuate.widget.panel.Panel.superclass._onEnable.call(this);},_onResize:function(A,B){if(A!==undefined||B!==undefined){this.queuedBodySize={width:A,height:B};if(!this.collapsed){if(typeof A=="number"){this.body.setWidth(this._adjustBodyWidth(A-this.getFrameWidth()));}else{if(A=="auto"){this.body.setWidth(A);}}if(typeof B=="number"){this.body.setHeight(this._adjustBodyHeight(B-this.getFrameHeight()));}else{if(B=="auto"){this.body.setHeight(B);}}if(this.disabled&&this._ele._mask){this._ele._mask.setSize(this._ele.dom.clientWidth,this._ele.getHeight());}}else{if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.registerEventHandler("expand",actuate.Method.bind(function(){delete this.queuedExpand;this._onResize(this.queuedBodySize.width,this.queuedBodySize.height);this._doLayout();},this,{single:true,event:"expand"}));}}this.fireEvent("bodyresize",this,A,B);}this.syncShadow();},_adjustBodyHeight:function(A){return A;},_adjustBodyWidth:function(A){return A;},getLayoutTarget:function(){return this.body;},getFrameWidth:function(){var B=this._ele.getFrameWidth("lr");if(this.frame){var A=this.bwrap.dom.firstChild;B+=(actuate.widget.Element.fly(A).getFrameWidth("l")+actuate.widget.Element.fly(A.firstChild).getFrameWidth("r"));var C=this.bwrap.dom.firstChild.firstChild.firstChild;B+=actuate.widget.Element.fly(C).getFrameWidth("lr");}return B;},getFrameHeight:function(){var A=this._ele.getFrameWidth("tb");A+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){var C=this._ele.dom.firstChild;var D=this.bwrap.dom.lastChild;A+=(C.offsetHeight+D.offsetHeight);var B=this.bwrap.dom.firstChild.firstChild.firstChild;A+=actuate.widget.Element.fly(B).getFrameWidth("tb");}else{A+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0);}return A;},adjustSizeToContent:function(){var A=actuate.widget.Element.get(this.body.dom.firstChild).getSize();A.width+=this.getFrameWidth();A.height+=this.getFrameHeight();A.width+=this.body.getPadding("lr");A.height+=this.body.getPadding("tb");this.setSize(A.width,A.height);this.syncShadow();return[A.width,A.height];},setTitle:function(C,B){this.title=C;if(this.header){var A=this.header.child("span");if(!A){A=this.header.select("div."+this.headerTextCls);}if(A&&A.update){A.update(C);}}if(B){this.setIconClass(B);}this.fireEvent("titlechange",this,C);return this;},setIconClass:function(B){var A=this.iconCls;this.iconCls=B;if(this.rendered&&this.header){if(this.frame){this.header.addClass("actuate-panel-icon");this.header.replaceClass(A,this.iconCls);}else{var D=this.header.dom;var C=D.firstChild&&String(D.firstChild.tagName).toLowerCase()=="img"?D.firstChild:null;if(C){actuate.widget.Element.fly(C).replaceClass(A,this.iconCls);}else{actuate.widget.DomHelper.insertBefore(D.firstChild,{tag:"img",src:actuate.widget.BLANK_IMAGE_URL,cls:"actuate-panel-inline-icon "+this.iconCls});}}}this.fireEvent("iconchange",this,B,A);},syncShadow:function(){if(this.floating&&this._ele.sync){this._ele.sync(true);}},_createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer";},_createGhost:function(A,E,B){var D=document.createElement("div");D.className="actuate-widget-panel-ghost "+(A?A:"");if(this.header){D.appendChild(this._ele.dom.firstChild.cloneNode(true));}actuate.widget.Element.fly(D.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight());D.style.width=this._ele.dom.offsetWidth+"px";if(!B){this.container.dom.appendChild(D);}else{actuate.widget.Element.getDom(B).appendChild(D);}if(E!==false&&this._ele.useShim!==false){var C=new actuate.widget.Layer({shadow:false,useDisplay:true,constrain:false},D);C.show();return C;}else{return new actuate.widget.Element(D);}},_getTool:function(A){return this.tools[A];}});actuate.widget.Component.prototype.registerType("panel",actuate.widget.panel.Panel);actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.Registry=function(){var D={};var B={};var A=0;var C=function(F,E){if(typeof F=="string"){return F;}var G=F.id;if(!G&&E!==false){G="extdd-"+(++A);F.id=G;}return G;};return{register:function(H,I){I=I||{};if(typeof H=="string"){H=document.getElementById(H);}I.ddel=H;D[C(H)]=I;if(I.isHandle!==false){B[I.ddel.id]=I;}if(I.handles){var G=I.handles;for(var F=0,E=G.length;F<E;F++){B[C(G[F])]=I;}}},unregister:function(H){var J=C(H,false);var I=D[J];if(I){delete D[J];if(I.handles){var G=I.handles;for(var F=0,E=G.length;F<E;F++){delete B[C(G[F],false)];}}}},getHandle:function(E){if(typeof E!="string"){E=E.id;}return B[E];},getHandleFromEvent:function(F){var E=actuate.widget.lib.Event.getTarget(F);return E?B[E.id]:null;},getTarget:function(E){if(typeof E!="string"){E=E.id;}return D[E];},getTargetFromEvent:function(F){var E=actuate.widget.lib.Event.getTarget(F);return E?D[E.id]||B[E.id]:null;}};}();actuate.util.Package.define("actuate.widget.dd");(function(){var A=actuate.widget.EventManager;var B=actuate.widget.lib.Dom;actuate.widget.dd.DragDrop=actuate.Class.create();actuate.widget.dd.DragDrop.prototype={initialize:function(E,C,D){this.DDM=actuate.widget.dd.DDM;if(E){this.init(E,C,D);}},id:null,config:null,dragElId:null,_handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},moveOnly:false,unlock:function(){this.locked=false;},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,_b4StartDrag:function(C,D){},startDrag:function(C,D){},_b4Drag:function(C){},_onDrag:function(C){},_onDragEnter:function(C,D){},_b4DragOver:function(C){},_onDragOver:function(C,D){},_b4DragOut:function(C){},_onDragOut:function(C,D){},_b4DragDrop:function(C){},_onDragDrop:function(C,D){},_onInvalidDrop:function(C){},_b4EndDrag:function(C){},endDrag:function(C){},_b4MouseDown:function(C){},_onMouseDown:function(C){},_onMouseUp:function(C){},_onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(H,F,M){if(typeof F=="number"){F={left:F,right:F,top:F,bottom:F};}F=F||this.defaultPadding;var J=actuate.widget.Element.get(this.getEl()).getBox();var C=actuate.widget.Element.get(H);var L=C.getScroll();var I,D=C.dom;if(D==document.body){I={x:L.left,y:L.top,width:actuate.widget.lib.Dom.getViewWidth(),height:actuate.widget.lib.Dom.getViewHeight()};}else{var K=C.getXY();I={x:K[0]+L.left,y:K[1]+L.top,width:D.clientWidth,height:D.clientHeight};}var G=J.y-I.y;var E=J.x-I.x;this.resetConstraints();this.setXConstraint(E-(F.left||0),I.width-E-J.width-(F.right||0),this.xTickSize);this.setYConstraint(G-(F.top||0),I.height-G-J.height-(F.bottom||0),this.yTickSize);},getEl:function(){if(!this._domRef){this._domRef=actuate.widget.Element.getDom(this.id);}return this._domRef;},getDragEl:function(){return actuate.widget.Element.getDom(this.dragElId);},init:function(E,C,D){this._initTarget(E,C,D);A.on(this.id,"mousedown",this._handleMouseDown,this);},_initTarget:function(E,C,D){this.config=D||{};this.DDM=actuate.widget.dd.DDM;this.groups={};if(typeof E!=="string"){E=actuate.widget.Element.id(E);}this.id=E;this.addToGroup((C)?C:"default");this._handleElId=E;this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this._handleOnAvailable();},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);},_handleOnAvailable:function(){this.available=true;this.resetConstraints();this._onAvailable();},setPadding:function(E,C,F,D){if(!C&&0!==C){this.padding=[E,E,E,E];}else{if(!F&&0!==F){this.padding=[E,C,E,C];}else{this.padding=[E,C,F,D];}}},setInitPosition:function(F,E){var G=this.getEl();if(!this.DDM.verifyEl(G)){return ;}var D=F||0;var C=E||0;var H=B.getXY(G);this._initPageX=H[0]-D;this._initPageY=H[1]-C;this.lastPageX=H[0];this.lastPageY=H[1];this.setStartPosition(H);},setStartPosition:function(D){var C=D||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1];},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C);},removeFromGroup:function(C){if(this.groups[C]){delete this.groups[C];}this.DDM.removeDDFromGroup(this,C);},setDragElId:function(C){this.dragElId=C;},setHandleElId:function(C){if(typeof C!=="string"){C=actuate.widget.Element.id(C);}this._handleElId=C;this.DDM.regHandle(this.id,C);},setOuterHandleElId:function(C){if(typeof C!=="string"){C=actuate.widget.Element.id(C);}A.on(C,"mousedown",this._handleMouseDown,this);this.setHandleElId(C);this.hasOuterHandles=true;},unreg:function(){A.un(this.id,"mousedown",this._handleMouseDown);this._domRef=null;this.DDM._remove(this);},destroy:function(){this.unreg();},isLocked:function(){return(this.DDM.isLocked()||this.locked);},_handleMouseDown:function(E,D){if(this.primaryButtonOnly&&E.button!=0&&!actuate.util.browser.isAndroid&&!actuate.util.browser.isIPad){return ;}if(this.isLocked()){return ;}this.DDM.refreshCache(this.groups);var C=new actuate.widget.lib.Point(actuate.widget.lib.Event.getPageX(E),actuate.widget.lib.Event.getPageY(E));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(C,this)){}else{if(this.clickValidator(E)){this.setStartPosition();this._b4MouseDown(E);this._onMouseDown(E);this.DDM._handleMouseDown(E,this);this.DDM.stopEvent(E);}else{}}},clickValidator:function(D){var C=D.getTarget();return(this.isValidHandleChild(C)&&(this.id==this._handleElId||this.DDM._handleWasClicked(C,this.id)));},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D;},addInvalidHandleId:function(C){if(typeof C!=="string"){C=actuate.widget.Element.id(C);}this.invalidHandleIds[C]=C;},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C);},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D];},removeInvalidHandleId:function(C){if(typeof C!=="string"){C=actuate.widget.Element.id(C);}delete this.invalidHandleIds[C];},removeInvalidHandleClass:function(D){for(var E=0,C=this.invalidHandleClasses.length;E<C;++E){if(this.invalidHandleClasses[E]==D){delete this.invalidHandleClasses[E];}}},isValidHandleChild:function(F){var E=true;var H;try{H=F.nodeName.toUpperCase();}catch(G){H=F.nodeName;}E=E&&!this.invalidHandleTypes[H];E=E&&!this.invalidHandleIds[F.id];for(var D=0,C=this.invalidHandleClasses.length;E&&D<C;++D){E=!actuate.widget.Element.fly(F).hasClass(this.invalidHandleClasses[D]);}return E;},setXTicks:function(F,C){this.xTicks=[];this.xTickSize=C;var E={};for(var D=this._initPageX;D>=this.minX;D=D-C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}for(D=this._initPageX;D<=this.maxX;D=D+C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(F,C){this.yTicks=[];this.yTickSize=C;var E={};for(var D=this._initPageY;D>=this.minY;D=D-C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}for(D=this._initPageY;D<=this.maxY;D=D+C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(E,D,C){this.leftConstraint=E;this.rightConstraint=D;this.minX=this._initPageX-E;this.maxX=this._initPageX+D;if(C){this.setXTicks(this._initPageX,C);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(C,E,D){this.topConstraint=C;this.bottomConstraint=E;this.minY=this._initPageY-C;this.maxY=this._initPageY+E;if(D){this.setYTicks(this._initPageY,D);}this.constrainY=true;},resetConstraints:function(){if(this._initPageX||this._initPageX===0){var D=(this.maintainOffset)?this.lastPageX-this._initPageX:0;var C=(this.maintainOffset)?this.lastPageY-this._initPageY:0;this.setInitPosition(D,C);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(I,F){if(!F){return I;}else{if(F[0]>=I){return F[0];}else{for(var D=0,C=F.length;D<C;++D){var E=D+1;if(F[E]&&F[E]>=I){var H=I-F[D];var G=F[E]-I;return(G>H)?F[D]:F[E];}}return F[F.length-1];}}},toString:function(){return("DragDrop "+this.id);}};})();if(!actuate.widget.dd.DragDropMgr){actuate.widget.dd.DragDropMgr=function(){var A=actuate.widget.EventManager;return{ids:{},_handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(D,C){for(var E in this.ids){for(var B in this.ids[E]){var F=this.ids[E][B];if(!this.isTypeOfDD(F)){continue;}F[D].apply(F,C);}}},_onLoad:function(){this.init();A.on(document,"mouseup",this._handleMouseUp,this,true);A.on(document,"mousemove",this._handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true);},_onResize:function(B){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(C,B){if(!this.initialized){this.init();}if(!this.ids[B]){this.ids[B]={};}this.ids[B][C.id]=C;},removeDDFromGroup:function(D,B){if(!this.ids[B]){this.ids[B]={};}var C=this.ids[B];if(C&&C[D.id]){delete C[D.id];}},_remove:function(C){for(var B in C.groups){if(B&&this.ids[B]&&this.ids[B][C.id]){delete this.ids[B][C.id];}}delete this._handleIds[C.id];},regHandle:function(C,B){if(!this._handleIds[C]){this._handleIds[C]={};}this._handleIds[C][B]=B;},isDragDrop:function(B){return(this.getDDById(B))?true:false;},getRelated:function(F,C){var E=[];for(var D in F.groups){for(j in this.ids[D]){var B=this.ids[D][j];if(!this.isTypeOfDD(B)){continue;}if(!C||B.isTarget){E[E.length]=B;}}}return E;},isLegalTarget:function(F,E){var C=this.getRelated(F,true);for(var D=0,B=C.length;D<B;++D){if(C[D].id==E.id){return true;}}return false;},isTypeOfDD:function(B){return(B&&B.__ygDragDrop);},isHandle:function(C,B){return(this._handleIds[C]&&this._handleIds[C][B]);},getDDById:function(C){for(var B in this.ids){if(this.ids[B][C]){return this.ids[B][C];}}return null;},_handleMouseDown:function(D,C){A.on(document,"mouseup",this._handleMouseUp,this,true);A.on(document,"mousemove",this._handleMouseMove,this,true);if(actuate.widget.tips&&actuate.widget.tips.QuickTips){actuate.widget.tips.QuickTips.disable();}if(this.dragCurrent){this._handleMouseUp(D);}this.currentTarget=D.getTarget();this.dragCurrent=C;var B=C.getEl();this.startX=D.getPageX();this.startY=D.getPageY();this.deltaX=this.startX-B.offsetLeft;this.deltaY=this.startY-B.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var E=actuate.widget.dd.DDM;E.startDrag(E.startX,E.startY);},this.clickTimeThresh);},startDrag:function(B,C){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent._b4StartDrag(B,C);this.dragCurrent.startDrag(B,C);}this.dragThreshMet=true;},_handleMouseUp:function(B){if(actuate.widget.tips&&actuate.widget.tips.QuickTips){actuate.widget.tips.QuickTips.enable();}if(!this.dragCurrent){return ;}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(B,true);}else{}this.stopDrag(B);this.stopEvent(B);},stopEvent:function(B){if(this.stopPropagation){B.stopPropagation();}if(this.preventDefault){B.preventDefault();}},stopDrag:function(B){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent._b4EndDrag(B);this.dragCurrent.endDrag(B);}this.dragCurrent._onMouseUp(B);}this.dragCurrent=null;this.dragOvers={};},_handleMouseMove:function(D){if(!this.dragCurrent){return true;}if(actuate.util.Utility.isIE&&!actuate.util.Utility.isIE8&&(D.button!==0&&D.button!==1&&D.button!==2)){this.stopEvent(D);return this._handleMouseUp(D);}if(!this.dragThreshMet){var C=Math.abs(this.startX-D.getPageX());var B=Math.abs(this.startY-D.getPageY());if(C>this.clickPixelThresh||B>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){this.dragCurrent._b4Drag(D);this.dragCurrent._onDrag(D);if(!this.dragCurrent.moveOnly){this.fireEvents(D,false);}}this.stopEvent(D);return true;},fireEvents:function(K,L){var N=this.dragCurrent;if(!N||N.isLocked()){return ;}var O=K.getPoint();var B=[];var E=[];var I=[];var G=[];var D=[];for(var F in this.dragOvers){var C=this.dragOvers[F];if(!this.isTypeOfDD(C)){continue;}if(!this.isOverTarget(O,C,this.mode)){E.push(C);}B[F]=true;delete this.dragOvers[F];}for(var M in N.groups){if("string"!=typeof M){continue;}for(F in this.ids[M]){var H=this.ids[M][F];if(!this.isTypeOfDD(H)){continue;}if(H.isTarget&&!H.isLocked()&&H!=N){if(this.isOverTarget(O,H,this.mode)){if(L){G.push(H);}else{if(!B[H.id]){D.push(H);}else{I.push(H);}this.dragOvers[H.id]=H;}}}}}if(this.mode){if(E.length){N._b4DragOut(K,E);N._onDragOut(K,E);}if(D.length){N._onDragEnter(K,D);}if(I.length){N._b4DragOver(K,I);N._onDragOver(K,I);}if(G.length){N._b4DragDrop(K,G);N._onDragDrop(K,G);}}else{var J=0;for(F=0,J=E.length;F<J;++F){N._b4DragOut(K,E[F].id);N._onDragOut(K,E[F].id);}for(F=0,J=D.length;F<J;++F){N._onDragEnter(K,D[F].id);}for(F=0,J=I.length;F<J;++F){N._b4DragOver(K,I[F].id);N._onDragOver(K,I[F].id);}for(F=0,J=G.length;F<J;++F){N._b4DragDrop(K,G[F].id);N._onDragDrop(K,G[F].id);}}if(L&&!G.length){N._onInvalidDrop(K);}},getBestMatch:function(D){var F=null;var C=D.length;if(C==1){F=D[0];}else{for(var E=0;E<C;++E){var B=D[E];if(B.cursorIsOver){F=B;break;}else{if(!F||F.overlap.getArea()<B.overlap.getArea()){F=B;}}}}return F;},refreshCache:function(C){for(var B in C){if("string"!=typeof B){continue;}for(var D in this.ids[B]){var E=this.ids[B][D];if(this.isTypeOfDD(E)){var F=this.getLocation(E);if(F){this.locationCache[E.id]=F;}else{delete this.locationCache[E.id];}}}}},verifyEl:function(C){if(C){var B;if(actuate.util.Utility.isIE){try{B=C.offsetParent;}catch(D){}}else{B=C.offsetParent;}if(B){return true;}}return false;},getLocation:function(G){if(!this.isTypeOfDD(G)){return null;}var E=G.getEl(),J,D,C,L,K,M,B,I,F;try{J=actuate.widget.lib.Dom.getXY(E);}catch(H){}if(!J){return null;}D=J[0];C=D+E.offsetWidth;L=J[1];K=L+E.offsetHeight;M=L-G.padding[0];B=C+G.padding[1];I=K+G.padding[2];F=D-G.padding[3];return new actuate.widget.lib.Region(M,B,I,F);},isOverTarget:function(J,B,D){var F=this.locationCache[B.id];if(!F||!this.useCache){F=this.getLocation(B);this.locationCache[B.id]=F;}if(!F){return false;}B.cursorIsOver=F.contains(J);var I=this.dragCurrent;if(!I||!I.getTargetCoord||B.ignoreOverLap||(!D&&!I.constrainX&&!I.constrainY)){return B.cursorIsOver;}B.overlap=null;var G=I.getTargetCoord(J.x,J.y);var C=I.getDragEl();var E=new actuate.widget.lib.Region(G.y,G.x+C.offsetWidth,G.y+C.offsetHeight,G.x);var H=E.intersect(F);if(H){B.overlap=H;return(D)?true:B.cursorIsOver;}else{return false;}},_onUnload:function(C,B){actuate.widget.dd.DragDropMgr.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);for(var B in this.elementCache){delete this.elementCache[B];}this.elementCache={};this.ids={};},elementCache:{},getElWrapper:function(C){var B=this.elementCache[C];if(!B||!B._ele){B=this.elementCache[C]=new this.ElementWrapper(actuate.widget.Element.getDom(C));}return B;},getElement:function(B){return actuate.widget.Element.getDom(B);},getCss:function(C){var B=actuate.widget.Element.getDom(C);return(B)?B.style:null;},ElementWrapper:function(B){this._ele=B||null;this.id=this._ele&&B.id;this.css=this._ele&&B.style;},getPosX:function(B){return actuate.widget.lib.Dom.getX(B);},getPosY:function(B){return actuate.widget.lib.Dom.getY(B);},swapNode:function(D,B){if(D.swapNode){D.swapNode(B);}else{var E=B.parentNode;var C=B.nextSibling;if(C==D){E.insertBefore(D,B);}else{if(B==D.nextSibling){E.insertBefore(B,D);}else{D.parentNode.replaceChild(B,D);E.insertBefore(D,C);}}}},getScroll:function(){var D,B,E=document.documentElement,C=document.body;if(E&&(E.scrollTop||E.scrollLeft)){D=E.scrollTop;B=E.scrollLeft;}else{if(C){D=C.scrollTop;B=C.scrollLeft;}else{}}return{top:D,left:B};},getStyle:function(C,B){return actuate.widget.Element.fly(C).getStyle(B);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(B,D){var C=actuate.widget.lib.Dom.getXY(D);actuate.widget.lib.Dom.setXY(B,C);},numericSort:function(C,B){return(C-B);},_timeoutCount:0,_addListeners:function(){var B=actuate.widget.dd.DDM;if(actuate.widget.lib.Event&&document){B._onLoad();}else{if(B._timeoutCount>2000){}else{setTimeout(B._addListeners,10);if(document&&document.body){B._timeoutCount+=1;}}}},_handleWasClicked:function(B,D){if(this.isHandle(D,B.id)){return true;}else{var C=B.parentNode;while(C){if(this.isHandle(D,C.id)){return true;}else{C=C.parentNode;}}}return false;}};}();actuate.widget.dd.DDM=actuate.widget.dd.DragDropMgr;actuate.widget.dd.DDM._addListeners();}actuate.widget.dd.DD=actuate.Class.extendClass(actuate.widget.dd.DragDrop,{initialize:function(C,A,B){if(C){this.init(C,A,B);}},scroll:true,autoOffset:function(C,B){var A=C-this.startPageX;var D=B-this.startPageY;this.setDelta(A,D);},setDelta:function(B,A){this.deltaX=B;this.deltaY=A;},setDragElPos:function(C,B){var A=this.getDragEl();this.alignElWithMouse(A,C,B);},alignElWithMouse:function(C,G,F){var E=this.getTargetCoord(G,F);var B=C.dom?C:actuate.widget.Element.fly(C,"_dd");if(!this.deltaSetXY){var H=[E.x,E.y];B.setXY(H);var D=B.getLeft(true);var A=B.getTop(true);this.deltaSetXY=[D-E.x,A-E.y];}else{B.setLeftTop(E.x+this.deltaSetXY[0],E.y+this.deltaSetXY[1]);}this.cachePosition(E.x,E.y);this.autoScroll(E.x,E.y,C.offsetHeight,C.offsetWidth);return E;},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A;}else{var C=actuate.widget.lib.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1];}},autoScroll:function(J,I,E,K){if(this.scroll){var L=actuate.widget.lib.Dom.getViewHeight();var B=actuate.widget.lib.Dom.getViewWidth();var N=this.DDM.getScrollTop();var D=this.DDM.getScrollLeft();var H=E+I;var M=K+J;var G=(L+N-I-this.deltaY);var F=(B+D-J-this.deltaX);var C=40;var A=(document.all)?80:30;if(H>L&&G<C){window.scrollTo(D,N+A);}if(I<N&&N>0&&I-N<C){window.scrollTo(D,N-A);}if(M>B&&F<C){window.scrollTo(D+A,N);}if(J<D&&D>0&&J-D<C){window.scrollTo(D-A,N);}}},getTargetCoord:function(C,B){var A=C-this.deltaX;var D=B-this.deltaY;if(this.constrainX){if(A<this.minX){A=this.minX;}if(A>this.maxX){A=this.maxX;}}if(this.constrainY){if(D<this.minY){D=this.minY;}if(D>this.maxY){D=this.maxY;}}A=this.getTick(A,this.xTicks);D=this.getTick(D,this.yTicks);return{x:A,y:D};},applyConfig:function(){actuate.widget.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},_b4MouseDown:function(A){this.autoOffset(A.getPageX(),A.getPageY());},_b4Drag:function(A){this.setDragElPos(A.getPageX(),A.getPageY());},toString:function(){return("DD "+this.id);}});actuate.widget.dd.DDProxy=actuate.Class.extendClass(actuate.widget.dd.DD,{resizeFrame:true,centerFrame:false,initialize:function(C,A,B){if(C){this.init(C,A,B);this._initFrame();}},createFrame:function(){var B=this;var A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame();},50);return ;}var D=this.getDragEl();if(!D){D=document.createElement("div");D.id=this.dragElId;var C=D.style;C.position="absolute";C.visibility="hidden";C.cursor="move";C.border="2px solid #aaa";C.zIndex=999;A.insertBefore(D,A.firstChild);}},_initFrame:function(){this.createFrame();},applyConfig:function(){actuate.widget.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||actuate.widget.dd.DDProxy.dragElId);},showFrame:function(E,D){var C=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2));}this.setDragElPos(E,D);actuate.widget.Element.fly(A).show();},_resizeProxy:function(){if(this.resizeFrame){var A=this.getEl();actuate.widget.Element.fly(this.getDragEl()).setSize(A.offsetWidth,A.offsetHeight);}},_b4MouseDown:function(B){var A=B.getPageX();var C=B.getPageY();this.autoOffset(A,C);this.setDragElPos(A,C);},_b4StartDrag:function(A,B){this.showFrame(A,B);},_b4EndDrag:function(A){actuate.widget.Element.fly(this.getDragEl()).hide();},endDrag:function(C){var B=this.getEl();var A=this.getDragEl();A.style.visibility="";this._beforeMove();B.style.visibility="hidden";actuate.widget.dd.DDM.moveToEl(B,A);A.style.visibility="hidden";B.style.visibility="";this._afterDrag();},_beforeMove:function(){},_afterDrag:function(){},toString:function(){return("DDProxy "+this.id);}});actuate.widget.dd.DDProxy.dragElId="ygddfdiv";actuate.widget.dd.DDTarget=actuate.Class.extendClass(actuate.widget.dd.DragDrop,{initialize:function(C,A,B){if(C){this._initTarget(C,A,B);}},toString:function(){return("DDTarget "+this.id);}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.ScrollManager=function(){var D=actuate.widget.dd.DragDropMgr;var E={};var C=null;var I={};var A=function(K){C=null;B();};var J=function(){if(D.dragCurrent){D.refreshCache(D.dragCurrent.groups);}};var F=function(){if(D.dragCurrent){var K=actuate.widget.dd.ScrollManager;var L=I._ele.ddScrollConfig?I._ele.ddScrollConfig.increment:K.increment;if(!K.animate){if(I._ele.scroll(I.dir,L)){J();}}else{I._ele.scroll(I.dir,L,true,K.animDuration,J);}}};var B=function(){if(I.id){clearInterval(I.id);}I.id=0;I._ele=null;I.dir="";};var H=function(L,K){B();I._ele=L;I.dir=K;var M=(L.ddScrollConfig&&L.ddScrollConfig.frequency)?L.ddScrollConfig.frequency:actuate.widget.dd.ScrollManager.frequency;I.id=setInterval(F,M);};var G=function(N,P){if(P||!D.dragCurrent){return ;}var Q=actuate.widget.dd.ScrollManager;if(!C||C!=D.dragCurrent){C=D.dragCurrent;Q.refreshCache();}var R=actuate.widget.lib.Event.getXY(N);var S=new actuate.widget.lib.Point(R[0],R[1]);for(var L in E){var M=E[L],K=M._region;var O=M.ddScrollConfig?M.ddScrollConfig:Q;if(K&&K.contains(S)&&M.isScrollable()){if(K.bottom-S.y<=O.vthresh){if(I._ele!=M){H(M,"down");}return ;}else{if(K.right-S.x<=O.hthresh){if(I._ele!=M){H(M,"left");}return ;}else{if(S.y-K.top<=O.vthresh){if(I._ele!=M){H(M,"up");}return ;}else{if(S.x-K.left<=O.hthresh){if(I._ele!=M){H(M,"right");}return ;}}}}}}B();};D.fireEvents=actuate.Method.createSequence(D.fireEvents,D,G,null);D.stopDrag=actuate.Method.createSequence(D.stopDrag,D,A,null);return{register:function(M){if(actuate.util.Utility.isArray(M)){for(var L=0,K=M.length;L<K;L++){this.register(M[L]);}}else{M=actuate.widget.Element.get(M);E[M.id]=M;}},unregister:function(M){if(actuate.util.Utility.isArray(M)){for(var L=0,K=M.length;L<K;L++){this.unregister(M[L]);}}else{M=actuate.widget.Element.get(M);delete E[M.id];}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,refreshCache:function(){for(var K in E){if(typeof E[K]=="object"){E[K]._region=E[K].getRegion();}}}};}();actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.StatusProxy=actuate.Class.create();actuate.widget.dd.StatusProxy.prototype={initialize:function(A){if(this.__extending){return ;}actuate.Class.extend(this,A);this.id=this.id||actuate.widget.Element.id();this._ele=new actuate.widget.Layer({dh:{id:this.id,tag:"div",cls:"actuate-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"actuate-dd-drop-icon"},{tag:"div",cls:"actuate-dd-drag-ghost"}]},shadow:!A||A.shadow!==false});this.ghost=actuate.widget.Element.get(this._ele.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed;},dropAllowed:"actuate-dd-drop-ok",dropNotAllowed:"actuate-dd-drop-nodrop",setStatus:function(A){A=A||this.dropNotAllowed;if(this.dropStatus!=A){this._ele.replaceClass(this.dropStatus,A);this.dropStatus=A;}},reset:function(A){this._ele.dom.className="actuate-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(A){this.ghost.update("");}},update:function(A){if(typeof A=="string"){this.ghost.update(A);}else{this.ghost.update("");A.style.margin="0";this.ghost.dom.appendChild(A);}var B=this.ghost.dom.firstChild;if(B){actuate.widget.Element.fly(B).setStyle(actuate.util.Utility.isIE?"styleFloat":"cssFloat","none");}},getEl:function(){return this._ele;},getGhost:function(){return this.ghost;},hide:function(A){this._ele.hide();if(A){this.reset(true);}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop();}},show:function(){this._ele.show();},sync:function(){this._ele.sync();},repair:function(B,C,A){this.callback=C;this.scope=A;this._afterRepair();},_afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this);}this.callback=null;this.scope=null;}};actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.DragSource=actuate.Class.extendClass(actuate.widget.dd.DDProxy,{initialize:function(B,A){if(this.__extending){return ;}this._ele=actuate.widget.Element.get(B);if(!this.dragData){this.dragData={};}actuate.Class.extend(this,A);if(!this.proxy){this.proxy=new actuate.widget.dd.StatusProxy();}actuate.widget.dd.DragSource.superclass.initialize.call(this,this._ele.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false;this._onStartDrag=actuate.Method.empty;},dropAllowed:"actuate-dd-drop-ok",dropNotAllowed:"actuate-dd-drop-nodrop",getDragData:function(A){return this.dragData;},_onDragEnter:function(C,D){var B=actuate.widget.dd.DragDropMgr.getDDById(D);this.cachedTarget=B;if(this._beforeDragEnter(B,C,D)!==false){if(B.isNotifyTarget){var A=B.notifyEnter(this,C,this.dragData);this.proxy.setStatus(A);}else{this.proxy.setStatus(this.dropAllowed);}if(this._afterDragEnter){this._afterDragEnter(B,C,D);}}},_beforeDragEnter:function(B,A,C){return true;},alignElWithMouse:function(){actuate.widget.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync();},_onDragOver:function(C,D){var B=this.cachedTarget||actuate.widget.dd.DragDropMgr.getDDById(D);if(this._beforeDragOver(B,C,D)!==false){if(B.isNotifyTarget){var A=B.notifyOver(this,C,this.dragData);this.proxy.setStatus(A);}if(this._afterDragOver){this._afterDragOver(B,C,D);}}},_beforeDragOver:function(B,A,C){return true;},_onDragOut:function(B,C){var A=this.cachedTarget||actuate.widget.dd.DragDropMgr.getDDById(C);if(this._beforeDragOut(A,B,C)!==false){if(A.isNotifyTarget){A.notifyOut(this,B,this.dragData);}this.proxy.reset();if(this._afterDragOut){this._afterDragOut(A,B,C);}}this.cachedTarget=null;},_beforeDragOut:function(B,A,C){return true;},_onDragDrop:function(B,C){var A=this.cachedTarget||actuate.widget.dd.DragDropMgr.getDDById(C);if(this._beforeDragDrop(A,B,C)!==false){if(A.isNotifyTarget){if(A.notifyDrop(this,B,this.dragData)){this._onValidDrop(A,B,C);}else{this._onInvalidDrop(A,B,C);}}else{this._onValidDrop(A,B,C);}if(this._afterDragDrop){this._afterDragDrop(A,B,C);}}delete this.cachedTarget;},_beforeDragDrop:function(B,A,C){return true;},_onValidDrop:function(B,A,C){this.hideProxy();if(this._afterValidDrop){this._afterValidDrop(B,A,C);}},getRepairXY:function(B,A){return this._ele.getXY();},_onInvalidDrop:function(B,A,C){this._beforeInvalidDrop(B,A,C);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,A,this.dragData);}this.cacheTarget=null;}this.proxy.repair(this.getRepairXY(A,this.dragData),this._afterRepair,this);if(this._afterInvalidDrop){this._afterInvalidDrop(A,C);}},_afterRepair:function(){if(actuate.widget.enableFx){this._ele.highlight(this.hlColor||"c3daf9");}this.dragging=false;},_beforeInvalidDrop:function(B,A,C){return true;},_handleMouseDown:function(B){if(this.dragging){return ;}var A=this.getDragData(B);if(A&&this._onBeforeDrag(A,B)!==false){this.dragData=A;this.proxy.stop();actuate.widget.dd.DragSource.superclass._handleMouseDown.apply(this,arguments);}},_onBeforeDrag:function(A,B){return true;},_onStartDrag:actuate.Method.empty,startDrag:function(A,B){this.proxy.reset();this.dragging=true;this.proxy.update("");this._onInitDrag(A,B);this.proxy.show();},_onInitDrag:function(A,C){var B=this._ele.dom.cloneNode(true);B.id=actuate.widget.Element.id();this.proxy.update(B);this._onStartDrag(A,C);return true;},getProxy:function(){return this.proxy;},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false;},triggerCacheRefresh:function(){actuate.widget.dd.DDM.refreshCache(this.groups);},_b4EndDrag:function(A){},endDrag:function(A){this._onEndDrag(this.dragData,A);},_onEndDrag:function(A,B){},autoOffset:function(A,B){this.setDelta(-12,-20);}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.DragTracker=actuate.Class.extendClass(actuate.widget.Observable,{active:false,tolerance:5,autoStart:false,initialize:function(A){actuate.Class.extend(this,A);this.dragRegion=new actuate.widget.lib.Region(0,0,0,0);if(this._ele){this._initEl(this._ele);}},_initEl:function(A){this._ele=actuate.widget.Element.get(A);A._addListener("mousedown",this._onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined);},destroy:function(){this._ele._removeListener("mousedown",this._onMouseDown,this);},_onMouseDown:function(C,B){if(this.fireEvent("mousedown",this,C)!==false&&this._onBeforeStart(C)!==false){this.startXY=this.lastXY=C.getXY();this.dragTarget=this.delegate?B:this._ele.dom;this._preventDefault(C);var A=actuate.widget.Element.getDoc();A.on("mouseup",this._onMouseUp,this);A.on("mousemove",this._onMouseMove,this);A.on("selectstart",this.stopSelect,this);if(this.autoStart){this.timer=actuate.Method.defer(this.autoStart===true?1000:this.autoStart,this.triggerStart,this,[false,C]);}}},_onMouseMove:function(D,C){this._preventDefault(D);var B=D.getXY(),A=this.startXY;this.lastXY=B;if(!this.active){if(Math.abs(A[0]-B[0])>this.tolerance||Math.abs(A[1]-B[1])>this.tolerance){this.triggerStart(false,D);}else{return ;}}this.fireEvent("mousemove",this,D);this._onDrag(D);this.fireEvent("drag",this,D);},_onMouseUp:function(B){var A=actuate.widget.Element.getDoc();A.un("mousemove",this._onMouseMove,this);A.un("mouseup",this._onMouseUp,this);A.un("selectstart",this.stopSelect,this);this._preventDefault(B);this.clearStart();this.active=false;delete this._eleRegion;this.fireEvent("mouseup",this,B);this._onEnd(B);this.fireEvent("dragend",this,B);},_preventDefault:function(A){if(A&&!actuate.util.browser.isFirefox36){A.preventDefault();}},triggerStart:function(A,B){this.clearStart();this.active=true;B.startXY=this.startXY;this._onStart(B);this.fireEvent("dragstart",this,B);},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer;}},stopSelect:function(A){A.stopEvent();return false;},_onBeforeStart:function(A){},_onStart:function(A){},_onDrag:function(A){},_onEnd:function(A){},getDragTarget:function(){return this.dragTarget;},getDragCt:function(){return this._ele;},getXY:function(A){return A?this.constrainModes[A].call(this,this.lastXY):this.lastXY;},getOffset:function(C){var B=this.getXY(C);var A=this.startXY;return[A[0]-B[0],A[1]-B[1]];},constrainModes:{"point":function(B){if(!this._eleRegion){this._eleRegion=this.getDragCt().getRegion();}var A=this.dragRegion;A.left=B[0];A.top=B[1];A.right=B[0];A.bottom=B[1];A.constrainTo(this._eleRegion);return[A.left,A.top];}}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.DragZone=actuate.Class.extendClass(actuate.widget.dd.DragSource,{initialize:function(B,A){if(this.__extending){return ;}actuate.widget.dd.DragZone.superclass.initialize.call(this,B,A);if(this.containerScroll){actuate.widget.dd.ScrollManager.register(this._ele);}},getDragData:function(A){return actuate.widget.dd.Registry.getHandleFromEvent(A);},_onInitDrag:function(A,B){this.proxy.update(this.dragData.ddel.cloneNode(true));this._onStartDrag(A,B);return true;},_afterRepair:function(){if(actuate.widget.enableFx){actuate.widget.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9");}this.dragging=false;},getRepairXY:function(A){return actuate.widget.Element.fly(this.dragData.ddel).getXY();}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.DropTarget=actuate.Class.extendClass(actuate.widget.dd.DDTarget,{initialize:function(B,A){if(this.__extending){return ;}this._ele=actuate.widget.Element.get(B);actuate.Class.extend(this,A);if(this.containerScroll){actuate.widget.dd.ScrollManager.register(this._ele);}actuate.widget.dd.DropTarget.superclass.initialize.call(this,this._ele.dom,this.ddGroup||this.group,{isTarget:true});},dropAllowed:"actuate-dd-drop-ok",dropNotAllowed:"actuate-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(A,C,B){if(this.overClass){this._ele.addClass(this.overClass);}return this.dropAllowed;},notifyOver:function(A,C,B){return this.dropAllowed;},notifyOut:function(A,C,B){if(this.overClass){this._ele.removeClass(this.overClass);}},notifyDrop:function(A,C,B){return false;}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.DropZone=actuate.Class.extendClass(actuate.widget.dd.DropTarget,{initialize:function(B,A){if(this.__extending){return ;}actuate.widget.dd.DropZone.superclass.initialize.call(this,B,A);},getTargetFromEvent:function(A){return actuate.widget.dd.Registry.getTargetFromEvent(A);},_onNodeEnter:function(D,A,C,B){},_onNodeOver:function(D,A,C,B){return this.dropAllowed;},_onNodeOut:function(D,A,C,B){},_onNodeDrop:function(D,A,C,B){return false;},_onContainerOver:function(A,C,B){return this.dropNotAllowed;},_onContainerDrop:function(A,C,B){return false;},notifyEnter:function(A,C,B){return this.dropNotAllowed;},notifyOver:function(A,C,B){var D=this.getTargetFromEvent(C);if(!D){if(this.lastOverNode){this._onNodeOut(this.lastOverNode,A,C,B);this.lastOverNode=null;}return this._onContainerOver(A,C,B);}if(this.lastOverNode!=D){if(this.lastOverNode){this._onNodeOut(this.lastOverNode,A,C,B);}this._onNodeEnter(D,A,C,B);this.lastOverNode=D;}return this._onNodeOver(D,A,C,B);},notifyOut:function(A,C,B){if(this.lastOverNode){this._onNodeOut(this.lastOverNode,A,C,B);this.lastOverNode=null;}},notifyDrop:function(A,C,B){if(this.lastOverNode){this._onNodeOut(this.lastOverNode,A,C,B);this.lastOverNode=null;}var D=this.getTargetFromEvent(C);return D?this._onNodeDrop(D,A,C,B):this._onContainerDrop(A,C,B);},triggerCacheRefresh:function(){actuate.widget.dd.DDM.refreshCache(this.groups);}});actuate.util.Package.define("actuate.widget.dd");actuate.widget.dd.PanelProxy=actuate.Class.create();actuate.widget.dd.PanelProxy.prototype={insertProxy:true,setStatus:actuate.Method.empty,reset:actuate.Method.empty,update:actuate.Method.empty,stop:actuate.Method.empty,sync:actuate.Method.empty,initialize:function(A,B){if(this.__extending){return ;}this.panel=A;this.id=this.panel.id+"-ddproxy";actuate.util.Utility.apply(this,B);},getEl:function(){return this.ghost;},getGhost:function(){return this.ghost;},getProxy:function(){return this.proxy;},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy;}this.panel._ele.dom.style.display="";this.ghost.remove();delete this.ghost;}},show:function(){if(!this.ghost){this.ghost=this.panel._createGhost(undefined,undefined,actuate.widget.Element.getBody());this.ghost.setXY(this.panel._ele.getXY());if(this.insertProxy){this.proxy=this.panel._ele.insertSibling({cls:"actuate-widget-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize());}this.panel._ele.dom.style.display="none";}},repair:function(B,C,A){this.hide();if(typeof C=="function"){C.call(A||this);}},moveProxy:function(A,B){if(this.proxy){A.insertBefore(this.proxy.dom,B);}}};actuate.widget.panel.Panel.DD=actuate.Class.extendClass(actuate.widget.dd.DragSource,{showFrame:actuate.Method.empty,startDrag:actuate.Method.empty,initialize:function(A,B){if(this.__extending){return ;}this.panel=A;this.dragData={panel:A};this.proxy=new actuate.widget.dd.PanelProxy(A,B);actuate.widget.panel.Panel.DD.superclass.initialize.call(this,A._ele,B);var C=A.header;if(C){this.setHandleElId(C.id);}(C?C:this.panel.body).setStyle("cursor","move");this.scroll=false;},_b4StartDrag:function(A,B){this.proxy.show();},_b4MouseDown:function(B){var A=B.getPageX();var C=B.getPageY();this.autoOffset(A,C);},_onInitDrag:function(A,B){this._onStartDrag(A,B);return true;},createFrame:actuate.Method.empty,getDragEl:function(A){return this.proxy.ghost.dom;},endDrag:function(A){this.proxy.hide();},autoOffset:function(A,B){A-=this.startPageX;B-=this.startPageY;this.setDelta(A,B);}});actuate.widget.Resizable=actuate.Class.create();actuate.widget.Resizable.superclass=actuate.widget.Observable.prototype;actuate.widget.Resizable.prototype=actuate.Class.extend(new actuate.widget.Observable(),{resizeChild:false,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:10000,maxHeight:10000,enabled:true,animate:false,duration:0.35,dynamic:false,handles:false,multiDirectional:false,disableTrackOver:false,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:false,width:null,height:null,preserveRatio:false,transparent:false,minX:0,minY:0,draggable:false,initialize:function(D,E){if(this.__extending){return ;}this._ele=actuate.widget.Element.get(D);if(E&&E.wrap){E.resizeChild=this._ele;this._ele=this._ele.wrap(typeof E.wrap=="object"?E.wrap:{cls:"xresizable-wrap"});this._ele.id=this._ele.dom.id=E.resizeChild.id+"-rzwrap";this._ele.setStyle("overflow","hidden");this._ele.setPositioning(E.resizeChild.getPositioning());E.resizeChild.clearPositioning();if(!E.width||!E.height){var F=E.resizeChild.getSize();this._ele.setSize(F.width,F.height);}if(E.pinned&&!E.adjustments){E.adjustments="auto";}}this.proxy=this._ele.createProxy({tag:"div",cls:"actuate-resizable-proxy",id:this._ele.id+"-rzproxy"},actuate.widget.Element.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");actuate.Class.extend(this,E);if(this.pinned){this.disableTrackOver=true;this._ele.addClass("actuate-resizable-pinned");}var I=this._ele.getStyle("position");if(I!="absolute"&&I!="fixed"){this._ele.setStyle("position","relative");}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w";}}if(this.handles=="all"){this.handles="n s e w ne nw se sw";}var M=this.handles.split(/\s*?[,;]\s*?| /);var C=actuate.widget.Resizable.positions;for(var H=0,J=M.length;H<J;H++){if(M[H]&&C[M[H]]){var L=C[M[H]];this[L]=new actuate.widget.Resizable.Handle(this,L,this.disableTrackOver,this.transparent);}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true;}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=actuate.widget.Element.get(this._ele.dom.firstChild,true);}else{this.resizeChild=actuate.widget.Element.get(this.resizeChild,true);}}if(this.adjustments=="auto"){var B=this.resizeChild;var K=this.west,G=this.east,A=this.north,M=this.south;if(B&&(K||A)){B.position("relative");B.setLeft(K?K._ele.getWidth():0);B.setTop(A?A._ele.getHeight():0);}this.adjustments=[(G?-G._ele.getWidth():0)+(K?-K._ele.getWidth():0),(A?-A._ele.getHeight():0)+(M?-M._ele.getHeight():0)-1];}if(this.draggable){this.dd=this.dynamic?this._ele.initDD(null):this._ele.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this._ele.id);}if(this.width!==null&&this.height!==null){this._ele.setSize(this.width,this.height);}else{this.updateChildSize();}if(actuate.util.Utility.isIE){this._ele.dom.style.zoom=1;}actuate.widget.Resizable.superclass.initialize.call(this,E);},resizeTo:function(B,A){this._ele.setSize(B,A);this.updateChildSize();this.fireEvent("resize",this,B,A,null);},startSizing:function(C,B){this.fireEvent("beforeresize",this,C);if(this.enabled){if(!this.overlay){this.overlay=this._ele.createProxy({tag:"div",cls:"actuate-resizable-overlay",html:"&#160;"},actuate.widget.Element.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on("mousemove",this._onMouseMove,this);this.overlay.on("mouseup",this._onMouseUp,this);if(actuate.util.browser.useMobile()==true){this.overlay.on("touchcancel",this._onMouseUp,this);}}this.overlay.setStyle("cursor",B._ele.getStyle("cursor"));this.resizing=true;this.startBox=this._ele.getBox();this.startPoint=C.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(actuate.widget.lib.Dom.getViewWidth(true),actuate.widget.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var A=actuate.widget.Element.get(this.constrainTo);this.resizeRegion=A.getRegion().adjust(A.getFrameWidth("t"),A.getFrameWidth("l"),-A.getFrameWidth("b"),-A.getFrameWidth("r"));}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible");}}},_onMouseDown:function(A,B){if(this.enabled){B.stopEvent();this.activeHandle=A;this.startSizing(B,A);}},_onMouseUp:function(B){B.stopEvent();var A=this.resizeElement();this.resizing=false;this._handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,A.width,A.height,B);},updateChildSize:function(){if(this.resizeChild){var C=this._ele;var D=this.resizeChild;var B=this.adjustments;if(C.dom.offsetWidth){var A=C.getSize(true);D.setSize(A.width+B[0],A.height+B[1]);}if(actuate.util.Utility.isIE){setTimeout(function(){if(C.dom.offsetWidth){var E=C.getSize(true);D.setSize(E.width+B[0],E.height+B[1]);}},10);}}},snap:function(C,E,B){if(!E||!C){return C;}var D=C;var A=C%E;if(A>0){if(A>(E/2)){D=C+(E-A);}else{D=C-A;}}return Math.max(B,D);},resizeElement:function(){var A=this.proxy.getBox();if(this.updateBox){this._ele.setBox(A,false,this.animate,this.duration,null,this.easing);}else{this._ele.setSize(A.width,A.height,this.animate,this.duration,null,this.easing);}this.updateChildSize();if(!this.dynamic){this.proxy.hide();}return A;},constrain:function(B,C,A,D){if(B-C<A){C=B-A;}else{if(B-C>D){C=D-B;}}return C;},_onMouseMove:function(S){if(this.enabled){S.stopEvent();try{if(this.resizeRegion&&!this.resizeRegion.contains(S.getPoint())){return ;}var Q=this.curSize||this.startBox;var I=this.startBox.x,H=this.startBox.y;var C=I,B=H;var J=Q.width,R=Q.height;var D=J,L=R;var K=this.minWidth,T=this.minHeight;var P=this.maxWidth,W=this.maxHeight;var F=this.widthIncrement;var A=this.heightIncrement;var U=S.getXY();var O=-(this.startPoint[0]-Math.max(this.minX,U[0]));var M=-(this.startPoint[1]-Math.max(this.minY,U[1]));var G=this.activeHandle.position;switch(G){case"east":J+=O;J=Math.min(Math.max(K,J),P);break;case"south":R+=M;R=Math.min(Math.max(T,R),W);break;case"southeast":J+=O;R+=M;J=Math.min(Math.max(K,J),P);R=Math.min(Math.max(T,R),W);break;case"north":M=this.constrain(R,M,T,W);H+=M;R-=M;break;case"west":O=this.constrain(J,O,K,P);I+=O;J-=O;break;case"northeast":J+=O;J=Math.min(Math.max(K,J),P);M=this.constrain(R,M,T,W);H+=M;R-=M;break;case"northwest":O=this.constrain(J,O,K,P);M=this.constrain(R,M,T,W);H+=M;R-=M;I+=O;J-=O;break;case"southwest":O=this.constrain(J,O,K,P);R+=M;R=Math.min(Math.max(T,R),W);I+=O;J-=O;break;}var N=this.snap(J,F,K);var V=this.snap(R,A,T);if(N!=J||V!=R){switch(G){case"northeast":H-=V-R;break;case"north":H-=V-R;break;case"southwest":I-=N-J;break;case"west":I-=N-J;break;case"northwest":I-=N-J;H-=V-R;break;}J=N;R=V;}if(this.preserveRatio){switch(G){case"southeast":case"east":R=L*(J/D);R=Math.min(Math.max(T,R),W);J=D*(R/L);break;case"south":J=D*(R/L);J=Math.min(Math.max(K,J),P);R=L*(J/D);break;case"northeast":J=D*(R/L);J=Math.min(Math.max(K,J),P);R=L*(J/D);break;case"north":var X=J;J=D*(R/L);J=Math.min(Math.max(K,J),P);R=L*(J/D);I+=(X-J)/2;break;case"southwest":R=L*(J/D);R=Math.min(Math.max(T,R),W);var X=J;J=D*(R/L);I+=X-J;break;case"west":var E=R;R=L*(J/D);R=Math.min(Math.max(T,R),W);H+=(E-R)/2;var X=J;J=D*(R/L);I+=X-J;break;case"northwest":var X=J;var E=R;R=L*(J/D);R=Math.min(Math.max(T,R),W);J=D*(R/L);H+=E-R;I+=X-J;break;}}this.proxy.setBounds(I,H,J,R);if(this.dynamic){this.resizeElement();}}catch(S){}}},_handleOver:function(){if(this.enabled){this._ele.addClass("actuate-resizable-over");}},_handleOut:function(){if(!this.resizing){this._ele.removeClass("actuate-resizable-over");}},getEl:function(){return this._ele;},getResizeChild:function(){return this.resizeChild;},destroy:function(B){if(this.dd){this.dd.destroy();}if(this.overlay){actuate.widget.Element.destroy(this.overlay);this.overlay=null;}actuate.widget.Element.destroy(this.proxy);this.proxy=null;var C=actuate.widget.Resizable.positions;for(var A in C){if(typeof C[A]!="function"&&this[C[A]]){this[C[A]]._destroy();}}if(B){this._ele.update("");actuate.widget.Element.destroy(this._ele);this._ele=null;}},syncHandleHeight:function(){var A=this._ele.getHeight(true);if(this.west){this.west._ele.setHeight(A);}if(this.east){this.east._ele.setHeight(A);}}});actuate.widget.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};actuate.widget.Resizable.Handle=function(C,E,B,D){if(!this.tpl){var A=actuate.widget.DomHelper.createTemplate({tag:"div",cls:"actuate-resizable-handle actuate-resizable-handle-{0}"});A.compile();actuate.widget.Resizable.Handle.prototype.tpl=A;}this.position=E;this.rz=C;this._ele=this.tpl.append(C._ele.dom,[this.position],true);this._ele.unselectable();if(D){this._ele.setOpacity(0);}this._ele.on("mousedown",this._onMouseDown,this);if(!B){this._ele.on("mouseover",this._onMouseOver,this);this._ele.on("mouseout",this._onMouseOut,this);if(actuate.util.browser.useMobile()==true){this._ele.on("touchcancel",this._onTouchCancel,this);}}};actuate.widget.Resizable.Handle.prototype={mobileDevice:actuate.util.browser.useMobile(),_afterResize:function(A){},_onMouseDown:function(A){A.stopEvent();this.rz._handleOver(this,A);this.rz._onMouseDown(this,A);},_onTouchCancel:function(A){A.stopEvent();this.rz._onMouseUp(A);},_onMouseOver:function(A){A.stopEvent();this.rz._handleOver(this,A);if(this.mobileDevice==true){this.rz._onMouseDown(this,A);}},_onMouseOut:function(A){A.stopEvent();if(this.mobileDevice==true){}else{this.rz._handleOut(this,A);}},_destroy:function(){actuate.widget.Element.destroy(this._ele);this._ele=null;}};actuate.util.Package.define("actuate.widget");actuate.widget.Window=actuate.Class.extendClass(actuate.widget.panel.Panel,{baseCls:"actuate-window",resizable:true,draggable:true,closable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,closeAction:"close",elements:"header,body",collapsible:false,initHidden:true,monitorResize:true,frame:true,floating:true,initialize:function(A){actuate.widget.Window.superclass.initialize.call(this,A);},getState:function(){return actuate.widget.apply(actuate.widget.Window.superclass.getState.call(this)||{},this.getBox());},_onRender:function(B,A){actuate.widget.Window.superclass._onRender.call(this,B,A);if(this.plain){this._ele.addClass("actuate-window-plain");}this.focusEl=this._ele.createChild({tag:"a",href:"#",cls:"actuate-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this._ele.createProxy("actuate-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"actuate-el-mask"},this._ele.dom);this.mask.enableDisplayMode("block");this.mask.hide();if(actuate.util.browser.useMobile()==true){}else{this.mask.on("click",this.focus,this);}}},_afterRender:function(B,A){actuate.widget.Window.superclass._afterRender.call(this,B,A);this._initEvents();},_initEvents:function(){actuate.widget.Window.superclass._initEvents.call(this);if(this.resizable){this.resizer=new actuate.widget.Resizable(this._ele,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this._resizerAction});this.resizer.window=this;this.resizer.registerEventHandler("beforeresize",actuate.Method.bind(this._beforeResize,this));}if(this.draggable){this.header.addClass("actuate-window-draggable");}this._initTools();this._ele.on("mousedown",this.toFront,this);this.manager=this.manager||actuate.widget.WindowMgr;this.manager.register(this);this.hidden=true;if(this.maximized){this.maximized=false;this.maximize();}if(this.closable){var A=this.getKeyMap();actuate.util.Event.observe(document,"keydown",this._onDocumentEsc,false);A.disable();}},__createDD:function(){this.dd=new actuate.widget.Window.DD(this);},_onEsc:function(){},_onDocumentEsc:function(B){if(B.keyCode==actuate.util.Event.KEY_ESC){var A=actuate.widget.Window.prototype.globeActiveWindow;if(A.length>0){var C=A[A.length-1];if(C&&C.id){C[C.closeAction]();}}}},_beforeDestroy:function(){this.hide();if(this.doAnchor){actuate.widget.EventManager.removeResizeListener(this.doAnchor,this);actuate.widget.EventManager.un(window,"scroll",this.doAnchor,this);}actuate.widget.Element.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask);actuate.widget.Window.superclass._beforeDestroy.call(this);},_onDestroy:function(){if(this.manager){this.manager.unregister(this);}actuate.widget.Window.superclass._onDestroy.call(this);},_initTools:function(){if(this.minimizable){this._addTool({id:"minimize",handler:actuate.Method.bind(this.minimize,this,[])});}if(this.maximizable){this._addTool({id:"maximize",handler:actuate.Method.bind(this.maximize,this,[])});this._addTool({id:"restore",handler:actuate.Method.bind(this.restore,this,[]),hidden:true});this.header.on("dblclick",this.toggleMaximize,this);}if(this.closable){this._addTool({id:"close",handler:actuate.Method.bind(this[this.closeAction],this,[])});}},_resizerAction:function(){var A=this.proxy.getBox();this.proxy.hide();this.window._handleResize(A);return A;},_beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this._ele.getBox();},_updateHandles:function(){if(actuate.util.Utility.isIE&&this.resizer){this.resizer.syncHandleHeight();this._ele.repaint();}},_handleResize:function(B){var A=this.resizeBox;if(A.x!=B.x||A.y!=B.y){this.updateBox(B);}else{this.setSize(B);}this.focus();this._updateHandles();if(this.layout){this._doLayout();}this.fireEvent("resize",this,B.width,B.height);},focus:function(){var C=this.focusEl,A=this.defaultButton,B=typeof A;if(B!="undefined"){if(B=="number"){C=this.buttons[A];}else{if(B=="string"){C=actuate.widget.Element.getCmp(A);}else{C=A;}}}actuate.Method.defer(10,C.focus,C);},_beforeShow:function(){delete this._ele.lastXY;delete this._ele.lastLT;if(this.x===undefined||this.y===undefined){var A=this._ele.getAlignToXY(this.container,"c-c");var B=this._ele.translatePoints(A[0],A[1]);this.x=this.x===undefined?B.left:this.x;this.y=this.y===undefined?B.top:this.y;}this._ele.setLeftTop(this.x,this.y);if(this.expandOnShow){this._expand(false);}if(this.modal){actuate.widget.Element.getBody().addClass("actuate-body-masked");this.mask.setSize(actuate.widget.lib.Dom.getViewWidth(true),actuate.widget.lib.Dom.getViewHeight(true));this.mask.show();}},show:function(A,B){if(!this.rendered){this.render(actuate.widget.Element.getBody());}if(this.hidden===false){this.toFront();return ;}if(this.fireEvent("beforeshow",this)===false){return ;}if(A){this.registerEventHandler("show",actuate.Method.bind(A,B,{single:true,event:"show",dispatcher:this}));}this.hidden=false;this._beforeShow();this._afterShow();if(!actuate.widget.Window.prototype.globeActiveWindow){actuate.widget.Window.prototype.globeActiveWindow=new Array();}actuate.widget.Window.prototype.globeActiveWindow.push(this);},_afterShow:function(){this.proxy.hide();this._ele.setStyle("display","block");this._ele.show();if(this.maximized){this.fitContainer();}if(actuate.util.Utility.isMac&&actuate.util.Utility.isGecko){}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){actuate.widget.EventManager.onWindowResize(this._onWindowResize,this);}this._doConstrain();if(this.layout){this._doLayout();}if(this.keyMap){this.keyMap.enable();}this.toFront();this._updateHandles();this.fireEvent("show",this);},hide:function(A,B){if(this.activeGhost){actuate.Method.defer(100,this.hide,this,[A,B]);return ;}if(this.hidden||this.fireEvent("beforehide",this)===false){return ;}if(typeof (A)=="function"){this.registerEventHandler("hide",actuate.Method.bind(A,B,{single:true,event:"hide",dispatcher:this}));}this.hidden=true;this._ele.hide();this._afterHide();actuate.widget.Window.prototype.globeActiveWindow.pop();},_afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){actuate.widget.EventManager.removeResizeListener(this._onWindowResize,this);}if(this.modal){this.mask.hide();actuate.widget.Element.getBody().removeClass("actuate-body-masked");}if(this.keyMap){this.keyMap.disable();}this.fireEvent("hide",this);},_onWindowResize:function(){if(this.maximized){this.fitContainer();}if(this.modal){this.mask.setSize("100%","100%");var A=this.mask.dom.offsetHeight;this.mask.setSize(actuate.widget.lib.Dom.getViewWidth(true),actuate.widget.lib.Dom.getViewHeight(true));}this._doConstrain();},_doConstrain:function(){if(this.constrain||this.constrainHeader){var B;if(this.constrain){B={right:this._ele.shadowOffset,left:this._ele.shadowOffset,bottom:this._ele.shadowOffset};}else{var A=this.getSize();B={right:-(A.width-100),bottom:-(A.height-25)};}var C=this._ele.getConstrainToXY(this.container,true,B);if(C){this.setPosition(C[0],C[1]);}}},_ghost:function(A){var C=this._createGhost(A);var B=this.getBox(true);C.setLeftTop(B.x,B.y);C.setWidth(B.width);this._ele.hide();this.activeGhost=C;return C;},_unghost:function(B,A){if(B!==false){this._ele.show();this.focus();if(actuate.util.Utility.isMac&&actuate.util.Utility.isGecko){}}if(A!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true));}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost;},minimize:function(){this.fireEvent("minimize",this);},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.hide(function(){this.fireEvent("close",this);this.destroy();},this);}},maximize:function(){if(!this.maximized){this._expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show();}this.maximized=true;this._ele.disableShadow();if(this.dd){this.dd.lock();}if(this.collapsible){this.tools.toggle.hide();}this._ele.addClass("actuate-window-maximized");this.container.addClass("actuate-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this);}},restore:function(){if(this.maximized){this._ele.removeClass("actuate-window-maximized");this.tools.restore.hide();this.tools.maximize.show();this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this._ele.enableShadow(true);if(this.dd){this.dd.unlock();}if(this.collapsible){this.tools.toggle.show();}this.container.removeClass("actuate-window-maximized-ct");this._doConstrain();this.fireEvent("restore",this);}},toggleMaximize:function(){this[this.maximized?"restore":"maximize"]();},fitContainer:function(){var A=this.container.getViewSize();this.setSize(A.width,A.height);},setZIndex:function(A){if(this.modal){this.mask.setStyle("z-index",A);}this._ele.setZIndex(++A);A+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++A);}this.lastZIndex=A;},alignTo:function(B,A,C){var D=this._ele.getAlignToXY(B,A,C);this.setPagePosition(D[0],D[1]);return this;},anchorTo:function(C,E,D,B){if(this.doAnchor){actuate.widget.EventManager.removeResizeListener(this.doAnchor,this);actuate.widget.EventManager.un(window,"scroll",this.doAnchor,this);}this.doAnchor=function(){this.alignTo(C,E,D);};actuate.widget.EventManager.onWindowResize(this.doAnchor,this);var A=typeof B;if(A!="undefined"){actuate.widget.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:A=="number"?B:50});}this.doAnchor();return this;},toFront:function(A){if(this.manager.bringToFront(this)){if(!A||!A.getTarget().focus){this.focus();}}return this;},setActive:function(A){if(A){this.fireEvent("activate",this);}else{this.fireEvent("deactivate",this);}},toBack:function(){this.manager.sendToBack(this);return this;},center:function(){var A=this._ele.getAlignToXY(this.container,"c-c");this.setPagePosition(A[0],A[1]);return this;}});actuate.widget.Window.DD=actuate.Class.extendClass(actuate.widget.dd.DD,{moveOnly:true,headerOffsets:[100,25],initialize:function(B){this.win=B;actuate.widget.Window.DD.superclass.initialize.call(this,B._ele.id,"WindowDD-"+B.id);for(var A=0;A<this.win.__draggableHandlers.length;A++){this.setHandleElId(this.win.__draggableHandlers[A]);}this.scroll=false;},startDrag:function(){var A=this.win;this.proxy=A._ele;if(A.constrain!==false){var C=A._ele.shadowOffset;this.constrainTo(A.container,{right:C,left:C,bottom:C});}else{if(A.constrainHeader!==false){var B=this.proxy.getSize();this.constrainTo(A.container,{right:-(B.width-this.headerOffsets[0]),bottom:-(B.height-this.headerOffsets[1])});}}},_b4Drag:actuate.Method.empty,_onDrag:function(A){this.alignElWithMouse(this.proxy,A.getPageX(),A.getPageY());},_endDrag:function(A){},_canDragBody:function(B){var C=B.parentNode;if(this.win&&(B.tagName!="DIV"||!this.win.allowDragOnBody)){return false;}var A=0;while(C){if(A==4||C.tagName!="DIV"){return false;}A++;if(this.win.body&&this.win.body.id==C.id){return true;}else{C=C.parentNode;}}},clickValidator:function(C){var B=C.getTarget();if(this.win&&this.win.draggable){for(var A=0;A<this.win.__draggableHandlers.length;A++){if(B.id==this.win.__draggableHandlers[A]){if(this.targetIsScroll(B)){return false;}return true;}}return false;}else{return actuate.widget.Window.DD.superclass.clickValidator.apply(this,arguments);}},targetIsScroll:function(A){if(A==undefined||A==null){return false;}if(A.clientHeight&&A.scrollHeight){if(A.clientHeight!=A.scrollHeight){return true;}}if(A.clientWidth&&A.scrollWidth){if(A.clientWidth!=A.scrollWidth){return true;}}return false;}});actuate.widget.WindowGroup=function(){var F={};var D=[];var E=null;var C=function(I,H){return(!I._lastAccess||I._lastAccess<H._lastAccess)?-1:1;};var G=function(){var J=D,H=J.length;if(H>0){J.sort(C);var I=J[0].manager.zseed;for(var K=0;K<H;K++){var L=J[K];if(L&&!L.hidden){L.setZIndex(I+(K*10));}}}A();};var B=function(H){if(H!=E){if(E){E.setActive(false);}E=H;if(H){H.setActive(true);}}};var A=function(){for(var H=D.length-1;H>=0;--H){if(!D[H].hidden){B(D[H]);return ;}}B(null);};return{zseed:9000,register:function(H){F[H.id]=H;D.push(H);H.registerEventHandler("hide",A);},unregister:function(H){delete F[H.id];H.unregisterEventHandler("hide",A);actuate.util.Utility.arrayRemoveValue(D,H);},get:function(H){return typeof H=="object"?H:F[H];},bringToFront:function(H){H=this.get(H);if(H!=E){H._lastAccess=new Date().getTime();G();return true;}return false;},sendToBack:function(H){H=this.get(H);H._lastAccess=-(new Date().getTime());G();return H;},hideAll:function(){for(var H in F){if(F[H]&&typeof F[H]!="function"&&F[H].isVisible()){F[H].hide();}}},getActive:function(){return E;},getBy:function(J,I){var K=[];for(var H=D.length-1;H>=0;--H){var L=D[H];if(J.call(I||L,L)!==false){K.push(L);}}return K;},each:function(I,H){for(var J in F){if(F[J]&&typeof F[J]!="function"){if(I.call(H||F[J],F[J])===false){return ;}}}}};};actuate.widget.WindowMgr=new actuate.widget.WindowGroup();actuate.widget.Shadow=actuate.Class.create();actuate.widget.Shadow.prototype={offset:6,defaultMode:"drop",initialize:function(C){actuate.Class.extend(this,C);if(typeof this.mode!="string"){this.mode=this.defaultMode;}var D=this.offset,B={h:0};var A=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":B.w=0;B.l=B.t=D;B.t-=1;break;case"sides":B.w=(D*2);B.l=-D;B.t=D-1;break;case"frame":B.w=B.h=(D*2);B.l=B.t=-D;B.t+=1;B.h-=2;break;}this.adjusts=B;},show:function(A){A=actuate.widget.Element.get(A);if(!this._ele){this._ele=actuate.widget.Shadow.Pool.pull(this.absoluteBorder);if(this._ele.dom.nextSibling!=A.dom){this._ele.insertBefore(A);}}this._ele.setStyle("z-index",this.zIndex||(parseInt(A.getStyle("z-index"),10)||1)-1);this.realign(A.getLeft(true),A.getTop(true),A.getWidth(),A.getHeight());this._ele.dom.style.display="block";},isVisible:function(){return this._ele?true:false;},realign:function(A,M,L,D){if(!this._ele){return ;}var I=this.adjusts,G=this._ele.dom,N=G.style;var E=0;N.left=(A+I.l)+"px";N.top=(M+I.t)+"px";if(this.absoluteBorder){var K=(L+I.w),C=(D+I.h),F=K+"px",J=C+"px";N.width=null;N.height=null;N.overflow="visible";var H=G.childNodes;var B=Math.max(0,(K-12))+"px";H[0].style.position="absolute";H[0].style.width=F;H[1].style.height=Math.max(0,(C-12))+"px";if(actuate.util.Utility.isIE7||actuate.util.Utility.isIE8Compat){H[1].style.width=F;}H[1].childNodes[0].style.position="absolute";H[1].childNodes[0].style.top="6px";H[1].childNodes[1].style.display="none";H[1].childNodes[2].style.position="absolute";H[1].childNodes[2].style.left=(K-6)+"px";H[1].childNodes[2].style.top="6px";H[2].style.width=F;H[2].style.position="absolute";H[2].style.top=(C-6)+"px";H[0].childNodes[1].style.width=B;H[2].childNodes[1].style.width=B;}else{N.overflow="hidden";var K=(L+I.w),C=(D+I.h),F=K+"px",J=C+"px";if(N.width!=F||N.height!=J){N.width=(K>0)?F:0;N.height=(C>0)?J:0;var H=G.childNodes;var B=Math.max(0,(K-12))+"px";H[0].childNodes[1].style.width=B;H[1].childNodes[1].style.width=B;H[2].childNodes[1].style.width=B;H[1].style.height=Math.max(0,(C-12))+"px";}}},hide:function(){if(this._ele){this._ele.dom.style.display="none";actuate.widget.Shadow.Pool.push(this._ele,this.absoluteBorder);delete this._ele;}},setZIndex:function(A){this.zIndex=A;if(this._ele){this._ele.setStyle("z-index",A);}}};actuate.widget.Shadow.Pool=function(){var C=[];var B=[];var A='<div class="actuate-gadget-menu-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(D){var E=D?B.shift():C.shift();if(!E){E=actuate.widget.Element.get(actuate.widget.DomHelper.insertHtml("beforeBegin",document.body.firstChild,A));E.autoBoxAdjust=false;}return E;},push:function(E,D){if(D){B.push(E);}else{C.push(E);}}};}();actuate.util.Package.define("actuate.widget");actuate.widget.TabPanel=actuate.Class.create();actuate.widget.TabPanel.superclass=actuate.widget.panel.Panel.prototype;actuate.widget.TabPanel.prototype=actuate.Class.extend(new actuate.widget.panel.Panel(),{layoutOnTabChange:true,monitorResize:true,deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:"top",baseCls:"actuate-tab-panel",activeTab:null,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"actuate-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initialize:function(A){actuate.widget.TabPanel.superclass.initialize.call(this,A);this.frame=false;this._setLayout(new actuate.widget.panel.layout.CardLayout({deferredRender:this.deferredRender}));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header";}else{this.elements+=",footer";this.stripTarget="footer";}if(!this.stack){this.stack=actuate.widget.TabPanel.AccessStack();}this._initItems();},render:function(){actuate.widget.TabPanel.superclass.render.apply(this,arguments);if(this.activeTab!==undefined){var A=this.activeTab;delete this.activeTab;this.setActiveTab(A);}},_onRender:function(C,A){actuate.widget.TabPanel.superclass._onRender.call(this,C,A);if(this.plain){var F=this.tabPosition=="top"?"header":"footer";this[F].addClass("actuate-tab-panel-"+F+"-plain");}if(this.hideTabTitle){var F=this.tabPosition=="top"?"header":"footer";this[F].addClass("actuate-tab-panel-hideTabTitle");}var B=this[this.stripTarget];this.stripWrap=B.createChild({cls:"actuate-tab-strip-wrap",cn:{tag:"ul",cls:"actuate-tab-strip actuate-tab-strip-"+this.tabPosition}});var E=(this.tabPosition=="bottom"?this.stripWrap:null);this.stripSpacer=B.createChild({cls:"actuate-tab-strip-spacer"},E);this.strip=new actuate.widget.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"actuate-tab-edge"});this.strip.createChild({cls:"actuate-clear"});this.body.addClass("actuate-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var D=new actuate.widget.Template('<li class="{cls}" id="{id}"><a class="actuate-tab-strip-close" onclick="return false;"></a>','<a class="actuate-tab-right" href="#" onclick="return false;"><em class="actuate-tab-left">','<span class="actuate-tab-strip-inner"><span class="actuate-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");D.disableFormats=true;D.compile();this.itemTpl=D;}this.items.each(this._initTab,this);},_initEvents:function(){actuate.widget.TabPanel.superclass._initEvents.call(this);this.registerEventHandler("add",actuate.Method.bind(this._onAdd,this));this.registerEventHandler("remove",actuate.Method.bind(this._onRemove,this));this.strip._addListener("mousedown",this._onStripMouseDown,this);this.strip._addListener("contextmenu",this._onStripContextMenu,this);if(this.enableTabScroll){this.strip._addListener("mousewheel",this.onWheel,this);}},_findTargets:function(C){var B=null;var A=C.getTarget("li",this.strip);if(A){B=this.getComponent(A.id.split(this.idDelimiter)[1]);if(B.disabled){return{close:null,item:null,el:null};}}return{close:C.getTarget(".actuate-tab-strip-close",this.strip),item:B,el:A};},_onStripMouseDown:function(B){if(B.button!=0){return ;}B.preventDefault();var A=this._findTargets(B);if(A.close){this.remove(A.item);return ;}if(A.item&&A.item!=this.activeTab){this.setActiveTab(A.item);}},_onStripContextMenu:function(B){B.preventDefault();var A=this._findTargets(B);if(A.item){this.fireEvent("contextmenu",this,A.item,B);}},_initTab:function(D,B){var E=this.strip.dom.childNodes[B];var A=D.closable?"actuate-tab-strip-closable":"";if(D.disabled){A+=" actuate-item-disabled";}if(D.iconCls){A+=" actuate-tab-with-icon";}if(D.tabCls){A+=" "+D.tabCls;}var F={id:this.id+this.idDelimiter+D.getItemId(),text:D.title,cls:A,iconCls:D.iconCls||""};var C=E?this.itemTpl._insertBefore(E,F):this.itemTpl._append(this.strip,F);actuate.widget.Element.fly(C).addClassOnOver("actuate-tab-strip-over");if(D.tabTip){actuate.widget.Element.fly(C).child("span.actuate-tab-strip-text",true).qtip=D.tabTip;}D.tabEl=C;D.registerEventHandler("disable",actuate.Method.bind(this._onItemDisabled,this));D.registerEventHandler("enable",actuate.Method.bind(this._onItemEnabled,this));D.registerEventHandler("titlechange",actuate.Method.bind(this._onItemTitleChanged,this));D.registerEventHandler("iconchange",actuate.Method.bind(this._onItemIconChanged,this));D.registerEventHandler("beforeshow",actuate.Method.bind(this._onBeforeShowItem,this));},_onAdd:function(C,B,A){this._initTab(B,A);if(this.items.length==1){this.syncSize();}this._delegateUpdates();},_onBeforeAdd:function(B){var A=B.events?(this.items.containsKey(B.getItemId())?B:null):this.items.get(B);if(A){this.setActiveTab(B);return false;}actuate.widget.TabPanel.superclass._onBeforeAdd.apply(this,arguments);var C=B.elements;B.elements=C?C.replace(",header",""):C;B.border=(B.border===true);},_onRemove:function(C,B){actuate.widget.Element.destroy(actuate.widget.Element.get(this.getTabEl(B)));this.stack.remove(B);B.un("disable",this._onItemDisabled,this);B.un("enable",this._onItemEnabled,this);B.un("titlechange",this._onItemTitleChanged,this);B.un("iconchange",this._onItemIconChanged,this);B.un("beforeshow",this._onBeforeShowItem,this);if(B==this.activeTab){var A=this.stack.next();if(A){this.setActiveTab(A);}else{if(this.items.length>0){this.setActiveTab(0);}else{this.activeTab=null;}}}this._delegateUpdates();},_onBeforeShowItem:function(A){if(A!=this.activeTab){this.setActiveTab(A);return false;}},_onItemDisabled:function(B){var A=this.getTabEl(B);if(A){actuate.widget.Element.fly(A).addClass("actuate-item-disabled");}this.stack.remove(B);},_onItemEnabled:function(B){var A=this.getTabEl(B);if(A){actuate.widget.Element.fly(A).removeClass("actuate-item-disabled");}},_onItemTitleChanged:function(C){var B=this.getTabEl(C);if(B){var A=actuate.widget.Element.fly(B).select("span");if(A&&A.each){A.each(function(E){var D=E.dom.className;if(D.indexOf("actuate-tab-strip-text")>=0){E.dom.innerHTML=C.title;}},this);}}},_onItemIconChanged:function(D,A,C){var B=this.getTabEl(D);if(B){actuate.widget.Element.fly(B).child("span.actuate-tab-strip-text").replaceClass(C,A);}},getTabEl:function(A){var B=(typeof A==="number")?this.items.items[A].getItemId():A.getItemId();return document.getElementById(this.id+this.idDelimiter+B);},_onResize:function(){actuate.widget.TabPanel.superclass._onResize.apply(this,arguments);this._delegateUpdates();},beginUpdate:function(){this.suspendUpdates=true;},endUpdate:function(){this.suspendUpdates=false;this._delegateUpdates();},hideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="none";this._delegateUpdates();}this.stack.remove(B);},unhideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="";this._delegateUpdates();}},_delegateUpdates:function(){if(this.suspendUpdates){return ;}if(this.resizeTabs&&this.rendered){this._autoSizeTabs();}if(this.enableTabScroll&&this.rendered){this._autoScrollTabs();}},_autoSizeTabs:function(){var G=this.items.length;var B=this.tabPosition!="bottom"?"header":"footer";var C=this[B].dom.offsetWidth;var A=this[B].dom.clientWidth;if(!this.resizeTabs||G<1||!A){return ;}var I=Math.max(Math.min(Math.floor((A-4)/G)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=I;var K=this.stripWrap.dom.getElementsByTagName("li");for(var E=0,H=K.length-1;E<H;E++){var J=K[E];var L=J.childNodes[1].firstChild.firstChild;var F=J.offsetWidth;var D=L.offsetWidth;L.style.width=(I-(F-D))+"px";}},_adjustBodyWidth:function(A){if(this.header){this.header.setWidth(A);}if(this.footer){this.footer.setWidth(A);}return A;},setActiveTab:function(C){C=this.getComponent(C);if(!C||this.fireEvent("beforetabchange",this,C,this.activeTab)===false){return ;}if(!this.rendered){this.activeTab=C;return ;}if(this.activeTab!=C){if(this.activeTab){var A=this.getTabEl(this.activeTab);if(A){actuate.widget.Element.fly(A).removeClass("actuate-tab-strip-active");}this.activeTab.fireEvent("deactivate",this.activeTab);}var B=this.getTabEl(C);actuate.widget.Element.fly(B).addClass("actuate-tab-strip-active");this.activeTab=C;this.stack.add(C);this.layout.setActiveItem(C);if(this.layoutOnTabChange&&C._doLayout){C._doLayout();}if(this.scrolling){this.scrollToTab(C,this.animScroll);}C.fireEvent("activate",C);this.fireEvent("tabchange",this,C);}},getActiveTab:function(){return this.activeTab||null;},getItem:function(A){return this.getComponent(A);},_autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var G=this.items.length;var D=this.pos.dom.offsetWidth;var C=this.pos.dom.clientWidth;var F=this.stripWrap;var E=F.dom;var B=E.offsetWidth;var H=this._getScrollPos();var A=this.edge.getOffsetsTo(this.stripWrap)[0]+H;if(!this.enableTabScroll||G<1||B<20){return ;}if(A<=C){E.scrollLeft=0;F.setWidth(C);if(this.scrolling){this.scrolling=false;this.pos.removeClass("actuate-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(actuate.util.Utility.isAir||actuate.util.Utility.isSafari){E.style.marginLeft="";E.style.marginRight="";}}}else{if(!this.scrolling){this.pos.addClass("actuate-tab-scrolling");if(actuate.util.Utility.isAir||actuate.util.Utility.isSafari){E.style.marginLeft="18px";E.style.marginRight="18px";}}C-=F.getMargins("lr");F.setWidth(C>20?C:20);if(!this.scrolling){if(!this.scrollLeft){this._createScrollers();}else{this.scrollLeft.show();this.scrollRight.show();}}this.scrolling=true;if(H>(A-C)){E.scrollLeft=A-C;}else{this.scrollToTab(this.activeTab,false);}this._updateScrollButtons();}},_createScrollers:function(){this.pos.addClass("actuate-tab-scrolling-"+this.tabPosition);var C=this.stripWrap.dom.offsetHeight;var A=this.pos.insertFirst({cls:"actuate-tab-scroller-left"});A.setHeight(C);A.addClassOnOver("actuate-tab-scroller-left-over");this.leftRepeater=new actuate.widget.util.ClickRepeater(A,{interval:this.scrollRepeatInterval,handler:actuate.Method.bind(this._onScrollLeft,this)});this.scrollLeft=A;var B=this.pos.insertFirst({cls:"actuate-tab-scroller-right"});B.setHeight(C);B.addClassOnOver("actuate-tab-scroller-right-over");this.rightRepeater=new actuate.widget.util.ClickRepeater(B,{interval:this.scrollRepeatInterval,handler:actuate.Method.bind(this._onScrollRight,this)});this.scrollRight=B;},_getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this._getScrollPos();},_getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0;},_getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0;},_getScrollAnim:function(){return{duration:this.scrollDuration,callback:this._updateScrollButtons,scope:this};},_getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100);},scrollToTab:function(E,A){if(!E){return ;}var C=this.getTabEl(E);var G=this._getScrollPos(),D=this._getScrollArea();var F=actuate.widget.Element.fly(C).getOffsetsTo(this.stripWrap)[0]+G;var B=F+C.offsetWidth;if(F<G){this._scrollTo(F,A);}else{if(B>(G+D)){this._scrollTo(B-D,A);}}},_scrollTo:function(B,A){this.stripWrap.scrollTo("left",B,A?this._getScrollAnim():false);if(!A){this._updateScrollButtons();}},onWheel:function(D){var E=D.getWheelDelta()*this.wheelIncrement*-1;D.stopEvent();var F=this._getScrollPos();var C=F+E;var A=this._getScrollWidth()-this._getScrollArea();var B=Math.max(0,Math.min(A,C));if(B!=F){this._scrollTo(B,false);}},_onScrollRight:function(){var A=this._getScrollWidth()-this._getScrollArea();var C=this._getScrollPos();var B=Math.min(A,C+this._getScrollIncrement());if(B!=C){this._scrollTo(B,this.animScroll);}},_onScrollLeft:function(){var B=this._getScrollPos();var A=Math.max(0,B-this._getScrollIncrement());if(A!=B){this._scrollTo(A,this.animScroll);}},_updateScrollButtons:function(){var A=this._getScrollPos();this.scrollLeft[A==0?"addClass":"removeClass"]("actuate-tab-scroller-left-disabled");this.scrollRight[A>=(this._getScrollWidth()-this._getScrollArea())?"addClass":"removeClass"]("actuate-tab-scroller-right-disabled");},_beforeDestroy:function(){if(this.items){this.items.each(function(A){if(A&&A.tabEl){actuate.widget.Element.get(A.tabEl).removeAllListeners();A.tabEl=null;}},this);}if(this.strip){this.strip.removeAllListeners();}actuate.widget.TabPanel.superclass._beforeDestroy.apply(this);}});actuate.widget.TabPanel.prototype.activate=actuate.widget.TabPanel.prototype.setActiveTab;actuate.widget.TabPanel.AccessStack=function(){var A=[];return{add:function(B){A.push(B);if(A.length>10){A.shift();}},remove:function(E){var D=[];for(var C=0,B=A.length;C<B;C++){if(A[C]!=E){D.push(A[C]);}}A=D;},next:function(){return A.pop();}};};actuate.widget.Component.prototype.registerType("tabpanel",actuate.widget.TabPanel);actuate.widget.MessageBox=function(){var R,B,N,Q;var G,J,P,A,K,M,H,F;var O,S,L,C="";var D=function(U){if(R.isVisible()){R.hide();actuate.Method.callback(B.fn,B.scope||window,[U,S.dom.value,B],1);}};var T=function(){if(B&&B.cls){R._ele.removeClass(B.cls);}};var E=function(W,U,V){if(B&&B.closable!==false){R.hide();}if(V){V.stopEvent();}};var I=function(U){var W=0;if(!U){O["ok"].hide();O["cancel"].hide();O["yes"].hide();O["no"].hide();return W;}R.footer.dom.style.display="";for(var V in O){if(typeof O[V]!="function"){if(U[V]){O[V].show();O[V].setText(typeof U[V]=="string"?U[V]:actuate.widget.MessageBox.buttonText[V]);W+=O[V]._ele.getWidth()+15;}else{O[V].hide();}}}return W;};return{getDialog:function(U){if(!R){R=new actuate.widget.Window({autoCreate:true,title:U,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"right",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,allowDragOnBody:true,allowDragOnFooter:true,close:function(){if(B&&B.buttons&&B.buttons.no&&!B.buttons.cancel){D("no");}else{D("cancel");}}});O={};var V=this.buttonText;O["no"]=R.addButton(V["no"],actuate.Method.createCallback(D,"no"));O["ok"]=R.addButton(V["ok"],actuate.Method.createCallback(D,"ok"));O["ok"].addClass("btn-primary");O["cancel"]=R.addButton(V["cancel"],actuate.Method.createCallback(D,"cancel"));O["yes"]=R.addButton(V["yes"],actuate.Method.createCallback(D,"yes"));O["yes"].addClass("btn-primary");O["ok"].hideMode=O["yes"].hideMode=O["no"].hideMode=O["cancel"].hideMode="offsets";R.render(document.body);R.getEl().addClass("actuate-window-dlg");N=R.mask;G=R.body.createChild({html:'<div class="actuate-mb-icon"></div><div class="actuate-mb-content"><span class="actuate-mb-text"></span><br /><div class="actuate-mb-fix-cursor"><input type="text" class="actuate-mb-input" /><textarea class="actuate-mb-textarea"></textarea></div></div>'});H=actuate.widget.Element.get(G.dom.firstChild);var W=G.dom.childNodes[1];J=actuate.widget.Element.get(W.firstChild);P=actuate.widget.Element.get(W.childNodes[2].firstChild);P.enableDisplayMode();P.addKeyListener([10,13],function(){if(R.isVisible()&&B&&B.buttons){if(B.buttons.ok){D("ok");}else{if(B.buttons.yes){D("yes");}}}});A=actuate.widget.Element.get(W.childNodes[2].childNodes[1]);A.enableDisplayMode();G.createChild({cls:"actuate-clear"});}return R;},updateText:function(X){if(!R.isVisible()&&!B.width){R.setSize(this.maxWidth,100);}J.update(X||"&#160;");var V=C!=""?(H.getWidth()+H.getMargins("lr")):0;var Z=J.getWidth()+J.getMargins("lr");var W=R.getFrameWidth("lr");var Y=R.body.getFrameWidth("lr");if(actuate.util.Utility.isIE&&V>0){V+=3;}var U=Math.max(Math.min(B.width||V+Z+W+Y,this.maxWidth),Math.max(B.minWidth||this.minWidth,L||0));if(B.prompt===true){S.setWidth(U-V-W-Y);}if(actuate.util.Utility.isIE&&U==L){U+=4;}R.setSize(U,"auto").center();return this;},updateProgress:function(V,U,W){if(W){this.updateText(W);}return this;},isVisible:function(){return R&&R.isVisible();},hide:function(){var U=R.activeGhost;if(this.isVisible()||U){R.hide();T();if(U){U.hide();}}return this;},show:function(X){if(this.isVisible()){this.hide();}B=X;var Y=this.getDialog(B.title||"&#160;");Y.setTitle(B.title||"&#160;");var U=(B.closable!==false&&B.progress!==true&&B.wait!==true);Y.tools.close.setDisplayed(false);S=P;B.prompt=B.prompt||(B.multiline?true:false);if(B.prompt){if(B.multiline){P.hide();A.show();A.setHeight(typeof B.multiline=="number"?B.multiline:this.defaultTextHeight);S=A;}else{P.show();A.hide();}}else{P.hide();A.hide();}S.dom.value=B.value||"";if(B.prompt){Y.focusEl=S;}else{var W=B.buttons;var V=null;if(W&&W.ok){V=O["ok"];}else{if(W&&W.yes){V=O["yes"];}}if(V){Y.focusEl=V;}}if(B.iconCls){Y.setIconClass(B.iconCls);}this.setIcon(B.icon);L=I(B.buttons);this.updateProgress(0,B.progressText);this.updateText(B.msg);if(B.cls){Y._ele.addClass(B.cls);}Y.proxyDrag=B.proxyDrag===true;Y.modal=B.modal!==false;Y.mask=B.modal!==false?N:false;if(!Y.isVisible()){document.body.appendChild(R._ele.dom);Y.show();}Y.on("show",actuate.Method.bind(function(){if(U===true){this.keyMap.enable();}else{this.keyMap.disable();}},Y,{single:true,event:"show"}));return this;},setIcon:function(U){if(U&&U!=""){H.removeClass("actuate-hidden");H.replaceClass(C,U);C=U;}else{H.replaceClass(C,"actuate-hidden");C="";}return this;},progress:function(W,V,U){this.show({title:W,msg:V,buttons:false,progress:true,closable:true,allowDragOnBody:true,allowDragOnFooter:true,allowDragOnBody:true,allowDragOnFooter:true,minWidth:this.minProgressWidth,progressText:U});return this;},wait:function(W,V,U){this.show({title:V,msg:W,buttons:false,closable:true,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:U});return this;},alert:function(X,W,V,U){this.show({title:X,msg:W,buttons:this.OK,fn:V,scope:U});return this;},confirm:function(X,W,V,U){this.show({title:X,msg:W,buttons:this.YESNO,fn:V,scope:U,icon:this.QUESTION});return this;},prompt:function(Z,Y,W,V,U,X){this.show({title:Z,msg:Y,buttons:this.OKCANCEL,fn:W,minWidth:250,scope:V,prompt:true,multiline:U,value:X});return this;},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"actuate-mb-info",WARNING:"actuate-mb-warning",QUESTION:"actuate-mb-question",ERROR:"actuate-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}};}();actuate.widget.Msg=actuate.widget.MessageBox;actuate.util.Package.define("actuate.widget.util");actuate.widget.util.MixedCollection=actuate.Class.extendClass(actuate.widget.Observable,{allowFunctions:false,initialize:function(B,A){this.items=[];this.map={};this.keys=[];this.length=0;this.allowFunctions=B===true;if(A){this.getKey=A;}actuate.widget.util.MixedCollection.superclass.constructor.call(this);},add:function(B,C){if(arguments.length==1){C=arguments[0];B=this.getKey(C);}if(typeof B=="undefined"||B===null){this.length++;this.items.push(C);this.keys.push(null);}else{var A=this.map[B];if(A){return this.replace(B,C);}this.length++;this.items.push(C);this.map[B]=C;this.keys.push(B);}this.fireEvent("add",this.length-1,C,B);return C;},getKey:function(A){return A.id;},replace:function(C,D){if(arguments.length==1){D=arguments[0];C=this.getKey(D);}var A=this.item(C);if(typeof C=="undefined"||C===null||typeof A=="undefined"){return this.add(C,D);}var B=this.indexOfKey(C);this.items[B]=D;this.map[C]=D;this.fireEvent("replace",C,A,D);return D;},addAll:function(E){if(arguments.length>1||actuate.util.Utility.isArray(E)){var B=arguments.length>1?arguments:E;for(var D=0,A=B.length;D<A;D++){this.add(B[D]);}}else{for(var C in E){if(this.allowFunctions||typeof E[C]!="function"){this.add(C,E[C]);}}}},each:function(E,D){var B=[].concat(this.items);for(var C=0,A=B.length;C<A;C++){if(E.call(D||B[C],B[C],C,A)===false){break;}}},eachKey:function(D,C){for(var B=0,A=this.keys.length;B<A;B++){D.call(C||window,this.keys[B],this.items[B],B,A);}},find:function(D,C){for(var B=0,A=this.items.length;B<A;B++){if(D.call(C||window,this.items[B],this.keys[B])){return this.items[B];}}return null;},insert:function(A,B,C){if(arguments.length==2){C=arguments[1];B=this.getKey(C);}if(A>=this.length){return this.add(B,C);}this.length++;this.items.splice(A,0,C);if(typeof B!="undefined"&&B!=null){this.map[B]=C;}this.keys.splice(A,0,B);this.fireEvent("add",A,C,B);return C;},remove:function(A){return this.removeAt(this.indexOf(A));},removeAt:function(A){if(A<this.length&&A>=0){this.length--;var C=this.items[A];this.items.splice(A,1);var B=this.keys[A];if(typeof B!="undefined"){delete this.map[B];}this.keys.splice(A,1);this.fireEvent("remove",C,B);return C;}return false;},removeKey:function(A){return this.removeAt(this.indexOfKey(A));},getCount:function(){return this.length;},indexOf:function(A){return actuate.util.Utility.arrayIndexOf(this.items,A);},indexOfKey:function(A){return actuate.util.Utility.arrayIndexOf(this.keys,A);},item:function(A){var B=typeof this.map[A]!="undefined"?this.map[A]:this.items[A];return typeof B!="function"||this.allowFunctions?B:null;},itemAt:function(A){return this.items[A];},key:function(A){return this.map[A];},contains:function(A){return this.indexOf(A)!=-1;},containsKey:function(A){return typeof this.map[A]!="undefined";},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear");},first:function(){return this.items[0];},last:function(){return this.items[this.length-1];},_sort:function(I,A,H){var C=String(A).toUpperCase()=="DESC"?-1:1;H=H||function(K,J){return K-J;};var G=[],B=this.keys,F=this.items;for(var D=0,E=F.length;D<E;D++){G[G.length]={key:B[D],value:F[D],index:D};}G.sort(function(K,J){var L=H(K[I],J[I])*C;if(L==0){L=(K.index<J.index?-1:1);}return L;});for(var D=0,E=G.length;D<E;D++){F[D]=G[D].value;B[D]=G[D].key;}this.fireEvent("sort",this);},sort:function(A,B){this._sort("value",A,B);},keySort:function(A,B){this._sort("key",A,B||function(D,C){var F=String(D).toUpperCase(),E=String(C).toUpperCase();return F>E?1:(F<E?-1:0);});},getRange:function(E,A){var B=this.items;if(B.length<1){return[];}E=E||0;A=Math.min(typeof A=="undefined"?this.length-1:A,this.length-1);var D=[];if(E<=A){for(var C=E;C<=A;C++){D[D.length]=B[C];}}else{for(var C=E;C>=A;C--){D[D.length]=B[C];}}return D;},filter:function(C,B,D,A){if(actuate.util.Utility.isEmpty(B,false)){return this.clone();}B=this.createValueMatcher(B,D,A);return this.filterBy(function(E){return E&&B.test(E[C]);});},filterBy:function(F,E){var G=new actuate.widget.util.MixedCollection();G.getKey=this.getKey;var B=this.keys,D=this.items;for(var C=0,A=D.length;C<A;C++){if(F.call(E||this,D[C],B[C])){G.add(B[C],D[C]);}}return G;},findIndex:function(C,B,E,D,A){if(actuate.util.Utility.isEmpty(B,false)){return -1;}B=this.createValueMatcher(B,D,A);return this.findIndexBy(function(F){return F&&B.test(F[C]);},null,E);},findIndexBy:function(F,E,G){var B=this.keys,D=this.items;for(var C=(G||0),A=D.length;C<A;C++){if(F.call(E||this,D[C],B[C])){return C;}}if(typeof G=="number"&&G>0){for(var C=0;C<G;C++){if(F.call(E||this,D[C],B[C])){return C;}}}return -1;},createValueMatcher:function(C,D,B,A){if(!C.exec){C=String(C);C=new RegExp((D===true?"":"^")+actuate.util.Utility.escapeRe(C)+(A===true?"$":""),B?"":"i");}return C;},clone:function(){var E=new actuate.widget.util.MixedCollection();var B=this.keys,D=this.items;for(var C=0,A=D.length;C<A;C++){E.add(B[C],D[C]);}E.getKey=this.getKey;return E;}});actuate.widget.util.MixedCollection.prototype.get=actuate.widget.util.MixedCollection.prototype.item;actuate.util.Package.define("actuate.widget.data");actuate.widget.data.Record=actuate.Class.create();actuate.widget.data.Record.create=function(F){var C=actuate.Class.create();var D=C;D.prototype=actuate.Class.extend({},actuate.widget.data.Record.prototype);var E=D.prototype;E.fields=new actuate.widget.util.MixedCollection(false,function(G){return G.name;});for(var B=0,A=F.length;B<A;B++){E.fields.add(new actuate.widget.data.Field(F[B]));}D.getField=function(G){return E.fields.get(G);};return D;};actuate.widget.data.Record.AUTO_ID=1000;actuate.widget.data.Record.EDIT="edit";actuate.widget.data.Record.REJECT="reject";actuate.widget.data.Record.COMMIT="commit";actuate.widget.data.Record.prototype={initialize:function(A,B){this.id=(B||B===0)?B:++actuate.widget.data.Record.AUTO_ID;this.data=A;},dirty:false,editing:false,error:null,modified:null,join:function(A){this.store=A;},set:function(A,B){if(String(this.data[A])==String(B)){return ;}this.dirty=true;if(!this.modified){this.modified={};}if(typeof this.modified[A]=="undefined"){this.modified[A]=this.data[A];}this.data[A]=B;if(!this.editing&&this.store){this.store.afterEdit(this);}},get:function(A){return this.data[A];},beginEdit:function(){this.editing=true;this.modified={};},cancelEdit:function(){this.editing=false;delete this.modified;},endEdit:function(){this.editing=false;if(this.dirty&&this.store){this.store.afterEdit(this);}},reject:function(B){var A=this.modified;for(var C in A){if(typeof A[C]!="function"){this.data[C]=A[C];}}this.dirty=false;delete this.modified;this.editing=false;if(this.store&&B!==true){this.store.afterReject(this);}},commit:function(A){this.dirty=false;delete this.modified;this.editing=false;if(this.store&&A!==true){this.store.afterCommit(this);}},getChanges:function(){var A=this.modified,B={};for(var C in A){if(A.hasOwnProperty(C)){B[C]=this.data[C];}}return B;},hasError:function(){return this.error!=null;},clearError:function(){this.error=null;},copy:function(A){return new this.constructor(actuate.Class.extend({},this.data),A||this.id);},isModified:function(A){return !!(this.modified&&this.modified.hasOwnProperty(A));}};actuate.util.Package.define("actuate.widget.data");actuate.widget.data.Store=actuate.Class.extendClass(actuate.widget.Observable,{initialize:function(A){actuate.widget.data.Store.superclass.initialize.call(this,A);this.data=new actuate.widget.util.MixedCollection(false);this.data.getKey=function(B){return B.id;};this.baseParams={};this.paramNames={"start":"start","limit":"limit","sort":"sort","dir":"dir"};if(A&&A.data){this.inlineData=A.data;delete A.data;}actuate.Class.extend(this,A);if(this.url&&!this.proxy){this.proxy=new actuate.widget.data.HttpProxy({url:this.url});}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType;}if(this.reader.onMetaChange){this.reader.onMetaChange=actuate.Method.createDelegate(this.onMetaChange,this);}}if(this.recordType){this.fields=this.recordType.prototype.fields;}this.modified=[];if(this.proxy){this.relayEvents(this.proxy,["loadexception"]);}this.sortToggle={};if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction);}actuate.widget.data.Store.superclass.constructor.call(this);if(this.storeId||this.id){actuate.widget.StoreMgr.register(this);}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData;}else{if(this.autoLoad){actuate.Method.defer(10,this.load,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined]);}}},remoteSort:false,pruneModifiedRecords:false,lastOptions:null,destroy:function(){if(this.storeId||this.id){actuate.widget.StoreMgr.unregister(this);}this.data=null;this.purgeListeners();},add:function(B){B=[].concat(B);if(B.length<1){return ;}for(var D=0,A=B.length;D<A;D++){B[D].join(this);}var C=this.data.length;this.data.addAll(B);if(this.snapshot){this.snapshot.addAll(B);}this.fireEvent("add",this,B,C);},addSorted:function(A){var B=this.findInsertIndex(A);this.insert(B,A);},remove:function(A){var B=this.data.indexOf(A);this.data.removeAt(B);if(this.pruneModifiedRecords){actuate.util.Utility.arrayRemoveValue(this.modified,A);}if(this.snapshot){this.snapshot.remove(A);}this.fireEvent("remove",this,A,B);},removeAt:function(A){this.remove(this.getAt(A));},removeAll:function(){this.data.clear();if(this.snapshot){this.snapshot.clear();}if(this.pruneModifiedRecords){this.modified=[];}this.fireEvent("clear",this);},insert:function(C,B){B=[].concat(B);for(var D=0,A=B.length;D<A;D++){this.data.insert(C,B[D]);B[D].join(this);}this.fireEvent("add",this,B,C);},indexOf:function(A){return this.data.indexOf(A);},indexOfId:function(A){return this.data.indexOfKey(A);},getById:function(A){return this.data.key(A);},getAt:function(A){return this.data.itemAt(A);},getRange:function(B,A){return this.data.getRange(B,A);},storeOptions:function(A){A=actuate.Class.extend({},A);delete A.callback;delete A.scope;this.lastOptions=A;},load:function(B){B=B||{};if(this.fireEvent("beforeload",this,B)!==false){this.storeOptions(B);var C=B.params||actuate.Class.extend({},this.baseParams);if(this.sortInfo&&this.remoteSort){var A=this.paramNames;C[A["sort"]]=this.sortInfo.field;C[A["dir"]]=this.sortInfo.direction;}this.proxy.load(C,this.reader,this.loadRecords,this,B);return true;}else{return false;}},reload:function(A){this.load(actuate.util.Utility.applyIf(A||{},this.lastOptions));},loadRecords:function(G,B,F){if(!G||F===false){if(F!==false){this.fireEvent("load",this,[],B);}if(B.callback){B.callback.call(B.scope||this,[],B,false);}return ;}var E=G.records,D=G.totalRecords||E.length;if(!B||B.add!==true){if(this.pruneModifiedRecords){this.modified=[];}for(var C=0,A=E.length;C<A;C++){E[C].join(this);}if(this.snapshot){this.data=this.snapshot;delete this.snapshot;}this.data.clear();this.data.addAll(E);this.totalLength=D;this.applySort();this.fireEvent("datachanged",this);}else{this.totalLength=Math.max(D,this.data.length+E.length);this.add(E);}this.fireEvent("load",this,E,B);if(B.callback){B.callback.call(B.scope||this,E,B,true);}},loadData:function(C,A){var B=this.reader.readRecords(C);this.loadRecords(B,{add:A},true);},getCount:function(){return this.data.length||0;},getTotalCount:function(){return this.totalLength||0;},getSortState:function(){return this.sortInfo;},applySort:function(){if(this.sortInfo&&!this.remoteSort){var A=this.sortInfo,B=A.field;this.sortData(B,A.direction);}},sortData:function(C,D){D=D||"ASC";var A=this.fields.get(C).sortType;var B=function(F,E){var H=A(F.data[C]),G=A(E.data[C]);return H>G?1:(H<G?-1:0);};this.data.sort(D,B);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(D,B);}},setDefaultSort:function(B,A){A=A?A.toUpperCase():"ASC";this.sortInfo={field:B,direction:A};this.sortToggle[B]=A;},sort:function(E,C){var D=this.fields.get(E);if(!D){return false;}if(!C){if(this.sortInfo&&this.sortInfo.field==D.name){C=actuate.util.Utility.stringToggle((this.sortToggle[D.name]||"ASC"),"ASC","DESC");}else{C=D.sortDir;}}var B=(this.sortToggle)?this.sortToggle[D.name]:null;var A=(this.sortInfo)?this.sortInfo:null;this.sortToggle[D.name]=C;this.sortInfo={field:D.name,direction:C};if(!this.remoteSort){this.applySort();this.fireEvent("datachanged",this);}else{if(!this.load(this.lastOptions)){if(B){this.sortToggle[D.name]=B;}if(A){this.sortInfo=A;}}}},each:function(B,A){this.data.each(B,A);},getModifiedRecords:function(){return this.modified;},createFilterFn:function(D,C,E,B,A){if(actuate.util.Utility.isEmpty(C,false)){return false;}C=this.data.createValueMatcher(C,E,B,A);return function(F){return C.test(F.data[D]);};},sum:function(E,F,A){var C=this.data.items,B=0;F=F||0;A=(A||A===0)?A:C.length-1;for(var D=F;D<=A;D++){B+=(C[D].data[E]||0);}return B;},filter:function(D,C,E,A){var B=this.createFilterFn(D,C,E,A);return B?this.filterBy(B):this.clearFilter();},filterBy:function(B,A){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(B,A||this);this.fireEvent("datachanged",this);},query:function(E,D,F,B,A){var C=this.createFilterFn(E,D,F,B,A);return C?this.queryBy(C):this.data.clone();},queryBy:function(B,A){var C=this.snapshot||this.data;return C.filterBy(B,A||this);},find:function(D,C,F,E,A){var B=this.createFilterFn(D,C,E,A);return B?this.data.findIndexBy(B,null,F):-1;},findBy:function(B,A,C){return this.data.findIndexBy(B,A,C);},collect:function(G,H,B){var F=(B===true&&this.snapshot)?this.snapshot.items:this.data.items;var I,J,A=[],C={};for(var D=0,E=F.length;D<E;D++){I=F[D].data[G];J=String(I);if((H||!actuate.util.Utility.isEmpty(I))&&!C[J]){C[J]=true;A[A.length]=I;}}return A;},clearFilter:function(A){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(A!==true){this.fireEvent("datachanged",this);}}},isFiltered:function(){return this.snapshot&&this.snapshot!=this.data;},afterEdit:function(A){if(actuate.util.Utility.arrayIndexOf(this.modified,A)==-1){this.modified.push(A);}this.fireEvent("update",this,A,actuate.widget.data.Record.EDIT);},afterReject:function(A){actuate.util.Utility.arrayRemoveValue(this.modified,A);this.fireEvent("update",this,A,actuate.widget.data.Record.REJECT);},afterCommit:function(A){actuate.util.Utility.arrayRemoveValue(this.modified,A);this.fireEvent("update",this,A,actuate.widget.data.Record.COMMIT);},commitChanges:function(){var B=this.modified.slice(0);this.modified=[];for(var C=0,A=B.length;C<A;C++){B[C].commit();}},rejectChanges:function(){var B=this.modified.slice(0);this.modified=[];for(var C=0,A=B.length;C<A;C++){B[C].reject();}},onMetaChange:function(B,A,C){this.recordType=A;this.fields=A.prototype.fields;delete this.snapshot;this.sortInfo=B.sortInfo;this.modified=[];this.fireEvent("metachange",this,this.reader.meta);},findInsertIndex:function(A){this.suspendEvents();var C=this.data.clone();this.data.add(A);this.applySort();var B=this.data.indexOf(A);this.data=C;this.resumeEvents();return B;}});actuate.util.Package.define("actuate.widget.data");actuate.widget.data.SimpleStore=actuate.Class.extendClass(actuate.widget.data.Store,{initialize:function(A){actuate.widget.data.SimpleStore.superclass.initialize.call(this,actuate.Class.extend(A,{reader:new actuate.widget.data.ArrayReader({id:A.id},actuate.widget.data.Record.create(A.fields))}));},loadData:function(E,B){if(this.expandData===true){var D=[];for(var C=0,A=E.length;C<A;C++){D[D.length]=[E[C]];}E=D;}actuate.widget.data.SimpleStore.superclass.loadData.call(this,E,B);}});actuate.util.Package.define("actuate.widget.data");actuate.widget.data.SortTypes={none:function(A){return A;},stripTagsRE:/<\/?[^>]+>/gi,asText:function(A){return String(A).replace(this.stripTagsRE,"");},asUCText:function(A){return String(A).toUpperCase().replace(this.stripTagsRE,"");},asUCString:function(A){return String(A).toUpperCase();},asDate:function(A){if(!A){return 0;}if(actuate.util.Utility.isDate(A)){return A.getTime();}return Date.parse(String(A));},asFloat:function(A){var B=parseFloat(String(A).replace(/,/g,""));if(isNaN(B)){B=0;}return B;},asInt:function(A){var B=parseInt(String(A).replace(/,/g,""));if(isNaN(B)){B=0;}return B;}};actuate.util.Package.define("actuate.widget.data");actuate.widget.data.Field=function(D){if(typeof D=="string"){D={name:D};}actuate.Class.extend(this,D);if(!this.type){this.type="auto";}var C=actuate.widget.data.SortTypes;if(typeof this.sortType=="string"){this.sortType=C[this.sortType];}if(!this.sortType){switch(this.type){case"string":this.sortType=C.asUCString;break;case"date":this.sortType=C.asDate;break;default:this.sortType=C.none;}}var E=/[\$,%]/g;if(!this.convert){var B,A=this.dateFormat;switch(this.type){case"":case"auto":case undefined:B=function(F){return F;};break;case"string":B=function(F){return(F===undefined||F===null)?"":String(F);};break;case"int":B=function(F){return F!==undefined&&F!==null&&F!==""?parseInt(String(F).replace(E,""),10):"";};break;case"float":B=function(F){return F!==undefined&&F!==null&&F!==""?parseFloat(String(F).replace(E,""),10):"";};break;case"bool":case"boolean":B=function(F){return F===true||F==="true"||F==1;};break;case"date":B=function(G){if(!G){return"";}if(actuate.widget.Utility.isDate(G)){return G;}if(A){if(A=="timestamp"){return new Date(G*1000);}if(A=="time"){return new Date(parseInt(G,10));}return Date.parseDate(G,A);}var F=Date.parse(G);return F?new Date(F):null;};break;}this.convert=B;}};actuate.widget.data.Field.prototype={dateFormat:null,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC"};actuate.util.Package.define("actuate.widget.data");actuate.widget.data.DataReader=actuate.Class.createClass({initialize:function(A,B){this.meta=A;this.recordType=actuate.util.Utility.isArray(B)?actuate.widget.data.Record.create(B):B;}});actuate.util.Package.define("actuate.widget.data");actuate.widget.data.JsonReader=actuate.Class.extendClass(actuate.widget.data.DataReader,{initialize:function(A,B){A=A||{};actuate.widget.data.JsonReader.superclass.initialize.call(this,A,B||A.fields);},read:function(response){var json=response.responseText;var o=eval("("+json+")");if(!o){throw {message:"JsonReader.read: Json object not found"};}return this.readRecords(o);},onMetaChange:function(A,C,B){},simpleAccess:function(B,A){return B[A];},getJsonAccessor:function(){var A=/[\[\.]/;return function(C){try{return(A.test(C))?new Function("obj","return obj."+C):function(D){return D[C];};}catch(B){}return actuate.Method.empty;};}(),readRecords:function(K){this.jsonData=K;if(K.metaData){delete this.ef;this.meta=K.metaData;this.recordType=actuate.widget.data.Record.create(K.metaData.fields);this.onMetaChange(this.meta,this.recordType,K);}var H=this.meta,A=this.recordType,R=A.prototype.fields,F=R.items,E=R.length;if(!this.ef){if(H.totalProperty){this.getTotal=this.getJsonAccessor(H.totalProperty);}if(H.successProperty){this.getSuccess=this.getJsonAccessor(H.successProperty);}this.getRoot=H.root?this.getJsonAccessor(H.root):function(U){return U;};if(H.id){var Q=this.getJsonAccessor(H.id);this.getId=function(V){var U=Q(V);return(U===undefined||U==="")?null:U;};}else{this.getId=function(){return null;};}this.ef=[];for(var O=0;O<E;O++){R=F[O];var T=(R.mapping!==undefined&&R.mapping!==null)?R.mapping:R.name;this.ef[O]=this.getJsonAccessor(T);}}var M=this.getRoot(K),S=M.length,I=S,D=true;if(H.totalProperty){var G=parseInt(this.getTotal(K),10);if(!isNaN(G)){I=G;}}if(H.successProperty){var G=this.getSuccess(K);if(G===false||G==="false"){D=false;}}var P=[];for(var O=0;O<S;O++){var L=M[O];var B={};var J=this.getId(L);for(var N=0;N<E;N++){R=F[N];var G=this.ef[N](L);B[R.name]=R.convert((G!==undefined)?G:R.defaultValue,L);}var C=new A(B,J);C.json=L;P[O]=C;}return{success:D,records:P,totalRecords:I};}});actuate.util.Package.define("actuate.widget.data");actuate.widget.data.ArrayReader=actuate.Class.extendClass(actuate.widget.data.JsonReader,{readRecords:function(C){var B=this.meta?this.meta.id:null;var G=this.recordType,K=G.prototype.fields;var E=[];var M=C;for(var I=0;I<M.length;I++){var D=M[I];var O={};var A=((B||B===0)&&D[B]!==undefined&&D[B]!==""?D[B]:null);for(var H=0,P=K.length;H<P;H++){var L=K.items[H];var F=L.mapping!==undefined&&L.mapping!==null?L.mapping:H;var N=D[F]!==undefined?D[F]:L.defaultValue;N=L.convert(N,D);O[L.name]=N;}var J=new G(O,A);J.json=D;E[E.length]=J;}return{records:E,totalRecords:E.length};}});actuate.util.Package.define("actuate.widget.button");actuate.widget.button.Button=actuate.Class.create();actuate.widget.button.Button.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.button.Button.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{tooltipType:"qtip",type:"button",buttonSelector:"button:first-child",menuClassTarget:"tr",selected:false,_text:null,initialize:function(A){actuate.widget.Component.prototype.initialize.call(this,A);},_onClick:function(A){if(A){A.preventDefault();}if(A.browserEvent&&A.browserEvent.touches){}else{if(A.button!=0){return ;}}if(!this.disabled){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle();}if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu();}this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A);}}},_onRender:function(B){if(!this._template){if(!actuate.widget.button.Button.buttonTemplate){actuate.widget.button.Button.buttonTemplate=new actuate.widget.Template('<table border="0" cellpadding="0" cellspacing="0" class="actuate-widget-btn-wrap"><tbody><tr>','<td class="actuate-widget-btn-left"><i>&#160;</i></td><td class="actuate-widget-btn-center"><em unselectable="on"><button class="actuate-widget-btn-text" type="{1}">{0}</button></em></td><td class="actuate-widget-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>");}this._template=actuate.widget.button.Button.buttonTemplate;}var D=[this.text||"&#160;",this.type];var A=this._template._append(B,D,true);var C=this._getButtonEl(A);C.on("focus",actuate.Method.bind(this._onFocus,this));C.on("blur",actuate.Method.bind(this._onBlur,this));this._initButtonElement(A,C);},_getButtonEl:function(A){if(!A){A=this._ele;}var B=actuate.widget.Element.get(A.dom.getElementsByTagName("button")[0]);if(!B){B=actuate.widget.Element.get(A.dom);}return B;},_initComponent:function(){actuate.widget.button.Button.superclass._initComponent.call(this);if(this.menu){this.menu=actuate.widget.menu.MenuMgr.get(this.menu);}if(typeof this.toggleGroup==="string"){this.enableToggle=true;}},setTooltip:function(A){this.tooltip=A;this._updateTooltip();},_updateTooltip:function(A){if(!A){A=this._getButtonEl();}if(this.tooltip){if(typeof this.tooltip=="object"){actuate.widget.tips.QuickTips.register(actuate.util.Utility.apply({target:A.id},this.tooltip));}else{A.dom[this.tooltipType]=this.tooltip;}}},setIcon:function(A){this.icon=A;this._updateIcon(A);},_updateIcon:function(B){var A=this._getButtonEl();A.setStyle("background-image","url("+B+")");},_initButtonElement:function(A,B){this._ele=A;A.addClass("actuate-widget-btn");if(this.id){this._ele.dom.id=this._ele.id=this.id;}if(this.icon){B.setStyle("background-image","url("+this.icon+")");}if(this.iconCls){B.addClass(this.iconCls);if(!this.cls){A.addClass(this.text?"actuate-widget-btn-text-icon":"actuate-widget-btn-icon");}}if(this.tabIndex!==undefined){B.dom.tabIndex=this.tabIndex;}this._updateTooltip(B);A._addListener("mouseover",this._onMouseOver,this,false);A._addListener("click",this._onClick,this);if(this.pressed){this._ele.addClass("actuate-widget-btn-pressed");}if(this.handleMouseEvents){A._addListener("mouseover",this.onMouseOver,this);A._addListener("mousedown",this.onMouseDown,this);}if(this.menu){this.menu.on("show",actuate.Method.bind(this._onMenuShow,this));this.menu.on("hide",actuate.Method.bind(this._onMenuHide,this));}},_afterRender:function(){actuate.widget.Component.prototype._afterRender.call(this);if(this.width&&this._ele){this._ele.setWidth(this.width);}else{this._autoWidth();}},_autoWidth:function(){if(this._ele){this._ele.setWidth("auto");if(actuate.util.Utility.isIE7&&actuate.widget.isStrict){var A=this._ele.child(this.buttonSelector);if(A&&A.getWidth()>20){A.clip();A.setWidth(actuate.widget.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"));}}if(this.minWidth){if(this._ele.getWidth()<this.minWidth){this._ele.setWidth(this.minWidth);}}}},_autoWidth_orig:function(){if(this._ele){this._ele.setWidth("50");if(this.initialConfig.style){this._ele.applyStyles(this.initialConfig.style);}}},setText:function(A){this.text=A;if(this._ele){this._ele.child("td.actuate-widget-btn-center "+this.buttonSelector).update(A);}this._autoWidth();},_onMouseOver:function(B){if(!this.disabled){var A=B.within(this._ele,true);if(!A){if(!this.selected&&this.overIcon){this._updateIcon(this.overIcon);}if(!this.monitoringMouseOver){actuate.widget.Element.getDoc().on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true;}this.fireEvent("mouseover",this,B);if(this.menu&&this.menu.isVisible()&&this.activeCls){if(!this._ele.hasClass(this.activeCls)){this._ele.addClass(this.activeCls);}}else{if(this.overCls){this._ele.addClass(this.overCls);}else{this._ele.addClass("actuate-widget-btn-over");}}}if(this.isMenuTriggerOver(B,A)){this.fireEvent("menutriggerover",this,this.menu,B);}}},_onMouseOut:function(B){var A=B.within(this._ele)&&B.target!=this._ele.dom;if(this.overCls){this._ele.removeClass(this.overCls);}else{this._ele.removeClass("actuate-widget-btn-over");}if(!this.selected&&this.icon){this._updateIcon(this.icon);}this.fireEvent("mouseout",this,B);if(this.isMenuTriggerOut(B,A)){this.fireEvent("menutriggerout",this,this.menu,B);}},_onFocus:function(A){if(!this.disabled){if(!this.selected&&this.overIcon){this._updateIcon(this.overIcon);}this._ele.addClass("actuate-widget-btn-focus");}},_onBlur:function(A){if(!this.selected&&this.icon){this._updateIcon(this.icon);}this._ele.removeClass("actuate-widget-btn-focus");},isMenuTriggerOver:function(B,A){return this.menu&&!A;},isMenuTriggerOut:function(B,A){return this.menu&&!A;},monitorMouseOver:function(A){if(A.target!=this._ele.dom&&!A.within(this._ele)){if(this.monitoringMouseOver){actuate.widget.Element.getDoc().un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false;}this._onMouseOut(A);}},showMenu:function(){if(this.menu){this.menu.show(this._ele,this.menuAlign);}return this;},hideMenu:function(){if(this.menu){this.menu.hide();}return this;},_onMenuShow:function(A){this.ignoreNextClick=0;if(this.activeCls){this._ele.addClass(this.activeCls);}else{this._ele.addClass("actuate-widget-btn-menu-active");}this.fireEvent("menushow",this,this.menu);},_onMenuHide:function(A){if(this.activeCls){this._ele.removeClass(this.activeCls);}else{this._ele.removeClass("actuate-widget-btn-menu-active");}this.ignoreNextClick=actuate.Method.defer(250,this._restoreClick,this);this.fireEvent("menuhide",this,this.menu);},_restoreClick:function(){this.ignoreNextClick=0;},toggle:function(A){A=A===undefined?!this.pressed:A;if(A!=this.pressed){if(A){this._ele.addClass("actuate-widget-btn-pressed");this.pressed=true;this.fireEvent("toggle",this,true);}else{this._ele.removeClass("actuate-widget-btn-pressed");this.pressed=false;this.fireEvent("toggle",this,false);}if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,A);}}}});actuate.widget.Component.prototype.registerType("button",actuate.widget.button.Button);actuate.widget.Button=actuate.widget.button.Button;actuate.util.Package.define("actuate.widget.tips");actuate.widget.tips.Tip=actuate.Class.create();actuate.widget.tips.Tip.superclass=actuate.widget.panel.Panel.prototype;actuate.widget.tips.Tip.prototype=actuate.Class.extend(new actuate.widget.panel.Panel(),{minWidth:40,maxWidth:400,shadow:"drop",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"actuate-widget-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,hideMode:"visibility",markup:'<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',closeAction:"hide",initialize:function(A){actuate.widget.tips.Tip.superclass.initialize.call(this,A);},_initComponent:function(){actuate.widget.tips.Tip.superclass._initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header";}},_createTM:function(A,C){var B=document.createElement("div");B.className=this.baseCls+"-"+A;this[A]=actuate.widget.Element.prototype.get(C.appendChild(B));},_afterRender:function(){actuate.widget.tips.Tip.superclass._afterRender.call(this);if(this.closable){this._addTool({id:"close",handler:this.hide,scope:this});}},doAutoWidth:function(){var B=this.body.getTextWidth();if(this.title){B=Math.max(B,this.header.child("span").getTextWidth(this.title));}B+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr");var A=Math.min(Math.max(B,this.minWidth),this.maxWidth);this._ele.dom.style.width=A+"px";if(actuate.util.Utility.isIE9){this._ele.dom.style.width=(A+1)+"px";}if(actuate.util.Utility.isIE&&!this.repainted){this._ele.repaint();this.repainted=true;}},setTitle:function(B,A){actuate.widget.tips.Tip.superclass.setTitle.call(this,B,A);if(this.header){this.header.setStyle("margin","0");this.header.setStyle("padding","0");}return this;},showAt:function(A){actuate.widget.tips.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth();}if(this.constrainPosition){A=this._ele.adjustForConstraints(A);}this.setPagePosition(A[0],A[1]);}});actuate.widget.Component.prototype.registerType("Tip",actuate.widget.tips.Tip);actuate.util.Package.define("actuate.widget.tips");actuate.widget.tips.ToolTip=actuate.Class.extendClass(actuate.widget.tips.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,mouseOffset:[15,18],trackMouse:false,constrainPosition:true,_initComponent:function(){actuate.widget.tips.ToolTip.superclass._initComponent.call(this);this.lastActive=new Date();this._initTarget();},_onRender:function(B,A){actuate.widget.tips.Tip.prototype._onRender.call(this,B,A);this.anchorCls="actuate-widget-tip-anchor-"+this._getAnchorPosition();this.anchorEl=this._ele.createChild({cls:"actuate-widget-tip-anchor "+this.anchorCls});},_afterRender:function(){actuate.widget.tips.Tip.prototype._afterRender.call(this);},_getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0);}else{var A=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!A){throw"AnchorTip.defaultAlign is invalid";}this.tipAnchor=A[1].charAt(0);}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right";}return"left";},_initTarget:function(){if(actuate.util.browser.useMobile()==false){if(this.target){this.target=actuate.widget.Element.get(this.target);this.target.on("mouseover",this._onTargetOver,this);this.target.on("mouseout",this._onTargetOut,this);this.target.on("mousemove",this._onMouseMove,this);}}},_onMouseMove:function(A){this.targetXY=A.getXY();if(!this.hidden&&this.trackMouse){this.setPagePosition(this._getTargetXY());}},_onTargetOver:function(A){if(this.disabled||A.within(this.target.dom,true)){return ;}this.clearTimer("hide");this.targetXY=A.getXY();this.delayShow();},_onTargetOut:function(A){if(this.disabled||A.within(this.target.dom,true)){return ;}this.clearTimer("show");if(this.autoHide!==false){this.delayHide();}},clearTimer:function(A){A=A+"Timer";clearTimeout(this[A]);delete this[A];},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide");},delayShow:function(){if(this.hidden&&!this.showTimer){if(actuate.util.Utility.getTimeElapsed(this.lastActive)<this.quickShowInterval){this.show();}else{this.showTimer=actuate.Method.defer(this.showDelay,this.show,this);}}else{if(!this.hidden&&this.autoHide!==false){this.show();}}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=actuate.Method.defer(this.hideDelay,this.hide,this);}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date();actuate.widget.tips.ToolTip.superclass.hide.call(this);},show:function(){this.showAt(this._getTargetXY());},_getTargetXY:function(){if(this.targetXY){return[this.targetXY[0]+this.mouseOffset[0],this.targetXY[1]+this.mouseOffset[1]];}else{return[0,0];}},_onDisable:function(){this.clearTimers();this.hide();},_adjustPosition:function(A,D){if(this.targetXY){var C=this.targetXY[1],B=this.getSize().height;if(this.constrainPosition&&D<=C&&(D+B)>=C){D=C-B-5;}}return{x:A,y:D};},_onDestroy:function(){actuate.widget.tips.ToolTip.superclass.onDestroy.call(this);if(this.target){this.target.un("mouseover",this._onTargetOver,this);this.target.un("mouseout",this._onTargetOut,this);this.target.un("mousemove",this._onMouseMove,this);}},showAt:function(A){this.lastActive=new Date();this.clearTimers();actuate.widget.tips.ToolTip.superclass.showAt.call(this,A);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=actuate.Method.defer(this.dismissDelay,this.hide,this);}}});actuate.widget.Component.prototype.registerType("ToolTip",actuate.widget.tips.ToolTip);actuate.util.Package.define("actuate.widget.tips");actuate.widget.tips.QuickTip=actuate.Class.extendClass(actuate.widget.tips.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign"},_initComponent:function(){this.target=this.target||actuate.widget.Element.getDoc();this.targets=this.targets||{};actuate.widget.tips.QuickTip.superclass._initComponent.call(this);},register:function(D){var F=actuate.util.Utility.isArray(D)?D:arguments;for(var E=0,A=F.length;E<A;E++){var H=F[E];var G=H.target;if(G){if(actuate.util.Utility.isArray(G)){for(var C=0,B=G.length;C<B;C++){this.targets[actuate.widget.Element.id(G[C])]=H;}}else{this.targets[actuate.widget.Element.id(G)]=H;}}}},unregister:function(A){delete this.targets[actuate.widget.Element.id(A)];},_onTargetOver:function(G){if(this.disabled){return ;}this.targetXY=G.getXY();var C=G.getTarget();if(!C||C.nodeType!==1||C==document||C==document.body){return ;}if(this.activeTarget&&C==this.activeTarget.el){this.clearTimer("hide");this.show();return ;}if(C&&this.targets[C.id]){this.activeTarget=this.targets[C.id];this.activeTarget.el=C;this.delayShow();return ;}var E,F=actuate.widget.Element.fly(C),B=this.tagConfig;var D=B.namespace;if(this.interceptTitles&&C.title){E=C.title;C.qtip=E;C.removeAttribute("title");G.preventDefault();}else{E=C.qtip||F.getAttributeNS(D,B.attribute);}if(E){var A=F.getAttributeNS(D,B.hide);this.activeTarget={el:C,text:E,width:F.getAttributeNS(D,B.width),autoHide:A!="user"&&A!=="false",title:F.getAttributeNS(D,B.title),cls:F.getAttributeNS(D,B.cls),align:F.getAttributeNS(D,B.align)};this.delayShow();}},_onTargetOut:function(A){this.clearTimer("show");if(this.autoHide!==false){this.delayHide();}},showAt:function(B){var A=this.activeTarget;if(A){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=A;}if(A.width){this.setWidth(A.width);this.body.setWidth(this.adjustBodyWidth(A.width-this.getFrameWidth()));this.measureWidth=false;}else{this.measureWidth=true;}this.body.update(A.text);this.autoHide=A.autoHide;this.dismissDelay=A.dismissDelay||this.dismissDelay;if(this.lastCls){this._ele.removeClass(this.lastCls);delete this.lastCls;}if(A.cls){this._ele.addClass(A.cls);this.lastCls=A.cls;}if(A.align){B=this._ele.getAlignToXY(A.el,A.align);this.constrainPosition=false;}else{this.constrainPosition=true;}}actuate.widget.tips.QuickTip.superclass.showAt.call(this,B);},hide:function(){delete this.activeTarget;actuate.widget.tips.QuickTip.superclass.hide.call(this);}});actuate.widget.tips.QuickTips=function(){var B,A=[];return{init:function(C){if(!B){B=new actuate.widget.tips.QuickTip({elements:"body"});if(C!==false){B.render(actuate.widget.Element.getBody());}}},enable:function(){if(B){A.pop();if(A.length<1){B.enable();}}},disable:function(){if(B){B.disable();}A.push(1);},isEnabled:function(){return B!==undefined&&!B.disabled;},getQuickTip:function(){return B;},register:function(){B.register.apply(B,arguments);},unregister:function(){B.unregister.apply(B,arguments);},tips:function(){B.register.apply(B,arguments);}};}();actuate.widget.tips.QuickTips.init();actuate.util.Package.define("actuate.widget.form");actuate.widget.form.Label=actuate.Class.create();actuate.widget.form.Label.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.form.Label.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{_onRender:function(C,A){if(!this._ele){var B={tag:"label",id:this.getItemId()};this._ele=C.createChild(B,A);this._ele.dom.innerHTML=this.text?actuate.util.Utility.htmlEncode(this.text,true):(this.html||"");if(this.forId){this._ele.dom.setAttribute("for",this.forId);}}actuate.widget.form.Label.superclass._onRender.call(this,C,A);if(this.cls){this._ele.addClass([this.cls]);}},setText:function(A,B){this.text=A;if(this.rendered){this._ele.dom.innerHTML=B!==false?actuate.util.Utility.htmlEncode(A):A;}return this;},getText:function(){return this.text;}});actuate.widget.Component.prototype.registerType("label",actuate.widget.form.Label);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.Field=actuate.Class.create();actuate.widget.form.Field.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.form.Field.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{msgTarget:"side",focusClass:"actuate-form-focus",defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"actuate-form-field",readOnly:false,invalidClass:"actuate-form-invalid",disabled:false,validationEvent:"keyup",validateOnBlur:true,validationDelay:250,isFormField:true,hasFocus:false,preStatus:"valid",initialize:function(A){actuate.widget.form.Field.superclass.initialize.call(this,A);},getName:function(){return this.rendered&&this._ele.dom.name?this._ele.dom.name:(this.hiddenName||"");},_onRender:function(C,A){actuate.widget.form.Field.superclass._onRender.call(this,C,A);if(!this._ele){var B={};actuate.Class.extend(B,this.defaultAutoCreate);if(!B.name){B.name=this.name||this.id;}if(this.inputType){B.type=this.inputType;}this._ele=C.createChild(B,A);}var D=this._ele.dom.type;if(D){if(D=="password"){D="text";}this._ele.addClass("actuate-form-"+D);}if(this.readOnly){this._ele.dom.readOnly=true;}if(this.tabIndex!==undefined){this._ele.dom.setAttribute("tabIndex",this.tabIndex);}if(this.maxLength){this._ele.dom.setAttribute("maxlength",this.maxLength);}this._ele.addClass([this.fieldClass,this.cls]);},_initValue:function(){if(this.value!==undefined){this.setValue(this.value,true);}else{if(this._ele.dom.value&&this._ele.dom.value.length>0&&this._ele.dom.value!=this.emptyText){this.setValue(this._ele.dom.value);}}this.originalValue=this.getValue();},isDirty:function(){if(this.disabled){return false;}return String(this.getValue())!==String(this.originalValue);},_afterRender:function(){actuate.widget.form.Field.superclass._afterRender.call(this);this._initEvents();this._initValue();},_fireKey:function(A){if(A.isSpecialKey()){this.fireEvent("specialkey",this,A);}},reset:function(){this.setValue(this.originalValue);},_initEvents:function(){this._ele._addListener(actuate.widget.isIE||actuate.widget.isSafari3?"keydown":"keypress",actuate.Method.bind(this._fireKey,this),false);this._ele._addListener("focus",this._onFocus,this,false);this._ele._addListener("blur",this._onBlur,this,false);this._ele._addListener("click",this._onClick,this,false);},_onClick:function(A){this.fireEvent("click",this,A);},_onFocus:function(){if(this.focusClass){this._ele.addClass(this.focusClass);}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this);}},_beforeBlur:function(){},_onBlur:function(){this._beforeBlur();if(this.focusClass){this._ele.removeClass(this.focusClass);}this.hasFocus=false;if(this.validationEvent!==false&&this.validateOnBlur&&this.validationEvent!="blur"){this.validate();}var A=this.getValue();if(String(A)!==String(this.startValue)){this.fireEvent("change",this,A,this.startValue);}this.fireEvent("blur",this);},getRawValue:function(){var A=this.rendered?this._ele.getValue():actuate.util.Utility.value(this.value,"");if(A===this.emptyText){A="";}return A;},getValue:function(){if(!this.rendered){return this.value;}var A=this._ele.getValue();if(A===this.emptyText||A===undefined){A="";}return A;},setRawValue:function(A){if(this._ele&&this._ele.dom){return this._ele.dom.value=(A===null||A===undefined?"":A);}},setValue:function(A){this.value=A;if(this.rendered){if(actuate.util.Utility.isArray(A)){this._ele.dom.value=actuate.util.Json.makeArray(A);}else{this._ele.dom.value=(A===null||A===undefined?"":A);}this.validate();}},_adjustSize:function(A,C){var B=actuate.widget.form.Field.superclass._adjustSize.call(this,A,C);B.width=this._adjustWidth(this._ele.dom.tagName,B.width);return B;},_adjustWidth:function(A,B){A=A.toLowerCase();if(typeof B=="number"&&!actuate.widget.isSafari){if(actuate.widget.isIE&&(A=="input"||A=="textarea")){if(A=="input"&&!actuate.widget.isStrict){return this.inEditor?B:B-3;}if(A=="input"&&actuate.widget.isStrict){return B-(actuate.widget.isIE6?4:1);}if(A=="textarea"&&actuate.widget.isStrict){return B-2;}}else{if(actuate.widget.isOpera&&actuate.widget.isStrict){if(A=="input"){return B+2;}if(A=="textarea"){return B-2;}}}}return B;},isValid:function(A){if(this.disabled){return true;}var C=this.preventMark;this.preventMark=A===true;var B=this.validateValue(this.processValue(this.getRawValue()));this.preventMark=C;return B;},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true;}return false;},processValue:function(A){return A;},validateValue:function(A){return true;},markInvalid:function(C){if(!this.rendered||this.preventMark){return ;}this._ele.addClass(this.invalidClass);C=C||this.invalidText;switch(this.msgTarget){case"qtip":this._ele.dom.qtip=C;this._ele.dom.qclass="actuate-form-invalid-tip";if(actuate.widget.tips.QuickTips){actuate.widget.tips.QuickTips.enable();}break;case"title":this._ele.dom.title=C;break;case"side":if(!this.errorIcon){var B=this._getErrorCt();if(!B){this._ele.dom.title=C;break;}this.errorIcon=B.createChild({cls:"actuate-form-invalid-icon"});}this._alignErrorIcon();this.errorIcon.dom.qtip=C;this.errorIcon.dom.qclass="actuate-form-invalid-tip";this.errorIcon.show();this.on("resize",this._alignErrorIcon,this);break;default:var A=actuate.widget.Element.getDom(this.msgTarget);A.innerHTML=C;A.style.display=this.msgDisplay;break;}this.fireEvent("invalid",this,C);if(this.preStatus=="valid"){this.preStatus="invalid";this.fireEvent("validChg",this,C);}},clearInvalid:function(){if(!this.rendered||this.preventMark){return ;}this._ele.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this._ele.dom.qtip="";break;case"title":this._ele.dom.title="";break;case"side":if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide();this.un("resize",this._alignErrorIcon,this);}break;default:var A=actuate.widget.Element.getDom(this.msgTarget);A.innerHTML="";A.style.display="none";break;}this.fireEvent("valid",this);if(this.preStatus=="invalid"){this.preStatus="valid";this.fireEvent("validChg",this);}},_getErrorCt:function(){return this._ele.findParent(".actuate-widget-column-inner",5,true)||this._ele.findParent(".actuate-form-field-wrap",5,true);},_alignErrorIcon:function(){this.errorIcon.alignTo(this._ele,"tl-tr",[2,0]);}});actuate.util.Package.define("actuate.widget.form");actuate.widget.form.TextField=actuate.Class.create();actuate.widget.form.TextField.superclass=actuate.widget.form.Field.prototype;actuate.widget.form.TextField.prototype=actuate.Class.extend(new actuate.widget.form.Field(),{maskRe:null,selectOnFocus:false,emptyText:null,emptyClass:"actuate-form-empty-field",showTooltip:false,allowBlank:true,validator:null,enableKeyEvents:false,blankText:"This field is required.",initialize:function(A){actuate.widget.form.TextField.superclass.initialize.call(this,A);},_initEvents:function(){actuate.widget.form.TextField.superclass._initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new actuate.widget.util.DelayedTask(this.validate,this);this._ele.on("keyup",this.filterValidation,this);}else{if(this.validationEvent!==false){this._ele.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay});}}if(this.selectOnFocus||this.emptyText){this.registerEventHandler("focus",actuate.Method.bind(this._preFocus,this));this._ele._addListener("mousedown",function(){if(!this.hasFocus){this._ele._addListener("mouseup",function(A){A.preventDefault();},this,{single:true});}},this);if(this.emptyText){this.registerEventHandler("blur",actuate.Method.bind(this._postBlur,this));this.applyEmptyText();}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=actuate.widget.form.VTypes[this.vtype+"Mask"]))){this._ele._addListener("keypress",this._filterKeys,this);}if(this.readOnly){this._ele._addListener("keydown",this._onKeyDown,this);}if(this.enableKeyEvents){this._ele._addListener("keydown",this._onKeyDown,this);this._ele._addListener("keypress",this._onKeyPress,this);}this._ele._addListener("keyup",this._onKeyUp,this);},processValue:function(A){if(this.stripCharsRe){var B=A.replace(this.stripCharsRe,"");if(B!==A){this.setValue(B);return B;}}return A;},_onDisable:function(){actuate.widget.form.TextField.superclass._onDisable.call(this);if(actuate.widget.isIE){this._ele.dom.unselectable="on";}},disable:function(){var A=actuate.widget.form.TextField.superclass.disable.call(this);this.validate();return A;},_onEnable:function(){actuate.widget.form.TextField.superclass._onEnable.call(this);if(actuate.widget.isIE){this._ele.dom.unselectable="";}},enable:function(){var A=actuate.widget.form.TextField.superclass.enable.call(this);this.validate();return A;},_preventBackspace:function(A){if(this.readOnly===true){if(A.BACKSPACE===A.getKey()){if(A.preventDefault){A.preventDefault();}return true;}}return false;},_onKeyUp:function(A){this._updateTooltip();if(this.enableKeyEvents){this.fireEvent("keyup",this,A);}},_onKeyDown:function(B){var A=this._preventBackspace(B);if(A){return ;}this.fireEvent("keydown",this,B);},_onKeyPress:function(A){this.fireEvent("keypress",this,A);},reset:function(){actuate.widget.form.TextField.superclass.reset.call(this);this.applyEmptyText();},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getValue()==""&&!this.hasFocus){if(this._ele&&this._ele.dom){this._ele.dom.value=this.emptyText;this._ele.addClass(this.emptyClass);this._emptyTextShown=true;}}},_preFocus:function(){if(this.emptyText){if(this._emptyTextShown){this._ele.dom.value="";this._emptyTextShown=false;}this._ele.removeClass(this.emptyClass);}if(this.selectOnFocus){this._ele.dom.select();}},_postBlur:function(){this.applyEmptyText();},_filterKeys:function(B){if(B.ctrlKey){return ;}var A=B.getKey();if(actuate.widget.isGecko&&(B.isNavKeyPress()||A==B.BACKSPACE||(A==B.DELETE&&B.button==-1))){return ;}var D=B.getCharCode(),C=String.fromCharCode(D);if(!actuate.widget.isGecko&&B.isSpecialKey()&&!C){return ;}if(!this.maskRe.test(C)){B.stopEvent();}},setValue:function(A){if(this.emptyText&&this._ele&&A!==undefined&&A!==null&&A!==""){this._ele.removeClass(this.emptyClass);this._emptyTextShown=false;}actuate.widget.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this._updateTooltip();},selectText:function(F,A){var C=this.getValue();var D=false;if(C.length>0){F=F===undefined?0:F;A=A===undefined?C.length:A;var E=this._ele.dom;if(E.setSelectionRange){E.setSelectionRange(F,A);}else{if(E.createTextRange){var B=E.createTextRange();B.moveStart("character",F);B.moveEnd("character",A-C.length);B.select();}}D=actuate.widget.isGecko||actuate.widget.isOpera;}else{D=true;}if(D){this.focus();}},_updateTooltip:function(){if(this.showTooltip&&this._ele&&this._ele.dom){this._ele.dom.title=this._ele.dom.value;}},validateValue:function(A){if(!A||A.length<1||A===this.emptyText){if(this.allowBlank){this.clearInvalid();return true;}else{this.markInvalid(this.blankText);return false;}}if(this.minLength){if(A.length<this.minLength){this.markInvalid(actuate.util.String.format(this.minLengthText,this.minLength));return false;}}if(this.maxLength){if(A.length>this.maxLength){this.markInvalid(actuate.util.String.format(this.maxLengthText,this.maxLength));return false;}}if(this.vtype){var C=actuate.widget.form.VTypes;if(!C[this.vtype](A,this)){this.markInvalid(this.vtypeText||C[this.vtype+"Text"]);return false;}}if(typeof this.validator=="function"){var B=this.validator(A);if(B!==true){this.markInvalid(B);return false;}}if(this.regex&&!this.regex.test(A)){this.markInvalid(this.regexText);return false;}return true;},filterValidation:function(A){if(!A.isNavKeyPress()){this.validationTask.delay(this.validationDelay);}},_onShow:function(){actuate.widget.form.TextField.superclass._onShow.call(this);this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="";}var A=this.container.dom.parentNode;if(A&&A.className&&A.className.indexOf("actuate-form-item")>=0){if(!A.style){A.style={};}A.style.display="";}},setLabel:function(B){if(!this._label&&this.container&&this.container.dom){this._label=this.container.dom.previousSibling;}if(this._label){if(this._label.childNodes&&this._label.childNodes[0]){var A=this._label.childNodes[0];A.nodeValue=B+":";}}},_onHide:function(){actuate.widget.form.TextField.superclass._onHide.call(this);this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="none";}var A=this.container.dom.parentNode;if(A&&A.className&&A.className.indexOf("actuate-form-item")>=0){if(!A.style){A.style={};}A.style.display="none";}}});actuate.widget.Component.prototype.registerType("textfield",actuate.widget.form.TextField);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.NumberField=actuate.Class.extendClass(actuate.widget.form.TextField,{fieldClass:"actuate-form-field actuate-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",_initEvents:function(){actuate.widget.form.NumberField.superclass._initEvents.call(this);var B=this.baseChars+"";if(this.allowDecimals){B+=this.decimalSeparator;}if(this.allowNegative){B+="-";}this.stripCharsRe=new RegExp("[^"+B+"]","gi");var A=function(D){var C=D.getKey();if(!actuate.util.Utility.isIE&&(D.isSpecialKey()||C==D.BACKSPACE||C==D.DELETE)){return ;}var E=D.getCharCode();if(B.indexOf(String.fromCharCode(E))===-1){D.stopEvent();}};this._ele.on("keypress",A,this);},validateValue:function(B){if(!actuate.widget.form.NumberField.superclass.validateValue.call(this,B)){return false;}if(B.length<1){return true;}B=String(B).replace(this.decimalSeparator,".");if(isNaN(B)){this.markInvalid(actuate.util.String.format(this.nanText,B));return false;}var A=this.parseValue(B);if(A<this.minValue){this.markInvalid(actuate.util.String.format(this.minText,this.minValue));return false;}if(A>this.maxValue){this.markInvalid(actuate.util.String.format(this.maxText,this.maxValue));return false;}return true;},getValue:function(){return this.fixPrecision(this.parseValue(actuate.widget.form.NumberField.superclass.getValue.call(this)));},setValue:function(A){A=typeof A=="number"?A:parseFloat(String(A).replace(this.decimalSeparator,"."));A=isNaN(A)?"":String(A).replace(".",this.decimalSeparator);actuate.widget.form.NumberField.superclass.setValue.call(this,A);},parseValue:function(A){A=parseFloat(String(A).replace(this.decimalSeparator,"."));return isNaN(A)?"":A;},fixPrecision:function(B){var A=isNaN(B);if(!this.allowDecimals||this.decimalPrecision==-1||A||!B){return A?"":B;}return parseFloat(parseFloat(B).toFixed(this.decimalPrecision));},_beforeBlur:function(){var A=this.parseValue(this.getRawValue());if(A||A===0){this.setValue(this.fixPrecision(A));}}});actuate.widget.Component.prototype.registerType("numberfield",actuate.widget.form.NumberField);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.FieldSet=actuate.Class.create();actuate.widget.form.FieldSet.superclass=actuate.widget.panel.Panel.prototype;actuate.widget.form.FieldSet.prototype=actuate.Class.extend(new actuate.widget.panel.Panel(),{baseCls:"actuate-fieldset",layout:"form",animCollapse:false,_onRender:function(B,A){if(!this._ele){this._ele=document.createElement("fieldset");this._ele.id=this.getItemId();if(this.title||this.header||this.checkboxToggle){this._ele.appendChild(document.createElement("legend")).className="actuate-fieldset-header";}}actuate.widget.form.FieldSet.superclass._onRender.call(this,B,A);if(this.checkboxToggle){var C=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(C);this.checkbox.dom.checked=!this.collapsed;this.checkbox._addListener("click",this._onCheckClick,this);}},_onCollapse:function(B,A){if(this.checkbox){this.checkbox.dom.checked=false;}actuate.widget.form.FieldSet.superclass._onCollapse.call(this,B,A);},_onExpand:function(B,A){if(this.checkbox){this.checkbox.dom.checked=true;}actuate.widget.form.FieldSet.superclass._onExpand.call(this,B,A);},_onCheckClick:function(){this[this.checkbox.dom.checked?"_expand":"_collapse"]();},getFrameWidth:function(){return 0;},getFrameHeight:function(){return 0;},showHeaderLine:function(){this.bwrap.dom.className=this.bwrapCls;},hideHeaderLine:function(){this.bwrap.dom.className="actuate-fieldset-bwrap-noboarder";},enableBodyMarginLeft:function(){this.body.dom.className=this.body.dom.className.replace(/actuate-fieldset-body-noleft/,"actuate-fieldset-body");},disableBodyMarginLeft:function(){this.body.dom.className=this.body.dom.className.replace(/actuate-fieldset-body/,"actuate-fieldset-body-noleft");},_noComma:null});actuate.widget.Component.prototype.registerType("fieldset",actuate.widget.form.FieldSet);actuate.util.Package.define("actuate.widget.util");actuate.widget.util.ClickRepeater=actuate.Class.extendClass(actuate.widget.Observable,{interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,initialize:function(B,A){actuate.widget.util.ClickRepeater.superclass.initialize.call(this,A);this._ele=actuate.widget.Element.get(B);this._ele.unselectable();actuate.util.Utility.apply(this,A);this._ele.on("mousedown",this.handleMouseDown,this);if(this.preventDefault||this.stopDefault){this._ele.on("click",function(C){if(this.preventDefault){C.preventDefault();}if(this.stopDefault){C.stopEvent();}},this);}if(this.handler){this.on("click",this.handler,this.scope||this);}},destroy:function(){actuate.widget.Element.destroy(this._ele);this.purgeListeners();},handleMouseDown:function(){clearTimeout(this.timer);this._ele.blur();if(this.pressClass){this._ele.addClass(this.pressClass);}this.mousedownTime=new Date();actuate.widget.Element.getDoc().on("mouseup",this.handleMouseUp,this);this._ele.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this);this.fireEvent("click",this);if(this.accelerate){this.delay=400;}this.timer=actuate.Method.defer(this.delay||this.interval,this.click,this);},click:function(){this.fireEvent("click",this);this.timer=actuate.Method.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this.click,this);},easeOutExpo:function(B,A,D,C){return(B==C)?A+D:D*(-Math.pow(2,-10*B/C)+1)+A;},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this._ele.removeClass(this.pressClass);}this._ele.on("mouseover",this.handleMouseReturn,this);},handleMouseReturn:function(){this._ele.un("mouseover",this.handleMouseReturn,this);if(this.pressClass){this._ele.addClass(this.pressClass);}this.click();},handleMouseUp:function(){clearTimeout(this.timer);this._ele.un("mouseover",this.handleMouseReturn,this);this._ele.un("mouseout",this.handleMouseOut,this);actuate.widget.Element.getDoc().un("mouseup",this.handleMouseUp,this);this._ele.removeClass(this.pressClass);this.fireEvent("mouseup",this);}});actuate.util.Package.define("actuate.widget.util");actuate.widget.util.Format=function(){var trimRe=/^\s+|\s+$/g;return{ellipsis:function(value,len){if(value&&value.length>len){return value.substr(0,len-3)+"...";}return value;},undef:function(value){return value!==undefined?value:"";},defaultValue:function(value,defaultValue){return value!==undefined&&value!==""?value:defaultValue;},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&");},trim:function(value){return String(value).replace(trimRe,"");},substr:function(value,start,length){return String(value).substr(start,length);},lowercase:function(value){return String(value).toLowerCase();},uppercase:function(value){return String(value).toUpperCase();},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase();},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args);}else{return eval(fn).call(window,value);}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+".00":((v*10==Math.floor(v*10))?v+"0":v);v=String(v);var ps=v.split(".");var whole=ps[0];var sub=ps[1]?"."+ps[1]:".00";var r=/(\d+)(\d{3})/;while(r.test(whole)){whole=whole.replace(r,"$1"+","+"$2");}v=whole+sub;if(v.charAt(0)=="-"){return"-$"+v.substr(1);}return"$"+v;},date:function(v,format){if(!v){return"";}if(!Ext.isDate(v)){v=new Date(Date.parse(v));}return v.dateFormat(format||"m/d/Y");},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format);};},stripTagsRE:/<\/?[^>]+>/gi,stripTags:function(v){return !v?v:String(v).replace(this.stripTagsRE,"");},stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,stripScripts:function(v){return !v?v:String(v).replace(this.stripScriptsRe,"");},fileSize:function(size){if(size<1024){return size+" bytes";}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+" KB";}else{return(Math.round(((size*10)/1048576))/10)+" MB";}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function("v","return v "+a+";");}return fns[a](v);};}(),nl2br:function(v){return v===undefined||v===null?"":v.replace(/\n/g,"<br/>");}};}();actuate.util.Package.define("actuate.widget.util");actuate.widget.util.TaskRunner=actuate.Class.create();actuate.widget.util.TaskRunner.prototype={initialize:function(A){if(this.__extending){return ;}this._interval=A||10;this._tasks=[];this._removeQueue=[];this._id=0;this._running=false;},_stopThread:function(){this._running=false;clearInterval(this._id);this._id=0;},_startThread:function(){if(!this._running){this._running=true;this._id=setInterval(actuate.Method.bind(this._runTasks,this),this._interval);}},_removeTask:function(A){this._removeQueue.push(A);if(A.onStop){A.onStop.apply(A.scope||A);}},_runTasks:function(){if(this._removeQueue.length>0){for(var F=0,B=this._removeQueue.length;F<B;F++){actuate.util.Utility.arrayRemoveValue(this._tasks,this._removeQueue[F]);}this._removeQueue=[];if(this._tasks.length<1){this._stopThread();return ;}}var D=new Date().getTime();for(var F=0,B=this._tasks.length;F<B;++F){var E=this._tasks[F];var A=D-E.taskRunTime;if(E.interval<=A){var C=E.run.apply(E.scope||E,E.args||[++E.taskRunCount]);E.taskRunTime=D;if(C===false||E.taskRunCount===E.repeat){this._removeTask(E);return ;}}if(E.duration&&E.duration<=(D-E.taskStartTime)){this._removeTask(E);}}},start:function(A){this._tasks.push(A);A.taskStartTime=new Date().getTime();A.taskRunTime=0;A.taskRunCount=0;this._startThread();return A;},stop:function(A){this._removeTask(A);return A;},stopAll:function(){this._stopThread();for(var B=0,A=this._tasks.length;B<A;B++){if(this._tasks[B].onStop){this._tasks[B].onStop();}}this._tasks=[];this._removeQueue=[];}};actuate.widget.TaskMgr=new actuate.widget.util.TaskRunner();actuate.util.Package.define("actuate.widget.util");actuate.widget.util.TextMetrics=function(){var A;return{measure:function(B,C,D){if(!A){A=actuate.widget.util.TextMetrics.Instance(B,D);}A.bind(B);A.setFixedWidth(D||"auto");return A.getSize(C);},createInstance:function(B,C){return actuate.widget.util.TextMetrics.Instance(B,C);}};}();actuate.widget.util.TextMetrics.Instance=function(B,D){var C=new actuate.widget.Element(document.createElement("div"));document.body.appendChild(C.dom);C.position("absolute");C.setLeftTop(-1000,-1000);C.hide();if(D){C.setWidth(D);}var A={getSize:function(F){C.update(F);var E=C.getSize();C.update("");return E;},bind:function(E){C.setStyle(actuate.widget.Element.fly(E).getStyles("font-size","font-style","font-weight","font-family","line-height"));},setFixedWidth:function(E){C.setWidth(E);},getWidth:function(E){C.dom.style.width="auto";return this.getSize(E).width;},getHeight:function(E){return this.getSize(E).height;}};A.bind(B);return A;};actuate.util.Package.define("actuate.widget.util");actuate.widget.util.DelayedTask=function(E,D,A){var G=null,F,B;var C=function(){var H=new Date().getTime();if(H-B>=F){clearInterval(G);G=null;E.apply(D,A||[]);}};this.delay=function(I,K,J,H){if(G&&I!=F){this.cancel();}F=I;B=new Date().getTime();E=K||E;D=J||D;A=H||A;if(!G){G=setInterval(C,F);}};this.cancel=function(){if(G){clearInterval(G);G=null;}};};actuate.util.Package.define("actuate.widget.form");actuate.widget.form.TextArea=actuate.Class.create();actuate.widget.form.TextArea.superclass=actuate.widget.form.TextField.prototype;actuate.widget.form.TextArea.prototype=actuate.Class.extend(new actuate.widget.form.TextField(),{_onRender:function(B,A){if(!this._ele){this.defaultAutoCreate={tag:"textarea",autocomplete:"off"};}actuate.widget.form.TextArea.superclass._onRender.call(this,B,A);}});actuate.widget.Component.prototype.registerType("textarea",actuate.widget.form.TextArea);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.TriggerField=actuate.Class.create();actuate.widget.form.TriggerField.superclass=actuate.widget.form.TextField.prototype;actuate.widget.form.TriggerField.prototype=actuate.Class.extend(new actuate.widget.form.TextField(),{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,autoSize:actuate.Method.empty,monitorTab:true,_deferHeight:true,mimicing:false,initialize:function(A){actuate.widget.form.TriggerField.superclass.initialize.call(this,A);},_onResize:function(A,B){actuate.widget.form.TriggerField.superclass._onResize.call(this,A,B);if(typeof A=="number"){this._ele.setWidth(this._adjustWidth("input",A-this._trigger.getWidth()));}this._wrap.setWidth(this._ele.getWidth()+this._trigger.getWidth());},_adjustSize:actuate.widget.BoxComponent.prototype._adjustSize,_getResizeEl:function(){return this._wrap;},getPositionEl:function(){return this._wrap;},_alignErrorIcon:function(){if(this._wrap){this.errorIcon.alignTo(this._wrap,"tl-tr",[2,0]);}},_onRender:function(B,A){actuate.widget.form.TriggerField.superclass._onRender.call(this,B,A);this._wrap=this._ele.wrap({cls:"actuate-form-field-wrap"});this._trigger=this._wrap.createChild(this.triggerConfig||{tag:"img",src:actuate.widget.BLANK_IMAGE_URL,cls:"actuate-form-trigger "+this.triggerClass});if(this.hideTrigger){this._trigger.setDisplayed(false);}this._initTrigger();if(!this.width){this._wrap.setWidth(this._ele.getWidth()+this._trigger.getWidth());}},_afterRender:function(){actuate.widget.form.TriggerField.superclass._afterRender.call(this);var A;if(actuate.util.Utility.isIE&&!this.hideTrigger&&(A=this._ele.getY())!=this._trigger.getY()){this._trigger.position();this._trigger.setY(A);}},_initTrigger:function(){this._trigger._addListener("click",this._onTriggerClick,this,{preventDefault:true});this._trigger.addClassOnOver("actuate-form-trigger-over");this._trigger.addClassOnClick("actuate-form-trigger-click");},_onDestroy:function(){if(this._trigger){this._trigger.removeAllListeners();this._trigger.remove();}if(this._wrap){this._wrap.remove();}actuate.widget.form.TriggerField.superclass._onDestroy.call(this);},_onFocus:function(){actuate.widget.form.TriggerField.superclass._onFocus.call(this);if(!this.mimicing){this._wrap.addClass("actuate-trigger-wrap-focus");this.mimicing=true;actuate.widget.Element.get(actuate.util.Utility.isIE?document.body:document)._addListener("mousedown",this._mimicBlur,this,{delay:10});if(this.monitorTab){this._ele.on("keydown",this._checkTab,this);}}},_checkTab:function(A){if(A.getKey()==A.TAB){this._triggerBlur();}},_onBlur:function(){},_mimicBlur:function(A){if(!this._wrap.contains(A.target)&&this._validateBlur(A)){this._triggerBlur();}},_triggerBlur:function(){this.mimicing=false;actuate.widget.Element.get(actuate.util.Utility.isIE?document.body:document)._removeListener("mousedown",this._mimicBlur,this);if(this.monitorTab&&this._ele){this._ele.un("keydown",this.checkTab,this);}this._beforeBlur();if(this._wrap){this._wrap.removeClass("actuate-trigger-wrap-focus");}actuate.widget.form.TriggerField.superclass._onBlur.call(this);},_beforeBlur:actuate.Method.empty,_validateBlur:function(A){return true;},_onDisable:function(){actuate.widget.form.TriggerField.superclass._onDisable.call(this);if(this._wrap){this._wrap.addClass(this.disabledClass);this._ele.removeClass(this.disabledClass);}},_onEnable:function(){actuate.widget.form.TriggerField.superclass._onEnable.call(this);if(this._wrap){this._wrap.removeClass(this.disabledClass);}},_onShow:function(){if(this._wrap){this._wrap.dom.style.display="";this._wrap.dom.style.visibility="visible";}this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="";}},_onHide:function(){this._wrap.dom.style.display="none";this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="none";}},_onTriggerClick:actuate.Method.empty});actuate.util.Package.define("actuate.widget.form");actuate.widget.form.ComboBox=actuate.Class.extendClass(actuate.widget.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"actuate-combo-selected",overClass:"actuate-combo-over",triggerClass:"actuate-form-arrow-trigger",shadow:"drop",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"all",minChars:4,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,editable:true,anyMatch:false,allQuery:"",mode:"local",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,titleField:"value",_ignoreCase:false,viewWidth:null,_initComponent:function(){actuate.widget.form.ComboBox.superclass._initComponent.call(this);this._onBeforeLoad_c=actuate.Method.bind(this._onBeforeLoad,this);this._onLoad_c=actuate.Method.bind(this._onLoad,this);this._onTriggerClick_c=actuate.Method.bind(this._onTriggerClick,this);this._collapse_c=actuate.Method.bind(this.collapse,this);if(this.transform){this.allowDomMove=false;var C=actuate.widget.Element.getDom(this.transform);if(!this.hiddenName){this.hiddenName=C.name;}if(!this.store){this.mode="local";var G=[],D=C.options;for(var B=0,A=D.length;B<A;B++){var F=D[B];var E=(actuate.util.Utility.isIE?F.getAttributeNode("value").specified:F.hasAttribute("value"))?F.value:F.text;if(F.selected){this.value=E;}G.push([E,F.text]);}this.store=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:G});this.valueField="value";this.displayField="text";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}}C.name=actuate.widget.id();if(!this.lazyRender){this.target=true;this._ele=actuate.widget.DomHelper.insertBefore(C,this.autoCreate||this.defaultAutoCreate);actuate.widget.removeNode(C);this.render(this._ele.parentNode);}else{actuate.widget.removeNode(C);}}else{if(actuate.util.Utility.isArray(this.store)){if(actuate.util.Utility.isArray(this.store[0])){this.store=new actuate.widget.data.SimpleStore({fields:["value","text"],data:this.store});this.displayField="text";}else{this.store=new actuate.widget.data.SimpleStore({fields:["value"],data:this.store,expandData:true});this.displayField="value";}this.valueField="value";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}this.mode="local";}else{if(!this.store){this.store=new actuate.widget.data.SimpleStore({fields:["value"]});this.valueField="value";this.displayField="value";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}}}}this.selectedIndex=-1;if(this.mode=="local"){if(this.initialConfig.queryDelay===undefined){this.queryDelay=10;}if(this.initialConfig.minChars===undefined){this.minChars=0;}}},_onRender:function(B,A){actuate.widget.form.ComboBox.superclass._onRender.call(this,B,A);if(this.hiddenName){this.hiddenField=this._ele.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:(this.hiddenId||this.hiddenName)},"before",true);this._ele.dom.removeAttribute("name");}if(actuate.util.Utility.isGecko){this._ele.dom.setAttribute("autocomplete","off");}if(!this.lazyInit){this._initList();}else{this.on("focus",actuate.Method.bind(this._initList,this,{single:true}));}},_initValue:function(){actuate.widget.form.ComboBox.superclass._initValue.call(this);if(this.hiddenField){this.hiddenField.value=this.hiddenValue!==undefined?this.hiddenValue:this.value!==undefined?this.value:"";}},_initDropDown:function(A,B){this.innerList=this.list.createChild({cls:A+"-inner"});if(this.viewWidth&&this.viewWidth>B){this.innerList.setWidth(this.viewWidth-this.list.getFrameWidth("lr"));}else{this.innerList.setWidth(B-this.list.getFrameWidth("lr"));}},setTemplate:function(A){if(!A){A=this._createDefaultTemplate();}else{this._isDefaultTemplate=false;}this.tpl=A;if(this.view){this.view.setTemplate(A);}},_createDefaultTemplate:function(){this._isDefaultTemplate=true;if(!this.titleField){return'<tpl for="."><div class="'+this._defaultCls+'-item">{'+this.displayField+"}</div></tpl>";}else{return'<tpl for="."><div title="{'+this.titleField+'}" class="'+this._defaultCls+'-item">{'+this.displayField+"}</div></tpl>";}},_initList:function(){if(this._wrap&&!this.list){var A="actuate-combo-list";this._defaultCls=A;this.list=new actuate.widget.Layer({shadow:(actuate.util.Utility.isIE8?this.shadow:false),cls:[A,this.listClass].join(" "),constrain:false});var E;if(this._wrap.dom.getElementsByTagName("input")&&this._wrap.dom.getElementsByTagName("input").length>=1){var D=this._wrap.dom.getElementsByTagName("input")[0];if(D.style&&D.style.width){E=D.style.width.match(/^[1-9]\d*|0$/);}}if(actuate.util.Utility.isArray(E)&&E.length>0){E=E[0];}if(typeof E=="string"){E=parseFloat(E);}if(!E){E=0;}var B=this._trigger?this._trigger.getWidth():0;var F=Math.max(E+B+7,this._wrap.getWidth()-1);var C=this.listWidth||Math.max(F,this.minListWidth);if(this.viewWidth&&this.viewWidth>C){this.list.setWidth(this.viewWidth);}else{this.list.setWidth(C);}this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.title){this.header=this.list.createChild({cls:A+"-hd",html:this.title});this.assetHeight+=this.header.getHeight();}this._initDropDown(A,C);if(this.pageSize){this.footer=this.list.createChild({cls:A+"-ft"});this.pageTb=new actuate.widget.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight();}if(!this.tpl){this.tpl=this._createDefaultTemplate();}this.view=this.__createDataView(A);this.bindStore(this.store,true);if(this.resizable){this.resizer=new actuate.widget.Resizable(this.list,{pinned:true,handles:"se"});this.resizer.on("resize",actuate.Method.bind(function(I,G,H){this.maxHeight=H-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;if(this.viewWidth&&this.viewWidth>G){this.listWidth=this.viewWidth;this.innerList.setWidth(this.viewWidth-this.list.getFrameWidth("lr"));}else{this.listWidth=G;this.innerList.setWidth(G-this.list.getFrameWidth("lr"));}this._restrictHeight();},this));this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px");}if(this.selectedIndex>=0){this.view.select(this.selectedIndex);}}},__createDataView:function(B){var A=new actuate.widget.DataView({applyTo:this.innerList,tpl:this.tpl,cls:this.dropDownClass,singleSelect:true,selectedClass:this.selectedClass,overClass:this.overClass,itemSelector:this.itemSelector||"."+B+"-item",displayField:this.displayField,htmlEncode:this.htmlEncode});A.on("click",actuate.Method.bind(this._onViewClick,this));return A;},getStore:function(){return this.store;},bindStore:function(A,B){if(this.view){this.view.setFields(this.valueField,this.displayField,this.titleField);}if(A&&this._isDefaultTemplate){this.setTemplate();}if(this.store&&!B){this.store.un("beforeload",this._onBeforeLoad_c);this.store.un("load",this._onLoad_c);this.store.un("loadexception",this._collapse_c);if(!A){this.store=null;if(this.view){this.view.setStore(null);}}}if(A){if(actuate.util.Utility.isArray(A)){this.store=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:A});this.valueField="value";this.displayField="text";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}if(this.view){this.view.setFields(this.valueField,this.displayField,this.titleField);}}else{this.store=A;}this.store.on("beforeload",this._onBeforeLoad_c);this.store.on("load",this._onLoad_c);this.store.on("loadexception",this._collapse_c);if(this.view){this.view.setStore(this.store);}}this.setValue(this.value);},_initEvents:function(){actuate.widget.form.ComboBox.superclass._initEvents.call(this);this.keyNav=new actuate.widget.KeyNav(this._ele,{"up":function(A){this.inKeyMode=true;this._selectPrev();},"down":function(A){if(!this.isExpanded()){this._onTriggerClick();}else{this.inKeyMode=true;this._selectNext();}},"enter":function(A){this._onViewClick();this.delayedCheck=true;actuate.Method.defer(10,this.unsetDelayCheck,this);},"esc":function(A){this.collapse();},"tab":function(A){this._onViewClick(false);return true;},scope:this,doRelay:function(C,B,A){if(A=="down"||this.scope.isExpanded()){return actuate.widget.KeyNav.prototype.doRelay.apply(this,arguments);}return true;},forceKeyDown:true});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new actuate.widget.util.DelayedTask(this.initQuery,this);this.enterKeyTask=new actuate.widget.util.DelayedTask(this._enableEnterKey,this);if(this.typeAhead){this.taTask=new actuate.widget.util.DelayedTask(this._onTypeAhead,this);}if(this.editable!==false){this._ele.on("keyup",actuate.Method.bind(this._onKeyUp,this));}else{this._ele.on("keydown",actuate.Method.bind(this._onKeyDown,this));}this._ele.on("mousedown",this._onTriggerClick_c);if(this.forceSelection){this.on("blur",actuate.Method.bind(this.doForce,this));}},_onDestroy:function(){this.__destroyList();if(this.dqTask){this.dqTask.cancel();this.dqTask=null;}if(this.enterKeyTask){this.enterKeyTask.cancel();this.enterKeyTask=null;}this.bindStore(null);actuate.widget.form.ComboBox.superclass._onDestroy.call(this);},__destroyList:function(){if(this.view){actuate.widget.Element.destroy(this.view);this.view=null;}if(this.list){this.list.destroy();this.list=null;}this.selectedIndex=-1;this.value=undefined;},unsetDelayCheck:function(){delete this.delayedCheck;},fireKey:function(A){if(A.isNavKeyPress()&&!this.isExpanded()&&!this.delayedCheck){this.fireEvent("specialkey",this,A);}},_onResize:function(A,B){actuate.widget.form.ComboBox.superclass._onResize.apply(this,arguments);if(this.list&&this.listWidth===undefined){var C=Math.max(A,this.minListWidth);if(this.viewWidth&&this.viewWidth>C){this.list.setWidth(this.viewWidth);this.innerList.setWidth(this.viewWidth-this.list.getFrameWidth("lr"));}else{this.list.setWidth(C);this.innerList.setWidth(C-this.list.getFrameWidth("lr"));}}},_onEnable:function(){actuate.widget.form.ComboBox.superclass._onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false;}},_onDisable:function(){actuate.widget.form.ComboBox.superclass._onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true;}},setEditable:function(A){if(A==this.editable){return ;}this.editable=A;if(!A){this._ele.dom.setAttribute("readOnly",true);this._ele.addClass("actuate-combo-noedit");}else{this._ele.dom.removeAttribute("readOnly");this._ele.removeClass("actuate-combo-noedit");}},_onBeforeLoad:function(){if(!this.hasFocus){return ;}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this._restrictHeight();this.selectedIndex=-1;},_onLoad:function(){if(!this.hasFocus){return ;}if(this.store.getCount()>0){this.expand();this._restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable&&this.selectOnFocus){this._ele.dom.select();}if(!this.selectByValue(this.value,true)){this.select(this.defaultIndex?this.defaultIndex:0,true);}}else{this._selectNext();if(this.typeAhead&&this.lastKey!=actuate.widget.EventObject.BACKSPACE&&this.lastKey!=actuate.widget.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay);}}}else{this._onEmptyResults();}},_onTypeAhead:function(){if(this.store.getCount()>0){var B=this.store.getAt(0);var C=B.data[this.displayField];var A=C.length;var D=this.getRawValue().length;if(D!=A){this.setRawValue(C);this.selectText(D,C.length);}}},_onSelect:function(A,B){if(this.fireEvent("beforeselect",this,A,B)!==false){this.setValue(A.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,A,B);}},getValue:function(){if(this.valueField){return typeof this.value!="undefined"?this.value:"";}else{return actuate.widget.form.ComboBox.superclass.getValue.call(this);}},getInputValue:function(){return actuate.widget.form.ComboBox.superclass.getValue.call(this);},clearValue:function(){if(this.hiddenField){this.hiddenField.value="";}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value="";},setValue:function(B){var D=false;var E=B;if(this.valueField){var C=this._findRecord(this.valueField,B,this._ignoreCase);if(C){E=this.__getDisplayValue(B);D=true;var A=this.store.indexOf(C);if(A>=0){this.selectedIndex=A;}}else{if(this.valueNotFoundText!==undefined){E=this.valueNotFoundText;}}}this.lastSelectionText=E;if(this.hiddenField){this.hiddenField.value=B;}actuate.widget.form.ComboBox.superclass.setValue.call(this,E);this.value=B;return D;},__getDisplayValue:function(B){var A=this._findRecord(this.valueField,B,this._ignoreCase);var C=B;if(A){C=A.data[this.displayField];}return C;},findRecord:function(B,A){return this._findRecord(this.valueField,B,A);},_findRecord:function(E,D,B){var A;if(this.store&&this.store.getCount()>0){var C=this;this.store.each(function(F){if(C._isSameValue(F.data[E],D,B)){A=F;return false;}});}return A;},_isSameValue:function(C,A,B){var E=C;var D=A;if(B){E=E&&E.toLowerCase?E.toLowerCase():E;D=D&&D.toLowerCase?D.toLowerCase():D;}if(E!=null&&D!=null){return E==D;}else{return E===D;}},_onViewClick:function(B){var A=this.view.getSelectedIndexes()[0];var C=this.store.getAt(A);if(C){this._onSelect(C,A);}if(B!==false){this._ele.focus();}},_restrictHeight:function(){this.innerList.dom.style.height="";var B=this.innerList.dom;var E=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight;var C=Math.max(B.clientHeight,B.offsetHeight,B.scrollHeight);var A=this.getPosition()[1]-actuate.widget.Element.getBody().getScroll().top;var F=actuate.widget.lib.Dom.getViewHeight()-A-this.getSize().height;var D=Math.max(A,F,this.minHeight||0)-this.list.shadowOffset-E-5;C=Math.min(C,D,this.maxHeight);this.innerList.setHeight(C);this.list.beginUpdate();this.list.setHeight(C+E);this.list.alignTo(this._wrap,this.listAlign);this.list.endUpdate();},getView:function(){return this.view;},_onEmptyResults:function(){this.collapse();},isExpanded:function(){return this.list&&this.list.isVisible();},selectByValue:function(A,C){if(A!==undefined&&A!==null){var B=this._findRecord(this.valueField||this.displayField,A,this._ignoreCase);if(B){this.select(this.store.indexOf(B),C);return true;}}return false;},select:function(A,C){this.selectedIndex=A;if(this.view){this.view.select(A);if(C!==false){var B=this.view.getNode(A);if(B){this.innerList.scrollChildIntoView(B,false);}}}},_selectNext:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0);}else{if(this.selectedIndex<A-1){this.select(this.selectedIndex+1);}}}},_selectPrev:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0);}else{if(this.selectedIndex!=0){this.select(this.selectedIndex-1);}}}},_onKeyUp:function(A){if(this.editable!==false&&!A.isSpecialKey()){this.lastKey=A.getKey();this.dqTask.delay(this.queryDelay);this.fireEvent("keyup",this,A);}},_onKeyDown:function(A){if(this.editable===false){if(A.BACKSPACE===A.getKey()){if(A.preventDefault){A.preventDefault();}}}if(this._preventEnterKey&&A&&A.ENTER===A.getKey()){A.stopEvent();}},_validateBlur:function(){return !this.list||!this.list.isVisible();},initQuery:function(){this.doQuery(this.getRawValue());},_enableEnterKey:function(){this._preventEnterKey=false;},doForce:function(){var A=this.getValueAt(0,this.displayField);if(A!=null&&this._ele.dom.value==A){this.value=this.getValueAt(0);}this.doQuery(this.allQuery,true);this.setValue(this.value);},doQuery:function(D,C){if(!this.store){return false;}if(D===undefined||D===null){D="";}var B={query:D,forceAll:C,combo:this,cancel:false};if(this.fireEvent("beforequery",B)===false||B.cancel){return false;}D=B.query;C=B.forceAll;if(C===true||(D.length>=this.minChars)){if(this.lastQuery!==D){var A=true;if(!this.lastQuery){A=false;}this.lastQuery=D;if(this.mode=="local"){this.selectedIndex=-1;if(C){if(A==true){this.store.clearFilter();}}else{this.store.filter(this.displayField,D,this.anyMatch);}this._onLoad();}else{this.store.baseParams[this.queryParam]=D;this.store.load({params:this.getParams(D)});this.expand();}}else{this.selectedIndex=-1;this._onLoad();}}},getParams:function(A){var B={};if(this.pageSize){B.start=0;B.limit=this.pageSize;}return B;},collapse:function(){if(!this.isExpanded()){return ;}this.list.hide();actuate.widget.Element.getDoc().un("mousewheel",this.collapseIf,this);actuate.widget.Element.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this);this._preventEnterKey=true;this.enterKeyTask.delay(100);},collapseIf:function(A){if(!A.within(this._wrap)&&!A.within(this.list)){this.collapse();}},expand:function(){if(this.isExpanded()||!this.hasFocus){return ;}this.list.alignTo(this._wrap,this.listAlign);this.list.show();this.innerList.setOverflow("auto");actuate.widget.Element.getDoc().on("mousewheel",this.collapseIf,this);actuate.widget.Element.getDoc().on("mousedown",this.collapseIf,this);this.fireEvent("expand",this);},_onTriggerClick:function(){if(this.disabled){return ;}if(this.isExpanded()){this.collapse();this._ele.focus();}else{this._onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true);}else{this.doQuery(this.getRawValue());}this._ele.focus();}},setStore:function(A){A=this._parseStore(A);this.bindStore(A,false);},_parseStore:function(A){if(!A){A=[];}if(actuate.util.Utility.isArray(A)){this.valueField="value";if(A.length>0&&A[0].length>1){A=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:A});this.displayField="text";}else{A=new actuate.widget.data.SimpleStore({"id":0,fields:["value"],data:A});this.displayField="value";}if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}}else{if(this.initialConfig){if(this.initialConfig.valueField){this.valueField=this.initialConfig.valueField;}if(this.initialConfig.displayField){this.displayField=this.initialConfig.displayField;}this.titleField=this.initialConfig.titleField;}}return A;},setSelectedIndex:function(B,C){if(!this.rendered){this.selectedIndex=B;}else{this.select(B,C);}if(this.store){var A=this.store.data.itemAt(B);if(A){this.setValue(A.data[this.valueField||this.displayField]);}else{this.setValue("");}}},add:function(A,B){this.store.add([this._makeRecord(A)]);},_makeRecord:function(B){var A=B;if(typeof (A)=="string"){A=[A,A];}if(!A.data&&actuate.util.Utility.isArray(A)){var C={};C[this.valueField]=A[0];if(this.displayField){C[this.displayField]=(A.length>1?A[1]:A[0]);}A=new this.store.recordType(C);}return A;},getSelectedIndex:function(){return this.selectedIndex;},clear:function(){if(this.store){this.store.removeAll();}this.clearValue();},getLength:function(){if(this.store){return this.store.getCount();}else{return 0;}},getValueAt:function(C,B){if(this.store){var A=this.store.data.itemAt(C);if(A){if(!B){B=this.valueField||this.displayField;}return A.data[B];}}return null;},contains:function(B,A){return this._findRecord(B,A,this._ignoreCase)?true:false;},_afterRender:function(){actuate.widget.form.ComboBox.superclass._afterRender.call(this);if(!this.editable){this.editable=true;this.setEditable(false);}},setIngoreCase:function(A){this._ignoreCase=A;}});actuate.widget.Component.prototype.registerType("combo",actuate.widget.form.ComboBox);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.ListBox=actuate.Class.extendClass(actuate.widget.BoxComponent,{enableKeyEvents:false,mode:"local",defaultAutoCreate:{tag:"div",cls:"actuate-list"},multiSelect:false,listClass:"",selectedClass:"actuate-list-selected",overClass:"actuate-list-over",listAlign:"tl-bl?",lazyInit:true,valueField:"value",displayField:"text",titleField:"value",defaultSelectedIndex:-1,initialize:function(B){this._onBeforeLoad_c=actuate.Method.bind(this._onBeforeLoad,this);this._onLoad_c=actuate.Method.bind(this._onLoad,this);actuate.widget.form.ListBox.superclass.initialize.call(this,B);this._values=null;if(this.transform){this.allowDomMove=false;var D=actuate.widget.Element.getDom(this.transform);if(!this.hiddenName){this.hiddenName=D.name;}if(!this.store){var H=[],E=D.options;for(var C=0,A=E.length;C<A;C++){var G=E[C];var F=(actuate.util.Utility.isIE?G.getAttributeNode("value").specified:G.hasAttribute("value"))?G.value:G.text;if(G.selected){this._selectedIndexes.push(C);}H.push([F,G.text]);}this.store=H;}D.name=actuate.widget.Element._getID();this.target=true;this._ele=actuate.widget.DomHelper.insertBefore(D,this.autoCreate||this.defaultAutoCreate);actuate.widget.DomHelper.removeNode(D);this.render(this._ele.parentNode);}else{if(actuate.util.Utility.isArray(this.store)){if(actuate.util.Utility.isArray(this.store[0])){this.store=new actuate.widget.data.SimpleStore({fields:["value","text"],data:this.store});this.displayField="text";}else{this.store=new actuate.widget.data.SimpleStore({fields:["value"],data:this.store,expandData:true});this.displayField="value";}this.valueField="value";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}this.mode="local";}else{if(!this.store){this.store=new actuate.widget.data.SimpleStore({fields:["value"]});this.valueField="value";this.displayField="value";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}this.mode="local";}}}this.selectedIndex=-1;if(this.mode=="local"){if(this.initialConfig.queryDelay===undefined){this.queryDelay=10;}if(this.initialConfig.minChars===undefined){this.minChars=0;}}},_onKeyUp:function(A){this.fireEvent("keyup",this,A);},_onKeyDown:function(A){this.fireEvent("keydown",this,A);},_onKeyPress:function(A){this.fireEvent("keypress",this,A);},_onRender:function(C,A){actuate.widget.form.ListBox.superclass._onRender.call(this,C,A);var B={};actuate.Class.extend(B,this.defaultAutoCreate);if(!this._ele){if(!B.name){B.name=this.name||this.id;}this._ele=C.createChild(B,A);}this._ele.dom.setAttribute("tabIndex",this.tabIndex||0);this._ele.addClass([this.fieldClass,this.cls]);if(!this.width){this.width=100;}if(actuate.util.Utility.isIE){this.width+=2;}this._innerEl=this._ele;this._initList(B);this._initEvents();},setTemplate:function(A){if(!A){A=this._createDefaultTemplate();}else{this._isDefaultTemplate=false;}this.tpl=A;if(this.view){this.view.setTemplate(A);}},_createDefaultTemplate:function(){this._isDefaultTemplate=true;if(!this.titleField){return'<tpl for="."><div class="'+this._defaultCls+'-item">{'+this.displayField+"}</div></tpl>";}else{return'<tpl for="."><div title="{'+this.titleField+'}" class="'+this._defaultCls+'-item">{'+this.displayField+"}</div></tpl>";}},_initList:function(B){var A=B.cls;this._innerEl.swallowEvent("mousewheel");this.assetHeight=0;this._defaultCls=A;if(this.title){this.header=this._ele.createChild({cls:A+"-hd",html:this.title});this.assetHeight+=this.header.getHeight();}this.innerList=this._innerEl.createChild({cls:A+"-inner"});this.innerList.setWidth(this._ele.getWidth()-this._ele.getPadding("lr"));if(!this.tpl){this.tpl=this._createDefaultTemplate();}this.view=new actuate.widget.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,multiSelect:this.multiSelect?true:false,selectedClass:this.selectedClass,overClass:this.overClass,itemSelector:this.itemSelector||"."+A+"-item",displayField:this.displayField});if(!this.store){this.store=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:[]});}this.bindStore(this.store,true);if(this.defaultSelectedIndex>=0){this.view.select(this.defaultSelectedIndex,true,true);}},_updateSelection:function(){this._values=null;this._selectedIndexes=this.view.getSelectedIndexes();},doQuery:function(C,B){if(C===undefined||C===null){C="";}var A={query:C,forceAll:B,combo:this,cancel:false};if(this.fireEvent("beforequery",A)===false||A.cancel){return false;}C=A.query;B=A.forceAll;if(B===true||(C.length>=this.minChars)){if(this.lastQuery!==C){this.lastQuery=C;if(this.mode=="local"){this.selectedIndex=-1;if(B){this.store.clearFilter();}else{this.store.filter(this.displayField,C);}this._onLoad();}else{this.store.baseParams[this.queryParam]=C;this.store.load({params:this.getParams(C)});this.expand();}}else{this.selectedIndex=-1;this._onLoad();}}},getStore:function(){return this.store;},bindStore:function(A,B){if(this.view){this.view.setFields(this.valueField,this.displayField,this.titleField);}if(A&&this._isDefaultTemplate){this.setTemplate();}if(this.store&&!B){this.store.un("beforeload",this._onBeforeLoad_c);this.store.un("load",this._onLoad_c);if(!A){this.store=null;if(this.view){this.view.setStore(null);}}}this.selectedIndex=-1;this.selectedIndexes=[];if(A){if(actuate.util.Utility.isArray(A)){this.store=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:A});this.valueField="value";this.displayField="text";if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}if(this.view){this.view.setFields(this.valueField,this.displayField,this.titleField);}}else{this.store=A;}this.store.on("beforeload",this._onBeforeLoad_c);this.store.on("load",this._onLoad_c);if(this.view){this.view.setStore(this.store);}}this.setValues(this._values?this._values:undefined);},_initEvents:function(){if(!this.keyNav){this.keyNav=new actuate.widget.KeyNav(this._ele,{"up":function(A){this._selectPrev((A.shiftKey&&this.multiSelect)?true:false);},"down":function(A){this._selectNext((A.shiftKey&&this.multiSelect)?true:false);},scope:this,forceKeyDown:true});}if(this.enableKeyEvents){this._ele._addListener("keyup",this._onKeyUp,this);this._ele._addListener("keydown",this._onKeyDown,this);this._ele._addListener("keypress",this._onKeyPress,this);}this.view.registerEventHandler("beforeclick",actuate.Method.bind(this._onViewBeforeClick,this));this.view.registerEventHandler("beforeselect",actuate.Method.bind(this._onViewBeforeSelect,this));this.view.registerEventHandler("selectionchange",actuate.Method.bind(this._onViewSelectionChange,this));this.view.registerEventHandler("click",actuate.Method.bind(this._onClick,this));this.view.registerEventHandler("dblclick",actuate.Method.bind(this._onDblClick,this));},_onClick:function(B,A,C,D){this.fireEvent("click",this,A,this.store.getAt(A),D);},_onDblClick:function(B,A,C,D){this.fireEvent("dblclick",this,A,this.store.getAt(A),D);},_onDestroy:function(){if(this.view){actuate.widget.Element.destroy(this.view);}if(this._ele){actuate.widget.Element.destroy(this._ele);}this.bindStore(null);actuate.widget.form.ListBox.superclass._onDestroy.call(this);},_fireKey:function(A){if(A.isNavKeyPress()){this.fireEvent("specialkey",this,A);}},_onResize:function(A,B){actuate.widget.form.ListBox.superclass._onResize.apply(this,arguments);if(this._ele&&this._eleWidth===undefined){var C=A;this._ele.setWidth(C+this._ele.getBorderWidth("lr")+this._ele.getPadding("lr"));this.innerList.setWidth(C-this._ele.getPadding("lr"));}},_onEnable:function(){actuate.widget.form.ListBox.superclass._onEnable.apply(this,arguments);},_onDisable:function(){actuate.widget.form.ListBox.superclass._onDisable.apply(this,arguments);},_onLoad:function(){if(!this.hasFocus){return ;}if(this.store.getCount()>0){this._restrictHeight();this._select(0,true);}else{this._onEmptyResults();}},_onViewBeforeSelect:function(A,B,C,D){return this.fireEvent("beforeselect",this,B,C,D);},_onViewBeforeClick:function(A,C,B,D){return this.fireEvent("beforeclick",this,C,B,D);},_onSelect:function(A,B){if(this.fireEvent("beforeselect",this,A,B)!==false){this._selectedIndexes=B;this._values=null;this.fireEvent("select",this,A,B);}},getSelectedValues:function(C){if(!this._values){if(!C){C=this.valueField;}var B=this.store.data.items;var A=[];for(var D=0;D<this._selectedIndexes.length;D++){A.push(B[this._selectedIndexes[D]].data[C]);}this._values=A;}if(this._values.length==0){return ;}return this._values;},getSelectedTexts:function(C){if(!C){C=this.valueField;}var B=this.store.data.items;var A=[];for(var D=0;D<this._selectedIndexes.length;D++){A.push(B[this._selectedIndexes[D]].data[C]);}return A;},getSelectedValue:function(B){var A=this.getSelectedValues();if(A&&A.length>0){return A[0];}return null;},getSelectedRecords:function(D){var B=this.store.data.items;var A=[];if(D){for(var C=0;C<this._selectedIndexes.length;C++){A.push(B[this._selectedIndexes[C]]);}}else{for(var C=0;C<this._selectedIndexes.length;C++){A.push(B[this._selectedIndexes[C]].data);}}return A;},getSelectedRecord:function(B){var A=this.getSelectedRecords(B);if(A&&A.length>0){return A[0];}return null;},clear:function(){if(this.store){this.store.removeAll();}},getLength:function(){if(this.store){return this.store.getCount();}else{return 0;}},getValueAt:function(C,B){if(this.store){var A=this.store.data.itemAt(C);if(A){if(!B){B=this.valueField||this.displayField;}return A.data[B];}}return null;},contains:function(B,A){return this._findRecord(B,A)?true:false;},setStore:function(A){if(!A){A=[];}if(actuate.util.Utility.isArray(A)){this.valueField="value";if(A.length>0&&A[0].length>1){A=new actuate.widget.data.SimpleStore({"id":0,fields:["value","text"],data:A});this.displayField="text";}else{A=new actuate.widget.data.SimpleStore({"id":0,fields:["value"],data:A});this.displayField="value";}if(this.titleField!=this.displayField&&this.titleField!=this.valueField){this.titleField=null;}}else{if(this.initialConfig){if(this.initialConfig.valueField){this.valueField=this.initialConfig.valueField;}if(this.initialConfig.displayField){this.displayField=this.initialConfig.displayField;}this.titleField=this.initialConfig.titleField;}}this.bindStore(A,false);},clearValue:function(){this.setRawValue("");this.applyEmptyText();this._values=[];},setValues:function(A){if(A&&(typeof (A)=="string"||!actuate.util.Utility.isArray(A))){A=[A];}if(A===null){this._values=[null];}else{this._values=A||[];}this._selectedIndexes=[];this.view.clearSelections(true,false);for(var C=0;C<this._values.length;C++){var B=this._findRecordIndex(this._values[C]);if(B!=null){this.view.select(B,true,true);this._selectedIndexes.push(B);}}var D=this.view.getNode(this._selectedIndexes[0]);if(D){var E=this._ele||this._scrollEl;E.scrollChildIntoView(D,false);}},setSelectedValue:function(A){this.setValues(A);},getSelectedIndex:function(){if(this._selectedIndexes&&this._selectedIndexes.length>0){return this._selectedIndexes[0];}else{if(this.defaultSelectedIndex>-1){return this.defaultSelectedIndex;}else{return -1;}}},getSelectedIndexes:function(){return this._selectedIndexes||[];},setSelectedIndex:function(A,B){if(typeof (A)!="undefined"&&A>=0&&A<this.store.getCount()){this.setSelectedIndexes([A],B);}else{this.setSelectedIndexes([],B);}},setSelectedIndexes:function(B,E){if(this.view){this.view.clearSelections(true,false);}if(!B){B=[];}else{if(!actuate.util.Utility.isArray(B)){B=[B];}}if(!this.multiSelect&&B.length>1){B=[B[0]];}this._selectedIndexes=B;this._values=[];for(var C=0;C<B.length;C++){var A=B[C];if(A>=0&&A<this.store.getCount()){this.view.select(A,true,true);this._values.push(this.store.getAt(A).data[this.valueField]);}}if(E!==false){var D=this.view.getNode(B[0]);if(D){this._ele.scrollChildIntoView(D,false);}}},selectAll:function(){if(!this.multiSelect){return ;}this._selectedIndexes=[];this._values=[];for(var A=0;A<this.store.getCount();A++){this._selectedIndexes.push(A);this._values.push(this.store.getAt(A).data[this.valueField]);this.view.select(A,true,true);}},add:function(A,B){this.store.add([this._makeRecord(A)]);},insertAt:function(C,A){var B=[this._makeRecord(A)];this.store.insert(C,B);},remove:function(B,C){var A;if(typeof (B)=="number"){A=this.store.getAt(B);}else{A=this._findRecord(B);}if(A){this.store.remove(A);}},refresh:function(){this.view.refresh();this._updateSelection();},_findRecord:function(B,C){if(!C){C=this.valueField;}var A;if(this.store.getCount()>0){this.store.each(function(D){if(D.data[C]==B){A=D;return false;}});}return A;},_findRecordIndex:function(E,C){var A=null;if(this.store){if(!C){C=this.valueField;}var B=this.store.data.items;for(var D=0;D<B.length;D++){if(B[D].data[C]==E){return D;}}}return A;},_onViewSelectionChange:function(C){var A=this.view.getSelectedIndexes();var D=[];for(var B=0;B<A.length;B++){D.push(this.store.data.items[A[B]]);}this._onSelect(D,A);if(C!==false){this._ele.focus();}},_restrictHeight:function(){this.innerList.dom.style.height="";var B=this.innerList.dom;var E=this._ele.getFrameWidth("tb")+this.assetHeight;var C=Math.max(B.clientHeight,B.offsetHeight,B.scrollHeight);var A=this.getPosition()[1]-actuate.widget.Element.getBody().getScroll().top;var F=actuate.widget.lib.Dom.getViewHeight()-A-this.getSize().height;var D=Math.max(A,F,this.height)-this._ele.shadowOffset-E-5;C=Math.min(C,D,this.height);this.innerList.setHeight(C);this._ele.beginUpdate();this._ele.setHeight(C+E);this._ele.alignTo(this._wrap,this._eleAlign);this._ele.endUpdate();},_onEmptyResults:function(){},_select:function(A,D,C){this.view.select(A,C);if(D!==false){var B=this.view.getNode(A);if(B){this._ele.scrollChildIntoView(B,false);}}},_selectNext:function(B){var A=this.store.getCount();if(A>0){if(this._selectedIndexes.length==0){this._select(0,true,B);}else{if(this._selectedIndexes[0]<A-1){this._select(this._selectedIndexes[0]+1,true,B);}}}},_selectPrev:function(B){var A=this.store.getCount();if(A>0){if(this._selectedIndexes.length==0){this._select(0,true,B);}else{if(this._selectedIndexes[0]!=0){this._select(this._selectedIndexes[0]-1,true,B);}}}},_validateBlur:function(){return !this._ele;},isSelected:function(A){return this.view.isSelected(A);},modify:function(C,B,E){if(C>=0&&C<this.store.getCount()){B=this._makeRecord(B);E=E||typeof (E)=="undefined";var D=this.view.isSelected(C);var A=this.store.getAt(C);this.store.remove(A);this.store.insert(C,B);if(D){this.view.select(C,true);}}},_makeRecord:function(B){var A=B;if(typeof (A)=="string"){A=[A,A];}if(!A.data&&actuate.util.Utility.isArray(A)){var C={};C[this.valueField]=A[0];if(this.displayField){C[this.displayField]=(A.length>1?A[1]:A[0]);}A=new this.store.recordType(C);}return A;},swap:function(G,F,E){if(G>=0&&F>=0&&G<=this.store.getCount()&&F<=this.store.getCount()&&G!=F){E=E||typeof (E)=="undefined";var D=this.view.isSelected(G);var C=this.view.isSelected(F);if(E&&D!=C){if(D){this.view.deselect(G,true);}else{this.view.deselect(F,true);}}var B=this.store.data.items;var A=B[G];B[G]=B[F];B[F]=A;if(E){this.view.refreshNode(G);this.view.refreshNode(F);}if(E&&D!=C){if(D){this.view.select(F,true);}else{this.view.select(G,true);}this._updateSelection();}}},indexOfValue:function(A){if(!this.store){return -1;}return this._findRecordIndex(A);},setMultiSelect:function(A){if(this.multiSelect!=A){this.multiSelect=A;this.view.multiSelect=A;this._updateSelection();}}});actuate.widget.Component.prototype.registerType("listbox",actuate.widget.form.ListBox);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.Checkbox=actuate.Class.create();actuate.widget.form.Checkbox.superclass=actuate.widget.form.Field.prototype;actuate.widget.form.Checkbox.prototype=actuate.Class.extend(new actuate.widget.form.Field(),{_baseCls:"actuate-form-check",tabIndex:0,checked:false,defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},initialize:function(A){actuate.widget.form.Checkbox.superclass.initialize.call(this,A);this.checkedCls=this._baseCls+"-checked";this.focusCls=this._baseCls+"-focus";this.overCls=this._baseCls+"-over";this.mouseDownCls=this._baseCls+"-down";},_initEvents:function(){actuate.widget.form.Checkbox.superclass._initEvents.call(this);var A=this.imageEl;this._ele.removeAllListeners();this._ele._addListener("click",this._onClick,this);this._ele._addListener("keyup",this._onKeyUp,this);this._ele.addClassOnOver(this.overCls,function(B){if(A){A.addClass(B);}},function(B){if(A){A.removeClass(B);}});this._ele.addClassOnClick(this.mouseDownCls,function(B){if(A){A.addClass(B);}},function(B){if(A){A.removeClass(B);}});},_onRender:function(B,A){this.defaultAutoCreate.id=this.id;this.defaultAutoCreate.value=this.valueText;actuate.widget.form.Checkbox.superclass._onRender.call(this,B,A);this.addClass("actuate-hidden");this._inputEl=this._ele;this._ele=this._inputEl.wrap({tabIndex:this.tabIndex,cls:this._baseCls+"-wrap"});this.imageEl=this._ele.createChild({tag:"img",src:actuate.widget.BLANK_IMAGE_URL,cls:this._baseCls},this._inputEl);if(this.boxLabel){this.labelEl=this._ele.createChild({tag:"label",htmlFor:B.dom.id,cls:"actuate-form-cb-label",html:this.boxLabel});}if(this.checked==undefined){this.checked=this._inputEl.dom.checked;}this.setValue(this.checked,true);this.originalValue=this.checked;},_afterRender:function(){actuate.widget.form.Checkbox.superclass._afterRender.call(this);this._ele[this.checked?"addClass":"removeClass"](this.checkedCls);if(this.disabled==true){this._onDisable();}},_onDestroy:function(){if(this.rendered){actuate.widget.Element.destroy(this.imageEl,this.labelEl);}actuate.widget.form.Checkbox.superclass._onDestroy.call(this);},_onFocus:function(A){actuate.widget.form.Checkbox.superclass._onFocus.call(this,A);this._ele.addClass(this.focusCls);},_onBlur:function(A){actuate.widget.form.Checkbox.superclass._onBlur.call(this,A);this._ele.removeClass(this.focusCls);},_onResize:function(){actuate.widget.form.Checkbox.superclass._onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this._ele.alignTo(this._ele,"c-c");}},_onKeyUp:function(A){if(A.getKey()==actuate.widget.EventObject.SPACE){this._onClick(A);}},_onClick:function(A){if(!this.disabled&&!this.readOnly){this.toggleValue();}},toggleValue:function(){this.setValue(!this.checked);},getResizeEl:function(){if(!this.resizeEl){this.resizeEl=actuate.util.Utility.isSafari?this._ele:(this._ele.up(".actuate-form-element",5)||this._ele);}return this.resizeEl;},getValue:function(){if(this.rendered){return this._inputEl.dom.checked;}return this.checked;},setValue:function(B,A){var C=this.checked;this.checked=(B==true||String(B).toLowerCase()=="true"||B=="1"||String(B).toLowerCase()=="on");if(this.rendered){this._inputEl.dom.checked=this.checked;this._inputEl.dom.defaultChecked=this.checked;this._ele[this.checked?"addClass":"removeClass"](this.checkedCls);}if(!A&&C!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked);}}},getValueText:function(){return this.valueText;},_onShow:function(){if(this._ele){this._ele.dom.style.display="";this._ele.dom.style.visibility="visible";}this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="";}},_onHide:function(){if(this._ele){this._ele.dom.style.display="none";}this._label=this.container.dom.previousSibling;if(this._label&&this._label.nodeName.toLowerCase()=="label"){this._label.style.display="none";}}});actuate.widget.Component.prototype.registerType("checkbox",actuate.widget.form.Checkbox);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.Radio=actuate.Class.create();actuate.widget.form.Radio.superclass=actuate.widget.form.Checkbox.prototype;actuate.widget.form.Radio.prototype=actuate.Class.extend(new actuate.widget.form.Checkbox(),{inputType:"radio",_baseCls:"actuate-form-radio",toggleValue:function(){if(!this.checked){this.setValue(true);}},_getParent:function(A,C){var B;if(A&&this._ele){B=this._ele.up(A,C);}if(B){return B;}else{if(C>0){return null;}else{return this._ele?this._ele.getBody():null;}}},setValue:function(B,A){var D=this.checked;actuate.widget.form.Radio.superclass.setValue.call(this,B,A);if(B&&B!=D){var E=this._getParent("form");if(!E){return ;}var C=E.select("input");if(C&&C.each){C.each(function(H){var F=H.dom.name;var I=H.dom.id;if(F==this.name&&I!=this.id){var G=actuate.widget.ComponentMgr.get(I);if(G&&G.setValue){G.setValue(false,true);}}},this);}}},getGroupValue:function(){var D=this._getParent("form").select("input");if(D&&D.elements){var E=D.elements;for(var C=0;C<E.length;C++){var B=E[C].name;var F=E[C].id;if(B==this.name&&F){var A=actuate.widget.ComponentMgr.get(F);if(A&&A.getValue()){return A.getValueText();}}}}return null;}});actuate.widget.Component.prototype.registerType("radio",actuate.widget.form.Radio);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.Slider=actuate.Class.create();actuate.widget.form.Slider.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.form.Slider.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{vertical:false,minValue:0,maxValue:100,value:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:false,dragging:false,showValue:false,displayTexts:null,tickMarksCount:null,showTickMarks:false,initialize:function(A){actuate.widget.form.Slider.superclass.initialize.call(this,A);if(this.value===undefined){this.value=this.minValue;}this.keyIncrement=Math.max(this.increment,this.keyIncrement);if(this.vertical){this._extendVertical();}},_extendVertical:function(){actuate.Class.extend(this,new actuate.widget.form.Slider.Vertical());},_createEl:function(){return{cls:"actuate-slider "+(this.vertical?"actuate-slider-vert":"actuate-slider-horz"),cn:{cls:"actuate-slider-end",cn:{cls:"actuate-slider-inner",cn:[{tag:"a",cls:"actuate-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"},{cls:"actuate-slider-thumb"}]}}};},_onRender:function(A){this.autoEl=this._createEl();actuate.widget.form.Slider.superclass._onRender.apply(this,arguments);this.endEl=this._ele.first();this.innerEl=this.endEl.first();this.focusEl=this.innerEl.first();this.thumb=this.focusEl.next();this.halfThumb=(this.vertical?this.thumb.getHeight():this.thumb.getWidth())/2;this._endSize=(this._ele.getPadding(this.vertical?"t":"l")+this.endEl.getPadding(this.vertical?"b":"r"));if(this.showValue){this.valueBox=this._createValueBox(A);}this._renderTickMarks();this._initEvents();},_createValueBox:function(A){var B=new actuate.widget.tips.Tip({width:"auto",shadow:false,floating:{shadow:false,shim:false,useDisplay:true,constrain:true},baseCls:"actuate-slider-value"});B.render(A.parent());return B;},_initEvents:function(){this.thumb.addClassOnOver("actuate-slider-thumb-over");this._mon(this._ele,"mousedown",this._onMouseDown,this);this._mon(this._ele,"keydown",this._onKeyDown,this);this._mon(this._ele,"mousewheel",this._onMouseWheel,this);this.focusEl.swallowEvent("click",true);this.tracker=new actuate.widget.dd.DragTracker({_onBeforeStart:actuate.Method.createDelegate(this._onBeforeDragStart,this),_onStart:actuate.Method.createDelegate(this._onDragStart,this,[this.thumb],true),_onDrag:actuate.Method.createDelegate(this._onDrag,this),_onEnd:actuate.Method.createDelegate(this._onDragEnd,this,[this.thumb],true),tolerance:3,autoStart:300});this.tracker._initEl(this.thumb);this.registerEventHandler("beforedestroy",actuate.Method.bind(this.tracker.destroy,this.tracker));if(this.valueBox){this.registerEventHandler("beforedestroy",actuate.Method.bind(this.valueBox.destroy,this.valueBox));}},_onMouseWheel:function(B){B.stopEvent();var C=B.getWheelDelta();var A=this.increment||1;this.setValue(this.value+A*C);},_onMouseDown:function(B){if(this.disabled){return ;}if(this.clickToChange&&B.target!=this.thumb.dom){var A=this.innerEl.translatePoints(B.getXY());this._onClickChange(A);}this.focus();},_onClickChange:function(A){if(A.top>this.clickRange[0]&&A.top<this.clickRange[1]){var B=this.reverseValue(A.left);if(B!=null){B=Math.round(B);}this.setValue(B,undefined,true);}},_onKeyDown:function(B){if(this.disabled){B.preventDefault();return ;}var A=B.getKey();switch(A){case B.UP:case B.RIGHT:B.stopEvent();if(B.ctrlKey){this.setValue(this.maxValue,undefined,true);}else{this.setValue(this.value+this.keyIncrement,undefined,true);}break;case B.DOWN:case B.LEFT:B.stopEvent();if(B.ctrlKey){this.setValue(this.minValue,undefined,true);}else{this.setValue(this.value-this.keyIncrement,undefined,true);}break;default:B.preventDefault();}},_doSnap:function(B){if(!this.increment||this.increment==1||!B){return B;}var D=B,C=this.increment;var A=(B-this.minValue)%C;if(A>0){if(A>(C/2)){D=B+(C-A);}else{D=B-A;}}return actuate.util.Utility.constrain(D,this.minValue,this.maxValue);},_afterRender:function(){actuate.widget.form.Slider.superclass._afterRender.apply(this,arguments);if(this.value){this.setValue(this.value,false);}},_getRatio:function(){if(this.maxValue!=null&&this.minValue!=null){var A=this.innerEl.getWidth()+this._endSize;var B=this.maxValue-this.minValue;return B==0?A:(A/B);}},_normalizeValue:function(A){if(actuate.util.Utility.isArray(A)){A=A.length>0?A[0]:null;}if(A!=null){if(typeof A!="number"){A=parseInt(A);}if(isNaN(A)){A=this.minValue;}if(A!=null){A=Math.round(A);}A=this._doSnap(A);A=actuate.util.Utility.constrain(A,this.minValue,this.maxValue);}return A;},setValue:function(C,B,A,D){C=this._normalizeValue(C);if((B||this.fireEvent("beforechange",this,C,this.value)!==false)){this.value=C;this.syncThumb();if(!B){this.fireEvent("change",this,C);if(D){this.fireEvent("changecomplete",this,C);}}}},setIncrement:function(A,B){this.increment=A;if(B){this.refresh();}},setMinValue:function(B,A){this.minValue=B;if(A){this.refresh();}},setMaxValue:function(B,A){this.maxValue=B;if(A){this.refresh();}},refresh:function(){var A=this.value;delete this.value;this.setValue(A,true);if(this.rendered&&this.showTickMarks){this._renderTickMarks();}},_translateValue:function(A){var B=this._getRatio();if(A!=null&&B!=null){return(A*B)-(this.minValue*B)-this.halfThumb;}},reverseValue:function(B){var A=this._getRatio();if(A){return(B+this.halfThumb+(this.minValue*A))/A;}},_moveThumb:function(C,B,A){if(B!=undefined&&B!=null){if(!A||this.animate===false){C.setLeft(B);}else{C.shift({left:B,stopFx:true,duration:0.35});}C.show();}else{C.hide();}this._showValueTip(C);},_showValueTip:function(A){this._updateValueBox(this.valueBox,this.value,A.getXY());},focus:function(){this.focusEl.focus(10);},_onBeforeDragStart:function(A){return !this.disabled;},_onDragStart:function(B,A){A.addClass("actuate-slider-thumb-drag");this.dragging=true;this.dragStartValue=this.value;this.fireEvent("dragstart",this,B);},_onDrag:function(B){var C=this.innerEl.translatePoints(this.tracker.getXY());var A=this.reverseValue(C.left-this.halfThumb);if(A){A=Math.round(A);}this.setValue(A,false,false);this.fireEvent("drag",this,B);},_onDragEnd:function(B,A){A.removeClass("actuate-slider-thumb-drag");this.dragging=false;this.fireEvent("dragend",this,B);this.fireEvent("changecomplete",this,this.value);},_onDisable:function(){actuate.widget.form.Slider.superclass._onDisable.call(this);this._disableThumb();},_onEnable:function(){actuate.widget.form.Slider.superclass._onEnable.call(this);this._enableThumb();},_disableThumb:function(){this.thumb.addClass(this.disabledClass);if(actuate.util.Utility.isIE){var A=this.thumb.getXY();this.thumb.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:"actuate-slider-thumb "+this.disabledClass});}this.thumbHolder.show().setXY(A);}},_enableThumb:function(){this.thumb.removeClass(this.disabledClass);if(actuate.util.Utility.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide();}this.thumb.show();this.syncThumb();}},_onResize:function(A,B){if(B>25){B=25;}if(!A){A=this._ele.getWidth();}this.innerEl.setWidth(A-(this._ele.getPadding("l")+this.endEl.getPadding("r")));this._ele.setHeight(B);this.syncThumb();this._renderTickMarks();},_updateValueBox:function(D,B,C){if(D){if(B!=null&&!isNaN(B)){if(this.displayTexts&&this.displayTexts[B]!=undefined){B=this.displayTexts[B];}if(D.value!=B){D.body.update("<span>"+B+"</span>");var A=D.adjustSizeToContent();if(A[0]==0){D.showAt([-1000,0]);A=D.adjustSizeToContent();}D.size=A;}C[0]-=D.size[0]/2-this.halfThumb;C[1]-=13;D.showAt(C);}D.value=B;}},syncThumb:function(){if(this.rendered){this._moveThumb(this.thumb,this._translateValue(this.value));}},getValue:function(){return this.value;},setTickMarksCount:function(A){if(A!=this.tickMarksCount){this.tickMarksCount=A;if(this.rendered){this._renderTickMarks();}}},setShowTickMarks:function(A){if(this.showTickMarks!==A){this.showTickMarks=A;if(this.rendered){this._renderTickMarks();}}},_getInnerSize:function(){return this.innerEl.getWidth()+this._endSize;},_renderTickMarks:function(){var D=this.vertical?"height":"width";var I;if(this.showTickMarks){if(this.tickMarksCount==null){I=(this.maxValue-this.minValue)/(this.increment||1);}else{I=this.tickMarksCount;}}else{I=0;}var G=false;if(!this.tickMarks){G=true;}else{if(this.tickMarks.dom.childNodes.length!=I+1){this.tickMarks.remove();this.tickMarks=null;G=true;}}if(I>0){var H=this._getInnerSize();var E=0;while(E<2){var E=(H/I-1);if(E<2){I=I/2;}I=Math.ceil(I);}if(G){this.tickMarks=this.innerEl.createChild({tag:"div",cls:"actuate-slider-tickmark-wrap"});for(var F=0;F<I+1;F++){this.tickMarks.createChild({tag:"div",cls:"actuate-slider-tickmark"});}}var A=this.tickMarks.dom.childNodes;A[0].style[D]="0px";var J=0;var K=0;var C=0;J++;for(var F=J;F<A.length;F++){K=C+1;C+=E+1;if(C>H){C=H;}var L=Math.round(C)-Math.round(K);A[F].style[D]=L+"px";}if(this.vertical){var B=A[1].style[D];A[1].style[D]=A[A.length-1].style[D];A[A.length-1].style[D]=B;}}}});actuate.widget.Component.prototype.registerType("slider",actuate.widget.form.Slider);actuate.widget.form.Slider.Vertical=actuate.Class.create();actuate.widget.form.Slider.Vertical.prototype={_onResize:function(A,B){if(A>25){A=25;}this.endEl.setWidth(A);this.innerEl.setHeight(B-(this._ele.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb();this._renderTickMarks();},_getRatio:function(){if(this.maxValue!=null&&this.minValue!=null){var B=this.innerEl.getHeight()+this._endSize;var A=this.maxValue-this.minValue;return B/A;}},_getInnerSize:function(){return this.innerEl.getHeight()+this._endSize;},_moveThumb:function(C,B,A){if(B!=undefined&&B!=null){if(!A||this.animate===false){C.setBottom(B);}else{C.shift({bottom:B,stopFx:true,duration:0.35});}C.show();}else{C.hide();}this._showValueTip(C);},_onDrag:function(D){var E=this.innerEl.translatePoints(this.tracker.getXY());var A=this.innerEl.getHeight()-E.top+15;var B=this._getRatio();var C=B!=null?this.minValue+Math.round(A/B):undefined;this.setValue(C,false,false);this.fireEvent("drag",this,D);},_onClickChange:function(B){if(B.left>this.clickRange[0]&&B.left<this.clickRange[1]){var A=this.innerEl.getHeight()-B.top;var C=this._getRatio();var D=C!=null?this.minValue+Math.round(A/C):undefined;this.setValue(D,undefined,true);}}};actuate.widget.form.VTypes=function(){var D=/^[a-zA-Z_]+$/;var E=/^[a-zA-Z0-9_]+$/;var B=/^([\w]+)(\.[\w]+)*@([\w\-]+\.){1,5}([A-Za-z]){2,4}$/;var A=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;var C=/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/;return{"email":function(F){return B.test(F);},"emailText":'This field should be an e-mail address in the format "user@domain.com"',"emailMask":/[a-z0-9_\.\-@]/i,"url":function(F){return A.test(F);},"urlText":'This field should be a URL in the format "http:/'+'/www.domain.com"',"alpha":function(F){return D.test(F);},"alphaText":"This field should only contain letters and _","alphaMask":/[a-z_]/i,"alphanum":function(F){return E.test(F);},"alphanumText":"This field should only contain letters, numbers and _","alphanumMask":/[a-z0-9_]/i,"hexText":"Invalid Hex code, eg: (#F0F0F0)","hex":function(F){return C.test(F);}};}();actuate.widget.form.DateField=actuate.Class.extendClass(actuate.widget.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"actuate-form-date-trigger",showToday:true,pickerConfig:null,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initialize:function(A){this._onMenuSelect_c=actuate.Method.bind(this._onMenuSelect,this);this._onMenuShow_c=actuate.Method.bind(this._onMenuShow,this);this._onMenuHide_c=actuate.Method.bind(this._onMenuHide,this);actuate.widget.form.DateField.superclass.initialize.apply(this,arguments);},_initComponent:function(){actuate.widget.form.DateField.superclass._initComponent.call(this);if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue);}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue);}this.disabledDatesRE=null;this._initDisabledDays();},_initDisabledDays:function(){if(this.disabledDates){var A=this.disabledDates;var C="(?:";for(var B=0;B<A.length;B++){C+=A[B];if(B!=A.length-1){C+="|";}}this.disabledDatesRE=new RegExp(C+")");}},setDisabledDates:function(A){this.disabledDates=A;this._initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE);}},setDisabledDays:function(A){this.disabledDays=A;if(this.menu){this.menu.picker.setDisabledDays(A);}},setMinValue:function(A){this.minValue=(typeof A=="string"?this.parseDate(A):A);if(this.menu){this.menu.picker.setMinDate(this.minValue);}},setMaxValue:function(A){this.maxValue=(typeof A=="string"?this.parseDate(A):A);if(this.menu){this.menu.picker.setMaxDate(this.maxValue);}},validateValue:function(E){E=this.formatDate(E);if(!actuate.widget.form.DateField.superclass.validateValue.call(this,E)){return false;}if(!E||E.length<1){return true;}var C=E;E=this.parseDate(E);if(!E){this.markInvalid(actuate.util.String.format(this.invalidText,C,this.format));return false;}var F=E.getTime();if(this.minValue&&F<this.minValue.getTime()){this.markInvalid(actuate.util.String.format(this.minText,this.formatDate(this.minValue)));return false;}if(this.maxValue&&F>this.maxValue.getTime()){this.markInvalid(actuate.util.String.format(this.maxText,this.formatDate(this.maxValue)));return false;}if(this.disabledDays){var A=E.getDay();for(var B=0;B<this.disabledDays.length;B++){if(A===this.disabledDays[B]){this.markInvalid(this.disabledDaysText);return false;}}}var D=this.formatDate(E);if(this.disabledDatesRE&&this.disabledDatesRE.test(D)){this.markInvalid(actuate.util.String.format(this.disabledDatesText,D));return false;}return true;},validateBlur:function(){return !this.menu||!this.menu.isVisible();},getValue:function(){return this.parseDate(this.value)||"";},setValue:function(C){var B=C;var D;if(C&&C.date){B=C.date;if(this.displayField){this[this.displayField]=C.text;}}if(!C){if(this.displayField){this[this.displayField]=undefined;}}if(this.displayField){D=this[this.displayField];}var A=this.formatDate(this.parseDate(B));this.value=A;if(this.rendered){this._ele.dom.value=D||((A===null||A===undefined?"":A));this.validate();}this.fireEvent("change",this,this.value);},parseDate:function(D){if(!D||actuate.util.Utility.isDate(D)){return D;}var B=actuate.util.Date.parseDate(D,this.format);if(!B&&this.altFormats){if(!this.altFormatsArray){this.altFormatsArray=this.altFormats.split("|");}for(var C=0,A=this.altFormatsArray.length;C<A&&!B;C++){B=actuate.util.Date.parseDate(D,this.altFormatsArray[C]);}}return B;},_onDestroy:function(){if(this.menu){this.menu.destroy();}if(this.wrap){this.wrap.remove();}actuate.widget.form.DateField.superclass._onDestroy.call(this);},formatDate:function(A){return actuate.util.Utility.isDate(A)?A.dateFormat(this.format):A;},_onTriggerClick:function(){if(this.disabled){return ;}if(this.menu==null){this.menu=new actuate.widget.menu.DateMenu();}actuate.Class.extend(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:actuate.util.String.format(this.minText,this.formatDate(this.minValue)),maxText:actuate.util.String.format(this.maxText,this.formatDate(this.maxValue))});if(this.pickerConfig){actuate.Class.extend(this.menu.picker,this.pickerConfig);}this.menu.on("select",this._onMenuSelect_c);this.menu.on("show",this._onMenuShow_c);this.menu.on("hide",this._onMenuHide_c);if((this.minValue||this.maxValue)&&!this.getValue()){this.menu.picker.setValue(this.minValue,true);}else{this.menu.picker.setValue(this.getValue()||new actuate.util.Date());}this.menu.show(this._ele,"tr-br?");},_onMenuSelect:function(A,B){this.setValue(B);this.fireEvent("select",this,B);},_onMenuShow:function(){this._onFocus();},_onMenuHide:function(){actuate.Method.defer(10,this.focus,this);var A=this.menuListeners;this.menu.un("select",this._onMenuSelect_c);this.menu.un("show",this._onMenuShow_c);this.menu.un("hide",this._onMenuHide_c);},_beforeBlur:function(){var A=this.getRawValue();if(!A){this.setValue("");return ;}A=this.parseDate(A);if(A){this.setValue(A);}},_onKeyDown:function(A){if(A.BACKSPACE===A.getKey()){if(A.preventDefault){A.preventDefault();}}},_onRender:function(B,A){actuate.widget.form.DateField.superclass._onRender.call(this,B,A);this._trigger.dom.qtip=actuate.util.Utility.getLocalizedString("DataField.Tooltip");}});actuate.widget.Component.prototype.registerType("datefield",actuate.widget.form.DateField);actuate.widget.form.TimeField=actuate.Class.extendClass(actuate.widget.form.ComboBox,{minValue:null,maxValue:null,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"G:i:s.u",altFormats:"g:iA|g:ia|g:i A|g:i a|h:i|g:i|H:i|gA|hA|ga|ha|h A|g A|h a|g a|gi|hi|giA|hiA|gia|hia|g|H",increment:15,mode:"local",triggerAction:"all",typeAhead:false,_initDate:"1/1/2008",_initComponent:function(){actuate.widget.form.TimeField.superclass._initComponent.call(this);if(typeof this.minValue=="string"){this.minValue=this.parseDate(this.minValue);}if(typeof this.maxValue=="string"){this.maxValue=this.parseDate(this.maxValue);}if(!this.store||(this.store.getTotalCount&&this.store.getTotalCount()<=0)){var B=this.parseDate(this.minValue);if(!B){B=new actuate.util.Date(this._initDate).clearTime();}var A=this.parseDate(this.maxValue);if(!A){A=new actuate.util.Date(this._initDate).clearTime().add("mi",(24*60)-1);}var C=[];while(B<=A){C.push([this.formatDate(B),B.dateFormat("g:i A")]);B=B.add("mi",this.increment);}this.setStore(C);}},getDate:function(){return this.parseDate(actuate.widget.form.TimeField.superclass.getValue.call(this));},getValue:function(){var A=actuate.widget.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(A))||"";},setValue:function(A){actuate.widget.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)));},validateValue:actuate.widget.form.DateField.prototype.validateValue,parseDate:actuate.widget.form.DateField.prototype.parseDate,formatDate:actuate.widget.form.DateField.prototype.formatDate,_beforeBlur:function(){var A=this.parseDate(this.getRawValue());if(A){this.setValue(A.dateFormat(this.format));}}});actuate.widget.Component.prototype.registerType("timefield",actuate.widget.form.TimeField);actuate.util.Package.define("actuate.widget");actuate.widget.SplitButton=actuate.Class.extendClass(actuate.widget.button.Button,{arrowSelector:"button:last",_initComponent:function(){actuate.widget.SplitButton.superclass._initComponent.call(this);},_onRender:function(D,A){var B=new actuate.widget.Template('<table cellspacing="0" class="actuate-widget-btn-menu-wrap actuate-widget-btn"><tr><td>','<table cellspacing="0" class="actuate-widget-btn-wrap actuate-widget-btn-menu-text-wrap"><tbody>','<tr><td class="actuate-widget-btn-left"><i>&#160;</i></td><td class="actuate-widget-btn-center"><button class="actuate-widget-btn-text" type="{1}">{0}</button></td></tr>',"</tbody></table></td><td>",'<table cellspacing="0" class="actuate-widget-btn-wrap actuate-widget-btn-menu-arrow-wrap"><tbody>','<tr><td class="actuate-widget-btn-center"><button class="actuate-widget-btn-menu-arrow-el" type="button">&#160;</button></td><td class="actuate-widget-btn-right"><i>&#160;</i></td></tr>',"</tbody></table></td></tr></table>");var C,F=[this.text||"&#160;",this.type];if(A){C=B.insertBefore(A,F,true);}else{C=B.append(D,F,true);}var E=C.child(this.buttonSelector);this._initButtonElement(C,E);this.arrowBtnTable=C.child("table:last");if(this.arrowTooltip){C.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip;}},autoWidth:function(){if(this._ele){var C=this._ele.child("table:first");var B=this._ele.child("table:last");this._ele.setWidth("auto");C.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var A=this._ele.child(this.buttonSelector);if(A&&A.getWidth()>20){A.clip();A.setWidth(Ext.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"));}}if(this.minWidth){if((C.getWidth()+B.getWidth())<this.minWidth){C.setWidth(this.minWidth-B.getWidth());}}this._ele.setWidth(C.getWidth()+B.getWidth());}},setArrowHandler:function(B,A){this.arrowHandler=B;this.scope=A;},onClick:function(A){A.preventDefault();if(!this.disabled){if(A.getTarget(".actuate-widget-btn-menu-arrow-wrap")){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu();}this.fireEvent("arrowclick",this,A);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,A);}}else{if(this.enableToggle){this.toggle();}this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A);}}}},getClickEl:function(B,A){if(!A){return(this.lastClickEl=B.getTarget("table",10,true));}return this.lastClickEl;},onDisable:function(){if(this._ele){if(!Ext.isIE6){this._ele.addClass("actuate-widget-item-disabled");}this._ele.child(this.buttonSelector).dom.disabled=true;this._ele.child(this.arrowSelector).dom.disabled=true;}this.disabled=true;},onEnable:function(){if(this._ele){if(!actuate.util.Utility.isIE6){this._ele.removeClass("actuate-widget-item-disabled");}this._ele.child(this.buttonSelector).dom.disabled=false;this._ele.child(this.arrowSelector).dom.disabled=false;}this.disabled=false;},isMenuTriggerOver:function(A){return this.menu&&A.within(this.arrowBtnTable)&&!A.within(this.arrowBtnTable,true);},isMenuTriggerOut:function(B,A){return this.menu&&!B.within(this.arrowBtnTable);},onDestroy:function(){actuate.widget.Element.destroy(this.arrowBtnTable);actuate.widget.SplitButton.superclass.onDestroy.call(this);}});actuate.widget.MenuButton=actuate.widget.SplitButton;actuate.widget.Component.prototype.registerType("splitbutton",actuate.widget.SplitButton);actuate.util.Package.define("actuate.widget");actuate.widget.Toolbar=actuate.Class.create();actuate.widget.Toolbar.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.Toolbar.prototype=actuate.Class.extend(new actuate.widget.BoxComponent(),{trackMenus:true,initialize:function(A){if(actuate.util.Utility.isArray(A)){A={buttons:A};}actuate.widget.Toolbar.superclass.initialize.call(this,A);},_initComponent:function(){actuate.widget.Toolbar.superclass._initComponent.call(this);if(this.items){this.buttons=this.items;}this.items=new actuate.widget.util.MixedCollection(false,function(A){return A.itemId||A.id||actuate.widget.Element.id();});},_autoCreate:{cls:"actuate-widget-toolbar actuate-widget-small-editor",html:'<table cellspacing="0"><tr></tr></table>'},_onRender:function(B,A){this._ele=B.createChild(actuate.util.Utility.apply({id:this.id},this._autoCreate),A);this.tr=this._ele.child("tr",true);},_afterRender:function(){actuate.widget.Toolbar.superclass._afterRender.call(this);if(this.buttons){this.add.apply(this,this.buttons);delete this.buttons;}},add:function(){var B=arguments,A=B.length;for(var C=0;C<A;C++){var D=B[C];if(D.isFormField){this.addField(D);}else{if(D.render){this.addItem(D);}else{if(typeof D=="string"){if(D=="separator"||D=="-"){this.addSeparator();}else{if(D==" "){this.addSpacer();}else{if(D=="->"){this.addFill();}else{this.addText(D);}}}}else{if(D.tagName){this.addElement(D);}else{if(typeof D=="object"){if(D.xtype){this.addField(actuate.widget.ComponentMgr.create(D,"button"));}else{this.addButton(D);}}}}}}}},addSeparator:function(){return this.addItem(new actuate.widget.Toolbar.Separator());},addSpacer:function(){return this.addItem(new actuate.widget.Toolbar.Spacer());},addFill:function(){return this.addItem(new actuate.widget.Toolbar.Fill());},addElement:function(A){return this.addItem(new actuate.widget.Toolbar.Item(A));},addItem:function(A){var B=this.nextBlock();this.initMenuTracking(A);A.render(B);this.items.add(A);return A;},addButton:function(C){if(actuate.util.Utility.isArray(C)){var E=[];for(var D=0,B=C.length;D<B;D++){E.push(this.addButton(C[D]));}return E;}var A=C;if(!(C instanceof actuate.widget.Toolbar.Button)){A=C.split?new actuate.widget.Toolbar.SplitButton(C):new actuate.widget.Toolbar.Button(C);}var F=this.nextBlock();this.initMenuTracking(A);A.render(F);this.items.add(A);return A;},initMenuTracking:function(A){if(this.trackMenus&&A.menu){A.registerEventHandler("menutriggerover",actuate.Method.bind(this.onButtonTriggerOver,this));A.registerEventHandler("menushow",actuate.Method.bind(this.onButtonMenuShow,this));A.registerEventHandler("menuhide",actuate.Method.bind(this.onButtonMenuHide,this));}},addText:function(A){return this.addItem(new actuate.widget.Toolbar.TextItem(A));},insertButton:function(B,E){if(actuate.util.Utility.isArray(E)){var D=[];for(var C=0,A=E.length;C<A;C++){D.push(this.insertButton(B+C,E[C]));}return D;}if(!(E instanceof actuate.widget.Toolbar.Button)){E=new actuate.widget.Toolbar.Button(E);}var F=document.createElement("td");this.tr.insertBefore(F,this.tr.childNodes[B]);this.initMenuTracking(E);E.render(F);this.items.insert(B,E);return E;},addDom:function(B,A){var D=this.nextBlock();Ext.DomHelper.overwrite(D,B);var C=new actuate.widget.Toolbar.Item(D.firstChild);C.render(D);this.items.add(C);return C;},addField:function(B){var C=this.nextBlock();B.render(C);var A=new actuate.widget.Toolbar.Item(C.firstChild);A.render(C);this.items.add(B);return A;},nextBlock:function(){var A=document.createElement("td");this.tr.appendChild(A);return A;},onDestroy:function(){actuate.widget.Toolbar.superclass.onDestroy.call(this);if(this.rendered){if(this.items){actuate.widget.Element.destroy.call(actuate.widget.Element,this.items.items);}actuate.widget.Element.uncache(this.tr);}},onDisable:function(){this.items.each(function(A){if(A.disable){A.disable();}});},onEnable:function(){this.items.each(function(A){if(A.enable){A.enable();}});},onButtonTriggerOver:function(A){if(this.activeMenuBtn&&this.activeMenuBtn!=A){this.activeMenuBtn.hideMenu();A.showMenu();this.activeMenuBtn=A;}},onButtonMenuShow:function(A){this.activeMenuBtn=A;},onButtonMenuHide:function(A){delete this.activeMenuBtn;}});actuate.widget.Component.prototype.registerType("toolbar",actuate.widget.Toolbar);actuate.widget.Toolbar.Item=actuate.Class.create();actuate.widget.Toolbar.Item.superclass=actuate.widget.BoxComponent.prototype;actuate.widget.Toolbar.Item.prototype={initialize:function(A){this._ele=actuate.widget.Element.getDom(A);this.id=actuate.widget.Element.id(this._ele);this.hidden=false;},getEl:function(){return this._ele;},render:function(A){this.td=A;A.appendChild(this._ele);},destroy:function(){if(this._ele){var A=actuate.widget.Element.get(this._ele);actuate.widget.Element.destroy(A);}actuate.widget.DomHelper.removeNode(this.td);},show:function(){this.hidden=false;this.td.style.display="";},hide:function(){this.hidden=true;this.td.style.display="none";},setVisible:function(A){if(A){this.show();}else{this.hide();}},focus:function(){actuate.widget.Element.fly(this._ele).focus();},disable:function(){actuate.widget.Element.fly(this.td).addClass("actuate-widget-item-disabled");this.disabled=true;this._ele.disabled=true;},enable:function(){actuate.widget.Element.fly(this.td).removeClass("actuate-widget-item-disabled");this.disabled=false;this._ele.disabled=false;}};actuate.widget.Component.prototype.registerType("tbitem",actuate.widget.Toolbar.Item);actuate.widget.Toolbar.Separator=actuate.Class.create();actuate.widget.Toolbar.Separator.superclass=actuate.widget.Toolbar.Item.prototype;actuate.widget.Toolbar.Separator.prototype=actuate.Class.extend(new actuate.widget.Toolbar.Item(),{initialize:function(){var A=document.createElement("span");A.className="ytb-sep";actuate.widget.Toolbar.Separator.superclass.initialize.call(this,A);},enable:actuate.Method.empty,disable:actuate.Method.empty,focus:actuate.Method.empty});actuate.widget.Component.prototype.registerType("tbseparator",actuate.widget.Toolbar.Separator);actuate.widget.Toolbar.Spacer=actuate.Class.create();actuate.widget.Toolbar.Spacer.superclass=actuate.widget.Toolbar.Item.prototype;actuate.widget.Toolbar.Spacer.prototype=actuate.Class.extend(new actuate.widget.Toolbar.Item(),{initialize:function(){var A=document.createElement("div");A.className="ytb-spacer";actuate.widget.Toolbar.Spacer.superclass.initialize.call(this,A);},enable:actuate.Method.empty,disable:actuate.Method.empty,focus:actuate.Method.empty});actuate.widget.Component.prototype.registerType("tbspacer",actuate.widget.Toolbar.Spacer);actuate.widget.Toolbar.Fill=actuate.Class.create();actuate.widget.Toolbar.Fill.superclass=actuate.widget.Toolbar.Spacer.prototype;actuate.widget.Toolbar.Fill.prototype=actuate.Class.extend(new actuate.widget.Toolbar.Spacer(),{_render:function(A){A.style.width="100%";actuate.widget.Toolbar.Fill.superclass._render.call(this,A);}});actuate.widget.Component.prototype.registerType("tbfill",actuate.widget.Toolbar.Fill);actuate.widget.Toolbar.TextItem=actuate.Class.create();actuate.widget.Toolbar.TextItem.superclass=actuate.widget.Toolbar.Item.prototype;actuate.widget.Toolbar.TextItem.prototype=actuate.Class.extend(new actuate.widget.Toolbar.Item(),{initialize:function(A){var B=document.createElement("span");B.className="ytb-text";B.innerHTML=A.text?A.text:A;actuate.widget.Toolbar.TextItem.superclass.initialize.call(this,B);},enable:actuate.Method.empty,disable:actuate.Method.empty,focus:actuate.Method.empty});actuate.widget.Component.prototype.registerType("tbtext",actuate.widget.Toolbar.TextItem);actuate.widget.Toolbar.Button=actuate.Class.create();actuate.widget.Toolbar.Button.superclass=actuate.widget.button.Button.prototype;actuate.widget.Toolbar.Button.prototype=actuate.Class.extend(new actuate.widget.button.Button(),{hideParent:true,onDestroy:function(){actuate.widget.Toolbar.Button.superclass.onDestroy.call(this);if(this.container){this.container.remove();}}});actuate.widget.Component.prototype.registerType("tbbutton",actuate.widget.Toolbar.Button);actuate.widget.Toolbar.SplitButton=actuate.Class.create();actuate.widget.Toolbar.SplitButton.superclass=actuate.widget.SplitButton.prototype;actuate.widget.Toolbar.SplitButton.prototype=actuate.Class.extend(new actuate.widget.SplitButton(),{hideParent:true,onDestroy:function(){actuate.widget.Toolbar.SplitButton.superclass.onDestroy.call(this);if(this.container){this.container.remove();}}});actuate.widget.Component.prototype.registerType("tbsplit",actuate.widget.Toolbar.SplitButton);actuate.widget.Toolbar.MenuButton=actuate.widget.Toolbar.SplitButton;actuate.util.Package.define("actuate.widget");actuate.widget.ColorPalette=actuate.Class.extendClass(actuate.widget.Component,{itemCls:"actuate-widget-color-palette",value:null,clickEvent:"click",ctype:"actuate.widget.ColorPalette",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initialize:function(A){if(this.__extending){return ;}actuate.widget.ColorPalette.superclass.initialize.call(this,A);if(this.handler){this.registerEventHandler("select",actuate.Method.bind(this.handler,this));}},_onRender:function(B,A){var C=this.tpl||new actuate.widget.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');var D=document.createElement("div");D.id=this._getId();D.className=this.itemCls;C.overwrite(D,this.colors);B.dom.insertBefore(D,A);this._ele=actuate.widget.Element.get(D);this._ele.on(this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this._ele.on("click",actuate.util.Utility.emptyFn,this,{delegate:"a",preventDefault:true});}},_afterRender:function(){actuate.widget.ColorPalette.superclass._afterRender.call(this);if(this.value){var A=this.value;this.value=null;this.select(A);}},handleClick:function(B,A){B.preventDefault();if(!this.disabled){var C=A.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(C.toUpperCase());}},select:function(A){A=A.replace("#","");if(A!=this.value||this.allowReselect){var B=this._ele;if(this.value){B.child("a.color-"+this.value).removeClass("actuate-widget-color-palette-sel");}B.child("a.color-"+A).addClass("actuate-widget-color-palette-sel");this.value=A;this.fireEvent("select",this,A);}}});actuate.widget.Component.prototype.registerType("colorpalette",actuate.widget.ColorPalette);actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.Tree=actuate.Class.create();actuate.widget.tree.Node=actuate.Class.create();actuate.widget.tree.Tree.superclass=actuate.widget.Observable.prototype;actuate.widget.tree.Node.superclass=actuate.widget.Component.prototype;actuate.widget.tree.Tree.prototype=actuate.Class.extend(new actuate.widget.Observable(),{pathSeparator:"/",initialize:function(A){actuate.widget.tree.Tree.superclass.initialize.call(this);this.nodeHash={};this.root=null;if(A){this.setRootNode(A);}},_proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments);},getRootNode:function(){return this.root;},setRootNode:function(A){this.root=A;A.ownerTree=this;A.isRoot=true;this._registerNode(A);return A;},getNodeById:function(A){return this.nodeHash[A];},_registerNode:function(A){this.nodeHash[A.id]=A;},_unregisterNode:function(A){delete this.nodeHash[A.id];},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]";}});actuate.widget.tree.Node.prototype=actuate.Class.extend(new actuate.widget.Component(),{initialize:function(A){actuate.widget.tree.Node.superclass.initialize.call(this);this.attributes=A||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=this._getId();this.attributes.id=this.id;}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.listeners=this.attributes.listeners;},fireEvent:function(B){if(actuate.widget.tree.Node.superclass.fireEvent.apply(this,arguments)===false){return false;}var A=this.getOwnerTree();if(A){if(A._proxyNodeEvent.apply(A,arguments)===false){return false;}}return true;},isLeaf:function(){return this.leaf===true;},_setFirstChild:function(A){this.firstChild=A;},_setLastChild:function(A){this.lastChild=A;},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this);},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this);},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0;},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes();},appendChild:function(E){var F=false;if(actuate.util.Utility.isArray(E)){F=E;}else{if(arguments.length>1){F=arguments;}}if(F){for(var D=0,A=F.length;D<A;D++){this.appendChild(F[D]);}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,E)===false){return false;}var B=this.childNodes.length;var C=E.parentNode;if(C){if(E.fireEvent("beforemove",E.getOwnerTree(),E,C,this,B)===false){return false;}C.removeChild(E);}B=this.childNodes.length;if(B==0){this._setFirstChild(E);}this.childNodes.push(E);E.parentNode=this;var G=this.childNodes[B-1];if(G){E.previousSibling=G;G.nextSibling=E;}else{E.previousSibling=null;}E.nextSibling=null;this._setLastChild(E);E._setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,E,B);if(C){E.fireEvent("move",this.ownerTree,E,C,this,B);}return E;}},removeChild:function(B){var A=actuate.util.Utility.indexOf(this.childNodes,B);if(A==-1){return false;}if(this.fireEvent("beforeremove",this.ownerTree,this,B)===false){return false;}this.childNodes.splice(A,1);if(B.previousSibling){B.previousSibling.nextSibling=B.nextSibling;}if(B.nextSibling){B.nextSibling.previousSibling=B.previousSibling;}if(this.firstChild==B){this._setFirstChild(B.nextSibling);}if(this.lastChild==B){this._setLastChild(B.previousSibling);}B._setOwnerTree(null);B.parentNode=null;B.previousSibling=null;B.nextSibling=null;this.fireEvent("remove",this.ownerTree,this,B);return B;},insertBefore:function(D,A){if(!A){return this.appendChild(D);}if(D==A){return false;}if(this.fireEvent("beforeinsert",this.ownerTree,this,D,A)===false){return false;}var B=actuate.util.Utility.indexOf(this.childNodes,A);var C=D.parentNode;var E=B;if(C==this&&actuate.util.Utility.indexOf(this.childNodes,D)<B){E--;}if(C){if(D.fireEvent("beforemove",D.getOwnerTree(),D,C,this,B,A)===false){return false;}C.removeChild(D);}if(E==0){this._setFirstChild(D);}this.childNodes.splice(E,0,D);D.parentNode=this;var F=this.childNodes[E-1];if(F){D.previousSibling=F;F.nextSibling=D;}else{D.previousSibling=null;}D.nextSibling=A;A.previousSibling=D;D._setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,D,A);if(C){D.fireEvent("move",this.ownerTree,D,C,this,E,A);}return D;},remove:function(){this.parentNode.removeChild(this);return this;},item:function(A){return this.childNodes[A];},replaceChild:function(A,C){var B=C?C.nextSibling:null;this.removeChild(C);this.insertBefore(A,B);return C;},indexOf:function(A){return actuate.util.Utility.indexOf(this.childNodes,A);},getOwnerTree:function(){if(!this.ownerTree){var A=this;while(A){if(A.ownerTree){this.ownerTree=A.ownerTree;break;}A=A.parentNode;}}return this.ownerTree;},getDepth:function(){var B=0;var A=this;while(A.parentNode){++B;A=A.parentNode;}return B;},_setOwnerTree:function(B){if(B!=this.ownerTree){if(this.ownerTree){this.ownerTree._unregisterNode(this);}this.ownerTree=B;var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C]._setOwnerTree(B);}if(B){B._registerNode(this);}}},getPath:function(B){B=B||"id";var D=this.parentNode;var A=[this.attributes[B]];while(D){A.unshift(D.attributes[B]);D=D.parentNode;}var C=this.getOwnerTree().pathSeparator;return C+A.join(C);},bubble:function(C,B,A){var D=this;while(D){if(C.apply(B||D,A||[D])===false){break;}D=D.parentNode;}},cascade:function(F,E,B){if(F.apply(E||this,B||[this])!==false){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].cascade(F,E,B);}}},eachChild:function(F,E,B){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){if(F.apply(E||this,B||[D[C]])===false){break;}}},findChild:function(D,E){var C=this.childNodes;for(var B=0,A=C.length;B<A;B++){if(C[B].attributes[D]==E){return C[B];}}return null;},findChildBy:function(E,D){var C=this.childNodes;for(var B=0,A=C.length;B<A;B++){if(E.call(D||C[B],C[B])===true){return C[B];}}return null;},sort:function(E,D){var C=this.childNodes;var A=C.length;if(A>0){var F=D?function(){E.apply(D,arguments);}:E;C.sort(F);for(var B=0;B<A;B++){var G=C[B];G.previousSibling=C[B-1];G.nextSibling=C[B+1];if(B==0){this._setFirstChild(G);}if(B==A-1){this._setLastChild(G);}}}},contains:function(A){return A.isAncestor(this);},isAncestor:function(A){var B=this.parentNode;while(B){if(B==A){return true;}B=B.parentNode;}return false;},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]";}});actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeEventModel=actuate.Class.create();actuate.widget.tree.TreeEventModel.prototype={initialize:function(A){this.tree=A;this.tree.registerEventHandler("render",actuate.Method.bind(this._initEvents,this));},_initEvents:function(){var A=this.tree.getTreeEl();A.on("click",this.delegateClick,this);if(this.tree.trackMouseOver!==false){A.on("mouseover",this.delegateOver,this);A.on("mouseout",this.delegateOut,this);}A.on("dblclick",this.delegateDblClick,this);A.on("contextmenu",this.delegateContextMenu,this);},getNode:function(B){var A;if(A=B.getTarget(".actuate-tree-node-el",10)){var C=actuate.widget.Element.fly(A,"_treeEvents").getAttributeNS("ext","tree-node-id");if(C){return this.tree.getNodeById(C);}}return null;},getNodeTarget:function(B){var A=B.getTarget(".actuate-tree-node-icon",1);if(!A){A=B.getTarget(".actuate-tree-node-el",6);}return A;},delegateOut:function(B,A){if(!this.beforeEvent(B)){return ;}if(B.getTarget(".actuate-tree-ec-icon",1)){var C=this.getNode(B);this.onIconOut(B,C);if(C==this.lastEcOver){delete this.lastEcOver;}}if((A=this.getNodeTarget(B))&&!B.within(A,true)){this.onNodeOut(B,this.getNode(B));}},delegateOver:function(B,A){if(!this.beforeEvent(B)){return ;}if(this.lastEcOver){this.onIconOut(B,this.lastEcOver);delete this.lastEcOver;}if(B.getTarget(".actuate-tree-ec-icon",1)){this.lastEcOver=this.getNode(B);this.onIconOver(B,this.lastEcOver);}if(A=this.getNodeTarget(B)){this.onNodeOver(B,this.getNode(B));}},delegateClick:function(B,A){if(!this.beforeEvent(B)){return ;}if(B.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(B,this.getNode(B));}else{if(B.getTarget(".actuate-tree-ec-icon",1)){this.onIconClick(B,this.getNode(B));}else{if(this.getNodeTarget(B)){this.onNodeClick(B,this.getNode(B));}}}},delegateDblClick:function(B,A){if(this.beforeEvent(B)&&this.getNodeTarget(B)){this.onNodeDblClick(B,this.getNode(B));}},delegateContextMenu:function(B,A){if(this.beforeEvent(B)&&this.getNodeTarget(B)){this.onNodeContextMenu(B,this.getNode(B));}},onNodeClick:function(B,A){if(A){A.ui.onClick(B);}},onNodeOver:function(C,B){if(B){var A=this.tree?this.tree.getSelectionModel():null;if(!A||A._canSelect(B)){B.ui.onOver(C);}}},onNodeOut:function(B,A){if(A){A.ui.onOut(B);}},onIconOver:function(B,A){if(A){A.ui.addClass("actuate-tree-ec-over");}},onIconOut:function(B,A){if(A){A.ui.removeClass("actuate-tree-ec-over");}},onIconClick:function(B,A){if(A){A.ui.ecClick(B);}},onCheckboxClick:function(B,A){if(A){A.ui.onCheckChange(B);}},onNodeDblClick:function(B,A){if(A){A.ui.onDblClick(B);}},onNodeContextMenu:function(B,A){if(A){A.ui.onContextMenu(B);}},beforeEvent:function(A){if(this.disabled){A.stopEvent();return false;}return true;},disable:function(){this.disabled=true;},enable:function(){this.disabled=false;}};actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeSorter=actuate.Class.create();actuate.widget.tree.TreeSorter.prototype={initialize:function(B,C){if(C&&C.registerHandlers==true){B.registerEventHandler("beforechildrenrendered",actuate.Method.bind(this.doSort,this));B.registerEventHandler("append",actuate.Method.bind(this.updateSort,this));B.registerEventHandler("insert",actuate.Method.bind(this.updateSort,this));B.registerEventHandler("textchange",actuate.Method.bind(this.updateSortParent,this));}var E;var F="text";var D;var G;var A;var H="leaf";if(C){E=C.dir&&C.dir.toLowerCase()=="desc";F=C.property||"text";D=C.caseSensitive===true;G=C.sortType;A=C.folderSort;H=C.leafAttr||"leaf";}this.sortFn=function(J,I){if(A){if(J.attributes[H]&&!I.attributes[H]){return 1;}if(!J.attributes[H]&&I.attributes[H]){return -1;}}var L=G?G(J):(D?J.attributes[F]:J.attributes[F].toUpperCase());var K=G?G(I):(D?I.attributes[F]:I.attributes[F].toUpperCase());if(L<K){return E?+1:-1;}else{if(L>K){return E?-1:+1;}else{return 0;}}};},doSort:function(A){A.sort(this.sortFn);},compareNodes:function(B,A){return(B.text.toUpperCase()>A.text.toUpperCase()?1:-1);},updateSort:function(A,B){if(B.childrenRendered){actuate.Method.defer(1,this.doSort,this,[B]);}},updateSortParent:function(A){var B=A.parentNode;if(B&&B.childrenRendered){actuate.Method.defer(1,this.doSort,this,[B]);}}};actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeLoader=actuate.Class.create();actuate.widget.tree.TreeLoader.superclass=actuate.widget.Observable.prototype;actuate.widget.tree.TreeLoader.prototype=actuate.Class.extend(new actuate.widget.Observable(),{uiProviders:{},clearOnLoad:true,node:null,initialize:function(A){this.baseParams={};actuate.widget.tree.TreeLoader.superclass.initialize.call(this,A);},load:function(A,B){if(this.clearOnLoad){while(A.firstChild){A.removeChild(A.firstChild);}}if(this.doPreload(A)){if(typeof B=="function"){B();}}},doPreload:function(E){var D;this.node=E;if(this.dataStore){D=this.dataStore.getChildren(E.attributes.id);}else{D=E.attributes.children;}if(D){if(E.childNodes.length<1){E.beginUpdate();for(var C=0,A=D.length;C<A;C++){var B=this.createNode(D[C]);var F=E.appendChild(B);if(this.preloadChildren){this.doPreload(F);}D[C].node=B;}E.endUpdate();}return true;}else{return false;}},getParams:function(D){var A=[],C=this.baseParams;for(var B in C){if(typeof C[B]!="function"){A.push(encodeURIComponent(B),"=",encodeURIComponent(C[B]),"&");}}A.push("node=",encodeURIComponent(D.id));return A.join("");},createNode:function(attr){if(this.baseAttrs){actuate.util.Utility.applyIf(attr,this.baseAttrs);}if(this.applyLoader!==false){attr.loader=this;}if(typeof attr.uiProvider=="string"){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider);}attr.iconCls=this._getIconCls(attr);return new actuate.widget.tree.TreeNode(attr);},_getIconCls:function(A){if(!this.icons){return"";}var D;for(var B=0;B<this.icons.length;B++){var C=this.icons[B];if(this.node&&this.node.parentNode&&this.node.parentNode.attributes&&this.node.parentNode.attributes.iconCls=="actuate_dimensions_image"){A.type="level";}if(C.type==(A.subType||A.type||A.id)){if(C.iconCls){return C.iconCls;}}else{if(!C.type){D=C.iconCls;}}}return D;}});actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeStore=actuate.Class.extendClass(actuate.widget.Observable,{_data:{},_rootID:"actuate.widget.tree.root",_root:null,initialize:function(B,A){actuate.widget.tree.TreeStore.superclass.initialize.call(this,A);this._data={};this._root=null;this.put({id:this._rootID});this.putAll(B);},removeAll:function(){this.clear();},clear:function(){this._data={};this._root=null;this.put({id:this._rootID});},putAll:function(B){if(B){for(var A=0;A<B.length;A++){this.put(B[A]);}}},getItem:function(A){return this._data[A];},getRoot:function(){return this._data[this._rootID];},getChildren:function(D){var C=[];var A=this._getNode(D);var B=A?A.left:null;while(B){C.push(B);B=B.right;}return C;},remove:function(A){this._removeNode(this._data.remove(A.id));},put:function(F){if(!F){return ;}var E=this._data[F.id];var A=this._getNode(F.parentId);F.left=null;F.right=null;F.parent=null;if(!E){E=F;E.parent=A;if(A){var G=A.left;var B=G;if(B){while(B.right){B=B.right;}B.right=E;}else{A.left=E;}}this._putNode(E);}else{var D=E.parent;var C=E.right;if(D&&this._isSame(D.right,E)){D.right=C;}else{if(D&&this._isSame(D.left,E)){D.left=C;}}if(C!=null){C.parent=D;if(!D){this._root=C;}}E=F;E.parent=A;var G=A.left;var B=G;if(B){while(B.right){B=B.right;}B.right=E;}else{A.left=E;}}},_isSame:function(B,A){if(B&&A){return B.id==A.id;}return !B&&!A;},_getNode:function(B){if(!B){return this.getRoot();}var A=this._data[B];if(!A){A={id:B};this._putNode(A);}return A;},_putNode:function(A){if(!A){return ;}if(this._root==null){this._root=A;}this._data[A.id]=A;return ;},_removeNode:function(C){if(!C){return ;}var D=C.left;var A=C.right;var B=C.parent;if(B){if(this._isSame(B.left,C)){B.left=A;}else{if(this._isSame(B.right,C)){B.right=A;}}}else{this._root=A;}if(A!=null){A.parent=B;}this._putNode(D);return ;},add:function(A){this.put(A);}});actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeNode=actuate.Class.create();actuate.widget.tree.TreeNode.superclass=actuate.widget.tree.Node.prototype;actuate.widget.tree.TreeNode.prototype=actuate.Class.extend(new actuate.widget.tree.Node(),{preventHScroll:true,initialize:function(A){A=A||{};if(typeof A=="string"){A={text:A};}this.childrenRendered=false;this.rendered=false;actuate.widget.tree.TreeNode.superclass.initialize.call(this,A);this.expanded=A.expanded===true;this.isTarget=A.isTarget!==false;this.draggable=A.draggable!==false&&A.allowDrag!==false;this.allowChildren=A.allowChildren!==false&&A.allowDrop!==false;this.text=A.text;this.disabled=A.disabled===true;var B=this.attributes.uiProvider||this.defaultUI||actuate.widget.tree.TreeNodeUI;this.ui=new B(this);},isExpanded:function(){return this.expanded;},getUI:function(){return this.ui;},getLoader:function(){var A;return this.loader||((A=this.getOwnerTree())&&A.loader?A.loader:new actuate.widget.tree.TreeLoader());},_setFirstChild:function(A){var B=this.firstChild;actuate.widget.tree.TreeNode.superclass._setFirstChild.call(this,A);if(this.childrenRendered&&B&&A!=B){B.renderIndent(true,true);}if(this.rendered){this.renderIndent(true,true);}},_setLastChild:function(B){var A=this.lastChild;actuate.widget.tree.TreeNode.superclass._setLastChild.call(this,B);if(this.childrenRendered&&A&&B!=A){A.renderIndent(true,true);}if(this.rendered){this.renderIndent(true,true);}},appendChild:function(B){if(!B.render&&!actuate.util.Utility.isArray(B)){B=this.getLoader().createNode(B);}var A=actuate.widget.tree.TreeNode.superclass.appendChild.call(this,B);if(A&&this.childrenRendered){A.render();}this.ui.updateExpandIcon();return A;},removeChild:function(A){this.ownerTree.getSelectionModel().unselect(A);actuate.widget.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(this.childrenRendered){A.ui.remove();}if(this.childNodes.length<1){this.collapse(false,false);}else{this.ui.updateExpandIcon();}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false;}return A;},insertBefore:function(C,A){if(!C.render){C=this.getLoader().createNode(C);}var B=actuate.widget.tree.TreeNode.superclass.insertBefore.apply(this,arguments);if(B&&A&&this.childrenRendered){C.render();}this.ui.updateExpandIcon();return B;},setText:function(B){var A=this.text;this.text=B;this.attributes.text=B;if(this.rendered){this.ui.onTextChange(this,B,A);}this.fireEvent("textchange",this,B,A);},select:function(B,A){this.getOwnerTree().getSelectionModel().select(this,A,B);},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this);},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this);},expand:function(A,C,D){if(!this.expanded){if(this.fireEvent("beforeexpand",this,A,C)===false){return ;}if(!this.childrenRendered){this.renderChildren();}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&C!==false)||C){var B=this;this.ui.animExpand(actuate.Method.createDelegate(function(){B.fireEvent("expand",this);if(typeof D=="function"){D(this);}if(A===true){B.expandChildNodes(true);}}));return ;}else{this.ui.expand();this.fireEvent("expand",this);if(typeof D=="function"){D(this);}}}else{if(typeof D=="function"){D(this);}}if(A===true){this.expandChildNodes(true);}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible;},collapse:function(B,F){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,B,F)===false){return ;}this.expanded=false;if((this.getOwnerTree().animate&&F!==false)||F){var E=this;this.ui.animCollapse(actuate.Method.createDelegate(function(){E.fireEvent("collapse",this);if(B===true){E.collapseChildNodes(true);}}));return ;}else{this.ui.collapse();this.fireEvent("collapse",this);}}if(B===true){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].collapse(true,false);}}},_delayedExpand:function(A){if(!this.expandProcId){this.expandProcId=actuate.Method.defer(A,this.expand,this);}},_cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);}this.expandProcId=false;},toggle:function(){if(this.expanded){this.collapse();}else{this.expand();}},ensureVisible:function(B){var A=this.getOwnerTree();A.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,actuate.Method.createDelegate(function(){A.getTreeEl().scrollChildIntoView(this.ui.anchor);if(typeof B=="function"){B(this);}},this));},expandChildNodes:function(B){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].expand(B);}},collapseChildNodes:function(B){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].collapse(B);}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true);}this.fireEvent("disabledchange",this,true);},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false);}this.fireEvent("disabledchange",this,false);},renderChildren:function(B){if(B!==false){this.fireEvent("beforechildrenrendered",this);}var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].render(true);}this.childrenRendered=true;},sort:function(E,D){actuate.widget.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var C=this.childNodes;for(var B=0,A=C.length;B<A;B++){C[B].render(true);}}},render:function(A){this.getLoader().doPreload(this);this.ui.render(A);if(!this.rendered){this.getOwnerTree()._registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false);}}},renderIndent:function(B,E){if(E){this.ui.childIndent=null;}this.ui.renderIndent();if(B===true&&this.childrenRendered){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++){D[C].renderIndent(true,E);}}},beginUpdate:function(){this.childrenRendered=false;},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren();}},clear:function(){while(this.firstChild){this.removeChild(this.firstChild);}},destroy:function(){if(this.childNodes){for(var B=0,A=this.childNodes.length;B<A;B++){this.childNodes[B].destroy();}this.childNodes=null;}if(this.ui.destroy){this.ui.destroy();}}});actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreeNodeUI=actuate.Class.create();actuate.widget.tree.RootTreeNodeUI=actuate.Class.create();actuate.widget.tree.RootTreeNodeUI.superclass=actuate.widget.tree.TreeNodeUI.prototype;actuate.widget.tree.TreeNodeUI.prototype={initialize:function(A){this.node=A;this.rendered=false;this.animating=false;this.wasLeaf=true;this.ecc="actuate-tree-ec-icon actuate-tree-elbow";this.emptyIcon=actuate.widget.BLANK_IMAGE_URL;},removeChild:function(A){if(this.rendered){this.ctNode.removeChild(A.ui._getEl());}},beforeLoad:function(){this.addClass("actuate-tree-node-loading");},afterLoad:function(){this.removeClass("actuate-tree-node-loading");},onTextChange:function(B,C,A){if(this.rendered){this.textNode.innerHTML=C;}},onDisableChange:function(A,B){this.disabled=B;if(this.checkbox){this.checkbox.disabled=B;}if(B){this.addClass("actuate-tree-node-disabled");}else{this.removeClass("actuate-tree-node-disabled");}},onSelectedChange:function(A){if(A){this.focus();this.addClass("actuate-tree-selected");}else{this.removeClass("actuate-tree-selected");}},_onMove:function(A,G,E,F,D,B){this.childIndent=null;if(this.rendered){var H=F.ui._getContainer();if(!H){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return ;}var C=B?B.ui._getEl():null;if(C){H.insertBefore(this.wrap,C);}else{H.appendChild(this.wrap);}this.node.renderIndent(true);}},addClass:function(B){if(this.elNode){var C=actuate.widget.Element.fly(this.elNode);C.addClass(B);if(this.elNode.getElementsByTagName("a")&&this.elNode.getElementsByTagName("a")[0]&&this.elNode.getElementsByTagName("a")[0].getElementsByTagName("span")){var A=actuate.widget.Element.fly(this.elNode.getElementsByTagName("a")[0].getElementsByTagName("span")[0]);A.addClass(B);}}},removeClass:function(B){if(this.elNode){var C=actuate.widget.Element.fly(this.elNode);C.removeClass(B);if(this.elNode.getElementsByTagName("a")&&this.elNode.getElementsByTagName("a")[0]&&this.elNode.getElementsByTagName("a")[0].getElementsByTagName("span")){var A=actuate.widget.Element.fly(this.elNode.getElementsByTagName("a")[0].getElementsByTagName("span")[0]);A.removeClass(B);}}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);}},_fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments);},_initEvents:function(){this.node.registerEventHandler("move",actuate.Method.bind(this._onMove,this));if(this.node.disabled){this.onDisableChange(this.node,true);}if(this.node.hidden){this.hide();}var B=this.node.getOwnerTree();var A=B.enableDD||B.enableDrag||B.enableDrop;if(A&&(!this.node.isRoot||B.rootVisible)){actuate.widget.dd.Registry.register(this.elNode,{node:this.node,handles:this._getDDHandles(),isHandle:false});}},_getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode];},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none";}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display="";}},onContextMenu:function(A){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){A.preventDefault();this.focus();this._fireEvent("contextmenu",this.node,A);}},onClick:function(B){if(this.dropping){B.stopEvent();return ;}if(this._fireEvent("beforeclick",this.node,B)!==false){var A=B.getTarget("a");if(!this.disabled&&this.node.attributes.href&&A){this._fireEvent("click",this.node,B);return ;}else{if(A&&B.ctrlKey){B.stopEvent();}}B.preventDefault();if(this.disabled){return ;}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle();}this._fireEvent("click",this.node,B);}else{B.stopEvent();}},onDblClick:function(A){A.preventDefault();if(this.disabled){return ;}if(this.checkbox){this.toggleCheck();}if(!this.animating&&this.node.isExpandable()){this.node.toggle();}this._fireEvent("dblclick",this.node,A);},onOver:function(A){this.addClass("actuate-tree-node-over");},onOut:function(A){this.removeClass("actuate-tree-node-over");},onCheckChange:function(){var A=this.checkbox.checked;this.checkbox.defaultChecked=A;this.node.attributes.checked=A;this._fireEvent("checkchange",this.node,A);},ecClick:function(A){if(!this.animating&&this.node.isExpandable()){this.node.toggle();}},startDrop:function(){this.dropping=true;},endDrop:function(){setTimeout(function(){this.dropping=false;}.createDelegate(this),50);},expand:function(){this.updateExpandIcon();this.ctNode.style.display="";},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus();}catch(C){}}else{try{var B=this.node.getOwnerTree().getTreeEl().dom;var A=B.scrollLeft;this.anchor.focus();B.scrollLeft=A;}catch(C){}}},toggleCheck:function(B){var A=this.checkbox;if(A){A.checked=(B===undefined?!A.checked:B);this.onCheckChange();}},blur:function(){try{this.anchor.blur();}catch(A){}},animExpand:function(B){var A=actuate.widget.Element.get(this.ctNode);A.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";if(typeof B=="function"){B(this);}return ;}this.animating=true;this.updateExpandIcon();A.slideIn("t",{callback:function(){this.animating=false;if(typeof B=="function"){B(this);}},scope:this,duration:this.node.ownerTree.duration||0.25});},highlight:function(){var A=this.node.getOwnerTree();actuate.widget.Element.fly(this.wrap).highlight(A.hlColor||"C3DAF9",{endColor:A.hlBaseColor});},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none";},animCollapse:function(B){var A=actuate.widget.Element.get(this.ctNode);A.enableDisplayMode("block");A.stopFx();this.animating=true;this.updateExpandIcon();A.slideOut("t",{callback:function(){this.animating=false;if(typeof B=="function"){B(this);}},scope:this,duration:this.node.ownerTree.duration||0.25});},_getContainer:function(){return this.ctNode;},_getEl:function(){return this.wrap;},appendDDGhost:function(A){A.appendChild(this.elNode.cloneNode(true));},getDDRepairXY:function(){return actuate.widget.lib.Dom.getXY(this.iconNode);},onRender:function(){this.render();},render:function(B){var D=this.node,A=D.attributes;var C=D.parentNode?D.parentNode.ui._getContainer():D.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this._renderElements(D,A,C,B);if(A.qtip){if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",A.qtip);if(A.qtipTitle){this.textNode.setAttributeNS("ext","qtitle",A.qtipTitle);}}else{this.textNode.setAttribute("ext:qtip",A.qtip);if(A.qtipTitle){this.textNode.setAttribute("ext:qtitle",A.qtipTitle);}}}else{if(A.qtipCfg){A.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(A.qtipCfg);}}this._initEvents();if(!this.node.expanded){this.updateExpandIcon(true);}}else{if(B===true){C.appendChild(this.wrap);}}if(D&&A&&A.disabled){D.disable();}},_renderElements:function(D,I,H,J){this.indentMarkup=D.parentNode?D.parentNode.ui._getChildIndent():"";var L="";if(I.title){L=("title"+'="'+actuate.util.Utility.htmlEncode(I.title,true)+'"');}var E=typeof I.checked=="boolean";var B=I.href?I.href:actuate.util.Utility.isGecko?"":"#";var K=(I.strong?"<strong>":"")+D.text+(I.strong?"</strong>":"");var C=['<li class="actuate-tree-node"><div ext:tree-node-id="',D.id,'" class="actuate-tree-node-el actuate-tree-node-leaf actuate-unselectable ',I.cls,'" unselectable="on">','<span class="actuate-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="actuate-tree-ec-icon actuate-tree-elbow" />','<img src="',I.icon||this.emptyIcon,'" class="actuate-tree-node-icon',(I.icon?" actuate-tree-node-inline-icon":""),(I.iconCls?" "+I.iconCls:""),'" unselectable="on" />',E?('<input class="actuate-tree-node-cb" type="checkbox" '+(I.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="actuate-tree-node-anchor"',' href="',B,'" tabIndex="1" ',I.hrefTarget?' target="'+I.hrefTarget+'"':"","><span "+L+' unselectable="on" class="actuate-unselectable actuate-tree-span ',I.cls,'">',K,"</span></a></div>",'<ul class="actuate-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var A;if(J!==true&&D.nextSibling&&(A=D.nextSibling.ui._getEl())){this.wrap=actuate.widget.DomHelper.insertHtml("beforeBegin",A,C);}else{this.wrap=actuate.widget.DomHelper.insertHtml("beforeEnd",H,C);}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var G=this.elNode.childNodes;this.indentNode=G[0];this.ecNode=G[1];this.iconNode=G[2];var F=3;if(E){this.checkbox=G[3];this.checkbox.defaultChecked=this.checkbox.checked;F++;}this.anchor=G[F];this.textNode=G[F].firstChild;},getAnchor:function(){return this.anchor;},getTextEl:function(){return this.textNode;},getIconEl:function(){return this.iconNode;},isChecked:function(){return this.checkbox?this.checkbox.checked:false;},updateExpandIcon:function(){if(this.rendered){var E=this.node,D,C;var A=E.isLast()?"actuate-tree-elbow-end":"actuate-tree-elbow";if(E.isExpandable()){if(E.expanded){A+="-minus";D="actuate-tree-node-collapsed";C="actuate-tree-node-expanded";}else{A+="-plus";D="actuate-tree-node-expanded";C="actuate-tree-node-collapsed";}if(this.wasLeaf){this.removeClass("actuate-tree-node-leaf");this.wasLeaf=false;}if(this.c1!=D||this.c2!=C){actuate.widget.Element.fly(this.elNode).replaceClass(D,C);this.c1=D;this.c2=C;}}else{if(!this.wasLeaf){actuate.widget.Element.fly(this.elNode).replaceClass("actuate-tree-node-expanded","actuate-tree-node-leaf");delete this.c1;delete this.c2;this.wasLeaf=true;}}var B="actuate-tree-ec-icon "+A;if(this.ecc!=B){this.ecNode.className=B;this.ecc=B;}}},_getChildIndent:function(){if(!this.childIndent){var A=[];var B=this.node;while(B){if(!B.isRoot||(B.isRoot&&B.ownerTree.rootVisible)){if(!B.isLast()){A.unshift('<img src="'+this.emptyIcon+'" class="actuate-tree-elbow-line" />');}else{A.unshift('<img src="'+this.emptyIcon+'" class="actuate-tree-icon" />');}}B=B.parentNode;}this.childIndent=A.join("");}return this.childIndent;},renderIndent:function(){if(this.rendered){var A="";var B=this.node.parentNode;if(B){A=B.ui._getChildIndent();}if(this.indentMarkup!=A){this.indentNode.innerHTML=A;this.indentMarkup=A;}this.updateExpandIcon();}},destroy:function(){if(this.elNode){actuate.widget.dd.Registry.unregister(this.elNode.id);}delete this.elNode;delete this.ctNode;delete this.indentNode;delete this.ecNode;delete this.iconNode;delete this.checkbox;delete this.anchor;delete this.textNode;if(this.holder){delete this.wrap;actuate.widget.Element.removeNode(this.holder);delete this.holder;}else{actuate.widget.Element.removeNode(this.wrap);delete this.wrap;}}};actuate.widget.tree.RootTreeNodeUI.prototype=actuate.Class.extend(new actuate.widget.tree.TreeNodeUI(),{render:function(){if(!this.rendered&&this.node.ownerTree.innerCt){var A=this.node.ownerTree.innerCt.dom;this.node.expanded=true;A.innerHTML='<div class="actuate-tree-root-node"></div>';this.wrap=this.ctNode=A.firstChild;}},collapse:function(){},expand:function(){}});actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.TreePanel=actuate.Class.create();actuate.widget.tree.TreePanel.superclass=actuate.widget.panel.Panel.prototype;actuate.widget.tree.TreePanel.prototype=actuate.Class.extend(new actuate.widget.panel.Panel(),{rootVisible:true,animate:false,lines:true,enableDD:false,hlDrop:false,pathSeparator:"/",initialize:function(B){actuate.widget.tree.TreePanel.superclass.initialize.call(this,B);if(!this.eventModel){this.eventModel=new actuate.widget.tree.TreeEventModel(this);}var A=this.loader;if(!A){A=new actuate.widget.tree.TreeLoader({icons:this.icons,dataStore:this.dataStore});}else{if(typeof A=="object"&&!A.load){A=new actuate.widget.tree.TreeLoader(A);}}this.loader=A;this.nodeHash={};if(this.singleExpand){this.registerEventHandler("beforeexpandnode",actuate.Method.bind(this._restrictExpand,this));}},getStore:function(){return this.dataStore;},setStore:function(A){this.dataStore=A;this.loader=new actuate.widget.tree.TreeLoader({icons:this.icons,dataStore:this.dataStore});this.root=this.dataStore.getRoot();this.setRootNode(this.root);},clear:function(){this.setStore(new actuate.widget.tree.TreeStore([]));},refresh:function(){this.setStore(this.getStore());},_proxyNodeEvent:function(C,B,A,G,F,E,D){if(C=="collapse"||C=="expand"||C=="beforecollapse"||C=="beforeexpand"||C=="move"||C=="beforemove"){C=C+"node";}return this.fireEvent(C,B,A,G,F,E,D);},getRootNode:function(){return this.root;},setRootNode:function(B){if(!B.render){B=this.loader.createNode(B);}this.root=B;B.ownerTree=this;B.isRoot=true;this._registerNode(B);if(!this.rootVisible){var A=B.attributes.uiProvider;B.ui=A?new A(B):new actuate.widget.tree.RootTreeNodeUI(B);}if(this.rendered){this.root.render();if(!this.rootVisible){this.root.renderChildren();}}return B;},getNodeById:function(A){return this.nodeHash[A];},_registerNode:function(A){this.nodeHash[A.id]=A;},_unregisterNode:function(A){delete this.nodeHash[A.id];},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]";},_restrictExpand:function(A){var B=A.parentNode;if(B){if(B.expandedChild&&B.expandedChild.parentNode==B){B.expandedChild.collapse();}B.expandedChild=A;}},getChecked:function(A,B){B=B||this.root;var C=[];var D=function(){if(this.attributes.checked){C.push(!A?this:(A=="id"?this.id:this.attributes[A]));}};B.cascade(D);return C;},getLoader:function(){return this.loader;},expandAll:function(){this.root.expand(true);},expandDeeps:function(A){this.root.collapse(true);this._expand(this.root,A);},_expand:function(C,D){if(C&&D!=null&&D>0){var A=C.childNodes;var B=A.length;if(D>1){C.expandChildNodes(true);while(B>0){this.expandDeeps(A[B-1],D-1);B--;}}else{if(B>0){C.expandChildNodes(false);}}}},collapseAll:function(){this.root.collapse(true);},getSelectionModel:function(){if(!this.selModel){this.selModel=new actuate.widget.tree.DefaultSelectionModel();}return this.selModel;},expandPath:function(F,A,G){A=A||"id";var D=F.split(this.pathSeparator);var C=this.root;if(C.attributes[A]!=D[1]){if(G){G(false,null);}return ;}var B=1;var E=function(){if(++B==D.length){if(G){G(true,C);}return ;}var H=C.findChild(A,D[B]);if(!H){if(G){G(false,C);}return ;}C=H;H.expand(false,false,E);};C.expand(false,false,E);},selectPath:function(E,A,F){A=A||"id";var C=E.split(this.pathSeparator);var B=C.pop();if(C.length>0){var D=function(H,G){if(H&&G){var I=G.findChild(A,B);if(I){I.select();if(F){F(true,I);}}else{if(F){F(false,I);}}}else{if(F){F(false,I);}}};this.expandPath(C.join(this.pathSeparator),A,D);}else{this.root.select();if(F){F(true,this.root);}}},getTreeEl:function(){return this.body;},_onRender:function(B,A){actuate.widget.tree.TreePanel.superclass._onRender.call(this,B,A);this.getEl().addClass("actuate-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"actuate-tree-root-ct "+(this.useArrows?"actuate-tree-arrows":this.lines?"actuate-tree-lines":"actuate-tree-no-lines")});},_initEvents:function(){actuate.widget.tree.TreePanel.superclass._initEvents.call(this);if(this.containerScroll){actuate.widget.dd.ScrollManager.register(this.body);}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new actuate.widget.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true});}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new actuate.widget.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll});}this.getSelectionModel().applyTo(this);},_afterRender:function(){actuate.widget.tree.TreePanel.superclass._afterRender.call(this);if(this.root){this.setRootNode(this.root);}else{if(this.dataStore){this.root=this.dataStore.getRoot();this.setRootNode(this.root);}}},onDestroy:function(){if(this.rendered){this.body.removeAllListeners();actuate.widget.dd.ScrollManager.unregister(this.body);if(this.dropZone){this.dropZone.unreg();}if(this.dragZone){this.dragZone.unreg();}}this.root.destroy();this.nodeHash=null;actuate.widget.tree.TreePanel.superclass.onDestroy.call(this);}});actuate.widget.Component.prototype.registerType("treepanel",actuate.widget.tree.TreePanel);actuate.util.Package.define("actuate.widget.tree");actuate.widget.tree.DefaultSelectionModel=actuate.Class.create();actuate.widget.tree.DefaultSelectionModel.superclass=actuate.widget.Observable.prototype;actuate.widget.tree.DefaultSelectionModel.prototype=actuate.Class.extend(new actuate.widget.Observable(),{initialize:function(A){this.selNode=null;actuate.widget.tree.DefaultSelectionModel.superclass.initialize.call(this,A);this.registerEventHandler("beforeselect",actuate.Method.bind(this._onBeforeSelect,this));},_onBeforeSelect:function(A,C,B){if(C&&C.disabled){return false;}return true;},applyTo:function(A){this.tree=A;A.getTreeEl().on("keydown",this.onKeyDown,this);A.registerEventHandler("click",actuate.Method.bind(this.onNodeClick,this));},onNodeClick:function(A,B){this.select(A);},select:function(C,A){var B=this.selNode;if(B!=C&&(A||this.fireEvent("beforeselect",this,C,B)!==false)){if(B){B.ui.onSelectedChange(false);}this.selNode=C;C.ui.onSelectedChange(true);if(!A){this.fireEvent("selectionchange",this,C,B);}}return C;},unselect:function(A){if(this.selNode==A){this.clearSelections();}},clearSelections:function(){var A=this.selNode;if(A){A.ui.onSelectedChange(false);this.selNode=null;this.fireEvent("selectionchange",this,null,A);}return A;},getSelectedNode:function(){return this.selNode;},isSelected:function(A){return this.selNode==A;},selectPrevious:function(){var A=this.selNode||this.lastSelNode;if(!A){return null;}var B=this._getPreviousEnabledNode(A);if(B){return this.select(B);}return null;},_canSelect:function(B){if(B&&!B.disabled&&(this.tree.rootVisible||!B.isRoot)){var A=this.selNode;return(A==B||this.fireEvent("beforeselect",this,B,A)!==false);}return false;},_getPreviousEnabledNode:function(B){if(B==null){return null;}var C=B.previousSibling;if(C){while(C.isExpanded()&&C.childNodes.length>0){C=C.lastChild;}if(!this._canSelect(C)){return this._getPreviousEnabledNode(C);}else{if(!C.isExpanded()||C.childNodes.length<1){return C;}else{var A=C.lastChild;while(A&&A.isExpanded()&&A.childNodes.length>0){A=A.lastChild;}return A;}}}else{if(this._canSelect(B.parentNode)){return B.parentNode;}else{return this._getPreviousEnabledNode(B.parentNode);}}return null;},selectNext:function(){var A=this.selNode||this.lastSelNode;if(!A){return null;}var B=this._getNextEnabledNode(A);if(B){return this.select(B);}return null;},_getNextEnabledNode:function(B){if(B==null){return null;}if(B.firstChild&&B.isExpanded()){if(!this._canSelect(B.firstChild)){return this._getNextEnabledNode(B.firstChild);}return B.firstChild;}else{if(B.nextSibling){if(!this._canSelect(B.nextSibling)){return this._getNextEnabledNode(B.nextSibling);}return B.nextSibling;}else{if(B.parentNode){var A=null;B.parentNode.bubble(function(){if(this.nextSibling){A=this.nextSibling;return false;}});if(!this._canSelect(A)){return this._getNextEnabledNode(A);}return A;}}}return null;},onKeyDown:function(C){var B=this.selNode||this.lastSelNode;var D=this;if(!B){return ;}var A=C.getKey();switch(A){case C.DOWN:C.stopEvent();this.selectNext();break;case C.UP:C.stopEvent();this.selectPrevious();break;case C.RIGHT:C.preventDefault();if(B.hasChildNodes()){if(!B.isExpanded()){B.expand();}else{if(B.firstChild){this.select(B.firstChild,C);}}}break;case C.LEFT:C.preventDefault();if(B.hasChildNodes()&&B.isExpanded()){B.collapse();}else{if(B.parentNode&&(this.tree.rootVisible||B.parentNode!=this.tree.getRootNode())){this.select(B.parentNode,C);}}break;default:break;}}});actuate.widget.tree.MultiSelectionModel=actuate.Class.create();actuate.widget.tree.MultiSelectionModel.superclass=actuate.widget.tree.DefaultSelectionModel.prototype;actuate.widget.tree.MultiSelectionModel.prototype=actuate.Class.extend(new actuate.widget.tree.DefaultSelectionModel(),{initialize:function(B,A){this.selNodes=[];this.selMap={};actuate.widget.tree.MultiSelectionModel.superclass.initialize.call(this,B,A);},applyTo:function(A){this.tree=A;A.getTreeEl().on("keydown",this.onKeyDown,this);A.registerEventHandler("click",actuate.Method.bind(this.onNodeClick,this));},onNodeClick:function(A,B){this.select(A,B,B.ctrlKey);},select:function(A,C,B){if(this.isSelected(A)||this.fireEvent("beforeselect",this,A,this.lastSelNode)!==false){if(B!==true){this.clearSelections(true);}if(this.isSelected(A)){this.lastSelNode=A;return A;}this.selNodes.push(A);this.selMap[A.id]=A;this.lastSelNode=A;A.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return A;}},unselect:function(B){if(this.selMap[B.id]){B.ui.onSelectedChange(false);var C=this.selNodes;var A=actuate.util.Utility.indexOf(C,B);if(A!=-1){this.selNodes.splice(A,1);}delete this.selMap[B.id];this.fireEvent("selectionchange",this,this.selNodes);}},clearSelections:function(B){var E=this.selNodes;var C=E.slice(0);if(E.length>0){for(var D=0,A=E.length;D<A;D++){E[D].ui.onSelectedChange(false);}this.selNodes=[];this.selMap={};if(B!==true){this.fireEvent("selectionchange",this,this.selNodes,C);}}},isSelected:function(A){return this.selMap[A.id]?true:false;},getSelectedNodes:function(){return this.selNodes;}});actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.SummaryTableTreeNodeUI=actuate.Class.create();actuate.widget.custom.SummaryTableTreeNodeUI.prototype=actuate.Class.extend(new actuate.widget.tree.TreeNodeUI(),{initialize:function(A){actuate.widget.tree.TreeNodeUI.prototype.initialize.call(this,A);this._popupDateMenuHandler_c=actuate.Method.bind(this._popupDateMenuHandler,this);this._dateTimeFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.dateValue"),value:"none"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.year"),value:"year"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.quarter"),value:"quarter"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.month"),value:"month"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.week"),value:"week"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.day"),value:"day"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.hour"),value:"hour"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.minute"),value:"minute"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.second"),value:"second"});this._dateFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.dateValue"),value:"none"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.year"),value:"year"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.quarter"),value:"quarter"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.month"),value:"month"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.week"),value:"week"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.day"),value:"day"});this._timeFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.dateValue"),value:"none"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.hour"),value:"hour"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.minute"),value:"minute"},{name:actuate.util.Utility.getLocalizedString("summaryTableBuilder.interval.type.second"),value:"second"});},_getIntervalName:function(B){for(var A=0;A<this._dateTimeFunctionList.length;A++){if(this._dateTimeFunctionList[A].value==B){return this._dateTimeFunctionList[A].name;}}},_popupDateFunctionMenu:function(B){if(!this._dateMenu){this._dateMenu=new actuate.widget.menu.Menu({id:"actuate_dialog_SummaryTableDataTab_dateFunctionPopupMenu"});}this._dateMenu.removeAll();var C="date";if(this.node.attributes.dataType=="date-time"){for(var A=0;A<this._dateTimeFunctionList.length;A++){this._dateMenu.addMenuItem({id:this._dateTimeFunctionList[A].value,text:this._dateTimeFunctionList[A].name,group:C,handler:this._popupDateMenuHandler_c});}}else{if(this.node.attributes.dataType=="date"){for(var A=0;A<this._dateFunctionList.length;A++){this._dateMenu.addMenuItem({id:this._dateFunctionList[A].value,text:this._dateFunctionList[A].name,group:C,handler:this._popupDateMenuHandler_c});}}else{if(this.node.attributes.dataType=="time"){for(var A=0;A<this._timeFunctionList.length;A++){this._dateMenu.addMenuItem({id:this._timeFunctionList[A].value,text:this._timeFunctionList[A].name,group:C,handler:this._popupDateMenuHandler_c});}}}}this._dateMenu.show(B);},_popupDateMenuHandler:function(D){var C=this.node;this.node.attributes.dateFunction=D.text;this.node.attributes.dateFunctionValue=D.id;var B=this.elNode.getElementsByTagName("span");for(var A=0;A<B.length;A++){if(B[A].className=="actuate-custom-nodeui-date"){if(B[A].innerText){B[A].innerText=this.node.attributes.dateFunction;break;}else{if(B[A].textContent){B[A].textContent=this.node.attributes.dateFunction;break;}}}}},showMenu:function(A){var D=this.elNode.getElementsByTagName("span");var C=null;for(var B=0;B<D.length;B++){if(D[B].className=="actuate-custom-nodeui"){C=D[B];break;}}if(A==false){C.style.display="none";}else{C.style.display="";}},onClick:function(C){if(this.dropping){C.stopEvent();return ;}var B=actuate.widget.Element.fly(C.target);if(B&&B.hasClass("actuate-summarytable-img")){if(this.disabled!=true){this._popupDateFunctionMenu(B.parent());}return ;}if(this._fireEvent("beforeclick",this.node,C)!==false){var A=C.getTarget("a");if(!this.disabled&&this.node.attributes.href&&A){this._fireEvent("click",this.node,C);return ;}else{if(A&&C.ctrlKey){C.stopEvent();}}C.preventDefault();if(this.disabled){return ;}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle();}this._fireEvent("click",this.node,C);}else{C.stopEvent();}},onDisableChange:function(A,B){this.disabled=B;if(this.checkbox){this.checkbox.disabled=B;}if(B){this.addClass("actuate-tree-node-disabled");this.dateFunctionNode.style.color="gray";this.elNode.style.cursor="default";}else{this.removeClass("actuate-tree-node-disabled");this.dateFunctionNode.style.color="black";this.elNode.style.cursor="pointer";}},_renderElements:function(D,J,I,K){this.indentMarkup=D.parentNode?D.parentNode.ui._getChildIndent():"";var F='<span style="margin-left:40px;" class="actuate-custom-nodeui">'+'<span class="actuate-custom-nodeui-date">'+J.dateFunction+"</span>"+'<img style=" vertical-align:bottom;" class="actuate-summarytable-img" src=\''+actuate.getDefaultIportalUrl()+"iportal/jsapi/actuate/dialog/images/dropdown-arrow.png'/>"+"</span>";var M="";if(J.title){M=("title"+'="'+actuate.util.Utility.htmlEncode(J.title,true)+'"');}var E=typeof J.checked=="boolean";var B=J.href?J.href:actuate.util.Utility.isGecko?"":"#";var L=(J.strong?"<strong>":"")+D.text+(J.strong?"</strong>":"");var C=['<li class="actuate-tree-node"><div ext:tree-node-id="',D.id,'" class="actuate-tree-node-el actuate-tree-node-leaf actuate-unselectable ',J.cls,'" unselectable="on">','<span class="actuate-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="actuate-tree-ec-icon actuate-tree-elbow" />','<img src="',J.icon||this.emptyIcon,'" class="actuate-tree-node-icon',(J.icon?" actuate-tree-node-inline-icon":""),(J.iconCls?" "+J.iconCls:""),'" unselectable="on" />',E?('<input class="actuate-tree-node-cb" type="checkbox" '+(J.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="actuate-tree-node-anchor"',' href="',B,'" tabIndex="1" ',J.hrefTarget?' target="'+J.hrefTarget+'"':"","><span "+M+' unselectable="on">',L,"</span></a>"+F+"</div>",'<ul class="actuate-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var A;if(K!==true&&D.nextSibling&&(A=D.nextSibling.ui._getEl())){this.wrap=actuate.widget.DomHelper.insertHtml("beforeBegin",A,C);}else{this.wrap=actuate.widget.DomHelper.insertHtml("beforeEnd",I,C);}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var H=this.elNode.childNodes;this.indentNode=H[0];this.ecNode=H[1];this.iconNode=H[2];this.dateFunctionNode=H[4];var G=3;if(E){this.checkbox=H[3];this.checkbox.defaultChecked=this.checkbox.checked;G++;}this.anchor=H[G];this.textNode=H[G].firstChild;}});actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.CrosstabBuilderTreeNodeUI=actuate.Class.create();actuate.widget.custom.CrosstabBuilderTreeNodeUI.prototype=actuate.Class.extend(new actuate.widget.tree.TreeNodeUI(),{popupMenu:false,attributeNodeId:"ext:tree-node-id",initialize:function(A){actuate.widget.tree.TreeNodeUI.prototype.initialize.call(this,A);this._popupAggrFuncMenuHandler_c=actuate.Method.bind(this._popupAggrFuncMenuHandler,this);this.numericFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.SUM"),value:"SUM"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.AVE"),value:"AVE"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MEDIAN"),value:"MEDIAN"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.STDDEV"),value:"STDDEV"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.VARIANCE"),value:"VARIANCE"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MODE"),value:"MODE"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.FIRST"),value:"FIRST"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.LAST"),value:"LAST"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.COUNT"),value:"COUNT"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MAX"),value:"MAX"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MIN"),value:"MIN"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.COUNTDISTINCT"),value:"COUNTDISTINCT"});this.dateFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.DATEGROUP"),value:"DATEGROUP"});this.nonNumericFunctionList=new Array({name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.FIRST"),value:"FIRST"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.LAST"),value:"LAST"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.COUNT"),value:"COUNT"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MAX"),value:"MAX"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.MIN"),value:"MIN"},{name:actuate.util.Utility.getLocalizedString("crosstabBuilderDialog.functionItem.COUNTDISTINCT"),value:"COUNTDISTINCT"});},_getFunctionName:function(C){for(var B in this.numericFunctionList){if(this.numericFunctionList[B].value==C.toUpperCase()){return this.numericFunctionList[B].name;}}for(var A in this.dateFunctionList){if(this.dateFunctionList[A].value==C.toUpperCase()){return this.dateFunctionList[A].name;}}return"";},_popupFunctionMenu:function(E){if(this.node.attributes.isDateInterval=="true"){if(!this.dateGroupingdlg){this.dateGroupingdlg=new actuate.dialog.impl.helper.crosstabbuilder.CrosstabDateGroupingDialog();}var D={};D.name=this.node.text;D.dataType=this.node.attributes.dataType;D.timeLevels=this.node.attributes.timeLevels;this.dateGroupingdlg._bind(D,this.node);this.dateGroupingdlg.show();return ;}if(!this._aggrFuncMenu){this._aggrFuncMenu=new actuate.widget.menu.Menu({id:"actuate_dialog_XtabBuilderDataTab_FunctionPopupMenu"});}this._aggrFuncMenu.removeAll();var B="aggrFunc";var A=this._getFunctionList();for(var C=0;C<A.length;C++){this._aggrFuncMenu.addMenuItem({id:A[C].value,text:A[C].name,group:B,handler:this._popupAggrFuncMenuHandler_c});}this._aggrFuncMenu.show(E);},_popupAggrFuncMenuHandler:function(E){var D=this.node;this.node.attributes.aggrFunctionValue=E.id;if(!this.node.attributes.isSelfDefinedMeasureName){var A=this.node.getOwnerTree();A._unregisterNode(this.node);var F=this.node.attributes.groupId+"("+E.id+")";this.node.id=F;this.node.attributes.id=F;this.elNode.setAttribute(this.attributeNodeId,F);A._registerNode(this.node);this.node.setText(F);}var C=this.elNode.getElementsByTagName("span");for(var B=0;B<C.length;B++){if(C[B].className=="actuate-custom-nodeui-date"){if(C[B].innerText){C[B].innerText=this._getFunctionName(this.node.attributes.aggrFunctionValue);break;}else{if(C[B].textContent){C[B].textContent=this._getFunctionName(this.node.attributes.aggrFunctionValue);break;}}}}},showMenu:function(A){var D=this.elNode.getElementsByTagName("span");var C=null;for(var B=0;B<D.length;B++){if(D[B].className=="actuate-custom-nodeui"){C=D[B];break;}}if(A==false){C.style.display="none";}else{C.style.display="";}},showDropDownArrow:function(A){var D=this.elNode.getElementsByTagName("img");var B=null;for(var C=0;C<D.length;C++){if(D[C].className=="actuate-summarytable-img"){B=D[C];break;}}if(A==false){B.style.display="none";}else{B.style.display="";}},onClick:function(C){if(this.dropping){C.stopEvent();return ;}var B=actuate.widget.Element.fly(C.target);if(B&&B.hasClass("actuate-summarytable-img")){if(this.disabled!=true&&this.popupMenu){this._popupFunctionMenu(B.parent());}return ;}if(this._fireEvent("beforeclick",this.node,C)!==false){var A=C.getTarget("a");if(!this.disabled&&this.node.attributes.href&&A){this._fireEvent("click",this.node,C);return ;}else{if(A&&C.ctrlKey){C.stopEvent();}}C.preventDefault();if(this.disabled){return ;}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle();}this._fireEvent("click",this.node,C);}else{C.stopEvent();}},onDisableChange:function(A,B){this.disabled=B;if(this.checkbox){this.checkbox.disabled=B;}if(B){this.addClass("actuate-tree-node-disabled");this.dateFunctionNode.style.color="gray";this.elNode.style.cursor="default";}else{this.removeClass("actuate-tree-node-disabled");this.dateFunctionNode.style.color="black";this.elNode.style.cursor="pointer";}},_renderElements:function(D,J,I,K){this.indentMarkup=D.parentNode?D.parentNode.ui._getChildIndent():"";var E=this._getFunctionName(J.aggrFunctionValue);var G='<span style="float:right;" class="actuate-custom-nodeui">'+'<span class="actuate-custom-nodeui-date">'+E+"</span>"+'<img style=" vertical-align:bottom;" class="actuate-summarytable-img" src=\''+actuate.getDefaultIportalUrl()+"iportal/jsapi/actuate/dialog/images/dropdown-arrow.png'/>"+"</span>";var M="";if(J.title){M=("title"+'="'+actuate.util.Utility.htmlEncode(J.title,true)+'"');}var F=typeof J.checked=="boolean";var B=J.href?J.href:actuate.util.Utility.isGecko?"":"#";var L=(J.strong?"<strong>":"")+D.text+(J.strong?"</strong>":"");var C=['<li class="actuate-tree-node"><div '+this.attributeNodeId+'="',D.id,'" class="actuate-tree-node-el actuate-tree-node-leaf actuate-unselectable ',J.cls,'" unselectable="on" style="float:left;width:100%;">','<div style="float:left;"><span class="actuate-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="actuate-tree-ec-icon actuate-tree-elbow" />','<img src="',J.icon||this.emptyIcon,'" class="actuate-tree-node-icon',(J.icon?" actuate-tree-node-inline-icon":""),(J.iconCls?" "+J.iconCls:""),'" unselectable="on" />',F?('<input class="actuate-tree-node-cb" type="checkbox" '+(J.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="actuate-tree-node-anchor"',' href="',B,'" tabIndex="1" ',J.hrefTarget?' target="'+J.hrefTarget+'"':"","><span "+M+' unselectable="on">',L,"</span></a></div>"+G+"</div>",'<ul class="actuate-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var A;if(K!==true&&D.nextSibling&&(A=D.nextSibling.ui._getEl())){this.wrap=actuate.widget.DomHelper.insertHtml("beforeBegin",A,C);}else{this.wrap=actuate.widget.DomHelper.insertHtml("beforeEnd",I,C);}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var H=this.elNode.childNodes;this.indentNode=H[0].childNodes[0];this.ecNode=H[0].childNodes[1];this.iconNode=H[0].childNodes[2];this.dateFunctionNode=H[1].childNodes[0];this.anchor=H[0].childNodes[3];this.textNode=H[0].childNodes[3].firstChild;},_getFunctionList:function(){var A=[];var B=this.numericFunctionList;if(!actuate.util.Utility.isNumericalType(this.node.attributes.dataType)){B=this.nonNumericFunctionList;}var D=[];var G=this.node.parentNode.childNodes;for(var E=0;E<G.length;E++){var C=G[E];if(C.attributes.groupId==this.node.attributes.groupId){D.push(C.attributes.aggrFunctionValue.toUpperCase());}}for(var E=0;E<B.length;E++){var F=B[E].value;if(!actuate.util.Utility.arrayContains(D,F)){A.push(B[E]);}}return A;},_noComma:null});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.BaseItem=actuate.Class.create();actuate.widget.menu.BaseItem.superclass=actuate.widget.Component.prototype;actuate.widget.menu.BaseItem.prototype=actuate.Class.extend(new actuate.widget.Component(),{canActivate:false,activeClass:"actuate-widget-menu-item-active",hideOnClick:true,hideDelay:100,ctype:"Ext.menu.BaseItem",_actionMode:"container",initialize:function(A){actuate.widget.menu.BaseItem.superclass.initialize.call(this,A);if(this.handler){this.registerEventHandler("click",actuate.Method.bind(this.handler,this));}},render:function(A,B){this.parentMenu=B;actuate.widget.menu.BaseItem.superclass.render.call(this,A);this.container.menuItemId=this.id;},_onRender:function(B,A){this._ele=actuate.widget.Element.get(this._ele);if(this.id){this._ele.id=this.id;}B.dom.appendChild(this._ele.dom);},setHandler:function(B,A){if(this.handler){this.unregisterEventHandler("click",actuate.Method.bind(this.handler,this));}this.registerEventHandler("click",actuate.Method.bind(this.handler=B,this));},onClick:function(A){if(!this.disabled&&this.fireEvent("click",this,A)!==false&&this.parentMenu.fireEvent("itemclick",this,A)!==false){this._handleClick(A);}else{A.stopEvent();}},activate:function(){if(this.disabled){return false;}var A=this.container;A.addClass(this.activeClass);this.region=A.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true;},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this);},shouldDeactivate:function(A){return !this.region||!this.region.contains(A.getPoint());},_handleClick:function(A){if(this.hideOnClick){actuate.Method.defer(this.hideDelay,this.parentMenu.hide,this.parentMenu,[true]);}},expandMenu:function(A){},hideMenu:function(){}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.Menu=actuate.Class.create();actuate.widget.menu.Menu.superclass=actuate.widget.Observable.prototype;actuate.widget.menu.Menu.prototype=actuate.Class.extend(new actuate.widget.Observable(),{minWidth:120,shadow:"drop",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,hidden:true,autoHide:false,_menuHideTimer:null,initialize:function(A){if(this.__extending){return ;}actuate.widget.menu.Menu.superclass.initialize.call(this);if(actuate.util.Utility.isArray(A)){A={items:A};}actuate.util.Utility.apply(this,A);this.id=this.id||actuate.widget.Element.id();actuate.widget.menu.MenuMgr.register(this);var B=this.items;this.items=new actuate.widget.util.MixedCollection();if(actuate.util.Utility.isArray(B)){this.add.apply(this,B);}},createEl:function(){return new actuate.widget.Layer({cls:"actuate-widget-menu",shadow:(actuate.util.Utility.isIE8?this.shadow:false),constrain:false,parentEl:this.parentEl||document.body,zindex:15000});},render:function(){if(this._ele){return ;}var B=this._ele=this.createEl();if(!this.keyNav){this.keyNav=new actuate.widget.menu.MenuNav(this);}if(this.plain){B.addClass("actuate-widget-menu-plain");}if(this.cls){B.addClass(this.cls);}this.focusEl=B.createChild({tag:"a",cls:"actuate-widget-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});var A=B.createChild({tag:"ul",cls:"actuate-widget-menu-list"});A.on("click",this.onClick,this);A.on("mouseover",this.onMouseOver,this);A.on("mouseout",this.onMouseOut,this);this.items.each(function(D){var C=document.createElement("li");C.className="actuate-widget-menu-list-item";A.dom.appendChild(C);D.render(C,this);},this);this.ul=A;this.autoWidth();},autoWidth:function(){var C=this._ele,B=this.ul;if(!C){return ;}var A=this.width;if(A){C.setWidth(A);}else{if(actuate.util.browser.isIEFlag&&!actuate.util.browser.isIE8Flag){A=C.dom.scrollWidth||this.minWidth;if(A<this.minWidth){A=this.minWidth;}C.setWidth(A+C.getFrameWidth("lr"));}}},delayAutoWidth:function(){if(this._ele){if(!this.awTask){this.awTask=new actuate.widget.util.DelayedTask(this.autoWidth,this);}this.awTask.delay(20);}},findTargetItem:function(B){var A=B.getTarget(".actuate-widget-menu-list-item",this.ul,true);if(A&&A.menuItemId){return this.items.get(A.menuItemId);}},onClick:function(B){var A;if(A=this.findTargetItem(B)){if(A.menu&&this.ignoreParentClicks){A.expandMenu();}else{A.onClick(B);this.fireEvent("click",this,A,B);}}},setActiveItem:function(A,B){if(A!=this.activeItem){if(this.activeItem){this.activeItem.deactivate();}this.activeItem=A;A.activate(B);}else{if(B){A.expandMenu();}}},tryActivate:function(F,E){var B=this.items;for(var C=F,A=B.length;C>=0&&C<A;C+=E){var D=B.get(C);if(!D.disabled&&D.canActivate){this.setActiveItem(D,false);return D;}}return false;},onMouseOver:function(B){var A;if(A=this.findTargetItem(B)){if(A.canActivate&&!A.disabled){this.setActiveItem(A,true);}}this.over=true;if(this._menuHideTimer){window.clearTimeout(this._menuHideTimer);this._menuHideTimer=null;}this.fireEvent("mouseover",this,B,A);},onMouseOut:function(B){var A;if(A=this.findTargetItem(B)){if(A==this.activeItem&&A.shouldDeactivate(B)){this.activeItem.deactivate();delete this.activeItem;}}this.over=false;if(this.autoHide){if(this._menuHideTimer){window.clearTimeout(this._menuHideTimer);}this._menuHideTimer=window.setTimeout(actuate.Method.bind(this.hide,this),300);}this.fireEvent("mouseout",this,B,A);},isVisible:function(){return this._ele&&!this.hidden;},show:function(B,C,A){this.parentMenu=A;if(!this._ele){this.render();}this.fireEvent("beforeshow",this);this.showAt(this._ele.getAlignToXY(B,C||this.defaultAlign),A,false);},showAt:function(C,B,A){this.parentMenu=B;if(!this._ele){this.render();}if(A!==false){this.fireEvent("beforeshow",this);C=this._ele.adjustForConstraints(C);}this._ele.setXY(C);this._ele.show();this.hidden=false;this.focus();this.fireEvent("show",this);},focus:function(){if(!this.hidden){actuate.Method.defer(50,this.doFocus,this);}},doFocus:function(){if(!this.hidden){this.focusEl.focus();}},hide:function(A){if(this._ele&&this.isVisible()){this.fireEvent("beforehide",this);if(this.activeItem){this.activeItem.deactivate();this.activeItem=null;}this._ele.hide();this.hidden=true;this.fireEvent("hide",this);}if(A===true&&this.parentMenu){this.parentMenu.hide(true);}},add:function(){var B=arguments,A=B.length,E;for(var C=0;C<A;C++){var D=B[C];if(!D){continue;}if(D.render){E=this.addItem(D);}else{if(typeof D=="string"){if(D=="separator"||D=="-"){E=this.addSeparator();}else{E=this.addText(D);}}else{if(D.tagName||D.el){E=this.addElement(D);}else{if(typeof D=="object"){actuate.util.Utility.applyIf(D,this.defaults);E=this.addMenuItem(D);}}}}}return E;},getEl:function(){if(!this._ele){this.render();}return this._ele;},addSeparator:function(){return this.addItem(new actuate.widget.menu.Separator());},addElement:function(A){return this.addItem(new actuate.widget.menu.BaseItem(A));},addItem:function(B){this.items.add(B);if(this.ul){var A=document.createElement("li");A.className="actuate-widget-menu-list-item";this.ul.dom.appendChild(A);B.render(A,this);this.delayAutoWidth();}return B;},addMenuItem:function(A){if(!(A instanceof actuate.widget.menu.Item)){if(typeof A.checked=="boolean"){A=new actuate.widget.menu.CheckItem(A);}else{A=new actuate.widget.menu.Item(A);}}return this.addItem(A);},addText:function(A){return this.addItem(new actuate.widget.menu.TextItem(A));},insert:function(B,C){this.items.insert(B,C);if(this.ul){var A=document.createElement("li");A.className="actuate-widget-menu-list-item";this.ul.dom.insertBefore(A,this.ul.dom.childNodes[B]);C.render(A,this);this.delayAutoWidth();}return C;},remove:function(A){this.items.removeKey(A.id);A.destroy();},removeAll:function(){if(this.items){var A;while(A=this.items.first()){this.remove(A);}}},destroy:function(){this._beforeDestroy();actuate.widget.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable();}this.removeAll();if(this.ul){this.ul.removeAllListeners();}if(this._ele){this._ele.destroy();}},_beforeDestroy:actuate.Method.empty});actuate.widget.menu.MenuNav=function(A){actuate.widget.menu.MenuNav.superclass.initialize.call(this,A.el);this.scope=this.menu=A;};actuate.widget.menu.MenuNav=actuate.Class.extendClass(actuate.widget.KeyNav,{initialize:function(A){actuate.widget.menu.MenuNav.superclass.initialize.call(this,A._ele);this.scope=this.menu=A;},doRelay:function(C,B){var A=C.getKey();if(!this.menu.activeItem&&C.isNavKeyPress()&&A!=C.SPACE&&A!=C.RETURN){this.menu.tryActivate(0,1);return false;}return B.call(this.scope||this,C,this.menu);},up:function(B,A){if(!A.tryActivate(A.items.indexOf(A.activeItem)-1,-1)){A.tryActivate(A.items.length-1,-1);}},down:function(B,A){if(!A.tryActivate(A.items.indexOf(A.activeItem)+1,1)){A.tryActivate(0,1);}},right:function(B,A){if(A.activeItem){A.activeItem.expandMenu(true);}},left:function(B,A){A.hide();if(A.parentMenu&&A.parentMenu.activeItem){A.parentMenu.activeItem.activate();}},enter:function(B,A){if(A.activeItem){B.stopPropagation();A.activeItem.onClick(B);A.fireEvent("click",this,A.activeItem);return true;}}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.Item=actuate.Class.create();actuate.widget.menu.Item.superclass=actuate.widget.menu.BaseItem.prototype;actuate.widget.menu.Item.prototype=actuate.Class.extend(new actuate.widget.menu.BaseItem(),{itemCls:"actuate-widget-menu-item",canActivate:true,showDelay:200,hideDelay:200,ctype:"Ext.menu.Item",initialize:function(A){actuate.widget.menu.Item.superclass.initialize.call(this,A);if(this.menu){this.menu=actuate.widget.menu.MenuMgr.get(this.menu);}},_onRender:function(B,A){var C=document.createElement("a");C.hideFocus=true;C.unselectable="on";C.href=this.href||"#";if(this.hrefTarget){C.target=this.hrefTarget;}if(this.title){C.title=this.title;}C.className=this.itemCls+(this.menu?" actuate-widget-menu-item-arrow":"")+(this.cls?" "+this.cls:"");C.innerHTML=actuate.util.String.format('<img src="{0}" class="actuate-widget-menu-item-icon {2}" />{1}',this.icon||actuate.widget.BLANK_IMAGE_URL,this.itemText||this.text,this.iconCls||"");this._ele=C;actuate.widget.menu.Item.superclass._onRender.call(this,B,A);},setText:function(A){this.text=A;if(this.rendered){this._ele.update(actuate.util.String.format('<img src="{0}" class="actuate-widget-menu-item-icon {2}">{1}',this.icon||actuate.widget.BLANK_IMAGE_URL,this.text,this.iconCls||""));this.parentMenu.autoWidth();}},setIconClass:function(A){var B=this.iconCls;this.iconCls=A;if(this.rendered){this._ele.child("img.actuate-widget-menu-item-icon").replaceClass(B,this.iconCls);}},_beforeDestroy:function(){if(this.menu){this.menu.destroy();}actuate.widget.menu.Item.superclass._beforeDestroy.call(this);},_handleClick:function(A){if(!this.href){A.stopEvent();}actuate.widget.menu.Item.superclass._handleClick.apply(this,arguments);},activate:function(A){if(actuate.widget.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(A){this.expandMenu();}if(this.iconCls&&this.iconActiveCls&&this._ele.child("img.actuate-widget-menu-item-icon")){this._ele.child("img.actuate-widget-menu-item-icon").replaceClass(this.iconCls,this.iconActiveCls);}}return true;},shouldDeactivate:function(A){if(actuate.widget.menu.Item.superclass.shouldDeactivate.call(this,A)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(A.getPoint());}return true;}return false;},deactivate:function(){actuate.widget.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu();if(this.iconCls&&this.iconActiveCls&&this._ele.child("img.actuate-widget-menu-item-icon")){this._ele.child("img.actuate-widget-menu-item-icon").replaceClass(this.iconActiveCls,this.iconCls);}},expandMenu:function(A){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){actuate.Method.defer(this.showDelay,this._deferExpand,this,[A]);}else{if(this.menu.isVisible()&&A){this.menu.tryActivate(0,1);}}}},_deferExpand:function(A){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(A){this.menu.tryActivate(0,1);}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=actuate.Method.defer(this.hideDelay,this._deferHide,this);}},_deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false);}else{this.menu.hide();}}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.Adapter=actuate.Class.create();actuate.widget.menu.Adapter.superclass=actuate.widget.menu.BaseItem.prototype;actuate.widget.menu.Adapter.prototype=actuate.Class.extend(new actuate.widget.menu.BaseItem(),{canActivate:true,initialize:function(B,A){actuate.widget.menu.Adapter.superclass.initialize.call(this,A);this.component=B;},_onRender:function(B,A){this.component.render(B);this._ele=this.component.getEl();},activate:function(){if(this.disabled){return false;}this.component.focus();this.fireEvent("activate",this);return true;},deactivate:function(){this.fireEvent("deactivate",this);},disable:function(){this.component.disable();actuate.widget.menu.Adapter.superclass.disable.call(this);},enable:function(){this.component.enable();actuate.widget.menu.Adapter.superclass.enable.call(this);}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.CheckItem=actuate.Class.create();actuate.widget.menu.CheckItem.superclass=actuate.widget.menu.Item.prototype;actuate.widget.menu.CheckItem.prototype=actuate.Class.extend(new actuate.widget.menu.Item(),{itemCls:"actuate-widget-menu-item actuate-widget-menu-check-item",groupClass:"actuate-widget-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",initialize:function(A){actuate.widget.menu.CheckItem.superclass.initialize.call(this,A);if(this.checkHandler){this.registerEventHandler("checkchange",actuate.Method.bind(this.checkHandler,this.scope||this));}actuate.widget.menu.MenuMgr.registerCheckable(this);},_onRender:function(A){actuate.widget.menu.CheckItem.superclass._onRender.apply(this,arguments);if(this.group){this._ele.addClass(this.groupClass);}if(this.checked){this.checked=false;this.setChecked(true,true);}},destroy:function(){actuate.widget.menu.MenuMgr.unregisterCheckable(this);actuate.widget.menu.CheckItem.superclass.destroy.apply(this,arguments);},setChecked:function(B,A){if(this.checked!=B&&this.fireEvent("beforecheckchange",this,B)!==false){if(this.container){this.container[B?"addClass":"removeClass"]("actuate-widget-menu-item-checked");}this.checked=B;if(A!==true){this.fireEvent("checkchange",this,B);}}},_handleClick:function(A){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked);}actuate.widget.menu.CheckItem.superclass._handleClick.apply(this,arguments);}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.ColorItem=actuate.Class.extendClass(actuate.widget.menu.Adapter,{initialize:function(A){if(this.__extending){return ;}actuate.widget.menu.ColorItem.superclass.initialize.call(this,new actuate.widget.ColorPalette(A),A);this.palette=this.component;this.relayEvents(this.palette,["select"]);if(this.selectHandler){this.registerEventHandler("select",actuate.Method.bind(this.selectHandler,this));}}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.MenuMgr=function(){var F,D,C={},A=false,K=new Date();function M(){F={};D=new actuate.widget.util.MixedCollection();actuate.widget.Element.getDoc().addKeyListener(27,function(){if(D.length>0){H();}});}function H(){if(D&&D.length>0){var N=D.clone();N.each(function(O){O.hide();});}}function E(N){D.remove(N);if(D.length<1){actuate.widget.Element.getDoc().un("mousedown",L);A=false;}}function J(N){var O=D.last();K=new Date();D.add(N);if(!A){actuate.widget.Element.getDoc().on("mousedown",L);A=true;}if(N.parentMenu){N.getEl().setZIndex(parseInt(N.parentMenu.getEl().getStyle("z-index"),10)+3);N.parentMenu.activeChild=N;}else{if(O&&O.isVisible()){N.getEl().setZIndex(parseInt(O.getEl().getStyle("z-index"),10)+3);}}}function B(N){if(N.activeChild){N.activeChild.hide();}if(N.autoHideTimer){clearTimeout(N.autoHideTimer);delete N.autoHideTimer;}}function G(N){var O=N.parentMenu;if(!O&&!N.allowOtherMenus){H();}else{if(O&&O.activeChild){O.activeChild.hide();}}}function L(N){if(actuate.util.Utility.getTimeElapsed(K)>50&&D.length>0&&!N.getTarget(".actuate-widget-menu")){H();}}function I(O,R){if(R){var Q=C[O.group];for(var P=0,N=Q.length;P<N;P++){if(Q[P]!=O){Q[P].setChecked(false);}}}}return{hideAll:function(){H();},register:function(O){if(!F){M();}F[O.id]=O;O.on("beforehide",B);O.on("hide",E);O.on("beforeshow",G);O.on("show",J);var N=O.group;if(N&&O.hasListener["checkchange"]){if(!C[N]){C[N]=[];}C[N].push(O);O.on("checkchange",onCheck);}},get:function(N){if(typeof N=="string"){if(!F){return null;}return F[N];}else{if(N.id){return N;}else{if(typeof N.length=="number"){return new actuate.widget.menu.Menu({items:N});}else{return new actuate.widget.menu.Menu(N);}}}},unregister:function(O){delete F[O.id];O.un("beforehide",B);O.un("hide",E);O.un("beforeshow",G);O.un("show",J);var N=O.group;if(N&&O.hasListener["checkchange"]){actuate.util.Utility.arrayRemoveValue(C[N],O);O.un("checkchange",onCheck);}},registerCheckable:function(N){var O=N.group;if(O){if(!C[O]){C[O]=[];}C[O].push(N);N.on("beforecheckchange",I);}},unregisterCheckable:function(N){var O=N.group;if(O){actuate.util.Utility.arrayRemoveValue(C[O],N);N.un("beforecheckchange",I);}},getCheckedItem:function(P){var Q=C[P];if(Q){for(var O=0,N=Q.length;O<N;O++){if(Q[O].checked){return Q[O];}}}return null;},setCheckedItem:function(P,R){var Q=C[P];if(Q){for(var O=0,N=Q.length;O<N;O++){if(Q[O].id==R){Q[O].setChecked(true);}}}return null;}};}();actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.Separator=actuate.Class.create();actuate.widget.menu.Separator.superclass=actuate.widget.menu.BaseItem.prototype;actuate.widget.menu.Separator.prototype=actuate.Class.extend(new actuate.widget.menu.BaseItem(),{itemCls:"actuate-widget-menu-sep",hideOnClick:false,initialize:function(A){actuate.widget.menu.Separator.superclass.initialize.call(this,A);},_onRender:function(A){var B=document.createElement("span");B.className=this.itemCls;B.innerHTML="&#160;";this._ele=B;A.addClass("actuate-widget-menu-sep-li");actuate.widget.menu.Separator.superclass._onRender.apply(this,arguments);}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.TextItem=actuate.Class.create();actuate.widget.menu.TextItem.superclass=actuate.widget.menu.BaseItem.prototype;actuate.widget.menu.TextItem.prototype=actuate.Class.extend(new actuate.widget.menu.BaseItem(),{hideOnClick:false,itemCls:"actuate-widget-menu-text",initialize:function(A){if(typeof A=="string"){A={text:A};}actuate.widget.menu.TextItem.superclass.initialize.call(this,A);},_onRender:function(){var A=document.createElement("span");A.className=this.itemCls;A.innerHTML=this.text;this._ele=A;actuate.widget.menu.TextItem.superclass._onRender.apply(this,arguments);}});actuate.util.Package.define("actuate.widget.menu");actuate.widget.menu.ColorMenu=actuate.Class.extendClass(actuate.widget.menu.Menu,{initialize:function(A){if(this.__extending){return ;}actuate.widget.menu.ColorMenu.superclass.initialize.call(this,A);this.plain=true;var B=new actuate.widget.menu.ColorItem(A);this.add(B);this.palette=B.palette;this.relayEvents(B,["select"]);},beforeDestroy:function(){this.palette.destroy();}});actuate.widget.menu.DateItem=actuate.Class.extendClass(actuate.widget.menu.Adapter,{initialize:function(A){actuate.widget.menu.DateItem.superclass.initialize.call(this,new actuate.widget.DatePicker(A),A);this.picker=this.component;this.picker.on("select",this._onSelect,this);this.picker.on("render",function(B){B.getEl().swallowEvent("click");B.container.addClass("actuate-menu-date-item");},this);},_onSelect:function(B,A){this.fireEvent("select",this,A,B);actuate.widget.menu.DateItem.superclass._handleClick.call(this);}});actuate.widget.menu.DateMenu=actuate.Class.extendClass(actuate.widget.menu.Menu,{cls:"actuate-date-menu",initialize:function(A){actuate.widget.menu.DateMenu.superclass.initialize.call(this,A);this.plain=true;var B=new actuate.widget.menu.DateItem(A);this.add(B);this.picker=B.picker;this.relayEvents(B,["select"]);this.on("beforeshow",function(){if(this.picker){this.picker._hideMonthPicker(true);}},this);},_beforeDestroy:function(){this.picker.destroy();}});actuate.widget.Editor=actuate.Class.extendClass(actuate.widget.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:false,cancelOnEsc:false,updateEl:false,initialize:function(B,A){this.field=B;actuate.widget.Editor.superclass.initialize.call(this,A);},_initComponent:function(){actuate.widget.Editor.superclass._initComponent.call(this);},_onRender:function(B,A){this._ele=new actuate.widget.Layer({shadow:this.shadow,cls:"actuate-editor",parentEl:B,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain});this._ele.setStyle("overflow",actuate.util.Utility.isGecko?"auto":"hidden");if(this.field.msgTarget!="title"){this.field.msgTarget="qtip";}this.field.inEditor=true;this.field.render(this._ele);if(actuate.util.Utility.isGecko){this.field._ele.dom.setAttribute("autocomplete","off");}this.field.on("specialkey",this._closure("_onSpecialKey"));if(this.swallowKeys){this.field._ele.swallowEvent(["keydown","keypress"]);}this.field.show();this.field.on("blur",this._closure("_onBlur"));if(this.field.grow){var C=this;this.field.on("autosize",function(){actuate.Method.defer(1,C._ele.sync,C);});}},_onSpecialKey:function(C,B){var A=B.getKey();if(this.completeOnEnter&&A==B.ENTER){B.stopEvent();this.completeEdit();}else{if(this.cancelOnEsc&&A==B.ESC){this.cancelEdit();}else{this.fireEvent("specialkey",C,B);}}if(this.field.triggerBlur&&(A==B.ENTER||A==B.ESC||A==B.TAB)){this.field.triggerBlur();}},startEdit:function(B,C){if(this.editing){this.completeEdit();}this.boundEl=actuate.widget.Element.get(B);var A=C!==undefined?C:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body);}if(this.fireEvent("beforestartedit",this,this.boundEl,A)===false){return ;}this.startValue=A;this.field.setValue(A);this._doAutoSize();this._ele.alignTo(this.boundEl,this.alignment);this.editing=true;this.show();},_doAutoSize:function(){if(this.autoSize){var A=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(A.width,"");break;case"height":this.setSize("",A.height);break;default:this.setSize(A.width,A.height);}}},setSize:function(A,B){delete this.field.lastSize;this.field.setSize(A,B);if(this._ele){if(actuate.util.Utility.isGecko2||actuate.util.Utility.isOpera){this._ele.setSize(A,B);}this._ele.sync();}},realign:function(){this._ele.alignTo(this.boundEl,this.alignment);},completeEdit:function(A){if(!this.editing){return ;}var B=this.getValue();if(this.revertInvalid!==false&&!this.field.isValid()){B=this.startValue;this.cancelEdit(true);}if(String(B)===String(this.startValue)&&this.ignoreNoChange){this.editing=false;this.hide();return ;}if(this.fireEvent("beforecomplete",this,B,this.startValue)!==false){this.editing=false;if(this.updateEl&&this.boundEl){this.boundEl.update(B);}if(A!==true){this.hide();}this.fireEvent("complete",this,B,this.startValue);}},_onShow:function(){this._ele.show();if(this.hideEl!==false){this.boundEl.hide();}this.field.show();if(actuate.util.Utility.isIE&&!this.fixIEFocus){this.fixIEFocus=true;actuate.Method.defer(50,this.deferredFocus,this);}else{this.field.focus();}this.fireEvent("startedit",this.boundEl,this.startValue);},deferredFocus:function(){if(this.editing){this.field.focus();}},cancelEdit:function(A){if(this.editing){var B=this.getValue();this.setValue(this.startValue);if(A!==true){this.hide();}this.fireEvent("canceledit",this,B,this.startValue);}},_onBlur:function(){if(this.allowBlur!==true&&this.editing){this.completeEdit();}},_onHide:function(){if(this.editing){this.completeEdit();return ;}this.field.blur();if(this.field.collapse){this.field.collapse();}this._ele.hide();if(this.hideEl!==false){this.boundEl.show();}},setValue:function(A){this.field.setValue(A);},getValue:function(){return this.field.getValue();},_beforeDestroy:function(){actuate.widget.Element.destroy(this.field);this.field=null;}});actuate.widget.Component.prototype.registerType("editor",actuate.widget.Editor);actuate.util.Package.define("actuate.widget.form");actuate.widget.form.HtmlEditor=actuate.Class.extendClass(actuate.widget.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http:/"+"/",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:actuate.util.Utility.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initialize:function(A){if(this.__extending){return ;}actuate.widget.form.HtmlEditor.superclass.initialize.call(this,A);},_initComponent:function(){},createFontOptions:function(){var D=[],B=this.fontFamilies,C,F;for(var E=0,A=B.length;E<A;E++){C=B[E];F=C.toLowerCase();D.push('<option value="',F,'" style="font-family:',C,';"',(this.defaultFont==F?' selected="true">':">"),C,"</option>");}return D.join("");},createToolbar:function(D){var A=actuate.widget.tips.QuickTips&&actuate.widget.tips.QuickTips.isEnabled();function C(G,E,F){return{itemId:G,cls:"actuate-widget-btn-icon actuate-widget-edit-"+G,enableToggle:E!==false,scope:D,handler:F||D.relayBtnCmd,clickEvent:"mousedown",tooltip:A?D.buttonTips[G]||undefined:undefined,tabIndex:-1};}var B=new actuate.widget.Toolbar({renderTo:this.wrap.dom.firstChild});B._ele.on("click",function(E){E.preventDefault();});if(this.enableFont&&!actuate.util.Utility.isSafari2){this.fontSelect=B._ele.createChild({tag:"select",cls:"x-font-select",html:this.createFontOptions()});this.fontSelect.on("change",function(){var E=this.fontSelect.dom.value;this.relayCmd("fontname",E);this.deferFocus();},this);B.add(this.fontSelect.dom,"-");}if(this.enableFormat){B.add(C("bold"),C("italic"),C("underline"));}if(this.enableFontSize){B.add("-",C("increasefontsize",false,this.adjustFont),C("decreasefontsize",false,this.adjustFont));}if(this.enableColors){B.add("-",{itemId:"forecolor",cls:"actuate-widget-btn-icon actuate-widget-edit-forecolor",clickEvent:"mousedown",tooltip:A?D.buttonTips["forecolor"]||undefined:undefined,tabIndex:-1,menu:new actuate.widget.menu.ColorMenu({allowReselect:true,focus:actuate.util.Utility.emptyFn,value:"000000",plain:true,selectHandler:actuate.Method.createDelegate(function(F,E){this.execCmd("forecolor",actuate.util.Utility.isSafari||actuate.util.Utility.isIE?"#"+E:E);this.deferFocus();},this),scope:this,clickEvent:"mousedown"})},{itemId:"backcolor",cls:"actuate-widget-btn-icon actuate-widget-edit-backcolor",clickEvent:"mousedown",tooltip:A?D.buttonTips["backcolor"]||undefined:undefined,tabIndex:-1,menu:new actuate.widget.menu.ColorMenu({focus:actuate.util.Utility.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,selectHandler:actuate.Method.createDelegate(function(F,E){if(actuate.util.Utility.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",E);this.execCmd("useCSS",true);this.deferFocus();}else{this.execCmd(actuate.util.Utility.isOpera?"hilitecolor":"backcolor",actuate.util.Utility.isSafari||actuate.util.Utility.isIE?"#"+E:E);this.deferFocus();}},this),scope:this,clickEvent:"mousedown"})});}if(this.enableAlignments){B.add("-",C("justifyleft"),C("justifycenter"),C("justifyright"));}if(!actuate.util.Utility.isSafari2){if(this.enableLinks){B.add("-",C("createlink",false,this.createLink));}if(this.enableLists){B.add("-",C("insertorderedlist"),C("insertunorderedlist"));}if(this.enableSourceEdit){B.add("-",C("sourceedit",true,function(E){this.toggleSourceEdit(E.pressed);}));}}this.tb=B;},getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;cursor:text;}</style></head><body></body></html>';},getEditorBody:function(){return this.doc.body||this.doc.documentElement;},getDoc:function(){return actuate.util.Utility.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document);},getWin:function(){return actuate.util.Utility.isIE?this.iframe.contentWindow:window.frames[this.iframe.name];},_onRender:function(B,A){actuate.widget.form.HtmlEditor.superclass._onRender.call(this,B,A);this._ele.dom.style.border="0 none";this._ele.dom.setAttribute("tabIndex",-1);this._ele.addClass("actuate-hidden");if(actuate.util.Utility.isIE){this._ele.applyStyles("margin-top:-1px;margin-bottom:-1px;");}this.wrap=this._ele.wrap({cls:"actuate-widget-html-editor-wrap",cn:{cls:"actuate-widget-html-editor-tb"}});this.createToolbar(this);this.tb.items.each(function(E){if(E.itemId!="sourceedit"){E.disable();}});var C=document.createElement("iframe");C.name=actuate.widget.Element.id();C.frameBorder="0";C.src=actuate.util.Utility.isIE?actuate.widget.SSL_SECURE_URL:"javascript:;";this.wrap.dom.appendChild(C);this.iframe=C;this.initFrame();if(this.autoMonitorDesignMode!==false){this.monitorTask=actuate.widget.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100});}if(!this.width){var D=this._ele.getSize();this.setSize(D.width,this.height||D.height);}},initFrame:function(){this.doc=this.getDoc();this.win=this.getWin();if(!actuate.util.browser.isChrome){this.doc.open();this.doc.write(this.getDocMarkup());this.doc.close();}else{this.doc.head.innerHTML='<style type="text/css">body{border:0;margin:0;padding:3px;cursor:text;}</style>';}var A={run:function(){if(this.doc.body||this.doc.readyState=="complete"){actuate.widget.TaskMgr.stop(A);this.doc.designMode="on";actuate.Method.defer(10,this.initEditor,this);}},interval:10,duration:10000,scope:this};actuate.widget.TaskMgr.start(A);},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var A=this.getDoc();if(!A){return ;}if(!A.editorInitialized||String(A.designMode).toLowerCase()!="on"){this.initFrame();}}},_onResize:function(B,C){actuate.widget.form.HtmlEditor.superclass._onResize.apply(this,arguments);if(this._ele&&this.iframe){if(typeof B=="number"){var D=B-this.wrap.getFrameWidth("lr");this._ele.setWidth(this._adjustWidth("textarea",D));this.iframe.style.width=Math.max(D,0)+"px";}if(typeof C=="number"){var A=C-this.wrap.getFrameWidth("tb")-this.tb._ele.getHeight();this._ele.setHeight(this._adjustWidth("textarea",A));this.iframe.style.height=Math.max(A,0)+"px";if(this.doc){this.getEditorBody().style.height=Math.max((A-(this.iframePad*2)),0)+"px";}}}},toggleSourceEdit:function(A){if(A===undefined){A=!this.sourceEditMode;}this.sourceEditMode=A===true;var C=this.tb.items.get("sourceedit");if(C.pressed!==this.sourceEditMode){C.toggle(this.sourceEditMode);return ;}if(this.sourceEditMode){this.tb.items.each(function(D){if(D.itemId!="sourceedit"){D.disable();}});this.syncValue();this.iframe.className="actuate-hidden";this._ele.removeClass("actuate-hidden");this._ele.dom.removeAttribute("tabIndex");this._ele.focus();}else{if(this.initialized){this.tb.items.each(function(D){D.enable();});}this.pushValue();this.iframe.className="";this._ele.addClass("actuate-hidden");this._ele.dom.setAttribute("tabIndex",-1);this.deferFocus();}var B=this.lastSize;if(B){delete this.lastSize;this.setSize(B);}this.fireEvent("editmodechange",this,this.sourceEditMode);},createLink:function(){var A=prompt(this.createLinkText,this.defaultLinkValue);if(A&&A!="http:/"+"/"){this.relayCmd("createlink",A);}},_adjustSize:actuate.widget.BoxComponent.prototype._adjustSize,getResizeEl:function(){return this.wrap;},getPositionEl:function(){return this.wrap;},_initEvents:function(){this.originalValue=this.getValue();},markInvalid:actuate.util.Utility.emptyFn,clearInvalid:actuate.util.Utility.emptyFn,setValue:function(A){actuate.widget.form.HtmlEditor.superclass.setValue.call(this,A);this.pushValue();},cleanHtml:function(A){A=String(A);if(A.length>5){if(actuate.util.Utility.isSafari){A=A.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"");}}if(A=="&nbsp;"){A="";}return A;},syncValue:function(){if(this.initialized){var D=this.getEditorBody();var C=D.innerHTML;if(actuate.util.Utility.isSafari){var B=D.getAttribute("style");var A=B.match(/text-align:(.*?);/i);if(A&&A[1]){C='<div style="'+A[0]+'">'+C+"</div>";}}C=this.cleanHtml(C);if(this.fireEvent("beforesync",this,C)!==false){this._ele.dom.value=C;this.fireEvent("sync",this,C);}}},getValue:function(){this.syncValue();return actuate.widget.form.HtmlEditor.superclass.getValue.call(this);},pushValue:function(){if(this.initialized){var A=this._ele.dom.value;if(!this.activated&&A.length<1){A="&nbsp;";}if(this.fireEvent("beforepush",this,A)!==false){this.getEditorBody().innerHTML=A;this.fireEvent("push",this,A);}}},deferFocus:function(){actuate.Method.defer(10,this.focus,this);},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus();}else{this._ele.focus();}},initEditor:function(){var B=this.getEditorBody();var A=this._ele.getStyles("font-size","font-family","background-image","background-repeat");A["background-attachment"]="fixed";B.bgProperties="fixed";actuate.widget.DomHelper.applyStyles(B,A);if(this.doc){try{actuate.widget.EventManager.removeAll(this.doc);}catch(C){}}this.doc=this.getDoc();actuate.widget.EventManager.on(this.doc,{"mousedown":this.onEditorEvent,"dblclick":this.onEditorEvent,"click":this.onEditorEvent,"keyup":this.onEditorEvent,buffer:100,scope:this});if(actuate.util.Utility.isGecko){actuate.widget.EventManager.on(this.doc,"keypress",this.applyCommand,this);}if(actuate.util.Utility.isIE||actuate.util.Utility.isSafari||actuate.util.Utility.isOpera){actuate.widget.EventManager.on(this.doc,"keydown",this.fixKeys,this);}this.initialized=true;this.fireEvent("initialize",this);this.doc.editorInitialized=true;this.pushValue();},_onDestroy:function(){if(this.monitorTask){actuate.widget.TaskMgr.stop(this.monitorTask);}if(this.rendered){this.tb.items.each(function(A){if(A.menu){A.menu.removeAll();if(A.menu._ele){A.menu._ele.destroy();}}A.destroy();});this.wrap.dom.innerHTML="";this.wrap.remove();}},onFirstFocus:function(){this.activated=true;this.tb.items.each(function(D){D.enable();});if(actuate.util.Utility.isGecko){this.win.focus();var A=this.win.getSelection();if(!A.focusNode||A.focusNode.nodeType!=3){var B=A.getRangeAt(0);B.selectNodeContents(this.getEditorBody());B.collapse(true);this.deferFocus();}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false);}catch(C){}}this.fireEvent("activate",this);},adjustFont:function(B){var C=B.itemId=="increasefontsize"?1:-1;var A=parseInt(this.doc.queryCommandValue("FontSize")||2,10);if(actuate.util.Utility.isSafari3||actuate.util.Utility.isAir){if(A<=10){A=1+C;}else{if(A<=13){A=2+C;}else{if(A<=16){A=3+C;}else{if(A<=18){A=4+C;}else{if(A<=24){A=5+C;}else{A=6+C;}}}}}A=A.constrain(1,6);}else{if(actuate.util.Utility.isSafari){C*=2;}A=Math.max(1,A+C)+(actuate.util.Utility.isSafari?"px":0);}this.execCmd("FontSize",A);},onEditorEvent:function(A){this.updateToolbar();},updateToolbar:function(){if(!this.activated){this.onFirstFocus();return ;}var B=this.tb.items.map,C=this.doc;if(this.enableFont&&!actuate.util.Utility.isSafari2){var A=(this.doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(A!=this.fontSelect.dom.value){this.fontSelect.dom.value=A;}}if(this.enableFormat){B.bold.toggle(C.queryCommandState("bold"));B.italic.toggle(C.queryCommandState("italic"));B.underline.toggle(C.queryCommandState("underline"));}if(this.enableAlignments){B.justifyleft.toggle(C.queryCommandState("justifyleft"));B.justifycenter.toggle(C.queryCommandState("justifycenter"));B.justifyright.toggle(C.queryCommandState("justifyright"));}if(!actuate.util.Utility.isSafari2&&this.enableLists){B.insertorderedlist.toggle(C.queryCommandState("insertorderedlist"));B.insertunorderedlist.toggle(C.queryCommandState("insertunorderedlist"));}actuate.widget.menu.MenuMgr.hideAll();this.syncValue();},relayBtnCmd:function(A){this.relayCmd(A.itemId);},relayCmd:function(B,A){actuate.Method.defer(10,(function(){this.focus();this.execCmd(B,A);this.updateToolbar();}),this);},execCmd:function(B,A){this.doc.execCommand(B,false,A===undefined?null:A);this.syncValue();},applyCommand:function(B){if(B.ctrlKey){var C=B.getCharCode(),A;if(C>0){C=String.fromCharCode(C);switch(C){case"b":A="bold";break;case"i":A="italic";break;case"u":A="underline";break;}if(A){this.win.focus();this.execCmd(A);this.deferFocus();B.preventDefault();}}}},insertAtCursor:function(B){if(!this.activated){return ;}if(actuate.util.Utility.isIE){this.win.focus();var A=this.doc.selection.createRange();if(A){A.collapse(true);A.pasteHTML(B);this.syncValue();this.deferFocus();}}else{if(actuate.util.Utility.isGecko||actuate.util.Utility.isOpera){this.win.focus();this.execCmd("InsertHTML",B);this.deferFocus();}else{if(actuate.util.Utility.isSafari){this.execCmd("InsertText",B);this.deferFocus();}}}},fixKeys:function(){if(actuate.util.Utility.isIE){return function(D){var A=D.getKey(),B;if(A==D.TAB){D.stopEvent();B=this.doc.selection.createRange();if(B){B.collapse(true);B.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus();}}else{if(A==D.ENTER){B=this.doc.selection.createRange();if(B){var C=B.parentElement();if(!C||C.tagName.toLowerCase()!="li"){D.stopEvent();B.pasteHTML("<br />");B.collapse(false);B.select();}}}}};}else{if(actuate.util.Utility.isOpera){return function(B){var A=B.getKey();if(A==B.TAB){B.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus();}};}else{if(actuate.util.Utility.isSafari){return function(B){var A=B.getKey();if(A==B.TAB){B.stopEvent();this.execCmd("InsertText","\t");this.deferFocus();}};}}}}(),getToolbar:function(){return this.tb;},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"actuate-widget-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"actuate-widget-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"actuate-widget-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"actuate-widget-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"actuate-widget-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"actuate-widget-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"actuate-widget-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"actuate-widget-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"actuate-widget-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"actuate-widget-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"actuate-widget-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"actuate-widget-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"actuate-widget-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"actuate-widget-html-editor-tip"}}});actuate.widget.Component.prototype.registerType("htmleditor",actuate.widget.form.HtmlEditor);actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.AbstractSelectionModel=actuate.Class.extendClass(actuate.widget.Observable,{initialize:function(){this.locked=false;actuate.widget.grid.AbstractSelectionModel.superclass.initialize.call(this);},init:function(A){this.grid=A;this._initEvents();},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.CellSelectionModel=actuate.Class.extendClass(actuate.widget.grid.AbstractSelectionModel,{initialize:function(A){actuate.Class.extend(this,A);this.selection=null;actuate.widget.grid.CellSelectionModel.superclass.initialize.call(this);},_initEvents:function(){this.grid.on("cellmousedown",this._closure("_handleMouseDown"));this.grid.getGridEl().on(actuate.util.Utility.isIE||actuate.util.Utility.isSafari3?"keydown":"keypress",this._closure("_handleKeyDown"));var A=this.grid.view;A.on("refresh",this._closure("_onViewChange"));A.on("rowupdated",this._closure("_onRowUpdated"));A.on("beforerowremoved",this._closure("clearSelections"));A.on("beforerowsinserted",this._closure("clearSelections"));if(this.grid.isEditor){this.grid.on("beforeedit",this._closure("_beforeEdit"));}},_beforeEdit:function(A){this.select(A.row,A.column,false,true,A.record);},_onRowUpdated:function(A,B,C){if(this.selection&&this.selection.record==C){A._onCellSelect(B,this.selection.cell[1]);}},_onViewChange:function(){this.clearSelections(true);},getSelectedCell:function(){return this.selection?this.selection.cell:null;},clearSelections:function(B){var A=this.selection;if(A){if(B!==true){this.grid.view._onCellDeselect(A.cell[0],A.cell[1]);}this.selection=null;this.fireEvent("selectionchange",this,null);}},hasSelection:function(){return this.selection?true:false;},_handleMouseDown:function(B,D,A,C){if(C.button!==0||this.isLocked()){return ;}this.select(D,A);},select:function(F,C,B,E,D){if(this.fireEvent("beforecellselect",this,F,C)!==false){this.clearSelections();D=D||this.grid.store.getAt(F);this.selection={record:D,cell:[F,C]};if(!B){var A=this.grid.getView();A._onCellSelect(F,C);if(E!==true){A.focusCell(F,C);}}this.fireEvent("cellselect",this,F,C);this.fireEvent("selectionchange",this,this.selection);}},isSelectable:function(C,B,A){return !A.isHidden(B);},_handleKeyDown:function(F){if(!F.isNavKeyPress()){return ;}var E=this.grid,J=this.selection;if(!J){F.stopEvent();var I=E.walkCells(0,0,1,this.isSelectable,this);if(I){this.select(I[0],I[1]);}return ;}var B=this;var H=function(M,K,L){return E.walkCells(M,K,L,B.isSelectable,B);};var C=F.getKey(),A=J.cell[0],G=J.cell[1];var D;switch(C){case F.TAB:if(F.shiftKey){D=H(A,G-1,-1);}else{D=H(A,G+1,1);}break;case F.DOWN:D=H(A+1,G,1);break;case F.UP:D=H(A-1,G,-1);break;case F.RIGHT:D=H(A,G+1,1);break;case F.LEFT:D=H(A,G-1,-1);break;case F.ENTER:if(E.isEditor&&!E.editing){E.startEditing(A,G);F.stopEvent();return ;}break;}if(D){this.select(D[0],D[1]);F.stopEvent();}},acceptsNav:function(C,B,A){return !A.isHidden(B)&&A.isCellEditable(B,C);},_onEditorKey:function(E,D){var B=D.getKey(),F,C=this.grid,A=C.activeEditor;if(B==D.TAB){if(D.shiftKey){F=C.walkCells(A.row,A.col-1,-1,this.acceptsNav,this);}else{F=C.walkCells(A.row,A.col+1,1,this.acceptsNav,this);}D.stopEvent();}else{if(B==D.ENTER){A.completeEdit();D.stopEvent();}else{if(B==D.ESC){D.stopEvent();A.cancelEdit();}}}if(F){C.startEditing(F[0],F[1]);}}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.RowSelectionModel=actuate.Class.extendClass(actuate.widget.grid.AbstractSelectionModel,{singleSelect:false,initialize:function(A){actuate.Class.extend(this,A);this.selections=new actuate.widget.util.MixedCollection(false,function(B){return B.id;});this.last=false;this.lastActive=false;actuate.widget.grid.RowSelectionModel.superclass.initialize.call(this);},_initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("rowmousedown",this._closure("_handleMouseDown"));}else{this.grid.on("rowclick",actuate.Method.bind(function(B,D,C){if(C.button===0&&!C.shiftKey&&!C.ctrlKey){this.selectRow(D,false);B.view.focusRow(D);}},this));}this.rowNav=new actuate.widget.KeyNav(this.grid.getGridEl(),{"up":function(C){if(!C.shiftKey||this.singleSelect){this.selectPrevious(false);}else{if(this.last!==false&&this.lastActive!==false){var B=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);if(B!==false){this.last=B;}}else{this.selectFirstRow();}}},"down":function(C){if(!C.shiftKey||this.singleSelect){this.selectNext(false);}else{if(this.last!==false&&this.lastActive!==false){var B=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);if(B!==false){this.last=B;}}else{this.selectFirstRow();}}},scope:this});var A=this.grid.view;A.on("refresh",this._closure("_onRefresh"));A.on("rowupdated",this._closure("_onRowUpdated"));A.on("rowremoved",this._closure("_onRemove"));},_onRefresh:function(){var F=this.grid.store,B;var D=this.getSelections();this.clearSelections(true);for(var C=0,A=D.length;C<A;C++){var E=D[C];if((B=F.indexOfId(E.id))!=-1){this.selectRow(B,true);}}if(D.length!=this.selections.getCount()){this.fireEvent("selectionchange",this);}},_onRemove:function(A,B,C){if(this.selections.remove(C)!==false){this.fireEvent("selectionchange",this);}},_onRowUpdated:function(A,B,C){if(this.isSelected(C)){A._onRowSelect(B);}},selectRecords:function(B,E){if(!E){this.clearSelections();}var D=this.grid.store;for(var C=0,A=B.length;C<A;C++){this.selectRow(D.indexOf(B[C]),true);}},getCount:function(){return this.selections.length;},selectFirstRow:function(){this.selectRow(0);},selectLastRow:function(A){this.selectRow(this.grid.store.getCount()-1,A);},selectNext:function(A){if(this.hasNext()){this.selectRow(this.last+1,A);this.grid.getView().focusRow(this.last);return true;}return false;},selectPrevious:function(A){if(this.hasPrevious()){this.selectRow(this.last-1,A);this.grid.getView().focusRow(this.last);return true;}return false;},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount();},hasPrevious:function(){return !!this.last;},getSelections:function(){return[].concat(this.selections.items);},getSelected:function(){return this.selections.itemAt(0);},each:function(E,D){var C=this.getSelections();for(var B=0,A=C.length;B<A;B++){if(E.call(D||this,C[B],B)===false){return false;}}return true;},clearSelections:function(A){if(this.isLocked()){return ;}if(A!==true){var C=this.grid.store;var B=this.selections;B.each(function(D){this.deselectRow(C.indexOfId(D.id));},this);B.clear();}else{this.selections.clear();}this.last=false;},selectAll:function(){if(this.isLocked()){return ;}this.selections.clear();for(var B=0,A=this.grid.store.getCount();B<A;B++){this.selectRow(B,true);}},hasSelection:function(){return this.selections.length>0;},isSelected:function(A){var B=typeof A=="number"?this.grid.store.getAt(A):A;return(B&&this.selections.key(B.id)?true:false);},isIdSelected:function(A){return(this.selections.key(A)?true:false);},_handleMouseDown:function(D,F,E){if(E.button!==0||this.isLocked()){return ;}var A=this.grid.getView();if(E.shiftKey&&!this.singleSelect&&this.last!==false){var C=this.last;this.selectRange(C,F,E.ctrlKey);this.last=C;A.focusRow(F);}else{var B=this.isSelected(F);if(E.ctrlKey&&B){this.deselectRow(F);}else{if(!B||this.getCount()>1){this.selectRow(F,E.ctrlKey||E.shiftKey);A.focusRow(F);}}}},selectRows:function(C,D){if(!D){this.clearSelections();}for(var B=0,A=C.length;B<A;B++){this.selectRow(C[B],true);}},selectRange:function(B,A,D){if(this.isLocked()){return ;}if(!D){this.clearSelections();}if(B<=A){for(var C=B;C<=A;C++){this.selectRow(C,true);}}else{for(var C=B;C>=A;C--){this.selectRow(C,true);}}},deselectRange:function(C,B,A){if(this.isLocked()){return ;}for(var D=C;D<=B;D++){this.deselectRow(D,A);}},selectRow:function(B,D,A){if(this.isLocked()||(B<0||B>=this.grid.store.getCount())||this.isSelected(B)){return ;}var C=this.grid.store.getAt(B);if(C&&this.fireEvent("beforerowselect",this,B,D,C)!==false){if(!D||this.singleSelect){this.clearSelections();}this.selections.add(C);this.last=this.lastActive=B;if(!A){this.grid.getView()._onRowSelect(B);}this.fireEvent("rowselect",this,B,C);this.fireEvent("selectionchange",this);}},deselectRow:function(B,A){if(this.isLocked()){return ;}if(this.last==B){this.last=false;}if(this.lastActive==B){this.lastActive=false;}var C=this.grid.store.getAt(B);if(C){this.selections.remove(C);if(!A){this.grid.getView()._onRowDeselect(B);}this.fireEvent("rowdeselect",this,B,C);this.fireEvent("selectionchange",this);}},restoreLast:function(){if(this._last){this.last=this._last;}},acceptsNav:function(C,B,A){return !A.isHidden(B)&&A.isCellEditable(B,C);},_onEditorKey:function(F,E){var C=E.getKey(),G,D=this.grid,B=D.activeEditor;var A=E.shiftKey;if(C==E.TAB){E.stopEvent();B.completeEdit();if(A){G=D.walkCells(B.row,B.col-1,-1,this.acceptsNav,this);}else{G=D.walkCells(B.row,B.col+1,1,this.acceptsNav,this);}}else{if(C==E.ENTER){E.stopEvent();B.completeEdit();if(this.moveEditorOnEnter!==false){if(A){G=D.walkCells(B.row-1,B.col,-1,this.acceptsNav,this);}else{G=D.walkCells(B.row+1,B.col,1,this.acceptsNav,this);}}}else{if(C==E.ESC){B.cancelEdit();}}}if(G){D.startEditing(G[0],G[1]);}}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.CheckboxSelectionModel=actuate.Class.extendClass(actuate.widget.grid.RowSelectionModel,{header:'<div class="actuate-grid3-hd-checker">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,dataIndex:"",id:"checker",_initEvents:function(){actuate.widget.grid.CheckboxSelectionModel.superclass._initEvents.call(this);this.grid.on("render",actuate.Method.bind(function(){var A=this.grid.getView();A.mainBody.on("mousedown",this._closure("_onMouseDown"));actuate.widget.Element.fly(A.innerHd).on("mousedown",this._closure("_onHdMouseDown"));},this));},_onMouseDown:function(C,B){if(C.button===0&&B.className=="actuate-grid3-row-checker"){C.stopEvent();var D=C.getTarget(".actuate-grid3-row");if(D){var A=D.rowIndex;if(this.isSelected(A)){this.deselectRow(A);}else{this.selectRow(A,true);}}}},_onHdMouseDown:function(C,A){if(A.className=="actuate-grid3-hd-checker"){C.stopEvent();var B=actuate.widget.Element.fly(A.parentNode);var D=B.hasClass("actuate-grid3-hd-checker-on");if(D){B.removeClass("actuate-grid3-hd-checker-on");this.clearSelections();}else{B.addClass("actuate-grid3-hd-checker-on");this.selectAll();}}},renderer:function(B,C,A){return'<div class="actuate-grid3-row-checker">&#160;</div>';}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.RowNumberer=actuate.Class.createClass({header:"",width:23,sortable:false,fixed:true,menuDisabled:true,dataIndex:"",id:"numberer",rowspan:undefined,initialize:function(A){actuate.Class.extend(this,A);if(this.rowspan){this.renderer=actuate.Method.createDelegate(this.renderer,this);}},renderer:function(B,C,A,D){if(this.rowspan){C.cellAttr='rowspan="'+this.rowspan+'"';}return D+1;}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.GridView=actuate.Class.extendClass(actuate.widget.Observable,{deferEmptyText:true,scrollOffset:19,autoFill:false,forceFit:false,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,tdClass:"actuate-grid3-cell",hdCls:"actuate-grid3-hd",cellSelectorDepth:4,rowSelectorDepth:10,cellSelector:"td.actuate-grid3-cell",rowSelector:"div.actuate-grid3-row",showTooltip:false,initialize:function(A){actuate.Class.extend(this,A);actuate.widget.grid.GridView.superclass.initialize.call(this);},_initTemplates:function(){var C=this.templates||{};if(!C.master){C.master=new actuate.widget.Template('<div class="actuate-grid3" hidefocus="true">','<div class="actuate-grid3-viewport">','<div class="actuate-grid3-header"><div class="actuate-grid3-header-inner"><div class="actuate-grid3-header-offset">{header}</div></div><div class="actuate-clear"></div></div>','<div class="actuate-grid3-scroller"><div class="actuate-grid3-body">{body}</div><a href="#" class="actuate-grid3-focus" tabIndex="-1"></a></div>',"</div>",'<div class="actuate-grid3-resize-marker">&#160;</div>','<div class="actuate-grid3-resize-proxy">&#160;</div>',"</div>");}if(!C.header){C.header=new actuate.widget.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="actuate-grid3-hd-row">{cells}</tr></thead>',"</table>");}if(!C.hcell){C.hcell=new actuate.widget.Template('<td class="actuate-grid3-hd actuate-grid3-cell actuate-grid3-td-{id} {css}" style="{style}"><div {tooltip} {attr} class="actuate-grid3-hd-inner actuate-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="actuate-grid3-hd-btn" href="#"></a>':"",'{value}<img class="actuate-grid3-sort-icon" src="',actuate.widget.BLANK_IMAGE_URL,'" />',"</div></td>");}if(!C.body){C.body=new actuate.widget.Template("{rows}");}if(!C.row){C.row=new actuate.widget.Template('<div class="actuate-grid3-row {alt}" style="{tstyle}"><table class="actuate-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",(this.enableRowBody?'<tr class="actuate-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="actuate-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="actuate-grid3-row-body">{body}</div></td></tr>':""),"</tbody></table></div>");}if(!C.cell){var D=this.showTooltip?"qtip='{value}'":"";C.cell=new actuate.widget.Template('<td class="actuate-grid3-col actuate-grid3-cell actuate-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>',"<div "+D+' class="actuate-grid3-cell-inner actuate-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>");}for(var A in C){var B=C[A];if(B&&typeof B.compile=="function"&&!B.compiled){B.disableFormats=true;B.compile();}}this.templates=C;this.colRe=new RegExp("actuate-grid3-td-([^\\s]+)","");},fly:function(A){if(!this._flyweight){this._flyweight=new actuate.widget.Element.Flyweight(document.body);}this._flyweight.dom=A;return this._flyweight;},getEditorParent:function(){return this.scroller.dom;},_initElements:function(){var C=actuate.widget.Element;var B=this.grid.getGridEl().dom.firstChild;var A=B.childNodes;this._ele=new C(B);this.mainWrap=new C(A[0]);this.mainHd=new C(this.mainWrap.dom.firstChild);if(this.grid.hideHeaders){this.mainHd.setDisplayed(false);}this.innerHd=this.mainHd.dom.firstChild;this.scroller=new C(this.mainWrap.dom.childNodes[1]);if(this.forceFit){this.scroller.setStyle("overflow-x","hidden");}this.mainBody=new C(this.scroller.dom.firstChild);this.focusEl=new C(this.scroller.dom.childNodes[1]);this.focusEl.swallowEvent("click",true);this.resizeMarker=new C(A[1]);this.resizeProxy=new C(A[2]);},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[];},findCell:function(A){if(!A){return false;}return this.fly(A).findParent(this.cellSelector,this.cellSelectorDepth);},findCellIndex:function(C,B){var A=this.findCell(C);if(A&&(!B||this.fly(A).hasClass(B))){return this.getCellIndex(A);}return false;},getCellIndex:function(B){if(B){var A=B.className.match(this.colRe);if(A&&A[1]){return this.cm.getIndexById(A[1]);}}return false;},findHeaderCell:function(B){var A=this.findCell(B);return A&&this.fly(A).hasClass(this.hdCls)?A:null;},findHeaderIndex:function(A){return this.findCellIndex(A,this.hdCls);},findRow:function(A){if(!A){return false;}return this.fly(A).findParent(this.rowSelector,this.rowSelectorDepth);},findRowIndex:function(A){var B=this.findRow(A);return B?B.rowIndex:false;},getRow:function(A){return this.getRows()[A];},getCell:function(B,A){return this.getRow(B).getElementsByTagName("td")[A];},getHeaderCell:function(A){return this.mainHd.dom.getElementsByTagName("td")[A];},addRowClass:function(C,A){var B=this.getRow(C);if(B){this.fly(B).addClass(A);}},removeRowClass:function(C,A){var B=this.getRow(C);if(B){this.fly(B).removeClass(A);}},removeRow:function(A){actuate.widget.DomHelper.removeNode(this.getRow(A));this.syncFocusEl(A);},removeRows:function(C,A){var B=this.mainBody.dom;for(var D=C;D<=A;D++){actuate.widget.DomHelper.removeNode(B.childNodes[C]);}this.syncFocusEl(C);},getScrollState:function(){var A=this.scroller.dom;return{left:A.scrollLeft,top:A.scrollTop};},restoreScroll:function(A){var B=this.scroller.dom;B.scrollLeft=A.left;B.scrollTop=A.top;},scrollToTop:function(){this.scroller.dom.scrollTop=0;this.scroller.dom.scrollLeft=0;},syncScroll:function(){this.syncHeaderScroll();var A=this.scroller.dom;this.grid.fireEvent("bodyscroll",A.scrollLeft,A.scrollTop);},syncHeaderScroll:function(){var A=this.scroller.dom;this.innerHd.scrollLeft=A.scrollLeft;this.innerHd.scrollLeft=A.scrollLeft;},updateSortIcon:function(B,A){var D=this.sortClasses;var C=this.mainHd.select("td").removeClass(D);C.item(B).addClass(D[A=="DESC"?1:0]);},updateAllColumnWidths:function(){var D=this.getTotalWidth();var I=this.cm.getColumnCount();var F=[];for(var B=0;B<I;B++){F[B]=this.getColumnWidth(B);}this.innerHd.firstChild.firstChild.style.width=D;for(var B=0;B<I;B++){var C=this.getHeaderCell(B);C.style.width=F[B];}var G=this.getRows(),J,H;for(var B=0,E=G.length;B<E;B++){J=G[B];J.style.width=D;if(J.firstChild){J.firstChild.style.width=D;H=J.firstChild.rows[0];for(var A=0;A<I;A++){H.childNodes[A].style.width=F[A];}}}this._onAllColumnWidthsUpdated(F,D);},updateColumnWidth:function(B,A){var H=this.getColumnWidth(B);var E=this.getTotalWidth();this.innerHd.firstChild.firstChild.style.width=E;var D=this.getHeaderCell(B);D.style.width=H;var G=this.getRows(),I;for(var C=0,F=G.length;C<F;C++){I=G[C];I.style.width=E;if(I.firstChild){I.firstChild.style.width=E;I.firstChild.rows[0].childNodes[B].style.width=H;}}this._onColumnWidthUpdated(B,H,E);},updateColumnHidden:function(A,E){var D=this.getTotalWidth();this.innerHd.firstChild.firstChild.style.width=D;var G=E?"none":"";var C=this.getHeaderCell(A);C.style.display=G;var H=this.getRows(),I;for(var B=0,F=H.length;B<F;B++){I=H[B];I.style.width=D;if(I.firstChild){I.firstChild.style.width=D;I.firstChild.rows[0].childNodes[A].style.display=G;}}this._onColumnHiddenUpdated(A,E,D);delete this.lastViewWidth;this.layout();},_doRender:function(E,G,M,A,L,Q){var B=this.templates,D=B.cell,F=B.row,H=L-1;var C="width:"+this.getTotalWidth()+";";var T=[],N,U,O={},I={tstyle:C},K;for(var P=0,S=G.length;P<S;P++){K=G[P];N=[];var J=(P+A);for(var R=0;R<L;R++){U=E[R];O.id=U.id;O.css=R==0?"actuate-grid3-cell-first ":(R==H?"actuate-grid3-cell-last ":"");O.attr=O.cellAttr="";O.value=U.renderer(K.data[U.name],O,K,J,R,M);O.style=U.style;if(O.value==undefined||O.value===""){O.value="&#160;";}if(K.dirty&&typeof K.modified[U.name]!=="undefined"){O.css+=" actuate-grid3-dirty-cell";}N[N.length]=D.apply(O);}var V=[];if(Q&&((J+1)%2==0)){V[0]="actuate-grid3-row-alt";}if(K.dirty){V[1]=" actuate-grid3-dirty-row";}I.cols=L;if(this.getRowClass){V[2]=this.getRowClass(K,J,I,M);}I.alt=V.join(" ");I.cells=N.join("");T[T.length]=F.apply(I);}return T.join("");},processRows:function(E,D){if(this.ds.getCount()<1){return ;}D=D||!this.grid.stripeRows;E=E||0;var I=this.getRows();var F=" actuate-grid3-row-alt ";I[0].className+=" actuate-grid3-row-first";I[I.length-1].className+=" actuate-grid3-row-last";for(var B=E,C=I.length;B<C;B++){var H=I[B];H.rowIndex=B;if(!D){var A=((B+1)%2==0);var G=(" "+H.className+" ").indexOf(F)!=-1;if(A==G){continue;}if(A){H.className+=" actuate-grid3-row-alt";}else{H.className=H.className.replace("actuate-grid3-row-alt","");}}}},_afterRender:function(){this.mainBody.dom.innerHTML=this._renderRows();this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText();}},_renderUI:function(){var D=this._renderHeaders();var A=this.templates.body.apply({rows:""});var B=this.templates.master.apply({body:A,header:D});var C=this.grid;C.getGridEl().dom.innerHTML=B;this._initElements();actuate.widget.Element.fly(this.innerHd).on("click",this._closure("_handleHdDown"));this.mainHd.on("mouseover",this._closure("_handleHdOver"));this.mainHd.on("mouseout",this._closure("_handleHdOut"));this.mainHd.on("mousemove",this._closure("_handleHdMove"));this.scroller.on("scroll",this._closure("syncScroll"));if(C.enableColumnResize!==false){this.splitZone=new actuate.widget.grid.GridView.SplitDragZone(C,this.mainHd.dom);}if(C.enableColumnMove){this.columnDrag=new actuate.widget.grid.GridView.ColumnDragZone(C,this.innerHd);this.columnDrop=new actuate.widget.grid.HeaderDropZone(C,this.mainHd.dom);}if(C.enableHdMenu!==false){if(C.enableColumnHide!==false){this.colMenu=new actuate.widget.menu.Menu({id:C.id+"-hcols-menu"});this.colMenu.on("beforeshow",this._closure("_beforeColMenuShow"));this.colMenu.on("itemclick",this._closure("_handleHdMenuClick"));}this.hmenu=new actuate.widget.menu.Menu({id:C.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(C.enableColumnHide!==false){this.hmenu.add("-",{id:"columns",text:this.columnsText,menu:this.colMenu,ic_onCls:"actuate-cols-icon"});}this.hmenu.on("itemclick",this._closure("_handleHdMenuClick"));}if(C.trackMouseOver){this.mainBody.on("mouseover",this._closure("_onRowOver"));this.mainBody.on("mouseout",this._closure("_onRowOut"));}if(C.enableDragDrop||C.enableDrag){this.dragZone=new actuate.widget.grid.GridDragZone(C,{ddGroup:C.ddGroup||"GridDD"});}this.updateHeaderSortState();},layout:function(){if(!this.mainBody){return ;}var C=this.grid;var F=C.getGridEl();var A=F.getSize(true);var B=A.width;if(B<20||A.height<20){return ;}if(C.autoHeight){this.scroller.dom.style.overflow="visible";if(actuate.util.Utility.isSafari){this.scroller.dom.style.position="static";}}else{this._ele.setSize(A.width,A.height);var E=this.mainHd.getHeight();var D=A.height-(E);this.scroller.setSize(B,D);if(this.innerHd){this.innerHd.style.width=(B)+"px";}}if(this.forceFit){if(this.lastViewWidth!=B){this.fitColumns(false,false);this.lastViewWidth=B;}}else{this.autoExpand();this.syncHeaderScroll();}this._onLayout(B,D);},_onLayout:function(A,B){},_onColumnWidthUpdated:function(C,A,B){this.focusEl.setWidth(B);},_onAllColumnWidthsUpdated:function(A,B){this.focusEl.setWidth(B);},_onColumnHiddenUpdated:function(B,C,A){this.focusEl.setWidth(A);},updateColumnText:function(A,B){},_afterMove:function(A){},init:function(A){this.grid=A;this._initTemplates();this._initData(A.store,A.colModel);this._initUI(A);},getColumnId:function(A){return this.cm.getColumnId(A);},_renderHeaders:function(){var H=this.cm,F=this.templates;var D=F.hcell;var B=[],G=[],A={};var E=H.getColumnCount();var I=E-1;for(var C=0;C<E;C++){A.id=H.getColumnId(C);A.value=H.getColumnHeader(C)||"";A.style=this.getColumnStyle(C,true);A.tooltip=this.getColumnTooltip(C);A.css=C==0?"actuate-grid3-cell-first ":(C==I?"actuate-grid3-cell-last ":"");if(H.config[C].align=="right"){A.istyle="padding-right:16px";}else{delete A.istyle;}B[B.length]=D.apply(A);}return F.header.apply({cells:B.join(""),tstyle:"width:"+this.getTotalWidth()+";"});},getColumnTooltip:function(A){var B=this.cm.getColumnTooltip(A);if(B){if(actuate.widget.tips.QuickTips.isEnabled()){return'ext:qtip="'+B+'"';}else{return'title="'+B+'"';}}return"";},_beforeUpdate:function(){this.grid.stopEditing(true);},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this._renderHeaders();},focusRow:function(A){this.focusCell(A,0,false);},focusCell:function(C,A,B){this.syncFocusEl(this.ensureVisible(C,A,B));if(actuate.util.Utility.isGecko){this.focusEl.focus();}else{actuate.Method.defer(1,this.focusEl.focus,this.focusEl);}},resolveCell:function(E,C,D){if(typeof E!="number"){E=E.rowIndex;}if(!this.ds){return null;}if(E<0||E>=this.ds.getCount()){return null;}C=(C!==undefined?C:0);var B=this.getRow(E),A;if(!(D===false&&C===0)){while(this.cm.isHidden(C)){C++;}A=this.getCell(E,C);}return{row:B,cell:A};},getResolvedXY:function(A){if(!A){return null;}var B=this.scroller.dom,D=A.cell,C=A.row;return D?actuate.widget.Element.fly(D).getXY():[this._ele.getX(),actuate.widget.Element.fly(C).getY()];},syncFocusEl:function(D,A,C){var B=D;if(!actuate.util.Utility.isArray(B)){D=Math.min(D,Math.max(0,this.getRows().length-1));B=this.getResolvedXY(this.resolveCell(D,A,C));}this.focusEl.setXY(B||this.scroller.getXY());},ensureVisible:function(Q,E,D){var O=this.resolveCell(Q,E,D);if(!O||!O.row){return ;}var I=O.row,F=O.cell;var L=this.scroller.dom;var P=0;var C=I,M=this._ele.dom;while(C&&C!=M){P+=C.offsetTop;C=C.offsetParent;}P-=this.mainHd.dom.offsetHeight;var N=P+I.offsetHeight;var A=L.clientHeight;var M=parseInt(L.scrollTop,10);var K=M+A;if(P<M){L.scrollTop=P;}else{if(N>K){L.scrollTop=N-A;}}if(D!==false){var J=parseInt(F.offsetLeft,10);var H=J+F.offsetWidth;var G=parseInt(L.scrollLeft,10);var B=G+L.clientWidth;if(J<G){L.scrollLeft=J;}else{if(H>B){L.scrollLeft=H-L.clientWidth;}}}return this.getResolvedXY(O);},insertRows:function(A,F,C,E){if(!E&&F===0&&C>=A.getCount()-1){this.refresh();}else{if(!E){this.fireEvent("beforerowsinserted",this,F,C);}var B=this._renderRows(F,C);var D=this.getRow(F);if(D){actuate.widget.DomHelper.insertHtml("beforeBegin",D,B);}else{actuate.widget.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,B);}if(!E){this.fireEvent("rowsinserted",this,F,C);this.processRows(F);}}this.syncFocusEl(F);},deleteRows:function(A,C,B){if(A.getRowCount()<1){this.refresh();}else{this.fireEvent("beforerowsdeleted",this,C,B);this.removeRows(C,B);this.processRows(C);this.fireEvent("rowsdeleted",this,C,B);}},getColumnStyle:function(A,C){var B=!C?(this.cm.config[A].css||""):"";B+="width:"+this.getColumnWidth(A)+";";if(this.cm.isHidden(A)){B+="display:none;";}var D=this.cm.config[A].align;if(D){B+="text-align:"+D+";";}return B;},getColumnWidth:function(B){var A=this.cm.getColumnWidth(B);if(typeof A=="number"){return(actuate.util.Utility.isBorderBox?A:(A-this.borderWidth>0?A-this.borderWidth:0))+"px";}return A;},getTotalWidth:function(){return this.cm.getTotalWidth()+"px";},fitColumns:function(D,G,E){var F=this.cm,S,L,O;var R=F.getTotalWidth(false);var J=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(J<20){return ;}var B=J-R;if(B===0){return false;}var A=F.getColumnCount(true);var P=A-(typeof E=="number"?1:0);if(P===0){P=1;E=undefined;}var K=F.getColumnCount();var I=[];var N=0;var M=0;var H;for(O=0;O<K;O++){if(!F.isHidden(O)&&!F.isFixed(O)&&O!==E){H=F.getColumnWidth(O);I.push(O);N=O;I.push(H);M+=H;}}var C=(J-F.getTotalWidth())/M;while(I.length){H=I.pop();O=I.pop();F.setColumnWidth(O,Math.max(this.grid.minColumnWidth,Math.floor(H+H*C)),true);}if((R=F.getTotalWidth(false))>J){var Q=P!=A?E:N;F.setColumnWidth(Q,Math.max(1,F.getColumnWidth(Q)-(R-J)),true);}if(D!==true){this.updateAllColumnWidths();}return true;},autoExpand:function(B){var G=this.grid,A=this.cm;if(!this.userResized&&G.autoExpandColumn){var D=A.getTotalWidth(false);var H=this.grid.getGridEl().getWidth(true)-this.scrollOffset;if(D!=H){var F=A.getIndexById(G.autoExpandColumn);var E=A.getColumnWidth(F);var C=Math.min(Math.max(((H-D)+E),G.autoExpandMin),G.autoExpandMax);if(C!=E){A.setColumnWidth(F,C,true);if(B!==true){this.updateColumnWidth(F,C);}}}}},getColumnData:function(){var D=[],A=this.cm,E=A.getColumnCount();for(var C=0;C<E;C++){var B=A.getDataIndex(C);D[C]={name:(typeof B=="undefined"?this.ds.fields.get(C).name:B),renderer:A.getRenderer(C),id:A.getColumnId(C),style:this.getColumnStyle(C)};}return D;},_renderRows:function(H,C){var D=this.grid,F=D.colModel,A=D.store,I=D.stripeRows;var G=F.getColumnCount();if(A.getCount()<1){return"";}var E=this.getColumnData();H=H||0;C=typeof C=="undefined"?A.getCount()-1:C;var B=A.getRange(H,C);return this._doRender(E,B,A,H,G,I);},_renderBody:function(){var A=this._renderRows();return this.templates.body.apply({rows:A});},refreshRow:function(B){var D=this.ds,C;if(typeof B=="number"){C=B;B=D.getAt(C);}else{C=D.indexOf(B);}var A=[];this.insertRows(D,C,C,true);this.getRow(C).rowIndex=C;this._onRemove(D,B,C+1,true);this.fireEvent("rowupdated",this,C,B);},refresh:function(B){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var A=this._renderBody();this.mainBody.update(A);if(B===true){this.updateHeaders();this.updateHeaderSortState();}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this);},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class="actuate-grid-empty">'+this.emptyText+"</div>");}},updateHeaderSortState:function(){var B=this.ds.getSortState();if(!B){return ;}if(!this.sortState||(this.sortState.field!=B.field||this.sortState.direction!=B.direction)){this.grid.fireEvent("sortchange",this.grid,B);}this.sortState=B;var C=this.cm.findColumnIndex(B.field);if(C!=-1){var A=B.direction;this.updateSortIcon(C,A);}},destroy:function(){if(this.colMenu){actuate.widget.menu.MenuMgr.unregister(this.colMenu);this.colMenu.destroy();delete this.colMenu;}if(this.hmenu){actuate.widget.menu.MenuMgr.unregister(this.hmenu);this.hmenu.destroy();delete this.hmenu;}if(this.grid.enableColumnMove){var C=actuate.widget.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id];if(C){for(var A in C){if(!C[A].config.isTarget&&C[A].dragElId){var B=C[A].dragElId;C[A].unreg();actuate.widget.Element.get(B).remove();}else{if(C[A].config.isTarget){C[A].proxyTop.remove();C[A].proxyBottom.remove();C[A].unreg();}}if(actuate.widget.dd.DDM.locationCache[A]){delete actuate.widget.dd.DDM.locationCache[A];}}delete actuate.widget.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id];}}if(this.dragZone){this.dragZone.unreg();}actuate.widget.Element.fly(this.innerHd).removeAllListeners();actuate.widget.DomHelper.removeNode(this.innerHd);actuate.widget.Element.destroy(this.resizeMarker,this.resizeProxy,this.focusEl,this.mainBody,this.scroller,this.mainHd,this.mainWrap,this.dragZone,this.splitZone,this.columnDrag,this.columnDrop);this._initData(null,null);actuate.widget.EventManager.removeResizeListener(this._onWindowResize,this);this.purgeListeners();},_onDenyColumnHide:function(){},render:function(){if(this.autoFill){var A=this.grid.ownerCt;if(A&&A.getLayout()){A.on("afterlayout",actuate.Method.bind(function(){this.fitColumns(true,true);this.updateHeaders();},this,{single:true,event:"afterlayout",dispatcher:A}));}else{this.fitColumns(true,true);}}else{if(this.forceFit){this.fitColumns(true,false);}else{if(this.grid.autoExpandColumn){this.autoExpand(true);}}}this._renderUI();},_initData:function(B,A){if(this.ds){this.ds.un("load",this._closure("_onLoad"));this.ds.un("datachanged",this._closure("_onDataChange"));this.ds.un("add",this._closure("_onAdd"));this.ds.un("remove",this._closure("_onRemove"));this.ds.un("update",this._closure("_onUpdate"));this.ds.un("clear",this._closure("_onClear"));}if(B){B.on("load",this._closure("_onLoad"));B.on("datachanged",this._closure("_onDataChange"));B.on("add",this._closure("_onAdd"));B.on("remove",this._closure("_onRemove"));B.on("update",this._closure("_onUpdate"));B.on("clear",this._closure("_onClear"));}this.ds=B;if(this.cm){this.cm.un("configchange",this._closure("_onColConfigChange"));this.cm.un("widthchange",this._closure("_onColWidthChange"));this.cm.un("headerchange",this._closure("_onHeaderChange"));this.cm.un("hiddenchange",this._closure("_onHiddenChange"));this.cm.un("columnmoved",this._closure("_onColumnMove"));this.cm.un("columnlockchange",this._closure("_onColumnLock"));}if(A){delete this.lastViewWidth;A.on("configchange",this._closure("_onColConfigChange"));A.on("widthchange",this._closure("_onColWidthChange"));A.on("headerchange",this._closure("_onHeaderChange"));A.on("hiddenchange",this._closure("_onHiddenChange"));A.on("columnmoved",this._closure("_onColumnMove"));A.on("columnlockchange",this._closure("_onColumnLock"));}this.cm=A;},_onDataChange:function(){this.refresh();this.updateHeaderSortState();this.syncFocusEl(0);},_onClear:function(){this.refresh();this.syncFocusEl(0);},_onUpdate:function(B,A){this.refreshRow(A);},_onAdd:function(C,A,B){this.insertRows(C,B,B+(A.length-1));},_onRemove:function(D,A,B,C){if(C!==true){this.fireEvent("beforerowremoved",this,B,A);}this.removeRow(B);if(C!==true){this.processRows(B);this.applyEmptyText();this.fireEvent("rowremoved",this,B,A);}},_onLoad:function(){this.scrollToTop();},_onColWidthChange:function(A,B,C){this.updateColumnWidth(B,C);},_onHeaderChange:function(A,B,C){this.updateHeaders();},_onHiddenChange:function(A,B,C){this.updateColumnHidden(B,C);},_onColumnMove:function(A,D,B){this.indexMap=null;var C=this.getScrollState();this.refresh(true);this.restoreScroll(C);this._afterMove(B);},_onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true);},_initUI:function(A){A.on("headerclick",this._closure("_onHeaderClick"));},_initEvents:function(){},_onHeaderClick:function(B,A){if(this.headersDisabled||!this.cm.isSortable(A)){return ;}B.stopEditing(true);B.store.sort(this.cm.getDataIndex(A));},_onRowOver:function(B,A){var C;if((C=this.findRowIndex(A))!==false){this.addRowClass(C,"actuate-grid3-row-over");}},_onRowOut:function(B,A){var C;if((C=this.findRowIndex(A))!==false&&!B.within(this.getRow(C),true)){this.removeRowClass(C,"actuate-grid3-row-over");}},_handleWheel:function(A){A.stopPropagation();},_onRowSelect:function(A){this.addRowClass(A,"actuate-grid3-row-selected");},_onRowDeselect:function(A){this.removeRowClass(A,"actuate-grid3-row-selected");},_onCellSelect:function(C,B){var A=this.getCell(C,B);if(A){this.fly(A).addClass("actuate-grid3-cell-selected");}},_onCellDeselect:function(C,B){var A=this.getCell(C,B);if(A){this.fly(A).removeClass("actuate-grid3-cell-selected");}},_onColumnSplitterMoved:function(C,B){this.userResized=true;var A=this.grid.colModel;A.setColumnWidth(C,B,true);if(this.forceFit){this.fitColumns(true,false,C);this.updateAllColumnWidths();}else{this.updateColumnWidth(C,B);this.syncHeaderScroll();}this.grid.fireEvent("columnresize",C,B);},_handleHdMenuClick:function(C){var B=this.hdCtxIndex;var A=this.cm,D=this.ds;switch(C.id){case"asc":D.sort(A.getDataIndex(B),"ASC");break;case"desc":D.sort(A.getDataIndex(B),"DESC");break;default:B=A.getIndexById(C.id.substr(4));if(B!=-1){if(C.checked&&A.getColumnsBy(this.isHideableColumn,this).length<=1){this._onDenyColumnHide();return false;}A.setHidden(B,C.checked);}}return true;},isHideableColumn:function(A){return !A.hidden&&!A.fixed;},_beforeColMenuShow:function(){var A=this.cm,C=A.getColumnCount();this.colMenu.removeAll();for(var B=0;B<C;B++){if(A.config[B].fixed!==true&&A.config[B].hideable!==false){this.colMenu.add(new actuate.widget.menu.CheckItem({id:"col-"+A.getColumnId(B),text:A.getColumnHeader(B),checked:!A.isHidden(B),hideOnClick:false,disabled:A.config[B].hideable===false}));}}},_handleHdDown:function(F,D){if(actuate.widget.Element.fly(D).hasClass("actuate-grid3-hd-btn")){F.stopEvent();var E=this.findHeaderCell(D);actuate.widget.Element.fly(E).addClass("actuate-grid3-hd-menu-open");var C=this.getCellIndex(E);this.hdCtxIndex=C;var B=this.hmenu.items,A=this.cm;B.get("asc").setDisabled(!A.isSortable(C));B.get("desc").setDisabled(!A.isSortable(C));this.hmenu.on("hide",actuate.Method.bind(function(){actuate.widget.Element.fly(E).removeClass("actuate-grid3-hd-menu-open");},this,{single:true,event:"hide",dispatcher:this.hmenu}));this.hmenu.show(D,"tl-bl?");}},_handleHdOver:function(D,A){var C=this.findHeaderCell(A);if(C&&!this.headersDisabled){this.activeHd=C;this.activeHdIndex=this.getCellIndex(C);var B=this.fly(C);this.activeHdRegion=B.getRegion();if(!this.cm.isMenuDisabled(this.activeHdIndex)){B.addClass("actuate-grid3-hd-over");this.activeHdBtn=B.child(".actuate-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(C.firstChild.offsetHeight-1)+"px";}}}},_handleHdMove:function(F,D){if(this.activeHd&&!this.headersDisabled){var B=this.splitHandleWidth||5;var E=this.activeHdRegion;var A=F.getPageX();var C=this.activeHd.style;if(A-E.left<=B&&this.cm.isResizable(this.activeHdIndex-1)){C.cursor=actuate.util.Utility.isAir?"move":actuate.util.Utility.isSafari?"e-resize":"col-resize";}else{if(E.right-A<=(!this.activeHdBtn?B:2)&&this.cm.isResizable(this.activeHdIndex)){C.cursor=actuate.util.Utility.isAir?"move":actuate.util.Utility.isSafari?"w-resize":"col-resize";}else{C.cursor="";}}}},_handleHdOut:function(C,A){var B=this.findHeaderCell(A);if(B&&(!actuate.util.Utility.isIE||!C.within(B,true))){this.activeHd=null;this.fly(B).removeClass("actuate-grid3-hd-over");B.style.cursor="";}},hasRows:function(){var A=this.mainBody.dom.firstChild;return A&&A.className!="actuate-grid-empty";},bind:function(A,B){this._initData(A,B);}});actuate.widget.grid.GridView.SplitDragZone=actuate.Class.extendClass(actuate.widget.dd.DDProxy,{initialize:function(A,B){if(this.__extending){return ;}this.grid=A;this.view=A.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;actuate.widget.grid.GridView.SplitDragZone.superclass.initialize.call(this,B,"gridSplitters"+this.grid.getGridEl().id,{dragElId:actuate.widget.Element.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5;},_b4StartDrag:function(A,E){this.view.headersDisabled=true;var D=this.view.mainWrap.getHeight();this.marker.setHeight(D);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(D);var B=this.cm.getColumnWidth(this.cellIndex);var C=Math.max(B-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(C,1000);this.setYConstraint(0,0);this.minX=A-C;this.maxX=A+1000;this.startPos=A;actuate.widget.dd.DDProxy.prototype._b4StartDrag.call(this,A,E);},_handleMouseDown:function(A){var H=this.view.findHeaderCell(A.getTarget());if(H){var K=this.view.fly(H).getXY(),E=K[0],D=K[1];var I=A.getXY(),C=I[0],B=I[1];var G=H.offsetWidth,F=false;if((C-E)<=this.hw){F=-1;}else{if((E+G)-C<=this.hw){F=0;}}if(F!==false){this.cm=this.grid.colModel;var J=this.view.getCellIndex(H);if(F==-1){if(J+F<0){return ;}while(this.cm.isHidden(J+F)){--F;if(J+F<0){return ;}}}this.cellIndex=J+F;this.split=H.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){actuate.widget.grid.GridView.SplitDragZone.superclass._handleMouseDown.apply(this,arguments);}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(A);}}}},endDrag:function(D){this.marker.hide();var A=this.view;var B=Math.max(this.minX,D.getPageX());var C=B-this.startPos;A._onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+C);setTimeout(function(){A.headersDisabled=false;},50);},autoOffset:function(){this.setDelta(0,0);}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.HeaderDragZone=actuate.Class.extendClass(actuate.widget.dd.DragZone,{initialize:function(A,C,B){if(arguments.length==0){return ;}this.grid=A;this.view=A.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;actuate.widget.grid.HeaderDragZone.superclass.initialize.call(this,C);if(B){this.setHandleElId(actuate.widget.Element.id(C));this.setOuterHandleElId(actuate.widget.Element.id(B));}this.scroll=false;},maxDragWidth:120,getDragData:function(C){var A=actuate.widget.lib.Event.getTarget(C);var B=this.view.findHeaderCell(A);if(B){return{ddel:B.firstChild,header:B};}return false;},_onInitDrag:function(A){this.view.headersDisabled=true;var B=this.dragData.ddel.cloneNode(true);B.id=actuate.widget.Element.id();B.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px";this.proxy.update(B);return true;},_afterValidDrop:function(){var A=this.view;setTimeout(function(){A.headersDisabled=false;},50);},_afterInvalidDrop:function(){var A=this.view;setTimeout(function(){A.headersDisabled=false;},50);}});actuate.widget.grid.HeaderDropZone=actuate.Class.extendClass(actuate.widget.dd.DropZone,{initialize:function(A,C,B){this.grid=A;this.view=A.getView();this.proxyTop=actuate.widget.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},true);this.proxyBottom=actuate.widget.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden");};this.ddGroup="gridHeader"+this.grid.getGridEl().id;actuate.widget.grid.HeaderDropZone.superclass.initialize.call(this,A.getGridEl().dom);},proxyOffsets:[-4,-9],fly:actuate.widget.Element.fly,getTargetFromEvent:function(C){var A=actuate.widget.lib.Event.getTarget(C);var B=this.view.findCellIndex(A);if(B!==false){return this.view.getHeaderCell(B);}},nextVisible:function(C){var B=this.view,A=this.grid.colModel;C=C.nextSibling;while(C){if(!A.isHidden(B.getCellIndex(C))){return C;}C=C.nextSibling;}return null;},prevVisible:function(C){var B=this.view,A=this.grid.colModel;C=C.prevSibling;while(C){if(!A.isHidden(B.getCellIndex(C))){return C;}C=C.prevSibling;}return null;},positionIndicator:function(D,B,E){var H=actuate.widget.lib.Event.getPageX(E);var A=actuate.widget.lib.Dom.getRegion(B.firstChild);var I,K,G=A.top+this.proxyOffsets[1];if((A.right-H)<=(A.right-A.left)/2){I=A.right+this.view.borderWidth;K="after";}else{I=A.left;K="before";}var F=this.view.getCellIndex(D);var J=this.view.getCellIndex(B);if(this.grid.colModel.isFixed(J)){return false;}var C=this.grid.colModel.isLocked(J);if(K=="after"){J++;}if(F<J){J--;}if(F==J&&(C==this.grid.colModel.isLocked(F))){return false;}I+=this.proxyOffsets[0];this.proxyTop.setLeftTop(I,G);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight();}this.proxyBottom.setLeftTop(I,G+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return K;},_onNodeEnter:function(D,A,C,B){if(B.header!=D){this.positionIndicator(B.header,D,C);}},_onNodeOver:function(E,B,D,C){var A=false;if(C.header!=E){A=this.positionIndicator(C.header,E,D);}if(!A){this.proxyTop.hide();this.proxyBottom.hide();}return A?this.dropAllowed:this.dropNotAllowed;},_onNodeOut:function(D,A,C,B){this.proxyTop.hide();this.proxyBottom.hide();},_onNodeDrop:function(B,K,F,D){var E=D.header;if(E!=B){var I=this.grid.colModel;var H=actuate.widget.lib.Event.getPageX(F);var A=actuate.widget.lib.Dom.getRegion(B.firstChild);var L=(A.right-H)<=((A.right-A.left)/2)?"after":"before";var G=this.view.getCellIndex(E);var J=this.view.getCellIndex(B);var C=I.isLocked(J);if(L=="after"){J++;}if(G<J){J--;}if(G==J&&(C==I.isLocked(G))){return false;}I.setLocked(G,C,true);I.moveColumn(G,J);this.grid.fireEvent("columnmove",G,J);return true;}return false;}});actuate.widget.grid.GridView.ColumnDragZone=actuate.Class.extendClass(actuate.widget.grid.HeaderDragZone,{initialize:function(A,B){if(this.__extending){return ;}actuate.widget.grid.GridView.ColumnDragZone.superclass.initialize.call(this,A,B,null);this.proxy._ele.addClass("actuate-grid3-col-dd");},_handleMouseDown:function(A){},callHandleMouseDown:function(A){actuate.widget.grid.GridView.ColumnDragZone.superclass._handleMouseDown.call(this,A);}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.ColumnModel=actuate.Class.extendClass(actuate.widget.Observable,{initialize:function(A){if(arguments.length==0){return ;}this.defaultWidth=100;this.defaultSortable=false;if(A.columns){actuate.Class.extend(this,A);this.setConfig(A.columns,true);}else{this.setConfig(A,true);}actuate.widget.grid.ColumnModel.superclass.initialize.call(this);},getColumnId:function(A){return this.config[A].id;},setConfig:function(C,B){if(!B){delete this.totalWidth;for(var D=0,A=this.config.length;D<A;D++){var E=this.config[D];if(E.editor){E.editor.destroy();}}}this.config=C;this.lookup={};for(var D=0,A=C.length;D<A;D++){var E=C[D];if(typeof E.renderer=="string"){E.renderer=actuate.widget.util.Format[E.renderer];}if(typeof E.id=="undefined"){E.id=D;}if(E.editor&&E.editor.isFormField){E.editor=new actuate.widget.grid.GridEditor(E.editor);}this.lookup[E.id]=E;}if(!B){this.fireEvent("configchange",this);}},getColumnById:function(A){return this.lookup[A];},getIndexById:function(C){for(var B=0,A=this.config.length;B<A;B++){if(this.config[B].id==C){return B;}}return -1;},moveColumn:function(C,A){var B=this.config[C];this.config.splice(C,1);this.config.splice(A,0,B);this.dataMap=null;this.fireEvent("columnmoved",this,C,A);},isLocked:function(A){return this.config[A].locked===true;},setLocked:function(B,C,A){if(this.isLocked(B)==C){return ;}this.config[B].locked=C;if(!A){this.fireEvent("columnlockchange",this,B,C);}},getTotalLockedWidth:function(){var A=0;for(var B=0;B<this.config.length;B++){if(this.isLocked(B)&&!this.isHidden(B)){this.totalWidth+=this.getColumnWidth(B);}}return A;},getLockedCount:function(){for(var B=0,A=this.config.length;B<A;B++){if(!this.isLocked(B)){return B;}}},getColumnCount:function(C){if(C===true){var D=0;for(var B=0,A=this.config.length;B<A;B++){if(!this.isHidden(B)){D++;}}return D;}return this.config.length;},getColumnsBy:function(D,C){var E=[];for(var B=0,A=this.config.length;B<A;B++){var F=this.config[B];if(D.call(C||this,F,B)===true){E[E.length]=F;}}return E;},isSortable:function(A){if(typeof this.config[A].sortable=="undefined"){return this.defaultSortable;}return this.config[A].sortable;},isMenuDisabled:function(A){return !!this.config[A].menuDisabled;},getRenderer:function(A){if(!this.config[A].renderer){return actuate.widget.grid.ColumnModel.defaultRenderer;}return this.config[A].renderer;},setRenderer:function(A,B){this.config[A].renderer=B;},getColumnWidth:function(A){return this.config[A].width||this.defaultWidth;},setColumnWidth:function(B,C,A){this.config[B].width=C;this.totalWidth=null;if(!A){this.fireEvent("widthchange",this,B,C);}},getTotalWidth:function(B){if(!this.totalWidth){this.totalWidth=0;for(var C=0,A=this.config.length;C<A;C++){if(B||!this.isHidden(C)){this.totalWidth+=this.getColumnWidth(C);}}}return this.totalWidth;},getColumnHeader:function(A){return this.config[A].header;},setColumnHeader:function(A,B){this.config[A].header=B;this.fireEvent("headerchange",this,A,B);},getColumnTooltip:function(A){return this.config[A].tooltip;},setColumnTooltip:function(A,B){this.config[A].tooltip=B;},getDataIndex:function(A){return this.config[A].dataIndex;},setDataIndex:function(A,B){this.config[A].dataIndex=B;},findColumnIndex:function(C){var D=this.config;for(var B=0,A=D.length;B<A;B++){if(D[B].dataIndex==C){return B;}}return -1;},isCellEditable:function(A,B){return(this.config[A].editable||(typeof this.config[A].editable=="undefined"&&this.config[A].editor))?true:false;},getCellEditor:function(A,B){return this.config[A].editor;},setEditable:function(A,B){this.config[A].editable=B;},isHidden:function(A){return this.config[A].hidden;},isFixed:function(A){return this.config[A].fixed;},isResizable:function(A){return A>=0&&this.config[A].resizable!==false&&this.config[A].fixed!==true;},setHidden:function(A,B){var C=this.config[A];if(C.hidden!==B){C.hidden=B;this.totalWidth=null;this.fireEvent("hiddenchange",this,A,B);}},setEditor:function(A,B){this.config[A].editor=B;}});actuate.widget.grid.ColumnModel.defaultRenderer=function(A){if(typeof A=="string"&&A.length<1){return"&#160;";}return A;};actuate.widget.grid.DefaultColumnModel=actuate.widget.grid.ColumnModel;actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.SplitDragZone=actuate.Class.extendClass(actuate.widget.dd.DDProxy,{initialize:function(A,C,B){this.grid=A;this.view=A.getView();this.proxy=this.view.resizeProxy;actuate.widget.grid.SplitDragZone.superclass.initialize.call(this,C,"gridSplitters"+this.grid.getGridEl().id,{dragElId:actuate.widget.Element.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(actuate.widget.Element.id(C));this.setOuterHandleElId(actuate.widget.Element.id(B));this.scroll=false;},fly:actuate.widget.Element.fly,_b4StartDrag:function(A,D){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var B=this.cm.getColumnWidth(this.cellIndex);var C=Math.max(B-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(C,1000);this.setYConstraint(0,0);this.minX=A-C;this.maxX=A+1000;this.startPos=A;actuate.widget.dd.DDProxy.prototype._b4StartDrag.call(this,A,D);},_handleMouseDown:function(B){ev=actuate.widget.EventObject.setEvent(B);var A=this.fly(ev.getTarget());if(A.hasClass("actuate-grid-split")){this.cellIndex=this.view.getCellIndex(A.dom);this.split=A.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){actuate.widget.grid.SplitDragZone.superclass._handleMouseDown.apply(this,arguments);}}},endDrag:function(C){this.view.headersDisabled=false;var A=Math.max(this.minX,actuate.widget.lib.Event.getPageX(C));var B=A-this.startPos;this.view._onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+B);},autoOffset:function(){this.setDelta(0,0);}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.GridDragZone=actuate.Class.extendClass(actuate.widget.dd.DragZone,{ddGroup:"GridDD",initialize:function(B,A){this.view=B.getView();actuate.widget.grid.GridDragZone.superclass.initialize.call(this,this.view.mainBody.dom,A);if(this.view.lockedBody){this.setHandleElId(actuate.widget.Element.id(this.view.mainBody.dom));this.setOuterHandleElId(actuate.widget.Element.id(this.view.lockedBody.dom));}this.scroll=false;this.grid=B;this.ddel=document.createElement("div");this.ddel.className="actuate-grid-dd-wrap";},getDragData:function(B){var A=actuate.widget.lib.Event.getTarget(B);var D=this.view.findRowIndex(A);if(D!==false){var C=this.grid.selModel;if(!C.isSelected(D)||B.hasModifier()){C._handleMouseDown(this.grid,D,B);}return{grid:this.grid,ddel:this.ddel,rowIndex:D,selections:C.getSelections()};}return false;},_onInitDrag:function(B){var A=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel);},_afterRepair:function(){this.dragging=false;},getRepairXY:function(B,A){return false;},_onEndDrag:function(A,B){},_onValidDrop:function(A,B,C){this.hideProxy();},_beforeInvalidDrop:function(A,B){}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.GridEditor=actuate.Class.extendClass(actuate.widget.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:false,cls:"actuate-small-editor actuate-grid-editor",shim:false,shadow:false,initialize:function(B,A){actuate.widget.grid.GridEditor.superclass.initialize.call(this,B,A);B.monitorTab=false;}});actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.GridPanel=actuate.Class.extendClass(actuate.widget.panel.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,trackMouseOver:true,enableDragDrop:false,enableColumnMove:true,enableColumnHide:true,enableHdMenu:true,stripeRows:false,autoExpandColumn:false,autoExpandMin:50,autoExpandMax:1000,view:null,loadMask:false,deferRowRender:true,rendered:false,viewReady:false,stateEvents:["columnmove","columnresize","sortchange"],_initComponent:function(){actuate.widget.grid.GridPanel.superclass._initComponent.call(this);this.autoScroll=false;this.autoWidth=false;if(actuate.util.Utility.isArray(this.columns)){this.colModel=new actuate.widget.grid.ColumnModel(this.columns);delete this.columns;}if(this.ds){this.store=this.ds;delete this.ds;}if(this.cm){this.colModel=this.cm;delete this.cm;}if(this.sm){this.selModel=this.sm;delete this.sm;}},_onRender:function(C,A){actuate.widget.grid.GridPanel.superclass._onRender.apply(this,arguments);var D=this.body;this._ele.addClass("actuate-grid-panel");var B=this.getView();B.init(this);D.on("mousedown",this._closure("_onMouseDown"));D.on("click",this._closure("_onClick"));D.on("dblclick",this._closure("_onDblClick"));D.on("contextmenu",this._closure("_onContextMenu"));D.on("keydown",this._closure("_onKeyDown"));this.relayEvents(D,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);this.view.render();},_initEvents:function(){actuate.widget.grid.GridPanel.superclass._initEvents.call(this);if(this.loadMask){this.loadMask=new actuate.widget.LoadMask(this.bwrap,actuate.Class.extend({store:this.store},this.loadMask));}},_initStateEvents:function(){actuate.widget.grid.GridPanel.superclass._initStateEvents.call(this);},applyState:function(F){var B=this.colModel;var E=F.columns;if(E){for(var C=0,A=E.length;C<A;C++){var D=E[C];var H=B.getColumnById(D.id);if(H){H.hidden=D.hidden;H.width=D.width;var G=B.getIndexById(D.id);if(G!=C){B.moveColumn(G,C);}}}}if(F.sort){this.store[this.store.remoteSort?"setDefaultSort":"sort"](F.sort.field,F.sort.direction);}},getState:function(){var C={columns:[]};for(var B=0,D;D=this.colModel.config[B];B++){C.columns[B]={id:D.id,width:D.width};if(D.hidden){C.columns[B].hidden=true;}}var A=this.store.getSortState();if(A){C.sort=A;}return C;},_afterRender:function(){actuate.widget.grid.GridPanel.superclass._afterRender.call(this);this.view.layout();if(this.deferRowRender){actuate.Method.defer(10,this.view._afterRender,this.view);}else{this.view._afterRender();}this.viewReady=true;},reconfigure:function(A,B){if(this.loadMask){this.loadMask.destroy();this.loadMask=new actuate.widget.LoadMask(this.bwrap,actuate.Class.extend({store:A},this.initialConfig.loadMask));}this.view.bind(A,B);this.store=A;this.colModel=B;if(this.rendered){this.view.refresh(true);}},_onKeyDown:function(A){this.fireEvent("keydown",A);},_onDestroy:function(){if(this.rendered){if(this.loadMask){this.loadMask.destroy();}var A=this.body;A.removeAllListeners();this.view.destroy();A.update("");}this.colModel.purgeListeners();actuate.widget.grid.GridPanel.superclass._onDestroy.call(this);},processEvent:function(C,E){this.fireEvent(C,E);var D=E.getTarget();var B=this.view;var G=B.findHeaderIndex(D);if(G!==false){this.fireEvent("header"+C,this,G,E);}else{var F=B.findRowIndex(D);var A=B.findCellIndex(D);if(F!==false){this.fireEvent("row"+C,this,F,E);if(A!==false){this.fireEvent("cell"+C,this,F,A,E);}}}},_onClick:function(A){this.processEvent("click",A);},_onMouseDown:function(A){this.processEvent("mousedown",A);},_onContextMenu:function(B,A){this.processEvent("contextmenu",B);},_onDblClick:function(A){this.processEvent("dblclick",A);},walkCells:function(J,C,B,E,I){var H=this.colModel,F=H.getColumnCount();var A=this.store,G=A.getCount(),D=true;if(B<0){if(C<0){J--;D=false;}while(J>=0){if(!D){C=F-1;}D=false;while(C>=0){if(E.call(I||this,J,C,H)===true){return[J,C];}C--;}J--;}}else{if(C>=F){J++;D=false;}while(J<G){if(!D){C=0;}D=false;while(C<F){if(E.call(I||this,J,C,H)===true){return[J,C];}C++;}J++;}}return null;},getSelections:function(){return this.selModel.getSelections();},_onResize:function(){actuate.widget.grid.GridPanel.superclass._onResize.apply(this,arguments);if(this.viewReady){this.view.layout();}},getGridEl:function(){return this.body;},stopEditing:actuate.util.Utility.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new actuate.widget.grid.RowSelectionModel(this.disableSelection?{selectRow:actuate.util.Utility.emptyFn}:null);}return this.selModel;},getStore:function(){return this.store;},getColumnModel:function(){return this.colModel;},getView:function(){if(!this.view){this.view=new actuate.widget.grid.GridView(this.viewConfig);}return this.view;},getDragDropText:function(){var A=this.selModel.getCount();return String.format(this.ddText,A,A==1?"":"s");}});actuate.widget.Component.prototype.registerType("grid",actuate.widget.grid.GridPanel);actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.GroupingView=actuate.Class.extendClass(actuate.widget.grid.GridView,{hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:"(None)",ignoreAdd:false,groupTextTpl:"{text}",gidSeed:1000,_initTemplates:function(){actuate.widget.grid.GroupingView.superclass._initTemplates.call(this);this.state={};var A=this.grid.getSelectionModel();A.on(A.selectRow?"beforerowselect":"beforecellselect",this._closure("_onBeforeRowSelect"));if(!this.startGroup){this.startGroup=new actuate.widget.XTemplate('<div id="{groupId}" class="actuate-grid-group {cls}">','<div id="{groupId}-hd" class="actuate-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="actuate-grid-group-body">');}this.startGroup.compile();this.endGroup="</div></div>";},findGroup:function(A){return actuate.widget.Element.fly(A).up(".actuate-grid-group",this.mainBody.dom);},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[];},_onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var A=this.getScrollState();this.refresh();this.restoreScroll(A);}else{if(!this.enableGrouping){actuate.widget.grid.GroupingView.superclass._onAdd.apply(this,arguments);}}},_onRemove:function(E,A,B,D){actuate.widget.grid.GroupingView.superclass._onRemove.apply(this,arguments);var C=document.getElementById(A._groupId);if(C&&C.childNodes[1].childNodes.length<1){actuate.widget.DomHelper.removeNode(C);}this.applyEmptyText();},refreshRow:function(A){if(this.ds.getCount()==1){this.refresh();}else{this.isUpdating=true;actuate.widget.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false;}},_beforeMenuShow:function(){var C=this.getGroupField();var B=this.hmenu.items.get("groupBy");if(B){B.setDisabled(this.cm.config[this.hdCtxIndex].groupable===false);}var A=this.hmenu.items.get("showGroups");if(A){A.setDisabled(!C&&this.cm.config[this.hdCtxIndex].groupable===false);A.setChecked(!!C,true);}},_renderUI:function(){actuate.widget.grid.GroupingView.superclass._renderUI.call(this);this.mainBody.on("mousedown",this._closure("interceptMouse"));if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this._onGroupByClick,scope:this,ic_onCls:"actuate-group-by-icon"});if(this.enableNoGroups){this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:true,checkHandler:this._onShowGroupsClick,scope:this});}this.hmenu.on("beforeshow",this._closure("_beforeMenuShow"),this);}},_onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));this._beforeMenuShow();},_onShowGroupsClick:function(A,B){if(B){this._onGroupByClick();}else{this.grid.store.clearGrouping();}},toggleGroup:function(C,B){this.grid.stopEditing(true);C=actuate.widget.Element.getDom(C);var A=actuate.widget.Element.fly(C);B=B!==undefined?B:A.hasClass("actuate-grid-group-collapsed");this.state[A.dom.id]=B;A[B?"removeClass":"addClass"]("actuate-grid-group-collapsed");},toggleAllGroups:function(C){var B=this.getGroups();for(var D=0,A=B.length;D<A;D++){this.toggleGroup(B[D],C);}},expandAllGroups:function(){this.toggleAllGroups(true);},collapseAllGroups:function(){this.toggleAllGroups(false);},interceptMouse:function(B){var A=B.getTarget(".actuate-grid-group-hd",this.mainBody);if(A){B.stopEvent();this.toggleGroup(A.parentNode);}},getGroup:function(A,D,F,G,B,E){var C=F?F(A,{},D,G,B,E):String(A);if(C===""){C=this.cm.config[B].emptyGroupText||this.emptyGroupText;}return C;},getGroupField:function(){return this.grid.store.getGroupState();},_renderRows:function(){var A=this.getGroupField();var D=!!A;if(this.hideGroupedColumn){var B=this.cm.findColumnIndex(A);if(!D&&this.lastGroupField!==undefined){this.mainBody.update("");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField;}else{if(D&&this.lastGroupField===undefined){this.lastGroupField=A;this.cm.setHidden(B,true);}else{if(D&&this.lastGroupField!==undefined&&A!==this.lastGroupField){this.mainBody.update("");var C=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(C,false);this.lastGroupField=A;this.cm.setHidden(B,true);}}}}return actuate.widget.grid.GroupingView.superclass._renderRows.apply(this,arguments);},_doRender:function(D,G,P,A,O,R){if(G.length<1){return"";}var Y=this.getGroupField();var N=this.cm.findColumnIndex(Y);this.enableGrouping=!!Y;if(!this.enableGrouping||this.isUpdating){return actuate.widget.grid.GroupingView.superclass._doRender.apply(this,arguments);}var H="width:"+this.getTotalWidth()+";";var Q=this.grid.getGridEl().id;var F=this.cm.config[N];var B=F.groupRenderer||F.renderer;var S=this.showGroupName?(F.groupName||F.header)+": ":"";var X=[],K,T,U,M;for(T=0,U=G.length;T<U;T++){var J=A+T;var L=G[T],E=L.data[Y],V=this.getGroup(E,L,B,J,N,P);if(!K||K.group!=V){M=Q+"-gp-"+Y+"-"+actuate.widget.util.Format.htmlEncode(V);var C=typeof this.state[M]!=="undefined"?!this.state[M]:this.startCollapsed;var I=C?"actuate-grid-group-collapsed":"";K={group:V,gvalue:E,text:S+V,groupId:M,startRow:J,rs:[L],cls:I,style:H};X.push(K);}else{K.rs.push(L);}L._groupId=M;}var W=[];for(T=0,U=X.length;T<U;T++){var V=X[T];this._doGroupStart(W,V,D,P,O);W[W.length]=actuate.widget.grid.GroupingView.superclass._doRender.call(this,D,V.rs,P,V.startRow,O,R);this._doGroupEnd(W,V,D,P,O);}return W.join("");},getGroupId:function(F){var D=this.grid.getGridEl().id;var C=this.getGroupField();var E=this.cm.findColumnIndex(C);var B=this.cm.config[E];var G=B.groupRenderer||B.renderer;var A=this.getGroup(F,{data:{}},G,0,E,this.ds);return D+"-gp-"+C+"-"+actuate.widget.util.Format.htmlEncode(F);},_doGroupStart:function(A,D,B,E,C){A[A.length]=this.startGroup.apply(D);},_doGroupEnd:function(A,D,B,E,C){A[A.length]=this.endGroup;},getRows:function(){if(!this.enableGrouping){return actuate.widget.grid.GroupingView.superclass.getRows.call(this);}var G=[];var F,C=this.getGroups();for(var E=0,A=C.length;E<A;E++){F=C[E].childNodes[1].childNodes;for(var D=0,B=F.length;D<B;D++){G[G.length]=F[D];}}return G;},updateGroupWidths:function(){if(!this.enableGrouping||!this.hasRows()){return ;}var C=Math.max(this.cm.getTotalWidth(),this._ele.dom.offsetWidth-this.scrollOffset)+"px";var B=this.getGroups();for(var D=0,A=B.length;D<A;D++){B[D].firstChild.style.width=C;}},_onColumnWidthUpdated:function(C,A,B){actuate.widget.grid.GroupingView.superclass._onColumnWidthUpdated.call(this,C,A,B);this.updateGroupWidths();},_onAllColumnWidthsUpdated:function(A,B){actuate.widget.grid.GroupingView.superclass._onAllColumnWidthsUpdated.call(this,A,B);this.updateGroupWidths();},_onColumnHiddenUpdated:function(B,C,A){actuate.widget.grid.GroupingView.superclass._onColumnHiddenUpdated.call(this,B,C,A);this.updateGroupWidths();},_onLayout:function(){this.updateGroupWidths();},_onBeforeRowSelect:function(D,C){if(!this.enableGrouping){return ;}var B=this.getRow(C);if(B&&!B.offsetParent){var A=this.findGroup(B);this.toggleGroup(A,true);}},groupByText:"Group By This Field",showGroupsText:"Show in Groups"});actuate.widget.grid.GroupingView.GROUP_ID=1000;actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.EditorGridPanel=actuate.Class.extendClass(actuate.widget.grid.GridPanel,{clicksToEdit:2,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,_initComponent:function(){actuate.widget.grid.EditorGridPanel.superclass._initComponent.call(this);if(!this.selModel){this.selModel=new actuate.widget.grid.CellSelectionModel();}this.activeEditor=null;},_initEvents:function(){actuate.widget.grid.EditorGridPanel.superclass._initEvents.call(this);this.on("bodyscroll",this._closure("stopEditing"));this.on("columnresize",this._closure("stopEditing"));if(this.clicksToEdit==1){this.on("cellclick",this._closure("_onCellDblClick"));}else{if(this.clicksToEdit=="auto"&&this.view.mainBody){this.view.mainBody.on("mousedown",this._closure("_onAutoEditClick"));}this.on("celldblclick",this._closure("_onCellDblClick"));}},_onCellDblClick:function(B,C,A){this.startEditing(C,A);},_onAutoEditClick:function(C,B){if(C.button!==0){return ;}var E=this.view.findRowIndex(B);var A=this.view.findCellIndex(B);if(E!==false&&A!==false){this.stopEditing();if(this.selModel.getSelectedCell){var D=this.selModel.getSelectedCell();if(D&&D.cell[0]===E&&D.cell[1]===A){this.startEditing(E,A);}}else{if(this.selModel.isSelected(E)){this.startEditing(E,A);}}}},_onEditComplete:function(B,D,A){this.editing=false;this.activeEditor=null;B.un("specialkey",this.selModel._closure("_onEditorKey"));var C=B.record;var F=this.colModel.getDataIndex(B.col);D=this.postEditValue(D,A,C,F);if(String(D)!==String(A)){var E={grid:this,record:C,field:F,originalValue:A,value:D,row:B.row,column:B.col,cancel:false};if(this.fireEvent("validateedit",E)!==false&&!E.cancel){C.set(F,E.value);delete E.cancel;this.fireEvent("afteredit",E);}}this.view.focusCell(B.row,B.col);},startEditing:function(F,B){this.stopEditing();if(this.colModel.isCellEditable(B,F)){this.view.ensureVisible(F,B,true);var C=this.store.getAt(F);var E=this.colModel.getDataIndex(B);var D={grid:this,record:C,field:E,value:C.data[E],row:F,column:B,cancel:false};if(this.fireEvent("beforeedit",D)!==false&&!D.cancel){this.editing=true;var A=this.colModel.getCellEditor(B,F);if(!A.rendered){A.render(this.view.getEditorParent(A));}actuate.Method.defer(50,function(){A.row=F;A.col=B;A.record=C;A.un("complete",this._closure("_onEditComplete"));A.on("complete",this._closure("_onEditComplete"));A.on("specialkey",this.selModel._closure("_onEditorKey"));this.activeEditor=A;var G=this.preEditValue(C,E);A.startEdit(this.view.getCell(F,B).firstChild,G===undefined?"":G);},this);}}},preEditValue:function(A,C){var B=A.data[C];return this.autoEncode&&typeof B=="string"?actuate.widget.util.Format.htmlDecode(B):B;},postEditValue:function(C,A,B,D){return this.autoEncode&&typeof C=="string"?actuate.widget.util.Format.htmlEncode(C):C;},stopEditing:function(A){if(this.activeEditor){this.activeEditor[A===true?"cancelEdit":"completeEdit"]();}this.activeEditor=null;},_onDestroy:function(){if(this.rendered){var C=this.colModel.config;for(var B=0,A=C.length;B<A;B++){var D=C[B];actuate.widget.Element.destroy(D.editor);}}actuate.widget.grid.EditorGridPanel.superclass._onDestroy.call(this);}});actuate.widget.Component.prototype.registerType("editorgrid",actuate.widget.grid.EditorGridPanel);actuate.util.Package.define("actuate.widget.grid");actuate.widget.grid.PropertyRecord=actuate.widget.data.Record.create([{name:"name",type:"string"},"value"]);actuate.widget.grid.PropertyStore=actuate.Class.extendClass(actuate.widget.Observable,{initialize:function(A,B){this.grid=A;this.store=new actuate.widget.data.Store({recordType:actuate.widget.grid.PropertyRecord});this.store.on("update",this._closure("_onUpdate"));if(B){this.setSource(B);}actuate.widget.grid.PropertyStore.superclass.initialize.call(this);},setSource:function(C){this.source=C;this.store.removeAll();var B=[];for(var A in C){if(this.isEditableValue(C[A])){B.push(new actuate.widget.grid.PropertyRecord({name:A,value:C[A]},A));}}this.store.loadRecords({records:B},{},true);},_onUpdate:function(E,A,D){if(D==actuate.widget.data.Record.EDIT){var B=A.data["value"];var C=A.modified["value"];if(this.grid.fireEvent("beforepropertychange",this.source,A.id,B,C)!==false){this.source[A.id]=B;A.commit();this.grid.fireEvent("propertychange",this.source,A.id,B,C);}else{A.reject();}}},getProperty:function(A){return this.store.getAt(A);},isEditableValue:function(A){if(actuate.util.Utility.isDate(A)){return true;}else{if(typeof A=="object"||typeof A=="function"){return false;}}return true;},setValue:function(B,A){this.source[B]=A;this.store.getById(B).set("value",A);},getSource:function(){return this.source;}});actuate.widget.grid.PropertyColumnModel=actuate.Class.extendClass(actuate.widget.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",initialize:function(C,B){this.grid=C;var D=actuate.widget.grid;D.PropertyColumnModel.superclass.initialize.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true}]);this.store=B;this.bselect=actuate.widget.DomHelper.append(document.body,{tag:"select",cls:"actuate-grid-editor actuate-hide-display",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]});var E=actuate.widget.form;var A=new E.Field({el:this.bselect,bselect:this.bselect,autoShow:true,getValue:function(){return this.bselect.value=="true";}});this.editors={"date":new D.GridEditor(new E.DateField({selectOnFocus:true})),"string":new D.GridEditor(new E.TextField({selectOnFocus:true})),"number":new D.GridEditor(new E.NumberField({selectOnFocus:true,style:"text-align:left;"})),"boolean":new D.GridEditor(A)};this._renderCellDelegate=actuate.Method.createDelegate(this._renderCell,this);this._renderPropDelegate=actuate.Method.createDelegate(this._renderProp,this);},_renderDate:function(A){return A.dateFormat(this.dateFormat);},_renderBool:function(A){return A?"true":"false";},isCellEditable:function(A,B){return A==1;},getRenderer:function(A){return A==1?this._renderCellDelegate:this._renderPropDelegate;},_renderProp:function(A){return this.getPropertyName(A);},_renderCell:function(A){var B=A;if(actuate.util.Utility.isDate(A)){B=this._renderDate(A);}else{if(typeof A=="boolean"){B=this._renderBool(A);}}return actuate.widget.util.Format.htmlEncode(B);},getPropertyName:function(B){var A=this.grid.propertyNames;return A&&A[B]?A[B]:B;},getCellEditor:function(A,E){var B=this.store.getProperty(E);var D=B.data["name"],C=B.data["value"];if(this.grid.customEditors[D]){return this.grid.customEditors[D];}if(actuate.util.Utility.isDate(C)){return this.editors["date"];}else{if(typeof C=="number"){return this.editors["number"];}else{if(typeof C=="boolean"){return this.editors["boolean"];}else{return this.editors["string"];}}}}});actuate.widget.grid.PropertyGrid=actuate.Class.extendClass(actuate.widget.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},_initComponent:function(){this.customEditors=this.customEditors||{};this.lastEditRow=null;var B=new actuate.widget.grid.PropertyStore(this);this.propStore=B;var A=new actuate.widget.grid.PropertyColumnModel(this,B);B.store.sort("name","ASC");this.cm=A;this.ds=B.store;actuate.widget.grid.PropertyGrid.superclass._initComponent.call(this);this.selModel.on("beforecellselect",actuate.Method.bind(function(E,D,C){if(C===0){actuate.Method.defer(200,this.startEditing,this,[D,1]);return false;}},this));},_onRender:function(){actuate.widget.grid.PropertyGrid.superclass._onRender.apply(this,arguments);this.getGridEl().addClass("actuate-props-grid");},_afterRender:function(){actuate.widget.grid.PropertyGrid.superclass._afterRender.apply(this,arguments);if(this.source){this.setSource(this.source);}},setSource:function(A){this.propStore.setSource(A);},getSource:function(){return this.propStore.getSource();}});actuate.widget.Component.prototype.registerType("propertygrid",actuate.widget.grid.PropertyGrid);actuate.util.Package.define("actuate.widget.custom.TreeCombo");actuate.widget.custom.TreeCombo.TreeComboBox=actuate.Class.create();actuate.widget.custom.TreeCombo.TreeComboBox.superclass=actuate.widget.form.ComboBox.prototype;actuate.widget.custom.TreeCombo.TreeComboBox.prototype=actuate.Class.extend(new actuate.widget.form.ComboBox(),{editable:false,initialize:function(A){actuate.widget.custom.TreeCombo.TreeComboBox.superclass.initialize.call(this,A);this.defaultIndex=-1;if(this.store){actuate.Class.extend(this.store,{valueField:this.valueField,displayField:this.displayField});}},__createDataView:function(){var B=new actuate.widget.custom.TreeCombo.TreeDataView({applyTo:this.innerList,autoScroll:true,height:150,rootVisible:false,dataStore:this.store,icons:this.icons,valueField:this.valueField,displayField:this.displayField,pathSeparator:"|",autoExpand:this.autoExpand,expandDeep:this.expandDeep,displayField:this.displayField});new actuate.widget.tree.TreeSorter(B,this.sortInfo);B.registerEventHandler("click",actuate.Method.bind(this._onNodeClick,this));var A=B.getSelectionModel();if(A){A.registerEventHandler("beforeselect",actuate.Method.bind(this._onBeforeSelect,this));A.registerEventHandler("selectionchange",actuate.Method.bind(this._onSelectionChange,this));}return B;},_onNodeClick:function(B){if(B){var A={data:{}};A.data[this.valueField]=B.attributes;return this.fireEvent("nodeclicked",this,A);}},_onBeforeSelect:function(B,C){if(C){var A={data:{}};A.data[this.valueField]=C.attributes;return this.fireEvent("beforeselect",this,A);}},_onSelectionChange:function(B,A){actuate.widget.custom.TreeCombo.TreeComboBox.superclass._onViewClick.call(this,false);},setValue:function(A){var B=actuate.widget.custom.TreeCombo.TreeComboBox.superclass.setValue.call(this,A);if(B&&this.view){this.view.select(this.selectedIndex);}return B;},getRootNode:function(){if(this.view){return this.view.root;}return null;},setValueById:function(B){var A=this.store.getById(B);if(A&&A.data&&A.data[this.valueField]){return this.setValue(A.data[this.valueField]);}else{this.setValue(undefined);}},refresh:function(){if(this.view){var B;var A;if(this.list){B=this.list.getWidth();}if(this.innerList){A=this.innerList.getWidth();}this.__destroyList();this._initList();if(this.innerList&&A){this.innerList.setWidth(A);}if(this.list&&B){this.list.setWidth(B);}}},__getDisplayValue:function(E){var D=this._findRecord(this.valueField,E,this._ignoreCase);var G=E;if(D){var F=this.displayField;if(this.editable){F=this.valueField;}G=D.data[F];if(F==this.valueField||F!=this.titleField){var B=this.getRootNode();var H=B?B.id:"actuate.widget.tree.root";var C=D.data[this.valueField];while(C&&C.parentId&&C.parentId!=H){var A=this.store.getById(C.parentId);C=A?A.data:null;if(C){G=C[F]+"/"+G;}}}}return G;}});actuate.widget.Component.prototype.registerType("treecombo",actuate.widget.custom.TreeCombo.TreeComboBox);actuate.util.Package.define("actuate.widget.custom.TreeCombo");actuate.widget.custom.TreeCombo.TreeComboStore=actuate.Class.create();actuate.widget.custom.TreeCombo.TreeComboStore.superclass=actuate.widget.tree.TreeStore.prototype;actuate.widget.custom.TreeCombo.TreeComboStore.prototype=actuate.Class.extend(new actuate.widget.tree.TreeStore(),{_innerStore:null,initialize:function(B,A){actuate.widget.custom.TreeCombo.TreeComboStore.superclass.initialize.call(this,null,A);this.setComboStore(B);},getComboStore:function(){return this._innerStore;},setComboStore:function(A){this._innerStore=A;if(!this._innerStore){this._innerStore=new actuate.widget.data.SimpleStore({fields:[]});}actuate.Class.extend(this,this._innerStore);},getCount:function(){return this._innerStore.length;},removeAll:function(){actuate.widget.custom.TreeCombo.TreeComboStore.superclass.removeAll.apply(this,arguments);if(this._innerStore){this._innerStore.removeAll();}}});actuate.util.Package.define("actuate.widget.custom.TreeCombo");actuate.widget.custom.TreeCombo.TreeDataView=actuate.Class.create();actuate.widget.custom.TreeCombo.TreeDataView.superclass=actuate.widget.tree.TreePanel.prototype;actuate.widget.custom.TreeCombo.TreeDataView.prototype=actuate.Class.extend(new actuate.widget.tree.TreePanel(),{border:false,_initEvents:function(){actuate.widget.custom.TreeCombo.TreeDataView.superclass._initEvents.call(this);this.eventModel=new actuate.widget.tree.TreeEventModel(this);this.eventModel._initEvents();this._initData();},_initData:function(){var E=[];var D=this.dataStore.getComboStore();if(D){var C=D.getCount();for(var B=0;B<C;B++){var A=D.getAt(B);if(A&&A.data&&A.data[this.valueField]){E.push(A.data[this.valueField]);}}this.dataStore.clear();this.dataStore.putAll(E);}},select:function(C){var A=this.getSelectionModel();if(!A){return ;}var B=this.dataStore.getAt(C);var D;if(B&&B.data&&B.data[this.valueField]){D=B.data[this.valueField].node;}if(D){A.select(D);}else{A.clearSelections();}},getNode:function(B){var A=this.dataStore.getAt(B);if(A){var C=this.getNodeById(A.id);return C?C.ui._getEl():null;}},findItemFromChild:function(A){},getSelectedIndexes:function(){var B=this.getSelectionModel().getSelectedNode();if(B&&this.dataStore){var A=this.dataStore.indexOfId(B.id);if(A>=0){return[A];}}return[];},setStore:function(A){actuate.widget.custom.TreeCombo.TreeDataView.superclass.setStore.call(this,A);if(this.autoExpand){if(this.expandDeep!=null&&this.expandDeep>0){this.expandDeeps(this.expandDeep);}else{this.expandAll();}}},setFields:function(B,C,A){this.valueField=B;this.displayField=C;this.titleField=A;},setTemplate:function(A){this.template=A;}});actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.MultiSlider=actuate.Class.create();actuate.widget.custom.MultiSlider.superclass=actuate.widget.form.Slider.prototype;actuate.widget.custom.MultiSlider.prototype=actuate.Class.extend(new actuate.widget.form.Slider(),{thumbCount:2,initialize:function(B){actuate.widget.custom.MultiSlider.superclass.initialize.call(this,B);if(!actuate.util.Utility.isArray(this.value)){var A=this.minValue;this.value=[A];for(var C=1;C<this.thumbCount-1;C++){A+=this.increment||1;this.value.push(A);}if(this.thumbCount>1){this.value.push(this.maxValue);}}},_extendVertical:function(){actuate.Class.extend(this,new actuate.widget.custom.MultiSlider.Vertical());},_createEl:function(){var B={cls:"actuate-slider-thumb"};var A={tag:"a",cls:"actuate-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"};var D=[A];for(var C=0;C<this.thumbCount;C++){D.push(B);}return{cls:"actuate-slider "+(this.vertical?"actuate-slider-vert":"actuate-slider-horz"),cn:{cls:"actuate-slider-end",cn:{cls:"actuate-slider-inner",cn:D}}};},_onRender:function(B){actuate.widget.custom.MultiSlider.superclass._onRender.apply(this,arguments);var C=this.thumb;this.thumb=[];for(var A=0;A<this.thumbCount;A++){if(C){C.index=A;this.thumb.push(C);C=C.next();}}this._initEvents();},_createValueBox:function(C){var B=[];for(var A=0;A<this.thumbCount;A++){B.push(actuate.widget.custom.MultiSlider.superclass._createValueBox.call(this,C));}return B;},_initEvents:function(){this._mon(this._ele,"mousedown",this._onMouseDown,this);if(actuate.util.Utility.isArray(this.thumb)){this.tracker=[];for(var A=0;A<this.thumbCount;A++){var B=new actuate.widget.dd.DragTracker({_onBeforeStart:actuate.Method.createDelegate(this._onBeforeDragStart,this),_onStart:actuate.Method.createDelegate(this._onDragStart,this,[this.thumb[A]],true),_onDrag:actuate.Method.createDelegate(this._onDrag,this,[this.thumb[A]],true),_onEnd:actuate.Method.createDelegate(this._onDragEnd,this,[this.thumb[A]],true),tolerance:3,autoStart:300});this.thumb[A].addClassOnOver("actuate-slider-thumb-over");B._initEl(this.thumb[A]);this.tracker.push(B);this.registerEventHandler("beforedestroy",actuate.Method.bind(B.destroy,B));if(this.valueBox&&this.valueBox[A]){this.registerEventHandler("beforedestroy",actuate.Method.bind(this.valueBox[A].destroy,this.valueBox[A]));}}}this.focusEl.swallowEvent("click",true);},_onMouseDown:function(C){if(this.disabled){return ;}if(this.clickToChange){for(var B=0;B<this.thumbCount;B++){if(C.target==this.thumb[B].dom){this.focus();return ;}}}var A=this.innerEl.translatePoints(C.getXY());this._onClickChange(A);this.focus();},_onClickChange:function(D){if(D.top>this.clickRange[0]&&D.top<this.clickRange[1]){var B=Math.round(this.reverseValue(D.left));var A=[];for(var C=0;C<this.thumbCount;C++){A.push(B);}this.setValue(A,undefined,true);}},setValue:function(C,B,A,E){var F=C;if(!actuate.util.Utility.isArray(F)){F=[C];for(var D=1;D<this.thumbCount;D++){F.push(undefined);}}actuate.widget.custom.MultiSlider.superclass.setValue.call(this,F,B,A,E);},_normalizeValue:function(A){if(actuate.util.Utility.isArray(A)){var C=[];for(var B=0;B<this.thumbCount;B++){C.push(actuate.widget.custom.MultiSlider.superclass._normalizeValue.call(this,A[B]));}return C;}return A;},_onDrag:function(C,A){var D=this.innerEl.translatePoints(this.tracker[A.index].getXY());var B=this.value;if(B&&B[A.index]!==undefined){B[A.index]=Math.round(this.reverseValue(D.left-this.halfThumb));this.setValue(B,false,false);}this.fireEvent("drag",this,C);},_disableThumb:function(){for(var B=0;B<this.thumbCount;B++){this.thumb[B].addClass(this.disabledClass);if(actuate.util.Utility.isIE){var C=this.thumb[B].getXY();this.thumb[B].hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=[];}if(!this.thumbHolder[B]){var A=this.endEl.createChild({cls:"actuate-slider-thumb "+this.disabledClass});this.thumbHolder.push(A);A.show().setXY(C);}}}},_enableThumb:function(){for(var A=0;A<this.thumbCount;A++){this.thumb[A].removeClass(this.disabledClass);if(actuate.util.Utility.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder&&this.thumbHolder[A]){this.thumbHolder[A].hide();}this.thumb[A].show();this.syncThumb();}}},syncThumb:function(){if(this.rendered){for(var B=0;B<this.thumbCount;B++){var A=this.value;if(actuate.util.Utility.isArray(A)){A=A[B];}this._moveThumb(this.thumb[B],this._translateValue(A));}}},_showValueTip:function(A){if(A&&this.valueBox){var B=A.index;this._updateValueBox(this.valueBox[B],this.value[B],A.getXY());}}});actuate.widget.Component.prototype.registerType("multislider",actuate.widget.custom.MultiSlider);actuate.widget.custom.MultiSlider.Vertical=actuate.Class.create();actuate.widget.custom.MultiSlider.Vertical.prototype=actuate.Class.extend(new actuate.widget.form.Slider.Vertical(),{_onDrag:function(D,B){var E=this.innerEl.translatePoints(this.tracker[B.index].getXY());var A=this.innerEl.getHeight()-E.top+15;var C=this.value;if(C&&C[B.index]!==undefined){C[B.index]=this.minValue+Math.round(A/this._getRatio());this.setValue(C,false,false);}this.fireEvent("drag",this,D);}});actuate.util.Package.define("actuate.widget.form");actuate.widget.custom.ImageRadio=actuate.Class.create();actuate.widget.custom.ImageRadio.superclass=actuate.widget.form.Radio.prototype;actuate.widget.custom.ImageRadio.prototype=actuate.Class.extend(new actuate.widget.form.Radio(),{initialize:function(A){actuate.widget.custom.ImageRadio.superclass.initialize.call(this,A);this.checkedCls=this.checkedCls+" actuate-image-radio-checked";},_initEvents:function(){actuate.widget.custom.ImageRadio.superclass._initEvents.call(this);var A=this._ele;A.addClassOnOver("actuate-image-radio-over",function(B){if(A){A.addClass(B);}},function(B){if(A){A.removeClass(B);}});},_onRender:function(B,A){actuate.widget.custom.ImageRadio.superclass._onRender.call(this,B,A);if(this.iconCls){this._ele.addClass("actuate-image-radio-icon "+this.iconCls);if(this.labelEl){this.labelEl.addClass("actuate-image-radio-position");}if(this.imageEl){this.imageEl.addClass("actuate-hidden");}}},_onResize:function(F,C,B,E){actuate.widget.custom.ImageRadio.superclass._onResize.call(this,F,C,B,E);if(typeof F=="number"&&this.iconCls&&this.labelEl){var A=this.labelEl.getWidth();var D=(F-A)/2;this.labelEl.getDom(this.labelEl).style.left=D+"px";}}});actuate.widget.Component.prototype.registerType("imageRadio",actuate.widget.custom.ImageRadio);actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.FloatScroller=actuate.Class.createClass({_style:{width:6,minLength:20,opacity:0.8,onscroll:new Function(),ondrag:new Function(),color:"#555",mouseAlign:1},_container:null,initialize:function(A){this._container=document.getElementById(A);this.setup();},setup:function(){var A=document.documentElement||document.getElementsByTagName("html")[0];this.supportsTouches=("createTouch" in document)||("ontouchstart" in window);this.supportsTransition=("WebkitTransition" in A.style)||("MsTransition" in A.style)||("MozTransition" in A.style)||("OTransition" in A.style)||("transition" in A.style);this.startEvent=this.supportsTouches?"touchstart":"mousedown";this.moveEvent=this.supportsTouches?"touchmove":"mousemove";this.endEvent=this.supportsTouches?"touchend":"mouseup";this.overEvent=this.supportsTouches?"touchstart":"mouseover";this.outEvent=this.supportsTouches?"touchend":"mouseout";this.property=[["left","right","width","clientWidth","scrollWidth","horizontalBar","horizontalScrollBar"],["top","bottom","height","clientHeight","scrollHeight","verticalBar","verticalScrollBar"]];this.timer=[null,null];this._resize();this._addListener(document,this.moveEvent,actuate.Method.bind(this.move,this),false);this._addListener(document,this.endEvent,actuate.Method.bind(this.end,this),false);this._addListener(this._container,"touchcancel",actuate.Method.bind(this.end,this),false);this._addListener(this._container,this.overEvent,actuate.Method.bind(this.toggleShow,this),false);this._addListener(this._container,this.outEvent,actuate.Method.bind(this.toggleShow,this),false);this._addListener(this._container,"mousewheel",actuate.Method.bind(this.mouseScroll,this),false);this._addListener(this._container,"DOMMouseScroll",actuate.Method.bind(this.mouseScroll,this),false);},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(actuate.Method.bind(this._resize,this),100);},_resize:function(){this.clear();var B=parseInt(this._getCSS(this._container,"padding-left"))+parseInt(this._getCSS(this._container,"padding-right")),A=parseInt(this._getCSS(this._container,"padding-top"))+parseInt(this._getCSS(this._container,"padding-bottom")),D=this._container.offsetWidth-(parseInt(this._getCSS(this._container,"border-left-width"))||0)-(parseInt(this._getCSS(this._container,"border-right-width"))||0)-this._container.clientWidth,F=this._container.offsetHeight-(parseInt(this._getCSS(this._container,"border-top-width"))||0)-(parseInt(this._getCSS(this._container,"border-bottom-width"))||0)-this._container.clientHeight;this.clientWidth=this._container.clientWidth-B+D;this.clientHeight=this._container.clientHeight-A+F;this.scrollWidth=this._container.scrollWidth-B;this.scrollHeight=this._container.scrollHeight-A;this.element=this._createNode("div",{"class":"touchscrollelement","style":";overflow:hidden;width:"+this.scrollWidth+"px;padding:"+parseInt(F/2)+"px "+parseInt(D/2)+"px;position:absolute;top:-"+this._container.scrollTop+"px;left:-"+this._container.scrollLeft+"px;"});this.wrapper=this._createNode("div",{"class":"touchscrollwrapper","style":";overflow:hidden;position:relative;width:100%;height:"+this.clientHeight+"px;"});var C=";opacity:0;filter:alpha(opacity=0);position:absolute;overflow:hidden;-webkit-transition:opacity 400ms ease-out;-moz-transition:opacity 400ms ease-out;-o-transition:opacity 400ms ease-out;-ms-transition:opacity 400ms ease-out;transition:opacity 400ms ease-out;",E=";position:absolute;width:100%;height:100%;top:0;left:0;background-color:"+this._style.color+";-webkit-border-radius:"+this._style.width+"px;-moz-border-radius:"+this._style.width+"px;border-radius:"+this._style.width+"px;";this.horizontalBar=this._createNode("div",{"class":"touchscrollhorizontal","style":C});this.verticalBar=this._createNode("div",{"class":"touchscrollvertical","style":C});this.horizontalScrollBar=this._createNode("div",{"class":"touchscrollbar horizontal","style":E});this.verticalScrollBar=this._createNode("div",{"class":"touchscrollbar vertical","style":E});this.horizontalBar.appendChild(this.horizontalScrollBar);this.verticalBar.appendChild(this.verticalScrollBar);this.wrapper.appendChild(this.horizontalBar);this.wrapper.appendChild(this.verticalBar);this._setCSS(this.horizontalBar,{"display":this.scrollWidth>this.clientWidth?"block":"none","width":this.clientWidth+"px","left":0,"bottom":0,"height":this._style.width+"px"});this._setCSS(this.verticalBar,{"display":this.scrollHeight>this.clientHeight?"block":"none","height":this.clientHeight+"px","right":0,"top":0,"width":this._style.width+"px"});while(this._container.childNodes&&this._container.childNodes.length>0){this.element.appendChild(this._container.firstChild);}this.wrapper.appendChild(this.element);this._container.appendChild(this.wrapper);this.scrollHeight=Math.max(this.scrollHeight,this.element.clientHeight);this.scrollWidth=Math.max(this.scrollWidth,this.element.clientWidth);this.refresh(0);this.refresh(1);this._addListener(this.wrapper,this.startEvent,actuate.Method.bind(this.start,this),false);},_createNode:function(B,A){var D=document.createElement(B)||null;A=Object.prototype.toString.call(A)=="[object Object]"?A:{};if(D){for(var C in A){if(C=="style"){D.style.cssText+=A[C];}else{D.setAttribute(C,A[C]);}}}return D;},_getCSS:function(B,D){D=this._styleFilter(D);var C=B.style[D];if(!C){var A=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(B,null)||B.currentStyle||B.style;if(typeof D=="string"){C=A[D];}else{C=D.get(B,A);}}return C=="auto"?"":C;},_setCSS:function(D,C){var A;for(var B in C){A=this._styleFilter(B);if(typeof A=="string"){D.style[A]=C[B];}else{A.set(D,C[B]);}}},_styleFilter:function(C){switch(C){case"float":return("cssFloat" in document.body.style)?"cssFloat":"styleFloat";break;case"opacity":return("opacity" in document.body.style)?"opacity":{get:function(E,D){var F=D.filter;return F&&F.indexOf("opacity")>=0&&parseFloat(F.match(/opacity=([^)]*)/i)[1])/100+""||"1";},set:function(D,E){D.style.filter="alpha(opacity="+E*100+")";D.style.zoom=1;}};break;default:var A=C.split("-");for(var B=1;B<A.length;B++){A[B]=A[B].substring(0,1).toUpperCase()+A[B].substring(1);}C=A.join("");return C;break;}},_addListener:function(B,D,C,A){if(B.addEventListener){B.addEventListener(D,C,A);return true;}else{if(B.attachEvent){B.attachEvent("on"+D,C);return true;}}return false;},_getPoint:function(D){D=D||window.event;var B=y=0,C=(this.supportsTouches&&D.touches.length)?D.touches[0]:D,E=document.documentElement,A=document.body;if(window.pageXOffset){B=window.pageXOffset;y=window.pageYOffset;}else{B=(E&&E.scrollLeft||A&&A.scrollLeft||0)-(E&&E.clientLeft||A&&A.clientLeft||0);y=(E&&E.scrollTop||A&&A.scrollTop||0)-(E&&E.clientTop||A&&A.clientTop||0);}B+=C.clientX;y+=C.clientY;return{x:B,y:y};},_preventDefault:function(A){if(window.event){window.event.returnValue=false;}else{A.preventDefault();}},contains:function(A,B){return A.contains?A!=B&&A.contains(B):!!(A.compareDocumentPosition(B)&16);},deleteAll:function(){for(var A=0;A<arguments.length;A++){delete this[arguments[A]];}},fixedMouse:function(D,C){var B;var A=D.type.toLowerCase();if(A=="mouseover"){B=D.relatedTarget||D.fromElement;}else{if(A=="mouseout"){B=D.relatedTarget||D.toElement;}else{return true;}}return !B||B.prefix!="xul"&&!this.contains(C,B)&&B!==C;},clear:function(){if(this.element){this._setCSS(this._container,{"visibility":"hidden"});while(this.element.childNodes.length){this._container.appendChild(this.element.firstChild);}this._container.removeChild(this.wrapper);this._container.scrollLeft=-this.ratio0*(this._container.scrollWidth-this._container.clientWidth);this._container.scrollTop=-this.ratio1*(this._container.scrollHeight-this._container.clientHeight);this.wrapper=this.element=this.horizontalBar=this.verticalBar=this.horizontalScrollBar=this.verticalScrollBar=null;this._setCSS(this._container,{"visibility":"visible"});}},refresh:function(J,L){J=!!parseInt(J)*1;var K,C,D,H,E,I,A,F,B,G;F=this[this.property[J][6]];K=this[this.property[J][4]];C=this[this.property[J][3]];D=Math.max(this._style.width,this._style.minLength);B=parseInt(this._getCSS(this.element,this.property[J][0]));G=K==C?0:parseInt(B/(K-C)*1000)/1000;H=Math.max(parseInt(C*C/K),D);if(B>0){E=Math.max(this._style.width,H-B/C*H);I=0;A="auto";}else{if(B<=C-K){E=Math.max(this._style.width,(K+B)/C*H);I="auto";A=0;}else{E=H;I=-B/((K-C)||1)*(C-E)+"px";A="auto";}}F.style[this.property[J][2]]=E+"px";F.style[this.property[J][0]]=I;F.style[this.property[J][1]]=A;this["ratio"+J]=G;if(L){this._setCSS(this[this.property[J][5]],{"opacity":this._style.opacity});this._setCSS(this[this.property[1-J][5]],{"opacity":0});}this._style.onscroll.call(this,null);},toggleShow:function(C){C=C||window.event;if(this.wrapper&&(this.fixedMouse(C,this._container)||this.supportsTouches)){var B=C.type,A=0;switch(B){case this.overEvent:A=this._style.opacity;this.mouseEnter=true;break;case this.outEvent:this.mouseEnter=false;break;default:return false;}if(!this.during){this._setCSS(this.horizontalBar,{"opacity":A});this._setCSS(this.verticalBar,{"opacity":A});}}},_scroll:function(H,A){var E,C=40,G,D,B,F,I;B=0;E=parseInt(this._getCSS(this.element,this.property[H][0]));D=this[this.property[H][4]]-this[this.property[H][3]];G=E+A;if(G>0){if(G>C){A=C-E;B=-C;}else{B=-G;}}else{if(G<-D){if(G<-D-C){A=-D-C-E;B=C;}else{B=-D-G;}}}F=400*Math.abs(A)/(Math.abs(A)+Math.abs(B));I=function(){this.slide(H,B,400-F,"ease-in-out");};this.slide(H,A,F,null,I);},scroll:function(B,A){for(var C=0;C<arguments.length;C++){this._scroll(C,arguments[C]);}},scrollTo:function(A,B){this._getCSS(this.element,{"left":-A+"px","top":-B+"px"});this.refresh(0);this.refresh(1);},slide:function(I,A,K,E,L){var H=this,N=L||new Function(),J=parseInt(this._getCSS(this.element,this.property[I][0])),C=A,G=0,F=K||400,M=E||"ease-out";function B(P,O,T,S,R){var Q;switch(R){case"ease-in-out":if((P/=S/2)<1){Q=T/2*P*P*P+O;}else{Q=T/2*((P-=2)*P*P+2)+O;}break;default:Q=-T*((P=P/S-1)*P*P*P-1)+O;break;}return Q;}function D(){if(A&&G<F){G+=10;H.element.style[H.property[I][0]]=B(G,J,C,F,M)+"px";H.timer[I]=setTimeout(D,10);H.refresh(I,true);}else{H.during=false;H.element.style[H.property[I][0]]=J+A+"px";if(!H.mouseEnter&&!L){H._setCSS(H.horizontalBar,{"opacity":0});H._setCSS(H.verticalBar,{"opacity":0});}H.refresh(I);N.call(H,null);}H.deleteAll("timer"+I);}this.during=true;clearTimeout(this.timer[I]);D();},start:function(B){clearTimeout(this.timer[0]);clearTimeout(this.timer[1]);if(!this.supportsTouches){this._preventDefault(B);}this.element.onclick=null;var A=B&&B.target||window.event.srcElement;if(A.nodeType==3){A=A.parentNode;}this.target=A==this.wrapper||A==this.element||this.contains(this.element,A)?0:1;this.startPos=this._getPoint(B);this.elementRect=[parseInt(this._getCSS(this.element,"left")),parseInt(this._getCSS(this.element,"top"))];this.disc=[[new Date()],[this.startPos]];},move:function(E){if(!this.disc||E.touches&&E.touches.length>1||E.scale&&E.scale!==1){return ;}this.endPos=this._getPoint(E);var C=[this.endPos.x-this.startPos.x,this.endPos.y-this.startPos.y],F,B,D=1;if(typeof this.flag=="undefined"){if(this.scrollWidth>this.clientWidth&&Math.abs(C[0])>=Math.abs(C[1])){this.flag=0;}else{if(this.scrollHeight>this.clientHeight&&Math.abs(C[1])>=Math.abs(C[0])){this.flag=1;}else{this.flag=false;}}}if(this.flag===false){return ;}this._preventDefault(E);this.during=true;B=this[this.property[this.flag][4]]-this[this.property[this.flag][3]];if(this.target){var A=parseInt(this._getCSS(this[this.property[this.flag][6]],this.property[this.flag][2]));D=-B/(this[this.property[this.flag][3]]-A);}F=this.elementRect[this.flag]+C[this.flag]*D;if(F>0){F=F/(F/this[this.property[this.flag][3]]+1);}else{if(F<-B){F=F+B;F=F/(Math.abs(F)/this[this.property[this.flag][3]]+1)-B;}}this.element.style[this.property[this.flag][0]]=F+"px";this.refresh(this.flag,true);this.disc[0].push(new Date());this.disc[1].push(this.endPos);},end:function(E){if(!this.disc){return ;}if(typeof this.flag==="number"){var H,G,B,C,F,D,A;H=0;A=this[this.property[this.flag][4]]-this[this.property[this.flag][3]];G=parseInt(this._getCSS(this.element,this.property[this.flag][0]));if(G>0){H=-G;}else{if(G<-A){H=-A-G;}else{if(!this.target){B=new Date();while(this.disc[0].length&&B-this.disc[0][0]>200){this.disc[0].shift();this.disc[1].shift();}if(this.disc[0].length){D=B-this.disc[0][0];C=[this.endPos.x-this.disc[1][0].x,this.endPos.y-this.disc[1][0].y];F=C[this.flag];if(Math.abs(F)>20){H=(2-D/200)*F;}}}}}if(this._style.ondrag.call(this,this.flag,H)!==false){this._scroll(this.flag,H);}this.element.onclick=new Function("return false;");}this.deleteAll("startPos","endPos","disc","flag","target","elementRect");},mouseScroll:function(D){this._preventDefault(D);D=D||window.event;var C=D.wheelDelta||D.detail&&D.detail*-1||0,B=120,E=this._style.mouseAlign,A;if(this.wrapper&&C){A=C/Math.abs(C);this._scroll(E,A*B);}}});actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.Spinner=actuate.Class.create();actuate.widget.custom.Spinner.superclass=actuate.widget.form.TriggerField.prototype;actuate.widget.custom.Spinner.prototype=actuate.Class.extend(new actuate.widget.form.TriggerField(),{triggerClass:"actuate-custom-spinner-trigger",splitterClass:"actuate-custom-spinner-splitter",alternateKey:actuate.widget.EventObject.shiftKey,strategy:undefined,_onRender:function(B,A){actuate.widget.custom.Spinner.superclass._onRender.call(this,B,A);this._splitter=this._wrap.createChild({tag:"div",cls:this.splitterClass,style:"width:13px; height:2px;"});this._splitter.show().setRight((actuate.util.Utility.isIE)?1:2);this._splitter.show().setTop(10);this._proxy=this._trigger.createProxy("",this._splitter,true);this._proxy.addClass("actuate-widget-spinner-proxy");this._proxy.setStyle("left","0px");this._proxy.setSize(14,1);this._proxy.hide();this.dd=new actuate.widget.dd.DDProxy(this._splitter.dom.id,"SpinnerDrag",{dragElId:this._proxy.id});this._initSpinner();},_initSpinner:function(){this.keyNav=new actuate.widget.KeyNav(this._ele,{"up":function(A){this.onSpinUp();},"down":function(A){this.onSpinDown();},"pageUp":function(A){this.onSpinUpAlternate();},"pageDown":function(A){this.onSpinDownAlternate();},scope:this});this._trigger.un("click",this._onTriggerClick);this._trigger._addListener("mouseover",this.onMouseOver,this,{preventDefault:true});this._trigger._addListener("mouseout",this.onMouseOut,this,{preventDefault:true});this._trigger._addListener("mousemove",this.onMouseMove,this,{preventDefault:true});this._trigger._addListener("mousedown",this.onMouseDown,this,{preventDefault:true});this._trigger._addListener("mouseup",this.onMouseUp,this,{preventDefault:true});this._wrap.on("mousewheel",this.handleMouseWheel,this);this.dd.setXConstraint(0,0,10);this.dd.setYConstraint(1500,1500,10);this.dd.endDrag=actuate.Method.createDelegate(this.endDrag,this),this.dd.startDrag=actuate.Method.createDelegate(this.startDrag,this);this.dd._onDrag=actuate.Method.createDelegate(this._onDrag,this);if(this.strategy==undefined){this.strategy=new actuate.widget.custom.Spinner.NumberStrategy();}},onMouseOver:function(){if(this.disabled){return ;}var A=this.getMiddle();this.__tmphcls=(actuate.widget.EventObject.getPageY()<A)?"actuate-custom-spinner-overup":"actuate-custom-spinner-overdown";this._trigger.addClass(this.__tmphcls);},onMouseOut:function(){this._trigger.removeClass(this.__tmphcls);},onMouseMove:function(){if(this.disabled){return ;}var A=this.getMiddle();if(((actuate.widget.EventObject.getPageY()>A)&&this.__tmphcls=="actuate-custom-spinner-overup")||((actuate.widget.EventObject.getPageY()<A)&&this.__tmphcls=="actuate-custom-spinner-overdown")){}},onMouseDown:function(){if(this.disabled){return ;}var A=this.getMiddle();this.__tmpccls=(actuate.widget.EventObject.getPageY()<A)?"actuate-custom-spinner-clickup":"actuate-custom-spinner-clickdown";this._trigger.addClass(this.__tmpccls);},onMouseUp:function(){this._trigger.removeClass(this.__tmpccls);},_onTriggerClick:function(){if(this.disabled){return ;}var B=this.getMiddle();var A=(actuate.widget.EventObject.getPageY()<B)?"Up":"Down";this["onSpin"+A]();},getMiddle:function(){var B=this._trigger.getTop();var C=this._trigger.getHeight();var A=B+(C/2);return A;},handleMouseWheel:function(A){var B=A.getWheelDelta();if(B>0){this.onSpinUp();A.stopEvent();}else{if(B<0){this.onSpinDown();A.stopEvent();}}},startDrag:function(){this._proxy.show();this._previousY=actuate.widget.Element.fly(this.dd.getDragEl()).getTop();},endDrag:function(){this._proxy.hide();},_onDrag:function(){if(this.disabled){return ;}var B=actuate.widget.Element.fly(this.dd.getDragEl()).getTop();var A="";if(this._previousY>B){A="Up";}if(this._previousY<B){A="Down";}if(A!=""){this["onSpin"+A]();}this._previousY=B;},onSpinUp:function(){if(actuate.widget.EventObject.shiftKey==true){this.onSpinUpAlternate();return ;}else{this.strategy.onSpinUp(this);}this.fireEvent("spinup",this);},onSpinDown:function(){if(actuate.widget.EventObject.shiftKey==true){this.onSpinDownAlternate();return ;}else{this.strategy.onSpinDown(this);}this.fireEvent("spindown",this);},onSpinUpAlternate:function(){this.strategy.onSpinUpAlternate(this);this.fireEvent("spinup",this);},onSpinDownAlternate:function(){this.strategy.onSpinDownAlternate(this);this.fireEvent("spindown",this);}});actuate.widget.Component.prototype.registerType("spinner",actuate.widget.custom.Spinner);actuate.util.Package.define("actuate.widget.custom");actuate.widget.custom.Spinner.Strategy=actuate.Class.create();actuate.widget.custom.Spinner.Strategy.superclass=actuate.widget.Observable.prototype;actuate.widget.custom.Spinner.Strategy.prototype=actuate.Class.extend(new actuate.widget.Observable(),{defaultValue:0,minValue:undefined,maxValue:undefined,incrementValue:1,alternateIncrementValue:5,initialize:function(A){actuate.widget.custom.Spinner.Strategy.superclass.initialize.call(this,A);},onSpinUp:function(A){this.spin(A,false,false);},onSpinDown:function(A){this.spin(A,true,false);},onSpinUpAlternate:function(A){this.spin(A,false,true);},onSpinDownAlternate:function(A){this.spin(A,true,true);},spin:function(A,C,B){},fixBoundries:function(A){return A;}});actuate.widget.custom.Spinner.NumberStrategy=actuate.Class.create();actuate.widget.custom.Spinner.NumberStrategy.superclass=actuate.widget.custom.Spinner.Strategy.prototype;actuate.widget.custom.Spinner.NumberStrategy.prototype=actuate.Class.extend(new actuate.widget.custom.Spinner.Strategy(),{allowDecimals:true,decimalPrecision:2,initialize:function(A){actuate.widget.custom.Spinner.NumberStrategy.superclass.initialize.call(this,A);},spin:function(B,E,C){actuate.widget.custom.Spinner.NumberStrategy.superclass.spin.call(this,B,E,C);var A=parseFloat(B.getValue());var D=(C==true)?this.alternateIncrementValue:this.incrementValue;(E==true)?A-=D:A+=D;A=(isNaN(A))?this.defaultValue:A;A=this.fixBoundries(A);B.setRawValue(A);},fixBoundries:function(B){var A=B;if(this.minValue!=undefined&&A<this.minValue){A=this.minValue;}if(this.maxValue!=undefined&&A>this.maxValue){A=this.maxValue;}return this.fixPrecision(A);},fixPrecision:function(B){var A=isNaN(B);if(!this.allowDecimals||this.decimalPrecision==-1||A||!B){return A?"":B;}return parseFloat(parseFloat(B).toFixed(this.decimalPrecision));}});actuate.widget.custom.Spinner.DateStrategy=actuate.Class.create();actuate.widget.custom.Spinner.DateStrategy.superclass=actuate.widget.custom.Spinner.Strategy.prototype;actuate.widget.custom.Spinner.DateStrategy.prototype=actuate.Class.extend(new actuate.widget.custom.Spinner.Strategy(),{defaultValue:new Date(),format:"Y-m-d",incrementValue:1,incrementConstant:Date.DAY,alternateIncrementValue:1,alternateIncrementConstant:Date.MONTH,initialize:function(A){actuate.widget.custom.Spinner.DateStrategy.superclass.initialize.call(this,A);},spin:function(D,G,E){actuate.widget.custom.Spinner.DateStrategy.superclass.spin.call(this);var A=D.getRawValue();A=Date.parseDate(A,this.format);var C=(G==true)?-1:1;var F=(E==true)?this.alternateIncrementValue:this.incrementValue;var B=(E==true)?this.alternateIncrementConstant:this.incrementConstant;if(typeof this.defaultValue=="string"){this.defaultValue=Date.parseDate(this.defaultValue,this.format);}A=(A)?A.add(B,C*F):this.defaultValue;A=this.fixBoundries(A);D.setRawValue(A.format(this.format));},fixBoundries:function(B){var D=B;var C=(typeof this.minValue=="string")?Date.parseDate(this.minValue,this.format):this.minValue;var A=(typeof this.maxValue=="string")?Date.parseDate(this.maxValue,this.format):this.maxValue;if(this.minValue!=undefined&&D<C){D=C;}if(this.maxValue!=undefined&&D>A){D=A;}return D;}});actuate.widget.custom.Spinner.TimeStrategy=actuate.Class.create();actuate.widget.custom.Spinner.TimeStrategy.superclass=actuate.widget.custom.Spinner.DateStrategy.prototype;actuate.widget.custom.Spinner.TimeStrategy.prototype=actuate.Class.extend(new actuate.widget.custom.Spinner.DateStrategy(),{format:"H:i",incrementValue:1,incrementConstant:Date.MINUTE,alternateIncrementValue:1,alternateIncrementConstant:Date.HOUR,initialize:function(A){actuate.widget.custom.Spinner.TimeStrategy.superclass.initialize.call(this,A);}});actuate.util.Package.define("actuate.widget.custom.flash");actuate.widget.custom.flash.FlashWrapper=actuate.Class.create();actuate.widget.custom.flash.FlashWrapper.superclass=actuate.widget.Observable.prototype;actuate.widget.custom.flash.FlashWrapper.prototype=actuate.Class.extend(new actuate.widget.Observable(),{_manager:null,initialize:function(A){actuate.widget.custom.flash.FlashWrapper.superclass.initialize.call(this,A);this._manager=actuate.widget.custom.flash.FlashWrapperManager;this._manager.register(this);this._ele=actuate.widget.Element.get(this.flash);this._ele.addClass("actuate-flash-wrapper");this.registerEventHandler("activate",actuate.Method.createDelegate(this._onActivate,this));window.setTimeout(actuate.Method.createDelegate(this._setActivated,this),1000);},destroy:function(){if(this.fireEvent("beforedestroy",this)!==false){this._manager.unregister(this);this.fireEvent("destroy",this);}},getSWFObject:function(){return this.flash;},_onActivate:function(flashID){if(actuate.util.browser.__isIE()){window.__flash__addCallback=(function(){return function(instance,name){if(instance&&name){instance[name]=function(){return eval(instance.CallFunction('<invoke name="'+name+'" returntype="javascript">'+__flash__argumentsToXML(arguments,0)+"</invoke>"));};}};})();window.__flash__removeCallback=(function(){return function(instance,name){};})();}var menuItems=this.customMenuItems;if(menuItems){this.registerCustomMenuItems(menuItems);this.hideCustomMenuItems();}window.setTimeout(actuate.Method.createDelegate(this._setActivated,this),800);},_setActivated:function(){this.activated=true;},registerCustomMenuItems:function(A){this._manager.registerCustomMenuItems(this,A);},enableMenuItem:function(A){this._manager.enableMenuItem(this,A);},disableMenuItem:function(A){this._manager.disableMenuItem(this,A);},hideCustomMenuItems:function(){this._manager.hideCustomMenuItems(this);},setMenuItemText:function(B,A){this._manager.setMenuItemText(this,B,A);},toString:function(){return"[FlashWrapper:"+(this.id?" "+this.id:"")+"]";}});actuate.util.Package.define("actuate.widget.custom.flash");actuate.widget.custom.flash.FlashWrapperManager=function(){var A=null;return{register:function(B){if(B&&B.id){this._all[B.id]=B;}},unregister:function(B){B=this.get(B)||B;if(B&&B.id){delete B;}},get:function(B){return this._all[B]?this._all[B]:null;},_callFlashMethod:function(D,B,C){D=this.get(D)||D;if(D){var E=D.getSWFObject();if(E&&E[B]){try{if(C&&C.length>0){E[B].apply(E,C);}else{E[B].apply(E);}}catch(G){var I;var H=30;var F=function(){H--;if(H>=0&&E&&E[B]){try{if(C&&C.length>0){E[B].apply(E,C);}else{E[B].apply(E);}}catch(J){return ;}}if(I){clearInterval(I);I=null;}};I=setInterval(F,50);}}}},registerCustomMenuItems:function(B,C){this._callFlashMethod(B,"setCustomMenuItems",[C]);},onActivate:function(C){var B=this.get(C);if(B){B.fireEvent("activate",C);}},onMenuSelect:function(C,D){var B=this.get(C);if(B){B.fireEvent("contextmenu",D);}},onClick:function(){var C=this.get(A);if(C){var B=["click"];for(var D=0;D<arguments.length;D++){var E=arguments[D];if(E&&E.length>0&&E.charAt(E.length-1)=="-"){E=E.substring(0,E.length-1);}B.push(E);}C.fireEvent.apply(C,B);}},onSelect:function(C){if(C){A=C;}var B=this.get(A);if(B){B.fireEvent("select",A);}},onKeyDown:function(C,D){var B=this.get(C);if(B){B.fireEvent("keydown",D);}},enableMenuItem:function(B,C){this._callFlashMethod(B,"enableMenuItem",[C]);},disableMenuItem:function(B,C){this._callFlashMethod(B,"disableMenuItem",[C]);},hideCustomMenuItems:function(B){this._callFlashMethod(B,"hideCustomMenuItems");},setMenuItemText:function(C,D,B){this._callFlashMethod(C,"setMenuItemText",[D,B]);},isPending:function(){for(var C in this._all){var B=this.get(C);if(B&&!B.activated){return true;}}return false;}};}();actuate.widget.custom.flash.FlashWrapperManager._all={};actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorPicker=actuate.Class.extendClass(actuate.widget.Component,{cls:"actuate-cp-colorpicker",resizable:this.resizable||false,HSV:{h:0,s:0,v:0},parentMenu:null,auto:"AUTO",colArray:[["aqua","#70DB93"],["black","#000000"],["blue","#0000FF"],["fuchsia","#FF00FF"],["gray","#808080"],["green","#008000"],["lime","#00FF00"],["maroon","#800000"],["navy","#000080"],["olive","#808000"],["orange","#FFA500"],["purple","#800080"],["red","#FF0000"],["silver","#C0C0C0"],["teal","#008080"],["white","#FFFFFF"],["yellow","#FFFF00"]],baseCode:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","a","b","c","d","e","f"],updateMode:null,initialize:function(){actuate.widget.custom.ColorPickerUX.ColorPicker.superclass.initialize.apply(this,arguments);if(this.handler){this.registerEventHandler("pickerSelect",actuate.Method.bind(this.handler,this));}},_onRender:function(){if(this.__extending){return ;}this.body=this.body||(this.container||(this.renderTo||actuate.widget.DomHelper.append(actuate.widget.Element.getBody(),{},true)));if(!this._ele){this._ele=this.body;if(this.cls){actuate.widget.Element.get(this._ele).addClass(this.cls);}}var A=new actuate.widget.KeyNav(this._ele,{"left":function(B){B.stopPropagation();return true;},"right":function(B){B.stopPropagation();return true;},"up":function(B){B.stopPropagation();return true;},"down":function(B){B.stopPropagation();return true;},"enter":function(B){B.stopPropagation();if(actuate.widget.Element.get(this.cpGetId("iRed")).child(".actuate-form-focus")||actuate.widget.Element.get(this.cpGetId("iGreen")).child(".actuate-form-focus")||actuate.widget.Element.get(this.cpGetId("iBlue")).child(".actuate-form-focus")){this.updateMode="rgb";}else{if(actuate.widget.Element.get(this.cpGetId("iHexa")).child(".actuate-form-focus")){this.updateMode="hexa";}}this.updateColor();this.selectColor();return true;},scope:this});this.renderComponent();},renderComponent:function(){actuate.widget.DomHelper.append(this.body,{"id":this.cpGetId("rgb"),"cls":"actuate-cp-rgbpicker"});actuate.widget.DomHelper.append(this.body,{"id":this.cpGetId("hue"),"cls":"actuate-cp-huepicker"});this.huePicker=actuate.widget.DomHelper.append(this.body,{"cls":"actuate-cp-hueslider"});this.hueDD=new actuate.widget.dd.DD(this.huePicker,"huePicker");this.hueDD.constrainTo(this.cpGetId("hue"),{"top":-7,"right":-3,"bottom":-7,"left":-3});this.hueDD._onDrag=actuate.Method.createDelegate(this.moveHuePicker,this);actuate.widget.Element.get(this.cpGetId("hue")).on("mousedown",actuate.Method.createDelegate(this.clickHUEPicker,this));actuate.widget.Element.get(this.huePicker).moveTo(actuate.widget.Element.get(this.cpGetId("hue")).getLeft()-3,actuate.widget.Element.get(this.cpGetId("hue")).getTop()-7);this.rgbPicker=actuate.widget.DomHelper.append(this.body,{"cls":"actuate-cp-rgbslider"});this.rgbDD=new actuate.widget.dd.DD(this.rgbPicker,"rgbPicker");this.rgbDD.constrainTo(this.cpGetId("rgb"),-7);this.rgbDD._onDrag=actuate.Method.createDelegate(this.moveRGBPicker,this);actuate.widget.Element.get(this.cpGetId("rgb")).on("mousedown",actuate.Method.createDelegate(this.clickRGBPicker,this));actuate.widget.Element.get(this.rgbPicker).moveTo(actuate.widget.Element.get(this.cpGetId("rgb")).getLeft()-7,actuate.widget.Element.get(this.cpGetId("rgb")).getTop()-7);this.formPanel=new actuate.widget.panel.Panel({renderTo:actuate.widget.DomHelper.append(this.body,{"id":this.cpGetId("fCont"),"cls":"actuate-cp-formcontainer"},true),frame:true,labelAlign:"left",labelWidth:10,baseCls:"actuate-widget-panel",items:[{layout:"column",items:[{columnWidth:1,layout:"form",defaultType:"numberfield",defaults:{width:43,value:0,maxLength:3,allowBlank:true,labelSeparator:""},items:[{fieldLabel:"R:",id:this.cpGetId("iRed")},{fieldLabel:"G:",id:this.cpGetId("iGreen")},{fieldLabel:"B:",id:this.cpGetId("iBlue")}]},{columnWidth:0,layout:"form",defaultType:"numberfield",defaults:{width:20,value:0,minValue:0,maxValue:255,allowBlank:false,labelSeparator:"",border:0},items:[{fieldLabel:"H",maxValue:360,id:this.cpGetId("iHue"),hidden:true},{fieldLabel:"S",id:this.cpGetId("iSat"),hidden:true},{fieldLabel:"V",id:this.cpGetId("iVal"),hidden:true}]}]},{layout:"form",defaultType:"textfield",labelAlign:"left",defaults:{width:43,value:"000000",minLength:0,maxLength:6,labelSeparator:"",allowBlank:true},id:this.cpGetId("cCont"),items:[{fieldLabel:"#",id:this.cpGetId("iHexa"),value:"000000"}]}]});actuate.widget.Element.get(this.cpGetId("iGreen")).setStyle("padding-left",("10px"));actuate.widget.Element.get(this.cpGetId("iBlue")).setStyle("padding-left",("10px"));actuate.widget.Element.get(this.cpGetId("iRed")).setStyle("padding-left",("10px"));actuate.widget.Element.getDom(this.cpGetId("iRed")).previousSibling.style.width="10px";actuate.widget.Element.getDom(this.cpGetId("iGreen")).previousSibling.style.width="10px";actuate.widget.Element.getDom(this.cpGetId("iBlue")).previousSibling.style.width="10px";actuate.widget.Element.getDom(this.cpGetId("iRed")).previousSibling.style.paddingLeft="3px";actuate.widget.Element.getDom(this.cpGetId("iGreen")).previousSibling.style.paddingLeft="3px";actuate.widget.Element.getDom(this.cpGetId("iBlue")).previousSibling.style.paddingLeft="3px";actuate.widget.Element.get(this.cpGetId("iHexa")).setStyle("padding-left",("10px"));actuate.widget.Element.getDom(this.cpGetId("iHexa")).previousSibling.style.width="10px";actuate.widget.Element.getDom(this.cpGetId("iHexa")).previousSibling.style.paddingLeft="3px";actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).on("change",actuate.Method.createDelegate(this.updateFromIRGB,this));actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).on("change",actuate.Method.createDelegate(this.updateFromIRGB,this));actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).on("change",actuate.Method.createDelegate(this.updateFromIRGB,this));actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).on("change",actuate.Method.createDelegate(this.updateFromIHexa,this));actuate.widget.DomHelper.insertFirst(document.getElementById(this.cpGetId("cCont")).parentNode,{"cls":"actuate-cp-preview","id":this.cpGetId("preview")},true);actuate.widget.DomHelper.append(this.cpGetId("cCont"),{"id":this.cpGetId("cColor"),"cls":"actuate-cp-colorbox"},true);var A=new actuate.widget.button.Button({text:actuate.util.Utility.getLocalizedString("ColorField.pickColor"),minWidth:25});A.render(this.cpGetId("cColor"));actuate.widget.Element.get(this.cpGetId("cColor")).on("click",actuate.Method.createDelegate(this.selectColor,this));actuate.widget.DomHelper.append(this.body,{"tag":"br","cls":"actuate-cp-clearfloat"});},cpGetId:function(A){return this._getId()+"__"+(A||"cp");},updateRGBPosition:function(A,B){this.updateMode="click";A=A<0?0:A;A=A>181?181:A;B=B<0?0:B;B=B>181?181:B;this.HSV.s=this.getSaturation(A);this.HSV.v=this.getValue(B);actuate.widget.Element.get(this.rgbPicker).moveTo(actuate.widget.Element.get(this.cpGetId("rgb")).getLeft()+A-7,actuate.widget.Element.get(this.cpGetId("rgb")).getTop()+B-7);this.updateColor();},updateHUEPosition:function(A){this.updateMode="click";A=A<1?1:A;A=A>181?181:A;this.HSV.h=Math.round(360/181*(181-A));actuate.widget.Element.get(this.huePicker).moveTo(actuate.widget.Element.get(this.huePicker).getLeft(),actuate.widget.Element.get(this.cpGetId("hue")).getTop()+A-7);this.updateRGBPicker(this.HSV.h);this.updateColor();},clickRGBPicker:function(B,A){this.updateRGBPosition(B.xy[0]-actuate.widget.Element.get(this.cpGetId("rgb")).getLeft(),B.xy[1]-actuate.widget.Element.get(this.cpGetId("rgb")).getTop());},clickHUEPicker:function(B,A){this.updateHUEPosition(B.xy[1]-actuate.widget.Element.get(this.cpGetId("hue")).getTop());},moveRGBPicker:function(A){this.rgbDD.constrainTo(this.cpGetId("rgb"),-7);this.updateRGBPosition(actuate.widget.Element.get(this.rgbPicker).getLeft()-actuate.widget.Element.get(this.cpGetId("rgb")).getLeft()+7,actuate.widget.Element.get(this.rgbPicker).getTop()-actuate.widget.Element.get(this.cpGetId("rgb")).getTop()+7);},moveHuePicker:function(A){this.hueDD.constrainTo(this.cpGetId("hue"),{"top":-7,"right":-3,"bottom":-7,"left":-3});this.updateHUEPosition(actuate.widget.Element.get(this.huePicker).getTop()-actuate.widget.Element.get(this.cpGetId("hue")).getTop()+7);},updateRGBPicker:function(A){this.updateMode="click";actuate.widget.Element.get(this.cpGetId("rgb")).setStyle({"background-color":"#"+this.rgbToHex(this.hsvToRgb(A,1,1))});this.updateColor();},updateColor:function(D){if(this.updateMode=="hexa"){var G=actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).getValue();if(G.length<6){var E=6-G.length;for(var C=0;C<E;C++){var F=Math.floor(Math.random()*this.baseCode.length);G+=this.baseCode[F];}}if(!/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/.test(G)){var B=G.split("");var J=this.baseCode.join("");for(var C=0;C<6;C++){if(J.indexOf(B[C])<0){var F=Math.floor(Math.random()*this.baseCode.length);B[C]=this.baseCode[F];}}G=B.join("");}actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(G);var I=this.rgbToHsv(this.hexToRgb(G));this.HSV={h:I[0],s:I[1],v:I[2]};var H=this.hexToRgb(actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).getValue());}else{if(this.updateMode=="rgb"){if(!actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).getValue()||actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).getValue()<0){actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).setValue(0);}else{if(actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).getValue()>255){actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).setValue(255);}}if(!actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).getValue()||actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).getValue()<0){actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).setValue(0);}else{if(actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).getValue()>255){actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).setValue(255);}}if(!actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).getValue()||actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).getValue()<0){actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).setValue(0);}else{if(actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).getValue()>255){actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).setValue(255);}}var I=this.rgbToHsv(actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).getValue(),actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).getValue(),actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).getValue());this.HSV={h:I[0],s:I[1],v:I[2]};var H=[actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).getValue()||0,actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).getValue()||0,actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).getValue()||0];}else{var H=this.hsvToRgb(this.HSV.h,this.HSV.s,this.HSV.v);}}var A=this.invert(H);if(this.updateMode!=="hexa"){actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(this.rgbToHex(H));}if(this.updateMode!=="rgb"){actuate.widget.ComponentMgr.get(this.cpGetId("iRed")).setValue(H[0]||0);actuate.widget.ComponentMgr.get(this.cpGetId("iGreen")).setValue(H[1]||0);actuate.widget.ComponentMgr.get(this.cpGetId("iBlue")).setValue(H[2]||0);}if(this.updateMode!=="hsv"){actuate.widget.ComponentMgr.get(this.cpGetId("iHue")).setValue(Math.round(this.HSV.h||0));actuate.widget.ComponentMgr.get(this.cpGetId("iSat")).setValue(Math.round(this.HSV.s*100||0));actuate.widget.ComponentMgr.get(this.cpGetId("iVal")).setValue(Math.round(this.HSV.v*100||0));}actuate.widget.Element.get(this.cpGetId("preview")).setStyle({"background":"#"+this.rgbToHex(H)});actuate.widget.Element.getDom(this.cpGetId("cColor")).title="#"+this.rgbToHex(H);actuate.widget.Element.get(this.huePicker).moveTo(actuate.widget.Element.get(this.huePicker).getLeft(),actuate.widget.Element.get(this.cpGetId("hue")).getTop()+this.getHPos(actuate.widget.ComponentMgr.get(this.cpGetId("iHue")).getValue())-7);actuate.widget.Element.get(this.rgbPicker).moveTo(actuate.widget.Element.get(this.cpGetId("rgb")).getLeft()+this.getSPos(actuate.widget.ComponentMgr.get(this.cpGetId("iSat")).getValue()/100)-7,actuate.widget.Element.get(this.cpGetId("hue")).getTop()+this.getVPos(actuate.widget.ComponentMgr.get(this.cpGetId("iVal")).getValue()/100)-7);actuate.widget.Element.get(this.cpGetId("rgb")).setStyle({"background-color":"#"+this.rgbToHex(this.hsvToRgb(actuate.widget.ComponentMgr.get(this.cpGetId("iHue")).getValue(),1,1))});this.parentMenu.palette.preview.setStyle({"background":"#"+this.rgbToHex(H)});},setColor:function(C,A){if(this.isInColorOptions(C)){C=this.parseColor(C);actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(C);}else{if(C.toUpperCase()==this.auto){if(A){if(actuate.util.Utility.isIE){actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(A.substring(1));}else{if(A.toLowerCase().indexOf("rgb(")!=-1){A=A.slice(A.indexOf("(")+1,A.length-1);var B=A.split(",");actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(this.rgbToHex(B));}}}else{actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue("000000");}}else{if(/^[0-9a-fA-F]{6}$/.test(C)){actuate.widget.ComponentMgr.get(this.cpGetId("iHexa")).setValue(C);}else{return ;}}}this.updateFromIHexa();},updateFromIRGB:function(A,C,B){this.updateMode="rgb";this.updateColor();},updateFromIHSV:function(A,C,B){this.updateMode="hsv";this.HSV={h:actuate.widget.ComponentMgr.get(this.cpGetId("iHue")).getValue(),s:actuate.widget.ComponentMgr.get(this.cpGetId("iSat")).getValue()/100,v:actuate.widget.ComponentMgr.get(this.cpGetId("iVal")).getValue()/100};this.updateColor();},updateFromIHexa:function(A,C,B){this.updateMode="hexa";this.updateColor();},selectColor:function(B,A){this.fireEvent("pickerSelect",this,actuate.widget.Element.get(this.cpGetId("preview")).getColor("backgroundColor","",""));},hsvToRgb:function(E,K,I){if(E instanceof Array){return this.hsvToRgb.call(this,E[0],E[1],E[2]);}var A,F,H,D,G,C,B,J;D=Math.floor((E/60)%6);G=(E/60)-D;C=I*(1-K);B=I*(1-G*K);J=I*(1-(1-G)*K);switch(D){case 0:A=I;F=J;H=C;break;case 1:A=B;F=I;H=C;break;case 2:A=C;F=I;H=J;break;case 3:A=C;F=B;H=I;break;case 4:A=J;F=C;H=I;break;case 5:A=I;F=C;H=B;break;}return[this.realToDec(A),this.realToDec(F),this.realToDec(H)];},rgbToHsv:function(A,D,E){if(A instanceof Array){return this.rgbToHsv.call(this,A[0],A[1],A[2]);}A=A/255;D=D/255;E=E/255;var B,F,H,C,I,G;B=Math.min(Math.min(A,D),E);F=Math.max(Math.max(A,D),E);H=F-B;switch(F){case B:C=0;break;case A:C=60*(D-E)/H;if(D<E){C+=360;}break;case D:C=(60*(E-A)/H)+120;break;case E:C=(60*(A-D)/H)+240;break;}I=(F===0)?0:1-(B/F);return[Math.round(C),I,F];},realToDec:function(A){return Math.min(255,Math.round(A*256));},rgbToHex:function(C,B,A){if(C instanceof Array){return this.rgbToHex.call(this,C[0],C[1],C[2]);}return this.decToHex(C)+this.decToHex(B)+this.decToHex(A);},decToHex:function(B){var A="0123456789ABCDEF";B=parseInt(B,10);B=(!isNaN(B))?B:0;B=(B>255||B<0)?0:B;return A.charAt((B-B%16)/16)+A.charAt(B%16);},getHCharPos:function(B){if(B!=undefined){var A="0123456789ABCDEF";return A.indexOf(B.toUpperCase());}},hexToDec:function(B){var A=B.split("");return((this.getHCharPos(A[0])*16)+this.getHCharPos(A[1]));},hexToRgb:function(A){if(this.isInColorOptions(A)){A=this.parseColor(A);}return[this.hexToDec(A.substr(0,2)),this.hexToDec(A.substr(2,2)),this.hexToDec(A.substr(4,2))];},hexToRgbStr:function(A){if(this.isInColorOptions(A)){A=this.parseColor(A);}return"RGB("+this.hexToDec(A.substr(0,2))+","+this.hexToDec(A.substr(2,2))+","+this.hexToDec(A.substr(4,2))+")";},getHue:function(B){var A=360-Math.round(((181-B)/181)*360);return A===360?0:A;},getHPos:function(A){return 181-A*(181/360);},getSaturation:function(A){return A/181;},getSPos:function(A){return A*181;},getValue:function(A){return(181-A)/181;},getVPos:function(A){return 181-(A*181);},checkSafeNumber:function(A){if(!isNaN(A)){A=Math.min(Math.max(0,A),255);var B,C;for(B=0;B<256;B=B+51){C=B+51;if(A>=B&&A<=C){return(A-B>25)?C:B;}}}return A;},invert:function(C,B,A){if(C instanceof Array){return this.invert.call(this,C[0],C[1],C[2]);}return[255-C,255-B,255-A];},_beforeDestroy:function(){},isInColorOptions:function(A){var D=actuate.widget.FontOptions.fontColors;if(D){for(var B=0;B<D.length;B++){for(var C in D[B]){if(A.toLowerCase()==D[B][C]){return true;}}}}},parseColor:function(B){var A=this.colArray;for(var D=0;D<A.length;D++){for(var C=0;C<A[D].length;C++){if(A[D][0]==B.toLowerCase()){return A[D][1].substr(1);}}}},parseRGB:function(A){if(A.toUpperCase().indexOf("RGB(")!=-1){return A.slice(A.indexOf("(")+1,A.length-1).split(",");}else{if(A.toUpperCase()!=this.auto){return this.hexToRgb(A);}else{return ;}}},isRGB:function(A){return A.toUpperCase().indexOf("RGB(")!=-1;}});actuate.widget.Component.prototype.registerType("colorpicker",actuate.widget.custom.ColorPickerUX.ColorPicker);actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorPickerItem=actuate.Class.extendClass(actuate.widget.menu.Adapter,{initialize:function(A){if(this.__extending){return ;}actuate.widget.menu.ColorItem.superclass.initialize.call(this,new actuate.widget.custom.ColorPickerUX.ColorPicker(A),A);this.picker=this.component;this.relayEvents(this.picker,["pickerSelect"]);this.picker.on("render",function(B){B.getEl().swallowEvent("click");});if(this.selectHandler){this.registerEventHandler("pickerSelect",actuate.Method.bind(this.selectHandler,this));}}});actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorField=actuate.Class.extendClass(actuate.widget.form.TriggerField,{pickerConfig:null,paletteConfig:null,readOnly:true,auto:"AUTO",custom:null,initialize:function(A){this._onPickerSelect_c=actuate.Method.bind(this._onPickerSelect,this);this._onTriggerClick_c=actuate.Method.bind(this._onTriggerClick,this);this._onPaletteSelect_c=actuate.Method.bind(this._onPaletteSelect,this);this._onMenuShow_c=actuate.Method.bind(this._onMenuShow,this);this._onMenuHide_c=actuate.Method.bind(this._onMenuHide,this);this._onPickerShowHide_c=actuate.Method.bind(this._onPickerShowHide,this);actuate.widget.custom.ColorPickerUX.ColorField.superclass.initialize.apply(this,arguments);},_initEvents:function(){actuate.widget.custom.ColorPickerUX.ColorField.superclass._initEvents.call(this);this._ele.on("mousedown",this._onTriggerClick_c);actuate.widget.Element.getDoc().on("mousedown",actuate.Method.bind(this.collapse,this),this);},_initComponent:function(){actuate.widget.custom.ColorPickerUX.ColorField.superclass._initComponent.call(this);this.menu=new actuate.widget.custom.ColorPickerUX.ColorPickerMenu({collapsable:true});},_onDestroy:function(){if(this.menu){this.menu.destroy();}if(this.wrap){this.wrap.remove();}actuate.widget.custom.ColorPickerUX.ColorField.superclass._onDestroy.call(this);},_onTriggerClick:function(){if(this.disabled){return ;}if(this.menu==null){this.menu=new actuate.widget.custom.ColorPickerUX.ColorPickerMenu({collapsable:true});}if(this.menu.hidden){if(this.pickerConfig){actuate.Class.extend(this.menu.picker,this.pickerConfig);}if(this.paletteConfig){actuate.Class.extend(this.menu.palette,this.paletteConfig);}if(this.menu._event_map.hide.length<2){this.menu.on("hide",this._onMenuHide_c);}if(this.menu._event_map.show.length<2){this.menu.on("show",this._onMenuShow_c);}if(!this.menu._event_map.paletteselect||this.menu._event_map.paletteselect.length==0){this.menu.on("paletteSelect",this._onPaletteSelect_c);}if(!this.menu._event_map.pickerselect||this.menu._event_map.pickerselect.length==0){this.menu.on("pickerSelect",this._onPickerSelect_c);}this.menu.picker.hide();this.expand();this.menu.palette.preview.setStyle({"background":"#"+this.menu.picker.rgbToHex(this.menu.picker.parseRGB(this.getValue()))});}else{this.collapse();}},_onMenuSelect:function(B,A){this.setValue(A);this.fireEvent("select",this,A,B);},_onMenuShow:function(){this.menu.palette.csEle.on("click",this._onPickerShowHide_c);this.addHightlight(this.getValue());this._onFocus();},_onMenuHide:function(){actuate.Method.defer(10,this.focus,this);this.menu.palette.csEle.un("click",this._onPickerShowHide_c);if(!this.refreshed){this.menu.un("pickerSelect",this._onPickerSelect_c);this.menu.un("paletteSelect",this._onPaletteSelect_c);this.menu.un("show",this._onMenuShow_c);this.menu.un("hide",this._onMenuHide_c);}this.removeHightlight();},_onPaletteSelect:function(A,B){this.setValue(B);this.fireEvent("paletteSelect",this,B,A);this.fireEvent("select",this,B,A);this.refreshed=false;this.collapse();},_onPickerSelect:function(B,A){this.setValue(A);this.fireEvent("pickerSelect",this,A,B);this.fireEvent("select",this,A,B);this.refreshed=false;this.collapse();},_onPickerShowHide:function(){if(this.menu.picker&&this.menu.picker.hidden){this.menu.picker.show();this.setPickerColor(this.getValue());this.refreshed=true;}else{this.menu.picker.hide();}this.expand();},getHexValue:function(){var A=this.getValue();if(A&&A.toLowerCase()!="auto"){A="#"+this.menu.picker.rgbToHex(this.menu.picker.parseRGB(A));}return A;},setValue:function(A){A=A.substring(0,1).toUpperCase()+A.substring(1);var B=null;if(A.length<=0||A.toUpperCase()==this.auto){A="auto";B=actuate.util.Utility.getLocalizedString("ColorField.Auto");}A=A.replace("#","");if(/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/.test(A)){A=this.menu.picker.hexToRgbStr(A);}this.value=A;if(this.rendered){if(B){this._ele.dom.value=B;}else{this._ele.dom.value=A.toUpperCase();}this.validate();}},getValue:function(A){if(!this.rendered){return this.value;}var A=this._ele.getValue();if(A===this.emptyText||A===undefined){A="";}if(A==actuate.util.Utility.getLocalizedString("ColorField.Auto")){A="auto";}return A;},setPickerColor:function(A){if(A.toUpperCase()!=this.auto){this.menu.picker.setColor(this.menu.picker.rgbToHex(this.menu.picker.parseRGB(A)),this._ele.dom.style.backgroundColor);}else{this.menu.picker.setColor(A,this._ele.dom.style.backgroundColor);}},removeHightlight:function(){var A=this.menu.palette.paletteContainer.child(".actuate-widget-color-palette-sel");if(A){A.removeClass("actuate-widget-color-palette-sel");}},addHightlight:function(B){var A=false;B=this.menu.picker.rgbToHex(this.menu.picker.parseRGB(B));for(var C=0;C<this.menu.palette.colors.length;C++){if(B.toUpperCase()==this.menu.palette.colors[C]){A=true;break;}}if(A){this.menu.palette.paletteContainer.child("a.color-"+B).addClass("actuate-widget-color-palette-sel");}},collapse:function(B){var A=B&&this.menu&&this.menu._ele&&this.menu._ele.contains(B.getTarget());if((B==undefined)||(!A&&B&&!B.within(this._wrap))){this.menu.collapse();}},expand:function(){if(actuate.util.browser.isChrome&&this.menu._ele){if(!this.menu.picker.hidden){actuate.widget.Element.get(this.menu._ele).setStyle("width","462px");}else{actuate.widget.Element.get(this.menu._ele).setStyle("width","auto");}}this.menu.show(this._ele);if(actuate.util.browser.isChrome&&this.menu._ele){if(!this.menu.picker.hidden){actuate.widget.Element.get(this.menu._ele).setStyle("width","auto");}}}});actuate.widget.Component.prototype.registerType("colorfield",actuate.widget.custom.ColorPickerUX.ColorField);actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorPickerMenu=actuate.Class.extendClass(actuate.widget.menu.Menu,{shadow:actuate.util.Utility.isIE7?"":"drop",collapsable:false,initialize:function(A){if(this.__extending){return ;}actuate.widget.custom.ColorPickerUX.ColorPickerMenu.superclass.initialize.call(this,A);this.plain=true;var B=new actuate.widget.custom.ColorPickerUX.ColorPickerItem(A);var C=new actuate.widget.custom.ColorPickerUX.ColorPaletteItem(A);this.add(C);this.add(B);this.picker=B.picker;this.palette=C.palette;this.picker.parentMenu=this;this.palette.parentMenu=this;this.relayEvents(B,["pickerSelect"]);this.relayEvents(C,["paletteSelect"]);},beforeDestroy:function(){this.picker.destroy();this.palette.destroy();},autoWidth:function(){},hide:function(A){if(!collapsable){actuate.widget.custom.ColorPickerUX.ColorPickerMenu.superclass.hide.apply(this,arguments);}},collapse:function(){actuate.widget.custom.ColorPickerUX.ColorPickerMenu.superclass.hide.apply(this,arguments);}});actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorPaletteUX=actuate.Class.extendClass(actuate.widget.ColorPalette,{itemCls:"actuate-widget-color-palette actuate-color-paletteux",allowReselect:false,csEle:null,parentMenu:null,preview:null,initialize:function(A){if(this.__extending){return ;}actuate.widget.custom.ColorPickerUX.ColorPaletteUX.superclass.initialize.call(this,A);if(this.handler){this.registerEventHandler("paletteSelect",actuate.Method.bind(this.handler,this));}},_onRender:function(A,E){var D='<div class="actuate-cp-head"><a href=#>'+actuate.util.Utility.getLocalizedString("ColorField.Auto")+"</a></div>";D+='<div class="actuate-cp-left"><div class="actuate-cp-fill"></div><div class="actuate-cp-custom"></div></div>';D+='<div class="actuate-cp-center"><div>'+actuate.util.Utility.getLocalizedString("ColorField.BasicColors")+'</div><span><tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl></span></div>';D+='<div class="actuate-cp-foot"><a href=#>'+actuate.util.Utility.getLocalizedString("ColorField.CustomColors")+"</a></div>";var H=this.tpl||new actuate.widget.XTemplate(D);var B=document.createElement("div");B.id=this._getId();B.className=this.itemCls;H.overwrite(B,this.colors);A.dom.insertBefore(B,E);A.addClass("actuate-cp-palette");this._ele=actuate.widget.Element.get(B);this._ele.on(this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this._ele.on("click",actuate.util.Utility.emptyFn,this,{delegate:"a",preventDefault:true});}var C=this.getElementByClassName(B,"actuate-cp-foot");this.csEle=actuate.widget.Element.get(C);var F=this.getElementByClassName(B,"actuate-cp-fill");this.preview=actuate.widget.Element.get(F);var I=this.getElementByClassName(B,"actuate-cp-center");this.paletteContainer=actuate.widget.Element.get(I);var G=this.getElementByClassName(B,"actuate-cp-head");this.fillEle=actuate.widget.Element.get(G);this.fillEle.on("click",this.handleAuto,this);},_afterRender:function(){actuate.widget.ColorPalette.superclass._afterRender.call(this);if(this.value){var A=this.value;this.value=null;this.select(A);}},handleClick:function(B,A){B.preventDefault();if(!this.disabled&&A.className){var C=A.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(C.toUpperCase());}},select:function(A){A=A.replace("#","");this.value=A;this.fireEvent("paletteSelect",this,A);},handleAuto:function(A){A.preventDefault();if(!this.disabled){this.select("auto");}},getElementByClassName:function(B,D){if(B){var E=B.getElementsByTagName("div");for(var C=0;C<E.length;C++){var A=E[C].getAttributeNode("class");if(A&&A.value==D){return E[C];}}}}});actuate.widget.Component.prototype.registerType("colorpaletteux",actuate.widget.custom.ColorPickerUX.ColorPaletteUX);actuate.util.Package.define("actuate.widget.custom.ColorPickerUX");actuate.widget.custom.ColorPickerUX.ColorPaletteItem=actuate.Class.extendClass(actuate.widget.menu.Adapter,{initialize:function(A){if(this.__extending){return ;}actuate.widget.menu.ColorItem.superclass.initialize.call(this,new actuate.widget.custom.ColorPickerUX.ColorPaletteUX(A),A);this.palette=this.component;this.relayEvents(this.palette,["paletteSelect"]);this.palette.on("render",function(B){B.getEl().swallowEvent("click");});if(this.selectHandler){this.registerEventHandler("paletteSelect",actuate.Method.bind(this.selectHandler,this));}}});