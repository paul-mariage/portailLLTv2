actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.ColumnListDialog=actuate.Class.create();actuate.dialog.impl.helper.ColumnListDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.ColumnListDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.ColumnListDialog",_width:268,_height:259,_columnList:null,_formatTrigger:null,_currentColumnIid:null,COMPATIBLE_TYPES:[],initialize:function(){var B=this._getId(this._classname);this._windowConfig={layout:"fit",header:false,title:actuate.util.Utility.getLocalizedString("columnListDialog.copyStyle"),resizable:true,instanceId:B};actuate.dialog.impl.helper.ColumnListDialog.superclass.initialize.call(this,B);var A=actuate.Constant.DataType;this.COMPATIBLE_TYPES=[A.INTEGER,A.FLOAT,A.DECIMAL];this._formatTrigger=false;},_render:function(){if(!this._rendered){this._columnList=new actuate.uiadapter.ListBox({width:227,height:150,multiSelect:true,cls:"actuate_dialog_columnlist_font"});this._window.add(this._columnList.getComponent());this._rendered=true;}},_localBind:function(F){this._render();if(!F){return ;}var L=F[actuate.model.Constant.MetadataType.ELEMENT];var I=[];this._currentColumnIid=F.columnIid;var E=L.columnsOrder;if(F.DataFormat!=null){this._formatTrigger=true;this._window.setTitle(actuate.util.Utility.getLocalizedString("columnListDialog.copyFormat"));var C=L.columnsMap[this._currentColumnIid];var B=L.bindingsMap[C.bindingName].dataType;for(var G=0;G<E.length;G++){var K=E[G];if(K!=this._currentColumnIid){var D=L.columnsMap[K];var A=(D.bindingName&&D.bindingName!=null)?D.bindingName:D.header;var H=L.bindingsMap[A];if(H){var J=H.dataType;if(J==B||(this.COMPATIBLE_TYPES.toString().indexOf(J)!=-1&&this.COMPATIBLE_TYPES.toString().indexOf(B)!=-1)){I.push([K,D.header]);}}}}}else{this._formatTrigger=false;this._window.setTitle(actuate.util.Utility.getLocalizedString("columnListDialog.copyStyle"));for(var G=0;G<E.length;G++){var K=E[G];if(K!=this._currentColumnIid){var D=L.columnsMap[K];I.push([K,D.header]);}}}this._columnList.setStore(I);},__getHelpTopic:function(){return this._formatTrigger?"iv_copyFormat":"iv_copyStyle";},_okPress:function(){var A=this._columnList.getSelectedIndexes();if(A.length>0){actuate.dialog.impl.helper.ColumnListDialog.superclass._okPress.call(this);}else{actuate.uiadapter.MessageBox.show({title:actuate.util.Utility.getLocalizedString("columnListDialog.warning.title"),msg:actuate.util.Utility.getLocalizedString("columnListDialog.warning.noSelectionErrInfo"),buttons:actuate.uiadapter.MessageBox.getOK(),icon:actuate.uiadapter.MessageBox.getWARNING()});return ;}this._columnList.clear();},createSoapNode:function(){var E=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var B=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.COLUMNDEFS);E.documentElement.appendChild(B);var G=this._columnList.getSelectedValues("value");var J;for(var D=0;D<G.length;D++){var C=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.ColumnDef);var A=actuate.util.XmlDom.createElement(E,"Iid");J=G[D];textNode=E.createTextNode(J);A.appendChild(textNode);C.appendChild(A);B.appendChild(C);}var F=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.Json);E.documentElement.appendChild(F);var K=actuate.util.Json;var L="{CopyStyleFrom:";var H={};H.value=this._currentColumnIid;L+=K.makeMap(H)+"}";var I=E.createTextNode(L);F.appendChild(I);return E;}});