actuate.util.Package.define("actuate.dialog.impl.helper.chartbuilder");actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab=actuate.Class.extendClass(actuate.dialog.impl.helper.chartbuilder.ParentChartWithAxisDataTab,{_classname:"actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab",_showTooltip:null,_selectedIid:null,_uiData:{},initialize:function(){this.id=this._getId(this._classname);this._title=actuate.util.Utility.getLocalizedString("chartBuilder.data");actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass.initialize.call(this);this._ySeriesStartDate1=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesStartDate1");this._ySeriesEndDate1=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesEndDate1");this._ySeriesTaskLabel1=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesTaskLabel1");this._ySeriesStartDate2=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesStartDate2");this._ySeriesEndDate2=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesEndDate2");this._ySeriesTaskLabel2=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeriesTaskLabel2");this._aggrExprLabel=actuate.widget.ComponentMgr.get(this.id+"_aggrExprLabel");this._startDateAggregateExp1=actuate.widget.ComponentMgr.get(this.id+"_startDateAggregateExp1");this._endDateAggregateExp1=actuate.widget.ComponentMgr.get(this.id+"_endDateAggregateExp1");this._taskLabelAggregateExp1=actuate.widget.ComponentMgr.get(this.id+"_taskLabelAggregateExp1");this._startDateAggregateExp2=actuate.widget.ComponentMgr.get(this.id+"_startDateAggregateExp2");this._endDateAggregateExp2=actuate.widget.ComponentMgr.get(this.id+"_endDateAggregateExp2");this._taskLabelAggregateExp2=actuate.widget.ComponentMgr.get(this.id+"_taskLabelAggregateExp2");this._categoryXTitle=actuate.widget.ComponentMgr.get(this.id+"_categoryXTitle");this._categoryXTitle.title=actuate.util.Utility.getLocalizedString("chartBuilder.category");this._groupLegned_items=actuate.widget.ComponentMgr.get(this.id+"_groupLegned_items");var A=actuate.Method.bind(this._eh_onBeforeSelect,this);this._ySeriesStartDate1.registerEventHandler("beforeselect",A);this._ySeriesEndDate1.registerEventHandler("beforeselect",A);this._ySeriesTaskLabel1.registerEventHandler("beforeselect",A);this._ySeriesStartDate2.registerEventHandler("beforeselect",A);this._ySeriesEndDate2.registerEventHandler("beforeselect",A);this._ySeriesTaskLabel2.registerEventHandler("beforeselect",A);this._yGroup.registerEventHandler("beforeselect",A);},_initYAxisContent:function(){var B=actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._initYAxisContent.call(this);this._yGroupOnStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});this._valueDefinitionStore1=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStore2=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStore3=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStore4=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStore5=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStore6=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStoreGroupBy=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._aggregationExpressionStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var A=new this._aggregationExpressionStore.recordType({value:"Min",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionMin")});this._aggregationExpressionStore.add(A);A=new this._aggregationExpressionStore.recordType({value:"Max",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionMax")});this._aggregationExpressionStore.add(A);A=new this._aggregationExpressionStore.recordType({value:"First",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionFirst")});this._aggregationExpressionStore.add(A);A=new this._aggregationExpressionStore.recordType({value:"Last",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionLast")});this._aggregationExpressionStore.add(A);if(B!=null){return B;}B={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.value"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(that._parentDialog&&that._parentDialog.adjustSize){that._parentDialog.adjustSize();}},expand:function(){if(that._parentDialog&&that._parentDialog.adjustSize){that._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.37,xtype:"label",style:"height:1px",text:""},{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.dataColumns")},{columnWidth:0.02,xtype:"label",style:"height:1px"},{id:this.id+"_aggrExprLabel",columnWidth:0.25,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.aggregateExpression")}]},{items:[{columnWidth:0.25,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.series1")},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.startDate")},{columnWidth:0.3,id:this.id+"_yAxisSeriesStartDate1",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore1)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",forceSelection:true,value:"Min",editable:false,disabled:false,id:this.id+"_startDateAggregateExp1",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{items:[{columnWidth:0.25,xtype:"label",style:"height:1px",text:""},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.endDate")},{columnWidth:0.3,id:this.id+"_yAxisSeriesEndDate1",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore2)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",forceSelection:true,value:"Max",editable:false,disabled:false,id:this.id+"_endDateAggregateExp1",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{items:[{columnWidth:0.25,xtype:"label",style:"height:1px",text:""},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.taskLabel")},{columnWidth:0.3,id:this.id+"_yAxisSeriesTaskLabel1",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore5)}]},{items:[{columnWidth:0.25,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.series2")},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.startDate")},{columnWidth:0.3,id:this.id+"_yAxisSeriesStartDate2",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore3)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",editable:false,forceSelection:true,value:"Min",disabled:false,id:this.id+"_startDateAggregateExp2",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{items:[{columnWidth:0.25,xtype:"label",style:"height:1px",text:""},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.endDate")},{columnWidth:0.3,id:this.id+"_yAxisSeriesEndDate2",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore4)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",editable:false,forceSelection:true,value:"Max",disabled:false,id:this.id+"_endDateAggregateExp2",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{items:[{columnWidth:0.25,xtype:"label",style:"height:1px",text:""},{columnWidth:0.12,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.taskLabel")},{columnWidth:0.3,id:this.id+"_yAxisSeriesTaskLabel2",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore6)}]},{id:this.id+"_groupLegned_items",items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.groupLegnedItems")},{columnWidth:0.3,id:this.id+"_yGroup",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStoreGroupBy)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"label",text:""}]},{id:this.id+"_yGroupOn_items",items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.timeInterval")},{columnWidth:0.3,id:this.id+"_yGroupOn",xtype:"combo",editable:false,forceSelection:true,valueField:"value",displayField:"text",store:this._yGroupOnStore},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"label",text:""}]}]};return B;},_agregateExpressionHandler:function(A){actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._agregateExpressionHandler.call(this);var C=actuate.widget.ComponentMgr.get(this.id+"_startDateAggregateExp1");C.setDisabled(A.checked?false:true);C.setValue(A.checked?"Min":"");var E=actuate.widget.ComponentMgr.get(this.id+"_endDateAggregateExp1");E.setDisabled(A.checked?false:true);E.setValue(A.checked?"Max":"");var B=actuate.widget.ComponentMgr.get(this.id+"_startDateAggregateExp2");B.setDisabled(A.checked?false:true);B.setValue(A.checked?"Min":"");var D=actuate.widget.ComponentMgr.get(this.id+"_endDateAggregateExp2");D.setDisabled(A.checked?false:true);D.setValue(A.checked?"Max":"");},__onSelectDataSource:function(){this._startDateAggregateExp1.setValue("Min");this._startDateAggregateExp2.setValue("Min");this._endDateAggregateExp1.setValue("Max");this._endDateAggregateExp2.setValue("Max");actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass.__onSelectDataSource.call(this);},_resetAllTreeCombo:function(){actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._resetAllTreeCombo.call(this);var B=this.__dataSourceCombo.getValue();var A={id:"none",strong:true,value:"",text:""};this._valueDefinitionStore1.removeAll();this._valueDefinitionStore2.removeAll();this._valueDefinitionStore3.removeAll();this._valueDefinitionStore4.removeAll();this._valueDefinitionStore5.removeAll();this._valueDefinitionStore6.removeAll();this._valueDefinitionStoreGroupBy.removeAll();this.__addDataIntoTreeStore(A,this._valueDefinitionStore1);this.__addDataIntoTreeStore(A,this._valueDefinitionStore2);this.__addDataIntoTreeStore(A,this._valueDefinitionStore3);this.__addDataIntoTreeStore(A,this._valueDefinitionStore4);this.__addDataIntoTreeStore(A,this._valueDefinitionStore5);this.__addDataIntoTreeStore(A,this._valueDefinitionStore6);this.__addDataIntoTreeStore(A,this._valueDefinitionStoreGroupBy);this.__setTreeStoreValues(this._valueDefinitionStore1,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore2,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore3,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore4,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore5,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore6,B,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStoreGroupBy,B,["category","column","dimension"]);if(this._isDataModelSelected()){this._ySeriesStartDate1.expandDeep=1;this._ySeriesEndDate1.expandDeep=1;this._ySeriesTaskLabel1.expandDeep=1;this._ySeriesStartDate2.expandDeep=1;this._ySeriesEndDate2.expandDeep=1;this._ySeriesTaskLabel2.expandDeep=1;this._yGroup.expandDeep=1;}else{this._ySeriesStartDate1.expandDeep=null;this._ySeriesEndDate1.expandDeep=null;this._ySeriesTaskLabel1.expandDeep=null;this._ySeriesStartDate2.expandDeep=null;this._ySeriesEndDate2.expandDeep=null;this._ySeriesTaskLabel2.expandDeep=null;this._yGroup.expandDeep=null;}this._ySeriesStartDate1.refresh();this._ySeriesEndDate1.refresh();this._ySeriesTaskLabel1.refresh();this._ySeriesStartDate2.refresh();this._ySeriesEndDate2.refresh();this._ySeriesTaskLabel2.refresh();this._yGroup.refresh();this._ySeriesStartDate1.setValueById("none");this._ySeriesEndDate1.setValueById("none");this._ySeriesTaskLabel1.setValueById("none");this._ySeriesStartDate2.setValueById("none");this._ySeriesEndDate2.setValueById("none");this._ySeriesTaskLabel2.setValueById("none");this._yGroup.setValueById("none");},storeUIData:function(A){var D=actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass.storeUIData.call(this,A);this._uiData=D.dataTab;this._uiData.yAxisSeries=new Array();this._uiData.yAxisSeries[0]={};this._uiData.yAxisSeries[0].name=this._getTreeComboValue(this._ySeriesStartDate1);this._uiData.yAxisSeries[0].aggregate=this._startDateAggregateExp1.getValue();this._uiData.yAxisSeries[0].groupOn=this._getTreeComboValue(this._yGroup);if(this._getTreeComboValue(this._yGroup)){var B=this._queryTreeComboRecord(this._ySeriesStartDate1,this._getTreeComboValue(this._yGroup));var C=B?B.data.valueDefinitionType:"";if("date-time"==C||"datetime"==C||"date"==C||"time"==C){this._uiData.yAxisSeries[0].groupUnit=this._yGroupOn.getValue();}}this._uiData.yAxisSeries[1]={};this._uiData.yAxisSeries[1].name=this._getTreeComboValue(this._ySeriesEndDate1);this._uiData.yAxisSeries[1].aggregate=this._endDateAggregateExp1.getValue();this._uiData.yAxisSeries[2]={};this._uiData.yAxisSeries[2].name=this._getTreeComboValue(this._ySeriesTaskLabel1);this._uiData.yAxisSeries[3]={};this._uiData.yAxisSeries[3].name=this._getTreeComboValue(this._ySeriesStartDate2);this._uiData.yAxisSeries[3].aggregate=this._startDateAggregateExp2.getValue();this._uiData.yAxisSeries[4]={};this._uiData.yAxisSeries[4].name=this._getTreeComboValue(this._ySeriesEndDate2);this._uiData.yAxisSeries[4].aggregate=this._endDateAggregateExp2.getValue();this._uiData.yAxisSeries[5]={};this._uiData.yAxisSeries[5].name=this._getTreeComboValue(this._ySeriesTaskLabel2);if(A==null){A={};}A.dataTab=this._uiData;this._uiData={};return A;},_loadYAxisData:function(F){if(F.yAxisSeries){var B=F.yAxisSeries;if(B){if(B[0]){this.__setTreeComboValue(this._ySeriesStartDate1,this.convertExpression(B[0].name));var G=this._queryTreeComboRecord(this._ySeriesStartDate1,B[0].name);if(G){this.__setTreeComboValue(this._ySeriesStartDate1,B[0].name);}else{if(!this.isExpression(this.convertExpression(B[0].name))){var A=this._valueDefinitionStore1.getAt(0);if(A){this.__setTreeComboValue(this._ySeriesStartDate1,A.data.valueDefinitionValue);}else{this._ySeriesStartDate1.setValueById("none");}}}if(!B[0].aggregate){if(this._isXGroupOn.checked){this._startDateAggregateExp1.setValue("Min");this._startDateAggregateExp1.setDisabled(false);}else{this._startDateAggregateExp1.setValue("");this._startDateAggregateExp1.setDisabled(true);}}else{var D=B[0].aggregate;if(B[0].name==""){D="Min";}var G=this._aggregationExpressionStore.query("value",D).itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._startDateAggregateExp1.setSelectedIndex(C);}}if(B[0].groupOn){this.__setTreeComboValue(this._yGroup,this.convertExpression(B[0].groupOn));var G=this._queryTreeComboRecord(this._ySeriesStartDate1,B[0].groupOn);var H=G?G.data.valueDefinitionType:"";if("date-time"==H||"datetime"==H||"date"==H||"time"==H){this._eh_changeYGroupOn();var E=this._yGroupOnStore.query("value",B[0].groupUnit).itemAt(0);if(E){this._yGroupOn.setValue(B[0].groupUnit);}}}}else{var G=this._aggregationExpressionStore.query("value","Min").itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._startDateAggregateExp1.setSelectedIndex(C);}}if(B[1]){this.__setTreeComboValue(this._ySeriesEndDate1,this.convertExpression(B[1].name));var G=this._queryTreeComboRecord(this._ySeriesEndDate1,B[1].name);if(G){this.__setTreeComboValue(this._ySeriesEndDate1,B[1].name);}else{if(!this.isExpression(this.convertExpression(B[1].name))){var A=this._valueDefinitionStore1.getAt(0);if(A){this.__setTreeComboValue(this._ySeriesEndDate1,A.data.valueDefinitionValue);}else{this._ySeriesEndDate1.setValueById("none");}}}if(this._isDataCubeSelected()&&!B[1].aggregate){this._endDateAggregateExp1.setValue("");this._endDateAggregateExp1.setDisabled(true);}else{var D=B[1].aggregate;if(B[1].name==""){D="Max";}var G=this._aggregationExpressionStore.query("value",D).itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._endDateAggregateExp1.setSelectedIndex(C);}}}else{var G=this._aggregationExpressionStore.query("value","Max").itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._endDateAggregateExp1.setSelectedIndex(C);}}if(B[2]){this.__setTreeComboValue(this._ySeriesTaskLabel1,this.convertExpression(B[2].name));}if(B[3]){this.__setTreeComboValue(this._ySeriesStartDate2,this.convertExpression(B[3].name));var G=this._queryTreeComboRecord(this._ySeriesStartDate2,B[3].name);if(G){this.__setTreeComboValue(this._ySeriesStartDate2,B[3].name);}else{if(!this.isExpression(this.convertExpression(B[3].name))){var A=this._valueDefinitionStore1.getAt(0);if(A){this.__setTreeComboValue(this._ySeriesStartDate2,A.data.valueDefinitionValue);}else{this._ySeriesStartDate2.setValueById("none");}}}if(this._isDataCubeSelected()&&!B[3].aggregate){this._startDateAggregateExp2.setValue("");this._startDateAggregateExp2.setDisabled(true);}else{var D=B[3].aggregate;if(B[3].name==""){D="Min";}var G=this._aggregationExpressionStore.query("value",D).itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._startDateAggregateExp2.setSelectedIndex(C);}}}else{var G=this._aggregationExpressionStore.query("value","Min").itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._startDateAggregateExp2.setSelectedIndex(C);}}if(B[4]){this.__setTreeComboValue(this._ySeriesEndDate2,this.convertExpression(B[4].name));var G=this._queryTreeComboRecord(this._ySeriesEndDate2,B[4].name);if(G){this.__setTreeComboValue(this._ySeriesEndDate2,B[4].name);}else{if(!this.isExpression(this.convertExpression(B[4].name))){var A=this._valueDefinitionStore1.getAt(0);if(A){this.__setTreeComboValue(this._ySeriesEndDate2,A.data.valueDefinitionValue);}else{this._ySeriesEndDate2.setValueById("none");}}}if(this._isDataCubeSelected()&&!B[4].aggregate){this._endDateAggregateExp2.setValue("");this._endDateAggregateExp2.setDisabled(true);}else{var D=B[4].aggregate;if(B[4].name==""){D="Max";}var G=this._aggregationExpressionStore.query("value",D).itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._endDateAggregateExp2.setSelectedIndex(C);}}}else{var G=this._aggregationExpressionStore.query("value","Max").itemAt(0);var C=this._aggregationExpressionStore.indexOf(G);if(C>=0){this._endDateAggregateExp2.setSelectedIndex(C);}}if(B[5]){this.__setTreeComboValue(this._ySeriesTaskLabel2,this.convertExpression(B[5].name));}}}else{this._startDateAggregateExp1.setValue("Min");this._startDateAggregateExp2.setValue("Min");this._endDateAggregateExp1.setValue("Max");this._endDateAggregateExp2.setValue("Max");}if(!this._isXGroupOn.getValue()){this._startDateAggregateExp1.setValue("");this._startDateAggregateExp2.setValue("");this._endDateAggregateExp1.setValue("");this._endDateAggregateExp2.setValue("");}actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._loadYAxisData.call(this,F);},_clearSubControls:function(){actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._clearSubControls.call(this);this._ySeriesStartDate1.clear();this._ySeriesStartDate2.clear();this._ySeriesEndDate1.clear();this._ySeriesEndDate2.clear();this._ySeriesTaskLabel1.clear();this._ySeriesTaskLabel2.clear();this._startDateAggregateExp1.setSelectedIndex(0);this._startDateAggregateExp2.setSelectedIndex(0);this._endDateAggregateExp1.setSelectedIndex(0);this._endDateAggregateExp2.setSelectedIndex(0);},validate:function(){var A=actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass.validate.call(this);if(!this._getTreeComboValue(this._ySeriesStartDate1)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.noYAxisError"),buttons:actuate.widget.MessageBox.OK});return false;}else{if(!this.isExpression(this._getTreeComboValue(this._ySeriesStartDate1))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeriesStartDate1));if(("date-time"==B||"datetime"==B||"date"==B||"time"==B)&&this._isXGroupOn.checked&&(this._startDateAggregateExp1.getValue()=="Count"||this._startDateAggregateExp1.getValue()=="DistinctCount"||this._startDateAggregateExp1.getValue()=="Sum")){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yDateAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!("date-time"==B||"datetime"==B||"date"==B||"time"==B)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.date.errorMessage"),buttons:actuate.widget.MessageBox.OK});return false;}}}if(!this._getTreeComboValue(this._ySeriesEndDate1)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.series1Incomplete"),buttons:actuate.widget.MessageBox.OK});return false;}else{if(!this.isExpression(this._getTreeComboValue(this._ySeriesEndDate1))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeriesEndDate1));if(("date-time"==B||"datetime"==B||"date"==B||"time"==B)&&this._isXGroupOn.checked&&(this._endDateAggregateExp1.getValue()=="Count"||this._endDateAggregateExp1.getValue()=="DistinctCount"||this._endDateAggregateExp1.getValue()=="Sum")){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yDateAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!("date-time"==B||"datetime"==B||"date"==B||"time"==B)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.date.errorMessage"),buttons:actuate.widget.MessageBox.OK});return false;}}}if(this._getTreeComboValue(this._ySeriesStartDate2)){if(!this.isExpression(this._getTreeComboValue(this._ySeriesStartDate2))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeriesStartDate2));if(("date-time"==B||"datetime"==B||"date"==B||"time"==B)&&this._isXGroupOn.checked&&(this._startDateAggregateExp2.getValue()=="Count"||this._startDateAggregateExp2.getValue()=="DistinctCount"||this._startDateAggregateExp2.getValue()=="Sum")){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yDateAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!("date-time"==B||"datetime"==B||"date"==B||"time"==B)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.date.errorMessage"),buttons:actuate.widget.MessageBox.OK});return false;}}if(!this._getTreeComboValue(this._ySeriesEndDate2)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.series2Incomplete"),buttons:actuate.widget.MessageBox.OK});return false;}else{if(!this.isExpression(this._getTreeComboValue(this._ySeriesEndDate2))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeriesEndDate2));if(("date-time"==B||"datetime"==B||"date"==B||"time"==B)&&this._isXGroupOn.checked&&(this._endDateAggregateExp2.getValue()=="Count"||this._endDateAggregateExp2.getValue()=="DistinctCount"||this._endDateAggregateExp2.getValue()=="Sum")){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yDateAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!("date-time"==B||"datetime"==B||"date"==B||"time"==B)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.date.errorMessage"),buttons:actuate.widget.MessageBox.OK});return false;}}}}else{if(this._getTreeComboValue(this._ySeriesEndDate2)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.series2Incomplete"),buttons:actuate.widget.MessageBox.OK});return false;}else{if(!this._getTreeComboValue(this._ySeriesEndDate2)&&!this._getTreeComboValue(this._ySeriesStartDate2)&&this._getTreeComboValue(this._ySeriesTaskLabel2)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.series2Incomplete"),buttons:actuate.widget.MessageBox.OK});return false;}}}if(this._isDataCubeSelected()&&this._getTreeComboValue(this._ySeriesStartDate1)==this._getTreeComboValue(this._ySeriesEndDate1)&&this._getTreeComboValue(this._ySeriesStartDate2)==this._getTreeComboValue(this._ySeriesEndDate2)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.gantt.sameDateMessage"),buttons:actuate.widget.MessageBox.OK});return false;}return A;},_getYAxisDataType:function(F){actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._getYAxisDataType.call(this,F);var A=this.__getSelectedDataSourceInfo();if(A){var E=A[1].measures;if(E){for(var C=0;C<E.length;C++){var D=E[C].measures;if(D){for(var B=0;B<D.length;B++){if('data["'+E[C].name+"/"+D[B].name+'"]'==F){return D[B].dataType;}}}}}return this._getDataSetFieldDataType(F);}return"";},_createYAxisSoapNode:function(F,I){actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._createYAxisSoapNode.call(this,F,I);if(F){var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesStartDate1));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesStartDate1)));H.appendChild(A);D.appendChild(H);if(this._isXGroupOn.checked){var C=actuate.util.XmlDom.createElement(F,"Aggregate");var E=actuate.util.XmlDom.createElement(F,"Func");var A=F.createTextNode(this._startDateAggregateExp1.getValue());E.appendChild(A);C.appendChild(E);D.appendChild(C);}var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesStartDate1)));G.appendChild(A);D.appendChild(G);I.appendChild(B);var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesEndDate1));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesEndDate1)));H.appendChild(A);D.appendChild(H);if(this._isXGroupOn.checked){var C=actuate.util.XmlDom.createElement(F,"Aggregate");var E=actuate.util.XmlDom.createElement(F,"Func");var A=F.createTextNode(this._endDateAggregateExp1.getValue());E.appendChild(A);C.appendChild(E);D.appendChild(C);}var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesEndDate1)));G.appendChild(A);D.appendChild(G);I.appendChild(B);var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesTaskLabel1));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesTaskLabel1)));H.appendChild(A);D.appendChild(H);var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesTaskLabel1)));G.appendChild(A);D.appendChild(G);I.appendChild(B);var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesStartDate2));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesStartDate2)));H.appendChild(A);D.appendChild(H);if(this._isXGroupOn.checked){var C=actuate.util.XmlDom.createElement(F,"Aggregate");var E=actuate.util.XmlDom.createElement(F,"Func");var A=F.createTextNode(this._startDateAggregateExp2.getValue());E.appendChild(A);C.appendChild(E);D.appendChild(C);}var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesStartDate2)));G.appendChild(A);D.appendChild(G);I.appendChild(B);var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesEndDate2));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesEndDate2)));H.appendChild(A);D.appendChild(H);if(this._isXGroupOn.checked){var C=actuate.util.XmlDom.createElement(F,"Aggregate");var E=actuate.util.XmlDom.createElement(F,"Func");var A=F.createTextNode(this._endDateAggregateExp2.getValue());E.appendChild(A);C.appendChild(E);D.appendChild(C);}var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesEndDate2)));G.appendChild(A);D.appendChild(G);I.appendChild(B);var B=actuate.util.XmlDom.createElement(F,"Y-axis");var D=actuate.util.XmlDom.createElement(F,"DataMartData");B.appendChild(D);var J=actuate.util.XmlDom.createElement(F,"DataField");var A=F.createTextNode(this._getTreeComboValue(this._ySeriesTaskLabel2));J.appendChild(A);D.appendChild(J);var H=actuate.util.XmlDom.createElement(F,"DataType");var A=F.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeriesTaskLabel2)));H.appendChild(A);D.appendChild(H);var G=actuate.util.XmlDom.createElement(F,"DisplayName");var A=F.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeriesTaskLabel2)));G.appendChild(A);D.appendChild(G);I.appendChild(B);}},_createTooltipSoapNode:function(E,I){var H=actuate.util.XmlDom.createElement(E,"ShowTooltip");var D=E.createTextNode(this._showTooltip.checked?"true":"false");H.appendChild(D);I.appendChild(H);var B=actuate.util.XmlDom.createElement(E,"TooltipValue");var C=actuate.util.XmlDom.createElement(E,"DataMartData");B.appendChild(C);var J=actuate.util.XmlDom.createElement(E,"DataField");var A=E.createTextNode(this._getTreeComboValue(this._tooltipValue));J.appendChild(A);C.appendChild(J);var G=actuate.util.XmlDom.createElement(E,"DataType");var F="";if(this._getTreeComboValue(this._tooltipValue)=="categoryData"){F=this._getXAxisDataType(this._getTreeComboValue(this._categoryXCombo));}else{if(this._getTreeComboValue(this._tooltipValue)=="valueSeriesName"){}else{if(this._getTreeComboValue(this._tooltipValue)=="valueData"){F=this._getYAxisDataType(this._getTreeComboValue(this._ySeriesStartDate1));}else{F=this._getDataSetFieldDataType(this._getTreeComboValue(this._tooltipValue));}}}var A=E.createTextNode(F);G.appendChild(A);C.appendChild(G);I.appendChild(B);},setAggrExprVisibility:function(A){if(A){this._aggrExprLabel.show();this._startDateAggregateExp1.show();this._startDateAggregateExp2.show();this._endDateAggregateExp1.show();this._endDateAggregateExp2.show();}else{this._aggrExprLabel.hide();this._startDateAggregateExp1.hide();this._startDateAggregateExp2.hide();this._endDateAggregateExp1.hide();this._endDateAggregateExp2.hide();}},_isDisabled:function(C,A){if(actuate.dialog.impl.helper.chartbuilder.GanttChartWithAxisDataTab.superclass._isDisabled.apply(this,arguments)){return true;}var B=C?C.value:null;if(B&&(A==this._valueDefinitionStore1||A==this._valueDefinitionStore2||A==this._valueDefinitionStore3||A==this._valueDefinitionStore4)){switch(B.type){case"column":case"measure":if("date-time"!=B.dataType&&"datetime"!=B.dataType&&"date"!=B.dataType&&"time"!=B.dataType){return true;}break;default:return true;break;}}return false;}});