actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.FilterManager=actuate.Class.create();actuate.dialog.impl.helper.FilterManager.prototype={initialize:function(){this.filterTable=new Array();if(!actuate.dialog.impl.helper.FilterManager.OPERATOR_CATEGORIES){var A=new Array(3);A[0]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TRUE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_FALSE);A[1]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_EQ,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LIKE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE);A[2]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN);A[3]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN);actuate.dialog.impl.helper.FilterManager.OPERATOR_CATEGORIES=A;}},addConditionLinesFromMetadata:function(C,E,B){if(C){for(var A=0;A<C.length;A++){var D=new actuate.data.ConditionLine();D.setFromMetadata(C[A],E);this.filterTable.push(D);}}},resetFilterTable:function(){this.filterTable.length=0;},getConditionLine:function(A){if(A<0||A>=this.getConditionLineCount()){return null;}return this.filterTable[A];},getConditionLineCount:function(){return this.filterTable.length;},insertConditionLine:function(A,B){if(B<0||B>this.getConditionLineCount()){B=this.getConditionLineCount();}this.filterTable.splice(B,0,A);return B;},replaceConditionLine:function(A,B){if(B<0||B>this.getConditionLineCount()){B=this.getConditionLineCount();}this.filterTable.splice(B,1,A);return B;},deleteConditionLine:function(B){var A=this.getConditionLine(B);if(A.getRow()==null){return ;}this.filterTable.splice(B,1);},createGadgetFilterSoap:function(){var E=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var G=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.Filter);var F=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.Type);var H=E.createTextNode(actuate.Constant.tag.Advanced);F.appendChild(H);G.appendChild(F);var C=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.ConditionLineList);G.appendChild(C);var A=this.getConditionLineCount();for(var D=0;D<A;D++){var B=this.getConditionLine(D);C.appendChild(this.creatConditionLineSoap(E,B));}return G;},creatConditionLineSoap:function(D,Q){var L=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.ConditionLine);if(Q.getLogicOp()!=null){var J=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.LogicOp);var K=D.createTextNode(Q.getLogicOp());J.appendChild(K);L.appendChild(J);}var E=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.HasLeftBracket);var A=D.createTextNode(Q.getHasLeftBracket()?"true":"false");E.appendChild(A);L.appendChild(E);var N=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.HasNot);var H=D.createTextNode(Q.getHasNot()?"true":"false");N.appendChild(H);L.appendChild(N);var P=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Row);var M=D.createTextNode(Q.getRow());P.appendChild(M);L.appendChild(P);var C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.CLOperator);var I=D.createTextNode(Q.getOperator());C.appendChild(I);L.appendChild(C);var F=this.getOperatorType(Q.getOperator());if(F!=0){var O=this._createFilterOperand(Q,D,0,Q.getOperator()==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN);if(O){L.appendChild(O);}}if(F==2){var O=this._createFilterOperand(Q,D,1,false);if(O){L.appendChild(O);}}var B=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.HasRightBracket);var G=D.createTextNode(Q.getHasRightBracket()?"true":"false");B.appendChild(G);L.appendChild(B);return L;},createGadgetMeasureFilterSoap:function(){var E=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(E,"FilterList");var H=new actuate.data.FilterLists();var A=this.getConditionLineCount();for(var F=0;F<A;F++){var I=this.getConditionLine(F);var C=I.toSimpleFilter();var G=C.getSoapRequest(E,"Filter");var B=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.ConditionLineList);G.appendChild(B);B.appendChild(this.creatConditionLineSoap(E,I));D.appendChild(G);}return D;},_createFilterOperand:function(K,B,F,E){if(K==null||K.getFilterOperands()==null||K.getFilterOperands().length<=0||K.getFilterOperands()[F]==null){return ;}var G=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.FilterOperand);if(K.getFilterOperands()[F].isDataField==true){var J=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.DataField);G.appendChild(J);var A=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.NAME);var D=B.createTextNode(K.getFilterOperands()[F].value);A.appendChild(D);J.appendChild(A);}else{var C=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.LITERAL);G.appendChild(C);var I=K.getFilterOperands()[F].value;var H=B.createTextNode(I);C.appendChild(H);}return G;},getOperatorType:function(D){var C=actuate.dialog.impl.helper.FilterManager.OPERATOR_CATEGORIES;if(C!=null){for(var B=0;B<C.length;B++){for(var A=0;A<C[B].length;A++){if(D==C[B][A]){return B;}}}}return 0;},noComma:""};