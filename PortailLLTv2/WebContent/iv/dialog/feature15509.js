actuate.util.Package.define("actuate.dialog.impl.helper.selectorbuilder");actuate.dialog.impl.helper.selectorbuilder.SelectorTypeTab=actuate.Class.create();actuate.dialog.impl.helper.selectorbuilder.SelectorTypeTab.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractTabDialog(),{_classname:"actuate.dialog.SelectorTypeTab",_type:null,_selectedIndex:null,_oldSelectedIndex:null,_isVersionBased:false,TYPES:["slider","radioButton","list","dropdown","checkBox","calendar"],initialize:function(){var A=this._getId(this._classname);this._isVersionBased=false;this._initContent();this._initPanel();this._initEvent();},_initEvent:function(){this.on("fieldchanged",actuate.Method.bind(this._fieldChangedHandler,this));this.on("showdata",actuate.Method.bind(this.__showDataHandler,this));},_fieldChangedHandler:function(C){var A=C?C.noBinding:null;var E=C?C.format:null;var G;var D;if(!A&&E&&E.value){var F=E.value;G=F.controlType;D=E.type;if(!D){var B=F.dataType;if(B){B=B.toLowerCase();}switch(B){case"string":D="stringformat";break;case"integer":case"float":case"double":case"decimal":D="numberformat";break;case"date":D="dateformat";break;case"time":D="timeformat";break;case"datetime":D="datetimeformat";break;case"date-time":D="datetimeformat";break;default:D=null;break;}}}this._setRadioStatus(A,D,G);},_setRadioStatus:function(A,F,G){for(var C=0;C<this.TYPES.length;C++){var E=this.TYPES[C];var B=actuate.widget.ComponentMgr.get("actuate_dialog_selectTypeTab_radio_"+E);var D=false;switch(E){case"slider":D=this._isVersionBased||(F&&F!="numberformat")||G=="text-box";break;case"calendar":D=this._isVersionBased||(F&&F!="datetimeformat"&&F!="timeformat"&&F!="dateformat");break;case"checkBox":case"radioButton":case"list":D=this._isVersionBased||A||G=="text-box";break;default:D=!this._isVersionBased&&A;break;}if(B){B.setDisabled(D);}}},__showDataHandler:function(A){this._isVersionBased=false;if(A&&A.operationData&&A.operationData.componentData){if(A.operationData.componentData.dataObjectType==actuate.Constant.SelectorPurpose.DATA_VERSION){this._isVersionBased=true;this._setRadioStatus();}}},getOldSelectedIndex:function(){return this._oldSelectedIndex;},getSelectedIndex:function(){return this._selectedIndex;},getType:function(){return this._type;},_getRadioConfig:function(C,B){var A={id:"actuate_dialog_selectTypeTab_radio_"+B,xtype:"radio",name:"typeRadio",boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.typeTab.type."+B),valueText:C,_baseCls:"actuate-selector-type-"+B+" actuate-selector-type"};return A;},_initPanel:function(){var E=this.TYPES;var A=[];for(var D=0;D<E.length;D++){A.push(this._getRadioConfig(D,E[D]));}var C={header:false,plain:true,border:false,title:actuate.util.Utility.getLocalizedString("selectorBuilder.typeTab.type"),autoHeight:true,checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},items:[{defaults:{columnWidth:0.5},items:A}]};this._panel=new actuate.widget.panel.Panel(C);this._radios=[];for(var D=0;D<this.TYPES.length;D++){var B=actuate.widget.ComponentMgr.get("actuate_dialog_selectTypeTab_radio_"+this.TYPES[D]);this._radios.push(B);B.registerEventHandler("check",actuate.Method.bind(this._radioSelected,this),false);}this._oldSelectedIndex=2;this._selectedIndex=2;},_radioSelected:function(B){var A=B;if(!B){A=this._radios[0];}this._oldSelectedIndex=this._selectedIndex;this._selectedIndex=A.getGroupValue();this._type=this.TYPES[this._selectedIndex];},_preHide:function(){this._oldSelectedIndex=this._selectedIndex;this._selectedIndex=null;},loadData:function(F){for(var C=0;C<this._radios.length;C++){this._radios[C].enable();}if(this._isParameterBasedSelector(F)){var B=F&&(F.Base||F.parameter);var A=-1;if(!B.isDynamicSelectionList){for(var C=0;C<this._radios.length;C++){this._radios[C].disable();}switch(B.dataType.toLowerCase()){case"date":A=5;break;case"currency":A=3;break;case"decimal":A=3;break;case"integer":A=3;break;case"string":A=3;break;case"boolean":case"datetime":A=3;break;case"time":A=3;break;}}else{for(var C=0;C<this._radios.length;C++){this._radios[C].enable();}switch(B.dataType.toLowerCase()){case"date":this._radios[0].disable();A=5;break;case"currency":this._radios[5].disable();A=3;break;case"decimal":this._radios[5].disable();A=3;break;case"integer":this._radios[5].disable();A=3;break;case"string":this._radios[5].disable();this._radios[0].disable();A=3;break;case"boolean":case"datetime":this._radios[5].disable();this._radios[0].disable();A=3;break;case"time":this._radios[5].disable();this._radios[0].disable();A=3;break;}}if(A>=0){this._radios[A].enable();this._selectedIndex=A;}}if(!(F&&F.Base)){if(this._selectedIndex==null||this._selectedIndex==undefined){this._selectedIndex=2;}this._radios[this._selectedIndex].setValue(true,true);return ;}var D=F.Base.type;var E=this.TYPES.length;for(var C=0;C<E;C++){if(D==this.TYPES[C]){this._selectedIndex=C;this._oldSelectedIndex=C;break;}}this._radios[this._selectedIndex].setValue(true,true);},validate:function(){if(this._selectedIndex==null||this._selectedIndex<0){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("selectorDialog.alertTitle"),actuate.util.Utility.getLocalizedString("selectorBuilder.typeTab.errorMessage"));return false;}return true;},createJsonData:function(){var A={};var B=this.TYPES[this._selectedIndex];A.type=B;return{Base:A};},_isParameterBasedSelector:function(A){if(A&&A.parameter){return true;}if(A&&A.Base&&A.Base.parameterName){return true;}return false;}});