actuate.util.Package.define("actuate.dialog.impl.helper.filepicker");actuate.dialog.impl.helper.filepicker.FilePickerDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_classname:"actuate.dialog.FilePickerDialog",OPEN_DIALOG:"OpenFileDialog",SAVE_DIALOG:"SaveFileDialog",fileImages:new Array("filepicker_smalliconImageButton sprite-icon_iob","filepicker_smalliconImageButton sprite-icon_sma","filepicker_smalliconImageButton sprite-icon_bizdesign","filepicker_smalliconImageButton sprite-icon_rpttemplate","filepicker_smalliconImageButton sprite-rptdesign16x16"),folderImage:"filepicker_smalliconImageButton sprite-folder",fileImageDefault:"filepicker_smalliconImageButton sprite-data-column",upArrowImage:"actuate-widget-btn-wrap actuate-widget-btn actuate_file_bt ",upArrowDisabledImage:"actuate-widget-btn-wrap actuate-widget-btn actuate_file_bt actuate-item-disabled",minHeight:16,maxHeight:16*16,_dialogType:undefined,_fileFilter:undefined,_fileListSelectedElement:undefined,_fileListSelectedIndex:undefined,_lastPath:undefined,__preventEnterKey:true,LINE_HEIGHT:16,_width:510,FOLDER_TREE_INDENT:16,FOLDER_LINE_COLOR_SELECTED:"#353535",FOLDER_LINE_TEXT_COLOR_SELECTED:"#353535",FOLDER_LINE_COLOR_UNSELECTED:"#ffffff",_FILTER_TEXT_ID:"filter_text_id",_FIND_BUTTON_ID:"find_button_id",_SAVE_AS_ID:"save_as_div",_FILE_NAME_ID:"file_name_id",_FILE_TYPE_ID:"file_type_id",_parentDialogHelpLinks:undefined,_TEMPLATE_FOLDER_LIST:'<tpl for="."><div class="actuate-combo-list-item">'+'<div class="{icon}" style="margin-top:2px; margin-right:2px;"></div>'+'<div qtip="{title}" style="">{folderName}</div>'+"</div></tpl>",_TEMPLATE_FILE_LIST:'<tpl for="."><div id={id} class="actuate-list-item">'+'<div class="{icon}" style="margin-top:1px; margin-right:2px;"></div>'+'<div qtip="{title}" style="">{fileName}</div>'+"</div></tpl>",_firstFocusElement:null,__initComponents:function(){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__initComponents.apply(this,arguments);this.folderListStore=new actuate.widget.data.SimpleStore({fields:["icon","title","folderName"]});var C=document.getElementById("upButton_id");this.upFolderButton=new actuate.widget.button.Button({cls:"actuate_file_btn",iconCls:"actuate_file_btn_upFolder",tooltip:actuate.util.Utility.getLocalizedString("filePickerDialog.txt.up"),tooltipType:"title",renderTo:C});var A=document.getElementById(this._FILTER_TEXT_ID);var B=document.getElementById(this._FIND_BUTTON_ID);this.filterText=new actuate.widget.form.TextField({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,name:"filter_text_name",width:160,emptyText:actuate.util.Utility.getLocalizedString("filePickerDialog.emptyText.search"),enableKeyEvents:true});this.filterText.render(A);this.findButton=new actuate.widget.button.Button({cls:"actuate_file_btn",iconCls:"actuate_file_btn_search",tooltip:actuate.util.Utility.getLocalizedString("filePickerDialog.text.search"),tooltipType:"title",renderTo:B});this.saveAsDiv=document.getElementById(this._SAVE_AS_ID);this.fileNameText=document.getElementById(this._FILE_NAME_ID);var D=document.getElementById(this._FILE_TYPE_ID);this.fileTypeDiv=document.getElementById(this._FILE_TYPE_ID+"_div");this.fileTypeOption=new actuate.widget.form.ComboBox({editable:false,lazyInit:true,width:445,listeners:{select:actuate.Method.bind(function(){this.__neh_saveTypeSelect();},this)},renderTo:D});this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.defaultTitle"));this.__initFileBrowsingBase();this.__initFolderNavigation();this.__initFileListNavigation();this.__initDescription();},__initListeners:function(){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__initListeners.apply(this,arguments);actuate.util.Event.observe(document.getElementById(this._FIND_BUTTON_ID),"click",actuate.Method.bind(this.__neh_clickFindButton,this),false);actuate.util.Event.observe(this.filterText._ele.dom,"keypress",actuate.Method.bind(this.__neh_filterKeyPress,this),false);actuate.util.Event.observe(this.fileNameText,"keyup",actuate.Method.bind(this.__neh_filterFileNameKeyPress,this),false);},__initTemplates:function(){var C=document.createElement("div");var A=new actuate.widget.Template('<div style="position: relative; margin: 0px auto;  ">'+'<div style="position: relative; margin: 6px 1px 10px; ">'+'<div style="position: relative; ">'+'<div class="header-text">{0}</div>'+'<TABLE CELLPADDING="0px" CELLSPACING="0px" width="100%" CLASS="category_block">'+"<TR>"+'<TD><DIV ID="{1}"></DIV></TD>'+'<TD><DIV ID="{3}"></DIV></TD>'+'<TD><DIV ID="{6}"></DIV></TD>'+'<TD><DIV ID="{7}"></DIV></TD>'+"</TR>"+" </TABLE>"+'<div style="position:  relative; margin-top: 5px">'+'<div id="{4}">'+"</div>"+'<div style="position: relative;" id="{8}">'+'<div class="header-text">{9}</div>'+'<div style="position: relative;">'+'<input value="" type=text id="{10}"  class="actuate-form-text actuate-form-field" style="width: 445px;" ></input>'+"</div>"+"</div>"+'<div style="position: relative;" id = "{11}">'+'<div style="width: 450px;" class="header-text">{12}</div>'+'<div id="{13}" '+""+"</div>"+"</div>"+'<div id="{15}_div" style="position: relative; margin: 0 auto;">'+'<div class="header-text">{14}</div>'+'<div id="{15}" style="position: relative;"></div>'+"</div>"+"</div>"+'<div id="{16}" style="position: absolute; top: 38px; left: 7px; display: none;width: 90%; '+' height: 1px;overflow: auto; border-style: solid; border-width: 1px; border-color: #808080; background-color: #ffffff">'+'<div id="{17}" style="position: relative; display: none; height: 1px; width: 90%; '+' background-color:#ffffff;">'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>");var B=[actuate.util.Utility.getLocalizedString("filePickerDialog.txt.lookIn"),"currentFolderHolder_id","currentFolderElement_id","upButton_id","filelist_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.filter"),this._FILTER_TEXT_ID,this._FIND_BUTTON_ID,this._SAVE_AS_ID,actuate.util.Utility.getLocalizedString("filePickerDialog.saveAs"),this._FILE_NAME_ID,"descriptionDiv_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.description"),"description_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.fileType"),this._FILE_TYPE_ID,"folderTreeHolder_id","folderTree_id"];A.append(C,B,true);this.add(new actuate.widget.panel.Panel({contentEl:C,border:false,baseCls:"actuate-filepick-panel"}));},setFileFilters:function(D){this.filterText.setValue("");if(D){this.fileTypeOption.getStore().removeAll();var A=[];for(var C in D){var B=D[C].filter;if(D[C].description){B=D[C].description+" ("+B+")";}A.push([D[C].filter,B]);}this.fileTypeOption.setStore(A);this.fileTypeOption.setSelectedIndex(0);this.__neh_saveTypeSelect();}},setDialogType:function(A){this._dialogType=A;if(this.saveAsDiv){if(this._dialogType==this.SAVE_DIALOG){this.detailElement.childNodes[0].disabled=undefined;this.saveAsDiv.style.display="block";this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.saveAs.title"));this._firstFocusElement=this.fileNameText;}else{this.detailElement.childNodes[0].disabled="disabled";this.saveAsDiv.style.display="none";this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.defaultTitle"));this._firstFocusElement=null;}}},__neh_fileListSelection:function(C){actuate.util.Event.stop(C);this.fileListSelectedIndex=this.fileList.getSelectedIndex();if(this.fileListSelectedIndex>-1){var A=this.getModel().getFileDescriptions();this.descriptionText.setValue(A[this.fileListSelectedIndex]);var B=this.getModel().files[this.fileListSelectedIndex];if(B){if(!B.isFolder){this.fileNameText.value=this.getModel().getFileName(this.fileListSelectedIndex);}}}this._fileListSelectedIndex=this.fileListSelectedIndex;this._updateOKButtonState();},__initFileBrowsingBase:function(){this.model=new FilePickerDialogModel(this);this.stopClick_c=actuate.Method.bind(this.__neh_stopClick,this);this.fileTypeDescription=new Array("iob","sma","bizDesign","rpttemplate","rptDesign");},__initFolderNavigation:function(){var A=document.getElementById("currentFolderHolder_id");this.currentFolderHolder=new actuate.widget.form.ComboBox({editable:false,width:225,lazyInit:true,tpl:this._TEMPLATE_FOLDER_LIST,valueField:"folderName",displayField:"title",titleField:"title",store:this.folderListStore,renderTo:A});this.currentFolderHolder.registerEventHandler("select",actuate.Method.bind(this.__neh_folderTreeClick,this));this.upButton=document.getElementById("upButton_id");this.upOneLevel_c=actuate.Method.bind(this.__neh_upOneLevel,this);this.folderTree=document.getElementById("folderTree_id");this.folderTree.selectionId=-1;this.folderTree.style.display="none";this.folderTreeHolder=document.getElementById("folderTreeHolder_id");this.folderListSelection_c=actuate.Method.bind(this.__neh_folderListSelection,this);},__initFileListNavigation:function(){var A=document.getElementById("filelist_id");this.fileListSelectedIndex=-1;this.fileListStore=new actuate.widget.data.SimpleStore({fields:["icon","title","fileName","id"]});this.fileList=new actuate.widget.form.ListBox({width:450,height:110,tpl:this._TEMPLATE_FILE_LIST,store:this.fileListStore,renderTo:A});this.fileList.registerEventHandler("select",actuate.Method.bind(this.__neh_fileListSelection,this));this.fileList.registerEventHandler("dblclick",actuate.Method.bind(this.__neh_fileListDblClick,this));},__initDescription:function(A){this.detailElement=document.getElementById("description_id");this.descriptionText=new actuate.widget.form.TextArea({name:"description_text",cls:"actuate_file_description",width:450});this.descriptionText.render(this.detailElement);},__resetFolderNavigation:function(){this.currentFolderHolder.clear();this.upButton.className="actuate-item-disabled";this.upOne=-1;},__resetFileListNavigation:function(){this.fileList.clear();},__resetDescription:function(){if(this._dialogType!=this.SAVE_DIALOG){this.detailElement.childNodes[0].value="";}},__bindFolderNavigation:function(){var F=this.getModel().getLinkNames();var B=F[0];for(var A=F.length,E=A;E>0;E--){var D=F[E-1];var C=new this.folderListStore.recordType({icon:D==B?"actuate_file_open16":"actuate_file_folderClose16",title:D,folderName:D});this.folderListStore.add(C);}if(B=="/"){B=actuate.util.Utility.getLocalizedString("filePickerDialog.rootFolder");}this.currentFolderHolder.setValue(B);this.upOne=F.length-2;if(this.upOne>-1){this.upFolderButton.className=""+this.upArrowImage;actuate.util.Event.observe(this.upButton,"click",this.upOneLevel_c,false);this.upButton.className="";}else{this.upFolderButton.className=""+this.upArrowDisabledImage;}},__bindFileListNavigation:function(){var A=this.getModel().getFileNames();var D=[];for(var C=0;C<A.length;C++){var B=this.getModel().isFolder(C);name=A[C][0];D.push([B?"actuate_file_folderClose16":"actuate_file_fileGeneric16 "+A[C][3],B?name:(name+"."+A[C][3]),B?name:(name+"."+A[C][3]),"file_name_item_"+C]);}this.fileListStore.loadData(D);},__update:function(){this.__resetFolderNavigation();this.__bindFolderNavigation();this.__bindFileListNavigation();this._updateOKButtonState();actuate.Method.defer(100,this._resetDlgFocus,this);},__neh_stopClick:function(A){actuate.util.Event.stop(A);},__getIconClass:function(B){if(B){for(var A=0;A<5;A++){if(this.fileTypeDescription[A].toLowerCase()==B.toLowerCase()){return this.fileImages[A];}}}return this.fileImageDefault;},makeFolderList:function(C){var E=document.createElement("ul");E.style.position="relative";E.style.marginTop="0px";E.style.marginBottom="0px";E.style.padding="0px";E.style.marginLeft="0px";for(var D=0;D<C.length;D++){var B=document.createElement("li");B.style.position="relative";B.selectionId=D;B.style.paddingLeft="20px";B.className=this.folderImage;this.__disableElement(B);B.style.margin="0px";var F=document.createElement("span");F.style.whiteSpace="nowrap";var A=document.createTextNode(C[D]);E.appendChild(B);B.appendChild(F);F.appendChild(A);E.appendChild(B);}return E;},makeFileList:function(D){var U=document.createElement("table");U.style.borderCollapse="collapse";U.style.width="100%";var S=document.createElement("thead");S.className="filepicker_fileListingHeader_background";U.appendChild(S);var M=document.createElement("tr");S.appendChild(M);var F=document.createElement("td");F.style.borderBottom="1px solid";F.style.borderRight="2px inset";F.className="filepicker_fileListingHeader_border_bottom filepicker_fileListingHeader_border_right";M.appendChild(F);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.Name")));J.style.marginLeft="18px";F.appendChild(J);var I=document.createElement("td");M.appendChild(I);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.Type")));J.style.marginLeft="7px";I.appendChild(J);I.style.borderBottom="1px solid";I.style.borderRight="2px inset";I.className="filepicker_fileListingHeader_border_bottom filepicker_fileListingHeader_border_right";var C=document.createElement("td");M.appendChild(C);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.DateModified")));J.style.marginLeft="7px";C.appendChild(J);C.style.borderBottom="1px solid";C.className="filepicker_fileListingHeader_border_bottom";var B=document.createElement("tbody");U.appendChild(B);for(var R=0;R<D.length;R++){var H=document.createElement("tr");var N=document.createElement("td");var P=document.createElement("td");var K=document.createElement("td");var E=[N,P,K];B.appendChild(H);for(var Q=0;Q<3;Q++){H.appendChild(E[Q]);var L=document.createElement("div");L.style.position="relative";L.style.whiteSpace="nowrap";if(Q==0){L.selectionId=R;var T=document.createElement("div");T.style.cssFloat="left";T.style.styleFloat="left";T.style.marginRight="2px";T.qtip=D[R][Q];if(this.getModel().isFolder(R)){T.className=this.folderImage;}else{var A=this.__getIconClass(D[R][3]);T.className=A;}L.appendChild(T);}else{L.style.paddingLeft="4px";}this.__disableElement(L);L.style.margin="0px";var G=document.createElement("div");G.id="file_name_item_"+Q;G.style.cursor="default";G.style.overflow="hidden";var O=document.createTextNode(D[R][Q]);G.qtip=D[R][Q];E[Q].appendChild(L);L.appendChild(G);G.appendChild(O);}}return U;},getModel:function(){return this.model;},__neh_showFolders:function(B){actuate.util.Event.stop(B);if(this.menuShown){this.__neh_hideFolders();}else{this.folderTree.style.display="block";this.folderTreeHolder.style.display="block";var A=this.folderTreeHeight;displayHeight=A<this.minHeight?this.minHeight:A>this.maxHeight?this.maxHeight:A;this.folderTree.style.height=displayHeight+"px";this.folderTreeHolder.style.height=displayHeight+"px";this.folderTree.style.width=this.folderTreeHolder.clientWidth+"px";this.folderTreeHolder.style.height=(displayHeight+this.folderTreeHolder.offsetHeight-this.folderTreeHolder.clientHeight-2)+"px";this.menuShown=true;}},__neh_hideFolders:function(){this.folderTree.style.display="none";this.folderTreeHolder.style.display="none";this.menuShown=false;},__neh_upOneLevel:function(A){if(this.upOne>-1){this.__browseFolderFromTree(this.getModel().getLinkNames().length-1-this.upOne);}},__neh_folderListSelection:function(A){},__neh_fileListDblClick:function(C,A){if(A>-1){var B=this.getModel().isFolder(A);if(B){this.__browseFolderFromList(A);}else{this.__fileAction(A);}}},__neh_selectstart:function(A){if(A.returnValue==false){A.returnValue=true;return true;}return false;},__canClose:function(){var E=this.fileNameText.value;if(this._dialogType==this.SAVE_DIALOG&&this.getModel()){var B=this.getModel().checkDuplicateName(E);if(B){var D=actuate.util.Utility.getLocalizedString("error.saveViewDialog.duplicateProptDocName",B);var C=this;var A=arguments;this.__popupConfirmDialog(D,function(F){if(F=="yes"){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__canClose.apply(C,A);C._afterApply();}});return ;}}actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__canClose.apply(this,arguments);this._afterApply();},_afterApply:function(){if(this._fileListSelectedIndex!=null&&this._fileListSelectedIndex>-1){var A=this.getModel().isFolder(this._fileListSelectedIndex);if(A){this.__browseFolderFromList(this._fileListSelectedIndex);}}},__validate:function(){if(this.getModel().isFolder(this._fileListSelectedIndex)){return false;}var A=actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__validate.call(this,this,this.__createResult());var B=this.fileNameText.value;if(this._dialogType!=this.SAVE_DIALOG){if(!B){this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("filePickerDialog.error.noFileIsSelected"));A=false;}}else{if(!B||!actuate.dialog.impl.Utility.isValidFileName(B)){this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("filePickerDialog.error.invalidFileName"));return false;}}return A;},_getFullFileName:function(){if(this._dialogType==this.SAVE_DIALOG){var A=this.fileNameText.value;if(A&&this._lastPath!=null){if(this._lastPath.charAt(this._lastPath.length-1)!="/"){A=this._lastPath+"/"+A;}else{A=this._lastPath+A;}}return A;}else{if(!this.getModel().isFolder(this._fileListSelectedIndex)){return this.getModel().getFullFileName(this._fileListSelectedIndex);}}},_getFileDescription:function(){return this.detailElement.childNodes[0].value;},getFileExtensions:function(){return this.getModel().getFileExtensions();},_createBrowseFolderRequest:function(G,E){var D=birtSoapRequest.createXMLDom(null,actuate.Constant.tag.Data);var F=actuate.util.XmlDom.createElement(D,"FileBrowsing");var C=actuate.util.XmlDom.createElement(D,"Search");var B=actuate.util.XmlDom.createElement(D,"FileType");typeText=D.createTextNode(E);B.appendChild(typeText);C.appendChild(B);F.appendChild(C);if(G!=null){var H=actuate.util.XmlDom.createElement(D,"Path");var A=D.createTextNode(G);H.appendChild(A);F.appendChild(H);}D.documentElement.appendChild(F);return D;},__enableElement:function(A){A.style.backgroundColor=this.FOLDER_LINE_COLOR_SELECTED;A.style.color=this.FOLDER_LINE_COLOR_UNSELECTED;},__disableElement:function(A){A.style.backgroundColor=this.FOLDER_LINE_COLOR_UNSELECTED;},__browseFolderFromList:function(A){this._queryFileList(this.getModel().getPath(A));},__browseFolderFromTree:function(C,D){var B=null;var A=this.getModel().getLinkNames();if(C>-1&&D!=null){B=this.getModel().getRPath(A.length-1-C);}else{if(C>-1){B=this.getModel().getRPath(C);}else{B=this.getModel().makeFolderPath(D);}}this._queryFileList(B);},__fileAction:function(A){var B=this.getModel().getFileDescriptions();var C=null;if(B!=null&&B.length>A){C=B[A];}this.detailElement.childNodes[0].value=C?C:"";this.fileNameText.value=this.getModel().getFileName(A);this._fileListSelectedIndex=A;this._neh_okay();},__findTarget:function(A){do{if(A.selectionId!=undefined){return A;}A=A.parentNode;}while(A!=undefined);return A;},show:function(B,C){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.show.apply(this,arguments);var D=this._lastPath;this.filterText.setValue("");this.fileNameText.value="";this.detailElement.childNodes[0].value="";if(C&&C.fullFileName){D=C.fullFileName;var E=D;if(D){var A=D.lastIndexOf("/");if(A>=0){E=D.substring(A);D=D.substring(0,A);}else{D="/";}}if(E&&E.charAt(0)=="/"){E=E.substring(1);}}this._queryFileList(D);},_queryFileList:function(D){var F=D;var E=null;if(F==null){F=this._lastPath;}if(this.filterText&&this.filterText.getValue()){E=this.filterText.getValue()+"*";}this._lastPath=F;this._fileListSelectedElement=null;this._fileListSelectedIndex=null;this.__resetDescription();var B={path:F};var C=this._getCurrentFileFilter();if(C){B.fileFilter=C;}if(E){B.folderFilter=E;}var A={};A[actuate.dialog.impl.EventConstants.__E_QUERY_FILELIST]=actuate.util.Json.makeMap(B);this.__sendJson(A,actuate.Method.bind(this.model.setData,this.model));},__createResult:function(){if(this._dialogType==this.SAVE_DIALOG){return[this._getFullFileName(),this._getFileDescription(),this._fileFilter.substr(1)];}else{return[this._getFullFileName(),this._fileFilter.substr(1)];}},__neh_clickFindButton:function(){this._queryFileList();},_getCurrentFileFilter:function(){var B=this._fileFilter;if(this.filterText&&this.filterText.getValue()){var A=this.filterText.getValue()+"*";if(A.indexOf(".")>=0){B=A;}else{if(B.indexOf("*")>=0){B=B.replace(/\*/g,A);}}}else{B="*"+this._fileFilter.substring(this._fileFilter.indexOf("."));}return B;},__neh_filterKeyPress:function(A){if(A.keyCode==actuate.util.Event.KEY_RETURN){actuate.util.Event.stop(A);this.__neh_clickFindButton();}},__neh_filterFileNameKeyPress:function(A){this._updateOKButtonState();if(A.keyCode==actuate.util.Event.KEY_RETURN){actuate.util.Event.stop(A);this._neh_okay();}},_updateOKButtonState:function(){var A=this.fileNameText.value?true:false;if(!A&&this.fileList&&this.fileList.getSelectedIndex()>=0){A=true;}this.__setOKButtonState(A);},_neh_help_link:function(){if(this._parentDialogHelpLinks){window.open(this._parentDialogHelpLinks);}else{this.__openHelp(this.__getHelpTopic());}},setParentDialogHelpLinks:function(A){this._parentDialogHelpLinks=A;},__getHelpTopic:function(){return"open_file";},_setLastPath:function(A){if(this._lastPath==null){this._lastPath=A;}},__neh_folderTreeClick:function(C){var B=this.currentFolderHolder.getSelectedIndex();var A=this.getModel().getUpFolderNames();var D=A[B];this.__browseFolderFromTree(this.currentFolderHolder.getSelectedIndex(),D);},__neh_saveTypeSelect:function(A){this._fileFilter=this.fileTypeOption.getValue();this.__neh_clickFindButton();},__createFullName:function(B){if(B.length==0){return null;}if(!this.typeRPTonly){if(this.saveTypeSelect.getSelectedIndex()==0){if(this.__fileNameHasRPTExtension(B)){var A=B.lastIndexOf(Constants.RPTDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.BIZDESIGN_EXTENSTION;}else{if(!this.__fileNameHasBizExtension(B)){B=B+Constants.BIZDESIGN_EXTENSTION;}}return B;}if(this.saveTypeSelect.getSelectedIndex()==1){if(this.__fileNameHasBizExtension(B)){var A=B.lastIndexOf(Constants.BIZDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.RPTDESIGN_EXTENSTION;}else{if(!this.__fileNameHasRPTExtension(B)){B=B+Constants.RPTDESIGN_EXTENSTION;}}return B;}}else{if(this.__fileNameHasBizExtension(B)){var A=B.lastIndexOf(Constants.BIZDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.RPTDESIGN_EXTENSTION;}else{if(!this.__fileNameHasRPTExtension(B)){B=B+Constants.RPTDESIGN_EXTENSTION;}}return B;}},_postShow:function(){actuate.dialog.impl.helper.AbstractIVDialog.prototype._postShow.call(this);actuate.Method.defer(100,this._resetDlgFocus,this);},_resetDlgFocus:function(){try{if(this._firstFocusElement&&this._firstFocusElement.focus){this._firstFocusElement.focus();}}catch(A){}}});