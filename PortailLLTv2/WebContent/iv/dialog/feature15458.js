actuate.util.Package.define("actuate.dialog.impl.helper.chartbuilder");actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractDataTabDialog,{_classname:"actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab",_showTooltip:null,_selectedIid:null,_uiData:{},initialize:function(){this.id=this._getId(this._classname);this._title=actuate.util.Utility.getLocalizedString("chartBuilder.data");actuate.dialog.impl.helper.AbstractTabDialog.prototype.initialize.call(this);this._dataFieldSet=actuate.widget.ComponentMgr.get(this.id+"_dataFieldSet");this.__initDataSourceCombo();this._showTooltip=actuate.widget.ComponentMgr.get(this.id+"_ShowTooltip");this._tooltipValue=actuate.widget.ComponentMgr.get(this.id+"_TooltipValue");this._xGroupOn=actuate.widget.ComponentMgr.get(this.id+"_xGroupOn");this._ySeries1=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeries1");this._ySeries2=actuate.widget.ComponentMgr.get(this.id+"_yAxisSeries2");this._yGroup=actuate.widget.ComponentMgr.get(this.id+"_yGroup");this._yGroupOn=actuate.widget.ComponentMgr.get(this.id+"_yGroupOn");this._categoryXCombo=actuate.widget.ComponentMgr.get(this.id+"_categoryXCombo");this._aggrExprLabel=actuate.widget.ComponentMgr.get(this.id+"_aggrExprLabel");this._agregateExpression1=actuate.widget.ComponentMgr.get(this.id+"_agregateExpression1");this._agregateExpression2=actuate.widget.ComponentMgr.get(this.id+"_agregateExpression2");this._isXGroupOn=actuate.widget.ComponentMgr.get(this.id+"_isXGroupOn");this._xGroupOn_items=actuate.widget.ComponentMgr.get(this.id+"_xGroupOn_items");this._yGroupOn_items=actuate.widget.ComponentMgr.get(this.id+"_yGroupOn_items");this._groupLegned_items=actuate.widget.ComponentMgr.get(this.id+"_groupLegned_items");var A=actuate.Method.bind(this._eh_changeXGroupOn,this);var B=actuate.Method.bind(this._eh_changeYGroupOn,this);var C=actuate.Method.bind(this._eh_onBeforeSelect,this);this._categoryXCombo.registerEventHandler("select",A);this._yGroup.registerEventHandler("select",B);this._categoryXCombo.registerEventHandler("beforeselect",C);this._yGroup.registerEventHandler("beforeselect",C);this._ySeries1.registerEventHandler("beforeselect",C);this._ySeries2.registerEventHandler("beforeselect",C);this._tooltipValue.registerEventHandler("beforeselect",C);this._hyperlinkCheckbox=actuate.widget.ComponentMgr.get(this.id+"_hyperlinkCheckbox");this._keepCubeHierarchy=actuate.widget.ComponentMgr.get(this.id+"_keepCubeHierarchy");this._eh_datasetComboChange_c=actuate.Method.bind(this._eh_datasetComboChange,this);this.__dataSourceCombo.registerEventHandler("change",this._eh_datasetComboChange_c);},__createDataSourceCombo:function(){return actuate.widget.ComponentMgr.get(this.id+"_dataSetCombo");},_initContent:function(){var E=this;this._componentArray=[];var E=this;this._valueDefinitionStore=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType","hasAction","isDimension"]});this._valueDefinitionStore1=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType","isDimension"]});this._valueDefinitionStore2=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType","isDimension"]});this._valueDefinitionStoreTooltip=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});this._valueDefinitionStoreGroupBy=new actuate.widget.data.SimpleStore({fields:["valueDefinitionValue","valueDefinitionText","title","valueDefinitionType"]});var C={xtype:"fieldset",collapsible:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.data"),checkboxToggle:false,defaults:{border:false,layout:"column"},cls:"actuate-widget-panle-zero-margin-top",id:this.id+"_dataFieldSet",listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{layout:"column",bodyStyle:"padding:4px 4px 4px 4px",items:[{layout:"form",border:false,labelWidth:190,items:[{id:this.id+"_dataSetCombo",width:320,fieldLabel:actuate.util.Utility.getLocalizedString("chartBuilder.useDataFrom"),xtype:"treecombo",editable:false,forceSelection:true,autoExpand:true,valueField:"value",displayField:"title",titleField:"title",icons:this.__dataSourceIcons,sortInfo:{folderSort:true,field:"text",direction:"ASC"},showTooltip:true,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this.__dataSourceComboStore),style:"margin-right:3px"}]}]},{items:[{columnWidth:0.37,id:this.id+"_hyperlinkCheckbox",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("common.dataTab.useHyperlink"),handler:function(){}},{columnWidth:0.37,id:this.id+"_keepCubeHierarchy",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("common.dataTab.keepCubeHierarchy"),handler:function(){}}]}]};this._componentArray.push(C);this._xGroupOnStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});this._yGroupOnStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var F={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.categories"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:4px 4px 4px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.37,xtype:"label",style:"height:1px"},{columnWidth:0.6,id:this.id+"_categoryXCombo",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore)}]},{items:[{columnWidth:0.37,xtype:"label",style:"height:1px"},{columnWidth:0.605,id:this.id+"_isXGroupOn",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.groupCategories"),handler:function(){var H=actuate.widget.ComponentMgr.get(E.id+"_agregateExpression1");H.setDisabled(this.checked?false:true);H.setValue(this.checked?"Sum":"");var G=actuate.widget.ComponentMgr.get(E.id+"_agregateExpression2");G.setDisabled(this.checked?false:true);G.setValue(this.checked?"Sum":"");E._eh_changeXGroupOn();}}]},{id:this.id+"_xGroupOn_items",items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.timeInterval")},{columnWidth:0.4,id:this.id+"_xGroupOn",xtype:"combo",editable:false,forceSelection:true,valueField:"value",displayField:"text",store:this._xGroupOnStore}]}]};this._componentArray.push(F);this._aggregationExpressionStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var B=new this._aggregationExpressionStore.recordType({value:"Sum",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionSum")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"Average",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionAverage")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"Count",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionCount")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"DistinctCount",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionDistinctCount")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"Min",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionMin")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"Max",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionMax")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"First",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionFirst")});this._aggregationExpressionStore.add(B);B=new this._aggregationExpressionStore.recordType({value:"Last",text:actuate.util.Utility.getLocalizedString("chartBuilder.agregateExpressionLast")});this._aggregationExpressionStore.add(B);var A={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.values"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.37,xtype:"label",style:"height:1px",text:""},{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.dataColumns")},{columnWidth:0.02,xtype:"label",style:"height:1px"},{id:this.id+"_aggrExprLabel",columnWidth:0.25,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.aggregateExpression")}]},{items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.series1")},{columnWidth:0.3,id:this.id+"_yAxisSeries1",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore1)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",forceSelection:true,value:"Sum",editable:false,disabled:false,id:this.id+"_agregateExpression1",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.series2")},{columnWidth:0.3,id:this.id+"_yAxisSeries2",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStore2)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"combo",editable:false,forceSelection:true,value:"Sum",disabled:false,id:this.id+"_agregateExpression2",valueField:"value",displayField:"text",store:this._aggregationExpressionStore}]},{id:this.id+"_groupLegned_items",items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.groupLegnedItems")},{columnWidth:0.3,id:this.id+"_yGroup",xtype:"treecombo",editable:false,forceSelection:true,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",viewWidth:250,titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStoreGroupBy)},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"label",text:""}]},{id:this.id+"_yGroupOn_items",items:[{columnWidth:0.37,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.timeInterval")},{columnWidth:0.3,id:this.id+"_yGroupOn",xtype:"combo",editable:false,forceSelection:true,valueField:"value",displayField:"text",store:this._yGroupOnStore},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.25,xtype:"label",text:""}]}]};this._componentArray.push(A);var D={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.37,id:this.id+"_ShowTooltip",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip"),handler:function(){E._tooltipValue.setDisabled(this.checked?false:true);}},{columnWidth:0.43,id:this.id+"_TooltipValue",xtype:"treecombo",editable:false,style:"width:170px",forceSelection:true,disabled:false,valueField:"valueDefinitionValue",displayField:"valueDefinitionText",titleField:"title",autoExpand:true,showTooltip:true,icons:this.__icons,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this._valueDefinitionStoreTooltip)}]}]};this._componentArray.push(D);},_eh_changeYGroupOn:function(){this._yGroupOn.clear();var B=this._queryTreeComboRecord(this._ySeries2,this._getTreeComboValue(this._yGroup));var C=B?B.data.valueDefinitionType:"";if("date-time"==C||"datetime"==C||"date"==C||"time"==C){if("date-time"==C||"datetime"==C){var A=new this._yGroupOnStore.recordType({value:"Years",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.year")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Quarters",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.quarter")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Months",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.month")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Weeks",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.week")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Days",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.day")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Hours",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.hour")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Minutes",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.minute")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Seconds",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.second")});this._yGroupOnStore.add(A);}else{if("date"==C){var A=new this._yGroupOnStore.recordType({value:"Years",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.year")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Quarters",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.quarter")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Months",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.month")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Weeks",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.week")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Days",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.day")});this._yGroupOnStore.add(A);}else{if("time"==C){var A=new this._yGroupOnStore.recordType({value:"Hours",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.hour")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Minutes",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.minute")});this._yGroupOnStore.add(A);var A=new this._yGroupOnStore.recordType({value:"Seconds",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.second")});this._yGroupOnStore.add(A);}}}this._yGroupOn.setSelectedIndex(0);this._yGroupOn_items.show(true);}else{this._yGroupOn_items.hide();}},_eh_changeXGroupOn:function(){this._xGroupOn.clear();this._filter_y_group();var C=this._queryTreeComboRecord(this._categoryXCombo,this._getTreeComboValue(this._categoryXCombo));var D=C?C.data.valueDefinitionType:"";var B={value:{dataType:D,category:"Unformatted"}};this.fireEvent("xaxischanged",{format:B});if(this._isXGroupOn.checked&&("date-time"==D||"datetime"==D||"date"==D||"time"==D)){if("date-time"==D||"datetime"==D){var A=new this._xGroupOnStore.recordType({value:"Years",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.year")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Quarters",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.quarter")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Months",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.month")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Weeks",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.week")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Days",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.day")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Hours",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.hour")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Minutes",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.minute")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Seconds",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.second")});this._xGroupOnStore.add(A);}else{if("date"==D){var A=new this._xGroupOnStore.recordType({value:"Years",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.year")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Quarters",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.quarter")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Months",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.month")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Weeks",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.week")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Days",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.day")});this._xGroupOnStore.add(A);}else{if("time"==D){var A=new this._xGroupOnStore.recordType({value:"Hours",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.hour")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Minutes",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.minute")});this._xGroupOnStore.add(A);var A=new this._xGroupOnStore.recordType({value:"Seconds",text:actuate.util.Utility.getLocalizedString("chartBuilder.dialog.intervalType.second")});this._xGroupOnStore.add(A);}}}this._xGroupOn.setSelectedIndex(0);this._xGroupOn_items.show(true);this._parentDialog._fixDropShadow();}else{this._xGroupOn_items.hide();this._parentDialog._fixDropShadow();}},_filter_y_group:function(){var D=this._queryTreeComboRecord(this._categoryXCombo,this._getTreeComboValue(this._categoryXCombo));if(this._isDataCubeSelected()){if(D&&D.id!="none"){var C=D.get("dimension");var B=this._valueDefinitionStoreGroupBy;B.clearFilter(true);B.filterBy(function(E){return E.get("id")!=C;});this._yGroup.refresh();if(this._getTreeComboValue(this._yGroup)){var A=this._queryTreeComboRecord(this._yGroup,this._getTreeComboValue(this._yGroup));if(A&&A.get("dimension")==C){this._yGroup.setValueById("none");}}}}},_eh_datasetComboChange:function(){this.__selectionChangedHandler();},__onSelectDataSource:function(){var A=this.__getSelectedDataSourceInfo();var B;this.__clearFilter();if(A&&A[1]){if(A[1].columns){this._xGroupOn.setValue("");this._yGroupOn_items.hide();}var C=A[1].measures;if(C){this._xGroupOn.setValue("");this._yGroupOn_items.hide();}if(A[3]&&A[3].type=="cube"){this._isXGroupOn.setDisabled(true);this._isXGroupOn.setValue(false);}else{if(A[3]&&A[3].type=="dataset"){this._isXGroupOn.setDisabled(false);this._isXGroupOn.setValue(true);}}}this._clearFilterUI=true;this._keepCubeHierarchy.setValue((this._isDataCubeSelected()||this._isDataModelSelected())?true:false);this.showCubeHierarchyOption((this._isDataCubeSelected()||this._isDataModelSelected())?true:false);this._resetAllTreeCombo();actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab.superclass.__onSelectDataSource.call(this);},_resetAllTreeCombo:function(){var F=this.__dataSourceCombo.getValue();var E={id:"none",strong:true,value:"",text:""};var D={id:"default1",value:"",strong:true,text:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip.default")};var C={id:"default2",value:"categoryData",strong:true,text:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip.categoryData")};var B={id:"default3",value:"valueSeriesName",strong:true,text:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip.valueSeriesName")};var A={id:"default4",value:"valueData",strong:true,text:actuate.util.Utility.getLocalizedString("chartBuilder.tooltip.valueData")};this._valueDefinitionStore.removeAll();this._valueDefinitionStore1.removeAll();this._valueDefinitionStore2.removeAll();this._valueDefinitionStoreTooltip.removeAll();this._valueDefinitionStoreGroupBy.removeAll();this.__addDataIntoTreeStore(E,this._valueDefinitionStore);this.__addDataIntoTreeStore(E,this._valueDefinitionStore1);this.__addDataIntoTreeStore(E,this._valueDefinitionStore2);this.__addDataIntoTreeStore(D,this._valueDefinitionStoreTooltip);this.__addDataIntoTreeStore(C,this._valueDefinitionStoreTooltip);this.__addDataIntoTreeStore(B,this._valueDefinitionStoreTooltip);this.__addDataIntoTreeStore(A,this._valueDefinitionStoreTooltip);this.__addDataIntoTreeStore(E,this._valueDefinitionStoreGroupBy);this.__setTreeStoreValues(this._valueDefinitionStore,F,["category","column","dimension"]);this.__setTreeStoreValues(this._valueDefinitionStore1,F,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStore2,F,["category","column","measure"]);this.__setTreeStoreValues(this._valueDefinitionStoreTooltip,F,["category","column"]);this.__setTreeStoreValues(this._valueDefinitionStoreGroupBy,F,["category","column","dimension"]);if(this._isDataModelSelected()){this._categoryXCombo.expandDeep=1;this._ySeries1.expandDeep=1;this._ySeries2.expandDeep=1;this._yGroup.expandDeep=1;this._tooltipValue.expandDeep=1;}else{this._categoryXCombo.expandDeep=null;this._ySeries1.expandDeep=null;this._ySeries2.expandDeep=null;this._yGroup.expandDeep=null;this._tooltipValue.expandDeep=null;}this._categoryXCombo.refresh();this._ySeries1.refresh();this._ySeries2.refresh();this._yGroup.refresh();this._tooltipValue.refresh();this._categoryXCombo.setValueById("none");this._ySeries1.setValueById("none");this._ySeries2.setValueById("none");this._yGroup.setValueById("none");this._tooltipValue.setValueById("default1");},storeUIData:function(B){var A=actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab.superclass.storeUIData.call(this);this._uiData.dataManagerSoap=A.dataManagerSoap;this._uiData.newDataMarts=A.newDataMarts;this._uiData.DataSet=A.DataSet;this._uiData.Cube=A.Cube;this._uiData.xAxisSeries={};this._uiData.xAxisSeries.name=this._getTreeComboValue(this._categoryXCombo);this._uiData.xAxisSeries.isGroupOnX=this._isXGroupOn.getValue();this._uiData.keepCubeHierarchy=this._keepCubeHierarchy.getValue();if(this._isXGroupOn.getValue()){var C=this._queryTreeComboRecord(this._categoryXCombo,this._getTreeComboValue(this._categoryXCombo));var D=C?C.data.valueDefinitionType:"";if("date-time"==D||"datetime"==D||"date"==D||"time"==D){this._uiData.xAxisSeries.groupOn=this._xGroupOn.getValue();}}this._uiData.yAxisSeries=new Array();this._uiData.yAxisSeries[0]={};this._uiData.yAxisSeries[0].name=this._getTreeComboValue(this._ySeries1);this._uiData.yAxisSeries[0].aggregate=this._agregateExpression1.getValue();this._uiData.yAxisSeries[0].groupOn=this._getTreeComboValue(this._yGroup);if(this._getTreeComboValue(this._yGroup)){var C=this._queryTreeComboRecord(this._ySeries2,this._getTreeComboValue(this._yGroup));var E=C?C.data.valueDefinitionType:"";if("date-time"==E||"datetime"==E||"date"==E||"time"==E){this._uiData.yAxisSeries[0].groupUnit=this._yGroupOn.getValue();}}this._uiData.yAxisSeries[1]={};this._uiData.yAxisSeries[1].name=this._getTreeComboValue(this._ySeries2);this._uiData.yAxisSeries[1].aggregate=this._agregateExpression2.getValue();if(this._showTooltip.getValue()){this._uiData.tooltip={};this._uiData.tooltip.tooltip=this._getTreeComboValue(this._tooltipValue);}if(B==null){B={};}B.dataTab=this._uiData;this._uiData={};return B;},loadData:function(F){this._xGroupOn_items.hide();this._yGroupOn_items.hide();if(F.Element&&F.Element.iid){this._selectedIid=F.Element.iid;}else{this._selectedIid=null;}var J=[];if(F.DataMarts){this._data=F;this._clearControls();this.__showAllDataSources(null,F.newDataMarts);}if(F.DataSet&&F.DataSet.dataMart){this.__selectDataSource(F.DataSet,"dataset");this.__onSelectDataSource();}else{if(F.Cube&&F.Cube.dataMart){this.__selectDataSource(F.Cube,"cube");this.__onSelectDataSource();}else{this._tooltipValue.setValueById("default1");}}this._eh_datasetComboChange();if(F.Filter){this._filter=F.Filter;}if(F.xAxisSeries){this.__setTreeComboValue(this._categoryXCombo,this.convertExpression(F.xAxisSeries.name));this._isXGroupOn.setValue(F.xAxisSeries.isGroupOnX);this._eh_changeXGroupOn();if(F.xAxisSeries.isGroupOnX==true){var A=this._queryTreeComboRecord(this._categoryXCombo,F.xAxisSeries.name);var E=A?A.data.valueDefinitionType:"";var H=this._xGroupOnStore.query("value",F.xAxisSeries.groupOn).itemAt(0);if(H){this._xGroupOn.setValue(F.xAxisSeries.groupOn);}}}if(F.yAxisSeries){var C=F.yAxisSeries;if(C){if(C[0]){this.__setTreeComboValue(this._ySeries1,this.convertExpression(C[0].name));if(!C[0].aggregate){if(this._isXGroupOn.checked){this._agregateExpression1.setValue("Sum");this._agregateExpression1.setDisabled(false);}else{this._agregateExpression1.setValue("");this._agregateExpression1.setDisabled(true);}}else{if(C[0].name==""){record=this._aggregationExpressionStore.getAt(0);if(record&&record.data.valueDefinitionValue){this._agregateExpression1.setValue(record.data.valueDefinitionValue);}else{this._agregateExpression1.setValue("Sum");}}else{var A=this._aggregationExpressionStore.query("value",C[0].aggregate).itemAt(0);var G=this._aggregationExpressionStore.indexOf(A);if(G>=0){this._agregateExpression1.setSelectedIndex(G);}}}if(C[0].groupOn){this.__setTreeComboValue(this._yGroup,this.convertExpression(C[0].groupOn));var A=this._queryTreeComboRecord(this._ySeries2,C[0].groupOn);var B=A?A.data.valueDefinitionType:"";if("date-time"==B||"datetime"==B||"date"==B||"time"==B){this._eh_changeYGroupOn();var H=this._yGroupOnStore.query("value",C[0].groupUnit).itemAt(0);if(H){this._yGroupOn.setValue(C[0].groupUnit);}}}}if(C[1]){this.__setTreeComboValue(this._ySeries2,this.convertExpression(C[1].name));if(this._isDataCubeSelected()&&!C[1].aggregate){this._agregateExpression2.setValue("");this._agregateExpression2.setDisabled(true);}else{if(C[1].name==""){record=this._aggregationExpressionStore.getAt(0);if(record&&record.data.valueDefinitionValue){this._agregateExpression2.setValue(record.data.valueDefinitionValue);}else{this._agregateExpression2.setValue("Sum");}}else{var A=this._aggregationExpressionStore.query("value",C[1].aggregate).itemAt(0);var G=this._aggregationExpressionStore.indexOf(A);if(G>=0){this._agregateExpression2.setSelectedIndex(G);}}}}}}if(F.tooltip){if(F.tooltip.tooltip!=undefined){this._showTooltip.setValue(true);this.__setTreeComboValue(this._tooltipValue,F.tooltip.tooltip);}else{this._showTooltip.setValue(false);}}var D=null;if(F.Base!=null&&F.Base.copyHyperlink!=null){D=F.Base.copyHyperlink=="true"?true:false;}if(this._hyperlinkCheckbox.disabled!=true){if(D==true){this._hyperlinkCheckbox.setValue(true);}else{if(D==false){this._hyperlinkCheckbox.setValue(false);}}}else{this._hyperlinkCheckbox.setValue(false);}if(F.dataManagerSoap){this._dataManagerSoap=F.dataManagerSoap;}var I=true;if(F.Base!=null&&F.Base.keepCubeHierarchy!=null){I=F.Base.keepCubeHierarchy?true:false;}else{if(F.keepCubeHierarchy!=null){I=F.keepCubeHierarchy?true:false;}}this._keepCubeHierarchy.setValue(I);},_afterHide:function(){this._clearControls();this._dataManagerSoap=null;this._uiData={};},_clearControls:function(){this.__dataSourceCombo.clear();this.__clearFilter();this._filter=null;this._clearSubControls();this._selectedIid=null;this._hyperlinkCheckbox.enable();this._hyperlinkCheckbox.setValue(true);this._clearFormatTimeLine();this._keepCubeHierarchy.setValue(false);this.showCubeHierarchyOption(false);},_clearFormatTimeLine:function(){var A={value:{dataType:"integer",category:"Unformatted"}};this.fireEvent("xaxischanged",{format:A});},_clearSubControls:function(){this._categoryXCombo.clear();this._ySeries1.clear();this._ySeries2.clear();this._yGroup.clear();this._xGroupOn.clear();this._agregateExpression2.setSelectedIndex(0);this._agregateExpression1.setSelectedIndex(0);this._tooltipValue.clear();this._yGroupOn.clear();this._agregateExpression2.setDisabled(false);this._agregateExpression1.setDisabled(false);this._isXGroupOn.setDisabled(false);this._isXGroupOn.setValue(true);this._showTooltip.setValue(true);this._xGroupOn_items.hide();this._yGroupOn_items.hide();},_changeFilterPanel:function(B){if(this._parentDialog._filterPanel){var C={};var A=this.__getSelectedDataSourceInfo();if(A){C.dataObject=[A[1],A[4],A[3]];C.dataObjectSoap=this.createDataSetSoap(A);C.dataMartSoap=this._dataManagerSoap;C.clearFilterUI=this._clearFilterUI;C.target="FlashCharts";}if(this._filter){C.Filter=this._filter;}this._parentDialog._filterPanel.loadData(C);}},_rightButtonClick:function(){var A=this._itemsTree.getSelectionModel().getSelectedNode();if(A&&!this._selectedList.contains(A.id)){this._selectedList.add([A.id,A.text]);if(A.nextSibling){A.nextSibling.select();}else{if(A.previousSibling){A.previousSibling.select();}}this._itemsTree.getRootNode().firstChild.removeChild(A);}},_leftButtonClick:function(){var A=this._selectedList.getSelectedIndex();if(A!=-1){var C=-1;if(this._selectedList.getValueAt(A+1)){C=A+1;}else{if(this._selectedList.getValueAt(A-1)){C=A-1;}}var B=this._selectedList.store[A];this._itemsTree.getRootNode().firstChild.appendChild({id:B[0],text:B[1]});this._selectedList.setSelectedIndex(C);this._selectedList.remove(B[0]);}},validate:function(){var E=this._isDataCubeSelected();var H=this._isDataSetSelected();if(!(E||H)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("flashGadgetBuilderDialog.alertTitle"),msg:actuate.util.Utility.getLocalizedString("common.dataTab.noDataSourceError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!this._getTreeComboValue(this._categoryXCombo)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.noCategoryError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!this._getTreeComboValue(this._ySeries1)){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.noYAxisError"),buttons:actuate.widget.MessageBox.OK});return false;}else{if(!this.isExpression(this._getTreeComboValue(this._ySeries1))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeries1));var A=false;if((B=="date"||B=="time"||B=="date-time")&&this._isDataCubeSelected()&&this._agregateExpression1.getValue()==""){A=true;}if(!(B=="integer"||B=="float"||B=="decimal")&&this._isXGroupOn.checked&&!(this._agregateExpression1.getValue()=="Count"||this._agregateExpression1.getValue()=="DistinctCount")&&!A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!(B=="integer"||B=="float"||B=="decimal")&&!this._isXGroupOn.checked&&!A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}}}if(this._getTreeComboValue(this._ySeries2)&&!this.isExpression(this._getTreeComboValue(this._ySeries2))){var B=this._getYAxisDataType(this._getTreeComboValue(this._ySeries2));var A=false;if((B=="date"||B=="time"||B=="date-time")&&this._isDataCubeSelected()&&this._agregateExpression2.getValue()==""){A=true;}if(!(B=="integer"||B=="float"||B=="decimal")&&this._isXGroupOn.checked&&!(this._agregateExpression2.getValue()=="Count"||this._agregateExpression2.getValue()=="DistinctCount")&&!A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}if(!(B=="integer"||B=="float"||B=="decimal")&&!this._isXGroupOn.checked&&!A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yAggregationError"),buttons:actuate.widget.MessageBox.OK});return false;}}if(this._getTreeComboValue(this._categoryXCombo)==this._getTreeComboValue(this._yGroup)&&!this.isExpression(this._getTreeComboValue(this._categoryXCombo))){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.yGroupCantEqualToX"),buttons:actuate.widget.MessageBox.OK});return false;}if(this._agregateExpression1.getValue()==""&&this._agregateExpression2.getValue()==""){var D=this._getYAxisDataType(this._getTreeComboValue(this._ySeries1));var C=this._getYAxisDataType(this._getTreeComboValue(this._ySeries2));var G=actuate.dialog.impl.Utility.getDataTypeLiteral(D);var F=actuate.dialog.impl.Utility.getDataTypeLiteral(C);if(F!=null&&G!=F){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),msg:actuate.util.Utility.getLocalizedString("chartBuilder.y1DataTypeNotEqualy2"),buttons:actuate.widget.MessageBox.OK});return false;}}return true;},_getDataSetFieldDataType:function(E){var A=this.__getSelectedDataSourceInfo();if(A){var D=A[1].columns;if(D){for(var C=0;C<D.length;C++){var B=D[C].name;if(D[C].type=="attribute"){B=D[C].fullName;}if('row["'+B+'"]'==E){return D[C].dataType;}}}}return"";},_getYAxisDataType:function(F){var A=this.__getSelectedDataSourceInfo();if(A){var E=A[1].measures;if(E){for(var C=0;C<E.length;C++){var D=E[C].measures;if(D){for(var B=0;B<D.length;B++){if('data["'+E[C].name+"/"+D[B].name+'"]'==F){return D[B].dataType;}}}}}return this._getDataSetFieldDataType(F);}return"";},_getXAxisDataType:function(H){var A=this.__getSelectedDataSourceInfo();if(A){var E=A[1].dimensions;if(E){for(var D=0;D<E.length;D++){var F=E[D].levels;if(F){for(var B=0;B<F.length;B++){if(F[B].dataType=="integer"&&F[B].attributes&&F[B].attributes.length>0){for(var G=0;G<F[B].attributes.length;G++){var C=F[B].attributes[G];if(C&&C.name=="DateTime"&&(C.dataType=="date"||C.dataType=="time"||C.dataType=="datetime"||C.dataType=="date-time")){if('data["'+C.fullName+'"]'==H){return C.dataType;}}}}if('data["'+F[B].fullName+'"]'==H){return F[B].dataType;}}}}}return this._getDataSetFieldDataType(H);}return"";},_getFieldDispalyName:function(I){var H=this.__getSelectedDataSourceInfo();if(H){var A=H[1].dimensions;if(A){for(var F=0;F<A.length;F++){var J=A[F].levels;if(J){for(var E=0;E<J.length;E++){if('data["'+J[E].fullName+'"]'==I){return J[E].displayName;}}}}}var C=H[1].measures;if(C){for(var F=0;F<C.length;F++){var G=C[F].measures;if(G){for(var E=0;E<G.length;E++){if('data["'+C[F].name+"/"+G[E].name+'"]'==I){return G[E].displayName;}}}}}var D=H[1].columns;if(D){for(var F=0;F<D.length;F++){var B=D[F].name;if(D[F].type=="attribute"){B=D[F].fullName;}if('row["'+B+'"]'==I){return D[F].displayName;}}}}return"";},createDataSetSoap:function(){var F=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var G=this.__getSelectedDataSourceInfo();var D=G[0];var J=G[1].name;var H=G[2];if(G[1].dimensions){E=actuate.util.XmlDom.createElement(F,"Cube");var B=actuate.util.XmlDom.createElement(F,"Name");var C=F.createTextNode(J);B.appendChild(C);E.appendChild(B);}else{var E=actuate.util.XmlDom.createElement(F,"DataSetDef");var B=actuate.util.XmlDom.createElement(F,"Name");var C=F.createTextNode(J);B.appendChild(C);E.appendChild(B);}var A=actuate.util.XmlDom.createElement(F,"DataSource");if(D){var K=actuate.util.XmlDom.createElement(F,"DisplayName");K.appendChild(F.createTextNode(D));A.appendChild(K);}var I=actuate.util.XmlDom.createElement(F,"DataMartName");C=F.createTextNode(H);I.appendChild(C);A.appendChild(I);E.appendChild(A);return E;},createSoapNode:function(T,H){if(H){if(this._selectedIid){H.documentElement.setAttribute("iid",this._selectedIid);}var p=actuate.util.XmlDom.createElement(H,"DataBinding");var V=actuate.util.XmlDom.createElement(H,"X-axis");var h=actuate.util.XmlDom.createElement(H,"DataMartData");V.appendChild(h);var W=actuate.util.XmlDom.createElement(H,"DataField");var O=H.createTextNode(this._getTreeComboValue(this._categoryXCombo));W.appendChild(O);h.appendChild(W);var L=actuate.util.XmlDom.createElement(H,"DataType");var O=H.createTextNode(this._getXAxisDataType(this._getTreeComboValue(this._categoryXCombo)));L.appendChild(O);h.appendChild(L);var b=actuate.util.XmlDom.createElement(H,"DisplayName");var O=H.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._categoryXCombo)));b.appendChild(O);h.appendChild(b);p.appendChild(V);var I=actuate.util.XmlDom.createElement(H,"Y-axis");var h=actuate.util.XmlDom.createElement(H,"DataMartData");I.appendChild(h);var W=actuate.util.XmlDom.createElement(H,"DataField");var O=H.createTextNode(this._getTreeComboValue(this._ySeries1));W.appendChild(O);h.appendChild(W);var L=actuate.util.XmlDom.createElement(H,"DataType");var O=H.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeries1)));L.appendChild(O);h.appendChild(L);if(this._isXGroupOn.checked){var c=actuate.util.XmlDom.createElement(H,"Aggregate");var m=actuate.util.XmlDom.createElement(H,"Func");var O=H.createTextNode(this._agregateExpression1.getValue());m.appendChild(O);c.appendChild(m);h.appendChild(c);}var b=actuate.util.XmlDom.createElement(H,"DisplayName");var O=H.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeries1)));b.appendChild(O);h.appendChild(b);p.appendChild(I);var I=actuate.util.XmlDom.createElement(H,"Y-axis");var h=actuate.util.XmlDom.createElement(H,"DataMartData");I.appendChild(h);var W=actuate.util.XmlDom.createElement(H,"DataField");var O=H.createTextNode(this._getTreeComboValue(this._ySeries2));W.appendChild(O);h.appendChild(W);var L=actuate.util.XmlDom.createElement(H,"DataType");var O=H.createTextNode(this._getYAxisDataType(this._getTreeComboValue(this._ySeries2)));L.appendChild(O);h.appendChild(L);if(this._isXGroupOn.checked){var c=actuate.util.XmlDom.createElement(H,"Aggregate");var m=actuate.util.XmlDom.createElement(H,"Func");var O=H.createTextNode(this._agregateExpression2.getValue());m.appendChild(O);c.appendChild(m);h.appendChild(c);}var b=actuate.util.XmlDom.createElement(H,"DisplayName");var O=H.createTextNode(this._getFieldDispalyName(this._getTreeComboValue(this._ySeries2)));b.appendChild(O);h.appendChild(b);p.appendChild(I);var l=this.__getSelectedDataSourceInfo();var S=l[0];var E=l[2];if(l[1].dimensions){var Q=actuate.util.XmlDom.createElement(H,"CubeName");var O=H.createTextNode(l[1].name);Q.appendChild(O);p.appendChild(Q);}if(l[1].columns){var Q=actuate.util.XmlDom.createElement(H,"DataSetName");var O=H.createTextNode(l[1].name);Q.appendChild(O);p.appendChild(Q);}var q=actuate.util.XmlDom.createElement(H,"ShowTooltip");var k=H.createTextNode(this._showTooltip.checked?"true":"false");q.appendChild(k);p.appendChild(q);var f=actuate.util.XmlDom.createElement(H,"TooltipValue");var h=actuate.util.XmlDom.createElement(H,"DataMartData");f.appendChild(h);var W=actuate.util.XmlDom.createElement(H,"DataField");var O=H.createTextNode(this._getTreeComboValue(this._tooltipValue));W.appendChild(O);h.appendChild(W);var L=actuate.util.XmlDom.createElement(H,"DataType");var d="";if(this._getTreeComboValue(this._tooltipValue)=="categoryData"){d=this._getXAxisDataType(this._getTreeComboValue(this._categoryXCombo));}else{if(this._getTreeComboValue(this._tooltipValue)=="valueSeriesName"){}else{if(this._getTreeComboValue(this._tooltipValue)=="valueData"){d=this._getYAxisDataType(this._getTreeComboValue(this._ySeries1));}else{d=this._getDataSetFieldDataType(this._getTreeComboValue(this._tooltipValue));}}}var O=H.createTextNode(d);L.appendChild(O);h.appendChild(L);p.appendChild(f);if(S){var g=actuate.util.XmlDom.createElement(H,"DataSourceName");g.appendChild(H.createTextNode(S));p.appendChild(g);}var a=actuate.util.XmlDom.createElement(H,"DataMartName");var O=H.createTextNode(E);a.appendChild(O);T.appendChild(a);var n=l[4];if(n){var A=(n.toLowerCase()=="data")?actuate.dialog.impl.constant.DataMartAccessType.LATEST:actuate.dialog.impl.constant.DataMartAccessType.TRANSIENT;var R=actuate.util.XmlDom.createElement(H,"DataMartAccessType");R.appendChild(H.createTextNode(A));T.appendChild(R);}var U;var N=T.getElementsByTagName(actuate.Constant.tag.Apperance);if(N==null||N.length==0){U=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Apperance);T.appendChild(U);}else{U=N[0];}var j=actuate.util.XmlDom.createElement(H,"GroupingAtX");var O=H.createTextNode(this._isXGroupOn.checked?"true":"false");j.appendChild(O);U.appendChild(j);if(this._isXGroupOn.checked){var D=actuate.util.XmlDom.createElement(H,"XGroupingOn");var O=H.createTextNode(this._xGroupOn.getValue());D.appendChild(O);U.appendChild(D);}var X=actuate.util.XmlDom.createElement(H,"YAxes");U.appendChild(X);var e=actuate.util.XmlDom.createElement(H,"YAxis");X.appendChild(e);X.appendChild(e);var J=actuate.util.XmlDom.createElement(H,"GroupingAtY");var O=H.createTextNode(this._getTreeComboValue(this._yGroup)?"true":"false");J.appendChild(O);U.appendChild(J);e.appendChild(J);var Z=actuate.util.XmlDom.createElement(H,"YGroupingOn");var O=H.createTextNode(this._getTreeComboValue(this._yGroup));Z.appendChild(O);U.appendChild(Z);e.appendChild(Z);var P=actuate.util.XmlDom.createElement(H,"YGroupingUnit");var O=H.createTextNode(this._yGroupOn.getValue());P.appendChild(O);U.appendChild(P);e.appendChild(P);T.appendChild(p);this.__addFilterSoap(H.documentElement);var M=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Json);H.documentElement.appendChild(M);if(this._dataManagerSoap!=null&&this._dataManagerSoap.childNodes){var K=this._dataManagerSoap.childNodes[0].data;var Y=K.substr(0,K.length-1)+",";var o=H.createTextNode(Y);M.appendChild(o);}if(this._keepCubeHierarchy.disabled==false){var F=actuate.util.Json;var i="KeepCubeHierarchy:";if(M.childNodes.length==0){i="{KeepCubeHierarchy:";}var G={};G.value=this._keepCubeHierarchy.getValue().toString();i+=F.makeMap(G)+",";var B=H.createTextNode(i);M.appendChild(B);}if(this._hyperlinkCheckbox.disabled==false){var F=actuate.util.Json;var i="UseHyperlink:";if(M.childNodes.length==0){i="{UseHyperlink:";}var G={};G.value=this._hyperlinkCheckbox.getValue().toString();i+=F.makeMap(G)+"}";var C=H.createTextNode(i);M.appendChild(C);}else{var i=null;if(M.childNodes.length!=0){i="}";}else{i="{}";}var C=H.createTextNode(i);M.appendChild(C);}}},getDataSelection:function(){var A=this.__getSelectedDataSourceInfo();if(A&&A[1]){return{dataSourceName:A[1].name,type:A[3].type};}return null;},getTrueFalseLiteral:function(A){if(!A||A=="false"){return"false";}else{return"true";}},setAggrExprVisibility:function(A){if(A){this._aggrExprLabel.show();this._agregateExpression1.show();this._agregateExpression2.show();}else{this._aggrExprLabel.hide();this._agregateExpression1.hide();this._agregateExpression2.hide();}},showCubeHierarchyOption:function(A){if(A){this._keepCubeHierarchy.show();}else{this._keepCubeHierarchy.hide();}},__addDataIntoTreeStore:function(C,A){if(A&&C&&!(C.value&&C.value.dataType=="blob")){if(A==this._valueDefinitionStore){var B=C.value;if(B&&B.type=="column"&&this._isSummaryTable&&!B.isDimension){return ;}}C.valueDefinitionValue=C;C.valueDefinitionText=C.text;C.valueDefinitionType=this._getDataType(C);C.title=this._getTooltip(C);C.dimension=this._getDimension(C);C.hasAction=this._hasAction(C);C.isDimension=this._isDimension(C);C.disabled=this._isDisabled(C,A);A.add(new A.recordType(C,C.id));}},_isDisabled:function(B,A){if(actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab.superclass._isDisabled.apply(this,arguments)){return true;}if(this._isSummaryTable&&B.type=="column"){if(A==this._valueDefinitionStore){return !B.isDimension;}else{if(A==this._valueDefinitionStore1||A==this._valueDefinitionStore2){return B.isDimension;}}}return false;},_getTreeComboValueByRecord:function(B){var A;if(B){A=B.value;}if(B&&B.value&&B.value.type){var F=B.value;switch(F.type){case"attribute":var G=F.fullName;if(G){G=G.replace(/\"/g,'\\"');A='row["'+G+'"]';}break;case"column":var C=F.name;if(C){C=C.replace(/\"/g,'\\"');A='row["'+C+'"]';}break;case"level":if(F.dataType!="blob"){var E=F.fullName;if(F.dataType=="integer"&&F.attributes&&F.attributes.length>0){for(var H=0;H<F.attributes.length;H++){var D=F.attributes[H];if(D&&D.name=="DateTime"&&(D.dataType=="date"||D.dataType=="time"||D.dataType=="datetime"||D.dataType=="date-time")){E=D.fullName;break;}}}if(E){E=E.replace(/\"/g,'\\"');A='data["'+E+'"]';}}break;case"measure":if(F.dataType!="blob"){A='data["'+F.groupName.replace(/\"/g,'\\"')+"/"+F.name.replace(/\"/g,'\\"')+'"]';}break;default:A=F.name;break;}}return A;},_eh_onBeforeSelect:function(B,A){if(A&&A.data&&A.data.valueDefinitionValue){return actuate.dialog.impl.helper.chartbuilder.ChartWithAxisDataTab.superclass._eh_onBeforeSelect.call(this,B,A.data.valueDefinitionValue.node);}return true;}});