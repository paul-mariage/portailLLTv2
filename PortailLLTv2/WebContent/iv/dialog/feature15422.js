actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.NumberFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.NumberFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.NumberFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.NumberFormattingDialog",_htmlElements:{"_category":null,"_locale":null,"_customeCode":null,"_symbolMenu":null,"_symbolPosition":null,"_decPlacesMenu":null,"_negativeNumber":null,"_symbolMenuInput":null,"_symbolPositionInput":null,"_decPlacesMenuInput":null,"_useSeparator":null,"_useSeparatorInput":null,"_negativeNumberInput":null,"_localeDIV":null,"_customePattern":null,"_customPatternInput":null,"_customePatternHelp":null},__resultSetName:null,__resultSetDataType:null,__dataFormat:null,_showLocale:false,_width:418,_height:107,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.NumberFormattingDialog.superclass.initialize.call(this,A);this._initTemplates();this.categoryMenuDiv=document.getElementById(this._htmlElements["_category"]);this.localeMenuDiv=document.getElementById(this._htmlElements["_locale"]);this.symbol=document.getElementById(this._htmlElements["_symbolMenu"]);this.symbolPosition=document.getElementById(this._htmlElements["_symbolPosition"]);this.decimalPlaces=document.getElementById(this._htmlElements["_decPlacesMenu"]);this.useSeparator=document.getElementById(this._htmlElements["_useSeparator"]);this.negativeNumber=document.getElementById(this._htmlElements["_negativeNumber"]);this.locale=document.getElementById(this._htmlElements["_localeDIV"]);this.symbolInputDiv=document.getElementById(this._htmlElements["_symbolMenuInput"]);this.symbolPositionInputDiv=document.getElementById(this._htmlElements["_symbolPositionInput"]);this.decimalPlacesInputDiv=document.getElementById(this._htmlElements["_decPlacesMenuInput"]);this.useSeparatorInput=new actuate.uiadapter.Checkbox({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,valueText:"separator",boxLabel:actuate.util.Utility.getLocalizedString("numberFormattingDialog.label.separator"),width:"195px",labelWidth:170});this.useSeparatorInput.render(this._htmlElements["_useSeparatorInput"]);this.negativeNumberInputDiv=document.getElementById(this._htmlElements["_negativeNumberInput"]);this.customCode=document.getElementById(this._htmlElements["_customeCode"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);var E=[["Unformatted",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Unformatted")],["General Number",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.General")],["Currency",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Currency")],["Fixed",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Fixed")],["Percent",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Percent")],["Scientific",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Scientific")],["Custom",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Custom")]];this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,store:E});this.categoryMenu.render(this.categoryMenuDiv);this.localeMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,valueField:"value",displayField:"text"});this.localeMenu.render(this.localeMenuDiv);this.symbolInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.symbolInput.render(this.symbolInputDiv);this.symbolPositionInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.symbolPositionInput.render(this.symbolPositionInputDiv);this.symbolPositionInput.setStore([["before",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.before")],["after",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.after")]]);this.decimalPlacesInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.decimalPlacesInput.render(this.decimalPlacesInputDiv);var D=[];for(var B=0;B<=10;B++){D.push([B,actuate.util.Utility.getLocalizedString("numberFormattingDialog.option."+B)]);}this.decimalPlacesInput.setStore(D);var C=this.negativeNumberInputDiv.getElementsByTagName("div");var F=[];for(var B=0;B<C.length;B++){F.push([C[B].getAttribute("value"),C[B].getAttribute("text")]);}this.negativeNumberInputDiv.innerHTML="";this.negativeNumberInput=new actuate.uiadapter.ComboBox({editable:false,width:200,store:F});this.negativeNumberInput.render(this.negativeNumberInputDiv);this.__local_installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<TABLE style="margin-top:1ex;" WIDTH="100%">'+'	<TR CLASS="helpHeader"> '+"		<TD>{0}</TD>"+"		<TD>{1}</TD>"+"		<TD>{2}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{3}</TD>"+"		<TD>{4}</TD>"+"		<TD>{5}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{6}</TD>"+"		<TD>{7}</TD>"+"		<TD>{8}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{9}</TD>"+"		<TD>{10}</TD>"+"		<TD>{11}"+"	</TR>"+"	<TR>"+"		<TD>{12}</TD>"+"		<TD>{13}</TD>"+"		<TD>{14}</TD>"+"	</TR>"+"</TABLE>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.decimalPlaces"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.decimalPlaces"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.decimalPlaces")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},__local_installEventHandlers:function(B){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);var A=actuate.Method.bindAsEventListener(this.__neh_keyup,this);actuate.util.Event.observe(this.symbol,"keyup",A,false);actuate.util.Event.observe(this.symbolPosition,"keyup",A,false);actuate.util.Event.observe(this.negativeNumber,"keyup",A,false);},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(0)){this.showUnformatted();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(1)){this.showGeneralNumber();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(2)){if(this.__dataFormat&&this.localeMenu&&this.localeMenu.getValue()){this.__dataFormat.symbol=actuate.dialog.locales[this.localeMenu.getValue()].symbol;this.__dataFormat.useSeparator=true;}this.showCurrency();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(3)){this.showFixed();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(4)){this.showPercent();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(5)){this.showScientific();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(6)){this.showCustom();}}}}}}}this.adjustSize();},hideAll:function(){this.symbol.style.display="none";this.symbolPosition.style.display="none";this.decimalPlaces.style.display="none";this.useSeparator.style.display="none";this.negativeNumber.style.display="none";this.useSeparatorInput.setValue(false);this.customPattern.style.display="none";this.customCode.style.display="none";this.locale.style.display="none";this.adjustSize();},showCurrency:function(){this.hideAll();this.symbol.style.display="block";this.symbolPosition.style.display="block";this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.symbolPositionInput.setSelectedIndex(0);this.useSeparatorInput.setValue(true);this._refreshCurrencyFormat();},showFixed:function(){this.hideAll();this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.useSeparatorInput.setValue(true);this._refreshCurrencyFormat();},showPercent:function(){this.hideAll();this.symbolPosition.style.display="block";this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";this.symbolPositionInput.setSelectedIndex(1);this.useSeparatorInput.setValue(true);},showScientific:function(){this.hideAll();this.decimalPlaces.style.display="block";},showUnformatted:function(){this.hideAll();},showGeneralNumber:function(){this.hideAll();},showCustom:function(){this.hideAll();this.customPattern.style.display="block";this.customCode.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this._refreshCurrencyFormat();},_localBind:function(F){if(!F){return ;}this._showLocale=F.showLocale;this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));this.showUnformatted();this.useSeparatorInput.setValue(false);this.negativeNumberInput.setSelectedIndex(0);this.decimalPlacesInput.setSelectedIndex(0);this.symbolPositionInput.setSelectedIndex(0);if(!F.targetMd){this.__resultSetName=F.selectedBinding?F.selectedBinding.name:null;this.__resultSetDataType=F.selectedBinding?F.selectedBinding.dataType:null;this.__dataFormat=F.selectedElement?F.selectedElement.dataFormat:null;}else{this.__resultSetName=F.targetMd.binding.name;this.__resultSetDataType=F.targetMd.binding.dataType;this.__dataFormat=F.targetMd.dataFormat;}if(F.total){this.total=F.total;this.targetMd=F.targetMd;}else{delete this.total;this.targetMd;}var C=actuate.dialog.locales;if(C&&this.localeMenu.getLength()<1){this.localeMenu.setStore(actuate.util.Utility.getLocaleStore());}var G=0;if(C&&this.__dataFormat&&this.__dataFormat.locale){var H=this.__dataFormat.locale;for(var J in C){if(C[J].country==H.country&&C[J].language==H.language){G=J;break;}}}this.localeMenu.setSelectedIndex(G);var A=actuate.dialog.locales[G];var I=this.__dataFormat;if(!I){return ;}var B=I.category;if(!B){I=I.NumberFormat?I.NumberFormat.numberCategoryChoice:I;if(I&&I.categoryChoice){B=I.categoryChoice.category;}}if(B==this.categoryMenu.getValueAt(0)){return ;}if(B==this.categoryMenu.getValueAt(2)){this.showCurrency();}else{if(B==this.categoryMenu.getValueAt(3)){this.showFixed();}else{if(B==this.categoryMenu.getValueAt(4)){this.showPercent();}else{if(B==this.categoryMenu.getValueAt(5)){this.showScientific();}else{if(B==this.categoryMenu.getValueAt(6)){this.showCustom();}}}}}this.categoryMenu.setValue(B);var E=I.pattern;this.customPatternInput.setValue(E==null?"":E);var K=I.decimalPlaces;if(K!=null){this.decimalPlacesInput.setValue(K);}if(I.symbolPosition||I.symbolPosition==0){this.symbolPositionInput.setValue(I.symbolPosition?"after":"before");}var D=I.negativeNumberFormat;if(D!=null){this.negativeNumberInput.setValue(D);}this.useSeparatorInput.setValue(I.useSeparator);this.adjustSize();},getFormatDetailText:function(A){if(A&&A.childNodes[0]&&A.childNodes[0].childNodes[0]){return A.childNodes[0].childNodes[0].data;}return null;},_preHide:function(){this.hideAll();},__getHelpTopic:function(){return"iv_number_formatting";},createJsonNode:function(){var D={};var G={};var A={};var C={};A.category=this.categoryMenu.getValue();A.pattern=this.customPatternInput.getValue();var F=actuate.dialog.locales[this.localeMenu.getValue()];if(F&&F.country&&F.language){A.localeInfo=F;}A.pattern=this.customPatternInput.getValue();C.categoryChoice=A;C.decimalPlaces=this.decimalPlacesInput.getValue();C.symbol=this.symbolInput.getValue()||"";var E="";if(this.__dataFormat){E=this.__dataFormat.roundingMode||"";}C.roundingMode=E;C.symbolPosition=this.symbolPositionInput.getValue();C.negativeNumberFormat=this.negativeNumberInput.getValue();C.useSepartor=this.useSeparatorInput.getValue()?"true":"false";var B=this.__resultSetDataType?this.__resultSetDataType:"";if("decimal"==this.__resultSetDataType){B="Decimal";}else{if("float"==this.__resultSetDataType){B="Float";}else{if("integer"==this.__resultSetDataType){B="Integer";}}}D.resultSetDataType=B;if(this.__resultSetName||this.__resultSetName==""){D.resultSetName=this.__resultSetName;}G.numberCategoryChoice=C;D[actuate.Constant.tag.NumberFormat]=G;return{dataFormat:D};},createSoapNode:function(){var W=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var K=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NumberFormat);W.documentElement.appendChild(K);var E=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NumberCategoryChoice);K.appendChild(E);var J=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.CATEGORYCHOICE);E.appendChild(J);var C=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.CATEGORY);J.appendChild(C);var M=W.createTextNode(this.categoryMenu.getValue());C.appendChild(M);var V=actuate.dialog.locales[this.localeMenu.getValue()];if(V&&V.country&&V.language){var Q=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.LOCALEINFO);var S=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.COUNTRY);var T=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.LANGUAGE);S.appendChild(W.createTextNode(V.country));T.appendChild(W.createTextNode(V.language));Q.appendChild(S);Q.appendChild(T);J.appendChild(Q);}var L=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.DecimalPlaces);E.appendChild(L);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);L.appendChild(H);var M=W.createTextNode(this.decimalPlacesInput.getValue());H.appendChild(M);var Y=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Symbol);E.appendChild(Y);var U=this.symbolInput.getValue();var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);Y.appendChild(H);var M=W.createTextNode(U||"");H.appendChild(M);var G=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.RoundingMode);E.appendChild(G);var D="";if(this.__dataFormat){D=this.__dataFormat.roundingMode||"";}var M=W.createTextNode(D);G.appendChild(M);var I=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.SymbolPosition);E.appendChild(I);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);I.appendChild(H);var M=W.createTextNode(this.symbolPositionInput.getValue());H.appendChild(M);var P=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NegativeNumberFormat);E.appendChild(P);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);P.appendChild(H);var M=W.createTextNode(this.negativeNumberInput.getValue());H.appendChild(M);var A=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.UseSepartor);E.appendChild(A);if(this.useSeparatorInput.getValue()){var M=W.createTextNode("true");}else{var M=W.createTextNode("false");}A.appendChild(M);var B=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.PATTERN);J.appendChild(B);var M=W.createTextNode(this.customPatternInput.getValue());B.appendChild(M);var O=actuate.util.XmlDom.createElement(W,"ResultSetDataType");W.documentElement.appendChild(O);var N=this.__resultSetDataType?this.__resultSetDataType:"";if("decimal"==this.__resultSetDataType){N="Decimal";}else{if("float"==this.__resultSetDataType){N="Float";}else{if("integer"==this.__resultSetDataType){N="Integer";}}}var R=W.createTextNode(N);O.appendChild(R);if(this.__resultSetName||this.__resultSetName==""){var F=actuate.util.XmlDom.createElement(W,"ResultSetName");W.documentElement.appendChild(F);var X=W.createTextNode(this.__resultSetName);F.appendChild(X);}return W.documentElement;},_refreshCurrencyFormat:function(){var C=actuate.dialog.currencySymbols;var B=[];for(var D in C){B.push([C[D],C[D]]);}this.symbolInput.setStore(B);var A;var F;if(this.__dataFormat){A=this.__dataFormat.symbol;F=this.__dataFormat.useSeparator?true:false;}this.symbolInput.setValue(A?A:"");this.useSeparatorInput.setValue(F?true:false);var E;if(this.__dataFormat&&this.__dataFormat.decimalPlaces){E=this.__dataFormat.decimalPlaces;}else{if(this.localeMenu&&this.localeMenu.getValue()){E=actuate.dialog.locales[this.localeMenu.getValue()].decimalPlaces;}}if(E&&this.decimalPlacesInput.containsKey(E)){this.decimalPlacesInput.setValue(E);}else{this.decimalPlacesInput.setValue(this.decimalPlacesInput.getValueAt(0));}},noComma:""});