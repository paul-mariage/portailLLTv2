actuate.util.Package.define("actuate.dialog.impl.helper.selectorbuilder");actuate.dialog.impl.helper.selectorbuilder.SelectorSliderFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.selectorbuilder.SelectorFormatTab,{_classname:"actuate.dialog.SelectorSliderFormatTab",_precisionLimit:3,_numberFormat:null,_parameterBased:false,initialize:function(){actuate.dialog.impl.helper.selectorbuilder.SelectorSliderFormatTab.superclass.initialize.apply(this);this._numberFormat=actuate.util.Utility.getNumberFormatter();},_initPanel:function(){var E=this;var F=[];var D={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.orientation"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{id:"actuate_dialog_selectorSliderFormatTab_orientation_h",columnWidth:0.45,xtype:"radio",name:this._classname+"orientationRadio",valueText:"horizontal",boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.orientation.horizontal"),checked:true},{id:"actuate_dialog_selectorSliderFormatTab_orientation_v",columnWidth:0.45,xtype:"radio",name:this._classname+"orientationRadio",valueText:"vertical",boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.orientation.vertical")}]}]};var C={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.thumb"),checkboxToggle:false,defaults:{border:false,header:false,bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{layout:"column",items:[{id:"actuate_dialog_selectorSliderFormatTab_thumb_s",columnWidth:0.45,xtype:"radio",name:this._classname+"thumbRadio",valueText:"single",boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.thumb.single"),checked:true},{id:"actuate_dialog_selectorSliderFormatTab_thumb_d",columnWidth:0.45,xtype:"radio",name:this._classname+"thumbRadio",valueText:"dual",boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.thumb.dual")}]},{layout:"form",items:[{id:"actuate_dialog_selectorSliderFormatTab_thumb_default1",xtype:"textfield",fieldLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.values.default1")}]},{layout:"form",items:[{id:"actuate_dialog_selectorSliderFormatTab_thumb_default2",xtype:"textfield",fieldLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.values.default2")}]}]};var B={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.values"),checkboxToggle:false,defaults:{layout:"form",border:false,header:false,bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{id:"actuate_dialog_selectorSliderFormatTab_range_auto",xtype:"checkbox",hideLabel:true,boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.range.auto"),checked:true,hidden:true}]},{items:[{id:"actuate_dialog_selectorSliderFormatTab_range_min",xtype:"textfield",fieldLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.minValue")}]},{items:[{id:"actuate_dialog_selectorSliderFormatTab_range_max",xtype:"textfield",fieldLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.maxValue")}]},this.__getFormattingComponent()]};var A={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.tickMarks"),checkboxToggle:false,defaults:{layout:"form",border:false,header:false,bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}},expand:function(){if(E._parentDialog&&E._parentDialog.adjustSize){E._parentDialog.adjustSize();}}},items:[{items:[{id:"actuate_dialog_selectorSliderFormatTab_tick_show",xtype:"checkbox",hideLabel:true,boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.tickMarks.show"),checked:true}]},{items:[{id:"actuate_dialog_selectorSliderFormatTab_tick_auto",xtype:"checkbox",hideLabel:true,checked:true,boxLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.tickMarks.auto"),hidden:true},{id:"actuate_dialog_selectorSliderFormatTab_tick_interval",xtype:"textfield",fieldLabel:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.tickMarks.interval"),hideLabel:false}]}]};F.push(D);F.push(C);F.push(B);F.push(A);this._panel=new actuate.widget.panel.Panel({header:false,plain:true,border:false,title:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.format"),autoHeight:true,items:F});this._rdiHorizontal=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_orientation_h");this._rdiVertical=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_orientation_v");this._rdiSingle=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_thumb_s");this._rdiDual=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_thumb_d");this._txtDefaultValue1=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_thumb_default1");this._txtDefaultValue2=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_thumb_default2");this._chkAutoRange=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_range_auto");this._txtMinValue=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_range_min");this._txtMaxValue=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_range_max");this._chkAutoTick=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_tick_auto");this._txtInterval=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_tick_interval");this._chkShowTicks=actuate.widget.ComponentMgr.get("actuate_dialog_selectorSliderFormatTab_tick_show");this._initializeControlStatus();this._registerEvents();},_registerEvents:function(){this._formatChanged_c=actuate.Method.bind(this._formatChanged,this);this._rdiSingle.registerEventHandler("check",actuate.Method.bind(this._thumbTypeUpdated,this),false);this._rdiDual.registerEventHandler("check",actuate.Method.bind(this._thumbTypeUpdated,this),false);this._chkAutoRange.registerEventHandler("check",actuate.Method.bind(this._autoRangeUpdated,this),false);this._chkAutoTick.registerEventHandler("check",actuate.Method.bind(this._autoTickUpdated,this),false);this.on("fieldchanged",actuate.Method.bind(this._noBindingChangedHandler,this));},_thumbTypeUpdated:function(){if(this._parentDialog&&this._parentDialog._consumer&&this._parentDialog._consumer._service&&this._parentDialog._consumer._service._instanceId){if(this._rdiDual.getValue()){if(this._txtDefaultValue1.disabled){this._txtDefaultValue2.disable();}else{this._txtDefaultValue2.enable();}}else{this._txtDefaultValue2.disable();}}else{this._txtDefaultValue1.enable();if(this._rdiDual.getValue()){this._txtDefaultValue2.enable();}else{this._txtDefaultValue2.disable();}}this._formatChanged();},_autoRangeUpdated:function(){this._chkAutoRange.hide();this._chkAutoRange.setDisabled(true);if(this._chkAutoRange.getValue()==true){this._txtMinValue.disable();this._txtMaxValue.disable();}else{this._txtMinValue.enable();this._txtMaxValue.enable();}},_autoTickUpdated:function(){this._chkAutoTick.hide();this._chkAutoTick.setDisabled(true);if(this._chkAutoTick.getValue()==true){this._txtInterval.disable();}else{this._txtInterval.enable();}},_initializeControlStatus:function(){this._thumbTypeUpdated();this._autoRangeUpdated();this._autoTickUpdated();},loadData:function(F){actuate.dialog.impl.helper.selectorbuilder.SelectorSliderFormatTab.superclass.loadData.apply(this,arguments);if(F&&F.parameter){this._txtDefaultValue1.setValue(F.parameter.defaultValue);}if(!F||!F.Base||F.Base.type!="slider"){return ;}var H=F.Base.bindings;var C=F.Base.dataType;if(!C){var B=this._parentDialog.getPanel("actuate_dialog_impl_helper_selectorbuilder_selectorDataTab");if(B){C=B.getSelectedDataType();}}this._dataType=C;var G=F.Format;if(!G){this._setDefaultValues();return ;}var E=(actuate.util.Utility.isNumericalType(C));var A=G.orientation;if(A=="vertical"){this._rdiVertical.setValue(true,true);}else{this._rdiHorizontal.setValue(true,true);}var D=G.thumbOption;if(G.defaultValue1!=undefined){if(E){this._txtDefaultValue1.setValue(this._numberFormat.toString(G.defaultValue1));}else{this._txtDefaultValue1.setValue(G.defaultValue1);}}else{this._txtDefaultValue1.setValue("");}if(D=="dual"){this._rdiDual.setValue(true,true);if(G.defaultValue2!=undefined){if(E){this._txtDefaultValue2.setValue(this._numberFormat.toString(G.defaultValue2));}else{this._txtDefaultValue2.setValue(G.defaultValue2);}}else{this._txtDefaultValue2.setValue("");}this._txtDefaultValue2.setDisabled(false);}else{this._rdiSingle.setValue(true,true);this._txtDefaultValue2.setValue(null);this._txtDefaultValue2.setDisabled(true);}if(H){this._chkAutoRange.setValue(true,true);this._txtMinValue.setValue(null);this._txtMaxValue.setValue(null);this._chkAutoTick.setValue(true,true);this._txtInterval.setValue(null);}else{this._chkAutoRange.setValue(false,true);this._txtMinValue.setValue(this._numberFormat.toString(G.minValue));this._txtMaxValue.setValue(this._numberFormat.toString(G.maxValue));this._chkAutoTick.setValue(false,true);this._txtInterval.setValue(this._numberFormat.toString(G.interval));}this._noBindingChangedHandler({noBinding:!H});this._chkShowTicks.setValue(G.showTicks?true:false);if(this._parentDialog._consumer&&this._parentDialog._consumer._service._instanceId){if(this._txtDefaultValue1&&this._txtDefaultValue1.getValue()){this._txtDefaultValue1.disable();}if((this._txtDefaultValue2&&this._txtDefaultValue2.getValue())||(this._txtDefaultValue1&&this._txtDefaultValue1.getValue())){this._txtDefaultValue2.disable();}}},_setDefaultValues:function(){this._rdiHorizontal.setValue(true,true);this._rdiSingle.setValue(true,true);this._txtDefaultValue1.setValue(null);this._txtDefaultValue2.setValue(null);this._chkAutoRange.setValue(true,true);this._chkShowTicks.setValue(true,true);this._txtMinValue.setValue(null);this._txtMaxValue.setValue(null);this._chkAutoTick.setValue(true,true);this._txtInterval.setValue(null);this._thumbTypeUpdated();this._autoRangeUpdated();this._autoTickUpdated();},_formatChanged:function(){this.fireEvent("change",this);},validate:function(){var G=actuate.util.Utility;var H=null;var J=null;var C=this._parentDialog.getPanel("actuate_dialog_impl_helper_selectorbuilder_selectorDataTab");var L=this._txtDefaultValue1.getValue();var K=this._txtDefaultValue2.getValue();if(C){J=C.getSelectedDataType();}if(!actuate.dialog.impl.helper.selectorbuilder.SelectorSliderFormatTab.superclass.validate()){H=G.getLocalizedString("Please check the invalid values in Format page.");}else{if(!this._chkAutoRange.getValue()){var I=actuate.util.String.trim(this._txtMinValue.getValue());var F=actuate.util.String.trim(this._txtMaxValue.getValue());if(I==""||F==""){H=G.getLocalizedString("selectorBuilder.formatTab.minMaxValue.errorMessage1");}else{if((!(this._numberFormat.isNumber(I)&&this._numberFormat.isNumber(F)))){H=G.getLocalizedString("selectorBuilder.formatTab.minMaxValue.errorMessage2");}else{I=this._numberFormat.parse(I);F=this._numberFormat.parse(F);if(I>F){H=G.getLocalizedString("selectorBuilder.formatTab.minMaxValue.errorMessage3");}if(this._numberFormat.getNumberPrecision(I)>this._precisionLimit||this._numberFormat.getNumberPrecision(F)>this._precisionLimit){H=G.getLocalizedString("selectorBuilder.formatTab.minMaxValue.precisionLimit",this._precisionLimit);}}}}}if(!H&&!this._chkAutoTick.getValue()){var B=actuate.util.String.trim(this._txtInterval.getValue());if(B==""){H=G.getLocalizedString("selectorBuilder.formatTab.interval.errorMessage2");}else{if((!this._numberFormat.isNumber(B))||(this._numberFormat.parse(B)<=0)){H=G.getLocalizedString("selectorBuilder.formatTab.interval.errorMessage");}else{if(this._numberFormat.getNumberPrecision(B)>this._precisionLimit){H=G.getLocalizedString("selectorBuilder.formatTab.minMaxValue.precisionLimit",this._precisionLimit);}}}}if(!H){if(!this.isMultiValues()){var A=this._validateDefaultValue(J,L);if(A==true){H=null;}else{H=A;}}else{var E=this._validateDefaultValue(J,L);var D=this._validateDefaultValue(J,K);if(E==true){E=null;}if(D==true){D=null;}if(E){H=E;}else{if(D){H=D;}}}}if(H!=null){actuate.widget.MessageBox.alert(G.getLocalizedString("selectorDialog.alertTitle"),H);return false;}return true;},_validateDefaultValue:function(A,B){var C=null;if(!B){return C;}else{if(A==="integer"){C=actuate.dialog.impl.Utility.validateInteger(B,actuate.dialog.impl.Utility.POSITIVE);}else{if(A==="float"||A==="double"||A==="decimal"){C=actuate.dialog.impl.Utility.validateNumber(B,actuate.dialog.impl.Utility.POSITIVE);}}}return C;},createJsonData:function(){var D={};D.orientation=this._rdiVertical.getGroupValue();D.thumbOption=this._rdiDual.getGroupValue();var C=null;var B=this._parentDialog.getPanel("actuate_dialog_impl_helper_selectorbuilder_selectorDataTab");if(B){C=B.getSelectedDataType();}if(!this._rdiDual.getValue()&&this._txtDefaultValue2.getValue()){this._txtDefaultValue2.setValue("");}var H=this._txtDefaultValue1.getValue();var G=this._txtDefaultValue2.getValue();if(actuate.util.Utility.isNumericalType(C)){if(H!=""){H=this._numberFormat.parse(H);}if(G!=""){G=this._numberFormat.parse(G);}}D.defaultValue1=H;D.defaultValue2=G;D.autoRange=this._chkAutoRange.getValue();D.autoTick=this._chkAutoTick.getValue();D.showTicks=this._chkShowTicks.getValue();if(!D.autoRange){var E=actuate.util.String.trim(this._txtMinValue.getValue());var F=actuate.util.String.trim(this._txtMaxValue.getValue());if(E!=""){D.minValue=this._numberFormat.parse(E);}if(F!=""){D.maxValue=this._numberFormat.parse(F);}}if(!D.autoTick){var A=actuate.util.String.trim(this._txtInterval.getValue());if(A!=""){D.interval=this._numberFormat.parse(A);}}return{Format:D};},isMultiValues:function(){return(this._rdiDual.getGroupValue()=="dual");},_updateThumbControlVisibility:function(A){if(this._parameterBased||(!actuate.util.Utility.isNumericalType(this._dataType)&&!actuate.util.Utility.isDateTime(this._dataType))){this._rdiSingle.setValue(true,true);this._rdiSingle.hide();this._rdiDual.setValue(false,true);this._rdiDual.hide();this._txtDefaultValue2.hide();}else{this._rdiSingle.show();this._rdiDual.show();this._txtDefaultValue2.show();}},setParameterBased:function(A){this._parameterBased=A;this._updateThumbControlVisibility();},setDataType:function(A){this._dataType=A;this._updateThumbControlVisibility();},setControlType:function(A){if(A=="text-box"){this._chkAutoRange.setValue(false);this._chkAutoRange.hide();}else{}this._setDefaultValues();},_noBindingChangedHandler:function(B){var A=B&&B.noBinding;this._chkAutoRange.setValue(!A,true);this._txtMinValue.setDisabled(!A);this._txtMaxValue.setDisabled(!A);this._chkAutoTick.setValue(!A,true);this._txtInterval.setDisabled(!A);},_dataFormatHandler:function(A){if(A){A.type="numberformat";}actuate.dialog.impl.helper.selectorbuilder.SelectorSliderFormatTab.superclass._dataFormatHandler.apply(this,arguments);}});