actuate.util.Package.define("actuate.dialog.impl.helper.crosstabbuilder");actuate.dialog.impl.helper.crosstabbuilder.CrosstabDateGroupingDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_classname:"actuate.dialog.impl.helper.crosstabbuilder.CrosstabDateGroupingDialog",dateTimeLevelName:{YEAR:"Year",QUARTER:"Quarter",MONTH:"Month",WEEKOFMONTH:"WeekOfMonth",WEEKOFYEAR:"WeekOfYear",DAYOFWEEK:"DayOfWeek",DAYOFMONTH:"DayOfMonth",DAYOFYEAR:"DayOfYear",HOUR:"Hour",MINUTE:"Minute",SECOND:"Second"},initialize:function(){this._util=actuate.util.Utility;this._title=this._util.getLocalizedString("crosstabDateGroupingDialog.caption");var B=this._getId(this._classname);this._applyHtmlElementsNames(B);actuate.dialog.impl.helper.crosstabbuilder.CrosstabDateGroupingDialog.superclass.initialize.call(this,B,350);var A=[{type:0,iconCls:"actuate_column_image"}];this._tree=new actuate.widget.tree.TreePanel({autoScroll:true,height:220,rootVisible:true,containerScroll:true,cls:"actuate_crosstab_dateGroup_dialog",dataStore:new actuate.widget.tree.TreeStore([]),selModel:new actuate.widget.tree.MultiSelectionModel(),icons:A});this._window.add(this._tree);this._dateTimeGroup=[[this.dateTimeLevelName.YEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.year")],[this.dateTimeLevelName.QUARTER,this._util.getLocalizedString("crosstabDateGroupingDialog.text.quarter")],[this.dateTimeLevelName.MONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.month")],[this.dateTimeLevelName.WEEKOFMONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.weekofmonth")],[this.dateTimeLevelName.WEEKOFYEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.weekofyear")],[this.dateTimeLevelName.DAYOFWEEK,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofweek")],[this.dateTimeLevelName.DAYOFMONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofmonth")],[this.dateTimeLevelName.DAYOFYEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofyear")],[this.dateTimeLevelName.HOUR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.hour")],[this.dateTimeLevelName.MINUTE,this._util.getLocalizedString("crosstabDateGroupingDialog.text.minute")],[this.dateTimeLevelName.SECOND,this._util.getLocalizedString("crosstabDateGroupingDialog.text.second")]];this._dateGroup=[[this.dateTimeLevelName.YEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.year")],[this.dateTimeLevelName.QUARTER,this._util.getLocalizedString("crosstabDateGroupingDialog.text.quarter")],[this.dateTimeLevelName.MONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.month")],[this.dateTimeLevelName.WEEKOFMONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.weekofmonth")],[this.dateTimeLevelName.WEEKOFYEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.weekofyear")],[this.dateTimeLevelName.DAYOFWEEK,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofweek")],[this.dateTimeLevelName.DAYOFMONTH,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofmonth")],[this.dateTimeLevelName.DAYOFYEAR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.dayofyear")]];this._timeGroup=[[this.dateTimeLevelName.HOUR,this._util.getLocalizedString("crosstabDateGroupingDialog.text.hour")],[this.dateTimeLevelName.MINUTE,this._util.getLocalizedString("crosstabDateGroupingDialog.text.minute")],[this.dateTimeLevelName.SECOND,this._util.getLocalizedString("crosstabDateGroupingDialog.text.second")]];},_bind:function(B,A){this.node=A;this._localBind(B);},_localBind:function(D){if(D){this._dateTimeColumn=D;var A=D.name;var I=D.dataType;var F=D.timeLevels;var K=null;if("date-time"==I){K=this._dateTimeGroup;}else{if("date"==I){K=this._dateGroup;}else{if("time"==I){K=this._timeGroup;}}}var B=this._tree.getRootNode();B.setText(A);B.clear();if(K){var G=B;for(var E=0,H=K.length;E<H;E++){var L=K[E];var J=false;if(this._util.arrayContains(F,L[0])){J=true;}var C=new actuate.widget.tree.TreeNode({checked:J,iconCls:"actuate-hide-display",text:L[1],value:L[0]});G.appendChild(C);G=C;}}B.expand(true);this._updateTimeLevels();}return false;},_okPress:function(){this._updateTimeLevels();this._hide();},_updateTimeLevels:function(){var E=[];var C=this._tree.getRootNode();var B=C.text;var A=C;while(A!=null&&A.hasChildNodes()){var D=A.firstChild;if(!D){break;}if(D.ui.checkbox&&D.ui.checkbox.checked){E.push(D.attributes.value);}A=D;}this.node.attributes.timeLevels=E;},__getHelpTopic:function(){return null;},_noComma:null});