actuate.util.Package.define("actuate.dialog.impl.helper.chartbuilder");actuate.dialog.impl.helper.chartbuilder.ChartTypeTab=actuate.Class.create();actuate.dialog.impl.helper.chartbuilder.ChartTypeTab.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractTabDialog(),{_classname:"actuate.dialog.impl.helper.chartbuilder.ChartTypeTab",CHART_TYPE_PIE:"Pie",CHART_TYPE_DOUGHNUT:"Doughnut",CHART_TYPE_BAR:"Bar",CHART_TYPE_LINE:"Line",CHART_TYPE_COLUMN:"Column",CHART_TYPE_SCATTER:"Scatter",CHART_TYPE_AREA:"Area",CHART_TYPE_STOCK:"Stock",CHART_TYPE_RADAR:"Radar",CHART_TYPE_BUBBLE:"Bubble",CHART_TYPE_DIFFERENCE:"Difference",CHART_TYPE_GANTT:"Gantt",CHART_TYPE_PYRAMID:"Pyramid",CHART_TYPE_METER:"Meter",CHART_SUBTYPE_TEXT_STACKED:"Side-by-Side",CHART_SUBTYPE_TEXT_STACKED:"Stacked",CHART_SUBTYPE_TEXT_STACKED:"Stacked",CHART_SETTING_TEXT_PERCENTSTACKED:"Percent Stacked",CHART_SETTING_TEXT_STANDARDMETERCHART:"Standard Meter Chart",CHART_SETTING_TEXT_STANDARD:"Standard",CHART_SETTING_TEXT_BARSTICK:"Bar Stick",_buttons:[],_flashChart:null,initialize:function(){this.id=this._getId(this._classname);this._title=actuate.util.Utility.getLocalizedString("chartBuilder.type");actuate.dialog.impl.helper.AbstractTabDialog.prototype.initialize.call(this);var A=actuate.widget.ComponentMgr.get(this.id+"_column");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_bar");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_line");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_pie");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_doughnut");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_scatter");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_area");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_stock");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_radar");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_difference");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_gantt");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_bubble");this._buttons.push(A);var A=actuate.widget.ComponentMgr.get(this.id+"_meter");this._buttons.push(A);},_select_type:function(){},updateType:function(B){for(var A=0;A<this._buttons.length;A++){if(this._buttons[A].chartType==B){if(this._buttons[A].selectedIcon){this._buttons[A]._updateIcon(this._buttons[A].selectedIcon);}this._buttons[A].selected=true;}else{if(this._buttons[A].icon){this._buttons[A]._updateIcon(this._buttons[A].icon);}this._buttons[A].selected=false;}}},_initContent:function(){var D=actuate.getDefaultIportalUrl()+"iportal/jsapi/actuate/dialog/images/dashboard/";var C=this;this._componentArray=[];var B=function(){for(var E=0;E<C._buttons.length;E++){if(C._buttons[E].icon){C._buttons[E]._updateIcon(C._buttons[E].icon);}C._buttons[E].selected=false;}if(this.selectedIcon){this._updateIcon(this.selectedIcon);}this.selected=true;C._propagateTypeEvent(arguments[0].chartType);};var A={autoHeight:true,border:false,defaults:{border:false,header:false,layout:"column",height:90,bodyStyle:"padding:2px 4px 2px 4px"},items:[{items:[{id:this.id+"_column",chartType:actuate.Constant.ChartType.COLUMN_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.columnChart"),icon:D+"/off-columnSide2D.gif",overIcon:D+"hover-columnSide2D.gif",selectedIcon:D+"on-columnSide2D.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_bar",chartType:actuate.Constant.ChartType.BAR_CHART,columnWidth:0.25,icon:D+"off-barSide2D.gif",overIcon:D+"hover-barSide2D.gif",selectedIcon:D+"on-barSide2D.gif",cls:"flashgadget-type-icon",xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.barChart"),handler:B},{id:this.id+"_line",chartType:actuate.Constant.ChartType.LINE_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.lineChart"),icon:D+"off-line.gif",overIcon:D+"hover-line.gif",selectedIcon:D+"on-line.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_pie",chartType:actuate.Constant.ChartType.PIE_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.pieChart"),icon:D+"off-pie2D.gif",overIcon:D+"hover-pie2D.gif",selectedIcon:D+"on-pie2D.gif",cls:"flashgadget-type-icon",handler:B}]},{items:[{id:this.id+"_doughnut",chartType:actuate.Constant.ChartType.DONUT_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.doughnutChart"),icon:D+"off-doughnut2D.gif",overIcon:D+"hover-doughnut2D.gif",selectedIcon:D+"on-doughnut2D.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_scatter",chartType:actuate.Constant.ChartType.SCATTER_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.scatterChart"),icon:D+"off-scatter.gif",overIcon:D+"hover-scatter.gif",selectedIcon:D+"on-scatter.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_area",chartType:actuate.Constant.ChartType.AREA_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.areaChart"),icon:D+"off-area.gif",overIcon:D+"hover-area.gif",selectedIcon:D+"on-area.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_stock",chartType:actuate.Constant.ChartType.STOCK_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.stockChart"),icon:D+"off-stock.gif",overIcon:D+"hover-stock.gif",selectedIcon:D+"on-stock.gif",cls:"flashgadget-type-icon",handler:B}]},{items:[{id:this.id+"_difference",chartType:actuate.Constant.ChartType.DIFFERENCE_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.differenceChart"),icon:D+"off-difference.gif",overIcon:D+"hover-difference.gif",selectedIcon:D+"on-difference.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_gantt",chartType:actuate.Constant.ChartType.GANTT_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.ganttChart"),icon:D+"off-gantt.gif",overIcon:D+"hover-gantt.gif",selectedIcon:D+"on-gantt.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_radar",chartType:actuate.Constant.ChartType.RADAR_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.radarChart"),icon:D+"off-radar.gif",overIcon:D+"hover-radar.gif",selectedIcon:D+"on-radar.gif",cls:"flashgadget-type-icon",handler:B},{id:this.id+"_bubble",chartType:actuate.Constant.ChartType.BUBBLE_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.bubbleChart"),icon:D+"off-bubble.gif",overIcon:D+"hover-bubble.gif",selectedIcon:D+"on-bubble.gif",cls:"flashgadget-type-icon",handler:B}]},{items:[{id:this.id+"_meter",chartType:actuate.Constant.ChartType.METER_CHART,columnWidth:0.25,xtype:"button",text:actuate.util.Utility.getLocalizedString("chartBuilder.meterChart"),icon:D+"off-meter.gif",overIcon:D+"hover-meter.gif",selectedIcon:D+"on-meter.gif",cls:"flashgadget-type-icon",handler:B}]}]};this._componentArray.push(A);},loadData:function(E,B){this._isFlashChart=E._isFlashChart;for(var D=0;D<this._buttons.length;D++){this._buttons[D].enable();}var C=actuate.widget.ComponentMgr.get(this.id+"_scatter");if(this._isFlashChart){C.setVisibility(false);}else{C.setVisibility(true);}var C=actuate.widget.ComponentMgr.get(this.id+"_area");if(this._isFlashChart){C.setVisibility(false);}else{C.setVisibility(true);}if(this._isFlashChart){this._setButtonVisibility(this.id+"_bubble",false);this._setButtonVisibility(this.id+"_difference",false);this._setButtonVisibility(this.id+"_gantt",false);this._setButtonVisibility(this.id+"_stock",false);this._setButtonVisibility(this.id+"_radar",false);this._setButtonVisibility(this.id+"_meter",false);}else{this._setButtonVisibility(this.id+"_bubble",true);this._setButtonVisibility(this.id+"_difference",true);this._setButtonVisibility(this.id+"_gantt",true);this._setButtonVisibility(this.id+"_stock",true);this._setButtonVisibility(this.id+"_radar",true);this._hideMeterChart(true);this._setButtonWidth(this.id+"_column",0.25);this._setButtonWidth(this.id+"_bar",0.25);this._setButtonWidth(this.id+"_line",0.25);this._setButtonWidth(this.id+"_pie",0.25);this._setButtonWidth(this.id+"_doughnut",0.25);}this._flashChart=E[actuate.model.Constant.MetadataType.ELEMENT];if(this._flashChart){for(var D=0;D<this._buttons.length;D++){if(this._buttons[D].chartType==B){if(this._buttons[D].selectedIcon){this._buttons[D]._updateIcon(this._buttons[D].selectedIcon);}this._buttons[D].selected=true;}else{var A=[];if(this._flashChart.getCompatibleTypes){A=this._flashChart.getCompatibleTypes();if(A){if(A.contains(this._buttons[D].id)){this._buttons[D].enable();}else{this._buttons[D].disable();}}}if(this._buttons[D].icon){this._buttons[D]._updateIcon(this._buttons[D].icon);}this._buttons[D].selected=false;}}}this._parentDialog._okBtn.enable();},validate:function(){return true;},_setButtonVisibility:function(C,A){var B=actuate.widget.ComponentMgr.get(C);B.setVisibility(A);},_setButtonWidth:function(C,B){var A=actuate.widget.ComponentMgr.get(C);A.columnWidth=B;},_hideMeterChart:function(B){var A=actuate.widget.ComponentMgr.get(this.id+"_meter");if(B){if(this._buttons.length==13){A.ownerCt.hide();}else{A.setVisibility(false);}}else{A.setVisibility(true);A.ownerCt.show();A.ownerCt._doLayout();}},_propagateTypeEvent:function(B){if(B){this._parentDialog._okBtn.disable();if(this._parentDialog.storeUIData){this._parentDialog.storeUIData();}var A={activeTab:true,componentData:{category:this._isFlashChart?"FlashCharts":""}};switch(B){case actuate.Constant.ChartType.COLUMN_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.COLUMN_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_COLUMN_CHART_BUILDER,A);break;case actuate.Constant.ChartType.BAR_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.BAR_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_BAR_CHART_BUILDER,A);break;case actuate.Constant.ChartType.LINE_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.LINE_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_LINE_CHART_BUILDER,A);break;case actuate.Constant.ChartType.PIE_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.PIE_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_PIE_CHART_BUILDER,A);break;case actuate.Constant.ChartType.DONUT_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.DONUT_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_DOUGHNUT_CHART_BUILDER,A);break;case actuate.Constant.ChartType.SCATTER_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.SCATTER_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_SCATTER_CHART_BUILDER,A);break;case actuate.Constant.ChartType.AREA_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.AREA_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_AREA_CHART_BUILDER,A);break;case actuate.Constant.ChartType.BUBBLE_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.BUBBLE_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_BUBBLE_CHART_BUILDER,A);break;case actuate.Constant.ChartType.DIFFERENCE_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.DIFFERENCE_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_DIFFERENCE_CHART_BUILDER,A);break;case actuate.Constant.ChartType.GANTT_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.GANTT_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_GANTT_CHART_BUILDER,A);break;case actuate.Constant.ChartType.STOCK_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.STOCK_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_STOCK_CHART_BUILDER,A);break;case actuate.Constant.ChartType.PYRAMID_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.PYRAMID_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_PYRAMID_CHART_BUILDER,A);break;case actuate.Constant.ChartType.RADAR_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.RADAR_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_RADAR_CHART_BUILDER,A);break;case actuate.Constant.ChartType.METER_CHART:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.METER_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_METER_CHART_BUILDER,A);break;default:this._parentDialog._consumer._service._type=actuate.Constant.ChartType.COLUMN_CHART;this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_GET_COLUMN_CHART_BUILDER,A);break;}}},createSoapNode:function(A,D){if(D){var E;var F=this.getType();var G=null;var C=null;var I=A.getElementsByTagName(actuate.Constant.tag.ChartType);if(I==null||I.length==0){E=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.ChartType);A.appendChild(E);}else{E=I[0];}var H=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Type);var B=D.createTextNode(F);H.appendChild(B);E.appendChild(H);}},getType:function(){for(var A=0;A<this._buttons.length;A++){if(this._buttons[A].selected){type=this._buttons[A].chartType;}}return type;}});