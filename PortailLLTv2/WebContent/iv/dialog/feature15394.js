actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.GadgetBuilderFilterTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{_classname:"actuate.dialog.impl.helper.GadgetBuilderFilterTab",_htmlElements:{"_filterByTextBox":null,"_filterByTree":null,"_value1":null,"_valueValueBlock1":null,"_textValue1Div":null,"_value1InputDiv":null,"_value1Text":null,"_ListSelectedValues":null,"_DateImg1":null,"_SelectValuesLink1":null,"_ValueByColumnList1":null,"_advAnyOfListValuesDiv":null,"_advAnyOfListValuesLink":null,"_advAnyOfDeleteValuesLink":null,"_value2":null,"_valueValueBlock2":null,"_textValue2Div":null,"_value2InputDiv":null,"_value2Text":null,"_DateImg2":null,"_SelectValuesLink2":null,"_ValueByColumnList2":null,"_SelectValuesDiv":null,"_FilterText":null,"_FindButton":null,"_FindRow":null,"_ValuesList":null,"_Calendar":null,"_FormatHintMessage":null,"_button_addCondition":null,"_button_changeCondition":null,"_class_filter":null,"_button_andSymbol":null,"_button_orSymbol":null,"_button_notSymbol":null,"_button_leftBracketSymbol":null,"_button_rightBracketSymbol":null,"_button_deleteSymbol":null,"_button_validateSymbol":null,"_condition":null,"_previous":null,"_next":null,"_filterTextLabel":null},OP_TYPE_0_OPERAND:0,OP_TYPE_1_OPERAND:1,OP_TYPE_2_OPERAND:2,OP_TYPE_N_OPERAND:3,_width:581,_allowMeasureFilter:false,_cubeMode:false,_filterText:"",_popupEmptyCondition:true,_validated:false,columnType:null,initialize:function(){actuate.dialog.impl.helper.GadgetBuilderFilterTab._instanceCount+=1;this.id=this._getId(this._classname);this._applyHtmlElementsNames(this.id);this._title=actuate.util.Utility.getLocalizedString("gadgetBuilderFilterDialog.filter");actuate.dialog.impl.helper.GadgetBuilderFilterTab.superclass.initialize.call(this);this.columnName=null;this.bindingName=null;this.columnDataTypeCode=null;this.clearFilterFlag="false";this.valuesLoadedFlag="false";this.idFormatHintMessage=actuate.widget.ComponentMgr.get(this.id+"_FormatHintMessage");this.filterTable=actuate.widget.ComponentMgr.get(this.id+"filterTable");this.opCategory=new Array(3);this.opCategory[0]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TRUE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_FALSE);this.opCategory[1]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_EQ,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LIKE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE);this.opCategory[2]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN);this.opCategory[3]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN);this.topBottomOpGroup=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT);this.textEq=actuate.util.Utility.getLocalizedString("filterDialog.text.Eq");this.textNe=actuate.util.Utility.getLocalizedString("filterDialog.text.Ne");this.textLt=actuate.util.Utility.getLocalizedString("filterDialog.text.Lt");this.textLe=actuate.util.Utility.getLocalizedString("filterDialog.text.Le");this.textGt=actuate.util.Utility.getLocalizedString("filterDialog.text.Gt");this.textGe=actuate.util.Utility.getLocalizedString("filterDialog.text.Ge");this.textBetween=actuate.util.Utility.getLocalizedString("filterDialog.text.Between");this.textNotbetween=actuate.util.Utility.getLocalizedString("filterDialog.text.Notbetween");this.textIsnull=actuate.util.Utility.getLocalizedString("filterDialog.text.Isnull");this.textIsnotnull=actuate.util.Utility.getLocalizedString("filterDialog.text.Isnotnull");this.textIstrue=actuate.util.Utility.getLocalizedString("filterDialog.text.Istrue");this.textIsfalse=actuate.util.Utility.getLocalizedString("filterDialog.text.Isfalse");this.textLike=actuate.util.Utility.getLocalizedString("filterDialog.text.Like");this.textNotLike=actuate.util.Utility.getLocalizedString("filterDialog.text.NotLike");this.textTopn=actuate.util.Utility.getLocalizedString("filterDialog.text.Topn");this.textBottomn=actuate.util.Utility.getLocalizedString("filterDialog.text.Bottomn");this.textToppercent=actuate.util.Utility.getLocalizedString("filterDialog.text.Toppercent");this.textBottompercent=actuate.util.Utility.getLocalizedString("filterDialog.text.Bottompercent");this.textIn=actuate.util.Utility.getLocalizedString("filterDialog.text.In");this.textNotIn=actuate.util.Utility.getLocalizedString("filterDialog.text.NotIn");this.conditionEq=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_EQ;this.conditionNe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NE;this.conditionLt=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LT;this.conditionLe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LE;this.conditionGt=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GT;this.conditionGe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GE;this.conditionBetween=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN;this.conditionNotbetween=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN;this.conditionIsnull=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NULL;this.conditionIsnotnull=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_NULL;this.conditionIstrue=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TRUE;this.conditionIsfalse=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_FALSE;this.conditionLike=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LIKE;this.conditionNotLike=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE;this.conditionTopn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N;this.conditionBottomn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N;this.conditionToppercent=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT;this.conditionBottompercent=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT;this.conditionIn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN;this.conditionNotIn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN;this.idValueBlock=[];this.idValueBlock.push(actuate.widget.ComponentMgr.get(this.id+"_value1"));this.idValueBlock.push(actuate.widget.ComponentMgr.get(this.id+"_value2"));this.idValueTextDiv=[];this.idValueTextDiv.push(actuate.widget.ComponentMgr.get(this.id+"_textValue1Div"));this.idValueTextDiv.push(actuate.widget.ComponentMgr.get(this.id+"_textValue2Div"));this.value1Text=actuate.widget.ComponentMgr.get(this.id+"_value1Text");this.value2Text=actuate.widget.ComponentMgr.get(this.id+"_value2Text");this.idValueInput=[];this.idValueInput.push(this.value1Text);this.idValueInput.push(this.value2Text);this.idValueInput[0].registerEventHandler("keyup",actuate.Method.bind(this.__neh_value1Change,this),false);this.idValueInput[1].registerEventHandler("keyup",actuate.Method.bind(this.__neh_value2Change,this),false);this.idMoreValueEnableLink=[];this.idMoreValueEnableLink.push(actuate.widget.ComponentMgr.get(this.id+"_SelectValuesLink1"));this.idMoreValueEnableLink.push(actuate.widget.ComponentMgr.get(this.id+"_SelectValuesLink2"));this._neh_SelectValuesLink1_c=actuate.Method.bind(this._neh_SelectValuesLink1,this);this.idMoreValueEnableLink[0].registerEventHandler("click",this._neh_SelectValuesLink1_c);this._neh_SelectValuesLink2_c=actuate.Method.bind(this._neh_SelectValuesLink2,this);this.idMoreValueEnableLink[1].registerEventHandler("click",this._neh_SelectValuesLink2_c);this.idAnyOfListValuesLink=actuate.widget.ComponentMgr.get(this.id+"_advAnyOfListValuesLink");this._neh_AnyOfSelectValuesLink_c=actuate.Method.bind(this._neh_AnyOfSelectValuesLink,this);this.idAnyOfListValuesLink.registerEventHandler("click",this._neh_AnyOfSelectValuesLink_c);this.idAnyOfDeleteValuesLink=actuate.widget.ComponentMgr.get(this.id+"_advAnyOfDeleteValuesLink");this._neh_DeleteValuesLink_c=actuate.Method.bind(this._neh_DeleteValuesLink,this);this.idAnyOfDeleteValuesLink.registerEventHandler("click",this._neh_DeleteValuesLink_c);this.stateMoreValue=[false,false];this.idDateImg=[];this.idDateImg.push(actuate.widget.ComponentMgr.get(this.id+"_DateImg1"));this.idDateImg.push(actuate.widget.ComponentMgr.get(this.id+"_DateImg2"));this.__neh_CalendarDivClick_c=actuate.Method.bind(this.__neh_CalendarDivClick,this);actuate.util.Event.observe(this.idCalendar,"click",this.__neh_CalendarDivClick_c,false);this.__neh_CalendarDivChange_c=actuate.Method.bind(this.__neh_CalendarDivChange,this);actuate.util.Event.observe(this.idCalendar,"change",this.__neh_CalendarDivChange_c,false);this.__neh_CalendarClick1_c=actuate.Method.bind(this.__neh_CalendarClick1,this);this.idDateImg[0].registerEventHandler("click",this.__neh_CalendarClick1_c);this.__neh_CalendarClick2_c=actuate.Method.bind(this.__neh_CalendarClick2,this);this.idDateImg[1].registerEventHandler("click",this.__neh_CalendarClick2_c);this._operator=actuate.widget.ComponentMgr.get(this.id+"_condition");this.__neh_changeCondition_c=actuate.Method.bind(this.__neh_changeCondition,this);this._operator.registerEventHandler("select",this.__neh_changeCondition_c);this.idInOPValuesSelect=actuate.widget.ComponentMgr.get(this.id+"_ListSelectedValues");var B=this;this.idInOPValuesSelect.registerEventHandler("keyup",function(D,C){if(C.stopPropagation){C.stopPropagation();}else{C.cancelBubble=true;}if(C.keyCode==C.DELETE){B._neh_DeleteValuesLink();}C.preventDefault();});this.idInOPValuesSelect.registerEventHandler("select",function(E,D){var C=E.getLength()>0&&E.getSelectedIndex()>=0;B.enableConditionButton(B.idAnyOfDeleteValuesLink,C);});this.__neh_InOPValuesFocus_c=actuate.Method.bind(this.__neh_InOPValuesFocus,this);this.idInOPValuesSelect.registerEventHandler("focus",this.__neh_InOPValuesFocus_c);this.idSelectValuesDiv=actuate.widget.ComponentMgr.get(this.id+"_SelectValuesDiv");this.resultSetName=actuate.widget.ComponentMgr.get(this.id+"_filterByText");this._filterByTree=actuate.widget.ComponentMgr.get(this.id+"_filterByTree");var A=this._filterByTree.getSelectionModel();if(A){A.registerEventHandler("selectionchange",actuate.Method.bind(this._eh_changeDataTree,this));A.registerEventHandler("beforeselect",actuate.Method.bind(this._eh_onBeforeSelect,this));}this.deleteButton=actuate.widget.ComponentMgr.get(this.id+"_button_deleteSymbol");this.__neh_clickDeleteButton_c=actuate.Method.bind(this.__neh_clickDeleteButton,this);this.deleteButton.registerEventHandler("click",this.__neh_clickDeleteButton_c);this._filterList=actuate.widget.ComponentMgr.get(this.id+"_filterList");this.__neh_changeFilterConditionSelection_c=actuate.Method.bind2(this.__neh_changeFilterConditionSelection,this);this._filterList.registerEventHandler("select",this.__neh_changeFilterConditionSelection_c);this._measureFilterList=actuate.widget.ComponentMgr.get(this.id+"_measureFilterList");this.__neh_changeMeasureFilterConditionSelection_c=actuate.Method.bind2(this.__neh_changeMeasureFilterConditionSelection,this);this._measureFilterList.registerEventHandler("select",this.__neh_changeMeasureFilterConditionSelection_c);this.andButton=actuate.widget.ComponentMgr.get(this.id+"_button_andSymbol");this.__neh_clickAndButton_c=actuate.Method.bind(this.__neh_clickAndButton,this);this.andButton.registerEventHandler("click",this.__neh_clickAndButton_c);this.orButton=actuate.widget.ComponentMgr.get(this.id+"_button_orSymbol");this.__neh_clickOrButton_c=actuate.Method.bind(this.__neh_clickOrButton,this);this.orButton.registerEventHandler("click",this.__neh_clickOrButton_c);this.notButton=actuate.widget.ComponentMgr.get(this.id+"_button_notSymbol");this.__neh_clickNotButton_c=actuate.Method.bind(this.__neh_clickNotButton,this);this.notButton.registerEventHandler("click",this.__neh_clickNotButton_c);this.leftBracketButton=actuate.widget.ComponentMgr.get(this.id+"_button_leftBracketSymbol");this.__neh_clickLeftBracketButton_c=actuate.Method.bind(this.__neh_clickLeftBracketButton,this);this.leftBracketButton.registerEventHandler("click",this.__neh_clickLeftBracketButton_c);this.rightBracketButton=actuate.widget.ComponentMgr.get(this.id+"_button_rightBracketSymbol");this.__neh_clickRightBracketButton_c=actuate.Method.bind(this.__neh_clickRightBracketButton,this);this.rightBracketButton.registerEventHandler("click",this.__neh_clickRightBracketButton_c);this.addConditionButton=actuate.widget.ComponentMgr.get(this.id+"_button_addCondition");this.__neh_clickAddConditionButton_c=actuate.Method.bind(this.__neh_clickAddConditionButton,this);this.addConditionButton.registerEventHandler("click",this.__neh_clickAddConditionButton_c);this.changeConditionButton=actuate.widget.ComponentMgr.get(this.id+"_button_changeCondition");this.__neh_clickChangeConditionButton_c=actuate.Method.bind(this.__neh_clickChangeConditionButton,this);this.changeConditionButton.registerEventHandler("click",this.__neh_clickChangeConditionButton_c);this.validateButton=actuate.widget.ComponentMgr.get(this.id+"_button_validateSymbol");this.__neh_clickValidateButton_c=actuate.Method.bind(this.__neh_clickValidateButton,this);this.validateButton.registerEventHandler("click",this.__neh_clickValidateButton_c);this.idFindRow=actuate.widget.ComponentMgr.get(this.id+"_FindRow");this.idFilterTextLabel=actuate.widget.ComponentMgr.get(this.id+"_filterTextLabel");this.idFilterText=actuate.widget.ComponentMgr.get(this.id+"_FilterText");this.idFindButton=actuate.widget.ComponentMgr.get(this.id+"_FindButton");this.idValuesList=actuate.widget.ComponentMgr.get(this.id+"_ValuesList");this.__neh_FindClick_c=actuate.Method.bind(this.__neh_FindClick,this);this.idFindButton.registerEvent("click",this.__neh_FindClick_c,false);this.__neh_ListClick_c=actuate.Method.bind(this.__neh_ListClick,this);this.idValuesList.registerEventHandler("select",this.__neh_ListClick_c);this.__neh_FilterTextChange_c=actuate.Method.bind(this.__neh_FilterTextChange,this);this.idFilterText.registerEvent("specialkey",this.__neh_FilterTextChange_c,false);this.selectedConditionChangedFlag=false;this.valueValueBlock=[];this.valueValueBlock.push(actuate.widget.ComponentMgr.get(this.id+"_valueValueBlock1"));this.valueValueBlock.push(actuate.widget.ComponentMgr.get(this.id+"_valueValueBlock2"));this.whichButton=null;this.idAnyOfListValuesDiv=actuate.widget.ComponentMgr.get(this.id+"_advAnyOfListValuesDiv");this.FocusAfterCalendarFlag=false;this.idPrevious=actuate.widget.ComponentMgr.get(this.id+"_previous");this.idNext=actuate.widget.ComponentMgr.get(this.id+"_next");this._previousClick_c=actuate.Method.bind(this._previousClick,this);this.idPrevious.registerEventHandler("click",this._previousClick_c);this._nextClick_c=actuate.Method.bind(this._nextClick,this);this.idNext.registerEventHandler("click",this._nextClick_c);this._rowCount=0;this._prevCursor=0;this._currCursor=0;this._filterManager=new actuate.dialog.impl.helper.FilterManager();this._measureFilterManager=new actuate.dialog.impl.helper.FilterManager();this._filterView={manager:this._filterManager,list:this._filterList};this._measureFilterView={manager:this._measureFilterManager,list:this._measureFilterList};this.columnValues=null;this._updateSelectedValues_c=actuate.Method.bind(this._updateSelectedValues,this);this._clearControls();},resize:function(H){if(!H){return ;}var E=H.width;if(E>650){var F=E-300;this.resultSetName.setWidth(F);this._filterByTree.setWidth(F);this._operator.setWidth(F);this.value1Text.setWidth(F);this.value2Text.setWidth(F);this.idValuesList.setWidth(F);this.idInOPValuesSelect.setWidth(F);this.idFilterText.setWidth(F-100);this._filterList.setWidth(F);this._measureFilterList.setWidth(F);}var A=H.height;if(A>611){var C=A-250;var D=C*0.3;var B=C*0.2;this._filterByTree.setHeight(D);this.idValuesList.setHeight(B);this.idInOPValuesSelect.setHeight(B);this._filterList.setHeight(D);this._measureFilterList.setHeight(D);var G=0;if(!this.idSelectValuesDiv.isVisible()){G++;}if(!this.idInOPValuesSelect.isVisible()){G++;}if(G==1){D=C*0.4;B=C*0.2;this._filterByTree.setHeight(D);this._filterList.setHeight(D);this._measureFilterList.setHeight(D);this.idValuesList.setHeight(B);this.idInOPValuesSelect.setHeight(B);}else{if(G==2){D=C*0.55;this._filterByTree.setHeight(D);this._filterList.setHeight(D);this._measureFilterList.setHeight(D);}}}},createSoapNode:function(B,C){if(B){this._filterSoap=this.createFilterSoap();this._measureFilterSoap=this._allowMeasureFilter?this.createMeasureFilterSoap():null;if(!this._filterSoap&&!this._measureFilterSoap&&this._filter){if(this._filter.designtimeFilters){var A=new actuate.dialog.impl.helper.FilterManager();A.addConditionLinesFromMetadata(this._filter.designtimeFilters,null,true);this._filterSoap=A.createGadgetFilterSoap();}if(this._filter.measureFilters){var D=new actuate.dialog.impl.helper.FilterManager();D.addConditionLinesFromMetadata(this._filter.measureFilters,null,false);this._measureFilterSoap=D.createGadgetMeasureFilterSoap();}}if(this._filterSoap!=null){C.documentElement.appendChild(this._filterSoap);}if(this._measureFilterSoap!=null){C.documentElement.appendChild(this._measureFilterSoap);}}},_afterHide:function(){this._clearControls();},_clearControls:function(){this.filterTable.hide();this.getPanel().setDisabled(true);},_initContent:function(){this._componentArray=[];var G=this;var C=[{type:null,iconCls:"actuate_data_column_image"},{type:"dimensions",iconCls:"actuate_dimensions_image"},{type:"measures",iconCls:"actuate_measures_image"},{type:"dimension",iconCls:"actuate_dimension_image"},{type:"level",iconCls:"actuate_level_image"},{type:"attributes",iconCls:"actuate_attribute_image"},{type:"measure",iconCls:"actuate_measure_image"},{type:"string",iconCls:"actuate_data_column_string_image"},{type:"float",iconCls:"actuate_data_column_number_image"},{type:"category",iconCls:"actuate_category_image"}];var F=102;var E=300;var H=actuate.getDefaultIportalUrl()+"iportal/jsapi/actuate/widget/images/form/";var A=new actuate.widget.Template('<button class="actuate-form-calendarButton" type="{1}">{0}</button>');var B=new actuate.widget.Template('<button class="actuate-widget-btn-link" type="{1}">{0}</button>');var D={autoHeight:true,border:false,id:this.id+"filterTable",defaults:{border:false,header:false,layout:"form",bodyStyle:"padding:2px 0 2px 0"},items:[{layout:"column",items:[{width:F,xtype:"label",text:actuate.util.Utility.getLocalizedString("filterDialog.text.filterBy")},{width:E,id:this.id+"_filterByText",value:"",xtype:"textfield",readOnly:true}]},{layout:"column",items:[{width:F,xtype:"label",style:"height:1px"},{id:this.id+"_filterByTree",xtype:"treepanel",el:"tree-div",autoScroll:true,width:306,height:130,rootVisible:false,containerScroll:true,dataStore:new actuate.widget.tree.TreeStore([]),icons:C}]},{layout:"column",items:[{width:F,xtype:"label",text:actuate.util.Utility.getLocalizedString("filterDialog.text.condition")},{width:283,id:this.id+"_condition",xtype:"combo",editable:false,forceSelection:true,valueField:"value",displayField:"text"}]},{id:this.id+"_value1",defaults:{border:false,header:false,layout:"form"},items:[{layout:"column",id:this.id+"_valueValueBlock1",items:[{width:F,xtype:"label",id:this.id+"_textValue1Div",text:actuate.util.Utility.getLocalizedString("filterDialog.text.value")},{defaults:{header:false,layout:"table"},border:false,id:this.id+"_valueValueBlock12",items:[{width:E,id:this.id+"_value1Text",value:"",xtype:"textfield"},{width:2,xtype:"label",style:"height:1px"},{id:this.id+"_DateImg1",xtype:"button",_template:A},{id:this.id+"_SelectValuesLink1",xtype:"button",height:19,_template:B,text:actuate.util.Utility.getLocalizedString("filterDialog.text.selectValues")}]}]},{layout:"column",items:[{width:F,xtype:"label",style:"height:1px"},{width:E,id:this.id+"_ListSelectedValues",xtype:"listbox",width:300,height:50,enableKeyEvents:true,displayField:"value"}]}]},{layout:"column",id:this.id+"_advAnyOfListValuesDiv",border:false,items:[{width:F,xtype:"label",style:"height:1px"},{defaults:{header:false,layout:"table"},border:false,id:this.id+"_advAnyOfListValuesLink_area",items:[{columnWidth:0.1,id:this.id+"_advAnyOfListValuesLink",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("filterDialog.text.ListValues")},{columnWidth:0.1,id:this.id+"_advAnyOfDeleteValuesLink",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("filterDialog.text.DeleteValues")}]}]},{id:this.id+"_value2",defaults:{border:false,header:false,layout:"form"},items:[{layout:"column",id:this.id+"_valueValueBlock2",items:[{width:F,xtype:"label",id:this.id+"_textValue2Div",text:actuate.util.Utility.getLocalizedString("filterDialog.text.value")},{width:E,id:this.id+"_value2Text",value:"",xtype:"textfield"},{width:2,xtype:"label",style:"height:1px"},{id:this.id+"_DateImg2",xtype:"button",_template:A},{id:this.id+"_SelectValuesLink2",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("filterDialog.text.selectValues")}]}]},{id:this.id+"_SelectValuesDiv",defaults:{border:false,header:false,layout:"form"},items:[{layout:"column",id:this.id+"_FindRow",items:[{width:F,xtype:"label",id:this.id+"_filterTextLabel",text:actuate.util.Utility.getLocalizedString("filterDialog.text.filterText")},{width:E,id:this.id+"_FilterText",value:"",xtype:"textfield"},{width:4,xtype:"label",style:"height:1px"},{id:this.id+"_FindButton",xtype:"button",text:actuate.util.Utility.getLocalizedString("filterDialog.text.find")}]},{layout:"column",items:[{width:F,xtype:"label",style:"height:1px"},{width:E,id:this.id+"_ValuesList",xtype:"listbox",width:304,height:100}]},{layout:"column",border:false,items:[{width:F,xtype:"label",style:"height:1px"},{defaults:{header:false,layout:"table"},border:false,id:this.id+"_previous_area",items:[{id:this.id+"_previous",_template:B,xtype:"button",text:actuate.util.Utility.getLocalizedString("filterDialog.text.previous")},{id:this.id+"_next",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("filterDialog.text.next")}]}]}]},{layout:"column",items:[{columnWidth:0.2,xtype:"label",style:"height:1px"},{columnWidth:0.5,xtype:"label"}]},{layout:"column",items:[{width:F,xtype:"label",style:"height:1px"},{xtype:"label",id:this.id+"_FormatHintMessage"}]},{layout:"column",items:[{width:F,xtype:"label",style:"height:1px"},{defaults:{header:false,layout:"table"},border:false,id:this.id+"_button_addCondition_area",items:[{id:this.id+"_button_addCondition",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.addCondition")},{id:this.id+"_button_changeCondition",xtype:"button",_template:B,text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.changeCondition")}]}]},{layout:"column",items:[{width:F,xtype:"label",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.filters")},{items:[{xtype:"listbox",id:this.id+"_filterList",width:250,height:80,displayField:"value"},{xtype:"listbox",id:this.id+"_measureFilterList",width:250,height:80,displayField:"value"}]},{width:4,xtype:"label",style:"height:1px"},{border:false,items:[{layout:"column",border:false,items:[{xtype:"button",id:this.id+"_button_andSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.andSymbol")},{width:4,xtype:"label",style:"height:1px"},{xtype:"button",id:this.id+"_button_orSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.orSymbol")},{width:4,xtype:"label",style:"height:1px"},{xtype:"button",id:this.id+"_button_notSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.notSymbol")}]},{layout:"column",border:false,items:[{xtype:"button",id:this.id+"_button_leftBracketSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.leftBracketSymbol")},{width:4,xtype:"label",style:"height:1px"},{xtype:"button",id:this.id+"_button_rightBracketSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.rightBracketSymbol")}]},{layout:"table",border:false,items:[{xtype:"button",style:"margin:2px",id:this.id+"_button_deleteSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.delete")},{xtype:"button",style:"margin:2px",id:this.id+"_button_validateSymbol",text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.button.validate")}]}]}]}]};this._componentArray.push(D);},_initTree:function(){var B=[{type:null,iconCls:"actuate_data_column_image"},{type:"dimensions",iconCls:"actuate_dimensions_image"},{type:"measures",iconCls:"actuate_measures_image"},{type:"dimension",iconCls:"actuate_dimension_image"},{type:"level",iconCls:"actuate_level_image"},{type:"attributes",iconCls:"actuate_attribute_image"},{type:"measure",iconCls:"actuate_measure_image"},{type:"string",iconCls:"actuate_data_column_string_image"},{type:"float",iconCls:"actuate_data_column_number_image"}];var A=new actuate.widget.tree.TreePanel({el:"tree-div",autoScroll:true,width:320,height:130,rootVisible:false,containerScroll:true,dataStore:new actuate.widget.tree.TreeStore([]),icons:B});return A;},_eh_onBeforeSelect:function(A,B){if(B&&B.attributes){switch(B.attributes.type){case"dimensions":case"measures":case"dimension":case"measure":case"category":return false;default:return true;}}return true;},_eh_changeDataTree:function(B){var A="";if(B&&B.selNode&&B.selNode.attributes){A=B.selNode.attributes.realId;}this.resultSetName.setValue(A);this.columnName=this.resultSetName.getValue();this.columnDataTypeCode=B.selNode.attributes.datatype;if(B.selNode.parentNode){this.columnType=B.selNode.parentNode.attributes.type;}else{this.columnType=null;}this.resetGUI();},_updateTree:function(B){if(this._filterByTree){this._filterByTree.clear();}if(this.resultSetName){this.resultSetName.setValue(null);}var C=B;if(C){var A=["category","column","dimension","parameter"];if(this._allowMeasureFilter){A=["category","column","dimension","measure","parameter"];}this._filterByTree.getStore().removeAll();this.__setTreeStoreValues(this._filterByTree.getStore(),C,A);this._filterByTree.refresh();}this._filterByTree.expandAll();if(this._filterByTree.getRootNode().firstChild!=null){this._selectLeafNode(this._filterByTree.getRootNode().firstChild);}return C;},_selectLeafNode:function(A){if(A!=null&&A.firstChild==null){A.select();return ;}this._selectLeafNode(A.firstChild);},_pushDataToStore:function(Q,N,A,G,E){if(A&&N&&N.length>0){var D=E||this.__isGroupDisabled(Q);if(Q){this.__addDataIntoTreeStore({id:G||Q,text:actuate.util.Utility.getLocalizedString("common.dataTab."+Q),type:Q,strong:true,disabled:D},A);}for(var F=0;F<N.length;F++){var O=D;var J=this._getType(N[F]);var C=N[F].fullName||N[F].name;var P=N[F].displayName||N[F].name||N[F].fullName;var I=N[F].pattern;var M=N[F].dataFormat;var L=N[F].strong;var B=N[F].categoryName?"categore::"+N[F].categoryName+"_id":null;var K=this._getTooltip(N[F]);if(M&&M.value){M.value.dataType=N[F].dataType;}if(C){var H=C;if(G||Q){C=(G||Q)+"::"+C;}if(P){this.__addDataIntoTreeStore({id:C,realId:H,value:N[F],text:P,pattern:I,format:M,type:J,parentId:G||Q||B,strong:L,title:K,disabled:O},A);}}if(N[F].levels){this._pushDataToStore(null,N[F].levels,A,C,O);}if(N[F].measures){this._pushDataToStore(null,N[F].measures,A,C,O);}}}},_updateSelectedValues:function(C){if(!C){return ;}if(C.messageList){var B=C.messageList;var A=B[0];if(this._parentDialog._consumer._eventDispatcher){if(this._validated==true){if(B[1]!=null&&B[1]=="invalid"){this._validated=false;actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),A);}else{actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("baseDialog.alertTitle"),msg:A,buttons:actuate.widget.MessageBox.OK});}}else{if(B[1]!=null&&B[1]=="invalid"){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),A);}else{if(this._okCallback){this._okCallback(this.createFilterSoap(),this._allowMeasureFilter?this.createMeasureFilterSoap():null);}this._hide();return true;}}}}else{if(C.resultSetData){this.showData(C.resultSetData);this._parentDialog._fixDropShadow();}}},loadData:function(B){if(!B){return ;}if(B.messageList||B.resultSetData){this._updateSelectedValues(B);return ;}if(B.dataObject){this.getPanel().setDisabled(this._isParameterBasedSelector(B));this._popupEmptyCondition=true;this._clearFilterUI=B.clearFilterUI;this._dataObject=B.dataObject;this._dataObjectSoap=B.dataObjectSoap;this._dataMartSoap=B.dataMartSoap;this._target=B.target;this._okCallback=B.okCallback;this._validated=true;if(!this._clearFilterUI){return ;}this._resetFilterUI();var A=null;if(actuate.util.Utility.isArray(B.dataObject)){A=B.dataObject[0];}else{A=B.dataObject;}this._cubeMode=A.dimensions?true:false;this._allowMeasureFilter=(this._cubeMode&&B.allowMeasureFilter)?true:false;this._updateTree(A);this._measureFilterList.setVisibility(this._allowMeasureFilter);}if(this._clearFilterUI){this._showFilter(B.Filter);this.showMoreValuesListBox();}this._filterList.setSelectedIndex(0);this._measureFilterList.setSelectedIndex(-1);if(this._isParameterBasedSelector(B)){this.getPanel().setDisabled(true);}},_isParameterBasedSelector:function(A){if(A&&A.parameter){return true;}if(A&&A.Base&&A.Base.parameterName){return true;}return false;},_previousClick:function(){if(this.idPrevious.disabled==true){return ;}if(this.idFilterText.getValue()!=this._filterText){this.__neh_FindClick(null);return ;}if(this._currCursor<=0){this.enableConditionButton(this.idPrevious,false);return ;}if(this._currCursor>=0){this.enableConditionButton(this.idNext,true);var B=this._currCursor;this._currCursor=this._prevCursor;if(this._prevCursor!=0){this._prevCursor=this._prevCursor-(B-this._prevCursor);}var G=new Array();var A=new Object();A.name="FilterText";A.value=this.idFilterText.getValue();var H=new Object();H.name="target";H.value=this._parentDialog._classname;var E=new Object();E.name="startrow";E.value=this._currCursor;G[0]=A;G[1]=H;G[2]=E;var C=new Object();C.name="columnName";C.value=this.resultSetName.getValue();G[3]=C;this._showHideFindRow();var F={operandArray:G,dataObject:this._dataObjectSoap,target:this._target,dataMart:this._dataMartSoap};var D={"data":F};if(this._parentDialog._consumer._eventDispatcher){if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="data"){this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATAMART_MOREVALUES_FILTER,D,true);}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,D,true);}}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,D,true);}}}else{this._prevCursor=0;this._currCursor=0;}},_nextClick:function(){if(this.idNext.disabled==true){return ;}if(this.idFilterText.getValue()!=this._filterText){this.__neh_FindClick(null);return ;}this.enableConditionButton(this.idPrevious,true);this._prevCursor=this._currCursor;this._currCursor=this._currCursor+this._rowCount;var F=new Array();var A=new Object();A.name="FilterText";A.value=this.idFilterText.getValue();var G=new Object();G.name="target";G.value=this._parentDialog._classname;var D=new Object();D.name="startrow";D.value=this._currCursor;F[0]=A;F[1]=G;F[2]=D;var B=new Object();B.name="columnName";B.value=this.resultSetName.getValue();F[3]=B;this._showHideFindRow();var E={operandArray:F,dataObject:this._dataObjectSoap,target:this._target,dataMart:this._dataMartSoap};var C={"data":E};if(this._parentDialog._consumer._eventDispatcher){if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="data"){this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATAMART_MOREVALUES_FILTER,C,true);}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,C,true);}}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,C,true);}}},_okPress:function(){var A=this._filterManager.getConditionLineCount();if(this._allowMeasureFilter){A+=this._measureFilterManager.getConditionLineCount();}if(this._popupEmptyCondition==true&&!(A>0)){var B=this;actuate.widget.MessageBox.confirm(actuate.util.Utility.getLocalizedString("common.promptTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.EmptyConditionList"),function(C){if(C=="no"){return ;}else{B._okPressContinue();}});return ;}this._okPressContinue();},_okPressContinue:function(){var A=this.isValidSyntax();if(A==false){return ;}if(this._validated==false){this.__neh_clickValidateButton();return ;}if(this._okCallback){this._okCallback(this.createFilterSoap(),this._allowMeasureFilter?this.createMeasureFilterSoap():null);}this._hide();},__getHelpTopic:function(){return"iv_advanced_filter";},_preHide:function(){this._okCallback=null;this._dataObjectSoap=null;this._dataObject=null;this._target=null;this._validated=false;},_resetFilterUI:function(){if(this._clearFilterUI){this.clearResultSetColumn();this.deleteAllFilter();this.resetGUI();}},__neh_changeCondition:function(){if(this.isTopBottomOp(this._operator.getValue())!=this.isTopBottomOp(this._previousCondition)){this.value1Text.setValue("");this.value2Text.setValue("");}this.idValuesList.setSelectedIndex();this._showOperandGUI(this._operator.getValue());this._previousCondition=this._operator.getValue();},__neh_value1Change:function(){var A=this.idValueInput[0].getEl().dom;this.__updateTooltip(A);},__neh_value2Change:function(){var A=this.idValueInput[1].getEl().dom;this.__updateTooltip(A);},__updateTooltip:function(A){A.setAttribute("title",A.value);},__neh_InOPValuesFocus:function(){if(this.idInOPValuesSelect.getLength()>0&&this.idInOPValuesSelect.getSelectedIndex()!=-1){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);if(this.FocusAfterCalendarFlag){this.idInOPValuesSelect.setSelectedIndex(this.idInOPValuesSelect.getLength()-1,true);}}else{this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);}this.FocusAfterCalendarFlag=false;},_neh_DeleteValuesLink:function(D){if(this.idInOPValuesSelect.getLength()==0||this.idInOPValuesSelect.getSelectedIndex()<0){return ;}var C=0;var B=this.idInOPValuesSelect.getSelectedIndex()-1;var A=this.idInOPValuesSelect.getSelectedValues();for(C=0;C<A.length;C++){this.idInOPValuesSelect.remove(A[C]);}if(B<0){B=0;}if(this.idInOPValuesSelect.getLength()==0){this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);this.idInOPValuesSelect.setSelectedIndex(-1);}else{if(B!=-1&&B!=null){this.idInOPValuesSelect.setSelectedIndex(B);this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}}},__neh_clickValidateButton:function(C){if(C){actuate.util.Event.stop(C);this._validated=true;}var A=this.isValidSyntax();if(A==false){return ;}var E=new Array();var F=new Object();F.name="target";F.value=this._parentDialog._classname;E[0]=F;var D={operandArray:E,filter:this.createFilterSoap(),filterlist:this._allowMeasureFilter?this.createMeasureFilterSoap():null,boundDataColumn:this._createBoundDataColumnSoap(),target:this._target};var B={"data":D};if(this._parentDialog._consumer._eventDispatcher){this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_VALIDATE_FILTER_EXPRESSION,B,true);}},isValidSyntax:function(){var F=0,C=0;var B=this._filterManager.getConditionLineCount();for(var E=0;E<B;E++){var D=this._filterManager.getConditionLine(E);if(D.getHasLeftBracket()){F++;}if(D.getHasRightBracket()){C++;}}if(F!=C){var A=actuate.util.Utility.getLocalizedString("advancedFilterDialog.ValueValidator.Error.LineNumber");var D=E-1;A=A.replace("LineNumberVariable",D);var G=A+" "+actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.unbalancedBrackets");if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),G);}return false;}return true;},_neh_SelectValuesLink1:function(A){this._handleClickSelectValueLink(0);},_neh_SelectValuesLink2:function(A){this._handleClickSelectValueLink(1);},_handleClickSelectValueLink:function(C){if(this.resultSetName.getValue()==null||this.resultSetName.getValue()==""){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.NoFilterBy"));return ;}var J=this.stateMoreValue.length;for(var H=0;H<J;H++){this.stateMoreValue[H]=(H==C);this._showhideMoreValueLink(H,false);}if(this.valuesLoadedFlag=="false"){var F=new Array();var D=new Object();D.name="FilterText";D.value="";var E=new Object();E.name="target";E.value=this._parentDialog._classname;var G=new Object();G.name="startrow";G.value="0";F[0]=D;F[1]=E;F[2]=G;var A=new Object();A.name="columnName";A.value=this.resultSetName.getValue();F[3]=A;var B=null;if(this._dataMartSoap==null){B={operandArray:F,dataObject:this._dataObjectSoap,target:this._target};}else{B={operandArray:F,dataObject:this._dataObjectSoap,target:this._target,dataMart:this._dataMartSoap};}var I={"data":B};if(this._parentDialog._consumer._eventDispatcher){if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="data"){this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATAMART_MOREVALUES_FILTER,I,true);}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,I,true);}}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,I,true);}}this.valuesLoadedFlag="true";this._prevCursor=0;this._currCursor=0;}this._showHideFindRow();this.showHideCalendarDiv(false);this._showhideMoreValueSelect();this._parentDialog.adjustSize();},_neh_AnyOfSelectValuesLink:function(A){this._handleClickSelectValueLink(0);this.idMoreValueEnableLink[0].hide();this.idMoreValueEnableLink[1].hide();this.enableConditionButton(this.idAnyOfListValuesLink,false);},__neh_clickDeleteButton:function(A){actuate.util.Event.stop(A);if(this._filterList.getSelectedIndex()>=0){this.deleteCondition(this._filterView);this._popupEmptyCondition=false;}else{if(this._measureFilterList.getSelectedIndex()>=0){this.deleteCondition(this._measureFilterView);this._popupEmptyCondition=false;}}},deleteAllFilter:function(){this._filterManager.resetFilterTable();this._measureFilterManager.resetFilterTable();this._filterList.clear();this._measureFilterList.clear();},deleteCondition:function(C){var D=C.list.getEl().dom.scrollTop;var B=C.list.getSelectedIndex();if(B>=0){C.manager.deleteConditionLine(B);this.deleteOption(C);if(C==this._filterView&&B==0&&C.manager.getConditionLineCount()>0){var A=C.manager.getConditionLine(0);A.setLogicOp("");C.list.modify(0,[this.createConditionLineText(A)]);}C.list.getEl().dom.scrollTop=D;}},deleteOption:function(B){var A=B.list.getSelectedIndex();if(A>=0){B.list.remove(A);if(A==B.list.getLength()){B.list.setSelectedIndex(A-1,true);}else{B.list.setSelectedIndex(A,true);}this._selectedConditionChanged(B);}},__neh_changeFilterConditionSelection:function(){this._measureFilterList.setSelectedIndex(-1);this.selectedConditionChangedFlag=true;if(this._filterList.getSelectedIndex()>=0){var A=this._filterManager.getConditionLine(this._filterList.getSelectedIndex());if(A){var E=A.getRow();var D=A.getRow();if(this._cubeMode){var C=D.split("/");if(C&&C.length>2){E="dimensions::"+C[0]+"::"+C[0]+"/"+C[1]+"::"+D;}else{if(C&&C.length>0){E="dimensions::"+C[0]+"::"+D;}}}var B=this._filterByTree.getNodeById(E);if(B){this._filterByTree.getSelectionModel().select(B,true);this.columnDataTypeCode=B.attributes.datatype;}}}if(this._cubeMode){this.columnType="dimension";}this.__neh_clickFilterCondition(this._filterView);},__neh_changeMeasureFilterConditionSelection:function(){this._filterList.setSelectedIndex(-1);this.selectedConditionChangedFlag=true;var A=this._measureFilterManager.getConditionLine(this._measureFilterList.getSelectedIndex());if(A){var C=A.getRow();if(this._cubeMode){C="measures::"+C;}var B=this._filterByTree.getNodeById(C);this._filterByTree.getSelectionModel().select(B,true);this.columnDataTypeCode=B.attributes.datatype;}this.columnType="measure";this.__neh_clickFilterCondition(this._measureFilterView);},_selectedConditionChanged:function(B){var A=B.list.getSelectedIndex();if(A>=0){this.enableConditionButton(this.changeConditionButton,true);this.enableConditionButton(this.validateButton,true);this.enableConditionButton(this.deleteButton,true);}else{this.enableConditionButton(this.changeConditionButton,false);this.enableConditionButton(this.validateButton,false);this.enableConditionButton(this.deleteButton,false);}this.enableConditionButton(this.addConditionButton,true);this.notButton.hide();this.leftBracketButton.hide();this.rightBracketButton.hide();this.andButton.hide();this.orButton.hide();},__neh_clickFilterCondition:function(A){this._selectedConditionChanged(A);var B=A.list.getSelectedIndex();if(B>=0){this.resetGUI();this._populateConditionToUI(B,A);this.selectedConditionChangedFlag=false;}},_populateConditionToUI:function(H,E){var A=E.manager.getConditionLine(H);this.resultSetName.setValue(A.getRow());this.columnName=this.resultSetName.getValue();this.loadConditions(this.columnDataTypeCode);var C=A.getOperator();this._previousCondition=this._operator.getValue();if(C!="clear"){this._operator.setValue(C);}C=this._operator.getValue();this._showOperandGUI(C);if(A.getFilterOperands()==null){return ;}var D=A.getFilterOperands();if(D.length>0){if(C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN||C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN){var G=D[0].value.split("|");var B=[];for(var F=0;F<G.length;F++){if(G[F]!=null){B.push([G[F],G[F]]);}}this.idInOPValuesSelect.setStore(B);if(this.idInOPValuesSelect.getLength()>0&&this.idInOPValuesSelect.getSelectedIndex()!=-1){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}return ;}this._showOperand(0,D[0]);if(D.length>1){this._showOperand(1,D[1]);}}},_showOperand:function(B,E){var A=E.isDataField;var D=E.isLiteral;var C=E.value;this.idValueInput[B].setValue(C);this.__updateTooltip(this.idValueInput[B].getEl().dom);},__neh_changeResultSet:function(){this.resetGUI();this._parentDialog.adjustSize();},__neh_CalendarDivClick:function(B){var A=document.getElementById("hideCalendarFlag");if(A.value=="true"){this.showHideCalendarDiv(false);A.value="false";}this._parentDialog.adjustSize();},__neh_CalendarDivChange:function(A){this._parentDialog.adjustSize();},__neh_CalendarClick1:function(A){this._handleClickCalendar(A,0);},__neh_CalendarClick2:function(A){this._handleClickCalendar(A,1);},_handleClickCalendar:function(D,B){var A={};var C=this.getOperatorType(this._operator.getValue());if(this.columnDataTypeCode==actuate.Constant.DataType.DATE){A.isDateTime=false;}else{A.isDateTime=true;}if(C==this.OP_TYPE_N_OPERAND){this.FocusAfterCalendarFlag=true;A.target=this.idInOPValuesSelect;}else{A.target=this.idValueInput[B];}var E={};E.cache=A;if(this._parentDialog._consumer._eventDispatcher){this._parentDialog._consumer._eventDispatcher.fireEvent(actuate.builder.impl.event.__E_CALENDAR,E);}},_showFilter:function(F){this.columnName=this.resultSetName.getValue();this.loadConditions(this.columnDataTypeCode);for(var A=0;A<2;A++){this.idValueInput[A].setValue("");this.__updateTooltip(this.idValueInput[A].getEl().dom);this.stateMoreValue[A]=false;}var E=this._operator;E.setSelectedIndex(0);var C=E.getValue();this._showOperandGUI(C);this.deleteAllFilter();this._filterManager.addConditionLinesFromMetadata(F&&F.designtimeFilters,null,true);this._filterList.clear();var B=this._filterManager.getConditionLineCount();for(var D=0;D<B;D++){this.appendConditionLine(D,this._filterView);}this._selectedConditionChanged(this._filterView);if(this._allowMeasureFilter){this._measureFilterManager.addConditionLinesFromMetadata(F&&F.measureFilters,null,false);}this._measureFilterList.clear();var B=this._measureFilterManager.getConditionLineCount();for(var D=0;D<B;D++){this.appendConditionLine(D,this._measureFilterView);}this._selectedConditionChanged(this._measureFilterView);},showMoreValuesListBox:function(){if(this.columnValues!=null&&this.columnValues.getRows()!=null){this._populateColumnValuesInUI(this.columnValues.getRows());this.stateMoreValue[0]=true;this.stateMoreValue[1]=false;this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);this._showhideMoreValueLink(1,true);this._showHideFindRow();var A=this.columnValues.getEndOfResultSet();this._currCursor=this.columnValues.getCursor();this._prevCursor=this.columnValues.getCursor();this._rowCount=this.columnValues.getRowCount();this.enableConditionButton(this.idNext,!A);this.enableConditionButton(this.idPrevious,true);if(this._prevCursor<=0){this.enableConditionButton(this.idPrevious,false);}}},_showOperandGUI:function(A){this.showHideCalendarDiv(false);this.idValuesList.setMultiSelect(false);this.idAnyOfListValuesDiv.hide();var B=this.getOperatorType(A);switch(B){case this.OP_TYPE_N_OPERAND:this._showhideOperand(0,true,true);this._showhideOperand(1,false);break;case this.OP_TYPE_1_OPERAND:this._showhideOperand(0,true,false);this._showhideOperand(1,false);break;case this.OP_TYPE_2_OPERAND:this._showhideOperand(0,true,false);this._showhideOperand(1,true,false);break;case this.OP_TYPE_0_OPERAND:this._showhideOperand(0,false,false);this._showhideOperand(1,false);break;default:break;}this._updateValueLabel(A);this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);if(B==this.OP_TYPE_N_OPERAND){this.idMoreValueEnableLink[0].hide();this.idMoreValueEnableLink[1].hide();if(this.idSelectValuesDiv.hidden==false){this.enableConditionButton(this.idAnyOfListValuesLink,false);}else{this.enableConditionButton(this.idAnyOfListValuesLink,true);}}this._parentDialog.adjustSize();},isTopBottomOp:function(B){for(var A=0;A<this.topBottomOpGroup.length;A++){if(B==this.topBottomOpGroup[A]){return true;}}return false;},_updateValueLabel:function(A){var B=!(this.isTopBottomOp(A));if(A==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN||A==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN){if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&B){this.idValueTextDiv[0].text=actuate.util.Utility.getLocalizedString("filterDialog.text.dateValueFrom");this.idValueTextDiv[1].text=actuate.util.Utility.getLocalizedString("filterDialog.text.dateValueTo");}else{this.idValueTextDiv[0].text=actuate.util.Utility.getLocalizedString("filterDialog.text.valueFrom");this.idValueTextDiv[1].text=actuate.util.Utility.getLocalizedString("filterDialog.text.valueTo");}}else{if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&B){this.idValueTextDiv[0].text=actuate.util.Utility.getLocalizedString("filterDialog.text.dateValue");}else{this.idValueTextDiv[0].text=actuate.util.Utility.getLocalizedString("filterDialog.text.value");}}},_showhideOperand:function(B,A,C){if(A){this.idValueBlock[B].show();if(C==true){this.idValueInput[B].hide();this.__updateTooltip(this.idValueInput[B].getEl().dom);this.idInOPValuesSelect.show();this.idInOPValuesSelect.setMultiSelect(true);this.idValuesList.setMultiSelect(true);this.idAnyOfListValuesDiv.show();if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="datadesign"){this.idAnyOfListValuesDiv.hide();return ;}}this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);this._showhideMoreValueLink(1,false);}else{if(C==false){this.idValueInput[B].show();this.__updateTooltip(this.idValueInput[B].getEl().dom);this.idInOPValuesSelect.hide();this._showhideMoreValueLink(B,this.isTopBottomOp(this._operator.getValue()));}}this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);if(this.idInOPValuesSelect.getLength()>0){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}this._showHideCalendarLink(B,this.isTopBottomOp(this._operator.getValue())||this._operator.getValue()==this.conditionIn||this._operator.getValue()==this.conditionNotIn);}else{this.idValueBlock[B].hide();this.stateMoreValue[B]=false;}this._showHideFormatHint();},_showHideCalendarLink:function(B,A){if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&!A){this.idDateImg[B].show();}else{this.idDateImg[B].hide();}},_showHideFormatHint:function(){var A=!(this.isTopBottomOp(this._operator.getValue()));if((this.idValueBlock[0].hidden==true&&this.idValueBlock[1].hidden==true)||(this.valueValueBlock[0].hidden==true&&this.valueValueBlock[1].hidden==true)||(this.idValueBlock[1].hidden==true&&this.valueValueBlock[0].hidden==true)){this.idFormatHintMessage.setText("");}else{if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)){var B="";if(this.columnDataTypeCode==actuate.Constant.DataType.DATE){B=actuate.util.Utility.getLocalizedString("filterDialog.text.dateFormatMsg")+" "+actuate.util.Utility.toDate(new Date());}else{if(this.columnDataTypeCode==actuate.Constant.DataType.TIME){B=actuate.util.Utility.getLocalizedString("filterDialog.text.timeFormatMsg")+" "+actuate.util.Utility.toTime(new Date());}else{if(this.columnDataTypeCode==actuate.Constant.DataType.DATETIME){B=actuate.util.Utility.getLocalizedString("filterDialog.text.dateTimeFormatMsg")+" "+actuate.util.Utility.toDateTime(new Date());}}}this.idFormatHintMessage.setText(B);}else{this.idFormatHintMessage.setText("");}}},_postShow:function(){actuate.dialog.impl.helper.AbstractIVDialog.prototype._postShow.call(this);if(this.firstTime==undefined){this.firstTime=false;if(this.idValueBlock[0].hidden==false){this.idValueBlock[0].show();}}},_showhideMoreValueLink:function(A,B){if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="datadesign"){B=true;}}if(this.columnType=="measure"){B|=true;}if(B){this.idMoreValueEnableLink[A].hide();this.stateMoreValue[A]=false;this._showhideMoreValueSelect();return ;}this.idMoreValueEnableLink[A].show();this.idMoreValueEnableLink[A].disabled=this.stateMoreValue[A]!=false;this.enableConditionButton(this.idMoreValueEnableLink[A],this.stateMoreValue[A]==false);},_showhideMoreValueSelect:function(){if(this.columnType!="measure"&&(this.stateMoreValue[0]==true||this.stateMoreValue[1]==true)){this.idSelectValuesDiv.show();}else{this.idSelectValuesDiv.hide();}this._parentDialog._fixDropShadow();},appendConditionLine:function(C,B){var A=B.manager.getConditionLine(C);if(A==null){return ;}var D=this.createConditionLineText(A);if(D!=null){B.list.add([D]);this._selectedConditionChanged(B);B.list.setSelectedIndex(C,true);}},insertConditionLine:function(E,C){var B=C.manager.getConditionLine(E);if(B==null){return ;}var G=this.createConditionLineText(B);var A=C.manager.getConditionLineCount();if(E==A-1){C.list.add([G]);}else{C.list.insertAt(E,[G]);if(E==0){var F=C.manager.getConditionLine(1);F.setLogicOp("and");var D=this.createConditionLineText(F);C.list.modify(1,[D]);}}C.list.setSelectedIndex(E,true);this._selectedConditionChanged(C);},replaceConditionLine:function(D,B){var A=B.manager.getConditionLine(D);if(A==null){return ;}var C=this.createConditionLineText(A);B.list.modify(D,[C]);this._selectedConditionChanged(B);},createConditionLineText:function(A){var C="";if(A.getLogicOp()=="and"){C=C+"and ";}else{if(A.getLogicOp()=="or"){C=C+"or ";}}if(A.getHasLeftBracket()){C=C+"( ";}if(A.getHasNot()){C=C+"not( ";}var B=this.createExpressionText(A);if(B==null){return null;}C=C+B;if(A.getHasNot()){C=C+" )";}if(A.getHasRightBracket()){C=C+" )";}return C;},createExpressionText:function(A){var B="";if(A.getOperator()==this.conditionBetween){B=A.getRow()+" between "+A.getFilterOperands()[0].value+" and "+A.getFilterOperands()[1].value;}else{if(A.getOperator()==this.conditionNotbetween){B=A.getRow()+" not between "+A.getFilterOperands()[0].value+" and "+A.getFilterOperands()[1].value;}else{if(A.getOperator()==this.conditionIsnull){B=A.getRow()+" is null";}else{if(A.getOperator()==this.conditionIsnotnull){B=A.getRow()+" is not null";}else{if(A.getOperator()==this.conditionIstrue){B=A.getRow()+" is true";}else{if(A.getOperator()==this.conditionIsfalse){B=A.getRow()+" is false";}else{if(A.getOperator()==this.conditionGt){B=A.getRow()+" > "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionGe){B=A.getRow()+" >= "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionLt){B=A.getRow()+" < "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionLe){B=A.getRow()+" <= "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionEq){B=A.getRow()+" = "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionNe){B=A.getRow()+" != "+A.getFilterOperands()[0].value;}else{if(A.getOperator()==this.conditionTopn||A.getOperator()==this.conditionBottomn||A.getOperator()==this.conditionToppercent||A.getOperator()==this.conditionBottompercent){B=A.getOperator()+"( "+A.getRow()+", "+A.getFilterOperands()[0].value+" )";}else{if(A.getOperator()==this.conditionIn){B=A.getRow()+" in( "+A.getFilterOperands()[0].value+" )";}else{if(A.getOperator()==this.conditionNotIn){B=A.getRow()+" not in( "+A.getFilterOperands()[0].value+" )";}else{if(A.getOperator()==this.conditionLike||A.getOperator()==this.conditionNotLike){B=A.getOperator()+" ( "+A.getRow()+", "+A.getFilterOperands()[0].value+" )";}else{B="";}}}}}}}}}}}}}}}}return B;},clearResultSetColumn:function(){this.resultSetName.setValue("");},_isValidValueInput:function(A){return !(this.idValueInput[A].getValue()==""||this.idValueInput[A].getValue()==null);},resetGUI:function(){this.idFormatHintMessage.setText("");this.columnName=this.resultSetName.getValue();this.loadConditions(this.columnDataTypeCode);this.idValueInput[0].setValue("");this.__updateTooltip(this.idValueInput[0].getEl().dom);this.idValueInput[1].setValue("");this.__updateTooltip(this.idValueInput[1].getEl().dom);this.idValuesList.clear();this.columnValues=null;this.idFilterText.setValue("");this.valuesLoadedFlag="false";var A=this._operator;A.setSelectedIndex(0);this.stateMoreValue=[false,false];this.idInOPValuesSelect.clear();this._showOperandGUI(A.getValue());this.idAnyOfListValuesDiv.hide();this._popupEmptyCondition=true;},__neh_clickAndButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType1("and");},setLogicOpType1:function(C){var D=this._filterList.getSelectedIndex();if(D>0){var B=this._filterManager.getConditionLine(D);B.setLogicOp(C);var A=this.createConditionLineText(B);this._filterList.modify(this._filterList.getSelectedIndex(),[A]);}},__neh_clickOrButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType1("or");},__neh_clickNotButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("not");},setLogicOpType2:function(C){var D=this._filterList.getSelectedIndex();if(D>=0){var B=this._filterManager.getConditionLine(D);if(C=="not"){if(B.getHasNot()){B.setHasNot(false);}else{B.setHasNot(true);}}else{if(C=="leftBracket"){if(B.getHasLeftBracket()){B.setHasLeftBracket(false);}else{B.setHasLeftBracket(true);}}else{if(C=="rightBracket"){if(B.getHasRightBracket()){B.setHasRightBracket(false);}else{B.setHasRightBracket(true);}}}}var A=this.createConditionLineText(B);this._filterList.modify(this._filterList.getSelectedIndex(),[A]);}},__neh_clickLeftBracketButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("leftBracket");},__neh_clickRightBracketButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("rightBracket");},_validateUIOperand:function(A){if(this.idValueInput[A].getValue()){if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}return true;},__neh_clickAddConditionButton:function(F,D){if(F&&F.blur){F.blur();}var B=this._filterView;if(this.columnType=="measure"){B=this._measureFilterView;}actuate.util.Event.stop(D);if(this.addConditionButton.disabled==true){return ;}var H=B.list.getSelectedIndex();if(!this._validate()){return ;}if(!(H>=0)){H=B.list.getLength()-1;}var E=new actuate.data.ConditionLine();if(H>=0){E.setLogicOp("and");}var G=H+1;E.setRow(this.resultSetName.getValue());E.setOperator(this._operator.getValue());var C=this.getOperatorType(this._operator.getValue());var A=this.collectFilterOperandsInfo(C);if(C!=this.OP_TYPE_0_OPERAND){if(this._operator.getValue()==this.conditionEq&&A[0].isLiteral&&(A[0].value==null||A[0].value==actuate.dialog.FILTER_NULL_VALUE)){E.setOperator(this.conditionIsnull);}else{if(this._operator.getValue()==this.conditionNe&&A[0].isLiteral&&(A[0].value==null||A[0].value==actuate.dialog.FILTER_NULL_VALUE)){E.setOperator(this.conditionIsnotnull);}else{E.setFilterOperands(A);}}}G=B.manager.insertConditionLine(E,G);this.insertConditionLine(G,B);if(B==this._measureFilterView){this._filterView.list.setSelectedIndex(-1);}else{this._measureFilterView.list.setSelectedIndex(-1);}this._validated=false;},__neh_clickChangeConditionButton:function(E){var B=this._filterView;if(!(this._filterView.list.getSelectedIndex()>=0)){B=this._measureFilterView;}actuate.util.Event.stop(E);if(this.changeConditionButton.disabled==true){return ;}if((B==this._filterView&&this.columnType=="measure")||(B==this._measureFilterView&&this.columnType!="measure")){return ;}if(B==this._filterView&&(!(B.list.getSelectedIndex()>=0)||!this._validate())){return ;}else{if(B==this._measureFilterView&&(!(B.list.getSelectedIndex()>=0)||!this._validate())){return ;}else{if(!(B.list.getSelectedIndex()>=0)){return ;}}}var F=new actuate.data.ConditionLine();var H=B.list.getSelectedIndex();var D=B.manager.getConditionLine(H);if(D==null){return ;}if(B==this._filterView&&H>0){F.setLogicOp(D.getLogicOp());}F.setRow(this.resultSetName.getValue());F.setOperator(this._operator.getValue());var C=this.getOperatorType(this._operator.getValue());var A=this.collectFilterOperandsInfo(C);if(C!=this.OP_TYPE_0_OPERAND){if(this._operator.getValue()==this.conditionEq&&A[0].isLiteral&&A[0].value==""){F.setOperator(this.conditionIsnull);}else{if(this._operator.getValue()==this.conditionNe&&A[0].isLiteral&&A[0].value==""){F.setOperator(this.conditionIsnotnull);}else{F.setFilterOperands(A);}}}var G=B.manager.replaceConditionLine(F,H);this.replaceConditionLine(G,B);this._validated=false;},validate:function(){if(this.idFilterText.hasFocus||this.value1Text.hasFocus||this.value2Text.hasFocus){return false;}return actuate.dialog.impl.helper.GadgetBuilderFilterTab.superclass.validate.apply(this,arguments);},_validate:function(){if(this.resultSetName.getValue()==null||this.resultSetName.getValue()==""){if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.NoFilterBy"));}return false;}var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_1_OPERAND&&(this.columnDataTypeCode!=actuate.Constant.DataType.STRING||this.isTopBottomOp(this._operator.getValue()))){if(!this._isValidValueInput(0)){if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}else{if(A==this.OP_TYPE_2_OPERAND&&this.columnDataTypeCode!=actuate.Constant.DataType.STRING){if(!this._isValidValueInput(0)||!this._isValidValueInput(1)){if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}else{if(A==this.OP_TYPE_N_OPERAND){if(this.idInOPValuesSelect.getLength()==0){if(this._parentDialog._consumer._eventDispatcher){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("common.alertTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}}}return true;},getTextValue:function(C,F){if(!F){return this.idValueInput[C].getValue();}var B="";var E="";var A=this.idInOPValuesSelect.getStore().collect("value",true);for(var D=0;D<A.length;D++){B+=(E+A[D]);E="|";}return B;},collectOperand:function(A,B){var C=new Object();C.isDataField=false;C.isLiteral=true;C.value=this.getTextValue(A,B);C.boundDataColumnName=null;return C;},collectFilterOperandsInfo:function(B){var A=new Array();if(B!=this.OP_TYPE_0_OPERAND){var C=this.collectOperand(0,B==this.OP_TYPE_N_OPERAND);A.push(C);}if(B==this.OP_TYPE_2_OPERAND){var C=this.collectOperand(1,false);A.push(C);}return A;},createFilter:function(){var C=new Array();if(this._filterManager.getConditionLineCount()>1){for(var E=0;E<this._filterManager.getConditionLineCount()-1;E++){var G=this._filterManager.getConditionLine(E+1);var D={};D.logicOp=G._logicOp;D.hasLeftBracket=G._hasLeftBracket;D.hasRightBracket=G._hasRightBracket;D.hasNot=G._hasNot;D.row=G._row;D.operator=G._operator;var J=new Array();for(var E=0;E<G._filterOperands.length;E++){var F=G._filterOperands[E];if(F){var K=F.anyOfLiteral;if(K!=null&&K.length>0){var L=new Object();L.isAnyOf=true;L.isLiteral=true;L.isDataField=false;var I="";for(var B=0;B<K.length;B++){var H=K[B];if(B>0){I+="|";}I+=H;}L.value=I;L.boundDataColumn=null;J.push(L);}else{var H=F.literal;if(H!=null){if(H==null){H="";}var L=new Object();L.isAnyOf=false;L.isLiteral=true;L.isDataField=false;L.value=H;L.boundDataColumn=null;J.push(L);}else{if(F.dataField){var L=new Object();L.isAnyOf=false;L.isLiteral=false;L.isDataField=true;var A=bindings[F.dataField];L.boundDataColumnName=A.name;L.value=A.name;J.push(L);}}}}}D.operands=J;C[E]=D;}}return C;},_createBoundDataColumnSoap:function(){var G=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var I=actuate.util.XmlDom.createElement(G,"BoundDataColumnList");var B=this._filterManager.getConditionLineCount();if(B>0){for(var F=0;F<B;F++){var M=this._filterManager.getConditionLine(F);var E=actuate.util.XmlDom.createElement(G,"BoundDataColumn");var A=actuate.util.XmlDom.createElement(G,"Name");var K=M.getRow();var C=G.createTextNode(K);A.appendChild(C);E.appendChild(A);var L=actuate.util.XmlDom.createElement(G,"Type");var J=null;var D=M.getRow();if(this._cubeMode){var D=M.getRow();J=this._filterByTree.getNodeById("dimensions::"+D.split("/")[0]+"::"+D);}else{J=this._filterByTree.getNodeById(D);}if(J!=null){K=J.attributes.datatype;}else{K="string";}var H=G.createTextNode(K);L.appendChild(H);E.appendChild(L);I.appendChild(E);}}if(this._allowMeasureFilter){var B=this._measureFilterManager.getConditionLineCount();for(var F=0;F<B;F++){var M=this._measureFilterManager.getConditionLine(F);var E=actuate.util.XmlDom.createElement(G,"BoundDataColumn");var A=actuate.util.XmlDom.createElement(G,"Name");var K=M.getRow();var C=G.createTextNode(K);A.appendChild(C);E.appendChild(A);var L=actuate.util.XmlDom.createElement(G,"Type");var L=actuate.util.XmlDom.createElement(G,"Type");var J=null;var D=M.getRow();J=this._filterByTree.getNodeById("measures::"+D);if(J!=null){K=J.attributes.datatype;}else{K="string";}var H=G.createTextNode(K);L.appendChild(H);E.appendChild(L);I.appendChild(E);}}return I;},getOperatorType:function(C){for(var B=0;B<4;B++){for(var A=0;A<this.opCategory[B].length;A++){if(C==this.opCategory[B][A]){return B;}}}return 0;},createMoreValuesRequest:function(C){var A=new actuate.data.BoundDataColumn();A.setName(C);var B=new actuate.data.BoundDataColumnList();B.setBoundDataColumn(A);return this.ivData.getBoundDataColumnList(B);},_showHideFindRow:function(){if(this.columnDataTypeCode!=actuate.Constant.DataType.STRING){this.idFindRow.hide();this.idFilterText.hide();this.idFindButton.hide();this.idFilterTextLabel.hide();}else{this.idFindRow.show();this.idFilterText.show();this.idFindButton.show();this.idFilterTextLabel.show();}},showData:function(B){this.idValuesList.clear();if(B){var A=new actuate.data.ResultSetData(B);var D=A.getRows();this.populateDataInUI(D);this._rowCount=parseInt(A.getRowCount());var C=A.getEndOfResultSet();this.enableConditionButton(this.idNext,false);this.enableConditionButton(this.idPrevious,false);if(!C){this.enableConditionButton(this.idNext,true);}if(this._currCursor>0){this.enableConditionButton(this.idPrevious,true);}}},_populateColumnValuesInUI:function(B){if(this.idValuesList.getLength()>0){this.idValuesList.setSelectedIndex(0,false);}if(B&&B.length>0){var A=[];for(var C=0;C<B.length;C++){if(B[C]!=null){var D=B[C];if(D!=null&&D[0]){A.push([D,D]);}}}this.idValuesList.setStore(A);}},populateDataInUI:function(E){if(this.idValuesList.getLength()>0){this.idValuesList.setSelectedIndex(0,false);}if(E.length>0){var B=[];for(var A=0;A<E.length;A++){if(E[A]!=null){var C=(E[A].length>1)?E[A][1]:E[A][0];if(C==null){C=actuate.util.Utility.getLocalizedString("gadgetBuilderFilterDialog.data.nullValue");}var D=E[A][0];B.push([D,C]);}}this.idValuesList.setStore(B);}},moreValuesSelectionChanged:function(){var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_N_OPERAND){this._fillSelectedValuesInList(true);}else{this.fillTextBox(true);}},__neh_ValuesListKeyPress:function(B){var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_N_OPERAND){if(B.keyCode==38||B.keyCode==40){this._fillSelectedValuesInList(false);}else{this._fillSelectedValuesInList(true);}}else{if(B.keyCode==38||B.keyCode==40){this.fillTextBox(false);}else{this.fillTextBox(true);}}},__neh_ListClick:function(A){setTimeout(actuate.Method.bind(this.moreValuesSelectionChanged,this),100);},_fillSelectedValuesInList:function(D){if(D){var A=this.idValuesList.getSelectedRecords();if(A){for(var C=0;C<A.length;C++){var B=A[C].value;var E=A[C].text;if(!this.idInOPValuesSelect.contains(B)){this.idInOPValuesSelect.add([B]);}}}}if(this.idInOPValuesSelect.getLength()>0){this.idInOPValuesSelect.setSelectedIndex(this.idInOPValuesSelect.getLength()-1,true);this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}else{this.idInOPValuesSelect.setSelectedIndex(null);}},__neh_FindClick:function(E){if(this.idFilterText.getValue()!=null){this.idValuesList.clear();this._filterText=this.idFilterText.getValue();var G=new Array();var A=new Object();A.name="FilterText";A.value=this._filterText;var H=new Object();H.name="target";H.value=this._parentDialog._classname;var D=new Object();D.name="startrow";D.value="0";G[0]=A;G[1]=H;G[2]=D;var B=new Object();B.name="columnName";B.value=this.resultSetName.getValue();G[3]=B;var F={operandArray:G,dataObject:this._dataObjectSoap,target:this._target,dataMart:this._dataMartSoap};var C={"data":F};if(this._parentDialog._consumer._eventDispatcher){if(actuate.util.Utility.isArray(this._dataObject)){if(this._dataObject[0].objecttype=="new"&&this._dataObject[1]=="data"){this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATAMART_MOREVALUES_FILTER,C,true);}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,C,true);}}else{this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.event.__E_DATASOURCE_MOREVALUES_FILTER,C,true);}}}},__neh_FilterTextChange:function(B,A){if(A.keyCode==13){this.__neh_FindClick(A);}},fillTextBox:function(D){var C="";if(this.idValuesList.getSelectedIndex()!=-1&&this.idValuesList.getLength()>0){C=this.idValuesList.getSelectedValue();}else{return ;}var B=this.stateMoreValue.length;for(var A=0;A<B;A++){if(this.stateMoreValue[A]==true){if(D){this.idValueInput[A].setValue(C);this.__updateTooltip(this.idValueInput[A].getEl().dom);}break;}}},matchDataType:function(B,A){if(actuate.util.Utility.isDateTime(A)||A==actuate.Constant.DataType.STRING){return B==A;}else{return B==actuate.Constant.DataType.INTEGER||B==actuate.Constant.DataType.FLOAT||B==actuate.Constant.DataType.DECIMAL||B==actuate.Constant.DataType.BOOLEAN;}},showHideCalendarDiv:function(A){if(this.idCalendar){if(A){if(this.idCalendar.style.display=="none"){this.cal.style.display="";this.idCalendar.appendChild(this.cal);this.idCalendar.style.display="";}}else{if(this.idCalendar.style.display==""){this.cal.style.display="none";this.idCalendar.removeChild(this.cal);this.idCalendar.style.display="none";}}}this._parentDialog.adjustSize();},enableConditionButton:function(B,A){if(A){B.enable();}else{B.disable();}},loadConditions:function(B){var A=[];var C=actuate.util.Utility.isNumber(B);var D=actuate.util.Utility.isDateDataType(B);var E=(B==actuate.Constant.DataType.BOOLEAN);if(E){A.push([this.conditionIstrue,this.textIstrue]);A.push([this.conditionIsfalse,this.textIsfalse]);}else{A.push([this.conditionEq,this.textEq]);A.push([this.conditionNe,this.textNe]);A.push([this.conditionLt,this.textLt]);A.push([this.conditionLe,this.textLe]);A.push([this.conditionGt,this.textGt]);A.push([this.conditionGe,this.textGe]);A.push([this.conditionBetween,this.textBetween]);A.push([this.conditionNotbetween,this.textNotbetween]);}A.push([this.conditionIsnull,this.textIsnull]);A.push([this.conditionIsnotnull,this.textIsnotnull]);if(!E&&!C&&!D){A.push([this.conditionLike,this.textLike]);A.push([this.conditionNotLike,this.textNotLike]);}A.push([this.conditionIn,this.textIn]);A.push([this.conditionNotIn,this.textNotIn]);if(C){A.push([this.conditionIstrue,this.textIstrue]);A.push([this.conditionIsfalse,this.textIsfalse]);}this._operator.setStore(A);},createFilterSoap:function(){return this._filterManager.createGadgetFilterSoap();},createMeasureFilterSoap:function(){return this._measureFilterManager.createGadgetMeasureFilterSoap();},__setTreeStoreValues:function(C,F,E){if(C&&F){var B=E;if(!B){B=["category","column","dimension","measure","parameter"];}for(var D=0;D<B.length;D++){switch(B[D]){case"category":var A=this._getCategories(F.columns);this._pushDataToStore(null,A,C);break;case"column":this._pushDataToStore(null,F.columns,C);break;case"dimension":this._pushDataToStore(null,F.dimensions,C);break;case"measure":this._pushDataToStore(null,F.measures,C);break;case"parameter":this._pushDataToStore(null,F.parameters,C);break;default:break;}}}},_getCategories:function(E){var A={};var B=[];if(E){for(var D=0;D<E.length;D++){if(this.__canShowCategory(E[D])){var F={};F.name="categore::"+E[D].categoryName+"_id";F.displayName=E[D].categoryName;F.type="category";F.title=E[D].categoryHelpText||E[D].categoryName;F.strong=true;A[F.name]=F;}}for(var C in A){B.push(A[C]);}}return B;},__canShowCategory:function(A){return(A&&A.categoryName)?true:false;},__isGroupDisabled:function(A){return false;},_getType:function(B){var A;if(B){A=B.type;if(B.levels&&B.shared){A="sharedDimension";}}return A;},__addDataIntoTreeStore:function(A,B){if(A&&B&&!(A.value&&A.value.dataType=="blob")){A.disabled=this._isDisabled(A,B);B.add(A);}},_isDisabled:function(B,A){if(B){return B.disabled?true:false;}},_getTooltip:function(C){var B=(C&&C.value)?C.value:C;if(B){var A=B.title;switch(B.type){case"column":A=B.name;if(B.categoryName){A=B.categoryName+"/"+(B.displayName||B.name);}break;case"level":A=B.fullName;break;case"measure":A=B.groupName+"/"+B.name;break;default:break;}return A;}}});