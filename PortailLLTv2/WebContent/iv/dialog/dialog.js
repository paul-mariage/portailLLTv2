actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.constant=actuate.Class.create();actuate.Class.extend(actuate.dialog.impl.constant,{EventFeatureMapping:{},DesignChoice:{FILTER_OPERATOR_EQ:"eq",FILTER_OPERATOR_NE:"ne",FILTER_OPERATOR_LT:"lt",FILTER_OPERATOR_LE:"le",FILTER_OPERATOR_GT:"gt",FILTER_OPERATOR_GE:"ge",FILTER_OPERATOR_BETWEEN:"between",FILTER_OPERATOR_NOT_BETWEEN:"not-between",FILTER_OPERATOR_NULL:"is-null",FILTER_OPERATOR_NOT_NULL:"is-not-null",FILTER_OPERATOR_TRUE:"is-true",FILTER_OPERATOR_FALSE:"is-false",FILTER_OPERATOR_LIKE:"like",FILTER_OPERATOR_NOT_LIKE:"not-like",FILTER_OPERATOR_MATCH:"match",FILTER_OPERATOR_NOT_MATCH:"not-match",FILTER_OPERATOR_TOP_N:"top-n",FILTER_OPERATOR_BOTTOM_N:"bottom-n",FILTER_OPERATOR_TOP_PERCENT:"top-percent",FILTER_OPERATOR_BOTTOM_PERCENT:"bottom-percent",FILTER_OPERATOR_IN:"BirtComp.anyOf",FILTER_OPERATOR_NOT_IN:"!BirtComp.anyOf",FILTER_OPERATOR_IN_NEW:"in",FILTER_OPERATOR_NOT_IN_NEW:"not-in",UNITS_PT:"pt",UNITS_PC:"pc",UNITS_PERCENTAGE:"%",UNITS_CM:"cm",UNITS_MM:"mm",UNITS_IN:"in",UNITS_EM:"em",UNITS_EX:"ex",UNITS_PX:"px"},DataMartAccessType:{TRANSIENT:"transient",LATEST:"latest",SPECIFIC:"specificVersion"}});actuate.dialog.impl.constant.CSS_INPUTBOX="commonInputBoxStyle";actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.EventConstants={__E_BATCH_UPDATE:"__E_BATCH_UPDATE",ON_DIALOG_OK:"onDialogOk",ON_DIALOG_CANCEL:"onDialogCancel",ON_DIALOG_WARNING:"onDialogWarning",ON_DIALOG_VALID:"onDialogValid",ON_DIALOG_CHANGE_LOCALE:"onDialogChangeLocale",ON_SYNC_DATAMART_METADATA:"onSyncDataMartMetaData",ON_VALIDATE_BRD_EXPRESSION:"onCheckBRDValidity",__E_GET_BOOKMARKS:"GetBookmarks",__E_GET_PARAMETERS:"GetParameters",__E_QUERY_FILELIST:"QueryFileList",__E_VALIDATE_BRD_EXPRESSION:"CheckBRDValidity"};actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogEventHandlers={};actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.Operation={};actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.MetadataQueries={};actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogSoapResponseHandler=actuate.Class.extendClass(actuate.common.SoapResponseHandler,{process:function(D,G){var F=D.getElementsByTagName("UpdateData");this._processUpdateData(F,G);if(G){var E;if(F){E={};for(var C=0;C<F.length;C++){var A=F[C].getElementsByTagName("Data");if(A&&A.length>0){var B=A[0].getElementsByTagName("Json");if(B.length>0){actuate.Class.extend(E,actuate.util.Utility.parseJson(B[0]));}else{actuate.Class.extend(E,A[0]);}}}}G(E);}},_processUpdateData:function(G,H){if(!G){return ;}for(var C=0;C<G.length;C++){var F=G[C].getElementsByTagName("Target");if(!F||F.length<=0){continue;}var D=G[C].getElementsByTagName("Data");if(!D||D.length<=0){continue;}var E=D[0].getElementsByTagName("RedirectURL");if(E.length>0){this._service.triggerSessionTimeout();continue;}var B=F[0].firstChild.data;if(B=="CommandStack"){var I=D[0];if(I){var A=I.getElementsByTagName("Json");if(A.length>0){I=actuate.util.Utility.parseJson(A[0]);actuate.common.CacheManager.COMMAND_STACK_LENGTH=I.currentRecord;actuate.common.CacheManager.COMMAND_STACK_RECORD=I.stackLength;}}}}}});actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogSoapResponse=actuate.Class.create();actuate.dialog.impl.common.DialogSoapResponse.prototype=actuate.Class.extend(new actuate.common.GenericResponse(),{_getResponseHandler:function(){return new actuate.dialog.impl.common.DialogSoapResponseHandler(this._service);},_getSoapFaultHandler:function(){return new actuate.dialog.impl.common.DialogSoapFaultHandler(this._service);}});actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogSoapFaultHandler=actuate.Class.create();actuate.dialog.impl.common.DialogSoapFaultHandler.prototype=actuate.Class.extend(new actuate.common.SoapResponseHandler(),{initialize:function(A){actuate.common.SoapResponseHandler.prototype.initialize.call(this,A);},process:function(A,B){if(B){B(A);}}});actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogService=actuate.Class.extendClass(actuate.common.Service,{_instanceId:null,_type:null,alwaysShowProgressive:false,initialize:function(C,A,B){actuate.dialog.impl.common.DialogService.superclass.initialize.call(this,C,A);this.maxChannel=1;this.alwaysShowProgressive=B?true:false;},processBind:function(A,B,C){A.apiInstance.__bind(B);},getOperatorByEvent:function(A){return actuate.dialog.impl.common.Operation[A];},triggerSessionTimeout:function(){actuate.dialog.impl.common.DialogService.superclass.triggerSessionTimeout.call(this);this.apiInstance.sessionTimeout();},showProgressIndicator:function(){if(this.apiInstance._mask){this.apiInstance._mask.__showMask();}},hideProgressIndicator:function(){if(this.apiInstance._mask){this.apiInstance._mask.__hideMask();}}});actuate.util.Package.define("actuate.dialog.impl.common");actuate.dialog.impl.common.DialogRequest=actuate.Class.extendClass(actuate.common.GenericRequest,{_eventType:null,_operationData:null,_metadata:null,_metadataQuery:null,_lazyLoaderFinished:null,_responseProcessed:false,initialize:function(A,B){this.consumer=B;this._lazyLoaderFinished=null;this._responseProcessed=false;this._lazyLoaderCallback_closure=actuate.Method.bind2(this._lazyLoaderCallback,this);actuate.dialog.impl.common.DialogRequest.superclass.initialize.call(this,A);},sendJson:function(B,I,K,G){var F=new actuate.common.SoapRequest((this.consumer&&this.consumer.getId)?this.consumer:this._service);var A=0;var C;for(var J in B){A++;C=J;var E=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var H=actuate.util.XmlDom.createElement(E,actuate.Constant.tag.Json);var D=E.createTextNode(B[J]);H.appendChild(D);E.documentElement.appendChild(H);F.addOperation(this._service.getId(),I,J,[E,null]);}if(A>1){C=actuate.dialog.impl.EventConstants.__E_BATCH_UPDATE;}this.processEvent(C,I,null,F,K,G);},processEvent:function(B,H,E,F,I,G){if(this._busy){return ;}this._eventType=B;this._finishCallback=I;this._errorCallback=G;this._ajaxResponse=null;this._metadataQuery={};this._operationData=E||{};this._responseProcessed=false;this._currentElement=this._getSelectedElement(H,this._service._instanceId);this._metadataQuery=this._getQuerySpec(this._eventType);if(this._metadataQuery){do{var C=this._eventType;this._currentElement=this._getSelectedElement(H,this._service._instanceId);if(this._metadataQuery.preProcess){var A=this._metadataQuery.preProcess.call(this,this._service._type);if(A&&A!=C){this._eventType=A;this._metadataQuery=this._getQuerySpec(A);}}}while(this._metadataQuery&&C!=this._eventType);}if(this._metadataQuery){if(this._metadataQuery.invalidateMdType){this._service.cacheManager.invalidateMetadata(this._currentElement,this._metadataQuery.invalidateMdType);}if(this._metadataQuery.mdType){var D=B.replace("__E_","__OP_");this._service.cacheManager.queryMetadata(F,this._currentElement,D,this._metadataQuery.mdType,this._metadataQuery.changesReportLayout);}}this._progressOn=this._service.alwaysShowProgressive;if(F&&!F.isEmpty()){if(this._progressOn&&this._service.showProgressIndicator){this._service.showProgressIndicator();}this._setBusy(true);this._connect(F);}this._loadFeature();this._processResponses();return false;},_getMetadataQuerySpecs:function(){return actuate.dialog.impl.common.MetadataQueries;},_getSelectedElement:function(A,B){var C=this._service.documentModel;if(A&&B){C=this._service.documentModel.getElementByIId(B);}return C;},_lazyLoaderCallback:function(G){for(var B=0;B<G.length;B++){var E=G[B];var A=actuate.dialog.impl.common.DialogEventHandlers[E.getName()];if(E&&A){var D=E.getEvents();for(var C=0;C<D.length;C++){var F=A[D[C]];if(F){E.registerEventHandler(D[C],F);}}}}this._lazyLoaderFinished=true;this._processResponses();},_loadFeature:function(){var B=actuate.dialog.impl.constant.EventFeatureMapping[this._eventType];if(B){this._setBusy(true);this._lazyLoaderFinished=false;var A=new Array();A.push({module:"actuate.dialog",feature:B});return actuate.resource.module.feature.require(A,this._lazyLoaderCallback_closure,this._exceptionHandler_closure);}},_processResponses:function(){if(this._lazyLoaderFinished==false||this._ajaxRequestFinished==false||this._responseProcessed){return ;}if(this._progressOn&&this._service.hideProgressIndicator){this._service.hideProgressIndicator();}this._responseProcessed=true;this._setBusy(false);try{if(this._ajaxResponse){this._processAjaxResponse();}if(this._metadataQuery&&this._metadataQuery.target){var B=true;if(!this._metadata){B=this._prepareMetadataResponse();}if(B){this._processMetadataResponse();}}}catch(A){if(this._errorCallback){this._errorCallback(A);return ;}else{throw A;}}if(this._metadataQuery.postProcess){this._metadataQuery.postProcess.call(this,this._operationData);}},_prepareMetadataResponse:function(){var E=this._metadata||{};var B=this._metadataQuery.mdType;if(B){if(!actuate.util.Utility.isArray(B)){B=[B];}for(var C=0;C<B.length;C++){var A=B[C];var D=this._currentElement.getMetadata(A);E[A]=D;}E[actuate.model.Constant.MetadataType.ELEMENT]=this._currentElement;}E.operationData=this._operationData;this._metadata=E;if(this._metadataQuery.postProcessMetadataResponse){if(this._metadataQuery.postProcessMetadataResponse.call(this,E,this._metadataQuery)==false){return false;}}return true;},_getSoapResponse:function(){return new actuate.dialog.impl.common.DialogSoapResponse(this._service);},_processMetadataResponse:function(){var B=this._metadataQuery.target;if(typeof (B)=="function"){B=B.call(this,this._metadata);}if(!B){return ;}var A=null;if(typeof (B)!="string"){A=B;}else{A=actuate.common.ClassLoader.getInstance().forName(B);}if(A){if(A.localBind){A.localBind(this._service,this._metadata);}else{if(A.show){A.setConsumer(this._service.apiInstance);A.setData(this._metadata);A.show();}}}}});actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.Factory={_dialogs:{},getDialog:function(A,G,H){var E=this._dialogs[G];if(!E){E=actuate.common.ClassLoader.getInstance().forName(G);this._dialogs[G]=E;}else{E.reset();}if(E&&actuate.iv&&actuate.iv.ui&&actuate.iv.ui.dialog&&actuate.iv.ui.dialog.IVDialogEventHandlers){var B=actuate.iv.ui.dialog.IVDialogEventHandlers[E.getName()];if(B&&E.getEvents){var D=E.getEvents();if(D){for(var C=0;C<D.length;C++){var F=B[D[C]];if(F){E.registerEventHandler(D[C],F);}}}}}E.setCallback(H);return E;},_getInstance:function(F,C){var B="return "+C+";";var G=new Function(B);var A=G();if(A==null){var E=C+"= new "+F+"( )";var D=new Function(E);D();return G();}return A;}};actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.AbstractIVDialog=function(){};actuate.dialog.impl.helper.AbstractIVDialog.prototype={_name:null,_consumer:null,_instance:null,htmlId:null,_width:500,offsetHeight:null,offsetWidth:null,_visible:null,_rendered:false,_elementType:null,_window:null,_firstTimeShow:null,_title:null,_windowConfig:null,hasOkButton:true,hasCancelButton:true,hasHelpButton:false,hasFooter:true,isResizable:false,hasAutoAdjustSize:true,IV_HELP_CONTEXT:"/birt/wwhelp.htm?single=true&context=BIRTIV",_helpContext:null,_callbacks:null,_dialogMonitor:null,__preventEnterKey:false,initialize:function(C,A,K){this._firstTimeShow=true;if(!this._instance){this._instance=document.getElementById(C);}this._callbacks={};var G={};var D=document.getElementById(C+"_properties");if(D){var H=D.getElementsByTagName("span");for(var E=0;E<H.length;E++){var B=H[E].getAttribute("name");var I=H[E].getAttribute("value");if(B&&I){G[B]=I;}}D.parentNode.removeChild(D);D=null;}this.htmlId=C;this._visible=false;if(this._instance){this._instance.className+=" actuate_shared_resource";if(K!=false){this._instance.className+=" actuate_shared_resource_global";}}if(!this._title){this._title=G["title"];}if(this._width=="auto"){this._width=undefined;}if(this._height=="auto"){this._height=undefined;}this._neh_cancel_closure=actuate.Method.bind(this._neh_cancel,this);this._neh_resize_closure=actuate.Method.bind(this._neh_resize,this);var F=this._initButtons()||null;if(!this._windowConfig){this._windowConfig={};}var J={width:this._width,height:this._height,constrainHeader:true,cls:(this.__cls?"actuate-iv-dialog "+this.__cls:"actuate-iv-dialog"),footer:this.hasFooter,resizable:this.isResizable,closeAction:"hide",modal:true,contentEl:this._instance,visibilityMode:"display",closable:true,allowDragOnBody:true,allowDragOnFooter:true};if(F!=null&&F.length>0){J.buttons=F;J.buttonAlign="right";}if(this._title){J.title=this._title;}this._windowConfig=actuate.Class.extend(J,this._windowConfig);this._window=new actuate.uiadapter.Window(this._windowConfig);this._window.render(actuate.uiadapter.Element.getBody());if(G["showCloseButton"]){if(this._window.windowEl.tools){this._window.windowEl.tools.close.hide();}}if(this._window.getBodyDom()!=null){this._instance=this._window.getBodyDom();}this._base_installEventHandlers(C);this.ivData=new actuate.data.Data();this._dialogMonitor=new actuate.dialog.impl.DialogStatusMonitor();},getWindowDom:function(){return this._window.getEl().dom;},getWindowLastZIndex:function(){return this._window.getLastZIndex();},reset:function(){},getName:function(){if(!this._name&&this._classname){this._name=actuate.util.Package.getLastNamespaceObjectName(this._classname);}return this._name?this._name:"";},_initButtons:function(){if(!this.hasFooter){return null;}var B=actuate.util.Utility;var C=[];this._isMobile=actuate.util.browser&&actuate.util.browser.useMobile();if(this.hasCancelButton){this._cancelBtn=new actuate.uiadapter.Button({text:B.getLocalizedString("baseDialog.button.cancel"),minWidth:50});C.push(this._cancelBtn.buttonEl);}if(this.hasOkButton){var A=B.getLocalizedString("baseDialog.button.ok");if(this._isMobile){A=B.getLocalizedString("baseDialog.button.done");}this._okBtn=new actuate.uiadapter.Button({text:A,minWidth:50,ui:"action",cls:"btn-primary"});C.push(this._okBtn.buttonEl);}if(!this._isMobile){if(this.hasHelpButton){this._helpBtn=new actuate.uiadapter.Button({icon:actuate.getDefaultIportalUrl()+"iv/images/tomerge/dialog/dialogHelp.gif",iconCls:"helpLinkButtonPosition",cls:"helpLinkButtonPosition",style:"position:absolute;right:0;width:30px;height:auto;border:none;margin:0px;padding:0px;"});C.push(this._helpBtn.buttonEl);}}return C.length>0?C:null;},_base_installEventHandlers:function(A){this._window.registerEventHandler("hide",actuate.Method.bind(this._afterHide,this),true);if(this._okBtn){this._okBtn.registerEventHandler("click",actuate.Method.bind(this._neh_okay,this),false);}if(this._cancelBtn){this._cancelBtn.registerEventHandler("click",actuate.Method.bind(this._neh_cancel,this),false);this._window.setCloseButtonHandler(actuate.Method.bind(this._neh_cancel,this));}if(!this.__preventEnterKey){this._window.registerEventHandler("keyup",actuate.Method.bind(this._enter_key,this));}if(this._helpBtn){this._helpBtn.registerEventHandler("click",actuate.Method.bind(this._neh_help_link,this),false);}this._window.registerEventHandler("beforehide",actuate.Method.bind(this._beforeHide,this),false);actuate.uiadapter.EventManager.onWindowResize(this._neh_resize,this);},processBind:function(B,C,A){this._consumer=(B&&B._)?B._:B;var D=false;if(actuate.resource.module.modules["actuate.viewer"].loaded){D=true;}if(A!=null){this._elementType=A;}if(!this._localBind(C,D)){this._show();}},localBind:function(A,B){this._consumer=A;if(!this._localBind(B)){this._show();}},consumerBind:function(A,B){this._consumer=(A&&A._)?A._:A;var C=false;if(actuate.viewer&&actuate.viewer.impl&&this._consumer&&actuate.viewer.impl.Viewer&&this._consumer instanceof actuate.viewer.impl.Viewer&&this._consumer._helper.contentPanel){C=true;}if(!this._localBind(B,C)){this._show();}},processAction:function(A,B){this._consumer=A;if("Close"==B){this._hide();}},showDialog:function(){this._show();},_show:function(){this._preShow();if(this._visible){return ;}this._visible=true;if(this._window){this._window.show();}if(this._consumer&&this._consumer.pushActiveStack){this._consumer.pushActiveStack(this);}if(this._window){this._window.focus();this._postShow();}this._firstTimeShow=false;},_fixDropShadow:function(){if(this._window){this._window.syncShadow();}},_preShow:function(){},setDisabled:function(A){if(this._window){this._window.setDisabled(A);}},setTitle:function(B,A){if(this._window){this._window.setTitle(B,A);}},add:function(A,B){if(this._window){this._window.add(A,B);}},_postShow:function(){if(this.hasAutoAdjustSize){this.adjustSize();}this._adjustPosition();},adjustSize:function(A){this._window.adjustSizeToContent();var B=actuate.util.Utility;if(this._helpBtn&&(B.isIE6||B.isIE7||B.isIE8Compat)){this._helpBtn.hide();this._helpBtn.show();}if(A){this.center();}},center:function(){if(this._window){this._window.center();}},_adjustPosition:function(D){var B=true;var C=this._consumer?this._consumer:(this._helpee?this._helpee._consumer:null);if(!D&&C&&C.needAdjustPosition&&C.needAdjustPosition()){if(C.getWidth){var E=C.getWidth();if(E!=undefined&&this._width!=undefined){if(C.getOffset){var G=C.getOffset();if(G!=undefined){var A=(E<this._width)?0:(E-this._width-(E-this._width)%2)/2;if(C._viewingMode&&(C._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_NORMAL||C._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_MAX)){B=false;var F=C._helper.contentPanel.instance.getBoundingClientRect().top;this._window.setPosition(A+G[0],F+40);}else{B=false;this._window.setPosition(A+G[0],80+G[1]);}}}}}}if(B){this.center();}},_hide:function(){if(this._visible){this._visible=false;if(!this._window.isHidden()){this._window.hide();}}},_preHide:function(){},_beforeHide:function(){if(this._preHide){this._preHide();}if(this._consumer&&this._consumer.popActiveStack){this._consumer.popActiveStack(this);}this._visible=false;this._callbacks={};},isVisible:function(){return this._visible;},_neh_stopEvent:function(A){actuate.util.Event.stop(A);},_neh_resize:function(A){if(!this._window.isHidden()){this._adjustPosition();}},_neh_cancel:function(){if(this._visible){this._hide();this._cancelPress();}},_afterHide:function(){if(this._consumer&&this._consumer.popActiveStack){var A=this._consumer.peekActiveStack(this);if(A){this._window.showMask();}}},__validate:function(){return true;},_neh_okay:function(){if(!this._okPressTimer){this._okPressTimer=window.setTimeout(actuate.Method.bind(this._clearOkPressTimer,this),500);if(this.__validate()){this._okPress();}}},_enter_key:function(A,B){if(!this.__preventEnterKey){var C=B==null?null:B.getTarget();if(!C||"textarea"!=C.type){if(this._visible&&B&&B.keyCode==actuate.widget.EventObject.ENTER&&!this._okPressTimer){this._okPressTimer=window.setTimeout(actuate.Method.bind(this._clearOkPressTimer,this),500);B.stopEvent();if(this.__validate()){this._okPress();}}}}},_clearOkPressTimer:function(){if(this._okPressTimer){window.clearTimeout(this._okPressTimer);this._okPressTimer=null;}},_neh_help_link:function(){this.__openHelp(this.__getHelpTopic());},__openHelp:function(C){if(C){var B=this._helpContext?this._helpContext:this.IV_HELP_CONTEXT;var A=this.__getHelpLinkUrl(this.__getHelpBase(),B,C);window.open(A);}},__getHelpBase:function(){var A=null;var B=this._consumer;if(!B&&this._helpee&&this._helpee.getConsumer){B=this._helpee.getConsumer();}if(B&&!actuate.util.Utility.isEmpty(B._helper,false)){A=B._helper.helpBase;}if(actuate.util.Utility.isEmpty(A,false)){if(B&&!actuate.util.Utility.isEmpty(B.tabInfo,false)){A=B.tabInfo.getHelpDocBase();}}return A;},__getHelpLinkUrl:function(A,C,D){var B=A?A:"";B+=(C?C:"");if(!actuate.util.String.endWith(B,"&topic=")){B+="&topic=";}return B+D;},__getHelpTopic:function(){return null;},setHelpContext:function(A){this._helpContext=A;},__neh_keyup:function(A){actuate.util.Event.stop(A);},__fireEvent:function(A,B){if(this._helpee){this._helpee.fireEvent(A,B);}},_okPress:function(){if(this._callbacks&&this._callbacks.okCallback){this._callbacks.okCallback(this.createSoapNode(),this.createJsonNode?this.createJsonNode():null);}else{this.__fireEvent(actuate.dialog.EventConstants.ON_DIALOG_OK,this.createSoapNode());}this._hide();},__showError:function(A){if(this._callbacks&&this._callbacks.errorCallback){this._callbacks.errorCallback(A);}else{this.__fireEvent(actuate.dialog.EventConstants.ON_DIALOG_WARNING,A);}},setCallback:function(A){this._callbacks=A;},createSoapNode:function(){},_cancelPress:function(){if(this._callbacks&&this._callbacks.cancelCallback){this._callbacks.cancelCallback();}else{this.__fireEvent(actuate.dialog.EventConstants.ON_DIALOG_CANCEL);}},_getId:function(B){var C=B.replace(/\./g,"_");var A=actuate.util.Package.getNamespaceObjectReference(B);if(A&&A._instanceCount>-1){C+="_"+A._instanceCount;}return C;},_getJSId:function(A){return A.replace("IV","iv");},getId:function(){if(this._window){return this._window.getItemId();}},_applyHtmlElementsNames:function(A){for(var B in this._htmlElements){this._htmlElements[B]=A+B;}},getLocalizedString:function(B,A){return actuate.util.Utility.getLocalizedString(this._dialogName+"."+B)||A;},getLocalizedStringParams:function(C,D){var A=[];A.push(this._dialogName+"."+C);for(var B=1;B<arguments.length;B++){A.push(arguments[B]);}return actuate.util.Utility.getLocalizedString.apply(null,A);}};actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.AbstractTabDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractIVDialog,{id:null,_panel:null,_title:null,_parentDialog:null,_componentArray:[],hidden:true,_validateControlArray:[],_invalidCount:0,_dialogMonitor:null,initialize:function(){if(this.__extending){return ;}this.__makeObservable();this._initContent();this._panel=new actuate.widget.panel.Panel({header:false,plain:true,border:false,title:this._title,autoHeight:true,items:this._componentArray});},__makeObservable:function(){var A=actuate.widget.Observable;actuate.util.Utility.applyIf(this,A.prototype);A.prototype.initialize.call(this);},validateControl:function(){this._invalidCount=0;for(var A in this._validateControlArray){if(this._validateControlArray[A].validate&&(!this._validateControlArray[A].validate())){this._invalidCount++;}}if(this._invalidCount>0){return false;}return true;},getInvalidCount:function(){return this._invalidCount;},_initContent:function(){},createSoapNode:function(A,B){},getPanel:function(){return this._panel;},setParent:function(A){this._parentDialog=A;if(A){for(i in this._validateControlArray){if(this._validateControlArray[i].validate){this._validateControlArray[i].registerEventHandler("validChg",actuate.Method.bind(A.changeInvalidCount,A),false);}}}},_initMonitor:function(){},_udpateSizeFromGadgetContainer:function(F){var D=5;var C=7;var E=actuate.Constant.ContentMargin;D+=E;C+=E;if(F.width){var B=actuate.dialog.impl.Utility.stripUnits(F.width)-D;this._control_width.setValue(actuate.dialog.impl.Utility.convertPxtoPt(B)+"");this._control_widthUnit.setValue("pt");}if(F.height){var A=actuate.dialog.impl.Utility.stripUnits(F.height)-C;this._control_height.setValue(actuate.dialog.impl.Utility.convertPxtoPt(A)+"");this._control_heightUnit.setValue("pt");}else{var A=actuate.Constant.ViewerContainer.DEFAULT_HEIGHT-C;this._control_height.setValue(actuate.dialog.impl.Utility.convertPxtoPt(A)+"");this._control_heightUnit.setValue("pt");}},validate:function(){if(!this.validateControl()){return false;}return true;}});actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.AbstractDataTabDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{_filter:null,_filterSoap:null,_clearFilterUI:true,__dataSourceIcons:null,__dataSourceCombo:null,__dataSourceComboStore:null,_newDataMarts:null,_hasNewDatamart:false,__icons:[{type:null,iconCls:"actuate_data_none_image"},{type:"column",iconCls:"actuate_data_column_image"},{type:"attribute",iconCls:"actuate_data_column_image"},{type:"dimensions",iconCls:"actuate_dimensions_image"},{type:"sharedDimension",iconCls:"actuate_shared_dimension_image"},{type:"measures",iconCls:"actuate_measures_image"},{type:"dimension",iconCls:"actuate_dimension_image"},{type:"level",iconCls:"actuate_level_image"},{type:"measure",iconCls:"actuate_measure_image"},{type:"string",iconCls:"actuate_data_column_string_image"},{type:"integer",iconCls:"actuate_data_column_number_image"},{type:"float",iconCls:"actuate_data_column_number_image"},{type:"category",iconCls:"actuate_category_image"}],initialize:function(){this.__dataSourceComboStore=new actuate.widget.data.SimpleStore({fields:["value","text","id","title"]});this.__dataSourceIcons=[{type:"dataset",iconCls:"actuate_data_set_image"},{type:"cube",iconCls:"actuate_cube_image"},{type:"linkeddataset",iconCls:"actuate_linkeddataset_image"},{type:"linkedcube",iconCls:"actuate_linkedcube_image"}];actuate.dialog.impl.helper.AbstractDataTabDialog.superclass.initialize.apply(this,arguments);},__initDataSourceCombo:function(){this.__dataSourceCombo=this.__createDataSourceCombo();this.__dataSourceCombo.registerEventHandler("beforeselect",actuate.Method.bind(this.__canSelect,this));this.__dataSourceCombo.registerEventHandler("nodeclicked",actuate.Method.bind(this._onNodeClick,this));this.__dataSourceCombo.registerEventHandler("select",actuate.Method.bind(this.__onSelectDataSource,this));},__createDataSourceCombo:function(){return new actuate.widget.custom.TreeCombo.TreeComboBox({fieldLabel:actuate.util.Utility.getLocalizedString("common.dataTab.dataFrom"),editable:false,forceSelection:true,valueField:"value",displayField:"title",titleField:"title",autoExpand:true,icons:this.__dataSourceIcons,sortInfo:{folderSort:true,field:"text",direction:"ASC"},showTooltip:true,store:new actuate.widget.custom.TreeCombo.TreeComboStore(this.__dataSourceComboStore)});},getDataSelection:function(){},__selectionChangedHandler:function(B){var A=B;if(A==null){A=this.getDataSelection();}this.fireEvent("datachanged",A);},__clearFilter:function(){this._filter=null;this._filterSoap=null;this._measureFilterSoap=null;this._clearFilterUI=true;},__addFilterSoap:function(A){},__updateFilter:function(B,A){this._filterSoap=B;this._measureFilterSoap=A;this._clearFilterUI=false;},__addToDataSourceStore:function(D,C,E){if(D){for(var B=0;B<D.length;B++){var A=this.__createDataSourceRecord(D[B],C,E);if(A&&this.__dataSourceComboStore&&!this.__dataSourceComboStore.getById(A.id)){this.__dataSourceComboStore.add(new this.__dataSourceComboStore.recordType({id:A.id,text:A.text,value:A,info:this.__createDataSourceInfo(A,E),title:A.title},A.id));}}}},__createDataSourceInfo:function(A,C){var B=A;if(C){if(!B){B=A;}return[C.dataSourceName,B,C.fileName,{type:B.type},C.extension,"used"];}},__createDataSourceRecord:function(F,J,A){var H=F;if(H){switch(J){case"datamart":H.id=(H.fileName||H.name)+"."+H.extension;H.text=H.id.substring(H.id.lastIndexOf("/")+1);H.title=H.id;H.strong=true;break;case"dataset":case"cube":var B=H.name;var M=(H.displayName||H.name);var L="";var C="";var G;var I=H.datamart||A;var D=I.fileName;G=D+"."+I.extension;B=G+"-"+(H.isLinkedDataModel?"linked":"")+J+"-"+B;L=I.extension;if(A&&A.dataSourceName){H.objecttype="used";}else{H.objecttype="new";}H.dataMartName=D;H.dataSourceName=I.dataSourceName;H.id=B;H.text=M;H.type=J;H.parentId=G;H.title=H.parentId+" - "+H.text;if("dataset"==J&&H.isLinkedDataModel){var K=I.linkedDataModels;if(K){for(var E=0;E<K.length;E++){if(K[E].name==H.name){H.linkedDataModel=K[E];break;}}}}break;default:break;}}H.disabled=false;return H;},_addNewDataToDataSourceStore:function(){var A=this._createNewDataRecord();if(this.__dataSourceComboStore&&!this.__dataSourceComboStore.getById(A.id)){this.__dataSourceComboStore.add(new this.__dataSourceComboStore.recordType({id:A.id,text:A.text,value:A,title:A.title},A.id));}},__removeNewDataFromDataSourceStore:function(){if(this.__dataSourceComboStore){var A=this.__dataSourceComboStore.getById("newData");this.__dataSourceComboStore.remove(A);}},_createNewDataRecord:function(){var B=actuate.util.Utility.getLocalizedString("common.dataTab.newData");var A={};A.name="name";A.id="newData";A.text=B;A.type="newData";A.title=B;return A;},_onNodeClick:function(B,A){if(A&&A.data&&A.data.value&&A.data.value.type=="newData"){if(B){B.collapse();}this.__openDataManagerDialog();}else{if(B&&this.__canSelect(B,A)){B.collapse();}}},__canSelect:function(B,A){if(A&&A.data&&A.data.value){switch(A.data.value.type){case"cube":case"dataset":return true;default:break;}}return false;},__selectDataSource:function(D,B){if(D&&D.dataMart&&this.__dataSourceCombo){var E=D.dataMart;var H=E.fileName;var G=E.extension;var A=D.dataObject;var C=D.dataObjectType||B;if(D.isLinkedDataModel){C="linked"+C;}if(H&&G&&A&&C){var F=H+"."+G+"-"+C+"-"+A;this.__dataSourceCombo.setValueById(F);}this.__onSelectDataSource();}},__getSelectedDataSourceInfo:function(){var B=this.__dataSourceCombo.selectedIndex;if(B>=0){var A=this.__dataSourceComboStore.getAt(B);return(A&&A.data)?A.data.info:null;}},_addDataMartsToDataSourceStore:function(A){if(A){this.__addToDataSourceStore(A,"datamart");for(var B=0;B<A.length;B++){var C=A[B];if(C){this.__addToDataSourceStore(C.dataSets,"dataset",C);this.__addToDataSourceStore(C.cubes,"cube",C);}}}},_updateDataSources:function(G,E){this._dataManagerSoap=G.getElementsByTagName(actuate.Constant.tag.Json);if(this._dataManagerSoap){this._dataManagerSoap=this._dataManagerSoap[0];}var F=[];var C;var D;var A;if(E){A=E.dataMarts;C=E.currentSelection;}if(A){for(var B=0;B<A.length;B++){F.push(A[B].data.details);}}this.__showAllDataSources(D,F);},__showAllDataSources:function(B,A){this._hasNewDatamart=false;this._newDataMarts=null;if(this._data&&!A){this._addDataMartsToDataSourceStore(this._data.DataMarts);}else{this._hasNewDatamart=true;this._newDataMarts=A;this.__dataSourceCombo.clear();this._addDataMartsToDataSourceStore(A);}this._addNewDataToDataSourceStore();this.__dataSourceCombo.refresh();this.__dataSourceCombo.setValueById(B||this.__getDefaultSelectionID(A));this.__onSelectDataSource();},__getDefaultSelectionID:function(D){var E=D;if(!E||E.length<=0){E=this._data?this._data.DataMarts:null;}if(E&&E.length>0){var F=E[0];var B=F.dataSets;var C=F.cubes;var A;if(B&&B.length>0){A=this.__createDataSourceRecord(B[0],"dataset",F);}else{if(C&&C.length>0){A=this.__createDataSourceRecord(C[0],"cube",F);}}return A?A.id:null;}},__openDataManagerDialog:function(){var A={};A.okCallback=actuate.Method.bind(this._updateDataSources,this);A.keepSelection=this._hasNewDatamart;A.restricted=true;this._parentDialog._consumer._eventDispatcher.broadcastEvent(actuate.builder.impl.event.__E_GET_MANAGE_DATA,A);},__onSelectDataSource:function(){var A=this.getDataSelection();if(A){if(this._parentDialog._filterPanel){this._parentDialog._filterPanel.filterTable.show();}if(this._changeFilterPanel){this._changeFilterPanel(A);}}this.__selectionChangedHandler();},__populateDataSetToStores:function(E,L){if(E&&E.columns&&L&&L.length>0){var A=E.columns;var K=L[0];for(var F=0;F<A.length;F++){if(A[F].dataType!="blob"){var J=A[F].displayName;if(A[F].categoryName){J=A[F].name;}var I='row["'+A[F].name+'"]';var C=A[F].hasAction?A[F].hasAction:false;var D=A[F].isDimension?A[F].isDimension:false;var G=new K.recordType({valueDefinitionValue:I,valueDefinitionText:J,valueDefinitionType:A[F].dataType,isDimension:D,hasAction:C});for(var B=0;B<L.length;B++){L[B].add(G);}}}if(this._isSummaryTable){if(this._valueDefinitionStore){var H=this._valueDefinitionStore.query("isDimension","false").items;for(var F=0;F<H.length;F++){this._valueDefinitionStore.remove(H[F]);}}if(this._valueDefinitionStore2){H=this._valueDefinitionStore2.query("isDimension","true").items;for(var F=0;F<H.length;F++){this._valueDefinitionStore2.remove(H[F]);}}}}},createSoapNode:function(A,B){if(A&&B&&this._dataManagerSoap!=null){A.appendChild(B.createTextNode(this._dataManagerSoap.childNodes[0].data));}},storeUIData:function(){var A=this.__getSelectedDataSourceInfo();var B={};if(A&&A[3]){if("dataset"==A[3].type){B.DataSet={};var C={};C.dataSourceName=A[0];C.fileName=A[2];C.extension=A[4];B.DataSet.dataMart=C;B.DataSet.dataSourceName=A[0];B.DataSet.dataObject=A[1].name;B.DataSet.dataObjectType=A[3].type;B.DataSet.isLinkedDataModel=A[1].isLinkedDataModel;}else{if("cube"==A[3].type){B.Cube={};var C={};C.dataSourceName=A[0];C.fileName=A[2];C.extension=A[4];B.Cube.dataMart=C;B.Cube.dataSourceName=A[0];B.Cube.dataObject=A[1].name;B.Cube.dataObjectType=A[3].type;}}}B.dataManagerSoap=this._dataManagerSoap;B.newDataMarts=this._newDataMarts;return B;},setAggrExprVisibility:function(A){},isExpression:function(A){if(A&&actuate.util.String.startWith(A,"Expression - ")){return true;}return false;},convertExpression:function(A){if(A&&actuate.util.String.startWith(A,"Expression/")){return A.replace("/"," - ");}return A;},__setTreeStoreValues:function(C,F,E){if(C&&F){var B=E;if(!B){B=["category","column","dimension","measure","parameter"];}for(var D=0;D<B.length;D++){switch(B[D]){case"category":var A=this._getCategories(F.columns);this._pushDataToStore(null,A,C);break;case"column":this._pushDataToStore(null,F.columns,C);break;case"dimension":this._pushDataToStore(null,F.dimensions,C);break;case"measure":this._pushDataToStore(null,F.measures,C);break;case"parameter":this._pushDataToStore(null,F.parameters,C);break;default:break;}}}},_pushDataToStore:function(Q,N,A,G,E){if(A&&N&&N.length>0){var D=E||this.__isGroupDisabled(Q);if(Q){this.__addDataIntoTreeStore({id:G||Q,text:actuate.util.Utility.getLocalizedString("common.dataTab."+Q),type:Q,strong:true,disabled:D},A);}for(var F=0;F<N.length;F++){var O=D;var J=this._getType(N[F]);var C=N[F].fullName||N[F].name;var P=N[F].displayName||N[F].name||N[F].fullName;var I=N[F].pattern;var M=N[F].dataFormat;var L=N[F].strong;var B=N[F].categoryName?"categore::"+N[F].categoryName+"_id":null;var K=this._getTooltip(N[F]);if(M&&M.value){M.value.dataType=N[F].dataType;}if(C){var H=C;if(P){this.__addDataIntoTreeStore({id:C,realId:H,value:N[F],text:P,pattern:I,format:M,type:J,parentId:G||Q||B,strong:L,title:K,disabled:O},A);}}if(this.__supportAttributes(N[F])&&N[F].attributes){this._pushDataToStore(null,N[F].attributes,A,C,O);}if(N[F].levels){this._pushDataToStore(null,N[F].levels,A,C,O);}if(N[F].measures){this._pushDataToStore(null,N[F].measures,A,C,O);}}}},__supportAttributes:function(A){return(A&&A.categoryName)?true:false;},__isGroupDisabled:function(A){return false;},__addDataIntoTreeStore:function(A,B){if(A&&B){A.disabled=this._isDisabled(A,B);B.add(A);}},_isDisabled:function(B,A){if(B){return B.disabled?true:false;}},_getCategories:function(E){var A={};var B=[];if(E){for(var D=0;D<E.length;D++){if(this.__canShowCategory(E[D])){var F={};F.name="categore::"+E[D].categoryName+"_id";F.displayName=E[D].categoryName;F.type="category";F.title=E[D].categoryHelpText||E[D].categoryName;F.strong=true;A[F.name]=F;}}for(var C in A){B.push(A[C]);}}return B;},__canShowCategory:function(A){return(A&&A.categoryName)?true:false;},_eh_onBeforeSelect:function(A,B){if(B&&B.attributes&&B.attributes.type){switch(B.attributes.type){case"dimensions":case"sharedDimension":case"measures":case"dimension":case"category":return false;default:return true;}}return true;},_getTreeComboIdByValue:function(C,F){var E=C.getLength();for(var D=0;D<E;D++){var B=C.getValueAt(D);var A=this._getTreeComboValueByRecord(B);if((!F&&!A)||F==A){return B.id;}}},_getTreeComboValue:function(B){var D;if(B!=null){var A=B.getValue();if(!A){var C=B.getRawValue();if(C){D=C;}}else{D=this._getTreeComboValueByRecord(A);}}return D;},_getTreeComboValueByRecord:function(A){if(A){return A.value;}},_getTooltip:function(C){var B=(C&&C.value)?C.value:C;if(B){var A=B.title;if(!A){switch(B.type){case"column":A=B.name;if(B.categoryName){A=B.categoryName+"/"+(B.displayName||B.name);}break;case"level":A=B.fullName;break;case"measure":A=B.groupName+"/"+B.name;break;default:break;}}return A;}},_hasAction:function(C){var B=C?C.value:null;var A;if(B&&B.type=="level"){A=B.hasAction?B.hasAction:false;}return A;},_getType:function(B){var A;if(B){A=B.type;if(B.levels&&B.shared){A="sharedDimension";}}return A;},_getDimension:function(B){var A=B?B.value:null;var C;if(A&&A.type=="level"){C=A.dimensionName;}return C;},_isDimension:function(C){var B=C?C.value:null;var A=false;if(B){if(B.isDimension||(B.type=="level"&&B.dimensionName)){A=true;}}return A;},_getDataType:function(D){var C=D?D.value:null;var A;if(C){A=C.dataType;if(C.type=="level"&&C.dataType=="integer"&&C.attributes&&C.attributes.length>0){for(var E=0;E<C.attributes.length;E++){var B=C.attributes[E];if(B&&B.name=="DateTime"&&(B.dataType=="date"||B.dataType=="time"||B.dataType=="datetime"||B.dataType=="date-time")){A=B.dataType;}}}}return A;},_queryTreeComboRecord:function(A,B){if(A){return A.getStore().getById(this._getTreeComboIdByValue(A,B));}},__setTreeComboValue:function(A,B){if(A){var C=this._getTreeComboIdByValue(A,B);if(!A.setValueById(C)){A.setRawValue(B);}}},_isDataCubeSelected:function(){if(this.__dataSourceCombo){var A=this.__dataSourceCombo.getValue();return A&&A.dimensions;}},_isDataSetSelected:function(){if(this.__dataSourceCombo){var A=this.__dataSourceCombo.getValue();return A&&A.columns;}},_isDataModelSelected:function(){if(this.__dataSourceCombo){var A=this.__dataSourceCombo.getValue();return A&&A.isLinkedDataModel;}}});actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.BaseDialog=function(){};actuate.dialog.impl.helper.BaseDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.BaseDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:undefined,__store:{},__currentInput:{},__showSoapProgressive:true,_soapSender:null,hasAutoAdjustSize:false,initialize:function(){actuate.dialog.impl.helper.BaseDialog.superclass.initialize.apply(this,arguments);this.__initComponents();this.__initListeners();},__initComponents:function(){this.__initTemplates();},__initTemplates:function(){},__initListeners:function(){},show:function(A){this.showDialog();if(A){for(var B in this.__store){if(this.__store[B]!=null&&A[B]==null){A[B]=this.__store[B];}}this.__store=A;}this.refresh();},refresh:function(){this.adjustSize();},_enter_key:function(A,B){var C=actuate.Method.bind(function(){actuate.dialog.impl.helper.BaseDialog.superclass._enter_key.call(this,A,B);},this);this.__canClose(C);},_neh_okay:function(){var A=actuate.Method.bind(function(){actuate.dialog.impl.helper.BaseDialog.superclass._neh_okay.apply(this,arguments);},this);this.__canClose(A);},__canClose:function(A){if(A){A();return true;}return false;},__validate:function(){if(this._helpee){var A=this._helpee._getEventHandlers(actuate.dialog.EventConstants.ON_DIALOG_VALID);if(A){for(var C=0;C<A.length;C++){var B=A[C]?A[C].apply(this,arguments):null;if(B){this.__popupErrorDialog(B);return false;}}}}return true;},__popupErrorDialog:function(A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("baseDialog.errorTitle"),msg:A,buttons:actuate.widget.MessageBox.OK,icon:actuate.widget.MessageBox.ERROR});},__popupConfirmDialog:function(B,A){actuate.uiadapter.MessageBox.confirm(actuate.util.Utility.getLocalizedString("baseDialog.promptTitle"),B,A);},__popupInformationDialog:function(A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("baseDialog.alertTitle"),msg:A,buttons:actuate.widget.MessageBox.OK,icon:actuate.widget.MessageBox.INFO});},__createDummyField:function(A){return new actuate.widget.form.Label(A);},__setOKButtonState:function(A){this._okBtn.setDisabled(!A);},_okPress:function(){this.__fireEvent(actuate.dialog.EventConstants.ON_DIALOG_OK,this.__createResult());this._hide();},__createResult:function(){},_getSoapSender:function(){if(!this._soapSender){var C=new actuate.common.ReportContext();var B=C.getIportalUrl();var A=new actuate.dialog.impl.common.DialogService(this.getId(),this._helpee,this.__showSoapProgressive);if(this._helpee&&this._helpee.setMask&&this.__showSoapProgressive){this._helpee.setMask(new actuate.util.Mask(this.getId(),B+actuate.USER_ENV&&actuate.USER_ENV=="tablet"?actuate.util.Constants.LOC_IMG_PROGRESS_ANIMATION_MOBILE:actuate.util.Constants.LOC_IMG_PROGRESS_ANIMATION));}A.documentModel=actuate.model.DocumentModel.getInstance();A.setRequestUrl(C.createSoapUrl("iv"));A.setBaseUrl(B);this._soapSender=new actuate.dialog.impl.common.DialogRequest(A,this._helpee?this._helpee.getConsumer():null);}return this._soapSender;},__sendJson:function(A,K,F,H){var E=this._getSoapSender();if(!E){return false;}var D=this._helpee?this._helpee.getConsumer():null;if(H&&D&&D._helper&&D._helper.getSelectionManager){var C=D._helper.getSelectionManager(H);var B=C?C.getSelectedIId():null;if(B){E._service.id=B;}}if(A){var G=this;var I=function(L){G.setDisabled(false);if(K){K(L);}};var J=function(){G.setDisabled(false);if(F){F.apply(this,arguments);}};this.setDisabled(true);E.sendJson(A,(H?H:"Document"),I,J);}return true;}});actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.BaseBuilderDialog=actuate.Class.create();actuate.dialog.impl.helper.BaseBuilderDialog.prototype={_consumer:null,_tabPanel:null,_hideTabTitle:false,_window:null,_panels:null,_feature:null,_validCnt:0,_htmlElements:{"_tabPanelDiv":null},_valid:true,_dialogMonitor:null,_dialogMode:null,DASHBOARD_HELP_CONTEXT:"/wwhelp.htm?single=true&context=UserConsole",_helpContext:null,initialize:function(B,A,E,D,C){if(this.__extending){return ;}this._dataChanged_c=actuate.Method.bind(this._dataChanged,this);var F=this._initButtons();this._title=A;this._window=new actuate.widget.Window({id:B+"test",width:this._width,height:this._height,minHeight:this.minHeight||this._height,minWidth:this.minWidth||this._width,autoHeight:this._height?false:true,cls:"actuate-iv-dialog actuate-nomargin-window",title:A,footer:this.hasFooter,constrain:true,resizable:this.isResizable,closeAction:"hide",modal:true,visibilityMode:"display",buttonAlign:"right",buttons:F,closable:true,allowDragOnBody:true,allowDragOnFooter:true});this._window.render(actuate.widget.Element.getBody());this._instance=this._window.body.dom;this._dialogMonitor=new actuate.dialog.impl.DialogStatusMonitor();this._dialogMode=C;this._feature=D;this._tabPanel=new actuate.widget.TabPanel({activeTab:0,bodyStyle:"padding: 8px 5px 5px 5px",frame:true,defaults:{autoHeight:true,autoWidth:true}});if(this._hideTabTitle){this._tabPanel.hideTabTitle=true;}this.establishTabs(D,null,true);this._window.add(this._tabPanel);this._window._doLayout();this._layoutEachPanel();this._tabPanel.setActiveTab(0);this._tabPanel.registerEventHandler("tabchange",actuate.Method.bind(this._neh_tabChange,this),false);this._neh_cancel_closure=actuate.Method.bind(this._neh_cancel,this);if(this.__getHelpTopic()){this._helpBtn=document.createElement("input");this._helpBtn.type="button";this._helpBtn.className="dialogHelpLinkStyle actuateCSSSprite_dialog actuateIV_dialogHelp helpLinkButtonPosition";}this._base_installEventHandlers(B);},getWindowDom:function(){return this._window.getEl().dom;},getWindowLastZIndex:function(){return this._window.getLastZIndex();},_neh_tabChange:function(){this._fixDropShadow();this.adjustSize();if(this._panels){for(var A in this._panels){if(this._panels[A]._adjuctUIAfterActivate){this._panels[A]._adjuctUIAfterActivate();}}}return true;},establishTabs:function(M,J,A){var I=actuate.util.Utility;var L=actuate.util.Package;var B=actuate.util.Constants.MODULE_NAME_DIALOG;if(this._panels==null){this._panels=new Object();}if(M.children){this._hidePanels();var H=0;for(var F=0;F<M.children.length;F++){var E=actuate.resource.module.feature.features[B][M.children[F]]._classInstance;if(E){for(var G=0;G<E.length;G++){var K=actuate.util.Package.getInstanceName(E[G]).replace(/\./g,"_");if(!this._panels[K]){var D=L.getNamespaceObjectReference(E[G]);var C=new D(null,true);this._tabPanel.insert(H,C.getPanel());this._panels[K]=C;C.setParent(this);if(!I.isEmpty(C._initMonitor,false)){C._initMonitor();}}H=this._tabPanel.items.indexOf(this._panels[K].getPanel())+1;this._tabPanel.unhideTabStripItem(this._panels[K].getPanel());this._panels[K].hidden=false;}}}if(!A){for(var F=0;F<M.children.length;F++){if(M.children[F]=="GADGETBUILDER_FILTERDIALOG_DIALOG"){var B=actuate.util.Constants.MODULE_NAME_DIALOG;var E=actuate.resource.module.feature.features[B][M.children[F]]._classInstance;for(var G=0;G<E.length;G++){var K=actuate.util.Package.getInstanceName(E[G]).replace(/\./g,"_");if(!this._panels[K].getPanel().rendered){this._layoutEachPanel1();}}}}}}},_layoutEachPanel:function(){var B;var A;for(B in this._panels){A=this._panels[B].getPanel();if(A.show){A.show();}if(this._tabPanel.layout&&this._tabPanel.layout.layout){this._tabPanel.layout.layout();}}},_layoutEachPanel1:function(){var A=this._tabPanel.getActiveTab();this._layoutEachPanel();this._tabPanel.setActiveTab(A);},showPanel:function(J){var G=actuate.util.Utility;var I=actuate.util.Package;var B=actuate.util.Constants.MODULE_NAME_DIALOG;var C=actuate.resource.module.feature.features[B][J];if(!C){return ;}var D=null;var E=C._classInstance;if(E){for(var F=0;F<E.length;F++){var H=actuate.util.Package.getInstanceName(E[F]).replace(/\./g,"_");var A=this._panels[H];if(A&&A.getPanel()){this._tabPanel.unhideTabStripItem(A.getPanel());A.hidden=false;D=A;break;}}}this.validateControls();return D;},hidePanel:function(J){var G=actuate.util.Utility;var I=actuate.util.Package;var B=actuate.util.Constants.MODULE_NAME_DIALOG;var C=actuate.resource.module.feature.features[B][J];if(!C){return ;}var D=null;var E=C._classInstance;if(E){for(var F=0;F<E.length;F++){var H=actuate.util.Package.getInstanceName(E[F]).replace(/\./g,"_");var A=this._panels[H];if(A&&A.getPanel()){this._tabPanel.hideTabStripItem(A.getPanel());A.hidden=true;D=A;break;}}}this.validateControls();return D;},_hidePanels:function(){if(this._panels){for(var A in this._panels){this._tabPanel.hideTabStripItem(this._panels[A].getPanel());if(this._dialogMode=="singleTab"&&this._panels[A].getPanel().hide){this._panels[A].getPanel().hide();}this._panels[A].hidden=true;}}this.validateControls();},consumerBind:function(C,D){this._consumer=(C._)?C._:C;if(D&&D.operationData&&D.operationData.tabInfo){this._tabInfo=D.operationData.tabInfo;}this._filterPanel=this.getPanel("actuate_dialog_impl_helper_gadgetBuilderFilterTab");if(!this._localBind(D)){if(this._dialogMode!="singleTab"){if(this._filterPanel&&!this._filterPanel.hidden){this._filterPanel.loadData(D);}var A=this.__getGenericPropsPanel();var B=this.__getDataPanel();if(B){B.on("datachanged",this._dataChanged_c);this._dataChanged(B.getDataSelection());if(A&&A.isDefaultTitle()){A.setGadgetTitle(this.__generateUniqueGadgetTitle(B.getDataSelection()));}}}this._show();}},__isDefaultTitle:function(){var A=this.__getGenericPropsPanel();return A&&A.isDefaultTitle();},_dataChanged:function(B){if(this.__isDefaultTitle(B)){var A=this.__getGenericPropsPanel();A.setGadgetTitle(this.__generateUniqueGadgetTitle(B));}},processBind:function(A,B){this._consumer=(A._)?A._:A;if(this._filterPanel){this._filterPanel.loadData(B);}if(!B.resultSetData&&!B.messageList){if(!this._bind(B)){this._show();}}},getPanel:function(A){return this._panels[A];},_base_installEventHandlers:function(A){this._window.registerEventHandler("hide",this._neh_cancel_closure,true);if(this._okBtn){this._okBtn.registerEventHandler("click",actuate.Method.bind(this._neh_okay,this),false);}if(this._cancelBtn){this._cancelBtn.registerEventHandler("click",actuate.Method.bind(this._neh_cancel,this),false);}if(this._helpBtn){actuate.util.Event.observe(this._helpBtn,"click",actuate.Method.bind(this._neh_help_link,this),false);}this._window.registerEventHandler("beforehide",actuate.Method.bind(this._preHide,this),false);this._window.getKeyMap().on(13,this._neh_okay,this);},_initButtons:function(){var A=actuate.util.Utility;this._okBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.ok"),minWidth:50,cls:"btn-primary"});this._cancelBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.cancel"),minWidth:50});var B=[this._cancelBtn];B.push(this._okBtn);return B;},_neh_cancel:function(){if(this._visible){this._hide();this._cancelPress();}this._dialogMonitor.clear();},_neh_help_link:function(){var D=this.__getHelpTopic();if(D){var C=this._helpContext?this._helpContext:this.DASHBOARD_HELP_CONTEXT;var A=null;if(this._consumer&&!actuate.util.Utility.isEmpty(this._consumer._helper,false)){A=this._consumer._helper.helpBase;}if(actuate.util.Utility.isEmpty(A,false)){if(this._consumer&&!actuate.util.Utility.isEmpty(this._consumer.tabInfo,false)){A=this._consumer.tabInfo.getHelpDocBase();}}var B=this.__getHelpLinkUrl(A,C,D);window.open(B);}},__getHelpLinkUrl:function(A,B,C){return A+B+"&topic="+C;},__getHelpTopic:function(){return null;},setHelpContext:function(A){this._helpContext=A;},_cancelPress:function(){this._helpee.fireEvent(actuate.dialog.EventConstants.ON_DIALOG_CANCEL);},getTabPanel:function(){return this._tabPanel;},getWindow:function(){return this._window;},show:function(){this._tabPanel.show();},showDialog:function(){this._tabPanel.show();},_neh_okay:function(){this._okPress();},_okPress:function(){if(this._validate()&&this._valid){this._helpee.fireEvent(actuate.dialog.EventConstants.ON_DIALOG_OK,this.createSoapNode());this._hide();}},_validate:function(){if(!this._valideActivePanel()){return false;}if(this._panels){for(var B in this._panels){if(this._panels[B].hidden){continue;}var A=this._panels[B].validate();if(A==false){this._tabPanel.setActiveTab(this._panels[B]._panel);return false;}}}return true;},_valideActivePanel:function(){var B=this._tabPanel?this._tabPanel.activeTab:null;if(B&&this._panels){for(var A in this._panels){if(this._panels[A]&&B==this._panels[A]._panel){return this._panels[A].validate();}}}return true;},validateControls:function(){var B=true;this._validCnt=0;if(this._panels){for(var C in this._panels){if(this._panels[C].hidden){continue;}if(!this._panels[C].validateControl){continue;}var A=this._panels[C].validateControl();if(A==false){this._validCnt+=this._panels[C].getInvalidCount();B=false;}}}this._valid=B;this.updateOKButton();return B;},getInvalidCount:function(){return this._validCnt;},createSoapNode:function(){var F=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);if("singleTab"===this._dialogMode){this._createSoapNode(F);return F.documentElement;}var E=this._createBaseSoapNode(F);if(this._panels){var C={};var H=false;for(var B in this._panels){var A=this._panels[B];if(A.hidden==false){if(A.createSoapNode){A.createSoapNode(E,F);}if(A.createJsonData){H=true;actuate.Class.extend(C,A.createJsonData());}}}if(H){if(E.tagName=="Json"&&E.hasChildNodes()){var D=actuate.util.XmlDom.serializeDomChildren(E);if(D){actuate.Class.extend(C,actuate.util.Json.parse(D));}while(E.hasChildNodes()){E.removeChild(E.firstChild);}}var G=F.createTextNode(actuate.util.Json.makeMap(C));E.appendChild(G);}}return F.documentElement;},_hide:function(){this._visible=false;if(!this._window.hidden){this._window.hide();}this._afterHide();var A=this.__getDataPanel();if(A){A.un("datachanged",this._dataChanged_c);}this._consumer.popActiveStack(this);},_afterHide:function(){this._hidePanels();},_preHide:function(){},processAction:function(A,B){this._consumer=A;if("Close"==B){this._hide();}},_localBind:function(A,B){this._consumer=A;this._consumer=A.apiInstance;if(B&&B.operationData){this._tabInfo=B.operationData.tabInfo;}this._show();},_show:function(){this._preShow();if(this._visible){return ;}this._visible=true;this._window._doLayout();this._window.show();this._consumer.pushActiveStack(this);this._window.focus();this._postShow();this._firstTimeShow=false;this.validateControls();},_fixDropShadow:function(){this._window.syncShadow();},_preShow:function(){},_postShow:function(){if(this.hasAutoAdjustSize){this.adjustSize();}this._window.center();},adjustSize:function(){this._window.adjustSizeToContent();var A=actuate.util.Utility;if(this._helpBtn&&(A.isIE6||A.isIE7||A.isIE8Compat)){this._helpBtn.style.display="none";this._helpBtn.style.display="";}},_getId:function(A){return A.replace(/\./g,"_").replace("IV","iv");},_applyHtmlElementsNames:function(A){for(var B in this._htmlElements){this._htmlElements[B]=A+B;}},updateOKButton:function(){if(!this._okBtn){return ;}if(this._valid){this._okBtn.enable();}else{this._okBtn.disable();}},isValid:function(){return this._valid;},changeInvalidCount:function(B){var A=(B.isValid&&B.isValid(true))?-1:+1;this._validCnt+=A;if(this._validCnt==0){this._valid=true;}else{this._valid=false;}this.updateOKButton();},__generateGadgetTitle:function(A){return actuate.util.Utility.getLocalizedString("editgadgetprops.panel.general.gadgetName.default");},__generateUniqueGadgetTitle:function(A){var B=this.__generateGadgetTitle(A);return(this._tabInfo)?this._tabInfo.getNewGadgetTitleCallback(B,true):null;},__getGenericPropsPanel:function(){return this.getPanel("actuate_dialog_impl_helper_genericPropsTab");},__getDataPanel:function(){},__getGadgetTypeName:function(){return null;}};actuate.util.Package.define("actuate.dialog.impl.helper.font");actuate.dialog.impl.helper.font.FontDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_classname:"actuate.dialog.FontDialog",_width:370,_FONTSELECT_COMBO_ID:"fontSelect_id",_SIZESELECT_COMBO_ID:"sizeSelect_id",_COLORSELECT_COLORFIELD_ID:"colorSelect_id",_BGCOLORSELECT_COLORFIELD_ID:"bgColorSelect_id",_BGCOLORSELECT_LABEL_ID:"bgColorLabel_id",_BOLD_BUTTON_ID:"bold_id",_ITALIC_BUTTON_ID:"italic_id",_UNDERLINE_BUTTON_ID:"underline_id",_RADIOBUTTONS_ID:"radioButtons_id",_APPLYTOTABLE_RADIO_ID:"applyToTable_id",_APPLYTOCOLUMN_RADIO_ID:"applyToColumn_id",_PREVIEWTEXT_ID:"previewText",_dataItemId:null,_subDialog:true,initialize:function(){actuate.dialog.impl.helper.font.FontDialog.superclass.initialize.apply(this,arguments);this._reset();},__initComponents:function(){actuate.dialog.impl.helper.font.FontDialog.superclass.__initComponents.apply(this,arguments);this.setTitle(actuate.util.Utility.getLocalizedString("fontDialog.caption"));this.fontSelectDiv=document.getElementById(this._FONTSELECT_COMBO_ID);this.sizeSelectDiv=document.getElementById(this._SIZESELECT_COMBO_ID);this.colorSelectDiv=document.getElementById(this._COLORSELECT_COLORFIELD_ID);this.bgColorLabelDiv=document.getElementById(this._BGCOLORSELECT_LABEL_ID);this.bgColorSelectDiv=document.getElementById(this._BGCOLORSELECT_COLORFIELD_ID);this.boldToggle=document.getElementById(this._BOLD_BUTTON_ID);this.italicToggle=document.getElementById(this._ITALIC_BUTTON_ID);this.underlineToggle=document.getElementById(this._UNDERLINE_BUTTON_ID);this.radioButtonDiv=document.getElementById(this._RADIOBUTTONS_ID);this.applyToTableDiv=document.getElementById(this._APPLYTOTABLE_RADIO_ID);this.applyToColumnDiv=document.getElementById(this._APPLYTOCOLUMN_RADIO_ID);this.bgColorLabel=new actuate.widget.form.Label({width:30,renderTo:this.bgColorLabelDiv,text:actuate.util.Utility.getLocalizedString("fontDialog.label.backgroundColor")});this.fontSelect=new actuate.uiadapter.ComboBox({editable:false,width:150});this.sizeSelect=new actuate.uiadapter.ComboBox({editable:true,width:150});this.colorSelect=new actuate.uiadapter.ColorField({width:150});this.bgColorSelect=new actuate.uiadapter.ColorField({width:150});this.applyToTable=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,name:"tableOrColumn",valueText:"table",labelAlign:"right",labelWidth:170,boxLabel:actuate.util.Utility.getLocalizedString("fontDialog.label.applyToTable")});this.applyToColumn=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,name:"tableOrColumn",valueText:"column",labelAlign:"right",labelWidth:170,boxLabel:actuate.util.Utility.getLocalizedString("fontDialog.label.applyToColumn")});this.styleSelectionView=new actuate.dialog.impl.helper.font.StyleSelectionView(this.fontSelect,this.sizeSelect,this.colorSelect,this.bgColorSelect,this._BOLD_BUTTON_ID,this._ITALIC_BUTTON_ID,this._UNDERLINE_BUTTON_ID);this.stylePreviewView=new actuate.dialog.impl.helper.font.StylePreviewView(this._PREVIEWTEXT_ID);this.fontSelect.render(this.fontSelectDiv);this.sizeSelect.render(this.sizeSelectDiv);this.colorSelect.render(this.colorSelectDiv);this.bgColorSelect.render(this.bgColorSelectDiv);this.applyToTable.render(this.applyToTableDiv);this.applyToColumn.render(this.applyToColumnDiv);this.styleSelectionView.updateMenuOptions(actuate.dialog.FontOptions);},__initListeners:function(){actuate.dialog.impl.helper.font.FontDialog.superclass.__initListeners.apply(this,arguments);var A=actuate.Method.bindAsEventListener(this.__neh_keyup,this);actuate.util.Event.observe(this.boldToggle,"click",actuate.Method.bind(this.__neh_boldClick,this),false);actuate.util.Event.observe(this.italicToggle,"click",actuate.Method.bind(this.__neh_italicClick,this),false);actuate.util.Event.observe(this.underlineToggle,"click",actuate.Method.bind(this.__neh_underlineClick,this),false);actuate.util.Event.observe(this.boldToggle,"mouseover",actuate.Method.bind(this.__neh_setOverClass,this),false);actuate.util.Event.observe(this.italicToggle,"mouseover",actuate.Method.bind(this.__neh_setOverClass,this),false);actuate.util.Event.observe(this.underlineToggle,"mouseover",actuate.Method.bind(this.__neh_setOverClass,this),false);actuate.util.Event.observe(this.boldToggle,"mouseout",actuate.Method.bind(this.__neh_removeOverClass,this),false);actuate.util.Event.observe(this.italicToggle,"mouseout",actuate.Method.bind(this.__neh_removeOverClass,this),false);actuate.util.Event.observe(this.underlineToggle,"mouseout",actuate.Method.bind(this.__neh_removeOverClass,this),false);this.selectBoxesFocused=false;this.__neh_gainFocus_c=actuate.Method.bind(this.__neh_gainFocus,this);this.fontSelect.registerEventHandler("focus",this.__neh_gainFocus_c);this.sizeSelect.registerEventHandler("focus",this.__neh_gainFocus_c);this.colorSelect.registerEventHandler("focus",this.__neh_gainFocus_c);this.bgColorSelect.registerEventHandler("focus",this.__neh_gainFocus_c);this.__neh_fontChange_c=actuate.Method.bind(this.__neh_fontChange,this);this.fontSelect.registerEventHandler("select",this.__neh_fontChange_c);this.__neh_fontSizeBlur_c=actuate.Method.bind(this.__neh_fontSizeBlur,this);this.sizeSelect.registerEventHandler("blur",this.__neh_fontSizeBlur_c);this.sizeSelect.registerEventHandler("select",this.__neh_fontSizeBlur_c);this.__neh_colorChange_c=actuate.Method.bind(this.__neh_colorChange,this);this.colorSelect.registerEventHandler("pickerSelect",this.__neh_colorChange_c);this.colorSelect.registerEventHandler("paletteSelect",this.__neh_colorChange_c);this.__neh_backgroundColorChange_c=actuate.Method.bind(this.__neh_backgroundColorChange,this);this.bgColorSelect.registerEventHandler("pickerSelect",this.__neh_backgroundColorChange_c);this.bgColorSelect.registerEventHandler("paletteSelect",this.__neh_backgroundColorChange_c);},__initTemplates:function(){var C=document.createElement("div");var A=new actuate.widget.Template('<DIV class="dialogLabelFont actuate_dialog_font_FontDialog">'+'<TABLE CELLPADDING="0px" CELLSPACING="0px">'+"<TR>"+"<TD>"+'<DIV CLASS="titleSpacing">'+actuate.util.Utility.getLocalizedString("fontDialog.label.font")+"</DIV>"+'<DIV ID="'+this._FONTSELECT_COMBO_ID+'"</DIV>'+"</TD>"+"<TD>"+'<DIV CLASS="titleSpacing" style="margin-left:6px;">'+actuate.util.Utility.getLocalizedString("fontDialog.label.size")+"</DIV>"+'<DIV CLASS="fontSizeDiv" ID="'+this._SIZESELECT_COMBO_ID+'"></DIV>'+"</TD>"+"</TR>"+"<TR>"+"<TD>"+'<DIV CLASS="titleSpacing" style="margin-top:10px;">'+actuate.util.Utility.getLocalizedString("fontDialog.label.color")+"</DIV>"+'<DIV ID="'+this._COLORSELECT_COLORFIELD_ID+'"></DIV>'+"</TD>"+"<TD>"+'<DIV ID="'+this._BGCOLORSELECT_LABEL_ID+'" CLASS="titleSpacing" style="margin-top:10px;margin-left:6px;">'+"</DIV>"+'<DIV CLASS="fontBackgroundDiv" ID="'+this._BGCOLORSELECT_COLORFIELD_ID+'"></DIV>'+"</TD>"+"</TR>"+"</TABLE>"+'<DIV style="margin-top:10px;text-align:left;width:100%;margin-left:2px"  CLASS="itemSpacing">'+'<SPAN style="margin-right:1ex;">'+'<INPUT TYPE="button" id="'+this._BOLD_BUTTON_ID+'" '+' name="boldimg" '+' CLASS="imagebutton actuateCSSSprite_dialog actuateIV_bold_disable" '+' ENABLED_ON="imagebutton actuateCSSSprite_dialog actuateIV_bold_enable" '+' ENABLED_OFF="imagebutton actuateCSSSprite_dialog actuateIV_bold_disable"/>'+"</SPAN>"+'<SPAN style="margin-right:1ex;">'+'<INPUT TYPE="button" id="'+this._ITALIC_BUTTON_ID+'" '+' name="italicimg" '+' CLASS="imagebutton actuateCSSSprite_dialog actuateIV_italic_disable" '+' ENABLED_ON="imagebutton actuateCSSSprite_dialog actuateIV_italic_enable" '+' ENABLED_OFF="imagebutton actuateCSSSprite_dialog actuateIV_italic_disable"/>'+"</SPAN>"+"<SPAN>"+'<INPUT TYPE="button" id="'+this._UNDERLINE_BUTTON_ID+'" '+' name="underlineimg" '+' CLASS="imagebutton actuateCSSSprite_dialog actuateIV_underline_disable" '+' ENABLED_ON="imagebutton actuateCSSSprite_dialog actuateIV_underline_enable" '+' ENABLED_OFF="imagebutton actuateCSSSprite_dialog actuateIV_underline_disable"/>'+"</SPAN>"+"</DIV>"+'<DIV id="'+this._RADIOBUTTONS_ID+'" CLASS="itemSpacing">'+'<DIV style="clear:both"></DIV>'+'<DIV style="float:left;margin-right:1ex;">'+"<DIV>"+'<DIV style="clear:both"></DIV>'+'<DIV style="float:left;margin-right:1ex;">'+'<SPAN id="'+this._APPLYTOTABLE_RADIO_ID+'">'+"</SPAN>"+"</DIV>"+'<DIV style="clear:both"></DIV>'+"</DIV>"+"<DIV>"+'<DIV style="clear:both"></DIV>'+'<DIV style="float:left;margin-right:1ex;">'+'<SPAN id="'+this._APPLYTOCOLUMN_RADIO_ID+'">'+"</SPAN>"+"</DIV>"+'<DIV style="clear:both"></DIV>'+"</DIV>"+"</DIV>"+'<DIV style="clear:both"></DIV>'+"</DIV>"+'<DIV id="fontDialog_previewBox" class="fontPreviewBox" >'+'<DIV style="height: 40px; width: auto; overflow: hidden" >'+'<SPAN style="line-height: 40px;" id="'+this._PREVIEWTEXT_ID+'">'+actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.noFormatRule")+"</SPAN>"+"</DIV>"+"</DIV>"+"</DIV>");var B=[];A.append(C,B,true);this.add(new actuate.widget.panel.Panel({contentEl:C,border:false}));},__neh_gainFocus:function(A){this.selectBoxesFocused=true;},loseFocus:function(){this.selectBoxesFocused=false;},_bindFromMetadata:function(A){this._subDialog=false;this._reset();this._elementType=A[actuate.model.Constant.MetadataType.ELEMENT].type;if(!A.columnHeaderMode){this._column=A.selectedColumn;this._dataItemId=A.selectedElement&&A.selectedElement.iid.substr(1);}else{this._dataItemId=null;this._elementType=actuate.Constant.element.LABEL;}this._showRadioButtons(this._elementType==actuate.Constant.element.TABLE);if(A.style){this.styleModel.setFont(A.style);}this.styleSelectionView.setValues(this.styleModel.getFontFamily(),this.styleModel.getFontSize(),this.styleModel.getColor(),this.styleModel.getBackgroundColor(),this.styleModel.getIsBold(),this.styleModel.getIsItalic(),this.styleModel.getIsUnderline());if(!this.styleModel.isDefault()){this.stylePreviewView.showPreview(this.styleModel);}this.applyToColumn.setValue(true);this.applyToTable.setValue(false);if(A.total){this.total=A.total;}else{delete this.total;}if(A.target){this.target=A.target;}else{delete this.target;}},_showRadioButtons:function(A){this.radioButtonDiv.style.display=A?"block":"none";},_reset:function(){this.styleModel=new actuate.dialog.impl.helper.font.StyleModel();this.styleModel.reset();this.styleSelectionView.reset(this.styleModel);},__neh_fontChange:function(){this.styleModel.setFontFamily(this.styleSelectionView.getFontValue());this.handleFormatChange();},__neh_fontSizeBlur:function(){var B=this.sizeSelect.combo._ele.dom.value;var C=true;var A;B=actuate.util.String.trim(B);if(!B){C=false;A=actuate.util.Utility.getLocalizedString("fontDialog.options.fontSizeValue.notEmpty");}else{if(B.toLowerCase()!=actuate.util.Utility.getLocalizedString("ColorField.Auto").toLowerCase()&&B.toLowerCase()!="auto"){if(!actuate.util.Utility.isNumeric(B)){C=false;A=actuate.util.Utility.getLocalizedString("fontDialog.options.fontSizeValue.isInvalid");}}}if(!C){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("baseDialog.errorTitle"),msg:A,buttons:actuate.widget.MessageBox.OK,icon:actuate.widget.MessageBox.ERROR});}else{if(B.toLowerCase()=="auto"){B="Auto";}this.styleModel.setFontSize(B);this.handleFormatChange();}},__neh_colorChange:function(){if(this.styleSelectionView.getColorValue()==actuate.util.Utility.getLocalizedString("ColorField.Auto")){this.styleModel.setColor(this.styleModel.colorDefault);}else{this.styleModel.setColor(this.styleSelectionView.getColorValue());}this.handleFormatChange();},__neh_backgroundColorChange:function(){if(this.styleSelectionView.getBackgroundColorValue()==actuate.util.Utility.getLocalizedString("ColorField.Auto")){this.styleModel.setBackgroundColor(this.styleModel.backgroundColorDefault);}else{this.styleModel.setBackgroundColor(this.styleSelectionView.getBackgroundColorValue());}this.handleFormatChange();},__neh_underlineClick:function(){this.styleModel.toggleUnderline();this.styleSelectionView.setUnderlineButtonValue(this.styleModel.getIsUnderline());this.handleFormatChange();},__neh_italicClick:function(){this.styleModel.toggleItalic();this.styleSelectionView.setItalicButtonValue(this.styleModel.getIsItalic());this.handleFormatChange();},__neh_boldClick:function(){this.styleModel.toggleBold();this.styleSelectionView.setBoldButtonValue(this.styleModel.getIsBold());this.handleFormatChange();},__neh_setOverClass:function(A){if(A){this.setBeforeClass(A.target);classToApply=A.target.getAttribute("OVER_CLASS");if(classToApply){A.target.className=classToApply;}}},setBeforeClass:function(A){if(A){A.setAttribute("BEFORE_CLASS",A.className);}},__neh_removeOverClass:function(A){if(A){classToApply=A.target.getAttribute("BEFORE_CLASS");if(classToApply){A.target.className=classToApply;}}},handleFormatChange:function(A){this.refresh();},isApplyToTable:function(){if(this.applyToTable.getValue()){return true;}return false;},__getHelpTopic:function(){return"iv_font";},_cancelPress:function(){if(this._cancelCallback){this._cancelCallback();return ;}},_createSoapRequest:function(){var D=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);D.documentElement.appendChild(actuate.util.XmlDom.createElement(D,actuate.Constant.tag.COLUMNDEFS));var E=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Font);D.documentElement.appendChild(E);var A=this._column!=null;if(A&&actuate.util.Utility.isArray(this._column)){A=this._column.length>0;}if(this._dataItemId&&(!A||this._column.isMergedColumn)){var C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.DataItemId);dataItemIdTextNode=D.createTextNode(this._dataItemId);C.appendChild(dataItemIdTextNode);D.documentElement.appendChild(C);}if(this.fontSelect.getSelectedIndex()>=0){C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.FAMILY);textNode=D.createTextNode(this.styleModel.getFontFamily());C.appendChild(textNode);E.appendChild(C);}if(this.sizeSelect.combo._ele.dom.value){C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.SIZE);if(this.sizeSelect.combo._ele.dom.value.toLowerCase()==actuate.util.Utility.getLocalizedString("ColorField.Auto").toLowerCase()){textNode=D.createTextNode("Auto");}else{textNode=D.createTextNode(this.sizeSelect.combo._ele.dom.value+this.styleModel.getFontSizeUnit());}C.appendChild(textNode);E.appendChild(C);}if(this.colorSelect){var B=this.isInColorOptions(this.styleModel.getColor());C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Color);textNode=D.createTextNode(this.styleModel.getColor());C.appendChild(textNode);E.appendChild(C);}if(this.bgColorSelect){var B=this.isInColorOptions(this.styleModel.getBackgroundColor());C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.BackgroundColor);textNode=D.createTextNode(this.styleModel.getBackgroundColor());C.appendChild(textNode);E.appendChild(C);}C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Bold);if(this.styleModel.getIsBold()){textNode=D.createTextNode("true");}else{textNode=D.createTextNode("false");}C.appendChild(textNode);E.appendChild(C);C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Italic);if(this.styleModel.getIsItalic()){textNode=D.createTextNode("true");}else{textNode=D.createTextNode("false");}C.appendChild(textNode);E.appendChild(C);C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Underline);if(this.styleModel.getIsUnderline()){textNode=D.createTextNode("true");}else{textNode=D.createTextNode("false");}C.appendChild(textNode);E.appendChild(C);C=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.ApplyToTable);if(this.isApplyToTable()){textNode=D.createTextNode("true");}else{textNode=D.createTextNode("false");}C.appendChild(textNode);E.appendChild(C);return D;},isInColorOptions:function(A){var D=actuate.dialog.FontOptions.fontColors;if(D){for(var B=0;B<D.length;B++){for(var C in D[B]){if(A.toLowerCase()==D[B][C]){return true;}}}}},__validate:function(){var B=actuate.dialog.impl.helper.font.FontDialog.superclass.__validate.call(this,this,this.__createResult());var A=this.sizeSelect.combo._ele.dom.value;A=actuate.util.String.trim(A);if(!A){B=false;this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("fontDialog.options.fontSizeValue.notEmpty"));}else{if(A.toLowerCase()!=actuate.util.Utility.getLocalizedString("ColorField.Auto").toLowerCase()){if(!actuate.util.Utility.isNumeric(A)){B=false;this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("fontDialog.options.fontSizeValue.isInvalid"));}}}return B;},__createResult:function(){if(this._subDialog){var A=new actuate.model.Font();if(this.fontSelect.getSelectedIndex()>=0){A.family=this.styleModel.getFontFamily();}if(this.sizeSelect.combo._ele.dom.value){var B=this.styleModel.getFontSizeUnit();A.size=this.sizeSelect.combo._ele.dom.value;if(B&&A.size.toLowerCase()!=actuate.util.Utility.getLocalizedString("ColorField.Auto").toLowerCase()){A.size+=B;}else{if(A.size.toLowerCase()==actuate.util.Utility.getLocalizedString("ColorField.Auto").toLowerCase()){A.size="Auto";}}}if(this.colorSelect){A.color=this.styleModel.getColor();}if(this.bgColorSelect){A.backgroundColor=this.styleModel.getBackgroundColor();}A.bold=this.styleModel.getIsBold()?true:false;A.italic=this.styleModel.getIsItalic()?true:false;A.underline=this.styleModel.getIsUnderline()?true:false;return A;}return this._createSoapRequest();},refresh:function(){this._showRadioButtons(!this._subDialog&&this._elementType==actuate.Constant.element.TABLE);this.styleSelectionView.setValues(this.styleModel.getFontFamily(),this.styleModel.getFontSize(),this.styleModel.getColor(),this.styleModel.getBackgroundColor(),this.styleModel.getIsBold(),this.styleModel.getIsItalic(),this.styleModel.getIsUnderline());this.stylePreviewView.showPreview(this.styleModel);actuate.dialog.impl.helper.font.FontDialog.superclass.refresh.apply(this,arguments);},show:function(A,C,B){if(C){this._bindFromMetadata(C);}actuate.dialog.impl.helper.font.FontDialog.superclass.show.apply(this,arguments);this._updateDialogOptions(B);},setStyleModel:function(A){this._elementType=null;if(A!=null){this.styleModel=A;}else{this._reset();}this.refresh();},setFont:function(A){if(A!=null){this.styleModel.setFont(A);}else{this._reset();}this._subDialog=true;this.refresh();},_updateDialogOptions:function(A){this.sizeSelect.setDisabled(A&&A.enableFontSize==false);this.bgColorSelect.setDisabled(A&&A.enableBackgroundColor==false);if(A&&A.hideBackgroundColor){this.bgColorSelect.setVisibility(false);this.bgColorLabel.setVisibility(false);}else{this.bgColorSelect.setVisibility(true);this.bgColorLabel.setVisibility(true);}}});actuate.util.Package.define("actuate.dialog.impl.helper.chartbuilder");actuate.dialog.impl.helper.chartbuilder.BaseChartFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{_flipAxis:null,initialize:function(){if(this.__extending){return ;}actuate.dialog.impl.helper.chartbuilder.BaseChartFormatTab.superclass.initialize.call(this);this._control_title=actuate.widget.ComponentMgr.get(this.id+"_title");this._control_autoTitle=actuate.widget.ComponentMgr.get(this.id+"_autoTitle");if(this._control_autoTitle){this._onChangeAutoTitle_c=actuate.Method.bind(this._onChangeAutoTitle,this);this._control_autoTitle.registerEventHandler("check",this._onChangeAutoTitle_c);}this._control_baseFontFamily=actuate.widget.ComponentMgr.get(this.id+"_baseFontFamily");this._control_baseFontSize=actuate.widget.ComponentMgr.get(this.id+"_baseFontSize");this._control_baseFontColor=actuate.widget.ComponentMgr.get(this.id+"_baseFontColor");this.__handleFontSelection_c=actuate.Method.bind(this.__handleFontSelection,this);this._control_titleFont=actuate.widget.ComponentMgr.get(this.id+"_titleFont");this._control_xTitleFont=actuate.widget.ComponentMgr.get(this.id+"_xTitleFont");this._control_xLabelFont=actuate.widget.ComponentMgr.get(this.id+"_xLabelFont");this._control_yTitleFont=actuate.widget.ComponentMgr.get(this.id+"_yTitleFont");this._control_yLabelFont=actuate.widget.ComponentMgr.get(this.id+"_yLabelFont");this._control_valueFont=actuate.widget.ComponentMgr.get(this.id+"_valueFont");this._control_categoriesFieldSet=actuate.widget.ComponentMgr.get(this.id+"_categoriesFieldSet");this._control_valuesFieldSet=actuate.widget.ComponentMgr.get(this.id+"_valuesFieldSet");this._control_legendFieldSet=actuate.widget.ComponentMgr.get(this.id+"_legendFieldSet");this._control_showLegendCheckBox=actuate.widget.ComponentMgr.get(this.id+"_showLegendCheckBox");this._control_legendTitle=actuate.widget.ComponentMgr.get(this.id+"_legendTitle");this._control_legendTitleRow=actuate.widget.ComponentMgr.get(this.id+"_legendTitleRow");this._control_baseFontRow=actuate.widget.ComponentMgr.get(this.id+"_baseFontRow");this._control_stepIntervalRow=actuate.widget.ComponentMgr.get(this.id+"_stepIntervalRow");this._control_stepNumbersRow=actuate.widget.ComponentMgr.get(this.id+"_stepNumbersRow");this._navigationScrollBarCheckBox=actuate.widget.ComponentMgr.get(this.id+"_navigationScrollBar");this._timelineLabel=actuate.widget.ComponentMgr.get(this.id+"_timelineLabel");this._navigationRangeSelectorCheckBox=actuate.widget.ComponentMgr.get(this.id+"_navigationRangeSelector");this._navigationBottomSliderCheckBox=actuate.widget.ComponentMgr.get(this.id+"_navigationBottomSlider");if(this._control_showLegendCheckBox){this._onChangeShowLegend_c=actuate.Method.bind(this._onChangeShowLegend,this);this._control_showLegendCheckBox.registerEventHandler("check",this._onChangeShowLegend_c);}this._control_legendPositionSelect=actuate.widget.ComponentMgr.get(this.id+"_legendPositionSelect");},__xaxisChangedHandler:function(A){if((this._isFlashChart==false&&A&&A.format&&A.format.value&&("date-time"==A.format.value.dataType||"datetime"==A.format.value.dataType||"date"==A.format.value.dataType||"time"==A.format.value.dataType))||(this.chartType=="Stock Chart")){this._showHideTimeLine(true);}else{this._showHideTimeLine(false);}},_initSizeUnit:function(){this._sizeStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var A=new this._sizeStore.recordType({value:actuate.dialog.impl.constant.DesignChoice.UNITS_CM,text:actuate.util.Utility.getLocalizedString("chartBuilder.unit.cm")});this._sizeStore.add(A);var A=new this._sizeStore.recordType({value:actuate.dialog.impl.constant.DesignChoice.UNITS_IN,text:actuate.util.Utility.getLocalizedString("chartBuilder.unit.inches")});this._sizeStore.add(A);var A=new this._sizeStore.recordType({value:actuate.dialog.impl.constant.DesignChoice.UNITS_MM,text:actuate.util.Utility.getLocalizedString("chartBuilder.unit.mm")});this._sizeStore.add(A);var A=new this._sizeStore.recordType({value:actuate.dialog.impl.constant.DesignChoice.UNITS_PC,text:actuate.util.Utility.getLocalizedString("chartBuilder.unit.picas")});this._sizeStore.add(A);var A=new this._sizeStore.recordType({value:actuate.dialog.impl.constant.DesignChoice.UNITS_PT,text:actuate.util.Utility.getLocalizedString("chartBuilder.unit.points")});this._sizeStore.add(A);},_initChartTitle:function(){var A=this;var B={autoHeight:true,border:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},items:[{items:[{columnWidth:0.1,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.title"),style:"font:bold 11px tahoma, arial, helvetica, sans-serif;color:#000000;"},{columnWidth:0.4,id:this.id+"_title",value:"",xtype:"textfield",disabled:true},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.16,id:this.id+"_autoTitle",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.autoTitle")},{columnWidth:0.16,id:this.id+"_titleFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.titleFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_titleFontEl=document.getElementById(A.id+"_titleFont");actuate.util.Event.observe(A._control_titleFontEl,"click",A.__handleFontSelection_c,false);}}},{columnWidth:0.15,id:this.id+"_valueFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.valueFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_valueFontEl=document.getElementById(A.id+"_valueFont");actuate.util.Event.observe(A._control_valueFontEl,"click",A.__handleFontSelection_c,false);}}}]}]};return B;},_initChartLegend:function(){var B=this;this._legendPosComboStore=this._createLegendPosComboStore();var A={id:this.id+"_legendFieldSet",xtype:"fieldset",collapsed:true,collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.legend"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 10px"},listeners:{collapse:function(){if(B._parentDialog&&B._parentDialog.adjustSize){B._parentDialog.adjustSize();}},expand:function(C){if(C&&C._doLayout){C._doLayout();}if(B._parentDialog&&B._parentDialog.adjustSize){B._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.3,id:this.id+"_showLegendCheckBox",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showLegend")}]},{id:this.id+"_legendTitleRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.title")},{columnWidth:0.5,id:this.id+"_legendTitle",disabled:true,value:"",xtype:"textfield"}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.position")},{columnWidth:0.3,id:this.id+"_legendPositionSelect",xtype:"combo",editable:false,forceSelection:true,value:"3",valueField:"value",displayField:"text",disabled:true,store:this._legendPosComboStore}]}]};return A;},_initChartNavigation:function(){this._showScrollBar={id:this.id+"_scrollBar",items:[{columnWidth:0.3,id:this.id+"_navigationScrollBar",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showScrollBar")}]};this._timeline={id:this.id+"_timeLineRow",items:[{columnWidth:0.3,xtype:"label",id:this.id+"_timelineLabel",text:actuate.util.Utility.getLocalizedString("chartBuilder.timeline")},{columnWidth:0.35,id:this.id+"_navigationRangeSelector",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showRangeSelector")},{columnWidth:0.35,id:this.id+"_navigationBottomSlider",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showBottomSlider")}]};},_initCategoriesFieldSet:function(){var A=this;var B={id:this.id+"_categoriesFieldSet",xtype:"fieldset",collapsed:true,collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.categories"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}},expand:function(C){if(C&&C._doLayout){C._doLayout();}if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.title")},{columnWidth:0.5,id:this.id+"_xTitle",value:"",xtype:"textfield"},{columnWidth:0.1,id:this.id+"_xTitleFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.titleFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_xTitleFontEl=document.getElementById(A.id+"_xTitleFont");actuate.util.Event.observe(A._control_xTitleFontEl,"click",A.__handleFontSelection_c,false);}}}]},{items:[{columnWidth:0.3,id:this.id+"_xshowCategoryLabelCheckbox",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showLabels"),handler:function(){A._control_xcategoryLabelRotateInput.setDisabled(this.checked?false:true);A._control_staggerCategoryLabelCheckbox.setDisabled(this.checked?false:true);if(!this.checked){A._control_staggerCategoryLabelCheckbox.setValue(false);A._control_xcategoryLabelRotateInput.setValue("0");}}},{columnWidth:0.1,id:this.id+"_xLabelFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.labelFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_xLabelFontEl=document.getElementById(A.id+"_xLabelFont");actuate.util.Event.observe(A._control_xLabelFontEl,"click",A.__handleFontSelection_c,false);}}}]},{items:[{columnWidth:0.3,id:this.id+"_staggerCategoryLabelCheckbox",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.staggerLabels"),handler:function(){A._control_categoryLabelInterval.setDisabled(this.checked?false:true);if(!this.checked){A._control_categoryLabelInterval.setValue("1");}}}]},{items:[{columnWidth:0.3,id:this.id+"_categoryLabelIntervalLabel",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.labelsInterval")},{columnWidth:0.1,id:this.id+"_categoryLabelInterval",value:"1",xtype:"textfield",disabled:true,validator:function(D){var C=actuate.dialog.impl.Utility.validatePositiveIntegerWithoutPlus(D);if(!C){return actuate.util.Utility.getLocalizedString("chartBuilder.positiveinteger.errorMessage");}return true;}}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.labelsAngle")},{columnWidth:0.3,id:this.id+"_xcategoryLabelRotateInput",xtype:"combo",editable:false,forceSelection:true,value:"0",store:[["0","0"],["45","45"],["90","90"]]}]}]};return B;},_initValuesFieldSet:function(){var A=this;var B={id:this.id+"_valuesFieldSet",xtype:"fieldset",collapsed:true,collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.values"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}},expand:function(C){if(C&&C._doLayout){C._doLayout();}if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}}},items:[{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.title")},{columnWidth:0.5,id:this.id+"_yTitle",value:"",xtype:"textfield"},{columnWidth:0.1,id:this.id+"_yTitleFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.titleFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_yTitleFontEl=document.getElementById(A.id+"_yTitleFont");actuate.util.Event.observe(A._control_yTitleFontEl,"click",A.__handleFontSelection_c,false);}}}]},{items:[{columnWidth:0.3,id:this.id+"_yshowCategoryLabelCheckbox",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.showLabels")},{columnWidth:0.1,id:this.id+"_yLabelFont",xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.labelFont"),style:"text-decoration:underline;color:blue;cursor:pointer;white-space:nowrap;margin:3px",cls:"chartbuilder_selectFontLink",listeners:{render:function(){A._control_yLabelFontEl=document.getElementById(A.id+"_yLabelFont");actuate.util.Event.observe(A._control_yLabelFontEl,"click",A.__handleFontSelection_c,false);}}}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.minValue")},{columnWidth:0.3,id:this.id+"_yScaleMinLiteralID",xtype:"textfield",validator:function(D){var C=actuate.util.Utility.isNumber(typeof D)||actuate.util.Utility.isNumeric(D);if(!C){return actuate.util.Utility.getLocalizedString("chartBuilder.numeric.errorMessage");}return true;}}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.maxValue")},{columnWidth:0.3,id:this.id+"_yScaleMaxLiteralID",xtype:"textfield",validator:function(D){var C=actuate.util.Utility.isNumber(typeof D)||actuate.util.Utility.isNumeric(D);if(!C){return actuate.util.Utility.getLocalizedString("chartBuilder.numeric.errorMessage");}return true;}}]},{items:[{columnWidth:0.3,id:this.id+"_autoStep",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.autoStep"),handler:function(){var C=actuate.widget.ComponentMgr.get(A.id+"_step");C.setDisabled(this.checked?true:false);var D=actuate.widget.ComponentMgr.get(A.id+"_stepIntervalID");D.setDisabled(this.checked?true:false);}}]},{id:this.id+"_stepIntervalRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.stepInterval")},{columnWidth:0.3,id:this.id+"_stepIntervalID",xtype:"textfield",disabled:true,validator:function(D){var C=actuate.util.Utility.isNumber(typeof D)||actuate.util.Utility.isNumeric(D);if(!C){return actuate.util.Utility.getLocalizedString("chartBuilder.numeric.errorMessage");}return true;}}]},{id:this.id+"_stepNumbersRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.stepNumber")},{columnWidth:0.3,id:this.id+"_step",xtype:"spinner",value:1,disabled:true,strategy:new actuate.widget.custom.Spinner.NumberStrategy({minValue:1}),validator:function(D){var C=actuate.dialog.impl.Utility.validatePositiveIntegerWithoutPlus(D);if(!C){return actuate.util.Utility.getLocalizedString("chartBuilder.positiveinteger.errorMessage");}return true;}}]},{items:[{columnWidth:0.3,xtype:"label",id:this.id+"_ycategoryLabelRotateLabel",text:actuate.util.Utility.getLocalizedString("chartBuilder.labelsAngle")},{columnWidth:0.3,id:this.id+"_ycategoryLabelRotateInput",xtype:"combo",editable:false,forceSelection:true,value:"0",store:[["0","0"],["45","45"],["90","90"]]}]}]};return B;},_initChartBaseFontContent:function(){var F=this;var A=actuate.dialog.FontOptions;this._fontFamiliesStore=[];var C=A.chartFontFamilies;this._fontFamiliesStore.push(["auto",actuate.util.Utility.getLocalizedString("common.fonttype.auto")]);for(var B in C){for(var E in C[B]){this._fontFamiliesStore.push([C[B][E],E]);}}this._fontSizesStore=[];var D=A.fontSizes;this._fontSizesStore.push(["auto",actuate.util.Utility.getLocalizedString("common.fontsize.auto")]);for(var B in D){for(var E in D[B]){if(E=="0"){continue;}else{this._fontSizesStore.push([D[B][E],E]);}}}this._chartBaseFont={id:this.id+"_baseFontRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.baseFont")},{columnWidth:0.3,id:this.id+"_baseFontFamily",xtype:"combo",editable:false,anchor:"95%",store:this._fontFamiliesStore},{columnWidth:0.01,xtype:"label",style:"height:1px"},{columnWidth:0.09,id:this.id+"_baseFontSize",xtype:"combo",editable:false,anchor:"95%",store:this._fontSizesStore},{columnWidth:0.01,xtype:"label",style:"height:1px"},{columnWidth:0.25,id:this.id+"_baseFontColor",value:"Auto",xtype:"colorfield",editable:false}]};},_clearFontControls:function(){this._control_baseFontFamily.setValue("auto");this._control_baseFontSize.setValue("auto");this._control_baseFontColor.setValue("auto");this._control_showLegendCheckBox.setValue(false);this._control_legendTitle.setValue("");this._control_legendPositionSelect.setValue("3");this.chartTitleFont=null;this.chartXTitleFont=null;this.chartXLabelFont=null;this.chartYTitleFont=null;this.chartYLabelFont=null;this.chartValueFont=null;},_updateLegend:function(){if(this.chart&&this.chart.legend){this._control_showLegendCheckBox.setValue(this.chart.legend.visible);if(this.chart.legend.visible){this._control_legendTitle.setValue(this.chart.legend.title);}var A=this._legendPosComboStore.query("value",this.chart.legend.position).itemAt(0);if(A){this._control_legendPositionSelect.setValue(this.chart.legend.position);}}},_updateChartNavigation:function(){if(this.chart){this._navigationBottomSliderCheckBox.setValue(this.chart.showBottomSlider?this.chart.showBottomSlider:false);this._navigationRangeSelectorCheckBox.setValue(this.chart.showRangeSelector?this.chart.showRangeSelector:false);this._navigationScrollBarCheckBox.show();}},_showHideTimeLine:function(A){if(A){this._navigationBottomSliderCheckBox.show();this._navigationRangeSelectorCheckBox.show();this._timelineLabel.show();if(this.chart){this._navigationBottomSliderCheckBox.setValue(this.chart.showBottomSlider?this.chart.showBottomSlider:false);this._navigationRangeSelectorCheckBox.setValue(this.chart.showRangeSelector?this.chart.showRangeSelector:false);}this._setBottomSliderForflip();}else{this._navigationBottomSliderCheckBox.setValue(false);this._navigationRangeSelectorCheckBox.setValue(false);this._navigationBottomSliderCheckBox.hide();this._navigationRangeSelectorCheckBox.hide();this._timelineLabel.hide();}},_addChartLegendToResponse:function(C,B){var F=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.ShowLegend);var E=C.createTextNode(this._control_showLegendCheckBox.checked?"true":"false");F.appendChild(E);B.appendChild(F);var D=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.LegendPosition);var I=C.createTextNode(this._control_legendPositionSelect.getValue());D.appendChild(I);B.appendChild(D);if(this._control_showLegendCheckBox.checked&&this._isFlashChart==true){var H=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.LegendTitle);var A=this._control_legendTitle.getValue();if(A.indexOf("=")>-1){A="="+A;}var G=C.createTextNode(A);H.appendChild(G);B.appendChild(H);}},_addChartNavigationToResponse:function(F,A){var D=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.ShowScrollBar);var C=F.createTextNode(this._navigationScrollBarCheckBox.getValue().toString());D.appendChild(C);A.appendChild(D);var B=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.ShowRangeSelector);C=F.createTextNode(this._navigationRangeSelectorCheckBox.getValue().toString());B.appendChild(C);A.appendChild(B);var E=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.ShowBottomSlider);C=F.createTextNode(this._navigationBottomSliderCheckBox.getValue().toString());E.appendChild(C);A.appendChild(E);},_updateFontValues:function(B){var C=new actuate.dialog.impl.helper.font.StyleModel();C.reset();var A=B.baseFont;if(A){C.setValues(A.family,A.size,A.color);this._control_baseFontFamily.setValue(C.getFontFamily());this._control_baseFontSize.setValue(C.getFontSize());this._control_baseFontColor.setValue(C.getColor());}},createLabelsNode:function(H){var F=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Labels);this._addTitleToResponse(H,F);if(this._control_xTitle){var G=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.X_Axis);var B=H.createTextNode(this._control_xTitle.getValue());G.appendChild(B);F.appendChild(G);if(this.chartXTitleFont){var I=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.XAxisFont);this.parseFontInfo(H,I,this.chartXTitleFont);F.appendChild(I);}if(this.chartXLabelFont){var I=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.XAxisLabelFont);this.parseFontInfo(H,I,this.chartXLabelFont);F.appendChild(I);}}if(this._control_yTitle){var A=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Y_Axis);var E=H.createTextNode(this._control_yTitle.getValue());A.appendChild(E);F.appendChild(A);if(this.chartYTitleFont){var D=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.YAxisFont);this.parseFontInfo(H,D,this.chartYTitleFont);F.appendChild(D);}if(this.chartYLabelFont){var D=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.YAxisLabelFont);this.parseFontInfo(H,D,this.chartYLabelFont);F.appendChild(D);}}if(this._addChartFontToResponse){this._addChartFontToResponse(H,F);}if(this._addChartTitleFontToResponse){this._addChartTitleFontToResponse(H,F);}if(!this._isFlashChart&&(this.chartType==actuate.Constant.ChartType.PIE_CHART||this.chartType==actuate.Constant.ChartType.DONUT_CHART)&&this.chartValueFont){var C=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.YAxisLabelFont);this.parseFontInfo(H,C,this.chartValueFont);F.appendChild(C);}return F;},_addTitleToResponse:function(F,G){if(!this._control_autoTitle.getValue()&&this._control_title.disable!="true"){var E=this._control_title.getValue();var B=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Title);var A=F.createTextNode(E);B.appendChild(A);G.appendChild(B);}var D=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.AutoTitle);var C=F.createTextNode(!this._control_autoTitle.getValue()?"false":"true");D.appendChild(C);G.appendChild(D);},_addChartTitleFontToResponse:function(B,C){if((!this._isFlashChart)&&this.chartTitleFont){var A=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.titleFont);this.parseFontInfo(B,A,this.chartTitleFont);C.appendChild(A);}},_addChartFontToResponse:function(C,E){var B={};B.family=this._control_baseFontFamily.getValue();B.size=this._control_baseFontSize.getValue();B.color=this._control_baseFontColor.getValue();var D=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.baseFont);this.parseFontInfo(C,D,B);E.appendChild(D);var A={};A.family="auto";A.size="auto";A.color="auto";var D=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.outsideFont);this.parseFontInfo(C,D,A);E.appendChild(D);},parseFontInfo:function(F,Q,K){if(K.family){var I=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.FAMILY);var G=F.createTextNode(K.family);I.appendChild(G);Q.appendChild(I);}if(K.size){var T=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.SIZE);var R=F.createTextNode(K.size);T.appendChild(R);Q.appendChild(T);}if(K.color){var O=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Color);var H=F.createTextNode(K.color);O.appendChild(H);Q.appendChild(O);}if(K.backgroundColor){var D=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.BackgroundColor);var V=F.createTextNode(K.backgroundColor);D.appendChild(V);Q.appendChild(D);}if(K.bold){var E=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Bold);var N=K.bold;var C=this.getTrueFalseLiteral(N);var W=F.createTextNode(C);E.appendChild(W);Q.appendChild(E);}if(K.italic){var P=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Italic);var M=K.italic;var B=this.getTrueFalseLiteral(M);var L=F.createTextNode(B);P.appendChild(L);Q.appendChild(P);}if(K.underline){var U=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Underline);var J=K.underline;var A=this.getTrueFalseLiteral(J);var S=F.createTextNode(A);U.appendChild(S);Q.appendChild(U);}return F;},_onChangeShowLegend:function(){var A=this._control_showLegendCheckBox.getValue();if(A){this._control_legendTitle.enable();this._control_legendPositionSelect.enable();}else{this._control_legendTitle.disable();this._control_legendPositionSelect.disable();}},_setBottomSliderForflip:function(){var A=(this._flipAxis!=undefined&&this._flipAxis==true);if(A){this._navigationBottomSliderCheckBox.hide();}},loadData:function(A){if(A){this._isFlashChart=A._isFlashChart;this.chartType=A.chartType;this.chart=A[actuate.model.Constant.MetadataType.ELEMENT];this._flipAxis=this.chart&&this.chart.flipAxis!=undefined?this.chart.flipAxis:null;this._setBottomSliderForflip();if(this.chart&&this.chart.type=="FLASHCHART"){this._isFlashChart=true;}else{if(this.chart&&this.chart.type=="CHART"){this._isFlashChart=false;}}if(this.chart&&(this.chart.type=="FLASHCHART"||this.chart.type=="CHART")){if(this._updateFontValues){this._updateFontValues(this.chart);}var B=this.chart.title?this.chart.title.title:"";if(this._control_title){this._control_title.setValue(B?B:"");}if(this._control_autoTitle){this._control_autoTitle.setValue(this.chart.title.autoTitle);}if(this._navigationScrollBarCheckBox){this._navigationScrollBarCheckBox.setValue(this.chart.showScrollBar?this.chart.showScrollBar:false);}}this._legendPosComboStore=this._createLegendPosComboStore();if(this._control_legendPositionSelect){this._control_legendPositionSelect.setStore(this._legendPosComboStore);}if(this._isFlashChart==true){this._control_baseFontRow.show();if(this._control_stepNumbersRow){this._control_stepNumbersRow.show();}if(this._control_stepIntervalRow){this._control_stepIntervalRow.hide();}if(this._control_titleFont){this._control_titleFont.hide();}if(this._control_xTitleFont){this._control_xTitleFont.hide();}if(this._control_xLabelFont){this._control_xLabelFont.hide();}if(this._control_yTitleFont){this._control_yTitleFont.hide();}if(this._control_yLabelFont){this._control_yLabelFont.hide();}if(this._control_valueFont){this._control_valueFont.hide();}}else{if(this._isFlashChart==false){this._control_baseFontRow.hide();if(this._control_stepIntervalRow){this._control_stepIntervalRow.show();}if(this._control_stepNumbersRow){this._control_stepNumbersRow.hide();}this.titleStyleMenus=actuate.dialog.FontOptions;this.xTitleStyleMenus=actuate.dialog.FontOptions;this.xLabelStyleMenus=actuate.dialog.FontOptions;this.yTitleStyleMenus=actuate.dialog.FontOptions;this.yLabelStyleMenus=actuate.dialog.FontOptions;this.valueStyleMenus=actuate.dialog.FontOptions;if(this.chart){this.chartTitleFont=this.chart.title?this.chart.title.font:null;if(this.chart.xAxis){this.chartXTitleFont=this.chart.xAxis.titleFont;this.chartXLabelFont=this.chart.xAxis.labelFont;}if(this.chart.yAxis&&this.chart.yAxis[0]){this.chartYTitleFont=this.chart.yAxis[0].titleFont;this.chartYLabelFont=this.chart.yAxis[0].labelFont;}this.chartValueFont=this.chart.valueFont;}if(this._control_titleFont){this._control_titleFont.show();}if(this._control_xTitleFont){this._control_xTitleFont.show();}if(this._control_xLabelFont){this._control_xLabelFont.show();}if(this._control_yTitleFont){this._control_yTitleFont.show();}if(this._control_yLabelFont){this._control_yLabelFont.show();}if(this._control_valueFont){if(this.chartType==actuate.Constant.ChartType.PIE_CHART||this.chartType==actuate.Constant.ChartType.DONUT_CHART){this._control_valueFont.show();}else{this._control_valueFont.hide();}}}}this._updateLegend();}},_createLegendPosComboStore:function(){var C=new actuate.widget.data.SimpleStore({fields:["value","text"]});var G=new C.recordType({value:null,text:actuate.util.Utility.getLocalizedString("chartBuilder.auto")});var B=new C.recordType({value:"0",text:actuate.util.Utility.getLocalizedString("chartBuilder.above")});var F=new C.recordType({value:"1",text:actuate.util.Utility.getLocalizedString("chartBuilder.below")});var E=new C.recordType({value:"2",text:actuate.util.Utility.getLocalizedString("chartBuilder.left")});var D=new C.recordType({value:"3",text:actuate.util.Utility.getLocalizedString("chartBuilder.right")});var A=new C.recordType({value:"4",text:actuate.util.Utility.getLocalizedString("chartBuilder.inside")});if(this._isFlashChart==true){C.add(D);C.add(F);}else{if(this._isFlashChart==false){C.add(B);C.add(F);C.add(E);C.add(D);}}return C;},storeUIData:function(B){if(B!=null){var A={visible:this._control_showLegendCheckBox.getValue(),title:this._control_legendTitle.getValue(),position:this._control_legendPositionSelect.getValue()};B.formatTab={};B.formatTab[actuate.model.Constant.MetadataType.ELEMENT]={legend:A};}return B;},_afterHide:function(){if(this._control_legendFieldSet){this._control_legendFieldSet._collapse();}if(this._control_categoriesFieldSet){this._control_categoriesFieldSet._collapse();}if(this._control_valuesFieldSet){this._control_valuesFieldSet._collapse();}this._clearControls();},_clearControls:function(){this._control_title.setValue("");this._control_autoTitle.setValue(false);if(this._clearFontControls){this._clearFontControls();}},_clearChartNavigation:function(){this._navigationRangeSelectorCheckBox.setValue(false);this._navigationBottomSliderCheckBox.setValue(false);this._navigationScrollBarCheckBox.setValue(true);},__handleFontSelection:function(A){var B=actuate.util.Event.findElementContainingCLassName(A,"chartbuilder_selectFontLink");this.fontButtonSelected=B;this._isFontChanged=true;switch(this.fontButtonSelected.id){case this._control_titleFont.id:this.requestFontDialog(this.titleStyleMenus,this.chartTitleFont);break;case this._control_valueFont.id:this.requestFontDialog(this.valueStyleMenus,this.chartValueFont);break;case this._control_xTitleFont.id:this.requestFontDialog(this.xTitleStyleMenus,this.chartXTitleFont);break;case this._control_xLabelFont.id:this.requestFontDialog(this.xLabelStyleMenus,this.chartXLabelFont);break;case this._control_yTitleFont.id:this.requestFontDialog(this.yTitleStyleMenus,this.chartYTitleFont);break;case this._control_yLabelFont.id:this.requestFontDialog(this.yLabelStyleMenus,this.chartYLabelFont);break;default:this._isFontChanged=false;break;}},requestFontDialog:function(B,A){if(!this.handleLabelFont_c){this.handleLabelFont_c=actuate.Method.bind(this.handleLabelFont,this);}var C=this.handleLabelFont_c;actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var D=actuate.dialog.FontDialog.getInstance();D.setFont(A);D.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,C);var E={};E.enableBackgroundColor=false;D.show(null,null,E);});},handleLabelFont:function(B,A){switch(this.fontButtonSelected.id){case this._control_titleFont.id:this.chartTitleFont=A;break;case this._control_valueFont.id:this.chartValueFont=A;break;case this._control_xTitleFont.id:this.chartXTitleFont=A;break;case this._control_xLabelFont.id:this.chartXLabelFont=A;break;case this._control_yTitleFont.id:this.chartYTitleFont=A;break;case this._control_yLabelFont.id:this.chartYLabelFont=A;break;default:break;}},_onChangeAutoTitle:function(){var A=this._control_autoTitle.getValue();if(A){this._control_title.disable();}else{this._control_title.enable();}},getTrueFalseLiteral:function(A){if(!A||A=="false"){return"false";}else{return"true";}},validate:function(){var E=actuate.util.Utility.getNumberFormatter();var D=this._control_width.getValue();var A=this._control_height.getValue();if(D!=""){D=E.parse(D);}if(A!=""){A=E.parse(A);}if(this._control_width&&this._control_height){var B=actuate.util.Utility.convertToPoint(D,this._control_widthUnit.getValue());var C=actuate.util.Utility.convertToPoint(A,this._control_heightUnit.getValue());if(B<50||C<50){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),actuate.util.Utility.getLocalizedString("chartBuilder.validationMinErrorChartSize"));return false;}}return true;}});actuate.util.Package.define("actuate.dialog.impl.helper.gadgetbuilder");actuate.dialog.impl.helper.gadgetbuilder.BaseGadgetFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{initialize:function(){actuate.dialog.impl.helper.gadgetbuilder.BaseGadgetFormatTab.superclass.initialize.call(this);this._fontFamily=actuate.widget.ComponentMgr.get(this.id+"_fontFamily");this._fontSize=actuate.widget.ComponentMgr.get(this.id+"_fontSize");this._fontColor=actuate.widget.ComponentMgr.get(this.id+"_fontColor");this._showTooltip=actuate.widget.ComponentMgr.get(this.id+"_showTooltip");},_initBaseFontContent:function(){var A=actuate.dialog.FontOptions;this._fontFamiliesStore=[];var C=A.fontFamilies;this._fontFamiliesStore.push(["auto",actuate.util.Utility.getLocalizedString("common.fonttype.auto")]);for(var B in C){for(var E in C[B]){this._fontFamiliesStore.push([C[B][E],E]);}}this._fontSizesStore=[];var D=A.fontSizes;this._fontSizesStore.push(["auto",actuate.util.Utility.getLocalizedString("common.fontsize.auto")]);for(var B in D){for(var E in D[B]){if(E=="0"){continue;}else{this._fontSizesStore.push([D[B][E],E]);}}}this._baseFont={items:[{columnWidth:0.2,xtype:"label",text:actuate.util.Utility.getLocalizedString("common.font.font")},{columnWidth:0.2,id:this.id+"_fontFamily",xtype:"combo",editable:false,value:"auto",store:this._fontFamiliesStore},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.2,id:this.id+"_fontSize",editable:true,xtype:"combo",value:"auto",store:this._fontSizesStore},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.3,id:this.id+"_fontColor",value:"Auto",editable:false,xtype:"colorfield"}]};this._tooltip={items:[{id:this.id+"_showTooltip",columnWidth:0.45,xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("flashGadgetBuilderDialog.showToolTip")}]};},_clearControls:function(){this._fontFamily.setValue("auto");this._fontSize.setValue("auto");this._fontColor.setValue("auto");this._showTooltip.setValue("true");},_updateToolTipValue:function(A){var B=A.showTooltip;if(actuate.util.Utility.isEmpty(B,false)){this._showTooltip.setValue("false");}this._showTooltip.setValue(B);},_updateFontValues:function(B){var A=B.baseFont;if(!actuate.util.Utility.isEmpty(A,false)){if(!actuate.util.Utility.isEmpty(A.font,false)){this._fontFamily.setValue(A.font);}else{this._fontFamily.setValue("auto");}if(A.size!==0){this._fontSize.setValue(A.size);}else{this._fontSize.setValue("auto");}if(A.color&&actuate.util.String.trim(A.color)!=="#000000"){this._fontColor.setValue(A.color);}else{this._fontColor.setValue("Auto");}}else{this._clearControls();}},_addBaseFontToSoapResponse:function(C,B){var A={};A.family=this._fontFamily.getValue();A.size=this._fontSize.getValue();A.color=this._fontColor.getHexValue();var D=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.baseFont);this._parseFontInfo(C,D,A);B.appendChild(D);},_addShowTooltipToSoapResponse:function(C,B){var D=actuate.util.XmlDom.createElement(C,"ShowTooltip");var A=C.createTextNode(this._showTooltip.checked?"true":"false");D.appendChild(A);B.appendChild(D);},_parseFontInfo:function(G,E,C){if(C.family){var F=actuate.util.XmlDom.createElement(G,actuate.Constant.tag.FAMILY);var B=G.createTextNode(C.family);F.appendChild(B);E.appendChild(F);}if(C.size){var H=actuate.util.XmlDom.createElement(G,actuate.Constant.tag.SIZE);var D=G.createTextNode(C.size);H.appendChild(D);E.appendChild(H);}if(C.color){var A=actuate.util.XmlDom.createElement(G,actuate.Constant.tag.Color);var I=G.createTextNode(C.color);A.appendChild(I);E.appendChild(A);}},validate:function(){var E=actuate.util.Utility.getNumberFormatter();var D=this._control_width.getValue();var A=this._control_height.getValue();if(D!=""){D=E.parse(D);}if(A!=""){A=E.parse(A);}if(this._control_width&&this._control_height){var B=actuate.util.Utility.convertToPoint(D,this._control_widthUnit.getValue());var C=actuate.util.Utility.convertToPoint(A,this._control_heightUnit.getValue());if(B<50||C<50){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),actuate.util.Utility.getLocalizedString("flashGadgetBuilderDialog.validationMinErrorGadgetSize"));return false;}}return true;}});actuate.util.Package.define("actuate.dialog.impl.helper.flexcomponentbuilder");actuate.dialog.impl.helper.flexcomponentbuilder.FlexComponentFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{_width:0,_height:0,_AUTO:"Auto",_FONTFAMILY_DEFAULT:"Verdana",_HEADER_FONTSIZE_DEFAULT:12,_DATAROW_FONTSIZE_DEFAULT:10,_HORIZONTAL_ALIGNMENT_DEFAULT:"left",_WORDWRAP_DEFAULT:false,_TOOLTIP_DEFAULT:false,_HEADER_BOLD_DEFAULT:true,_DATAROW_BOLD_DEFAULT:false,_HEADER_ITALICS_DEFAULT:false,_DATAROW_ITALICS_DEFAULT:false,_HEADER_UNDERLINE_DEFAULT:false,_DATAROW_UNDERLINE_DEFAULT:false,_VISIBLE_DEFAULT:true,_DROPSHADOW_DEFAULT:true,_HORIZONTALGRIDLINE_DEFAULT:false,_VERTICALGRIDLINE_DEFAULT:true,_SINGLECOLOR_DEFAULT:false,_ALTERNATINGCOLOR_DEFAULT:true,initialize:function(){actuate.dialog.impl.helper.flexcomponentbuilder.FlexComponentFormatTab.superclass.initialize.call(this);},_defineObjects:function(){this._columnHeaderBgColor1=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderBgColor1");this._columnHeaderFontType=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderFontType");this._columnHeaderFontSize=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderFontSize");this._columnHeaderFontColor=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderFontColor");this._columnHeaderBold=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderBold");this._columnHeaderItalic=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderItalic");this._columnHeaderUnderline=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderUnderline");this._columnHeaderLeft=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderLeft");this._columnHeaderRight=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderRight");this._columnHeaderCenter=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderCenter");this._columnHeaderWordwrap=actuate.widget.ComponentMgr.get(this.id+"_columnHeaderWordwrap");this._dataRowBgColor1=actuate.widget.ComponentMgr.get(this.id+"_dataRowBgColor1");this._dataRowBgColor2=actuate.widget.ComponentMgr.get(this.id+"_dataRowBgColor2");this._dataRowFontType=actuate.widget.ComponentMgr.get(this.id+"_dataRowFontType");this._dataRowFontSize=actuate.widget.ComponentMgr.get(this.id+"_dataRowFontSize");this._dataRowFontColor=actuate.widget.ComponentMgr.get(this.id+"_dataRowFontColor");this._dataRowBold=actuate.widget.ComponentMgr.get(this.id+"_dataRowBold");this._dataRowItalic=actuate.widget.ComponentMgr.get(this.id+"_dataRowItalic");this._dataRowUnderline=actuate.widget.ComponentMgr.get(this.id+"_dataRowUnderline");this._dataRowWordwrap=actuate.widget.ComponentMgr.get(this.id+"_dataRowWordwrap");this._dataRowSingleColorRadioButton=actuate.widget.ComponentMgr.get(this.id+"_dataRowSingleColorRadioButton");this._dataRowAlternatingColorRadioButton=actuate.widget.ComponentMgr.get(this.id+"_dataRowAlternatingColorRadioButton");this._generalPropBorderColor=actuate.widget.ComponentMgr.get(this.id+"_generalPropBorderColor");this._generalPropBorderColorHGL=actuate.widget.ComponentMgr.get(this.id+"_generalPropBorderColorHGL");this._generalPropBorderColorVGL=actuate.widget.ComponentMgr.get(this.id+"_generalPropBorderColorVGL");this._generalPropVisible=actuate.widget.ComponentMgr.get(this.id+"_generalPropVisible");this._generalPropDropShadow=actuate.widget.ComponentMgr.get(this.id+"_generalPropDropShadow");this._generalPropHGLCheckBox=actuate.widget.ComponentMgr.get(this.id+"_generalPropHGLCheckBox");this._generalPropVGLCheckBox=actuate.widget.ComponentMgr.get(this.id+"_generalPropVGLCheckBox");this._generalPropShowTooltip=actuate.widget.ComponentMgr.get(this.id+"_generalPropShowTooltip");this._addHandlers();},_addHandlers:function(){this._onChangeCheckBox_c=actuate.Method.bind(this._onChangeCheckBox,this);if(this._generalPropVisible){this._generalPropVisible.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._generalPropDropShadow){this._generalPropDropShadow.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._generalPropHGLCheckBox){this._generalPropHGLCheckBox.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._generalPropVGLCheckBox){this._generalPropVGLCheckBox.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._generalPropShowTooltip){this._generalPropShowTooltip.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._dataRowWordwrap){this._dataRowWordwrap.registerEventHandler("check",this._onChangeCheckBox_c);}if(this._columnHeaderWordwrap){this._columnHeaderWordwrap.registerEventHandler("check",this._onChangeCheckBox_c);}this._eh_toggleButton_c=actuate.Method.bind(this._eh_toggleButton,this);if(this._columnHeaderBold){this._columnHeaderBold.registerEventHandler("click",this._eh_toggleButton_c);}if(this._columnHeaderItalic){this._columnHeaderItalic.registerEventHandler("click",this._eh_toggleButton_c);}if(this._columnHeaderUnderline){this._columnHeaderUnderline.registerEventHandler("click",this._eh_toggleButton_c);}if(this._dataRowBold){this._dataRowBold.registerEventHandler("click",this._eh_toggleButton_c);}if(this._dataRowItalic){this._dataRowItalic.registerEventHandler("click",this._eh_toggleButton_c);}if(this._dataRowUnderline){this._dataRowUnderline.registerEventHandler("click",this._eh_toggleButton_c);}this._eh_setAlignment_c=actuate.Method.bind(this._eh_setAlignment,this);if(this._columnHeaderLeft){this._columnHeaderLeft.registerEventHandler("click",this._eh_setAlignment_c);}if(this._columnHeaderCenter){this._columnHeaderCenter.registerEventHandler("click",this._eh_setAlignment_c);}if(this._columnHeaderRight){this._columnHeaderRight.registerEventHandler("click",this._eh_setAlignment_c);}},_setColumnHeader:function(D,C){var A=this;var B={xtype:"fieldset",title:D,checkboxToggle:false,collapsible:true,defaults:{border:false,layout:"form",width:480,bodyStyle:"padding:1px 4px 2px 4px"},listeners:{collapse:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}},expand:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}}},items:[{layout:"column",items:[{columnWidth:0.165,text:actuate.util.Utility.getLocalizedString("tableBuilder.background"),xtype:"label"},{columnWidth:0.15,xtype:"label",style:"height:1px"},{id:C+"BgColor1",width:142,value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.font"),width:105},{id:C+"FontType",width:100,editable:false,xtype:"combo",forceSelection:true,store:this._fontOptionsStore},{id:C+"FontSize",width:35,xtype:"combo",editable:true,style:"margin-left:5px;margin-right: 5px;",forceSelection:true,store:this._fontSizeStore},{width:2,xtype:"label",style:"height:1px"},{id:C+"Bold",icon:"dashboard/images/gadgets/table/text_bold_on.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Italic",icon:"dashboard/images/gadgets/table/text_italic_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Underline",icon:"dashboard/images/gadgets/table/text_underline_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"}]},{layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.fontColor"),width:105},{id:C+"FontColor",width:142,value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.alignment"),width:105},{id:C+"Left",icon:"dashboard/images/gadgets/table/alignment_left_on.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Center",icon:"dashboard/images/gadgets/table/alignment_center_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Right",icon:"dashboard/images/gadgets/table/alignment_right_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"}]},{layout:"column",items:[{columnWidth:0.3,id:C+"Wordwrap",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.wordWrap")}]}]};return B;},_setDataRows:function(E,C,D){var A=this;var B={xtype:"fieldset",title:E,checkboxToggle:false,collapsible:true,defaults:{border:false,layout:"form",width:480,bodyStyle:"padding:1px 4px 2px 4px"},listeners:{collapse:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}},expand:function(){if(A._parentDialog&&A._parentDialog.adjustSize){A._parentDialog.adjustSize();}}},items:[{layout:"column",items:[{width:105,text:actuate.util.Utility.getLocalizedString("tableBuilder.background"),xtype:"label"},{id:C+"SingleColorRadioButton",xtype:"radio",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.single"),handler:function(H){var G=actuate.widget.ComponentMgr.get(C+"AlternatingColorRadioButton");var F=actuate.widget.ComponentMgr.get(C+"SingleColorRadioButton");var I=actuate.widget.ComponentMgr.get(C+"BgColor2");if(H.checked){G.setValue(false);F.setValue(true);I.setDisabled(true);}}},{columnWidth:0.03,xtype:"label",style:"height:1px"},{id:C+"AlternatingColorRadioButton",xtype:"radio",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.alternating"),handler:function(H){var G=actuate.widget.ComponentMgr.get(C+"AlternatingColorRadioButton");var F=actuate.widget.ComponentMgr.get(C+"SingleColorRadioButton");var I=actuate.widget.ComponentMgr.get(C+"BgColor2");if(H.checked){F.setValue(false);G.setValue(true);I.setDisabled(false);}}}]},{layout:"column",items:[{width:105,text:" ",xtype:"label",hidden:D},{width:105,xtype:"label",style:"height:1px"},{id:C+"BgColor1",width:142,value:"Auto",editable:false,xtype:"colorfield"},{width:7,xtype:"label",style:"height:1px"},{id:C+"BgColor2",width:142,value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.font"),width:105},{id:C+"FontType",width:100,xtype:"combo",editable:false,forceSelection:true,store:this._fontOptionsStore},{id:C+"FontSize",width:35,xtype:"combo",editable:true,style:"margin-left:5px;margin-right: 5px;",forceSelection:true,store:this._fontSizeStore},{width:2,xtype:"label",style:"height:1px"},{id:C+"Bold",icon:"dashboard/images/gadgets/table/text_bold_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Italic",icon:"dashboard/images/gadgets/table/text_italic_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"},{id:C+"Underline",icon:"dashboard/images/gadgets/table/text_underline_off.png",cls:"actuate_table_builder_format_buttons",xtype:"button"}]},{layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.fontColor"),width:105},{id:C+"FontColor",width:142,value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{columnWidth:0.3,id:C+"Wordwrap",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.wordWrap")}]}]};return B;},_setGeneralProperties:function(E,C,D){var B=this;var A={xtype:"fieldset",autoHeight:true,title:E,checkboxToggle:false,collapsible:true,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(B._parentDialog&&B._parentDialog.adjustSize){B._parentDialog.adjustSize();}},expand:function(){if(B._parentDialog&&B._parentDialog.adjustSize){B._parentDialog.adjustSize();}}},items:[{layout:"column",items:[{width:105,xtype:"label",text:actuate.util.Utility.getLocalizedString("tableBuilder.border")},{id:C+"Visible",xtype:"checkbox",width:75,checked:true,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.visible"),handler:function(){var F=actuate.widget.ComponentMgr.get(C+"BorderColor");if(this.checked){F.setDisabled(false);}else{F.setDisabled(true);}}},{width:5,xtype:"label",style:"height:1px"},{id:C+"BorderColor",fieldLabel:actuate.util.Utility.getLocalizedString("tableBuilder.border"),width:124,value:"Auto",editable:false,xtype:"colorfield"},{width:7,xtype:"label",style:"height:1px"},{id:C+"DropShadow",xtype:"checkbox",width:80,checked:false,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.dropShadow")}]},{layout:"column",items:[{width:105,xtype:"label",text:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.gridLines")},{id:C+"HGLCheckBox",width:75,xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.horizontalGridLines"),handler:function(){var F=actuate.widget.ComponentMgr.get(C+"BorderColorHGL");if(this.checked){F.setDisabled(false);}else{F.setDisabled(true);}}},{width:5,xtype:"label",style:"height:1px"},{id:C+"BorderColorHGL",width:124,fieldLabel:actuate.util.Utility.getLocalizedString("tableBuilder.border"),value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{width:105,text:" ",xtype:"label",hidden:D},{width:105,xtype:"label",style:"height:1px"},{id:C+"VGLCheckBox",width:75,xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.verticalGridLines"),handler:function(){var F=actuate.widget.ComponentMgr.get(C+"BorderColorVGL");if(this.checked){F.setDisabled(false);}else{F.setDisabled(true);}}},{width:5,xtype:"label",style:"height:1px"},{id:C+"BorderColorVGL",width:124,fieldLabel:actuate.util.Utility.getLocalizedString("tableBuilder.border"),value:"Auto",editable:false,xtype:"colorfield"}]},{layout:"column",items:[{columnWidth:0.3,id:C+"ShowTooltip",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.tooltip")}]}]};return A;},_updateSize:function(F){var D=5;var C=7;var E=actuate.Constant.ContentMargin;D+=E;C+=E;if(F.width){var B=actuate.dialog.impl.Utility.stripUnits(F.width)-D;this._width=actuate.dialog.impl.Utility.convertPxtoPt(B)+".0pt";}if(F.height){var A=actuate.dialog.impl.Utility.stripUnits(F.height)-C;this._height=actuate.dialog.impl.Utility.convertPxtoPt(A)+".0pt";}else{var A=actuate.Constant.ViewerContainer.DEFAULT_HEIGHT-C;this._height=actuate.dialog.impl.Utility.convertPxtoPt(A)+".0pt";}},_updateMenuOptions:function(){this._fontOptionsStore=[];var A=actuate.dialog.FontOptions;var C=A.fontFamilies;for(var B in C){for(var D in C[B]){this._fontOptionsStore.push([C[B][D],D]);}}this._fontOptionsStore.push(["Times New Roman",actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.FontOption.timesNewRoman")]);this._fontOptionsStore.push(["Courier New",actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.FontOption.courierNew")]);this._fontOptionsStore.push(["Georgia",actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.FontOption.georgia")]);this._fontOptionsStore.push(["Verdana",actuate.util.Utility.getLocalizedString("FlexComponentBuilderDialog.FontOption.verdana")]);this._fontSizeStore=[];this._fontSizeStore.push(["8","8"]);this._fontSizeStore.push(["10","10"]);this._fontSizeStore.push(["12","12"]);this._fontSizeStore.push(["14","14"]);this._fontSizeStore.push(["16","16"]);this._fontSizeStore.push(["20","20"]);this._fontSizeStore.push(["24","24"]);this._setMenuOptions();this._reset();},_setMenuOptions:function(){this._columnHeaderFontType.setStore(this._fontOptionsStore);this._dataRowFontType.setStore(this._fontOptionsStore);this._columnHeaderFontSize.setStore(this._fontSizeStore);this._dataRowFontSize.setStore(this._fontSizeStore);},_reset:function(){this._columnHeaderFontType.setValue(this._FONTFAMILY_DEFAULT);this._columnHeaderFontSize.setValue(this._HEADER_FONTSIZE_DEFAULT);this._columnHeaderBgColor1.setValue(this._AUTO);this._columnHeaderFontColor.setValue(this._AUTO);this._columnHeaderWordwrap.setValue(this._WORDWRAP_DEFAULT);this._dataRowFontType.setValue(this._FONTFAMILY_DEFAULT);this._dataRowFontSize.setValue(this._DATAROW_FONTSIZE_DEFAULT);this._dataRowBgColor1.setValue(this._AUTO);this._dataRowBgColor2.setValue(this._AUTO);this._dataRowFontColor.setValue(this._AUTO);this._dataRowWordwrap.setValue(this._WORDWRAP_DEFAULT);this._dataRowSingleColorRadioButton.setValue(this._SINGLECOLOR_DEFAULT);this._dataRowAlternatingColorRadioButton.setValue(this._ALTERNATINGCOLOR_DEFAULT);this._generalPropBorderColor.setValue(this._AUTO);this._generalPropBorderColorHGL.setValue(this._AUTO);this._generalPropBorderColorVGL.setValue(this._AUTO);this._generalPropVisible.setValue(this._VISIBLE_DEFAULT);this._generalPropDropShadow.setValue(this._DROPSHADOW_DEFAULT);this._generalPropHGLCheckBox.setValue(this._HORIZONTALGRIDLINE_DEFAULT);this._generalPropVGLCheckBox.setValue(this._VERTICALGRIDLINE_DEFAULT);this._generalPropShowTooltip.setValue(this._TOOLTIP_DEFAULT);if(this._columnHeaderLeft._ele!=null){this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_on.png");}if(this._columnHeaderRight._ele!=null){this._columnHeaderRight.setIcon("dashboard/images/gadgets/table/alignment_right_off.png");}if(this._columnHeaderCenter._ele!=null){this._columnHeaderCenter.setIcon("dashboard/images/gadgets/table/alignment_center_off.png");}if(this._columnHeaderBold._ele!=null){this._columnHeaderBold.setIcon("dashboard/images/gadgets/table/text_bold_on.png");}if(this._columnHeaderItalic._ele!=null){this._columnHeaderItalic.setIcon("dashboard/images/gadgets/table/text_italic_off.png");}if(this._columnHeaderUnderline._ele!=null){this._columnHeaderUnderline.setIcon("dashboard/images/gadgets/table/text_underline_off.png");}if(this._dataRowBold._ele!=null){this._dataRowBold.setIcon("dashboard/images/gadgets/table/text_bold_off.png");}if(this._dataRowItalic._ele!=null){this._dataRowItalic.setIcon("dashboard/images/gadgets/table/text_italic_off.png");}if(this._dataRowUnderline._ele!=null){this._dataRowUnderline.setIcon("dashboard/images/gadgets/table/text_underline_off.png");}},_updateColumnHeader:function(A){if(A.Format){if(A.Format.HeaderBackgroundColor){this._columnHeaderBgColor1.setValue(A.Format.HeaderBackgroundColor);}if(A.Format.HeaderFontColor){this._columnHeaderFontColor.setValue(A.Format.HeaderFontColor);}if(A.Format.HeaderFontFamily){this._columnHeaderFontType.setValue(A.Format.HeaderFontFamily);}if(A.Format.HeaderFontSize){this._columnHeaderFontSize.setValue(A.Format.HeaderFontSize);}if(A.Format.HeaderBold){this._columnHeaderBold.setIcon("dashboard/images/gadgets/table/text_bold_off.png");}else{this._columnHeaderBold.setIcon("dashboard/images/gadgets/table/text_bold_on.png");}if(A.Format.HeaderItalic){this._columnHeaderItalic.setIcon("dashboard/images/gadgets/table/text_italic_on.png");}else{this._columnHeaderItalic.setIcon("dashboard/images/gadgets/table/text_italic_off.png");}if(A.Format.HeaderUnderline){this._columnHeaderUnderline.setIcon("dashboard/images/gadgets/table/text_underline_on.png");}else{this._columnHeaderUnderline.setIcon("dashboard/images/gadgets/table/text_underline_off.png");}if(A.Format.HeaderAlignment=="center"){this._columnHeaderCenter.setIcon("dashboard/images/gadgets/table/alignment_center_on.png");this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");}else{if(A.Format.HeaderAlignment=="right"){this._columnHeaderRight.setIcon("dashboard/images/gadgets/table/alignment_right_on.png");this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");}}if(A.Format.HeaderWordwrap){this._columnHeaderWordwrap.setValue(!this._WORDWRAP_DEFAULT);}}},_updateDataRow:function(A){if(A.Format){if(A.Format.RowBackgroundColor1){this._dataRowBgColor1.setValue(A.Format.RowBackgroundColor1);}if(A.Format.RowBackgroundColor2){this._dataRowBgColor2.setValue(A.Format.RowBackgroundColor2);}if(A.Format.RowFontFamily){this._dataRowFontType.setValue(A.Format.RowFontFamily);}if(A.Format.RowFontColor){this._dataRowFontColor.setValue(A.Format.RowFontColor);}if(A.Format.RowFontSize){this._dataRowFontSize.setValue(A.Format.RowFontSize);}if(A.Format.RowBold){this._dataRowBold.setIcon("dashboard/images/gadgets/table/text_bold_on.png");}else{this._dataRowBold.setIcon("dashboard/images/gadgets/table/text_bold_off.png");}if(A.Format.RowItalic){this._dataRowItalic.setIcon("dashboard/images/gadgets/table/text_italic_on.png");}else{this._dataRowItalic.setIcon("dashboard/images/gadgets/table/text_italic_off.png");}if(A.Format.RowUnderline){this._dataRowUnderline.setIcon("dashboard/images/gadgets/table/text_underline_on.png");}else{this._dataRowUnderline.setIcon("dashboard/images/gadgets/table/text_underline_off.png");}if(A.Format.RowWordwrap){this._dataRowWordwrap.setValue(!this._WORDWRAP_DEFAULT);}if(A.Format.Single){this._dataRowAlternatingColorRadioButton.setValue(!this._ALTERNATINGCOLOR_DEFAULT);this._dataRowSingleColorRadioButton.setValue(!this._SINGLECOLOR_DEFAULT);}}},_updateGeneralProperties:function(A){if(A.Format){if(A.Format.Visible){this._generalPropVisible.setValue(!this._VISIBLE_DEFAULT);}if(A.Format.DropShadow){this._generalPropDropShadow.setValue(!this._DROPSHADOW_DEFAULT);}if(A.Format.HGL){this._generalPropHGLCheckBox.setValue(!this._HORIZONTALGRIDLINE_DEFAULT);}else{this._generalPropHGLCheckBox.setValue(this._HORIZONTALGRIDLINE_DEFAULT);}if(A.Format.VGL){this._generalPropVGLCheckBox.setValue(!this._VERTICALGRIDLINE_DEFAULT);}else{this._generalPropVGLCheckBox.setValue(this._VERTICALGRIDLINE_DEFAULT);}if(A.Format.Tooltip){this._generalPropShowTooltip.setValue(!this._TOOLTIP_DEFAULT);}if(A.Format.BorderColor){this._generalPropBorderColor.setValue(A.Format.BorderColor);}if(A.Format.HGLBorderColor){this._generalPropBorderColorHGL.setValue(A.Format.HGLBorderColor);}if(A.Format.VGLBorderColor){this._generalPropBorderColorVGL.setValue(A.Format.VGLBorderColor);}}},_createFormatPropertiesBaseSoapNode:function(A,B){if(B){this._JSON=actuate.util.Json;this._json="";if(A.childNodes.length==0){this._json="";}this._makeJsonRecord("width",this._width);this._makeJsonRecord("height",this._height);if(this._columnHeaderBgColor1.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("HeaderBackgroundColor",this._columnHeaderBgColor1.getHexValue());}if(this._columnHeaderFontColor.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("HeaderFontColor",this._columnHeaderFontColor.getHexValue());}if(this._columnHeaderFontType.getValue()!=this._FONTFAMILY_DEFAULT){this._makeJsonRecord("HeaderFontFamily",this._columnHeaderFontType.getValue());}if(this._columnHeaderFontSize.getValue()!=this._HEADER_FONTSIZE_DEFAULT){this._makeJsonRecord("HeaderFontSize",this._columnHeaderFontSize.getValue().toString());}if(!this._getButtonValue(this._columnHeaderBold)){this._makeJsonRecord("HeaderBold",(!this._HEADER_BOLD_DEFAULT).toString());}if(this._getButtonValue(this._columnHeaderItalic)){this._makeJsonRecord("HeaderItalic",(!this._HEADER_ITALICS_DEFAULT),toString());}if(this._getButtonValue(this._columnHeaderUnderline)){this._makeJsonRecord("HeaderUnderline",(!this._HEADER_UNDERLINE_DEFAULT).toString());}if(this._getHeaderAlignment()!=this._HORIZONTAL_ALIGNMENT_DEFAULT){this._makeJsonRecord("HeaderAlignment",this._getHeaderAlignment());}if(this._columnHeaderWordwrap.getValue()){this._makeJsonRecord("HeaderWordwrap",(!this._WORDWRAP_DEFAULT).toString());}if(this._dataRowBgColor1.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("RowBackgroundColor1",this._dataRowBgColor1.getHexValue());}if(this._dataRowBgColor2.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("RowBackgroundColor2",this._dataRowBgColor2.getHexValue());}if(this._dataRowFontColor.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("RowFontColor",this._dataRowFontColor.getHexValue());}if(this._dataRowFontType.getValue()!=this._FONTFAMILY_DEFAULT){this._makeJsonRecord("RowFontFamily",this._dataRowFontType.getValue());}if(this._dataRowFontSize.getValue()!=this._DATAROW_FONTSIZE_DEFAULT){this._makeJsonRecord("RowFontSize",this._dataRowFontSize.getValue().toString());}if(this._getButtonValue(this._dataRowBold)){this._makeJsonRecord("RowBold",(!this._DATAROW_BOLD_DEFAULT).toString());}if(this._getButtonValue(this._dataRowItalic)){this._makeJsonRecord("RowItalic",(!this._DATAROW_ITALICS_DEFAULT).toString());}if(this._getButtonValue(this._dataRowUnderline)){this._makeJsonRecord("RowUnderline",(!this._DATAROW_UNDERLINE_DEFAULT).toString());}if(this._dataRowWordwrap.getValue()){this._makeJsonRecord("RowWordwrap",(!this._WORDWRAP_DEFAULT).toString());}if(this._dataRowSingleColorRadioButton.getValue()){this._makeJsonRecord("Single",(!this._SINGLECOLOR_DEFAULT).toString());}if(!this._generalPropVisible.getValue()){this._makeJsonRecord("Visible",(!this._VISIBLE_DEFAULT).toString());}if(!this._generalPropDropShadow.getValue()){this._makeJsonRecord("DropShadow",(!this._DROPSHADOW_DEFAULT).toString());}if(this._generalPropHGLCheckBox.getValue()){this._makeJsonRecord("HGL",(!this._HORIZONTALGRIDLINE_DEFAULT).toString());}if(!this._generalPropVGLCheckBox.getValue()){this._makeJsonRecord("VGL",(!this._VERTICALGRIDLINE_DEFAULT).toString());}if(this._generalPropShowTooltip.getValue()){this._makeJsonRecord("Tooltip",(!this._TOOLTIP_DEFAULT).toString());}if(this._generalPropBorderColor.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("BorderColor",this._generalPropBorderColor.getHexValue());}if(this._generalPropBorderColorHGL.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("HGLBorderColor",this._generalPropBorderColorHGL.getHexValue());}if(this._generalPropBorderColorVGL.getValue().toUpperCase()!=(this._AUTO).toUpperCase()){this._makeJsonRecord("VGLBorderColor",this._generalPropBorderColorVGL.getHexValue());}}},_makeJsonRecord:function(B,C){var A={};A.value=C;this._json=this._json+","+B+":";this._json+=this._JSON.makeMap(A);},_onChangeCheckBox:function(A){if(A.id){if(A.id==this.id+"_generalPropVisible"){this._generalPropVisible.setValue(this._generalPropVisible.getValue());}if(A.id==this.id+"_generalPropDropShadow"){this._generalPropDropShadow.setValue(this._generalPropDropShadow.getValue());}if(A.id==this.id+"_generalPropHGLCheckBox"){this._generalPropHGLCheckBox.setValue(this._generalPropHGLCheckBox.getValue());}if(A.id==this.id+"_generalPropVGLCheckBox"){this._generalPropVGLCheckBox.setValue(this._generalPropVGLCheckBox.getValue());}if(A.id==this.id+"_generalPropShowTooltip"){this._generalPropShowTooltip.setValue(this._generalPropShowTooltip.getValue());}if(A.id==this.id+"_columnHeaderWordwrap"){this._columnHeaderWordwrap.setValue(this._columnHeaderWordwrap.getValue());}if(A.id==this.id+"_dataRowWordwrap"){this._dataRowWordwrap.setValue(this._dataRowWordwrap.getValue());}}},_eh_toggleButton:function(B){var A=actuate.widget.ComponentMgr.get(B.id);if(A){if(B.id==this.id+"_dataRowBold"||B.id==this.id+"_columnHeaderBold"||B.id==this.id+"_generalPropBold"){if(A.icon=="dashboard/images/gadgets/table/text_bold_off.png"){A.setIcon("dashboard/images/gadgets/table/text_bold_on.png");}else{A.setIcon("dashboard/images/gadgets/table/text_bold_off.png");}}else{if(B.id==this.id+"_dataRowItalic"||B.id==this.id+"_columnHeaderItalic"||B.id==this.id+"_generalPropItalic"){if(A.icon=="dashboard/images/gadgets/table/text_italic_off.png"){A.setIcon("dashboard/images/gadgets/table/text_italic_on.png");}else{A.setIcon("dashboard/images/gadgets/table/text_italic_off.png");}}else{if(B.id==this.id+"_dataRowUnderline"||B.id==this.id+"_columnHeaderUnderline"||B.id==this.id+"_generalPropUnderline"){if(A.icon=="dashboard/images/gadgets/table/text_underline_off.png"){A.setIcon("dashboard/images/gadgets/table/text_underline_on.png");}else{A.setIcon("dashboard/images/gadgets/table/text_underline_off.png");}}}}}},_eh_setAlignment:function(B){var A=actuate.widget.ComponentMgr.get(B.id);if(A){if(B.id==this.id+"_columnHeaderLeft"){this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_on.png");this._columnHeaderRight.setIcon("dashboard/images/gadgets/table/alignment_right_off.png");this._columnHeaderCenter.setIcon("dashboard/images/gadgets/table/alignment_center_off.png");}else{if(B.id==this.id+"_columnHeaderRight"){this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");this._columnHeaderRight.setIcon("dashboard/images/gadgets/table/alignment_right_on.png");this._columnHeaderCenter.setIcon("dashboard/images/gadgets/table/alignment_center_off.png");}else{if(B.id==this.id+"_columnHeaderCenter"){this._columnHeaderLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");this._columnHeaderRight.setIcon("dashboard/images/gadgets/table/alignment_right_off.png");this._columnHeaderCenter.setIcon("dashboard/images/gadgets/table/alignment_center_on.png");}else{if(B.id==this.id+"_generalPropLeft"){this._generalPropLeft.setIcon("dashboard/images/gadgets/table/alignment_left_on.png");this._generalPropRight.setIcon("dashboard/images/gadgets/table/alignment_right_off.png");this._generalPropCenter.setIcon("dashboard/images/gadgets/table/alignment_center_off.png");}else{if(B.id==this.id+"_generalPropCenter"){this._generalPropLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");this._generalPropRight.setIcon("dashboard/images/gadgets/table/alignment_right_off.png");this._generalPropCenter.setIcon("dashboard/images/gadgets/table/alignment_center_on.png");}else{if(B.id==this.id+"_generalPropRight"){this._generalPropLeft.setIcon("dashboard/images/gadgets/table/alignment_left_off.png");this._generalPropRight.setIcon("dashboard/images/gadgets/table/alignment_right_on.png");this._generalPropCenter.setIcon("dashboard/images/gadgets/table/alignment_center_off.png");}}}}}}}},_getButtonValue:function(A){if(A.icon.indexOf("_on.png")>-1){return true;}return false;},_getHeaderAlignment:function(){if(this._columnHeaderLeft.icon.indexOf("_on.png")>-1){return"left";}else{if(this._columnHeaderCenter.icon.indexOf("_on.png")>-1){return"center";}else{if(this._columnHeaderRight.icon.indexOf("_on.png")>-1){return"right";}}}}});actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.DataViewBuilderDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseBuilderDialog,{__generateGadgetTitle:function(C){var E="editgadgetprops.panel.general.";var A=actuate.util.Utility;var B=this.__getGadgetTypeName();var D="";if(C&&C.dataSourceName){D=C.dataSourceName;}if(B){B=A.getLocalizedString(E+"gadgetType."+B);if(D){return A.getLocalizedString(E+"gadgetName.dataview",B,D);}else{return B;}}else{return D?D:A.getLocalizedString(E+"gadgetName.default");}}});actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.CalculationDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_classname:"actuate.dialog.CalculationDialog",__cls:"calculation_dialog",ADVANCED:"Advanced...",MAX_ARGUMENTS_COUNT:3,REFRESH_ALL:undefined,CATEGORY_CHANGED:"CategoryChanged",FUNCTION_CHANGED:"FunctionChanged",__preventEnterKey:true,_VALID_NAME:0,_DUPLICATE_NAME:1,_INVALID_NAME_FORMAT:2,_width:460,_labelTextField:undefined,_categoryComboBox:undefined,_functionListBox:undefined,_functionSyntaxLabel:undefined,_descriptionLabel:undefined,_examplesPanel:undefined,_expressionLabel:undefined,_expressionTextArea:undefined,_argumentLabels:[],_argumentFields:[],_labelTextFieldID:null,_categoryComboBoxID:null,_functionListBoxID:null,_validateLabelID:null,_operatorsID:"calculation_dialog_operators",_functionsID:"calculation_dialog_functions",_argumentFieldID:[],resultlist:null,hintDiv:null,wordRE:/\S+/,whiteSpaceRE:/\S/,functionBreakRE:/\s+|\+|\*|-|\/|%|\^|&|=|<|>|\(|,/,validNameCharsRE:/[^a-zA-Z0-9_ ]/,validFirstNameCharRE:/[^a-zA-Z]/,stripLeadingRE:/^\s+/g,stripTrailingRE:/\s+$/g,__initComponents:function(){actuate.dialog.impl.helper.CalculationDialog.superclass.__initComponents.apply(this,arguments);this.setTitle(actuate.util.Utility.getLocalizedString("calculationDialog.titleText.New"));this.ADVANCED=actuate.util.Utility.getLocalizedString("calculationDialog.advanced");var A=new actuate.widget.panel.Panel({layout:new actuate.widget.panel.layout.TableLayout({columns:2}),border:false});var D=actuate.util.Utility.getLocalizedString("calculationDialog.columnLabelText");var C=actuate.util.Utility.getLocalizedString("calculationDialog.categoryText");var I=actuate.util.Utility.getLocalizedString("calculationDialog.functionText");var J=actuate.util.Utility.getLocalizedString("calculationDialog.expressionText");var E=new actuate.widget.form.Label({text:D,cellCls:"calculation_dialog_label"});var B=new actuate.widget.form.Label({text:C,cellCls:"calculation_dialog_label"});var F=new actuate.widget.form.Label({text:I,cellCls:"calculation_dialog_padding_top calculation_dialog_label"});this._expressionLabel=new actuate.widget.form.Label({text:J,cellCls:"calculation_dialog_padding_top calculation_dialog_label"});this._functionSyntaxLabel=new actuate.widget.form.Label({width:300,cls:"calculation_dialog_syntax"});this._descriptionLabel=new actuate.widget.form.Label({width:300,cls:"calculation_dialog_description"});this._labelTextField=new actuate.widget.form.TextField({name:"calculationdialog_column_label",width:300});this._categoryComboBox=new actuate.widget.form.ComboBox({name:"calculationdialog_category",width:300,editable:false});this._functionListBox=new actuate.widget.form.ListBox({name:"calculationdialog_function_list",width:305,height:120});this._labelTextFieldID=this._labelTextField.getItemId();this._categoryComboBoxID=this._categoryComboBox.getItemId();this._functionListBoxID=this._functionListBox.getItemId();for(var H=0;H<this.MAX_ARGUMENTS_COUNT;H++){this._argumentLabels.push(this.__createDummyField({cellCls:"calculation_dialog_label"}));this._argumentFields.push(this._createArgumentFields(H));}A.add(E,false);A.add(this._labelTextField,false);A.add(B,false);A.add(this._categoryComboBox,false);A.add(F,false);A.add(this._functionListBox,false);A.add(this.__createDummyField(),false);A.add(this._functionSyntaxLabel,false);A.add(this.__createDummyField(),false);A.add(this._descriptionLabel,false);A.add(this.__createDummyField(),false);A.add(this._createExamplesPanel(),false);A.add(this._expressionLabel,false);A.add(this._createExpressionPanel(),false);for(var G=0;G<this.MAX_ARGUMENTS_COUNT;G++){var L=this._createArgumentPanel();for(var K in this._argumentFields[G]){L.add(this._argumentFields[G][K]);}A.add(this._argumentLabels[G],false);A.add(L,false);}this.add(A);this.resultlist=document.createElement("div");this.hintDiv=document.createElement("div");document.body.appendChild(this.resultlist);document.body.appendChild(this.hintDiv);},__initListeners:function(){actuate.dialog.impl.helper.CalculationDialog.superclass.__initListeners.apply(this,arguments);var E=actuate.Method.bind(this._onChangeHandler,this);var D=actuate.Method.bind(this.__eh_keyDown,this);var C=actuate.Method.bind(this.handleCursorMoved,this);this._labelTextField.registerEventHandler("change",E);this._categoryComboBox.registerEventHandler("select",E);this._functionListBox.registerEventHandler("select",E);this._expressionTextArea.registerEventHandler("change",E);this._expressionTextArea.registerEventHandler("keydown",D,false);this._expressionTextArea.registerEventHandler("click",C);this._expressionTextArea.registerEventHandler("keyup",C);actuate.util.Event.observe(this.resultlist,"click",actuate.Method.bindAsEventListener(this.__eh_stopEvent,this),false);actuate.util.Event.observe(document.getElementById(this.getId()),"click",actuate.Method.bindAsEventListener(this.__eh_unhandledClick,this));for(var B=0;B<this.MAX_ARGUMENTS_COUNT;B++){for(var A in this._argumentFields[B]){this._argumentFields[B][A].registerEventHandler("change",E);}}},__getHelpTopic:function(){return"iv_calculation";},_onChangeHandler:function(E,I,D){if(!E){return ;}var A=E.getItemId();switch(A){case this._labelTextFieldID:var H=I;if(this.__currentInput.label!=H){this.__currentInput.label=H;}break;case this._expressionTextAreaID:var F=I;if(this.__currentInput.expression!=F){this.__currentInput.expression=F;}break;case this._categoryComboBoxID:var B=E.getValueAt(D);if(this.__currentInput.category!=B){this.__currentInput.category=B;if(this.__currentInput.functionName!=this.ADVANCED){this.__currentInput.functionName=null;this.__currentInput.arguments=[];}this.refresh(this.CATEGORY_CHANGED);}break;case this._functionListBoxID:var G=E.getValueAt(D);if(this.__currentInput.functionName!=G){this.__currentInput.functionName=G;this.__currentInput.arguments=[];this.refresh(this.FUNCTION_CHANGED);}break;default:for(var C=0;C<this.MAX_ARGUMENTS_COUNT;C++){if(!this.__currentInput.arguments){this.__currentInput.arguments=[];}for(var J in this._argumentFieldID[C]){if(A==this._argumentFieldID[C][J]){this.__currentInput.arguments[C]=I;}}}break;}},refresh:function(A){this.initSuggestionArray();switch(A){case this.REFRESH_ALL:if(this.__currentInput.editedColumn){this._labelTextField.disable();this.setTitle(actuate.util.Utility.getLocalizedString("calculationDialog.titleText.Edit"));}this._labelTextField.setValue(this.__currentInput.label);this._updateCategoryCombo();case this.CATEGORY_CHANGED:this._updateFunctionList();case this.FUNCTION_CHANGED:this._updateDescription();this._updateArguments();this._enableAdvanceMode(this.__currentInput.functionName==this.ADVANCED);default:break;}actuate.dialog.impl.helper.CalculationDialog.superclass.refresh.apply(this,arguments);},_preHide:function(){actuate.dialog.impl.helper.CalculationDialog.superclass._preHide.apply(this,arguments);this.clearResults();this.hintDiv.style.display="none";this._hideAllArguments();},show:function(){actuate.dialog.impl.helper.CalculationDialog.superclass.show.apply(this,arguments);this.initSuggestions();this._expressionTextAreaDom=this._expressionTextArea.getEl().dom;},_enableAdvanceMode:function(A){if(A){var B=this.__currentInput.expression;this._expressionTextArea.setValue(B?B:"");this._examplesPanel.show();this._expressionLabel.show();this._expressionPanel.show();}else{this._examplesPanel.hide();this._expressionLabel.hide();this._expressionPanel.hide();}},_createArgumentFields:function(B){var A={column:new actuate.widget.form.ComboBox({width:300,editable:false,store:[["",""]]}),group:new actuate.widget.form.ComboBox({width:300,editable:false}),option:new actuate.widget.form.ComboBox({width:300,editable:false}),text:new actuate.widget.form.TextField({width:300}),number:new actuate.widget.form.TextField({width:300,validator:function(F){var E=actuate.dialog.impl.Utility.validateNumber(F);if(E!=true){E=actuate.util.Utility.getLocalizedString("calculationDialog.message.numberArgument");}return E;}})};var D={};for(var C in A){D[C]=A[C].getItemId();}if(!this._argumentFieldID){this._argumentFieldID=[];}this._argumentFieldID[B]=D;return A;},_createExamplesPanel:function(){var A=actuate.util.Utility.getLocalizedString("calculationDialog.examplesText");var D=new actuate.widget.form.Label({text:A,cls:"calculation_dialog_advanced_example"});var B=new actuate.widget.form.Label({text:'[LastName]&","&[FirstName]',cls:"calculation_dialog_advanced_example"});var C=new actuate.widget.form.Label({text:"[price]*0.10",cls:"calculation_dialog_advanced_example"});this._examplesPanel=new actuate.widget.panel.Panel({layout:new actuate.widget.panel.layout.TableLayout({rows:4}),border:false,width:300});this._examplesPanel.add(D,false);this._examplesPanel.add(B,false);this._examplesPanel.add(C,false);this._examplesPanel.add(this.__createDummyField(),false);return this._examplesPanel;},_createExpressionPanel:function(){var A=new actuate.widget.form.Label({text:actuate.util.Utility.getLocalizedString("calculationDialog.advanced.Validate"),cls:"calculation_dialog_validate"});this._expressionPanel=new actuate.widget.panel.Panel({border:false,width:300,cls:"calculation_dialog_validate",layout:new actuate.widget.panel.layout.TableLayout({columns:1})});this._expressionTextArea=new actuate.widget.form.TextArea({width:295,height:100,cls:"calculation_dialog_advanced_expression",enableKeyEvents:true});this._expressionPanel.add(this._expressionTextArea,false);this._expressionPanel.add(A,false);this._expressionTextAreaID=this._expressionTextArea.getItemId();this._validateLabelID=A.getItemId();return this._expressionPanel;},_createArgumentPanel:function(){return new actuate.widget.panel.Panel({border:false,width:308});},_updateCategoryCombo:function(){var A=this._getAvailableCategories(this.__store.Functions);this._categoryComboBox.clear();if(A){var D=[];for(var B=0;B<A.length;B++){var C=A[B];D.push([C,actuate.util.Utility.getLocalizedString("calculationDialog.category."+C)]);if(this.__currentInput.category===undefined){this.__currentInput.category=C;}}this._categoryComboBox.setStore(D);}this._categoryComboBox.setValue(this.__currentInput.category);},_getAvailableCategories:function(B){var A=[];if(B){for(var D in B){var F=B[D];if(F){for(var C=0;C<F.length;C++){var E=F[C];if(E&&this._functionIsAvailable(E.name)){A.push(D);break;}}}}}return A;},_getRequiredColumn:function(G,D){var F=G;if(D&&D.length!=null&&D.length>0){F=null;for(var B in G){var E=G[B];if(this.__currentInput.editedColumn){if(this.__currentInput.label==B){continue;}}for(var C=0;C<D.length;C++){var A=E.dataType;if(A&&A.toLowerCase()=="date-time"){A="datetime";}if(D[C]&&A&&D[C].toLowerCase()==A.toLowerCase()){if(F==null){F={};}F[B]=E;}}}}return F;},_resetComboBox:function(E,A){var B;if(A){for(var C in A){var D=C;if(A[C]&&A[C].displayName!=null){D=A[C].displayName;}E.add([C,D]);if(B===undefined){B=C;}}}if(!B){E.hide();}return B;},_updateFunctionList:function(){var B=this.__store.Functions;var D=this.__currentInput.category;this._functionListBox.setSelectedIndex(-1);this._functionListBox.clear();this._functionListBox.add(this.ADVANCED);if(B&&D){var F=B[D];if(F){for(var C=0;C<F.length;C++){var E=F[C];if(E&&this._functionIsAvailable(E.name)){this._functionListBox.add(E.name);}}}}var A=this._functionListBox.indexOfValue(this.__currentInput.functionName);if(A!=null&&A>=0){this._functionListBox.setSelectedValue(this.__currentInput.functionName);}},_updateDescription:function(){var E=this.__currentInput.functionName;this._descriptionLabel.hide();this._functionSyntaxLabel.hide();if(E){var C;var A;if(E!=this.ADVANCED){var D=this._getFunctionDef(E);var B;var F;B=D?D.name:E;id=D?D.id:null;C=actuate.util.Utility.getLocalizedString("calculationDialog."+(id?id:B)+".description");if(!C){C=D?D.description:"";}A=actuate.util.Utility.getLocalizedString("calculationDialog."+(id?id:B)+".syntax",B);if(!A){A=D?D.syntax:null;}if(!A&&B){A="<b>"+B+"</b>";}F=D?D.hint:null;if(A&&F){A=A+", "+F;}else{if(F){A=F;}}}else{C=actuate.util.Utility.getLocalizedString("calculationDialog.advanced.description");}if(C){this._descriptionLabel.show();this._descriptionLabel.setText(C,false);}if(A){this._functionSyntaxLabel.show();this._functionSyntaxLabel.setText(A,false);}}},_updateArguments:function(){var C=this.__currentInput.functionName;this._hideAllArguments();if(C){var B=this._getFunctionDef(C);var D=B?B.arguments:null;if(D){if(this._functionIsAvailable(C)){for(var A=0;A<D.length;A++){this._showArgument(B,D[A],A);}}}}},_showArgument:function(B,J,I){if(!J||!this._argumentFields[I]){return ;}var O;var Q=J.name?J.name:"text";if(!this.__currentInput.arguments){this.__currentInput.arguments=[];}O=this.__currentInput.arguments[I];if(O==null){O=J.defaultValue;}var N=this._argumentLabels[I];var G=this._argumentFields[I][Q];var H=true;switch(Q){case"column":var F=this._getRequiredColumn(this.__store.Binding,J.dataType);G.clear();var C=this._resetComboBox(G,F);if(C==null){H=false;}else{if(O==null){O=C;}}break;case"group":G.clear();G.add("");var C=this._resetComboBox(G,this.__store.Group);if(C==null){H=false;}break;case"option":var M=[];var C;if(J.values){for(var E=0;E<J.values.length;E++){var L=actuate.util.Utility.getLocalizedString("calculationDialog.option."+J.values[E].display);M.push([J.values[E].value,L]);if(C===undefined){C=J.values[E].value;}}}G.setStore(M);if(C==null){H=false;}else{if(O==null){O=C;}}break;case"text":case"number":default:break;}var K=B?B.name:K;var D=B?B.id:null;var P="calculationDialog."+(D?D:K)+".argument"+(I+1);var A=actuate.util.Utility.getLocalizedString(P);N.setText(A||J.label,false);G.setValue(O);if(H){N.show();G.show();}else{N.hide();G.hide();}this.__currentInput.arguments[I]=O;},_functionIsAvailable:function(D){var C=this._getFunctionDef(D);var E=C?C.arguments:null;if(E){for(var B=0;B<E.length;B++){var A=E[B];if(A.name=="column"){if(!this._getRequiredColumn(this.__store.Binding,A.dataType)){return false;}}}}return true;},_hideAllArguments:function(){for(var B=0;B<this.MAX_ARGUMENTS_COUNT;B++){this._argumentLabels[B].hide();for(var A in this._argumentFields[B]){this._argumentFields[B][A].hide();}}},_getFunctionDef:function(E){var A=this.__store.Functions;if(A&&E){for(var C in A){var F=A[C];if(F){for(var B=0;B<F.length;B++){var D=F[B];if(E==D.name){D.category=C;return D;}}}}}},setGroups:function(A){if(A){this.__store.Group=A;this.refresh();}},setColumnBindings:function(A){if(A){this.__store.Binding=A;this.refresh();}},setFunctions:function(A){if(A){this.__store.Functions=A;this.refresh();}},setSelectedColumn:function(C){this.__currentInput={editedColumn:C};this._labelTextField.enable();this.setTitle(actuate.util.Utility.getLocalizedString("calculationDialog.titleText.New"));if(C&&C.calculationInfo){var F=C.calculationInfo;this.__currentInput.label=F["label"]?F["label"]:C.header;if(F["function"]&&F["function"]!=this.ADVANCED){this.__currentInput.functionName=F["function"];var E=this._getFunctionDef(F["function"]);if(E){this.__currentInput.category=E.category;}}else{this.__currentInput.functionName=this.ADVANCED;this.__currentInput.expression=F["expression"]?F["expression"]:F;}if(F["arguments"]){var E=this._getFunctionDef(this.__currentInput.functionName);var G=E?E.arguments:null;if(G){this.__currentInput.arguments=[];for(var B=0;B<G.length;B++){var A=G[B];if(F["arguments"][B]!=null){var D=this._decodeArgument(F["arguments"][B].value||F["arguments"][B],A.name?A.name:"text");this.__currentInput.arguments.push(D);}}}}}this.refresh();},__createResult:function(){var E={};var D=this._getFunctionDef(this.__currentInput.functionName);if(this.__currentInput.label){E["label"]=this.__currentInput.label;}if(this.__currentInput.functionName&&this.__currentInput.functionName!=this.ADVANCED){E["function"]=this.__currentInput.functionName;if(D&&D.expression){E["expression"]=D.expression;}}else{if(this.__currentInput.expression){E["expression"]=this.__currentInput.expression;}}if(this.__currentInput.arguments){var F=D?D.arguments:null;E["arguments"]=[];if(F){for(var B=0;B<F.length;B++){if(this.__currentInput.arguments[B]!=null){var A=F[B].name;if(!A){A=this._getArgumentType(F);if(!A){A="text";}}var C={value:this._encodeArgument(this.__currentInput.arguments[B],A)};if(F[B].aggregationType){C["aggregationType"]=this._encodeArgument(F[B].aggregationType);}E["arguments"].push(C);}}}}return actuate.util.Json.makeMap(E);},_encodeArgument:function(C,A){var B=C;if(B!=null){if(A=="column"){B="["+B+"]";}else{if(A=="text"){B='"'+B+'"';}}}return B;},_decodeArgument:function(C,A){var B=C;if(B&&B.length&&B.length>=2){if(A=="column"||A=="text"){B=B.substring(1,B.length-1);}}return B;},_getArgumentType:function(C){if(C){for(var B=0;B<C.length;B++){if(C[B].name=="column"){var A=this._getColumnDataType(this.__currentInput.arguments[B]);switch(A){case"float":case"integer":case"decimal":case"double":return"number";case"string":case"time":case"date":case"datetime":default:return"text";}}}}},_getColumnDataType:function(A){var C=this.__store.Binding;if(C!=null){for(var B in C){if(B==A){return C[B].dataType;}}}},_validate:function(){var E=true;var B;if(E){var G=this.checkName(this.__currentInput.label);if(G==this._INVALID_NAME_FORMAT){E=false;B=actuate.util.Utility.getLocalizedString("calculationDialog.message.invalidLabel");}else{if(G==this._DUPLICATE_NAME){E=false;B=actuate.util.Utility.getLocalizedString("calculationDialog.message.duplicateLabel");}}}if(E&&this.__currentInput.functionName==this.ADVANCED&&!this.__currentInput.expression){E=false;B=actuate.util.Utility.getLocalizedString("calculationDialog.message.noExpression");}else{if(E&&!this.__currentInput.functionName){E=false;B=actuate.util.Utility.getLocalizedString("calculationDialog.message.noFunction");}}if(E&&this.__currentInput.arguments){var D=this._getFunctionDef(this.__currentInput.functionName);var F=D?D.arguments:null;if(F){for(var C=0;C<F.length;C++){if(F[C].name=="number"){var A=this._argumentFields[C][F[C].name];if(A.validate()==false){E=false;B=actuate.util.Utility.getLocalizedString("calculationDialog.message.numberArgument");}}}}}if(!E){this.__popupErrorDialog(B);}return E;},_neh_okay:function(){if(this._validate()){if(this.__currentInput.functionName==this.ADVANCED){this._validateExpression(actuate.Method.bind(this._validationCallback,this));}else{actuate.dialog.impl.helper.CalculationDialog.superclass._neh_okay.apply(this,arguments);}}},_validationCallback:function(A){if(A&&!A.BRDExpression["isValid"]){this.__popupErrorDialog(A.BRDExpression["parserError"]);}else{actuate.dialog.impl.helper.CalculationDialog.superclass._neh_okay.call(this);}},_validateExpression:function(C){var A={};var B=actuate.util.Json.makeMap({target:this._classname,label:this.__currentInput.label,expression:this.__currentInput.expression});A[actuate.dialog.impl.EventConstants.__E_VALIDATE_BRD_EXPRESSION]=B;return this.__sendJson(A,C?C:actuate.Method.bind(this.handleBRDValidateResult,this),null,"Table");},checkName:function(F){if(!this.__currentInput.editedColumn){if(!F||F.length==0){return this._INVALID_NAME_FORMAT;}var D=F.charAt(0);if(actuate.util.Utility.isLetter(actuate.util.Utility.convertCharacterToHalfWidth(D))==false){return this._INVALID_NAME_FORMAT;}var C,E;for(var A=1;A<F.length;A++){C=F.charAt(A);E=actuate.util.Utility.convertCharacterToHalfWidth(C);if(actuate.util.Utility.isLetter(E)==false&&actuate.util.Utility.isDigit(E)==false&&E!="_"&&E!=" "){return this._INVALID_NAME_FORMAT;}}F=actuate.util.String.trim(F);for(var B in this.__store.Binding){if(F.toLowerCase()==B.toLowerCase()){return this._DUPLICATE_NAME;}}}return this._VALID_NAME;},__eh_keyDown:function(C,B){if(!B){return ;}this.stopEvent(B);var A=B.getKey();var D=String.fromCharCode(A).toLowerCase();switch(A){case B.ENTER:this.handleEnter();break;case B.SHIFT:break;case B.UP:this.handleUp();break;case B.DOWN:this.handleDown();break;default:if(B.ctrlKey&&(D=="c"||D=="v"||D=="a")){break;}else{this.populateSuggestions(B,A);}if(this.suggestions.length==0){return ;}this.appendSuggestions();}},handleEnter:function(){this.updateTextFromSelection();this.clearResults();this.currentEntry="";},handleDown:function(){if(this.suggestions.length>0&&this.suggestionSelection<this.suggestions.length-1){this.removeCurrentSelection();this.suggestionSelection++;this.setCurrentSelection();this.handleSuggestionScroll(true);}},handleUp:function(){if(this.suggestions.length>0&&this.suggestionSelection>0){this.removeCurrentSelection();this.suggestionSelection--;this.setCurrentSelection();this.handleSuggestionScroll(false);}},updateTextFromSelection:function(){if(this.suggestionSelection==-1){return ;}if(!this.suggestions||this.suggestions.length<=this.suggestionSelection){this.suggestionSelection=-1;return ;}var C=this.suggestions[this.suggestionSelection];var G=C.indexOf(")")-C.indexOf("(")>2;var C=this.stripParameters(C);this.suggestionSelection=-1;var B="";if(this._expressionTextAreaDom.createTextRange){this._expressionTextArea.focus();var A=this.selectionRange;A.collapse(false);A.moveStart("character",-this.currentEntry.length);A.text=C;if(G){A.move("character",-(C.length-C.indexOf("(")-1));}A.select();}else{var H=this.getCursorPosTextarea(this._expressionTextAreaDom);B=this._expressionTextArea.getValue().substring(0,H);var D=H-this.currentEntry.length;var E=B.substring(0,D);var F=this._expressionTextArea.getValue().substring(H,this._expressionTextArea.getValue().length);this._expressionTextArea.setValue(E+C+F);this._expressionTextArea.focus();this._expressionTextAreaDom.setSelectionRange(H+this._expressionTextArea.getValue().length,H+this._expressionTextArea.getValue().length);}this.__currentInput.expression=this._expressionTextArea.getValue();},initSuggestions:function(){this.suggestions=[];this.suggestionSelection=-1;this.currentEntry="";},initSuggestionArray:function(){this.suggestionArray=new Array("true","false","AND","OR","LEFT( str )","RIGHT( str )","ROUND( num )","ROUNDDOWN( num )","ROUNDUP( num )","SEARCH( pattern, str )","FIND( strToFind, str )","IN( value, check1, ..., checkN )");var A=this.__store.Functions;for(var C in A){var E=A[C];if(E){for(var B=0;B<E.length;B++){var D=E[B];if(D&&D.hint){this.suggestionArray.push(D.hint);}}}}this.suggestionArray.sort();this.handleBoundDataColumn();},stripParameters:function(H){if(H.charAt(0)=="["&&H.charAt(H.length-1)=="]"){return H;}var C=H.indexOf("(");if(C==-1){return H;}var E=H.indexOf(")");if(E==-1){return H;}var B=H.substring(C+1,E);var A=new Array();A=B.split(",");var D=" ";for(var G=0;G<A.length-1;G++){D+=", ";}var F=H.substring(0,C+1)+D+H.substring(E,H.length);return F;},getCursorPosTextarea:function(A){if(A.selectionStart!=undefined){return(A.selectionEnd);}else{A.focus();return(document.selection.createRange());}},clearResults:function(){this.resultlist.style.display="none";this.suggestionSelection=-1;this.suggestions=[];while(this.resultlist.hasChildNodes()){this.resultlist.removeChild(this.resultlist.firstChild);}},removeCurrentSelection:function(){if(this.suggestionSelection>=0&&this.suggestionSelection<this.resultlist.childNodes.length){var A=this.resultlist.childNodes[this.suggestionSelection];A.className="calculation_dialog_result";}},setCurrentSelection:function(){if(this.suggestionSelection>=0&&this.suggestionSelection<this.resultlist.childNodes.length){var A=this.resultlist.childNodes[this.suggestionSelection];A.className="calculation_dialog_sresult";}},handleSuggestionScroll:function(E){var C=this.resultlist.getElementsByTagName("div");if(C!=null&&C.length>0){var D=C[0];var A=D.offsetHeight;var B=A*(this.suggestionSelection+1);if(E==true){if(B>this.resultlist.clientHeight){this.resultlist.scrollTop+=A;}}else{if((B-A)<this.resultlist.scrollTop){this.resultlist.scrollTop-=A;}}}},populateSuggestions:function(D,A){if(this._expressionTextAreaDom.createTextRange){this._expressionTextArea.focus();this.selectionRange=document.selection.createRange();}this.clearResults();if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))){var C="";switch(A){case 91:C="[";break;case 93:C="]";break;case 123:C="{";break;case 125:C="}";break;case 95:C="_";break;case 46:C=".";break;case 41:C=")";break;default:C=String.fromCharCode(A);}if(A==127){var B=this.getSelectionLength();if(B==0){B=1;}if(this.currentEntry.length>B){this.currentEntry=this.currentEntry.substring(0,this.currentEntry.length-B);}else{this.currentEntry="";}this.updateSuggestions("");}else{if((A>=65&&A<=90)||(A>=48&&A<=57)||A==91||A==93||A==123||A==125||A==95||A==46||A==44||A==32){this.updateSuggestions(C);}else{this.currentEntry="";}}}else{var C="";switch(A){case 48:if(D.shiftKey){C=")";}else{C="0";}break;case 57:if(D.shiftKey){C="(";}else{C="9";}break;case 109:if(!actuate.util.browser.__isIE()){if(D.shiftKey){C="_";}else{C="-";}break;}case 188:if(D.shiftKey){C="<";}else{C=",";}break;case 189:if(actuate.util.browser.__isIE()){if(D.shiftKey){C="_";}else{C="-";}break;}case 190:if(D.shiftKey){C=">";}else{C=".";}break;case 219:if(D.shiftKey){C="{";}else{C="[";}break;case 221:if(D.shiftKey){C="}";}else{C="]";}break;default:C=String.fromCharCode(A);}if(A==D.BACKSPACE){var B=this.getSelectionLength();if(B==0){B=1;}if(this.currentEntry.length>B){this.currentEntry=this.currentEntry.substring(0,this.currentEntry.length-B);}else{this.currentEntry="";}this.updateSuggestions("");}else{if((A>=65&&A<=90)||(A>=48&&A<=57)||A==219||A==221||(A==190&&D.shiftKey==true)||(A==109&&D.shiftKey==true&&!actuate.util.browser.__isIE())||(A==189&&D.shiftKey==true&&actuate.util.browser.__isIE())||A==188||A==32){this.updateSuggestions(C);}else{this.currentEntry="";}}}},getSelectionLength:function(){var A=this._expressionTextAreaDom;if(A.createTextRange){this._expressionTextArea.focus();this.selectionRange=document.selection.createRange();return this.selectionRange.text.length;}else{return A.selectionEnd-A.selectionStart;}},updateSuggestions:function(E){if(E=="["){this.suggestionSelection=0;this.currentEntry=E;}else{if(!(this.currentEntry==""&&E==" ")){this.currentEntry+=E;}}if(this.currentEntry==""){this.suggestionSelection=-1;return ;}for(var B=0;B<this.suggestionArray.length;B++){var F=this.suggestionArray[B];var A=this.suggestionArray[F];var D=actuate.util.String.trim(F.toLowerCase());var G=actuate.util.String.trim(this.currentEntry.toLowerCase());var C=D.indexOf(G);if(C==0){this.suggestions.push(F);if(A!=null){this.suggestions[F]=A;}if(this.suggestions.length==100){return ;}if(this.suggestionSelection==-1){this.suggestionSelection=0;}}}},handleMouseOver:function(D){this.removeHighlight();var B=actuate.util.Event.element(D);if(!B){return ;}B.className="calculation_dialog_sresult";var E=B.innerHTML;for(var A=0;A<this.suggestions.length;A++){var C=this.suggestions[A];if(E.indexOf(C)>-1){this.suggestionSelection=A;return ;}}},handleMouseOut:function(B){var A=actuate.util.Event.element(B);if(!A){return ;}A.className="calculation_dialog_result";this.suggestionSelection=-1;},handleMouseClick:function(A){this.handleEnter();},removeHighlight:function(){this.suggestionSelection=-1;var B=this.resultlist.getElementsByTagName("div");for(var A=0;A<B.length;A++){B[A].className="calculation_dialog_result";}},getKeyCode:function(B){var A=0;if(B.keyCode){A=B.keyCode;}else{if(B.which){A=B.which;}}return A;},getStringBeforeCursor:function(){if(this._expressionTextAreaDom.createTextRange){this._expressionTextArea.focus();this.selectionRange=document.selection.createRange();var A=this.selectionRange.duplicate();A.moveToElementText(this._expressionTextAreaDom);A.setEndPoint("EndToEnd",this.selectionRange);return A.text;}else{var B=this.getCursorPosTextarea(this._expressionTextAreaDom);return this._expressionTextArea.getValue().substring(0,B);}},findCurrentOpenIndex:function(A){if(A==null){return null;}var C=new Array();var E=false;for(var B=0;B<A.length;B++){var D=A.charAt(B);if(D=='"'){if(!E){E=true;}else{E=false;}}else{if(D=="("&&!E){C.push(B);}else{if(D==")"&&C.length>0&&!E){C.pop();}}}}return C.pop();},findFunctionFromOverloaded:function(B,G){var D=this._expressionTextArea.getValue().substring(G+1,this._expressionTextArea.getValue().length-1);var F=0;var J=0;for(var E=0;E<D.length;E++){var A=D.charAt(E);if(A=="("){if(J==0){J++;}F++;}else{if(A==")"){if(F>0){F--;}else{break;}}else{if(A==","){if(J==0){J=2;}else{J++;}}else{if(A!=" "){if(J==0){J++;}}}}}}B.sort(actuate.Method.bind(this.sortByNumOfParams,this));for(var E=0;E<B.length;E++){var C=B[E];var I=C.substring(C.indexOf("(")+1,C.indexOf(")"));var H=this.getNumberOfParams(C);if(J<=H){return C;}}},getNumberOfParams:function(C){var A=C.substring(C.indexOf("(")+1,C.indexOf(")"));var B=0;A=A?A.replace(/^\s+|\s+$/g,""):null;return A?A.split(",").length:0;},findCurrentParam:function(){var D=this.getStringBeforeCursor();var C=this.findCurrentOpenIndex(D);var A=D.substring(C+1,D.length);var G=1;var B=0;var H=false;for(var E=0;E<A.length;E++){var F=A.charAt(E);if(F=='"'){if(!H){H=true;}else{H=false;}}else{if(F=="("&&!H){B++;}else{if(F==")"&&!H){B--;}else{if(F==","&&B==0&&!H){G++;}}}}}return G;},getCursorPosition:function(){var D=this._expressionTextAreaDom.offsetWidth;var B=this._expressionTextArea.getValue();var A=B.length;var E=B.split("\n");var F=-1;if(typeof document.selection!="undefined"){range_sel=document.selection.createRange();range_obj=this._expressionTextAreaDom.createTextRange();range_obj.moveToBookmark(range_sel.getBookmark());range_obj.moveEnd("character",this._expressionTextArea.getValue().length);F=A-range_obj.text.length;}else{if(typeof this._expressionTextAreaDom.selectionStart!="undefined"){F=this._expressionTextAreaDom.selectionStart;}}if(F!=-1){var C=0;for(;C<E.length;C++){A=E[C].length+1;if(F<A){break;}F-=A;}C++;F++;return[C,F];}},getStyle:function(A,B){var C="";if(document.defaultView&&document.defaultView.getComputedStyle){C=document.defaultView.getComputedStyle(A,"").getPropertyValue(B);}else{if(A.currentStyle){B=B.replace(/\-(\w)/g,function(D,E){return E.toUpperCase();});C=A.currentStyle[B];}}return C;},getYCoord:function(C){var B=10;var A=C[0]*B+this._getElementPosition(this._expressionTextAreaDom).top;if(A<0){A=0;}A=A-2*B-10;return A;},getXCoord:function(F){var A=4;var B=this._expressionTextAreaDom.offsetWidth;var E=Math.floor(B/A);var C=F[1];if(C>E){C=E;}var D=(C-1)*(A)+this._getElementPosition(this._expressionTextAreaDom).left;return D;},__eh_unhandledClick:function(B){this.clearResults();this.currentEntry="";var A=actuate.util.Event.element(B).id;if(this._expressionTextAreaDom&&A==this._expressionTextAreaDom.id){return ;}this.hintDiv.style.display="none";switch(A){case this._validateLabelID:if(this.__currentInput.functionName==this.ADVANCED&&!this.__currentInput.expression){this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("calculationDialog.message.noExpression"));}else{this._validateExpression();}break;case this._operatorsID:this.__openHelp("iv_operators");break;case this._functionsID:this.__openHelp("iv_functions");break;case this.helpLink:break;default:actuate.util.Event.stop(B);break;}},_getElementPosition:function(C){var E=C;var B=0;var A=0;var D;while(C!=null){if(!D){D=actuate.uiadapter.Element.fly(C).getStyle("z-index");}B+=C.offsetLeft;A+=C.offsetTop;C=C.offsetParent;}return{left:B,top:A,width:E.offsetWidth,height:E.offsetHeight,zIndex:D};},appendSuggestions:function(){var D=this._getElementPosition(document.getElementById(this.getId()));for(var B=0;B<this.suggestions.length;B++){var A=this.suggestions[B];if(this.suggestions[A]!=null){A+=" - "+this.suggestions[A];}var C=document.createElement("DIV");C.innerHTML=A;if(B==0){C.className="calculation_dialog_sresult";}else{C.className="calculation_dialog_result";}actuate.util.Event.observe(C,"mouseover",actuate.Method.bindAsEventListener(this.handleMouseOver,this));actuate.util.Event.observe(C,"mouseout",actuate.Method.bindAsEventListener(this.handleMouseOut,this));actuate.util.Event.observe(C,"click",actuate.Method.bindAsEventListener(this.handleMouseClick,this));this.resultlist.appendChild(C);}if(actuate.util.browser.__isIE()){this.resultlist.style.marginTop="0px";}this.resultlist.style.display="block";this.resultlist.style.position="absolute";this.resultlist.style.height="100px";this.resultlist.style.width="300px";this.resultlist.style.borderStyle="solid";this.resultlist.style.borderWidth="1px";this.resultlist.style.borderColor="#cccccc";this.resultlist.style.backgroundColor="white";this.resultlist.style.overflow="auto";this.resultlist.style.font="11px/16px tahoma, verdana, arial, sans-serif";this.resultlist.style.zIndex=(D.zIndex+500);this.resultlist.style.left=(D.left+125)+"px";this.resultlist.style.top=(D.top+D.height-83)+"px";this.resultlist.scrollTop=0;},handleBoundDataColumn:function(){if(!this.__store||!this.__store.Binding){return ;}for(var B in this.__store.Binding){var E=this.__store.Binding[B];var C=E.dataType;if(!C||C==actuate.Constant.DataType.ANY){continue;}if(this.__currentInput.editedColumn){if(E.expression){var A="["+this.__currentInput.label+"]";if(E.expression.indexOf(A)>=0||E.name==this.__currentInput.label){continue;}}}var D=E.getBRDEscapedName();this.suggestionArray.push(D);if(E.name!=E.displayName){this.suggestionArray[D]=E.displayName;}}},handleCursorMoved:function(H,A){if(A.type=="keyup"){var J=this.getKeyCode(A);if(J<37||J>40){return ;}}var I=this.findCurrentFunction();if(!I){this.hintDiv.style.display="none";return ;}var L=this.findCurrentParam();var K=I.substring(I.indexOf("(")+1,I.indexOf(")"));var G=new Array();G=K.split(",");var C=I.substring(0,I.indexOf("(")+1);for(var F=0;F<G.length;F++){if(F==L-1){C+="<b>"+G[F]+"</b>";}else{C+=G[F];}if(F<G.length-1){C+=", ";}}C+=I.substring(I.indexOf(")"),I.length);this.hintDiv.innerHTML=C;this.hintDiv.style.display="block";var D=this.getCursorPosition();var E=this.getYCoord(D);var B=this.getXCoord(D);this.hintDiv.style.left=B+"px";this.hintDiv.style.top=E+"px";this.hintDiv.style.zIndex=(this._getElementPosition(document.getElementById(this.getId())).zIndex+500);this.hintDiv.style.font="11px/16px tahoma, verdana, arial, sans-serif";this.hintDiv.className="calculation_dialog_expressionHint";},findCurrentFunction:function(){var F=this.getStringBeforeCursor();var C=this.findCurrentOpenIndex(F);if(!C||C<0){return ;}var I=F.substring(0,C);if(I==null){return null;}var J=I.split(this.functionBreakRE);var K=J[J.length-1];var E=new Array();for(var D=0;D<this.suggestionArray.length;D++){var B=this.suggestionArray[D];var H=B.indexOf("(");if(H==-1){continue;}var G=B.substring(0,H);if(K&&K.toLowerCase()==G.toLowerCase()){E.push(B);}}if(E.length==0){return null;}if(E.length==1){return E.pop();}var A=this.findFunctionFromOverloaded(E,C);return A;},sortByNumOfParams:function(C,B){var A=this.getNumberOfParams(C);var D=this.getNumberOfParams(B);return((A<D)?-1:((A>D)?1:0));},handleBRDValidateResult:function(A){if(A&&A.BRDExpression){if(!A.BRDExpression["isValid"]){this.__popupErrorDialog(A.BRDExpression["parserError"]);}else{this.__popupInformationDialog(actuate.util.Utility.getLocalizedString("calculationDialog.message.validExpression"));}}},__eh_stopEvent:function(A){actuate.util.Event.stop(A);},stopEvent:function(B){if(!B){return ;}var A=this.getKeyCode(B);if(this.suggestions.length>0&&A==13){actuate.util.Event.stop(B);}if(this.suggestions.length>0&&(A==40||A==38||A==13)){actuate.util.Event.stop(B);}}});FilePickerDialogModel=function(A,B){this.view=A;this.fileExtensions=B;this.rPaths=null;this.linkNames=null;this.files=null;this.saveAsModel=null;};FilePickerDialogModel.prototype={UNSELECTED_INDEX:-1,fileSeparator:"/",reset:function(){this.rPaths=null;this.linkNames=null;this.files=null;},setData:function(A){this._setSegments(A.segments);this._setFileList(A.fileList);this._setUpFolderList(A.upFolderList);this.view._setLastPath(A.baseDir);this.view.__update();this.view._setLastPath(A.baseDir);},_setSaveName:function(A){if(A.length>0){var B=wRSchemaUtil.getNodeTextData(A[0]);this.saveAsModel=new WRSaveAsModel(B);}},_setFileSeparators:function(A){if(A.length>0){var B=wRSchemaUtil.getNodeTextData(A[0]);if(B!=null){this.fileSeparator=B;}}},_setSegments:function(B){if(B&&B.length>0){this.rPaths=[];this.linkNames=[];for(var C=0;C<B.length;C++){this.rPaths.push(B[C].RPath);this.linkNames.push(B[C].Name);}for(var C=0;C<B.length;C++){var A=B[C].Index;this.rPaths[A]=B[C].RPath;this.linkNames[A]=B[C].Name;}}},_setFileList:function(F){this.files=[];if(F){var A=F.subDirList;var B=F.fileList;if(A){for(var D=0;D<A.length;D++){var E={};E.displayName=A[D].name;E.description=A[D].description;E.fileType=A[D].fileType;E.modifiedDate=A[D].date;E.isFolder=true;this.files.push(E);}}if(B){for(var D=0;D<B.length;D++){var C={};C.displayName=B[D].name;C.extension=B[D].extension;C.description=B[D].description;C.fileType=B[D].fileType;C.modifiedDate=B[D].date;C.isFolder=false;this.files.push(C);}}}},getFileExtensions:function(){return this.fileExtensions;},getLinkNames:function(){return this.linkNames;},getFileNames:function(){var B=[];if(this.files){for(var A=0;A<this.files.length;A++){B.push([this.files[A].displayName,this.files[A].fileType,this.files[A].modifiedDate,this.files[A].extension]);}}return B;},getFileName:function(A){if(A>=0&&this.files&&this.files[A]){var B=this.files[A].displayName;if(this.files[A].extension){B=B+"."+this.files[A].extension;}return B;}},_setUpFolderList:function(B){if(B){this.upFolders=[];for(var A=0;A<B.length;A++){this.upFolders.push([B[A].isFolder,B[A].name,B[A].description]);}}},getUpFolderNames:function(){var B=[];for(var A=0;A<this.upFolders.length;A++){B.push(this.upFolders[A][1]);}return B;},getFileDescriptions:function(){var B=[];if(this.files){for(var A=0;A<this.files.length;A++){if(this.files[A].description!=null&&this.files[A].description!=undefined){B.push(this.files[A].description);}else{B.push("");}}}return B;},getRPath:function(A){return this.rPaths[A];},getPath:function(A){if(this.files[A]){return this.makePath(this.files[A].displayName);}},makeFolderPath:function(A){return this.makePath("",A);},getFullFileName:function(A){var B=this.getPath(A);if(this.files[A]&&this.files[A].extension){B+="."+this.files[A].extension;}return B;},makePath:function(B){if(!this.rPaths||!B){return this.fileSeparator;}var A=this.rPaths[0];if(A==this.fileSeparator){return(A+B);}return(A+this.fileSeparator+B);},isFolder:function(A){if(A!=null&&A>=0&&this.files[A]){return this.files[A].isFolder;}},checkName:function(A){return this.saveAsModel.checkName(A,this.fileExtensions[0],this.fileExtensions,this.files);},checkDuplicateName:function(B){if(this.files&&B){for(var A=0;A<this.files.length;A++){if((this.files[A]&&this.files[A].displayName&&this.files[A].displayName.toLowerCase()==B.toLowerCase())||(this.getFileName(A)&&this.getFileName(A).toLowerCase()==B.toLowerCase())){return this.getFileName(A);}}}},isDuplicateFileError:function(){return this.saveAsModel.isDuplicateFileError();},isDuplicateFolderError:function(){return this.saveAsModel.isDuplicateFolderError();},isValidError:function(){return this.saveAsModel.isValidError();},getDuplicateName:function(){return this.saveAsModel.duplicateName;},getSaveName:function(){return this.saveAsModel.saveName;},getBaseNameLength:function(A){return this.saveAsModel.getBaseNameLength(A,this.fileExtensions);},getPrefillName:function(){return this.saveAsModel.getPrefillName();},setPrefillName:function(A){this.saveAsModel.setPrefillName(A);},getFileIndexFromName:function(B){for(var A=0;A<this.files.length;A++){if(this.files[A].displayName==B){return A;}}return -1;},toString:function(){var B="";B+="--------------Start File Browsing-----------------------\n";B+="Current RPaths--------------\n";for(var A=0;A<this.rpaths.length;A++){B+="Rpath number "+A+" : "+this.rpaths[A]+"\n";}B+="--------------End File Browsing-----------------------\n";return B;}};actuate.util.Package.define("actuate.dialog.impl.helper.filepicker");actuate.dialog.impl.helper.filepicker.FilePickerDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_classname:"actuate.dialog.FilePickerDialog",OPEN_DIALOG:"OpenFileDialog",SAVE_DIALOG:"SaveFileDialog",fileImages:new Array("filepicker_smalliconImageButton sprite-icon_iob","filepicker_smalliconImageButton sprite-icon_sma","filepicker_smalliconImageButton sprite-icon_bizdesign","filepicker_smalliconImageButton sprite-icon_rpttemplate","filepicker_smalliconImageButton sprite-rptdesign16x16"),folderImage:"filepicker_smalliconImageButton sprite-folder",fileImageDefault:"filepicker_smalliconImageButton sprite-data-column",upArrowImage:"actuate-widget-btn-wrap actuate-widget-btn actuate_file_bt ",upArrowDisabledImage:"actuate-widget-btn-wrap actuate-widget-btn actuate_file_bt actuate-item-disabled",minHeight:16,maxHeight:16*16,_dialogType:undefined,_fileFilter:undefined,_fileListSelectedElement:undefined,_fileListSelectedIndex:undefined,_lastPath:undefined,__preventEnterKey:true,LINE_HEIGHT:16,_width:510,FOLDER_TREE_INDENT:16,FOLDER_LINE_COLOR_SELECTED:"#353535",FOLDER_LINE_TEXT_COLOR_SELECTED:"#353535",FOLDER_LINE_COLOR_UNSELECTED:"#ffffff",_FILTER_TEXT_ID:"filter_text_id",_FIND_BUTTON_ID:"find_button_id",_SAVE_AS_ID:"save_as_div",_FILE_NAME_ID:"file_name_id",_FILE_TYPE_ID:"file_type_id",_parentDialogHelpLinks:undefined,_TEMPLATE_FOLDER_LIST:'<tpl for="."><div class="actuate-combo-list-item">'+'<div class="{icon}" style="margin-top:2px; margin-right:2px;"></div>'+'<div qtip="{title}" style="">{folderName}</div>'+"</div></tpl>",_TEMPLATE_FILE_LIST:'<tpl for="."><div id={id} class="actuate-list-item">'+'<div class="{icon}" style="margin-top:1px; margin-right:2px;"></div>'+'<div qtip="{title}" style="">{fileName}</div>'+"</div></tpl>",_firstFocusElement:null,__initComponents:function(){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__initComponents.apply(this,arguments);this.folderListStore=new actuate.widget.data.SimpleStore({fields:["icon","title","folderName"]});var C=document.getElementById("upButton_id");this.upFolderButton=new actuate.widget.button.Button({cls:"actuate_file_btn",iconCls:"actuate_file_btn_upFolder",tooltip:actuate.util.Utility.getLocalizedString("filePickerDialog.txt.up"),tooltipType:"title",renderTo:C});var A=document.getElementById(this._FILTER_TEXT_ID);var B=document.getElementById(this._FIND_BUTTON_ID);this.filterText=new actuate.widget.form.TextField({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,name:"filter_text_name",width:160,emptyText:actuate.util.Utility.getLocalizedString("filePickerDialog.emptyText.search"),enableKeyEvents:true});this.filterText.render(A);this.findButton=new actuate.widget.button.Button({cls:"actuate_file_btn",iconCls:"actuate_file_btn_search",tooltip:actuate.util.Utility.getLocalizedString("filePickerDialog.text.search"),tooltipType:"title",renderTo:B});this.saveAsDiv=document.getElementById(this._SAVE_AS_ID);this.fileNameText=document.getElementById(this._FILE_NAME_ID);var D=document.getElementById(this._FILE_TYPE_ID);this.fileTypeDiv=document.getElementById(this._FILE_TYPE_ID+"_div");this.fileTypeOption=new actuate.widget.form.ComboBox({editable:false,lazyInit:true,width:445,listeners:{select:actuate.Method.bind(function(){this.__neh_saveTypeSelect();},this)},renderTo:D});this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.defaultTitle"));this.__initFileBrowsingBase();this.__initFolderNavigation();this.__initFileListNavigation();this.__initDescription();},__initListeners:function(){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__initListeners.apply(this,arguments);actuate.util.Event.observe(document.getElementById(this._FIND_BUTTON_ID),"click",actuate.Method.bind(this.__neh_clickFindButton,this),false);actuate.util.Event.observe(this.filterText._ele.dom,"keypress",actuate.Method.bind(this.__neh_filterKeyPress,this),false);actuate.util.Event.observe(this.fileNameText,"keyup",actuate.Method.bind(this.__neh_filterFileNameKeyPress,this),false);},__initTemplates:function(){var C=document.createElement("div");var A=new actuate.widget.Template('<div style="position: relative; margin: 0px auto;  ">'+'<div style="position: relative; margin: 6px 1px 10px; ">'+'<div style="position: relative; ">'+'<div class="header-text">{0}</div>'+'<TABLE CELLPADDING="0px" CELLSPACING="0px" width="100%" CLASS="category_block">'+"<TR>"+'<TD><DIV ID="{1}"></DIV></TD>'+'<TD><DIV ID="{3}"></DIV></TD>'+'<TD><DIV ID="{6}"></DIV></TD>'+'<TD><DIV ID="{7}"></DIV></TD>'+"</TR>"+" </TABLE>"+'<div style="position:  relative; margin-top: 5px">'+'<div id="{4}">'+"</div>"+'<div style="position: relative;" id="{8}">'+'<div class="header-text">{9}</div>'+'<div style="position: relative;">'+'<input value="" type=text id="{10}"  class="actuate-form-text actuate-form-field" style="width: 445px;" ></input>'+"</div>"+"</div>"+'<div style="position: relative;" id = "{11}">'+'<div style="width: 450px;" class="header-text">{12}</div>'+'<div id="{13}" '+""+"</div>"+"</div>"+'<div id="{15}_div" style="position: relative; margin: 0 auto;">'+'<div class="header-text">{14}</div>'+'<div id="{15}" style="position: relative;"></div>'+"</div>"+"</div>"+'<div id="{16}" style="position: absolute; top: 38px; left: 7px; display: none;width: 90%; '+' height: 1px;overflow: auto; border-style: solid; border-width: 1px; border-color: #808080; background-color: #ffffff">'+'<div id="{17}" style="position: relative; display: none; height: 1px; width: 90%; '+' background-color:#ffffff;">'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>");var B=[actuate.util.Utility.getLocalizedString("filePickerDialog.txt.lookIn"),"currentFolderHolder_id","currentFolderElement_id","upButton_id","filelist_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.filter"),this._FILTER_TEXT_ID,this._FIND_BUTTON_ID,this._SAVE_AS_ID,actuate.util.Utility.getLocalizedString("filePickerDialog.saveAs"),this._FILE_NAME_ID,"descriptionDiv_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.description"),"description_id",actuate.util.Utility.getLocalizedString("filePickerDialog.txt.fileType"),this._FILE_TYPE_ID,"folderTreeHolder_id","folderTree_id"];A.append(C,B,true);this.add(new actuate.widget.panel.Panel({contentEl:C,border:false,baseCls:"actuate-filepick-panel"}));},setFileFilters:function(D){this.filterText.setValue("");if(D){this.fileTypeOption.getStore().removeAll();var A=[];for(var C in D){var B=D[C].filter;if(D[C].description){B=D[C].description+" ("+B+")";}A.push([D[C].filter,B]);}this.fileTypeOption.setStore(A);this.fileTypeOption.setSelectedIndex(0);this.__neh_saveTypeSelect();}},setDialogType:function(A){this._dialogType=A;if(this.saveAsDiv){if(this._dialogType==this.SAVE_DIALOG){this.detailElement.childNodes[0].disabled=undefined;this.saveAsDiv.style.display="block";this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.saveAs.title"));this._firstFocusElement=this.fileNameText;}else{this.detailElement.childNodes[0].disabled="disabled";this.saveAsDiv.style.display="none";this.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.defaultTitle"));this._firstFocusElement=null;}}},__neh_fileListSelection:function(C){actuate.util.Event.stop(C);this.fileListSelectedIndex=this.fileList.getSelectedIndex();if(this.fileListSelectedIndex>-1){var A=this.getModel().getFileDescriptions();this.descriptionText.setValue(A[this.fileListSelectedIndex]);var B=this.getModel().files[this.fileListSelectedIndex];if(B){if(!B.isFolder){this.fileNameText.value=this.getModel().getFileName(this.fileListSelectedIndex);}}}this._fileListSelectedIndex=this.fileListSelectedIndex;this._updateOKButtonState();},__initFileBrowsingBase:function(){this.model=new FilePickerDialogModel(this);this.stopClick_c=actuate.Method.bind(this.__neh_stopClick,this);this.fileTypeDescription=new Array("iob","sma","bizDesign","rpttemplate","rptDesign");},__initFolderNavigation:function(){var A=document.getElementById("currentFolderHolder_id");this.currentFolderHolder=new actuate.widget.form.ComboBox({editable:false,width:225,lazyInit:true,tpl:this._TEMPLATE_FOLDER_LIST,valueField:"folderName",displayField:"title",titleField:"title",store:this.folderListStore,renderTo:A});this.currentFolderHolder.registerEventHandler("select",actuate.Method.bind(this.__neh_folderTreeClick,this));this.upButton=document.getElementById("upButton_id");this.upOneLevel_c=actuate.Method.bind(this.__neh_upOneLevel,this);this.folderTree=document.getElementById("folderTree_id");this.folderTree.selectionId=-1;this.folderTree.style.display="none";this.folderTreeHolder=document.getElementById("folderTreeHolder_id");this.folderListSelection_c=actuate.Method.bind(this.__neh_folderListSelection,this);},__initFileListNavigation:function(){var A=document.getElementById("filelist_id");this.fileListSelectedIndex=-1;this.fileListStore=new actuate.widget.data.SimpleStore({fields:["icon","title","fileName","id"]});this.fileList=new actuate.widget.form.ListBox({width:450,height:110,tpl:this._TEMPLATE_FILE_LIST,store:this.fileListStore,renderTo:A});this.fileList.registerEventHandler("select",actuate.Method.bind(this.__neh_fileListSelection,this));this.fileList.registerEventHandler("dblclick",actuate.Method.bind(this.__neh_fileListDblClick,this));},__initDescription:function(A){this.detailElement=document.getElementById("description_id");this.descriptionText=new actuate.widget.form.TextArea({name:"description_text",cls:"actuate_file_description",width:450});this.descriptionText.render(this.detailElement);},__resetFolderNavigation:function(){this.currentFolderHolder.clear();this.upButton.className="actuate-item-disabled";this.upOne=-1;},__resetFileListNavigation:function(){this.fileList.clear();},__resetDescription:function(){if(this._dialogType!=this.SAVE_DIALOG){this.detailElement.childNodes[0].value="";}},__bindFolderNavigation:function(){var F=this.getModel().getLinkNames();var B=F[0];for(var A=F.length,E=A;E>0;E--){var D=F[E-1];var C=new this.folderListStore.recordType({icon:D==B?"actuate_file_open16":"actuate_file_folderClose16",title:D,folderName:D});this.folderListStore.add(C);}if(B=="/"){B=actuate.util.Utility.getLocalizedString("filePickerDialog.rootFolder");}this.currentFolderHolder.setValue(B);this.upOne=F.length-2;if(this.upOne>-1){this.upFolderButton.className=""+this.upArrowImage;actuate.util.Event.observe(this.upButton,"click",this.upOneLevel_c,false);this.upButton.className="";}else{this.upFolderButton.className=""+this.upArrowDisabledImage;}},__bindFileListNavigation:function(){var A=this.getModel().getFileNames();var D=[];for(var C=0;C<A.length;C++){var B=this.getModel().isFolder(C);name=A[C][0];D.push([B?"actuate_file_folderClose16":"actuate_file_fileGeneric16 "+A[C][3],B?name:(name+"."+A[C][3]),B?name:(name+"."+A[C][3]),"file_name_item_"+C]);}this.fileListStore.loadData(D);},__update:function(){this.__resetFolderNavigation();this.__bindFolderNavigation();this.__bindFileListNavigation();this._updateOKButtonState();actuate.Method.defer(100,this._resetDlgFocus,this);},__neh_stopClick:function(A){actuate.util.Event.stop(A);},__getIconClass:function(B){if(B){for(var A=0;A<5;A++){if(this.fileTypeDescription[A].toLowerCase()==B.toLowerCase()){return this.fileImages[A];}}}return this.fileImageDefault;},makeFolderList:function(C){var E=document.createElement("ul");E.style.position="relative";E.style.marginTop="0px";E.style.marginBottom="0px";E.style.padding="0px";E.style.marginLeft="0px";for(var D=0;D<C.length;D++){var B=document.createElement("li");B.style.position="relative";B.selectionId=D;B.style.paddingLeft="20px";B.className=this.folderImage;this.__disableElement(B);B.style.margin="0px";var F=document.createElement("span");F.style.whiteSpace="nowrap";var A=document.createTextNode(C[D]);E.appendChild(B);B.appendChild(F);F.appendChild(A);E.appendChild(B);}return E;},makeFileList:function(D){var U=document.createElement("table");U.style.borderCollapse="collapse";U.style.width="100%";var S=document.createElement("thead");S.className="filepicker_fileListingHeader_background";U.appendChild(S);var M=document.createElement("tr");S.appendChild(M);var F=document.createElement("td");F.style.borderBottom="1px solid";F.style.borderRight="2px inset";F.className="filepicker_fileListingHeader_border_bottom filepicker_fileListingHeader_border_right";M.appendChild(F);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.Name")));J.style.marginLeft="18px";F.appendChild(J);var I=document.createElement("td");M.appendChild(I);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.Type")));J.style.marginLeft="7px";I.appendChild(J);I.style.borderBottom="1px solid";I.style.borderRight="2px inset";I.className="filepicker_fileListingHeader_border_bottom filepicker_fileListingHeader_border_right";var C=document.createElement("td");M.appendChild(C);var J=document.createElement("span");J.appendChild(document.createTextNode(actuate.util.Utility.getLocalizedString("filePickerDialog.txt.DateModified")));J.style.marginLeft="7px";C.appendChild(J);C.style.borderBottom="1px solid";C.className="filepicker_fileListingHeader_border_bottom";var B=document.createElement("tbody");U.appendChild(B);for(var R=0;R<D.length;R++){var H=document.createElement("tr");var N=document.createElement("td");var P=document.createElement("td");var K=document.createElement("td");var E=[N,P,K];B.appendChild(H);for(var Q=0;Q<3;Q++){H.appendChild(E[Q]);var L=document.createElement("div");L.style.position="relative";L.style.whiteSpace="nowrap";if(Q==0){L.selectionId=R;var T=document.createElement("div");T.style.cssFloat="left";T.style.styleFloat="left";T.style.marginRight="2px";T.qtip=D[R][Q];if(this.getModel().isFolder(R)){T.className=this.folderImage;}else{var A=this.__getIconClass(D[R][3]);T.className=A;}L.appendChild(T);}else{L.style.paddingLeft="4px";}this.__disableElement(L);L.style.margin="0px";var G=document.createElement("div");G.id="file_name_item_"+Q;G.style.cursor="default";G.style.overflow="hidden";var O=document.createTextNode(D[R][Q]);G.qtip=D[R][Q];E[Q].appendChild(L);L.appendChild(G);G.appendChild(O);}}return U;},getModel:function(){return this.model;},__neh_showFolders:function(B){actuate.util.Event.stop(B);if(this.menuShown){this.__neh_hideFolders();}else{this.folderTree.style.display="block";this.folderTreeHolder.style.display="block";var A=this.folderTreeHeight;displayHeight=A<this.minHeight?this.minHeight:A>this.maxHeight?this.maxHeight:A;this.folderTree.style.height=displayHeight+"px";this.folderTreeHolder.style.height=displayHeight+"px";this.folderTree.style.width=this.folderTreeHolder.clientWidth+"px";this.folderTreeHolder.style.height=(displayHeight+this.folderTreeHolder.offsetHeight-this.folderTreeHolder.clientHeight-2)+"px";this.menuShown=true;}},__neh_hideFolders:function(){this.folderTree.style.display="none";this.folderTreeHolder.style.display="none";this.menuShown=false;},__neh_upOneLevel:function(A){if(this.upOne>-1){this.__browseFolderFromTree(this.getModel().getLinkNames().length-1-this.upOne);}},__neh_folderListSelection:function(A){},__neh_fileListDblClick:function(C,A){if(A>-1){var B=this.getModel().isFolder(A);if(B){this.__browseFolderFromList(A);}else{this.__fileAction(A);}}},__neh_selectstart:function(A){if(A.returnValue==false){A.returnValue=true;return true;}return false;},__canClose:function(){var E=this.fileNameText.value;if(this._dialogType==this.SAVE_DIALOG&&this.getModel()){var B=this.getModel().checkDuplicateName(E);if(B){var D=actuate.util.Utility.getLocalizedString("error.saveViewDialog.duplicateProptDocName",B);var C=this;var A=arguments;this.__popupConfirmDialog(D,function(F){if(F=="yes"){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__canClose.apply(C,A);C._afterApply();}});return ;}}actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__canClose.apply(this,arguments);this._afterApply();},_afterApply:function(){if(this._fileListSelectedIndex!=null&&this._fileListSelectedIndex>-1){var A=this.getModel().isFolder(this._fileListSelectedIndex);if(A){this.__browseFolderFromList(this._fileListSelectedIndex);}}},__validate:function(){if(this.getModel().isFolder(this._fileListSelectedIndex)){return false;}var A=actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.__validate.call(this,this,this.__createResult());var B=this.fileNameText.value;if(this._dialogType!=this.SAVE_DIALOG){if(!B){this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("filePickerDialog.error.noFileIsSelected"));A=false;}}else{if(!B||!actuate.dialog.impl.Utility.isValidFileName(B)){this.__popupErrorDialog(actuate.util.Utility.getLocalizedString("filePickerDialog.error.invalidFileName"));return false;}}return A;},_getFullFileName:function(){if(this._dialogType==this.SAVE_DIALOG){var A=this.fileNameText.value;if(A&&this._lastPath!=null){if(this._lastPath.charAt(this._lastPath.length-1)!="/"){A=this._lastPath+"/"+A;}else{A=this._lastPath+A;}}return A;}else{if(!this.getModel().isFolder(this._fileListSelectedIndex)){return this.getModel().getFullFileName(this._fileListSelectedIndex);}}},_getFileDescription:function(){return this.detailElement.childNodes[0].value;},getFileExtensions:function(){return this.getModel().getFileExtensions();},_createBrowseFolderRequest:function(G,E){var D=birtSoapRequest.createXMLDom(null,actuate.Constant.tag.Data);var F=actuate.util.XmlDom.createElement(D,"FileBrowsing");var C=actuate.util.XmlDom.createElement(D,"Search");var B=actuate.util.XmlDom.createElement(D,"FileType");typeText=D.createTextNode(E);B.appendChild(typeText);C.appendChild(B);F.appendChild(C);if(G!=null){var H=actuate.util.XmlDom.createElement(D,"Path");var A=D.createTextNode(G);H.appendChild(A);F.appendChild(H);}D.documentElement.appendChild(F);return D;},__enableElement:function(A){A.style.backgroundColor=this.FOLDER_LINE_COLOR_SELECTED;A.style.color=this.FOLDER_LINE_COLOR_UNSELECTED;},__disableElement:function(A){A.style.backgroundColor=this.FOLDER_LINE_COLOR_UNSELECTED;},__browseFolderFromList:function(A){this._queryFileList(this.getModel().getPath(A));},__browseFolderFromTree:function(C,D){var B=null;var A=this.getModel().getLinkNames();if(C>-1&&D!=null){B=this.getModel().getRPath(A.length-1-C);}else{if(C>-1){B=this.getModel().getRPath(C);}else{B=this.getModel().makeFolderPath(D);}}this._queryFileList(B);},__fileAction:function(A){var B=this.getModel().getFileDescriptions();var C=null;if(B!=null&&B.length>A){C=B[A];}this.detailElement.childNodes[0].value=C?C:"";this.fileNameText.value=this.getModel().getFileName(A);this._fileListSelectedIndex=A;this._neh_okay();},__findTarget:function(A){do{if(A.selectionId!=undefined){return A;}A=A.parentNode;}while(A!=undefined);return A;},show:function(B,C){actuate.dialog.impl.helper.filepicker.FilePickerDialog.superclass.show.apply(this,arguments);var D=this._lastPath;this.filterText.setValue("");this.fileNameText.value="";this.detailElement.childNodes[0].value="";if(C&&C.fullFileName){D=C.fullFileName;var E=D;if(D){var A=D.lastIndexOf("/");if(A>=0){E=D.substring(A);D=D.substring(0,A);}else{D="/";}}if(E&&E.charAt(0)=="/"){E=E.substring(1);}}this._queryFileList(D);},_queryFileList:function(D){var F=D;var E=null;if(F==null){F=this._lastPath;}if(this.filterText&&this.filterText.getValue()){E=this.filterText.getValue()+"*";}this._lastPath=F;this._fileListSelectedElement=null;this._fileListSelectedIndex=null;this.__resetDescription();var B={path:F};var C=this._getCurrentFileFilter();if(C){B.fileFilter=C;}if(E){B.folderFilter=E;}var A={};A[actuate.dialog.impl.EventConstants.__E_QUERY_FILELIST]=actuate.util.Json.makeMap(B);this.__sendJson(A,actuate.Method.bind(this.model.setData,this.model));},__createResult:function(){if(this._dialogType==this.SAVE_DIALOG){return[this._getFullFileName(),this._getFileDescription(),this._fileFilter.substr(1)];}else{return[this._getFullFileName(),this._fileFilter.substr(1)];}},__neh_clickFindButton:function(){this._queryFileList();},_getCurrentFileFilter:function(){var B=this._fileFilter;if(this.filterText&&this.filterText.getValue()){var A=this.filterText.getValue()+"*";if(A.indexOf(".")>=0){B=A;}else{if(B.indexOf("*")>=0){B=B.replace(/\*/g,A);}}}else{B="*"+this._fileFilter.substring(this._fileFilter.indexOf("."));}return B;},__neh_filterKeyPress:function(A){if(A.keyCode==actuate.util.Event.KEY_RETURN){actuate.util.Event.stop(A);this.__neh_clickFindButton();}},__neh_filterFileNameKeyPress:function(A){this._updateOKButtonState();if(A.keyCode==actuate.util.Event.KEY_RETURN){actuate.util.Event.stop(A);this._neh_okay();}},_updateOKButtonState:function(){var A=this.fileNameText.value?true:false;if(!A&&this.fileList&&this.fileList.getSelectedIndex()>=0){A=true;}this.__setOKButtonState(A);},_neh_help_link:function(){if(this._parentDialogHelpLinks){window.open(this._parentDialogHelpLinks);}else{this.__openHelp(this.__getHelpTopic());}},setParentDialogHelpLinks:function(A){this._parentDialogHelpLinks=A;},__getHelpTopic:function(){return"open_file";},_setLastPath:function(A){if(this._lastPath==null){this._lastPath=A;}},__neh_folderTreeClick:function(C){var B=this.currentFolderHolder.getSelectedIndex();var A=this.getModel().getUpFolderNames();var D=A[B];this.__browseFolderFromTree(this.currentFolderHolder.getSelectedIndex(),D);},__neh_saveTypeSelect:function(A){this._fileFilter=this.fileTypeOption.getValue();this.__neh_clickFindButton();},__createFullName:function(B){if(B.length==0){return null;}if(!this.typeRPTonly){if(this.saveTypeSelect.getSelectedIndex()==0){if(this.__fileNameHasRPTExtension(B)){var A=B.lastIndexOf(Constants.RPTDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.BIZDESIGN_EXTENSTION;}else{if(!this.__fileNameHasBizExtension(B)){B=B+Constants.BIZDESIGN_EXTENSTION;}}return B;}if(this.saveTypeSelect.getSelectedIndex()==1){if(this.__fileNameHasBizExtension(B)){var A=B.lastIndexOf(Constants.BIZDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.RPTDESIGN_EXTENSTION;}else{if(!this.__fileNameHasRPTExtension(B)){B=B+Constants.RPTDESIGN_EXTENSTION;}}return B;}}else{if(this.__fileNameHasBizExtension(B)){var A=B.lastIndexOf(Constants.BIZDESIGN_EXTENSTION);B=B.substring(0,A);B=B+Constants.RPTDESIGN_EXTENSTION;}else{if(!this.__fileNameHasRPTExtension(B)){B=B+Constants.RPTDESIGN_EXTENSTION;}}return B;}},_postShow:function(){actuate.dialog.impl.helper.AbstractIVDialog.prototype._postShow.call(this);actuate.Method.defer(100,this._resetDlgFocus,this);},_resetDlgFocus:function(){try{if(this._firstFocusElement&&this._firstFocusElement.focus){this._firstFocusElement.focus();}}catch(A){}}});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.BooleanFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.BooleanFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.BooleanFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.BooleanFormattingDialog",_htmlElements:{"_ifTrue":null,"_ifFalse":null},__resultSetName:null,_width:360,_height:153,hasAutoAdjustSize:false,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.BooleanFormattingDialog.superclass.initialize.call(this,A);this.ifTrue=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"ifTrue",width:200});this.ifTrue.render(this._htmlElements["_ifTrue"]);this.ifFalse=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"ifFalse",width:200});this.ifFalse.render(this._htmlElements["_ifFalse"]);},_localBind:function(A){if(!A){return ;}this.prepareUI(A);},prepareUI:function(B){this.ifTrue.setValue("true");this.ifFalse.setValue("false");if(B==undefined||B==null){return ;}var C;if(!B.targetMd){this.__resultSetName=B.selectedBinding?B.selectedBinding.name:null;C=B.selectedElement?B.selectedElement.dataFormat:null;}else{this.__resultSetName=B.targetMd.binding.name;C=B.targetMd.dataFormat;}if(B.total){this.total=B.total;this.targetMd=B.targetMd;}else{delete this.total;this.targetMd;}if(C==null){return ;}var A=C.pattern;if(A&&A.length>0){this.ifFalse.setValue(A[0]?A[0]:"");if(C.pattern.length>1){this.ifTrue.setValue(A[1]?A[1]:"");}}},_okPress:function(){var A=this.ifTrue.getValue();var B=this.ifFalse.getValue();if(A.length==0||B.length==0){actuate.dialog.impl.helper.format.BooleanFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("booleanFormattingDialog.message.invalidFormat"));return ;}else{if(A==B){actuate.dialog.impl.helper.format.BooleanFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("booleanFormattingDialog.message.duplicateFormat"));return ;}}actuate.dialog.impl.helper.format.BooleanFormattingDialog.superclass._okPress.call(this);},__getHelpTopic:function(){return"iv_boolean_formatting";},createJsonNode:function(){var C={};var D={};var B={};B.category="true";B.pattern=this.ifTrue.getValue();D.ifTrueChoice=ifTrueChoise;var A={};A.category="false";A.pattern=this.ifFalse.getValue();D.ifFalseChoice=A;if(this.__resultSetName||this.__resultSetName==""){C.resultSetName=this.__resultSetName;}C[actuate.Constant.tag.BooleanFormat]=D;return{dataFormat:C};},createSoapNode:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var D=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.BooleanFormat);A.documentElement.appendChild(D);var F=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);D.appendChild(F);var I=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);F.appendChild(I);var C=A.createTextNode("true");I.appendChild(C);var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);F.appendChild(B);var C=A.createTextNode(this.ifTrue.getValue());B.appendChild(C);var J=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);D.appendChild(J);var K=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);J.appendChild(K);var C=A.createTextNode("false");K.appendChild(C);var H=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);J.appendChild(H);var C=A.createTextNode(this.ifFalse.getValue());H.appendChild(C);if(this.__resultSetName||this.__resultSetName==""){var E=actuate.util.XmlDom.createElement(A,"ResultSetName");A.documentElement.appendChild(E);var G=A.createTextNode(this.__resultSetName);E.appendChild(G);}return A.documentElement;}});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.StringFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.StringFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.StringFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.StringFormattingDialog",_htmlElements:{"_category":null,"_customePattern":null,"_customPatternInput":null,"_customePatternHelp":null},__resultSetName:null,_width:418,_height:107,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.StringFormattingDialog.superclass.initialize.call(this,A);this._initTemplates();this.categoryMenuDiv=document.getElementById(this._htmlElements["_category"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);var B=[["Unformatted",actuate.util.Utility.getLocalizedString("stringFormattingDialog.option.Unformatted")],[">",actuate.util.Utility.getLocalizedString("stringFormattingDialog.option.Uppercase")],["<",actuate.util.Utility.getLocalizedString("stringFormattingDialog.option.Lowercase")],["Custom",actuate.util.Utility.getLocalizedString("stringFormattingDialog.option.Custom")]];this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,store:B});this.categoryMenu.render(this.categoryMenuDiv);this.__local_installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<TABLE style="margin-top:1ex;" WIDTH="100%">'+'	<TR class="helpHeader"> '+"		<TD>{0}</TD>"+"		<TD>{1}</TD>"+"		<TD>{2}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{3}</TD>"+"		<TD>{4}</TD>"+"		<TD>{5}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{6}</TD>"+"		<TD>{7}</TD>"+"		<TD>{8}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{9}</TD>"+"		<TD>{10}</TD>"+"		<TD>{11}"+"	</TR>"+"	<TR>"+"		<TD>{12}</TD>"+"		<TD>{13}</TD>"+"		<TD>{14}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{15}</TD>"+"		<TD>{16}</TD>"+"		<TD>{17}</TD>"+"	</TR>"+"</TABLE>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpFormat.uppercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpCode.uppercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpResult.uppercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpFormat.lowercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpCode.lowercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpResult.lowercase"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpFormat.zip4"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpCode.zip4"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpResult.zip4"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpFormat.phone"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpCode.phone"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpResult.phone"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpFormat.ssn"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpCode.ssn"),actuate.util.Utility.getLocalizedString("stringFormattingDialog.helpResult.ssn")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},__local_installEventHandlers:function(A){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);},_preHide:function(){this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));},_localBind:function(A){if(!A){return ;}this.prepareUI(A);},prepareUI:function(C){this.hideAll();this.customPatternInput.setValue("");this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));if(C==undefined||C==null){return ;}var D;if(!C.targetMd){this.__resultSetName=C.selectedBinding?C.selectedBinding.name:null;D=C.selectedElement?C.selectedElement.dataFormat:null;}else{this.__resultSetName=C.targetMd.binding.name;D=C.targetMd.dataFormat;}if(C.total){this.total=C.total;this.targetMd=C.targetMd;}else{delete this.total;this.targetMd;}if(D==null){return ;}var B=D.category;if(!B){D=D.StringFormat?D.StringFormat.categoryChoice:D;if(D&&D.category){B=D.category;}}this.categoryMenu.setValue(B);if(B==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){var A=D.pattern;this.customPatternInput.setValue(A==null?"":A);this.showCustom();}},hideAll:function(){this.customPattern.style.display="none";this.adjustSize();},showCustom:function(){this.customPattern.style.display="block";this.adjustSize();},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}else{this.hideAll();}this._fixDropShadow();},__getHelpTopic:function(){return"iv_string_formatting";},createJsonNode:function(){var B={};var C={};var A={};A.category=this.categoryMenu.getValue();A.pattern=this.customPatternInput.getValue();C.categoryChoice=A;B[actuate.Constant.tag.StringFormat]=C;B.resultSetDataType="String";if(this.__resultSetName||this.__resultSetName==""){B.resultSetName=this.__resultSetName;}return{dataFormat:B};},createSoapNode:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.StringFormat);A.documentElement.appendChild(B);var C=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);B.appendChild(C);var G=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);C.appendChild(G);var D=A.createTextNode(this.categoryMenu.getValue());G.appendChild(D);var J=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);C.appendChild(J);var D=A.createTextNode(this.customPatternInput.getValue());J.appendChild(D);var F=actuate.util.XmlDom.createElement(A,"ResultSetDataType");A.documentElement.appendChild(F);var I=A.createTextNode("String");F.appendChild(I);if(this.__resultSetName||this.__resultSetName==""){var E=actuate.util.XmlDom.createElement(A,"ResultSetName");A.documentElement.appendChild(E);var H=A.createTextNode(this.__resultSetName);E.appendChild(H);}return A.documentElement;}});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.NumberFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.NumberFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.NumberFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.NumberFormattingDialog",_htmlElements:{"_category":null,"_locale":null,"_customeCode":null,"_symbolMenu":null,"_symbolPosition":null,"_decPlacesMenu":null,"_negativeNumber":null,"_symbolMenuInput":null,"_symbolPositionInput":null,"_decPlacesMenuInput":null,"_useSeparator":null,"_useSeparatorInput":null,"_negativeNumberInput":null,"_localeDIV":null,"_customePattern":null,"_customPatternInput":null,"_customePatternHelp":null},__resultSetName:null,__resultSetDataType:null,__dataFormat:null,_showLocale:false,_width:418,_height:107,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.NumberFormattingDialog.superclass.initialize.call(this,A);this._initTemplates();this.categoryMenuDiv=document.getElementById(this._htmlElements["_category"]);this.localeMenuDiv=document.getElementById(this._htmlElements["_locale"]);this.symbol=document.getElementById(this._htmlElements["_symbolMenu"]);this.symbolPosition=document.getElementById(this._htmlElements["_symbolPosition"]);this.decimalPlaces=document.getElementById(this._htmlElements["_decPlacesMenu"]);this.useSeparator=document.getElementById(this._htmlElements["_useSeparator"]);this.negativeNumber=document.getElementById(this._htmlElements["_negativeNumber"]);this.locale=document.getElementById(this._htmlElements["_localeDIV"]);this.symbolInputDiv=document.getElementById(this._htmlElements["_symbolMenuInput"]);this.symbolPositionInputDiv=document.getElementById(this._htmlElements["_symbolPositionInput"]);this.decimalPlacesInputDiv=document.getElementById(this._htmlElements["_decPlacesMenuInput"]);this.useSeparatorInput=new actuate.uiadapter.Checkbox({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,valueText:"separator",boxLabel:actuate.util.Utility.getLocalizedString("numberFormattingDialog.label.separator"),width:"195px",labelWidth:170});this.useSeparatorInput.render(this._htmlElements["_useSeparatorInput"]);this.negativeNumberInputDiv=document.getElementById(this._htmlElements["_negativeNumberInput"]);this.customCode=document.getElementById(this._htmlElements["_customeCode"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);var E=[["Unformatted",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Unformatted")],["General Number",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.General")],["Currency",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Currency")],["Fixed",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Fixed")],["Percent",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Percent")],["Scientific",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Scientific")],["Custom",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.Custom")]];this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,store:E});this.categoryMenu.render(this.categoryMenuDiv);this.localeMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,valueField:"value",displayField:"text"});this.localeMenu.render(this.localeMenuDiv);this.symbolInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.symbolInput.render(this.symbolInputDiv);this.symbolPositionInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.symbolPositionInput.render(this.symbolPositionInputDiv);this.symbolPositionInput.setStore([["before",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.before")],["after",actuate.util.Utility.getLocalizedString("numberFormattingDialog.option.after")]]);this.decimalPlacesInput=new actuate.uiadapter.ComboBox({editable:false,width:200});this.decimalPlacesInput.render(this.decimalPlacesInputDiv);var D=[];for(var B=0;B<=10;B++){D.push([B,actuate.util.Utility.getLocalizedString("numberFormattingDialog.option."+B)]);}this.decimalPlacesInput.setStore(D);var C=this.negativeNumberInputDiv.getElementsByTagName("div");var F=[];for(var B=0;B<C.length;B++){F.push([C[B].getAttribute("value"),C[B].getAttribute("text")]);}this.negativeNumberInputDiv.innerHTML="";this.negativeNumberInput=new actuate.uiadapter.ComboBox({editable:false,width:200,store:F});this.negativeNumberInput.render(this.negativeNumberInputDiv);this.__local_installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<TABLE style="margin-top:1ex;" WIDTH="100%">'+'	<TR CLASS="helpHeader"> '+"		<TD>{0}</TD>"+"		<TD>{1}</TD>"+"		<TD>{2}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{3}</TD>"+"		<TD>{4}</TD>"+"		<TD>{5}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{6}</TD>"+"		<TD>{7}</TD>"+"		<TD>{8}</TD>"+"	</TR>"+"	<TR>"+"		<TD>{9}</TD>"+"		<TD>{10}</TD>"+"		<TD>{11}"+"	</TR>"+"	<TR>"+"		<TD>{12}</TD>"+"		<TD>{13}</TD>"+"		<TD>{14}</TD>"+"	</TR>"+"</TABLE>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.prefix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.postfix"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.separator"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpFormat.decimalPlaces"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpCode.decimalPlaces"),actuate.util.Utility.getLocalizedString("numberFormattingDialog.helpResult.decimalPlaces")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},__local_installEventHandlers:function(B){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);var A=actuate.Method.bindAsEventListener(this.__neh_keyup,this);actuate.util.Event.observe(this.symbol,"keyup",A,false);actuate.util.Event.observe(this.symbolPosition,"keyup",A,false);actuate.util.Event.observe(this.negativeNumber,"keyup",A,false);},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(0)){this.showUnformatted();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(1)){this.showGeneralNumber();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(2)){if(this.__dataFormat&&this.localeMenu&&this.localeMenu.getValue()){this.__dataFormat.symbol=actuate.dialog.locales[this.localeMenu.getValue()].symbol;this.__dataFormat.useSeparator=true;}this.showCurrency();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(3)){this.showFixed();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(4)){this.showPercent();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(5)){this.showScientific();}else{if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(6)){this.showCustom();}}}}}}}this.adjustSize();},hideAll:function(){this.symbol.style.display="none";this.symbolPosition.style.display="none";this.decimalPlaces.style.display="none";this.useSeparator.style.display="none";this.negativeNumber.style.display="none";this.useSeparatorInput.setValue(false);this.customPattern.style.display="none";this.customCode.style.display="none";this.locale.style.display="none";this.adjustSize();},showCurrency:function(){this.hideAll();this.symbol.style.display="block";this.symbolPosition.style.display="block";this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.symbolPositionInput.setSelectedIndex(0);this.useSeparatorInput.setValue(true);this._refreshCurrencyFormat();},showFixed:function(){this.hideAll();this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.useSeparatorInput.setValue(true);this._refreshCurrencyFormat();},showPercent:function(){this.hideAll();this.symbolPosition.style.display="block";this.decimalPlaces.style.display="block";this.useSeparator.style.display="block";this.negativeNumber.style.display="block";this.symbolPositionInput.setSelectedIndex(1);this.useSeparatorInput.setValue(true);},showScientific:function(){this.hideAll();this.decimalPlaces.style.display="block";},showUnformatted:function(){this.hideAll();},showGeneralNumber:function(){this.hideAll();},showCustom:function(){this.hideAll();this.customPattern.style.display="block";this.customCode.style.display="block";if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this._refreshCurrencyFormat();},_localBind:function(F){if(!F){return ;}this._showLocale=F.showLocale;this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));this.showUnformatted();this.useSeparatorInput.setValue(false);this.negativeNumberInput.setSelectedIndex(0);this.decimalPlacesInput.setSelectedIndex(0);this.symbolPositionInput.setSelectedIndex(0);if(!F.targetMd){this.__resultSetName=F.selectedBinding?F.selectedBinding.name:null;this.__resultSetDataType=F.selectedBinding?F.selectedBinding.dataType:null;this.__dataFormat=F.selectedElement?F.selectedElement.dataFormat:null;}else{this.__resultSetName=F.targetMd.binding.name;this.__resultSetDataType=F.targetMd.binding.dataType;this.__dataFormat=F.targetMd.dataFormat;}if(F.total){this.total=F.total;this.targetMd=F.targetMd;}else{delete this.total;this.targetMd;}var C=actuate.dialog.locales;if(C&&this.localeMenu.getLength()<1){this.localeMenu.setStore(actuate.util.Utility.getLocaleStore());}var G=0;if(C&&this.__dataFormat&&this.__dataFormat.locale){var H=this.__dataFormat.locale;for(var J in C){if(C[J].country==H.country&&C[J].language==H.language){G=J;break;}}}this.localeMenu.setSelectedIndex(G);var A=actuate.dialog.locales[G];var I=this.__dataFormat;if(!I){return ;}var B=I.category;if(!B){I=I.NumberFormat?I.NumberFormat.numberCategoryChoice:I;if(I&&I.categoryChoice){B=I.categoryChoice.category;}}if(B==this.categoryMenu.getValueAt(0)){return ;}if(B==this.categoryMenu.getValueAt(2)){this.showCurrency();}else{if(B==this.categoryMenu.getValueAt(3)){this.showFixed();}else{if(B==this.categoryMenu.getValueAt(4)){this.showPercent();}else{if(B==this.categoryMenu.getValueAt(5)){this.showScientific();}else{if(B==this.categoryMenu.getValueAt(6)){this.showCustom();}}}}}this.categoryMenu.setValue(B);var E=I.pattern;this.customPatternInput.setValue(E==null?"":E);var K=I.decimalPlaces;if(K!=null){this.decimalPlacesInput.setValue(K);}if(I.symbolPosition||I.symbolPosition==0){this.symbolPositionInput.setValue(I.symbolPosition?"after":"before");}var D=I.negativeNumberFormat;if(D!=null){this.negativeNumberInput.setValue(D);}this.useSeparatorInput.setValue(I.useSeparator);this.adjustSize();},getFormatDetailText:function(A){if(A&&A.childNodes[0]&&A.childNodes[0].childNodes[0]){return A.childNodes[0].childNodes[0].data;}return null;},_preHide:function(){this.hideAll();},__getHelpTopic:function(){return"iv_number_formatting";},createJsonNode:function(){var D={};var G={};var A={};var C={};A.category=this.categoryMenu.getValue();A.pattern=this.customPatternInput.getValue();var F=actuate.dialog.locales[this.localeMenu.getValue()];if(F&&F.country&&F.language){A.localeInfo=F;}A.pattern=this.customPatternInput.getValue();C.categoryChoice=A;C.decimalPlaces=this.decimalPlacesInput.getValue();C.symbol=this.symbolInput.getValue()||"";var E="";if(this.__dataFormat){E=this.__dataFormat.roundingMode||"";}C.roundingMode=E;C.symbolPosition=this.symbolPositionInput.getValue();C.negativeNumberFormat=this.negativeNumberInput.getValue();C.useSepartor=this.useSeparatorInput.getValue()?"true":"false";var B=this.__resultSetDataType?this.__resultSetDataType:"";if("decimal"==this.__resultSetDataType){B="Decimal";}else{if("float"==this.__resultSetDataType){B="Float";}else{if("integer"==this.__resultSetDataType){B="Integer";}}}D.resultSetDataType=B;if(this.__resultSetName||this.__resultSetName==""){D.resultSetName=this.__resultSetName;}G.numberCategoryChoice=C;D[actuate.Constant.tag.NumberFormat]=G;return{dataFormat:D};},createSoapNode:function(){var W=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var K=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NumberFormat);W.documentElement.appendChild(K);var E=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NumberCategoryChoice);K.appendChild(E);var J=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.CATEGORYCHOICE);E.appendChild(J);var C=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.CATEGORY);J.appendChild(C);var M=W.createTextNode(this.categoryMenu.getValue());C.appendChild(M);var V=actuate.dialog.locales[this.localeMenu.getValue()];if(V&&V.country&&V.language){var Q=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.LOCALEINFO);var S=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.COUNTRY);var T=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.LANGUAGE);S.appendChild(W.createTextNode(V.country));T.appendChild(W.createTextNode(V.language));Q.appendChild(S);Q.appendChild(T);J.appendChild(Q);}var L=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.DecimalPlaces);E.appendChild(L);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);L.appendChild(H);var M=W.createTextNode(this.decimalPlacesInput.getValue());H.appendChild(M);var Y=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Symbol);E.appendChild(Y);var U=this.symbolInput.getValue();var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);Y.appendChild(H);var M=W.createTextNode(U||"");H.appendChild(M);var G=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.RoundingMode);E.appendChild(G);var D="";if(this.__dataFormat){D=this.__dataFormat.roundingMode||"";}var M=W.createTextNode(D);G.appendChild(M);var I=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.SymbolPosition);E.appendChild(I);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);I.appendChild(H);var M=W.createTextNode(this.symbolPositionInput.getValue());H.appendChild(M);var P=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.NegativeNumberFormat);E.appendChild(P);var H=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.Value);P.appendChild(H);var M=W.createTextNode(this.negativeNumberInput.getValue());H.appendChild(M);var A=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.UseSepartor);E.appendChild(A);if(this.useSeparatorInput.getValue()){var M=W.createTextNode("true");}else{var M=W.createTextNode("false");}A.appendChild(M);var B=actuate.util.XmlDom.createElement(W,actuate.Constant.tag.PATTERN);J.appendChild(B);var M=W.createTextNode(this.customPatternInput.getValue());B.appendChild(M);var O=actuate.util.XmlDom.createElement(W,"ResultSetDataType");W.documentElement.appendChild(O);var N=this.__resultSetDataType?this.__resultSetDataType:"";if("decimal"==this.__resultSetDataType){N="Decimal";}else{if("float"==this.__resultSetDataType){N="Float";}else{if("integer"==this.__resultSetDataType){N="Integer";}}}var R=W.createTextNode(N);O.appendChild(R);if(this.__resultSetName||this.__resultSetName==""){var F=actuate.util.XmlDom.createElement(W,"ResultSetName");W.documentElement.appendChild(F);var X=W.createTextNode(this.__resultSetName);F.appendChild(X);}return W.documentElement;},_refreshCurrencyFormat:function(){var C=actuate.dialog.currencySymbols;var B=[];for(var D in C){B.push([C[D],C[D]]);}this.symbolInput.setStore(B);var A;var F;if(this.__dataFormat){A=this.__dataFormat.symbol;F=this.__dataFormat.useSeparator?true:false;}this.symbolInput.setValue(A?A:"");this.useSeparatorInput.setValue(F?true:false);var E;if(this.__dataFormat&&this.__dataFormat.decimalPlaces){E=this.__dataFormat.decimalPlaces;}else{if(this.localeMenu&&this.localeMenu.getValue()){E=actuate.dialog.locales[this.localeMenu.getValue()].decimalPlaces;}}if(E&&this.decimalPlacesInput.containsKey(E)){this.decimalPlacesInput.setValue(E);}else{this.decimalPlacesInput.setValue(this.decimalPlacesInput.getValueAt(0));}},noComma:""});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.DateFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.DateFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.DateFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.DateFormattingDialog",_height:256,_width:396,_htmlElements:{"_category":null,"_locale":null,"_customeCode":null,"_customePattern":null,"_customPatternInput":null,"_localeDIV":null,"_helpFormat.dayDateYear":null,"_helpCode.dayDateYear":null,"_helpResult.dayDateYear":null,"_customePatternHelp":null},__resultSetName:null,__formatPattern:"",__dataFormat:null,_showLocale:false,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.AbstractIVDialog.prototype.initialize.call(this,A);this._initTemplates();this.categoryMenuDiv=document.getElementById(this._htmlElements["_category"]);this.localeMenuDiv=document.getElementById(this._htmlElements["_locale"]);this.locale=document.getElementById(this._htmlElements["_localeDIV"]);this.customCode=document.getElementById(this._htmlElements["_customeCode"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200});this.categoryMenu.render(this.categoryMenuDiv);this.localeMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,valueField:"value",displayField:"text"});this.localeMenu.render(this.localeMenuDiv);this.__local_installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<TABLE style="margin-top:1ex;" WIDTH="100%">'+'	<TR CLASS="helpHeader"> '+"		<TD>{0}</TD>"+'		<td style="width:4px"/>'+"		<TD>{1}</TD>"+'		<td style="width:4px"/>'+"		<TD>{2}</TD>"+"	</TR>"+"	<TR>"+'		<TD><DIV id="actuate_dialog_format_DateFormattingDialog_helpFormat.dayDateYear"></DIV></TD>'+'		<td style="width:4px"/>'+'		<TD><DIV id="actuate_dialog_format_DateFormattingDialog_helpCode.dayDateYear"></DIV></TD>'+'		<td style="width:4px"/>'+'		<td><DIV id="actuate_dialog_format_DateFormattingDialog_helpResult.dayDateYear"></DIV></td>'+"	</TR>"+"</TABLE>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},__local_installEventHandlers:function(A){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.__neh_localeMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_localeMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);this.localeMenu.registerEventHandler("select",this.__neh_localeMenuChange_c);},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}else{this.hideCustom();}},__neh_localeMenuChange:function(D){var A=actuate.dialog.locales[this.localeMenu.getValue()];var B=A.categorys;var C=A.helpValues;this.__dataFormat=null;if(!B||!C){this._requestDateTimeFormats(A.country,A.language);return ;}this._refreshCategorysAndHelpValues(B,C);this.adjustSize();},hideCustom:function(){this.customCode.style.display="none";this.customPattern.style.display="none";this.adjustSize();},showCustom:function(){this.customCode.style.display="block";this.customPattern.style.display="block";this.adjustSize();},_propagateCategory:function(C){if(C){if(C.language==null){C.language="";}if(C.country==null){C.country="";}var A=actuate.dialog.locales;if(A){for(var B in A){if(A[B].language==null){A[B].language="";}if(A[B].country==null){A[B].country="";}if(C.language==A[B].language&&C.country==A[B].country){A[B].categorys=C.categorys;A[B].helpValues=C.helpValues;break;}}}this._refreshCategorysAndHelpValues(C.categorys,C.helpValues);this.adjustSize();}},_localBind:function(D){if(!D){return true;}if(D.categorys){this._propagateCategory(D);return ;}this._showLocale=D.showLocale;if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.hideCustom();this.customPatternInput.setValue("");this.categoryMenu.clear();if(!D){return ;}var G;if(!D.targetMd){this.__resultSetName=D.selectedBinding?D.selectedBinding.name:null;this.__dataFormat=D.selectedElement?D.selectedElement.dataFormat:null;}else{this.__resultSetName=D.targetMd.binding.name;this.__dataFormat=D.targetMd.dataFormat;}if(D.total){this.total=D.total;this.targetMd=D.targetMd;}else{delete this.total;this.targetMd;}var C=actuate.dialog.locales;if(C&&this.localeMenu.getLength()<1){this.localeMenu.setStore(actuate.util.Utility.getLocaleStore());}var E=0;if(C&&this.__dataFormat&&this.__dataFormat.locale){var F=this.__dataFormat.locale;for(var I in C){if(C[I].country==F.country&&C[I].language==F.language){E=I;break;}}}this.localeMenu.setSelectedIndex(E);var B=actuate.dialog.locales[E];var H=B.helpValues;var A=B.categorys;if(!A||!H){this._requestDateTimeFormats(B.country,B.language);return ;}this._refreshCategorysAndHelpValues(A,H);},_okPress:function(){var A=this.customPatternInput.getValue();if(!A){A=this.__formatPattern;}if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(A,actuate.Constant.DataType.DATE)){actuate.dialog.impl.helper.format.DateFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));}else{actuate.dialog.impl.helper.format.DateFormattingDialog.superclass._okPress.call(this);}},__getHelpTopic:function(){return"iv_datetime_formatting";},createJsonNode:function(){var B={};var E={};var A={};A.category=this.categoryMenu.getValue();var C=actuate.dialog.locales[this.localeMenu.getValue()];if(C&&C.country&&C.language){A.localeInfo=C;}var D=this.customPatternInput.getValue();if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(D,actuate.Constant.DataType.DATE)){actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));return false;}if(D){A.pattern=D;}B.resultSetDataType="Date";if(this.__resultSetName||this.__resultSetName==""){B.resultSetName=this.__resultSetName;}E.categoryChoice=A;B[actuate.Constant.tag.DATETIMEFORMAT]=E;return{dataFormat:B};},createSoapNode:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var K=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.DATETIMEFORMAT);A.documentElement.appendChild(K);var C=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);K.appendChild(C);var I=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);C.appendChild(I);var F=A.createTextNode(this.categoryMenu.getValue());I.appendChild(F);var D=actuate.dialog.locales[this.localeMenu.getValue()];if(D&&D.country&&D.language){var E=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LOCALEINFO);var L=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.COUNTRY);var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LANGUAGE);L.appendChild(A.createTextNode(D.country));B.appendChild(A.createTextNode(D.language));E.appendChild(L);E.appendChild(B);C.appendChild(E);}var M=this.customPatternInput.getValue();if(M){var O=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);C.appendChild(O);var F=A.createTextNode(M);O.appendChild(F);}var H=actuate.util.XmlDom.createElement(A,"ResultSetDataType");A.documentElement.appendChild(H);var N=A.createTextNode("Date");H.appendChild(N);if(this.__resultSetName||this.__resultSetName==""){var G=actuate.util.XmlDom.createElement(A,"ResultSetName");A.documentElement.appendChild(G);var J=A.createTextNode(this.__resultSetName);G.appendChild(J);}return A.documentElement;},_requestDateTimeFormats:function(D,F){var A={name:"country",value:D};var E={name:"language",value:F};var C={name:"target",value:this._classname};var B=[A,E,C];if(this._callbacks&&this._callbacks.changeLocaleCallback){this._callbacks.changeLocaleCallback(B);}else{if(this._helpee){this._helpee.fireEvent(actuate.dialog.EventConstants.ON_DIALOG_CHANGE_LOCALE,B);}}},_refreshCategorysAndHelpValues:function(C,F){var D=this.categoryMenu.getValue();if(this.__dataFormat){D=this.__dataFormat.category;}var E=[];if(C){E.push(["Unformatted",C.unformatted]);E.push(["Long Date",C.longDate]);E.push(["Medium Date",C.mediumDate]);E.push(["Short Date",C.shortDate]);E.push(["Custom",C.custom]);}this.categoryMenu.setStore(E);if(D&&this.categoryMenu.containsKey(D)){this.categoryMenu.setValue(D);if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}}else{this.categoryMenu.setSelectedIndex(0);}this._updateNode("helpFormat",F.helpFormat);this._updateNode("helpCode",F.helpCode);this._updateNode("helpResult",F.helpResult);if(this.__dataFormat){var B=this.__dataFormat.pattern;var A=this.__dataFormat.locale;var G=null;if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.customPatternInput.setValue(B==null?"":B);}else{B="";}this.__formatPattern=B==null?"":B;}this.__neh_categoryMenuChange();},_updateNode:function(C,B){var A=document.getElementById(this._htmlElements["_"+C+".dayDateYear"]);actuate.util.XmlDom.setTextContent(A,B.dayDateYear);}});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.TimeFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.TimeFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.TimeFormattingDialog",_width:396,_htmlElements:{"_category":null,"_locale":null,"_customeCode":null,"_customePattern":null,"_customPatternInput":null,"_localeDIV":null,"_helpFormat.time":null,"_helpFormat.timeWithText":null,"_helpCode.time":null,"_helpCode.timeWithText":null,"_helpResult.time":null,"_helpResult.timeWithText":null,"_customePatternHelp":null},_resultSetName:null,_formatPattern:"",__dataFormat:null,_showLocale:false,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass.initialize.call(this,A);this._initTemplates();this.customCode=document.getElementById(this._htmlElements["_customeCode"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200});this.categoryMenu.render(this._htmlElements["_category"]);this.localeMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,valueField:"value",displayField:"text"});this.localeMenu.render(this._htmlElements["_locale"]);this.locale=document.getElementById(this._htmlElements["_localeDIV"]);this._installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<table style="margin-top:1ex;" WIDTH="100%">'+'	<tr CLASS="helpHeader"> '+"		<TD>{0}</TD>"+'		<td style="width:4px"/>'+"		<TD>{1}</TD>"+'		<td style="width:4px"/>'+"		<TD>{2}</TD>"+"	</tr>"+"	<tr>"+'		<TD><DIV id="actuate_dialog_format_TimeFormattingDialog_helpFormat.time"></TD>'+'		<td style="width:4px"/>'+'		<TD><DIV id="actuate_dialog_format_TimeFormattingDialog_helpCode.time"></TD>'+'		<td style="width:4px"/>'+'		<td><DIV id="actuate_dialog_format_TimeFormattingDialog_helpResult.time"></DIV></td>'+"	</tr>"+"	<tr>"+'		<TD><DIV id="actuate_dialog_format_TimeFormattingDialog_helpFormat.timeWithText"></DIV></TD>'+'		<td style="width:4px"/>'+'		<TD><DIV id="actuate_dialog_format_TimeFormattingDialog_helpCode.timeWithText"></DIV></TD>'+'		<td style="width:4px"/>'+'		<td><DIV id="actuate_dialog_format_TimeFormattingDialog_helpResult.timeWithText"></DIV></td>'+"	</tr>"+"</table>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},_installEventHandlers:function(A){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.__neh_localeMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_localeMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);this.localeMenu.registerEventHandler("select",this.__neh_localeMenuChange_c);},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}else{this.hideCustom();}},__neh_localeMenuChange:function(D){var A=actuate.dialog.locales[this.localeMenu.getValue()];var B=A.categorys;var C=A.helpValues;if(!B||!C){this._requestDateTimeFormats(A.country,A.language);return ;}this._refreshCategorysAndHelpValues(B,C);this.adjustSize();},hideCustom:function(){this.customCode.style.display="none";this.customPattern.style.display="none";this.adjustSize();},showCustom:function(){this.customCode.style.display="block";this.customPattern.style.display="block";this.adjustSize();},_propagateCategory:function(C){if(!C){return ;}else{if(C.language==null){C.language="";}if(C.country==null){C.country="";}}var A=actuate.dialog.locales;if(A){for(var B in A){if(A[B].language==null){A[B].language="";}if(A[B].country==null){A[B].country="";}if(C.language==A[B].language&&C.country==A[B].country){A[B].categorys=C.categorys;A[B].helpValues=C.helpValues;break;}}}this._refreshCategorysAndHelpValues(C.categorys,C.helpValues);return ;},_localBind:function(F){if(!F){return true;}if(F.categorys){this._propagateCategory(F);return ;}this._showLocale=F.showLocale;if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.hideCustom();this.customPatternInput.setValue("");this.categoryMenu.clear();if(!F){return ;}if(!F.targetMd){this._resultSetName=F.selectedBinding?F.selectedBinding.name:null;this.__dataFormat=F.selectedElement?F.selectedElement.dataFormat:null;}else{this._resultSetName=F.targetMd.binding.name;this.__dataFormat=F.targetMd.dataFormat;}if(F.total){this.total=F.total;this.targetMd=F.targetMd;}else{delete this.total;this.targetMd;}var B=actuate.dialog.locales;if(B&&this.localeMenu.getLength()<1){this.localeMenu.setStore(actuate.util.Utility.getLocaleStore());}var H=0;if(B&&this.__dataFormat&&this.__dataFormat.locale){var A=this.__dataFormat.locale;for(var D in B){if(B[D].country==A.country&&B[D].language==A.language){H=D;break;}}}this.localeMenu.setSelectedIndex(H);var G=actuate.dialog.locales[H];var E=G.helpValues;var C=G.categorys;if(!C||!E){this._requestDateTimeFormats(G.country,G.language);return ;}this._refreshCategorysAndHelpValues(C,E);},__getHelpTopic:function(){return"iv_datetime_formatting";},createJsonNode:function(){var B={};var E={};var A={};if(this.__resultSetName||this.__resultSetName==""){E.resultSetName=this.__resultSetName;}A.category=this.categoryMenu.getValue();var C=actuate.dialog.locales[this.localeMenu.getValue()];if(C&&C.country&&C.language){A.localeInfo=C;}var D=this.customPatternInput.getValue();if(!D){D=this._formatPattern;}if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(D,actuate.Constant.DataType.TIME)){actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));return false;}if(D){A.pattern=D;}B.resultSetDataType="Time";if(this._resultSetName){E.resultSetName=this.__resultSetName;}E.categoryChoice=A;B[actuate.Constant.tag.DATETIMEFORMAT]=E;return{dataFormat:B};},createSoapNode:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var K=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.DATETIMEFORMAT);A.documentElement.appendChild(K);var C=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);K.appendChild(C);var I=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);C.appendChild(I);var F=A.createTextNode(this.categoryMenu.getValue());I.appendChild(F);var D=actuate.dialog.locales[this.localeMenu.getValue()];if(D&&D.country&&D.language){var E=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LOCALEINFO);var L=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.COUNTRY);var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LANGUAGE);L.appendChild(A.createTextNode(D.country));B.appendChild(A.createTextNode(D.language));E.appendChild(L);E.appendChild(B);C.appendChild(E);}var M=this.customPatternInput.getValue();if(!M){M=this._formatPattern;}if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(M,actuate.Constant.DataType.TIME)){actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));return false;}if(M){var O=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);C.appendChild(O);var F=A.createTextNode(M);O.appendChild(F);}var H=actuate.util.XmlDom.createElement(A,"ResultSetDataType");A.documentElement.appendChild(H);var N=A.createTextNode("Time");H.appendChild(N);if(this._resultSetName){var G=actuate.util.XmlDom.createElement(A,"ResultSetName");A.documentElement.appendChild(G);var J=A.createTextNode(this._resultSetName);G.appendChild(J);}return A.documentElement;},_requestDateTimeFormats:function(D,F){var A={name:"country",value:D};var E={name:"language",value:F};var C={name:"target",value:this._classname};var B=[A,E,C];if(this._callbacks&&this._callbacks.changeLocaleCallback){this._callbacks.changeLocaleCallback(B);}else{if(this._helpee){this._helpee.fireEvent(actuate.dialog.EventConstants.ON_DIALOG_CHANGE_LOCALE,B);}}},_refreshCategorysAndHelpValues:function(C,E){var D=this.categoryMenu.getValue();if(this.__dataFormat){D=this.__dataFormat.category;}if(C){this.categoryMenu.setStore([["Unformatted",C.unformatted],["Long Time",C.longTime],["Medium Time",C.mediumTime],["Short Time",C.shortTime],["Custom",C.custom]]);if(D&&this.categoryMenu.containsKey(D)){this.categoryMenu.setValue(D);if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}}else{this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));}}this._updateNode("helpFormat",E.helpFormat);this._updateNode("helpCode",E.helpCode);this._updateNode("helpResult",E.helpResult);if(this.__dataFormat){var B=this.__dataFormat.pattern;var A=this.__dataFormat.locale;var F=null;if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.customPatternInput.setValue(B==null?"":B);}else{B="";}this.__formatPattern=B==null?"":B;}this.__neh_categoryMenuChange();},_updateNode:function(B,A){var D=document.getElementById(this._htmlElements["_"+B+".time"]);var C=document.getElementById(this._htmlElements["_"+B+".timeWithText"]);actuate.util.XmlDom.setTextContent(D,A.time);actuate.util.XmlDom.setTextContent(C,A.timeWithText);}});actuate.util.Package.define("actuate.dialog.impl.helper.format");actuate.dialog.impl.helper.format.DateTimeFormattingDialog=actuate.Class.create();actuate.dialog.impl.helper.format.DateTimeFormattingDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.format.DateTimeFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.format.DateTimeFormattingDialog",_height:107,_width:410,_htmlElements:{"_category":null,"_locale":null,"_customeCode":null,"_customePattern":null,"_customPatternInput":null,"_localeDIV":null,"_helpFormat.dayDateYear":null,"_helpFormat.time":null,"_helpFormat.dateTimeTimeZone":null,"_helpFormat.timeWithText":null,"_helpCode.dayDateYear":null,"_helpCode.time":null,"_helpCode.dateTimeTimeZone":null,"_helpCode.timeWithText":null,"_helpResult.dayDateYear":null,"_helpResult.time":null,"_helpResult.dateTimeTimeZone":null,"_helpResult.timeWithText":null,"_customePatternHelp":null},__resultSetName:null,__formatPattern:"",__dataFormat:null,_showLocale:false,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.dialog.impl.helper.format.DateTimeFormattingDialog.superclass.initialize.call(this,A);this._initTemplates();this.categoryMenuDiv=document.getElementById(this._htmlElements["_category"]);this.localeMenuDiv=document.getElementById(this._htmlElements["_locale"]);this.locale=document.getElementById(this._htmlElements["_localeDIV"]);this.customCode=document.getElementById(this._htmlElements["_customeCode"]);this.customPattern=document.getElementById(this._htmlElements["_customePattern"]);this.customPatternInput=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"customPattern",width:200});this.customPatternInput.render(this._htmlElements["_customPatternInput"]);this.categoryMenu=new actuate.uiadapter.ComboBox({editable:false,width:200});this.categoryMenu.render(this.categoryMenuDiv);this.localeMenu=new actuate.uiadapter.ComboBox({editable:false,width:200,valueField:"value",displayField:"text"});this.localeMenu.render(this.localeMenuDiv);this.__local_installEventHandlers(A);},_initTemplates:function(){var E=document.createElement("div");var A=new actuate.uiadapter.Template('<TABLE style="margin-top:1ex;" WIDTH="100%">'+'	<TR CLASS="helpHeader"> '+"		<TD>{0}</TD>"+'		<td style="width:10px"/>'+"		<TD>{1}</TD>"+'		<td style="width:10px"/>'+"		<TD>{2}</TD>"+"	</TR>"+'	<TR style="height:3px;"></TR>'+"	<TR>"+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpFormat.dayDateYear"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpCode.dayDateYear"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpResult.dayDateYear"></DIV></TD>'+"	</TR>"+'	<TR style="height:3px;"></TR>'+"	<TR>"+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpFormat.time"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpCode.time"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpResult.time"></DIV></TD>'+"	</TR>"+'	<TR style="height:3px;"></TR>'+"	<TR>"+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpFormat.dateTimeTimeZone"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpCode.dateTimeTimeZone"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpResult.dateTimeTimeZone"></DIV></TD>'+"	</TR>"+'	<TR style="height:3px;"></TR>'+"	<TR>"+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpFormat.timeWithText"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpCode.timeWithText"></TD>'+'		<td style="width:10px"/>'+'		<TD><DIV id="actuate_dialog_format_DateTimeFormattingDialog_helpResult.timeWithText"></DIV></TD>'+"	</TR>"+"</TABLE>");var D=[actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.format"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.code"),actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.result")];var C=A._append(E,D,true);var B=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("formattingDialog.helpHeader.codeExamples"),autoHeight:true,defaultType:"textfield",bodyStyle:"padding:0px 0px 0",contentEl:E});B.render(this._htmlElements["_customePatternHelp"]);},__local_installEventHandlers:function(A){this.__neh_categoryMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_categoryMenuChange,this);this.__neh_localeMenuChange_c=actuate.Method.bindAsEventListener(this.__neh_localeMenuChange,this);this.categoryMenu.registerEventHandler("select",this.__neh_categoryMenuChange_c);this.localeMenu.registerEventHandler("select",this.__neh_localeMenuChange_c);},__neh_categoryMenuChange:function(A){if(this.categoryMenu.getValue()==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}else{this.hideCustom();}},__neh_localeMenuChange:function(D){var A=actuate.dialog.locales[this.localeMenu.getValue()];var B=A.categorys;var C=A.helpValues;this.__dataFormat=null;if(!B||!C){this._requestDateTimeFormats(A.country,A.language);return ;}this._refreshCategorysAndHelpValues(B,C);this.adjustSize();},hideCustom:function(){this.customCode.style.display="none";this.customPattern.style.display="none";this.adjustSize();},showCustom:function(){this.customCode.style.display="block";this.customPattern.style.display="block";this.adjustSize();},_propagateCategory:function(C){if(!C){return ;}else{if(C.language==null){C.language="";}if(C.country==null){C.country="";}}var A=actuate.dialog.locales;if(A){for(var B in A){if(A[B].language==null){A[B].language="";}if(A[B].country==null){A[B].country="";}if(C.language==A[B].language&&C.country==A[B].country){A[B].categorys=C.categorys;A[B].helpValues=C.helpValues;break;}}}this._refreshCategorysAndHelpValues(C.categorys,C.helpValues);this.adjustSize();return ;},_localBind:function(D){if(!D){return true;}if(D.categorys){this._propagateCategory(D);return ;}this._showLocale=D.showLocale;if(this._showLocale){this.locale.style.display="block";}else{this.locale.style.display="none";}this.hideCustom();this.customPatternInput.setValue("");if(!D){return ;}var G;if(!D.targetMd){this.__resultSetName=D.selectedBinding?D.selectedBinding.name:null;this.__dataFormat=D.selectedElement?D.selectedElement.dataFormat:null;}else{this.__resultSetName=D.targetMd.binding.name;this.__dataFormat=D.targetMd.dataFormat;}if(D.total){this.total=D.total;this.targetMd=D.targetMd;}else{delete this.total;this.targetMd;}var C=actuate.dialog.locales;if(C&&this.localeMenu.getLength()<1){this.localeMenu.setStore(actuate.util.Utility.getLocaleStore());}var E=0;if(C&&this.__dataFormat&&this.__dataFormat.locale){var F=this.__dataFormat.locale;for(var I in C){if(C[I].country==F.country&&C[I].language==F.language){E=I;break;}}}this.localeMenu.setSelectedIndex(E);var B=actuate.dialog.locales[E];var H=B.helpValues;var A=B.categorys;if(!A||!H){this._requestDateTimeFormats(B.country,B.language);return ;}this._refreshCategorysAndHelpValues(A,H);},_okPress:function(){var A=this.customPatternInput.getValue();if(!A){A=this.__formatPattern;}if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(A,actuate.Constant.DataType.DATETIME)){actuate.dialog.impl.helper.format.DateTimeFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));}else{actuate.dialog.impl.helper.format.DateTimeFormattingDialog.superclass._okPress.call(this);}},__getHelpTopic:function(){return"iv_datetime_formatting";},createJsonNode:function(){var B={};var E={};var A={};A.category=this.categoryMenu.getValue();var C=actuate.dialog.locales[this.localeMenu.getValue()];if(C&&C.country&&C.language){A.localeInfo=C;}var D=this.customPatternInput.getValue();if(!D){D=this.__formatPattern;}if("Custom"==this.categoryMenu.getValue()&&!actuate.dialog.impl.Utility.validateCustomPatternInput(D,actuate.Constant.DataType.DATETIME)){actuate.dialog.impl.helper.format.TimeFormattingDialog.superclass.__showError.call(this,actuate.util.Utility.getLocalizedString("common.error.invalidCustomFormatPattern"));return false;}if(D){A.pattern=D;}B.resultSetDataType="Datetime";if(this.__resultSetName||this.__resultSetName==""){B.resultSetName=this.__resultSetName;}E.categoryChoice=A;B[actuate.Constant.tag.DATETIMEFORMAT]=E;return{dataFormat:B};},createSoapNode:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.ColumnDefFormat);var K=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.DATETIMEFORMAT);A.documentElement.appendChild(K);var C=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORYCHOICE);K.appendChild(C);var I=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.CATEGORY);C.appendChild(I);var F=A.createTextNode(this.categoryMenu.getValue());I.appendChild(F);var D=actuate.dialog.locales[this.localeMenu.getValue()];if(D&&D.country&&D.language){var E=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LOCALEINFO);var L=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.COUNTRY);var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.LANGUAGE);L.appendChild(A.createTextNode(D.country));B.appendChild(A.createTextNode(D.language));E.appendChild(L);E.appendChild(B);C.appendChild(E);}var M=this.customPatternInput.getValue();if(!M){M=this.__formatPattern;}if(M){var O=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.PATTERN);C.appendChild(O);var F=A.createTextNode(M);O.appendChild(F);}var H=actuate.util.XmlDom.createElement(A,"ResultSetDataType");A.documentElement.appendChild(H);var N=A.createTextNode("Datetime");H.appendChild(N);if(this.__resultSetName||this.__resultSetName==""){var G=actuate.util.XmlDom.createElement(A,"ResultSetName");A.documentElement.appendChild(G);var J=A.createTextNode(this.__resultSetName);G.appendChild(J);}return A.documentElement;},_requestDateTimeFormats:function(D,F){var A={name:"country",value:D};var E={name:"language",value:F};var C={name:"target",value:this._classname};var B=[A,E,C];if(this._callbacks&&this._callbacks.changeLocaleCallback){this._callbacks.changeLocaleCallback(B);}else{if(this._helpee){this._helpee.fireEvent(actuate.dialog.EventConstants.ON_DIALOG_CHANGE_LOCALE,B);}}},_refreshCategorysAndHelpValues:function(C,F){var D=this.categoryMenu.getValue();if(this.__dataFormat){D=this.__dataFormat.category;}if(C){var E=[["Unformatted",C.unformatted],["General Date",C.generalDate],["Long Date",C.longDate],["Medium Date",C.mediumDate],["Short Date",C.shortDate],["Long Time",C.longTime],["Medium Time",C.mediumTime],["Short Time",C.shortTime],["Custom",C.custom]];this.categoryMenu.setStore(E);if(D&&this.categoryMenu.containsKey(D)){this.categoryMenu.setValue(D);if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.showCustom();}}else{this.categoryMenu.setValue(this.categoryMenu.getValueAt(0));}}this._updateNode("helpFormat",F.helpFormat);this._updateNode("helpCode",F.helpCode);this._updateNode("helpResult",F.helpResult);if(this.__dataFormat){var B=this.__dataFormat.pattern;var A=this.__dataFormat.locale;var G=null;if(D==this.categoryMenu.getValueAt(this.categoryMenu.getLength()-1)){this.customPatternInput.setValue(B==null?"":B);}else{B="";}this.__formatPattern=B==null?"":B;}this.__neh_categoryMenuChange();},_updateNode:function(C,B){var A=document.getElementById(this._htmlElements["_"+C+".dayDateYear"]);var E=document.getElementById(this._htmlElements["_"+C+".time"]);var F=document.getElementById(this._htmlElements["_"+C+".dateTimeTimeZone"]);var D=document.getElementById(this._htmlElements["_"+C+".timeWithText"]);actuate.util.XmlDom.setTextContent(A,B.dayDateYear);actuate.util.XmlDom.setTextContent(E,B.time);actuate.util.XmlDom.setTextContent(F,B.dateTimeTimeZone);actuate.util.XmlDom.setTextContent(D,B.timeWithText);}});actuate.util.Package.define("actuate.dialog.impl.helper.hyperlinkBuilder");actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog=actuate.Class.create();actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.BaseDialog,{_width:560,docName:null,connectionHandle:null,_dialogName:"hyperlinkBuilderDialog",_height:300,hasFooter:true,_classname:"actuate.dialog.HyperlinkBuilderDialog",_nolinkRadio:null,_urlRadio:null,_bookmarkRadio:null,_drillThroughRadio:null,_urlBlock:null,_bookmarkBlock:null,_drillThroughBlock:null,_urlLocation:null,_urlTarget:null,_urlTooltip:null,_typeCode:null,_hyperlinkDefinition:null,_fileName:null,_repositoryType:null,_serverUrl:null,_volume:null,_locale:null,_hyperlinkCache:null,_moreBlock:null,urlLocationText:null,urlTooltipText:null,urlTargetValue:null,bookmarksTooltipText:null,drillThroughReportName:null,moreTargetValue:null,moreFormatValue:null,moreTooltipText:null,moreBookmarksText:null,bookmarksText:null,_isPickerSelect:false,_onDrillEdit:false,reportParameters:null,_parameterIndex:-1,_parameterStore:[],_Value_ColumnBinding_Prefix:"[",_Value_ColumnBinding_Suffix:"]",_QUOTE:'"',_isForChart:false,initialize:function(B,C){actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.initialize.call(this,B,this._width,false);var A=actuate.getDefaultRequestOptions();this._repositoryType=A.getRepositoryType();this._serverUrl=A.getIServerUrl();this._volume=A.getVolume();this._locale=A.getLocale();},__initComponents:function(){actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.__initComponents.apply(this,arguments);this.setTitle(actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.title"));this._initPanel();},__initListeners:function(){actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.__initListeners.apply(this,arguments);this._install_eventHandler();},_initPanel:function(){var G=[];var J=this;this._targetComboStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var A=new this._targetComboStore.recordType({value:"0",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.targetOptionText0")});this._targetComboStore.add(A);var A=new this._targetComboStore.recordType({value:"1",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.targetOptionText1")});this._targetComboStore.add(A);this._formatComboStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var F=new this._formatComboStore.recordType({value:"",text:""});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"afp",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.afpText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"xls",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.xlsText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"xlsx",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.xlsxText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"xhtml",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.xhtmlText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"pdf",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.pdfText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"postscript",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.postscriptText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"doc",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.docText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"docx",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.docxText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"html",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.htmlText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"ppt",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.pptText")});this._formatComboStore.add(F);var F=new this._formatComboStore.recordType({value:"pptx",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.pptxText")});this._formatComboStore.add(F);this._bookmarkComboStore=new actuate.widget.data.SimpleStore({fields:["value","text"],sortInfo:{field:"value",direction:"ASC"}});this._moreBookmarkComboStore=new actuate.widget.data.SimpleStore({fields:["value","text"],sortInfo:{field:"value",direction:"ASC"}});this._parametersGridStore=new actuate.widget.data.SimpleStore({fields:["parameterDisplayName","parameterName","parameterValue","edit"]});var I={header:false,collapsible:true,border:false,autoHeight:true,title:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.radioTitleText"),checkboxToggle:false,layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.radioTypeText"),columnWidth:0.26,style:"margin: 7px 5px 5px 16px"},{xtype:"panel",columnWidth:0.7,header:false,collapsible:true,border:false,autoHeight:true,layout:"column",items:[{id:"actuate_dialog_hyperlink_nolinkRadio",xtype:"radio",columnWidth:0.99,name:this._classname+"nolinkRadio",boxLabel:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.noLinkRadioText"),checked:false,style:"margin: 5px 5px 5px 0"},{id:"actuate_dialog_hyperlink_urlRadio",xtype:"radio",columnWidth:0.99,name:this._classname+"urlRadio",boxLabel:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.urlRadioText"),checked:true,style:"margin: 5px 5px 5px 0"},{id:"actuate_dialog_hyperlink_bookmarkRadio",xtype:"radio",columnWidth:0.99,name:this.__classname+"bookmarkRadio",boxLabel:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.bookmarkRadioText"),checked:false,style:"margin: 5px 5px 5px 0"},{id:"actuate_dialog_hyperlink_drillThroughRadio",xtype:"radio",columnWidth:0.99,name:this._classname+"drillThroughRadio",boxLabel:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.drillThroughRadioText"),checked:false,style:"margin: 5px 5px 5px 0"}]}]};var B={xtype:"fieldset",id:"actuate_dialog_hyperlink_urlBlock",header:false,border:false,autoHeight:true,layout:"form",items:[{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.urlLocationLable"),width:92,style:"margin-top:4px"},{id:"actuate_dialog_hyperlink_urlLocation",xtype:"textfield",width:300},{xtype:"button",style:"margin-left:5px",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltip:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltipType:"title",id:"actuate_dialog_hyperlink_ezscriptlauncher_type1"}]},{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.urlTargetLabel"),width:92,style:"margin-top:4px"},{id:"actuate_dialog_hyperlink_urlTarget",xtype:"combo",width:300,value:0,forceSelection:true,valueField:"value",editable:false,displayField:"text",store:this._targetComboStore,editable:false}]},{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{id:"actuate_dialog_hyperlink_urlTooltip_label",xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.urlTooltipLabel"),width:92,style:"margin-top:4px"},{id:"actuate_dialog_hyperlink_urlTooltip",xtype:"textfield",width:300}]}]};var C={xtype:"fieldset",id:"actuate_dialog_hyperlink_bookmarkBlock",header:false,border:false,autoHeight:true,layout:"form",items:[{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.reportBookmarkLabel"),width:92,style:"margin-top:4px"},{id:"actuate_dialog_hyperlink_reportBookmark",xtype:"combo",width:300,forceSelection:true,valueField:"value",displayField:"text",store:this._bookmarkComboStore,style:"cursor: pointer",showTooltip:true,editable:false},{xtype:"button",style:"margin-left:5px",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltip:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltipType:"title",id:"actuate_dialog_hyperlink_ezscriptlauncher_type2"}]},{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{id:"actuate_dialog_hyperlink_bookmarkTooltip_label",xtype:"label",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.bookmarkTooltipLabel"),width:92,style:"margin-top:4px"},{id:"actuate_dialog_hyperlink_bookmarkTooltip",xtype:"textfield",width:300}]}]};var L={xtype:"fieldset",id:"actuate_dialog_hyperlink_drillThroughBlock",header:false,border:false,autoHeight:true,layout:"column",checkboxToggle:false,items:[{xtype:"panel",columnWidth:0.99,header:false,border:false,autoHeight:true,layout:"column",items:[{xtype:"panel",columnWidth:0.99,header:false,border:false,style:"padding-bottom:10px",autoHeight:true,layout:"column",items:[{xtype:"label",columnWidth:0.26,text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.drillThroughReportLabelText")},{xtype:"textfield",columnWidth:0.7,fieldLabel:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.drillThroughReportFieldText"),readOnly:true,showTooltip:true,width:300,id:"actuate_dialog_hyperlink_report"},{xtype:"button",style:"margin-left:5px",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.browseBtn"),tooltip:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.browseBtn"),tooltipType:"title",id:"actuate_dialog_hyperlink_picker"}]},{xtype:"panel",columnWidth:0.99,header:false,border:false,id:"actuate_dialog_hyperlink_parameterList",style:"margin:0 0 10px 104px",autoHeight:true},{xtype:"label",style:"margin:0 0 10px 104px",id:"actuate_dialog_hyperlink_noParameter",columnWidth:0.99,text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.noParameterText")},{xtype:"label",style:"margin:0 0 10px 104px;color:red",id:"actuate_dialog_hyperlink_errorReport",columnWidth:0.99,text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.errorReport")}]},{xtype:"fieldset",columnWidth:1,header:false,collapsible:true,border:false,autoHeight:true,layout:"table",cls:"actuate-hyperlink-moreBlock",id:"actuate_hyperlink_moreBlock",layoutConfig:{columns:3,tableAttr:{style:"width: 100%"}},title:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.moreText"),style:"white-space:nowrap",listeners:{collapse:function(){J.adjustSize();},expand:function(){J.adjustSize();}},items:[{style:"width:94px",border:false,html:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.moreBookmarkText")},{id:"actuate_dialog_hyperlink_moreBookmark",xtype:"combo",store:this._moreBookmarkComboStore,valueField:"value",displayField:"text",editable:false,showTooltip:true,width:305},{xtype:"button",text:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltip:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.ezScriptBtn"),tooltipType:"title",id:"actuate_dialog_hyperlink_ezscriptlauncher_type3"},{border:false,html:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.moreTargetText")},{id:"actuate_dialog_hyperlink_moreTarget",xtype:"combo",width:305,value:0,forceSelection:true,valueField:"value",displayField:"text",store:this._targetComboStore,editable:false},{style:"width:0px",html:""},{border:false,html:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.moreFileFormatText")},{id:"actuate_dialog_hyperlink_moreFileformat",xtype:"combo",width:305,store:this._formatComboStore,forceSelection:true,valueField:"value",displayField:"text",editable:false},{style:"width:0px",html:""},{id:"actuate_dialog_hyperlink_moreTooltip_label",border:false,html:actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.moreTooltipText")},{id:"actuate_dialog_hyperlink_moreTooltip",xtype:"textfield",width:305},{style:"width:0px",html:""}]}]};G.push(I);G.push(B);G.push(C);G.push(L);this._panel=new actuate.widget.panel.Panel({renderTo:actuate.widget.DomHelper.append(this._instance,{"id":"actuate_hyperlinkDialog_id","cls":""},true),header:false,border:false,autoHeight:true,items:G});this._nolinkRadio=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_nolinkRadio");this._urlRadio=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlRadio");this._bookmarkRadio=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_bookmarkRadio");this._drillThroughRadio=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_drillThroughRadio");this._urlBlock=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlBlock");this._bookmarkBlock=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_bookmarkBlock");this._drillThroughBlock=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_drillThroughBlock");this._urlLocation=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlLocation");this._urlTarget=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlTarget");this._urlTooltip=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlTooltip");this._urlTooltip_label=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_urlTooltip_label");this._reportBookmarks=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_reportBookmark");this._bookmarkTooltip=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_bookmarkTooltip");this._bookmarkTooltip_label=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_bookmarkTooltip_label");this._userReport=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_report");this._parameterList=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_parameterList");this._noParameter=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_noParameter");this._errorReport=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_errorReport");this._moreBookmark=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_moreBookmark");this._moreTarget=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_moreTarget");this._moreFileformat=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_moreFileformat");this._moreTooltip=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_moreTooltip");this._moreTooltip_label=actuate.widget.ComponentMgr.get("actuate_dialog_hyperlink_moreTooltip_label");this._moreBlock=J._drillThroughBlock.items.items[1];this._moreBlock.header.first().applyStyles({"margin-left":"1px"});this._moreBlock.header.last().applyStyles({"margin-left":"1px"});this._moreBlock.header.applyStyles({"margin-bottom":"3px"});this._filepicker=document.getElementById("actuate_dialog_hyperlink_picker");this._type1_URL_ezscriptlauncher=document.getElementById("actuate_dialog_hyperlink_ezscriptlauncher_type1");this._type2_Bookmark_ezscriptlauncher=document.getElementById("actuate_dialog_hyperlink_ezscriptlauncher_type2");this._type3_Bookmark_ezscriptlauncher=document.getElementById("actuate_dialog_hyperlink_ezscriptlauncher_type3");var H=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.parameterNameText");var E=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.parameterValueText");var D=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.editValueText");var J=this;this._parametersGrid=new actuate.widget.grid.EditorGridPanel({renderTo:"actuate_dialog_hyperlink_parameterList",height:130,width:300,header:false,enableHdMenu:false,enableDragDrop:false,stripeRows:true,clicksToEdit:1,columns:[{header:H,dataIndex:"parameterDisplayName",width:120,sortable:true},{header:E,dataIndex:"parameterValue",editor:new actuate.widget.form.TextField({showTooltip:true}),width:120,sortable:true},{header:D,dataIndex:"edit",width:60,sortable:false}],listeners:{cellclick:function(N,O,M){if(M==2){J._sendEZScriptRequest(N,O,M);}}},viewConfig:{forceFit:true,showTooltip:true,scrollOffset:0},store:this._parametersGridStore});var K=this._parametersGrid.getView();if(K){K.focusCell=function(N,M){};}},_install_eventHandler:function(){this._nolinkRadio.registerEventHandler("check",actuate.Method.bind(this._nolinkUpdate,this),false);this._urlRadio.registerEventHandler("check",actuate.Method.bind(this._urlUpdate,this),false);this._bookmarkRadio.registerEventHandler("check",actuate.Method.bind(this._bookmarkUpdate,this),false);this._drillThroughRadio.registerEventHandler("check",actuate.Method.bind(this._drillThroughUpdate,this),false);actuate.util.Event.observe(this._filepicker,"click",actuate.Method.bind(this._launchPicker,this),false);actuate.util.Event.observe(this._type1_URL_ezscriptlauncher,"click",actuate.Method.bind(this._sendEZScriptRequest,this),false);actuate.util.Event.observe(this._type2_Bookmark_ezscriptlauncher,"click",actuate.Method.bind(this._sendEZScriptRequest,this),false);actuate.util.Event.observe(this._type3_Bookmark_ezscriptlauncher,"click",actuate.Method.bind(this._sendEZScriptRequest,this),false);},_nolinkUpdate:function(){this._reset();this._nolinkRadio.setValue(true,true);this._typeCode=0;this.adjustSize();},_urlUpdate:function(){this._reset();this._urlRadio.setValue(true,true);this._urlLocation.setValue(this.addQuoteToConstantEZScriptExpression(this.urlLocationText));this._urlTooltip.setValue(this.urlTooltipText?this.urlTooltipText:"");if(_isForChart){this._urlTooltip.hide();this._urlTooltip_label.hide();}else{this._urlTooltip.show();this._urlTooltip_label.show();}this.urlTargetValue?this._urlTarget.setValue(this.urlTargetValue):this._urlTarget.setSelectedIndex(0,true);this._urlBlock.show();this._typeCode=1;this.adjustSize();},_bookmarkUpdate:function(){this._reset();var A=this._hyperlinkCache;this._bookmarkRadio.setValue(true,true);if(this.bookmarksTooltipText){this._bookmarkTooltip.setValue(this.bookmarksTooltipText);}else{this._bookmarkTooltip.setValue();}if(_isForChart){this._bookmarkTooltip.hide();this._bookmarkTooltip_label.hide();}else{this._bookmarkTooltip.show();this._bookmarkTooltip_label.show();}this._typeCode=2;if(A===null||!A.reportBookmarks){var B={};var C;C=actuate.util.Json.makeMap({fileName:this.docName,connectionHandle:this.connectionHandle});B[actuate.dialog.impl.EventConstants.__E_GET_BOOKMARKS]=C;this.__sendJson(B,actuate.Method.bind(this.refresh,this));}else{this._bookmarkBlock.show();this.adjustSize();}},_drillThroughUpdate:function(){this._reset();this._drillThroughRadio.setValue(true,true);this._typeCode=3;this._userReport.setValue(this.drillThroughReportName);this.moreTargetValue?this._moreTarget.setValue(this.moreTargetValue):this._moreTarget.setSelectedIndex(0,true);this._moreFileformat.setValue(this.moreFormatValue?this.moreFormatValue:"");this._moreTooltip.setValue(this.moreTooltipText);if(_isForChart){this._moreTooltip.hide();this._moreTooltip_label.hide();}else{this._moreTooltip.show();this._moreTooltip_label.show();}this._moreBookmarkComboStore.removeAll();this._moreBookmark.setValue(this.moreBookmarksText?this.moreBookmarksText:"");this._updateDrillThroughData(this.drillThroughReportName);this._drillThroughBlock.show();this.adjustSize();},_updateDrillThroughData:function(C){if(C){this._moreBlock._expand();var A={};var B;B=actuate.util.Json.makeMap({fileName:this.drillThroughReportName,connectionHandle:this.connectionHandle});A[actuate.dialog.impl.EventConstants.__E_GET_PARAMETERS]=B;A[actuate.dialog.impl.EventConstants.__E_GET_BOOKMARKS]=B;this.__sendJson(A,actuate.Method.bind(this.refresh,this),actuate.Method.bind(this.errorCallback,this));}else{this._moreBlock._collapse();}},errorCallback:function(){this._parameterList.hide();this._noParameter.hide();this._errorReport.show();this._okBtn._onDisable();this.adjustSize();},_launchPicker:function(){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FILEPICKER_DIALOG"}],actuate.Method.bind(this._loadFilePicker,this));},_loadFilePicker:function(){var A=actuate.dialog.FilePickerDialog.getInstance();var C=actuate.Method.bind(this._filePickerCallback,this);var B="*.rptdesign,*.rptdocument,*.bizdesign,*.bizdocument";var D=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.filepicker.filterDescription");A.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,C);A.setFileFilters([{"filter":B,"description":D}]);A.setDialogType(A.OPEN_DIALOG);A.setHelpContext(this._helpContext);A.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.selectFileTitle"));A.show();},_filePickerCallback:function(B,A){this._fileName=A[0];this._userReport.setValue(this._fileName);this._loadParameters(this._fileName);},_loadParameters:function(A){this._parameterList.hide();this._noParameter.hide();this._errorReport.hide();this._moreTooltip.setValue();this._moreFileformat.setValue();this._isPickerSelect=true;this.drillThroughReportName=A;this._updateDrillThroughData(A);},_setReportDocument:function(A,B){this.docName=A;this.connectionHandle=B;},_reset:function(){this._nolinkRadio.setValue(false,true);this._urlRadio.setValue(false,true);this._bookmarkRadio.setValue(false,true);this._drillThroughRadio.setValue(false,true);this._urlBlock.hide();this._bookmarkBlock.hide();this._drillThroughBlock.hide();this._parameterList.hide();this._noParameter.hide();this._errorReport.hide();this._okBtn._onEnable();},_bindData:function(B){if(!B){this._nolinkUpdate();return ;}this._hyperlinkDefinition=null;var A=parseInt(B.hyperlinkType);_isForChart=B.bindingName==undefined;switch(A){case 0:this._nolinkUpdate();break;case 1:this.urlLocationText=B.hyperlinkDefinition.location;this.urlTooltipText=B.hyperlinkDefinition.tooltip;this.urlTargetValue=B.hyperlinkDefinition.target;this._urlUpdate();break;case 2:this.bookmarksTooltipText=B.hyperlinkDefinition.tooltip;this.bookmarksText=B.hyperlinkDefinition.bookmarks;this._bookmarkUpdate();break;case 3:this.drillThroughReportName=B.hyperlinkDefinition.report;this.moreTargetValue=B.hyperlinkDefinition.target;this.moreFormatValue=B.hyperlinkDefinition.format;this.moreTooltipText=B.hyperlinkDefinition.tooltip;this.moreBookmarksText=B.hyperlinkDefinition.bookmarks;this.reportParameters=B.hyperlinkDefinition.parameters;this._onDrillEdit=true;this._drillThroughUpdate();break;default:this._urlUpdate();}this._okBtn._onEnable();this.showDialog();},refresh:function(G){if(G==null){return ;}if(!this._hyperlinkCache){this._hyperlinkCache={};}if(this._typeCode==2){var C=[];if(G.bookmarks){if(G.bookmarks.length>0){C=[""];}for(var D=0;D<G.bookmarks.length;D++){var E=this.addQuoteToConstantEZScriptExpression(G.bookmarks[D].Bookmark);if(E.indexOf("row[")==0){E=E.replace('row["',"[");E=E.replace('"]',"]");}C.push([E,E]);}}this._bookmarkComboStore.loadData(C);if(this.bookmarksText){this._reportBookmarks.setValue(this.bookmarksText);}else{this._reportBookmarks.setValue("");}if(C.length>0){this._reportBookmarks.setDisabled(false);}else{this._reportBookmarks.setDisabled(true);}this._bookmarkBlock.show();this._hyperlinkCache.reportBookmarks=G.bookmarks;}else{if(this._typeCode==3){this._okBtn._onEnable();if(G.parameters){var C=[];for(parameterName in G.parameters){for(parameterDisplayName in G.parameterNamePairs){if(parameterName==parameterDisplayName){if(this.reportParameters){var F=this.reportParameters[G.parameterNamePairs[parameterName]];var B=F;var A=G.parameters[parameterName];if(!G.parameterProps[parameterName].isRequired){B=this._handleNoValue(F);A=this._handleNoValue(A);}B=this.addQuoteToConstantEZScriptExpression(B);A=this.addQuoteToConstantEZScriptExpression(A);C.push([parameterDisplayName,G.parameterNamePairs[parameterDisplayName],F?B:A,"..."]);}else{var B=G.parameters[parameterName];if(!G.parameterProps[parameterName].isRequired){B=this._handleNoValue(B);}var A=this.addQuoteToConstantEZScriptExpression(B);C.push([parameterDisplayName,G.parameterNamePairs[parameterDisplayName],A,"..."]);}}}}this._parametersStore=C;this._parametersGridStore.loadData(C);this._parametersGrid.render();this._parameterList.show();}else{this._noParameter.show();}if(G.bookmarks){var C=[];if(G.bookmarks.length>0){C=[""];}for(var D=0;D<G.bookmarks.length;D++){var E=this.addQuoteToConstantEZScriptExpression(G.bookmarks[D].Bookmark);if(E.indexOf("row[")==0){E=E.replace('row["',"[");E=E.replace('"]',"]");}C.push([E,E]);}this._moreBookmarkComboStore.loadData(C);if(this._isPickerSelect){this._moreBookmark.setValue("");}if(C.length>0){this._moreBookmark.setDisabled(false);}else{this._moreBookmark.setDisabled(true);}}else{this._moreBookmarkComboStore.removeAll();if(!this.moreBookmarksText){this._moreBookmark.setValue("");}this._moreBookmark.setDisabled(true);}this._isPickerSelect=false;}}actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.refresh.apply(this,arguments);},_handleNoValue:function(A){if(!A||A.length==0){A="-No Value-";}else{if(A.indexOf("Null")!=-1){A=A.replace("Null","-No Value-");}else{if(A.indexOf("null")!=-1){A=A.replace("null","-No Value-");}else{if(A.indexOf("NULL")!=-1){A=A.replace("NULL","-No Value-");}}}}return A;},__getHelpTopic:function(){return"hyperlink";},__validate:function(){var B=actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.__validate.apply(this.arguments);var A;if(this._okBtn.isDisabled()){B=false;}else{if(B){switch(this._typeCode){case 1:B=this._urlLocation.getValue().length>0;if(!B){A=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.invalidURL");}break;case 2:B=this._isReportBookmarkNotEmpty(this._reportBookmarks.getValue());if(!B){A=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.emptyReportBookmark");}break;case 3:B=this._isDrillThroughReportNotEmpty(this._userReport.getValue());if(!B){A=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.emptyDrillThroughReport");}break;default:break;}}if(!B){this.__popupErrorDialog(A);}}return B;},_isURL:function(A){var B="^((https|http|ftp|rtsp|mms)?://)"+"+(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?"+"(([0-9]{1,3}.){3}[0-9]{1,3}"+"|"+"([0-9a-z_!~*'()-]+.)*"+"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]."+"[a-z]{2,6})"+"(:[0-9]{1,4})?"+"((/?)|"+"(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";return new RegExp(B).test(A);},_isReportBookmarkNotEmpty:function(A){if(!A){return false;}return true;},_isDrillThroughReportNotEmpty:function(A){if(!A){return false;}return true;},__createResult:function(){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);this._createJsonData(A);return A.documentElement;},_createJsonData:function(G){switch(this._typeCode){case 1:this._hyperlinkDefinition={"location":this._urlLocation.getValue(),"target":this._urlTarget.getValue(),"tooltip":this._urlTooltip.getValue()};break;case 2:this._hyperlinkDefinition={"bookmarks":this._reportBookmarks.getValue(),"tooltip":this._bookmarkTooltip.getValue()};break;case 3:var B=this._parametersGridStore.data.items;var D={};for(var E=0;E<B.length;E++){if(B[E].data.parameterValue){var F=B[E].data.parameterValue;if(F.indexOf("-No Value")!=-1){if(F.indexOf("|")!=-1){F=F.replace("-No Value-","Null");}else{F="";}}D[B[E].data.parameterName]=F;}}this._hyperlinkDefinition={"report":this._userReport.getValue(),"parameters":D,"bookmarks":this._moreBookmark.getValue(),"target":parseInt(this._moreTarget.getValue()),"format":this._moreFileformat.getValue(),"tooltip":this._moreTooltip.getValue()};break;default:this._hyperlinkDefinition=null;break;}var A={"hyperlinkType":this._typeCode,"hyperlinkDefinition":this._hyperlinkDefinition};var C=actuate.util.XmlDom.createElement(G,actuate.Constant.tag.Json);var H=G.createTextNode(actuate.util.Json.makeObject(A));C.appendChild(H);G.documentElement.appendChild(C);return G;},_clearAll:function(){this.urlLocationText=null;this.urlTooltipText=null;this.urlTargetValue=null;this.bookmarksTooltipText=null;this.drillThroughReportName=null;this.moreTargetValue=null;this.moreFormatValue=null;this.moreTooltipText=null;this.moreBookmarksText=null;this.reportParameters=null;this._onDrillEdit=false;this._hyperlinkCache=null;this.bookmarksText=null;},_sendEZScriptRequest:function(C,F,B){if(this._consumer&&this._consumer._eventDispatcher){var E;var D;switch(this._typeCode){case 1:E=this._urlLocation.getValue();break;case 2:E=this.addQuoteToConstantEZScriptExpression(this._reportBookmarks.getValue());this._reportBookmarks.collapse(true);if(this._bookmarkComboStore.data.items.length==0){D=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.noReportBookmark");}break;case 3:if(B){var A=this._parametersGridStore.data.items;E=this._parametersGridStore.data.items[F].data.parameterValue;this._parameterIndex=F;}else{E=this.addQuoteToConstantEZScriptExpression(this._moreBookmark.getValue());this._moreBookmark.collapse(true);if(this._moreBookmarkComboStore.data.items.length==0){D=actuate.util.Utility.getLocalizedString("hyperlinkBuilderDialog.noReportBookmark");}}break;default:E="";}if(D){this.__popupInformationDialog(D);}else{this._consumer._eventDispatcher.broadcastEvent(actuate.builder.impl.event.__E_LAUNCH_EZSCRIPT_BUILDER,E);}}},_updateExpression:function(A){switch(this._typeCode){case 1:this._urlLocation.setValue(A);break;case 2:this._reportBookmarks.setValue(A);break;case 3:if(this._parameterIndex!=-1){this._parametersStore[this._parameterIndex][2]=A;this._parametersGridStore.loadData(this._parametersStore);this._parametersGrid.render();this._parameterIndex=-1;}else{this._moreBookmark.setValue(A);}break;default:return ;}},addQuoteToConstantEZScriptExpression:function(A){if(!A||A.length==0){return"";}if(this.isColumnBindingInExpression(A)){return A;}if(this.isExpressionQuoted(A)){return A;}return this._QUOTE+A+this._QUOTE;},isColumnBindingInExpression:function(A){return A.indexOf(this._Value_ColumnBinding_Prefix)!=-1&&A.indexOf(this._Value_ColumnBinding_Suffix)!=-1;},isExpressionQuoted:function(A){return A.indexOf(this._QUOTE)==0&&A.slice(-this._QUOTE.length)==this._QUOTE;},_noComma:null});actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.AcDialog=actuate.Class.extendClass(actuate.common.Observable,{MODULE_NAME:"actuate.dialog",_validEvents:new Array(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,actuate.dialog.impl.EventConstants.ON_DIALOG_CANCEL,actuate.dialog.impl.EventConstants.ON_DIALOG_WARNING,actuate.dialog.impl.EventConstants.ON_DIALOG_VALID),_name:null,_consumer:null,_helper:null,_data:null,_mask:null,_operands:{},initialize:function(A){actuate.dialog.impl.AcDialog.superclass.initialize.apply(this,arguments);this._consumer=A;if(this._localEvents){this._validEvents=this._validEvents.concat(this._localEvents);}},show:function(A){if(this._isReusableDialog()){if(this._helper){this._helper.show.apply(this._helper,arguments);}else{this.__addOperand("show",arguments);this.__doOperands();}}else{this._helper.consumerBind(this._consumer,A?A:this._data);}},_isReusableDialog:function(){return this.CLASS_NAME!=null;},reset:function(){this._operands={};this.clearEventHandlers();this.setHelpContext(null);},processBind:function(B,C,A){this._helper.processBind(this._consumer,C?C:this._data);},setData:function(A){this._data=A;},setConsumer:function(A){this._consumer=A;},getConsumer:function(){return this._consumer;},getName:function(){if(!this._name){this._name=actuate.util.Package.getLastNamespaceObjectName(this.CLASS_NAME||this._helper._classname);}return this._name?this._name:"";},getEvents:function(){return this._validEvents;},getHelper:function(){if(!this._helper){this.__initHelper();}return this._helper;},setCallback:function(A){this.__addOperand("setCallback",arguments);},setHelpContext:function(A){this.__addOperand("setHelpContext",arguments);},setMask:function(A){this._mask=A;},__addOperand:function(B,C){if(this._helper){var A=this._helper[B];if(A){A.apply(this._helper,C);}}else{this._operands[B]=C;}},__initHelper:function(A){if(A){this._helper=A;this._helper._helpee=this;}},__doOperands:function(){if(this._helper){this._helper.show();}else{var A=this;actuate.resource.module.feature.require([{feature:this.FEATURE_NAME,module:this.MODULE_NAME}],function(){A.__initHelper();for(var C in A._operands){var B=A._helper[C];if(B){B.apply(A._helper,A._operands[C]);}}A._operands={};});}}});actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.BaseTabDialog=actuate.Class.create();actuate.dialog.impl.BaseTabDialog.prototype={tabPanel:null,panels:[],_window:null,initialize:function(A,C,D){var B=this._iniPanels(C);var F=this._initTabPanel(B);var E=this._initButtons();this._window=new actuate.widget.Window({title:A,height:D[0],width:D[1],bodyStyle:"padding: 0",footer:true,resizable:false,closeAction:"hide",modal:true,visibilityMode:"display",buttonAlign:"center",buttons:E,layout:"fit",items:[F]});this._iniVariables();},_initTabPanel:function(A){var B={xtype:"tabpanel",activeTab:1,defaults:{autoHeight:false},items:A};return B;},_initButtons:function(){var A=actuate.util.Utility;this._okBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.ok")});var B=[this._okBtn];this._cancelBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.cancel")});B.push(this._cancelBtn);return B;},_iniPanels:function(A){var C=[];for(var B=0;B<A.length;B++){var D={id:"card-"+[B+1],title:A[B],header:false,border:false};C.push(D);}return C;},_iniVariables:function(){this.tabPanel=this._window.items.items[0];this.panels=this.tabPanel.items.items;},getTabPanel:function(){return this.tabPanel;},getPanel:function(A){if(A<0||A>=this.panels.length){return null;}return this.panels[A];},getWindow:function(){return this._window;},render:function(A){this._window.render(A);},setPosition:function(A,B){this._window.setPosition(A,B);},show:function(){this._window.show();},validate:function(){},createSoapNode:function(){}};actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.Utility={validateCustomPatternInput:function(B,A){var C=B;if(!C||A==null){return false;}else{if(A==actuate.Constant.DataType.DATETIME){re=/([^GyMdhHmsSEDQYFwWakKz\W])/;}else{if(A==actuate.Constant.DataType.DATE){re=/([^GyMdEDQYFwW\W])/;}else{if(A==actuate.Constant.DataType.TIME){re=/([^hHmsSakKz\W])/;}}}}if(C.replace(/\'(.)*\'/,"").match(re)){return false;}return true;},NONZERO:1,POSITIVE:2,NEGATIVE:3,NONPOSITIVE:4,NONNEGATIVE:5,validateNumber:function(C,B){var G=(C==null?"":""+C);var D=true;var A="-+0123456789.,";var F;for(var E=0;E<G.length;E++){F=G.charAt(E);if(A.indexOf(F)==-1){D=false;}}if(!D){D=actuate.util.Utility.getLocalizedString("Utility.number.errorMessage");}if((D==true)&&B){if(B==actuate.dialog.impl.Utility.NONE_ZERO&&parseFloat(G)==0){D=actuate.util.Utility.getLocalizedString("Utility.number..zeroNotAllowed");}else{if(B==actuate.dialog.impl.Utility.POSITIVE&&parseFloat(G)<=0){D=actuate.util.Utility.getLocalizedString("Utility.number.nonPositiveNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NEGATIVE&&parseFloat(G)>=0){D=actuate.util.Utility.getLocalizedString("Utility.number.nonNegativeNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NONPOSITIVE&&parseFloat(G)>0){D=actuate.util.Utility.getLocalizedString("Utility.number.positiveNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NONNEGATIVE&&parseFloat(G)<0){D=actuate.util.Utility.getLocalizedString("Utility.number.negativeNotAllowed");}}}}}}return D;},validateInteger:function(C,B){var G=(C==null?"":""+C);var D=true;var A="-+0123456789";var F;for(var E=0;E<G.length;E++){F=G.charAt(E);if(A.indexOf(F)==-1){D=false;}}if(!D){D=actuate.util.Utility.getLocalizedString("Utility.integer.errorMessage");}if((D==true)&&B){if(B==actuate.dialog.impl.Utility.NONE_ZERO&&parseFloat(G)==0){D=actuate.util.Utility.getLocalizedString("Utility.integer.zeroNotAllowed");}else{if(B==actuate.dialog.impl.Utility.POSITIVE&&parseFloat(G)<=0){D=actuate.util.Utility.getLocalizedString("Utility.integer.nonPositiveNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NEGATIVE&&parseFloat(G)>=0){D=actuate.util.Utility.getLocalizedString("Utility.integer.nonNegativeNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NONPOSITIVE&&parseFloat(G)>0){D=actuate.util.Utility.getLocalizedString("Utility.integer.positiveNotAllowed");}else{if(B==actuate.dialog.impl.Utility.NONNEGATIVE&&parseFloat(G)<0){D=actuate.util.Utility.getLocalizedString("Utility.integer.negativeNotAllowed");}}}}}}return D;},convertPxtoPt:function(A){return Math.floor(parseInt(A)*72/96);},stripUnits:function(A){if(typeof A==="string"){if(A.indexOf("px")>-1){return A.substr(0,A.indexOf("px"));}else{if(A.indexOf("pt")>-1){return A.substr(0,A.indexOf("pt"));}else{return A;}}}return A;},validatePositive:function(A){var B=(A==null?"":""+A);return actuate.dialog.impl.Utility.validateNumber(B,actuate.dialog.impl.Utility.POSITIVE);},validatePositiveWithoutPlus:function(A){var B=(A==null?"":""+A);return actuate.dialog.impl.Utility.validatePositive(B)&&B.indexOf&&B.indexOf("+")==-1;},validatePositiveIntegerWithoutPlus:function(A){var B=(A==null?"":""+A);return actuate.dialog.impl.Utility.validateInteger(B,actuate.dialog.impl.Utility.POSITIVE)&&B.indexOf&&B.indexOf("+")==-1;},isValidFileName:function(B){var C=B.match(/\S/);if(B.length==0||C==null){return false;}var A=B.match(/[\\\/\:\*?"<>\|;]/);if(A){return false;}return true;},getDataTypeLiteral:function(A){var B="text";if(actuate.Constant.DataType.DATETIME==A||actuate.Constant.DataType.DATE==A||actuate.Constant.DataType.TIME==A){B="datetime";}else{if(actuate.Constant.DataType.DECIMAL==A||actuate.Constant.DataType.FLOAT==A||actuate.Constant.DataType.INTEGER==A||actuate.Constant.DataType.DOUBLE==A||actuate.Constant.DataType.BOOLEAN==A){B="numeric";}else{if(A==""||A==null){B=null;}}}return B;}};actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.DialogStatusMonitor=actuate.Class.create();actuate.dialog.impl.DialogStatusMonitor.prototype={_statusChangedComponents:null,initialize:function(){this._statusChangedComponents=new actuate.util.HashMap();this._eh_statusChange_c=actuate.Method.bind(this._eh_statusChange,this);},listen:function(B){if(actuate.util.Utility.isArray(B)){for(var A=0,C=B.length;A<C;A++){B[A].on("focus",this._eh_statusChange_c);}}else{B.on("focus",this._eh_statusChange_c);}},_eh_statusChange:function(A){if(!actuate.util.Utility.isEmpty(A,false)){if(!this._statusChangedComponents.containsKey(A.id)){this._statusChangedComponents.put(A.id,this._getComponentValue(A));}}},statusChanged:function(){var A;if(this._statusChangedComponents.isEmpty()){A=false;}else{A=false;this._statusChangedComponents.each(function(C){if(!actuate.util.Utility.isEmpty(C,false)){var B=this._getComponentValue(actuate.widget.ComponentMgr.get(C.key));if(B!=C.value){A=true;}}},this);}return A;},isValueChanged:function(A){return this._statusChangedComponents.containsKey(A.id)?this._statusChangedComponents.get(A.id)!=A.getValue():false;},_getComponentValue:function(A){var B=null;if(A instanceof actuate.widget.custom.TreeCombo.TreeComboBox){}else{B=A.getValue();}return B;},clear:function(){this._statusChangedComponents.clear();}};actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.FontDialog=actuate.Class.extendClass(actuate.dialog.impl.AcDialog,{FEATURE_NAME:"FONT_DIALOG",CLASS_NAME:"actuate.dialog.FontDialog",__initHelper:function(){var A=actuate.dialog.impl.helper.font.fontDialog;if(!A){A=actuate.dialog.Factory.getDialog(null,"actuate.dialog.impl.helper.font.fontDialog");}actuate.dialog.impl.helper.font.fontDialog=A;actuate.dialog.impl.FontDialog.superclass.__initHelper.call(this,A);},setStyleModel:function(A){this.__addOperand("setStyleModel",arguments);},setFont:function(A){this.__addOperand("setFont",arguments);}});actuate.dialog.impl.FontDialog.getInstance=function(){return actuate.dialog.Factory.getDialog(null,actuate.dialog.impl.FontDialog.prototype.CLASS_NAME);};actuate.util.Package.define("actuate.parameter");actuate.parameter.ParameterValue=actuate.Class.create();actuate.parameter.ParameterValue.prototype={_group:null,_name:null,_displayName:null,_position:null,_value:null,_promptParameter:null,_tableValue:null,_dataSourceType:null,_isViewParameter:null,_valueIsNull:null,_dataType:null,_columnName:null,_controlType:null,_operator:null,_valueArray:null,_isRequired:null,_isMultiList:null,_columnType:null,getGroup:function(){return this._group;},setGroup:function(A){this._group=A;},getName:function(){return this._name;},setName:function(A){this._name=A;},getDisplayName:function(){return this._displayName;},setDisplayName:function(A){this._displayName=A;},getPosition:function(){return this._position;},setPosition:function(A){this._position=A;},getValue:function(){return this._value;},setValue:function(A){this._value=A;},getPromptParameter:function(){return this._promptParameter;},setPromptParameter:function(A){this._promptParameter=A;},setControlType:function(A){this._controlType=A;},getControlType:function(){return this._controlType;},getTableValue:function(){return this._tableValue;},setTableValue:function(A){this._tableValue=A;},getDataSourceType:function(){return this._dataSourceType;},setDataSourceType:function(A){this._dataSourceType=A;},isViewParameter:function(){return this._isViewParameter;},setIsViewParameter:function(A){this._isViewParameter=A;},getValueIsNull:function(){return this._valueIsNull;},setValueIsNull:function(A){this._valueIsNull=A;},getDataType:function(){return this._dataType;},setDataType:function(A){this._dataType=A;},getColumnName:function(){return this._columnName;},setColumnName:function(A){this._columnName=A;},getColumnType:function(){return this._columnType;},setColumnType:function(A){this._columnType=A;},setOperator:function(A){this._operator=A;},getOperator:function(){return this._operator;},setValueArray:function(A){this._valueArray=A;},getValueArray:function(){return this._valueArray;},isRequired:function(){return this._isRequired;},setIsRequired:function(A){this._isRequired=A;},isMultiList:function(){return this._isMultiList;},setIsMultiList:function(A){this._isMultiList=A;}};actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.CalculationDialog=actuate.Class.extendClass(actuate.dialog.impl.AcDialog,{FEATURE_NAME:"CALCULATION_DIALOG",CLASS_NAME:"actuate.dialog.CalculationDialog",__initHelper:function(){var A=actuate.dialog.impl.helper.calculationDialog;if(!A){A=actuate.dialog.Factory.getDialog(null,"actuate.dialog.impl.helper.CalculationDialog");}actuate.dialog.impl.helper.calculationDialog=A;actuate.dialog.impl.CalculationDialog.superclass.__initHelper.call(this,A);},setGroups:function(A){this.__addOperand("setGroups",arguments);},setColumnBindings:function(A){this.__addOperand("setColumnBindings",arguments);},setFunctions:function(A){this.__addOperand("setFunctions",arguments);},setSelectedColumn:function(A){this.__addOperand("setSelectedColumn",arguments);}});actuate.dialog.impl.CalculationDialog.getInstance=function(){return actuate.dialog.Factory.getDialog(null,actuate.dialog.impl.CalculationDialog.prototype.CLASS_NAME);};actuate.util.Package.define("actuate.dialog.impl");actuate.dialog.impl.FilePickerDialog=actuate.Class.extendClass(actuate.dialog.impl.AcDialog,{FEATURE_NAME:"FILEPICKER_DIALOG",CLASS_NAME:"actuate.dialog.FilePickerDialog",OPEN_DIALOG:"OpenFileDialog",SAVE_DIALOG:"SaveFileDialog",__initHelper:function(){var A=actuate.dialog.impl.helper.filepicker.filePickerDialog;if(!A){A=actuate.dialog.Factory.getDialog(null,"actuate.dialog.impl.helper.filepicker.FilePickerDialog");}if(A){this.OPEN_DIALOG=A.OPEN_DIALOG;this.SAVE_DIALOG=A.SAVE_DIALOG;actuate.dialog.impl.helper.filepicker.filePickerDialog=A;actuate.dialog.impl.FilePickerDialog.superclass.__initHelper.call(this,A);}},setTitle:function(A){this.__addOperand("setTitle",arguments);},setFileFilters:function(A,B){this.__addOperand("setFileFilters",arguments);},setDialogType:function(A){this.__addOperand("setDialogType",arguments);}});actuate.dialog.impl.FilePickerDialog.getInstance=function(){return actuate.dialog.Factory.getDialog(null,actuate.dialog.impl.FilePickerDialog.prototype.CLASS_NAME);};actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.BooleanFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.BooleanFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.booleanFormattingDialog){actuate.dialog.impl.helper.format.booleanFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.BooleanFormattingDialog");actuate.dialog.impl.helper.format.booleanFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.booleanFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.StringFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.StringFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.stringFormattingDialog){actuate.dialog.impl.helper.format.stringFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.StringFormattingDialog");actuate.dialog.impl.helper.format.stringFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.stringFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.NumberFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.NumberFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.numberFormattingDialog){actuate.dialog.impl.helper.format.numberFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.NumberFormattingDialog");actuate.dialog.impl.helper.format.numberFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.numberFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.DateFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.DateFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{_localEvents:new Array(actuate.dialog.impl.EventConstants.ON_DIALOG_CHANGE_LOCALE),initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.dateFormattingDialog){actuate.dialog.impl.helper.format.dateFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.DateFormattingDialog");actuate.dialog.impl.helper.format.dateFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.dateFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.TimeFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.TimeFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{_localEvents:new Array(actuate.dialog.impl.EventConstants.ON_DIALOG_CHANGE_LOCALE),initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.timeFormattingDialog){actuate.dialog.impl.helper.format.timeFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.TimeFormattingDialog");actuate.dialog.impl.helper.format.timeFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.timeFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.format");actuate.dialog.impl.format.DateTimeFormattingDialog=actuate.Class.create();actuate.dialog.impl.format.DateTimeFormattingDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.AcDialog,{_localEvents:new Array(actuate.dialog.impl.EventConstants.ON_DIALOG_CHANGE_LOCALE),initialize:function(A){actuate.dialog.impl.AcDialog.prototype.initialize.call(this,A);if(!actuate.dialog.impl.helper.format.dateTimeFormattingDialog){actuate.dialog.impl.helper.format.dateTimeFormattingDialog=actuate.common.ClassLoader.getInstance().forName("actuate.dialog.impl.helper.format.DateTimeFormattingDialog");actuate.dialog.impl.helper.format.dateTimeFormattingDialog.consumerBind(A);}this._helper=actuate.dialog.impl.helper.format.dateTimeFormattingDialog;this._helper._helpee=this;}});actuate.util.Package.define("actuate.dialog.impl.helper.selectorbuilder");actuate.dialog.impl.helper.selectorbuilder.SelectorFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractTabDialog,{_classname:"actuate.dialog.SelectorFormatTab",_formatAsButton:null,_dataFormatNode:null,_dataFormat:null,_formatType:null,initialize:function(){var A=this._getId(this._classname);this._dataFormatNode=null;this._dataFormat=null;this._formatType=null;this.__makeObservable();this._initContent();this._initPanel();this._initEvent();},_initPanel:function(){},_initEvent:function(){this._formatAsButton=actuate.widget.ComponentMgr.get(this._classname+"_formatAs_button");var A;var B;if(this._formatAsButton){A=actuate.Method.bind(this._openDataFormattingDialog,this);this._formatAsButton.registerEventHandler("click",A);this._formatAsButton.setDisabled(true);}this.on("showdata",actuate.Method.bind(this.__showDataHandler,this));this.on("fieldchanged",actuate.Method.bind(this.__fieldChangedHandler,this));this.on("dataformat",actuate.Method.bind(this._dataFormatHandler,this));},__getFormattingComponent:function(){var A={items:[{id:this._classname+"_formatAs_button",xtype:"button",text:actuate.util.Utility.getLocalizedString("selectorBuilder.formatTab.formatAs")}]};return A;},_dataFormatHandler:function(A){this._clearFormatSetting();if(A&&A.value&&this._formatAsButton){this._dataFormat=A.value;this._formatType=A.type;if(!this._formatType){switch(this._dataFormat.dataType){case"string":this._formatType="stringformat";break;case"integer":case"float":case"double":case"decimal":this._formatType="numberformat";break;case"date":this._formatType="dateformat";break;case"time":this._formatType="timeformat";break;case"datetime":case"date-time":this._formatType="datetimeformat";break;default:this._formatType=null;break;}}if(this._formatType){this._formatAsButton.setDisabled(false);}}},_clearFormatSetting:function(){this._dataFormatNode=null;this._dataFormat=null;this._formatType=null;if(this._formatAsButton){this._formatAsButton.setDisabled(true);}},__showDataHandler:function(A){if(A&&A.operationData&&A.operationData.componentData){if(A.operationData.componentData.dataObjectType==actuate.Constant.SelectorPurpose.DATA_VERSION){this.__diableItemsForVersion();}}},__fieldChangedHandler:function(A){if(A){if(A.dataObjectType==actuate.Constant.SelectorPurpose.DATA_VERSION){this.__diableItemsForVersion();}this._dataFormatHandler(A.format);}},__diableItemsForVersion:function(){this._clearFormatSetting();},_openDataFormattingDialog:function(){if(this._dataFormat&&this._formatType){var E;var D=actuate.Method.bind(this._changeLocaleCallback,this);var A=actuate.Method.bind(this._errorCallback,this);var C={okCallback:actuate.Method.bind(this._okCallback,this),changeLocaleCallback:D,errorCallback:A};switch(this._formatType){case"stringformat":E="actuate.dialog.format.StringFormattingDialog";break;case"numberformat":E="actuate.dialog.format.NumberFormattingDialog";break;case"dateformat":E="actuate.dialog.format.DateFormattingDialog";break;case"timeformat":E="actuate.dialog.format.TimeFormattingDialog";break;case"datetimeformat":E="actuate.dialog.format.DateTimeFormattingDialog";break;default:break;}var B=actuate.dialog.Factory.getDialog(null,E,C);if(B){B.setConsumer(this._parentDialog._consumer);if(!this._dataFormat.dataType){this._dataFormat.dataType="decimal";}B.show({selectedBinding:{dataType:this._dataFormat.dataType},selectedElement:{dataFormat:this._dataFormat}});}}},_okCallback:function(A){if(A){this._dataFormatHandler({type:this._formatType,value:this._convertToFormat(A)});this._dataFormatNode=A;}},_retrieveValue:function(D,A){var B=D.getElementsByTagName(A);if(B!=null&&B.length>0){var C=B[0].getElementsByTagName(actuate.Constant.tag.Value);if(C!=null&&C.length>0){B=C;}return actuate.util.XmlDom.getNodeTextData(B[0]);}},_convertToFormat:function(A){var B={locale:{}};B.locale.country=this._retrieveValue(A,actuate.Constant.tag.COUNTRY);B.locale.language=this._retrieveValue(A,actuate.Constant.tag.LANGUAGE);B.category=this._retrieveValue(A,actuate.Constant.tag.CATEGORY);B.pattern=this._retrieveValue(A,actuate.Constant.tag.PATTERN);B.decimalPlaces=this._retrieveValue(A,actuate.Constant.tag.DecimalPlaces);B.symbol=this._retrieveValue(A,actuate.Constant.tag.Symbol);B.symbolPosition=this._retrieveValue(A,actuate.Constant.tag.SymbolPosition);B.negativeNumberFormat=this._retrieveValue(A,actuate.Constant.tag.NegativeNumberFormat);B.useSeparator=this._retrieveValue(A,actuate.Constant.tag.UseSepartor);B.roundingMode=this._retrieveValue(A,actuate.Constant.tag.RoundingMode);B.dataType=this._dataFormat.dataType;return B;},_errorCallback:function(A){if(A){actuate.widget.MessageBox.show({title:actuate.util.Utility.getLocalizedString("selectorDialog.alertTitle"),msg:A,buttons:actuate.widget.MessageBox.OK,icon:actuate.widget.MessageBox.ERROR});}},_changeLocaleCallback:function(A){var B={operandArray:A,target:"Document"};this._parentDialog._consumer._eventDispatcher.sendEvent(actuate.builder.impl.Event.__E_GET_DATETIME_FORMATS,{data:B},true);},createSoapNode:function(B,C){if(C&&this._dataFormatNode){if(actuate.util.Utility.isSafari||actuate.util.Utility.isChrome){var A=(this._dataFormatNode.nodeType==Node.DOCUMENT_NODE)?this._dataFormatNode:this._dataFormatNode.ownerDocument;this.copyNodes(C.documentElement,A);}else{C.documentElement.appendChild(this._dataFormatNode);}}return this._dataFormatNode;},copyNodes:function(E,D){if(!E||!D){return ;}var B=(E.nodeType==Node.DOCUMENT_NODE)?E:E.ownerDocument;var A=D.childNodes;if(B.importNode){for(var C=0;C<A.length;C++){E.appendChild(B.importNode(A[C],true));}}else{for(var C=0;C<A.length;C++){E.appendChild(A[C].cloneNode(true));}}},loadData:function(A){},_preHide:function(){this.__resetStatus();},__resetStatus:function(){this._clearFormatSetting();}});actuate.util.Package.define("actuate.dialog.impl.hyperlinkBuilder");actuate.dialog.impl.hyperlinkBuilder.HyperlinkBuilderDialog=actuate.Class.extendClass(actuate.dialog.impl.AcDialog,{FEATURE_NAME:"HYPERLINK_BUILDER",CLASS_NAME:"actuate.dialog.impl.hyperlinkBuilder.HyperlinkBuilderDialog",__initHelper:function(){var A=actuate.dialog.impl.helper.hyperlinkBuilder.hyperlinkBuilderDialog;if(!A){A=actuate.dialog.Factory.getDialog(null,"actuate.dialog.impl.helper.hyperlinkBuilder.HyperlinkBuilderDialog");}actuate.dialog.impl.helper.hyperlinkBuilder.hyperlinkBuilderDialog=A;actuate.dialog.impl.hyperlinkBuilder.HyperlinkBuilderDialog.superclass.__initHelper.call(this,A);},setReportDocument:function(A,B){this.__addOperand("_setReportDocument",arguments);},loadParameters:function(A){this.__addOperand("_loadParameters",arguments);},show:function(){this.__addOperand("_bindData",arguments);this.__doOperands();}});actuate.Class.extend(actuate.dialog.impl.hyperlinkBuilder.HyperlinkBuilderDialog,{getInstance:function(A,B){this._instance=actuate.dialog.Factory.getDialog(A,this.CLASS_NAME);return this._instance;}});actuate.util.Package.define("actuate.dialog.impl.helper.font");actuate.dialog.impl.helper.font.StyleModel=function(){this.rollbackStates=[];this.init();};actuate.dialog.impl.helper.font.StyleModel.prototype={fontFamilyDefault:"auto",fontSizeDefault:"auto",fontSizeUnitDefault:"pt",colorDefault:"auto",backgroundColorDefault:"auto",boldDefault:false,italicDefault:false,underlineDefault:false,alignmentDefault:null,isDefault:function(){return this.fontFamily==this.fontFamilyDefault&&this.fontSize==this.fontSizeDefault&&this.fontSizeUnit==this.fontSizeUnitDefault&&this.color==this.colorDefault&&this.backgroundColor==this.backgroundColorDefault&&this.isBold==this.boldDefault&&this.isItalic==this.italicDefault&&this.isUnderline==this.underlineDefault&&this.alignment==this.alignmentDefault;},reset:function(){this.fontFamily=this.fontFamilyDefault;this.fontSize=this.fontSizeDefault;this.fontSizeUnit=this.fontSizeUnitDefault;this.color=this.colorDefault;this.backgroundColor=this.backgroundColorDefault;this.isBold=this.boldDefault;this.isItalic=this.italicDefault;this.isUnderline=this.underlineDefault;this.alignment=this.alignmentDefault;},init:function(){this.reset();},setRollbackState:function(){this.rollbackStates.push([this.fontFamily,this.fontSize,this.color,this.backgroundColor,this.isBold,this.isItalic,this.isUnderline,this.alignment,this.fontSizeUnit]);},clearRollbackState:function(){if(this.rollbackStates.length>0){this.rollbackStates.pop();}},rollback:function(){if(this.rollbackStates.length>0){var A=this.rollbackStates.pop();this.setValues(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8]);}},setFontFamily:function(A){var B=A;if(B&&B.length>2&&actuate.util.String.startWith(B,'"')&&actuate.util.String.endWith(B,'"')){B=B.substring(1,B.length-1);}this.fontFamily=B;},setFontSize:function(B){var A=actuate.util.Utility.getLocalizedString("fontDialog.size.auto");A=(A)?A:"";if(B&&B.toLowerCase()==A.toLowerCase()){this.fontSize=this.fontSizeDefault;}else{if(actuate.util.Utility.isNumeric(B)){this.fontSize=B;}}},setFontSizeUnit:function(A){this.fontSizeUnit=A;},setFontSizeAndUnit:function(C){if(C){if(C.toLowerCase()==this.fontSizeDefault){this.fontSize=this.fontSizeDefault;this.fontSizeUnit=this.fontSizeUnitDefault;}else{var B=C.search(/%|[a-z]/i);if(B>0){var A=C.substring(0,B);var D=C.substring(B,C.length);this.fontSize=A;this.fontSizeUnit=D;}else{this.fontSize=C;this.fontSizeUnit=this.fontSizeUnitDefault;}}}else{this.fontSize=this.fontSizeDefault;this.fontSizeUnit=this.fontSizeUnitDefault;}},setColor:function(A){this.color=this.ConvertColorToGgb(A);},setBackgroundColor:function(A){this.backgroundColor=this.ConvertColorToGgb(A);},ConvertColorToGgb:function(B){var D=B;var A=actuate.util.Utility.getLocalizedString("ColorField.Auto");A=(A)?A:"";if(D){if(D.toLowerCase()!=A.toLowerCase()){var E=D.substring(0,1).toUpperCase()+D.substring(1);E=E.replace("#","");var C=new actuate.widget.custom.ColorPickerUX.ColorPickerMenu();if(/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/.test(E)){D=C.picker.hexToRgbStr(E);}}else{D=this.colorDefault;}}return D;},getFontFamily:function(){return this.fontFamily;},getFontSize:function(){return this.fontSize;},getFontSizeUnit:function(){return this.fontSizeUnit;},getColor:function(){return this.color;},getBackgroundColor:function(){return this.backgroundColor;},getIsBold:function(){return this.isBold;},getIsItalic:function(){return this.isItalic;},getIsUnderline:function(){return this.isUnderline;},toggleBold:function(){this.isBold=!this.isBold;},toggleItalic:function(){this.isItalic=!this.isItalic;},toggleUnderline:function(){this.isUnderline=!this.isUnderline;},getAlignment:function(){return this.alignment;},setAlignment:function(A){this.alignment=A;},setValues:function(G,I,D,H,B,A,C,F,E){this.setFontFamily(G==null?this.fontFamilyDefault:G);this.setFontSize(I==null?this.fontSizeDefault:I);this.setFontSizeUnit(E==null?this.fontSizeUnitDefault:E);this.setColor(D==null?this.colorDefault:D);this.setBackgroundColor(H==null?this.backgroundColorDefault:H);this.isBold=B;this.isItalic=A;this.isUnderline=C;this.alignment=F;},getFont:function(){var A=[];A.family=this.getFontFamily();var B=this.getFontSize();if(B!=this.fontSizeDefault){B=B+this.getFontSizeUnit();}A.size=B;A.color=this.getColor();A.backgroundColor=this.getBackgroundColor();A.bold=this.getIsBold();A.italic=this.getIsItalic();A.underline=this.getIsUnderline();A.alignment=this.alignment;return A;},setFont:function(A){this.setFontFamily(A.family==null?this.fontFamilyDefault:A.family);this.setFontSizeAndUnit(A.size);this.setColor(actuate.util.Utility.encodeColor(A.color==null?this.colorDefault:A.color));this.setBackgroundColor(actuate.util.Utility.encodeColor(A.backgroundColor==null?this.backgroundColorDefault:A.backgroundColor));this.isBold=A.bold;this.isItalic=A.italic;this.isUnderline=A.underline;this.alignment=A.alignment;}};actuate.util.Package.define("actuate.dialog.impl.helper.chartbuilder");actuate.dialog.impl.helper.chartbuilder.ParentChartFormatTab=actuate.Class.extendClass(actuate.dialog.impl.helper.chartbuilder.BaseChartFormatTab,{initialize:function(){if(this.__extending){return ;}this._title=actuate.util.Utility.getLocalizedString("chartBuilder.format");actuate.dialog.impl.helper.chartbuilder.BaseChartFormatTab.prototype.initialize.call(this);this._initUnitMap();this.__handleFontSelection_c=actuate.Method.bind(this.__handleFontSelection,this);this._control_titleFont=actuate.widget.ComponentMgr.get(this.id+"_titleFont");this._control_xTitleFont=actuate.widget.ComponentMgr.get(this.id+"_xTitleFont");this._control_xLabelFont=actuate.widget.ComponentMgr.get(this.id+"_xLabelFont");this._control_yTitleFont=actuate.widget.ComponentMgr.get(this.id+"_yTitleFont");this._control_yLabelFont=actuate.widget.ComponentMgr.get(this.id+"_yLabelFont");this._control_theme=actuate.widget.ComponentMgr.get(this.id+"_theme");this._control_themeRow=actuate.widget.ComponentMgr.get(this.id+"_themeRow");this._control_width=actuate.widget.ComponentMgr.get(this.id+"_width");this._control_widthUnit=actuate.widget.ComponentMgr.get(this.id+"_widthUnit");this._control_height=actuate.widget.ComponentMgr.get(this.id+"_height");this._control_heightUnit=actuate.widget.ComponentMgr.get(this.id+"_heightUnit");this._control_subType=actuate.widget.ComponentMgr.get(this.id+"_subType");this._control_dimension=actuate.widget.ComponentMgr.get(this.id+"_dimension");this._control_dimensionRow=actuate.widget.ComponentMgr.get(this.id+"_dimensionRow");this._onChangeDimension_c=actuate.Method.bind(this._onChangeDimension,this);this._control_dimension.registerEventHandler("beforeselect",this._onChangeDimension_c);this._control_showGlassStyleCheckBox=actuate.widget.ComponentMgr.get(this.id+"_useGlassStyle");this._control_showGlassStyleCheckBoxRow=actuate.widget.ComponentMgr.get(this.id+"_useGlassStyleRow");this._control_xshowCategoryLabelCheckbox=actuate.widget.ComponentMgr.get(this.id+"_xshowCategoryLabelCheckbox");this._control_yshowCategoryLabelCheckbox=actuate.widget.ComponentMgr.get(this.id+"_yshowCategoryLabelCheckbox");this._control_staggerCategoryLabelCheckbox=actuate.widget.ComponentMgr.get(this.id+"_staggerCategoryLabelCheckbox");this._control_categoryLabelInterval=actuate.widget.ComponentMgr.get(this.id+"_categoryLabelInterval");this._control_xcategoryLabelRotateInput=actuate.widget.ComponentMgr.get(this.id+"_xcategoryLabelRotateInput");this._onChangeLabelRotate_c=actuate.Method.bind(this._onChangeLabelRotate,this);this._control_xcategoryLabelRotateInput.registerEventHandler("select",this._onChangeLabelRotate_c);this._control_yScaleMinLiteralID=actuate.widget.ComponentMgr.get(this.id+"_yScaleMinLiteralID");this._control_yScaleMaxLiteralID=actuate.widget.ComponentMgr.get(this.id+"_yScaleMaxLiteralID");this._control_autoStep=actuate.widget.ComponentMgr.get(this.id+"_autoStep");this._control_step=actuate.widget.ComponentMgr.get(this.id+"_step");this._control_stepIntervalID=actuate.widget.ComponentMgr.get(this.id+"_stepIntervalID");this._control_stepUnit=actuate.widget.ComponentMgr.get(this.id+"_stepUnit");this._control_xTitle=actuate.widget.ComponentMgr.get(this.id+"_xTitle");this._control_yTitle=actuate.widget.ComponentMgr.get(this.id+"_yTitle");this._control_yRotateLabel=actuate.widget.ComponentMgr.get(this.id+"_ycategoryLabelRotateLabel");this._control_yRotateInput=actuate.widget.ComponentMgr.get(this.id+"_ycategoryLabelRotateInput");this._control_allowZoomRow=actuate.widget.ComponentMgr.get(this.id+"_allowZoomRow");this._control_allowZoomX=actuate.widget.ComponentMgr.get(this.id+"_allowZoomX");this._control_allowZoomY=actuate.widget.ComponentMgr.get(this.id+"_allowZoomY");this._initializeControlStatus();},_initializeControlStatus:function(){this._validateControlArray=[];this._validateControlArray.push(this._control_width);this._validateControlArray.push(this._control_height);this._validateControlArray.push(this._control_categoryLabelInterval);this._validateControlArray.push(this._control_yScaleMinLiteralID);this._validateControlArray.push(this._control_yScaleMaxLiteralID);this._validateControlArray.push(this._control_step);this._validateControlArray.push(this._control_stepIntervalID);},_initContent:function(){this._initChartBaseFontContent();this._initSizeUnit();this._initChartNavigation();this._componentArray=[];var C=this;this._componentArray.push(this._initChartTitle());this._themeStore=new actuate.widget.data.SimpleStore({fields:["value","text"]});var B={xtype:"fieldset",collapsible:true,autoHeight:true,title:actuate.util.Utility.getLocalizedString("chartBuilder.chart"),checkboxToggle:false,defaults:{border:false,header:false,layout:"column",bodyStyle:"padding:2px 4px 2px 4px"},listeners:{collapse:function(){if(C._parentDialog&&C._parentDialog.adjustSize){C._parentDialog.adjustSize();}},expand:function(){if(C._parentDialog&&C._parentDialog.adjustSize){C._parentDialog.adjustSize();}}},items:[{id:this.id+"_themeRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.theme")},{columnWidth:0.42,id:this.id+"_theme",xtype:"combo",editable:false,forceSelection:true,valueField:"value",displayField:"text",store:this._themeStore}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.width")},{columnWidth:0.2,id:this.id+"_width",value:"7",xtype:"textfield",allowBlank:false,validator:function(E){var D=actuate.dialog.impl.Utility.validatePositiveWithoutPlus(E);if(!D){return actuate.util.Utility.getLocalizedString("chartBuilder.numericpositive.errorMessage");}return true;}},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.2,id:this.id+"_widthUnit",xtype:"combo",editable:false,forceSelection:true,value:actuate.dialog.impl.constant.DesignChoice.UNITS_IN,valueField:"value",displayField:"text",store:this._sizeStore}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.height")},{columnWidth:0.2,id:this.id+"_height",value:"3",xtype:"textfield",allowBlank:false,validator:function(E){var D=actuate.dialog.impl.Utility.validatePositiveWithoutPlus(E);if(!D){return actuate.util.Utility.getLocalizedString("chartBuilder.numericpositive.errorMessage");}return true;}},{columnWidth:0.02,xtype:"label",style:"height:1px"},{columnWidth:0.2,id:this.id+"_heightUnit",xtype:"combo",editable:false,forceSelection:true,value:actuate.dialog.impl.constant.DesignChoice.UNITS_IN,valueField:"value",displayField:"text",store:this._sizeStore}]},{items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.subtype")},{columnWidth:0.3,id:this.id+"_subType",xtype:"combo",editable:false,forceSelection:true,editable:false,value:"SideBySide",valueField:"value",displayField:"text",store:this._subTypeComboStore}]},{id:this.id+"_dimensionRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.dimension")},{columnWidth:0.3,id:this.id+"_dimension",xtype:"combo",editable:false,forceSelection:true,value:"0",store:[["0",actuate.util.Utility.getLocalizedString("chartBuilder.2d")],["1",actuate.util.Utility.getLocalizedString("chartBuilder.2dwithDepth")]]}]},{id:this.id+"_useGlassStyleRow",items:[{columnWidth:0.3,id:this.id+"_useGlassStyle",xtype:"checkbox",checked:false,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.useGlassStyle")}]}]};if(this._chartBaseFont){B.items.push(this._chartBaseFont);}if(this._chartTooltipFont){B.items.push(this._chartTooltipFont);}var A={id:this.id+"_allowZoomRow",items:[{columnWidth:0.3,xtype:"label",text:actuate.util.Utility.getLocalizedString("chartBuilder.allowZoomInto")},{columnWidth:0.35,id:this.id+"_allowZoomX",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.categories")},{columnWidth:0.35,id:this.id+"_allowZoomY",xtype:"checkbox",checked:true,boxLabel:actuate.util.Utility.getLocalizedString("chartBuilder.values")}]};B.items.push(A);if(this._showScrollBar){B.items.push(this._showScrollBar);}if(this._timeline){B.items.push(this._timeline);}this._componentArray.push(B);this._componentArray.push(this._initChartLegend());this._componentArray.push(this._initCategoriesFieldSet());this._componentArray.push(this._initValuesFieldSet());},_clearControls:function(){actuate.dialog.impl.helper.chartbuilder.ParentChartFormatTab.superclass._clearControls.apply(this,arguments);this._control_xTitle.setValue("");this._control_yTitle.setValue("");this._control_subType.setSelectedIndex(0);this._control_dimension.setSelectedIndex(0);this._control_showGlassStyleCheckBox.setValue(false);this._control_showGlassStyleCheckBox.setDisabled(false);this._control_showGlassStyleCheckBox.hide();this._control_xshowCategoryLabelCheckbox.setValue(true);this._control_yshowCategoryLabelCheckbox.setValue(true);this._control_staggerCategoryLabelCheckbox.setValue(true);this._control_categoryLabelInterval.setDisabled(true);this._control_categoryLabelInterval.setValue("1");this._control_xcategoryLabelRotateInput.setValue("0");this._control_staggerCategoryLabelCheckbox.setDisabled(false);this._control_yScaleMinLiteralID.setValue("");this._control_yScaleMaxLiteralID.setValue("");this._control_autoStep.setValue(true);this._control_step.setDisabled(true);this._control_step.setValue(1);this._control_stepIntervalID.setDisabled(true);if(this._control_stepUnit){this._control_stepUnit.setDisabled(true);}this._control_stepIntervalID.setValue("");this._control_width.setValue("7");this._control_widthUnit.setValue(actuate.dialog.impl.constant.DesignChoice.UNITS_IN);this._control_height.setValue("3");this._control_heightUnit.setValue(actuate.dialog.impl.constant.DesignChoice.UNITS_IN);this._control_theme.setSelectedIndex(0);if(this._themeStore){for(var A=0;A<this._themeStore.getCount();A++){if(this._themeStore.getAt(A)&&this._themeStore.getAt(A).get("value")=="ThemesReportItems.Modern"){this._control_theme.setValue("ThemesReportItems.Modern");break;}}}this._control_allowZoomX.setValue(true);this._control_allowZoomY.setValue(true);this._control_yRotateInput.setValue("0");this._clearChartNavigation();},loadData:function(G){actuate.dialog.impl.helper.chartbuilder.ParentChartFormatTab.superclass.loadData.apply(this,arguments);if(this._isFlashChart==true){this._control_themeRow.hide();this._control_dimensionRow.show();this._control_allowZoomRow.hide();this._control_legendTitleRow.show();this._control_yRotateLabel.hide();this._control_yRotateInput.hide();this._navigationScrollBarCheckBox.hide();this._showHideTimeLine(false);}else{if(this._isFlashChart==false){this._control_themeRow.show();this._control_dimensionRow.hide();this._control_allowZoomRow.show();this._control_legendTitleRow.hide();this._control_yRotateLabel.show();this._control_yRotateInput.show();var K=G[actuate.model.Constant.MetadataType.THEMES];if(K&&K.length>0){this._themeStore.removeAll();for(var H=0;H<K.length;H++){var N=new this._themeStore.recordType({value:K[H],text:K[H].replace("ThemesReportItems.","")});this._themeStore.add(N);}}this._control_theme.setSelectedIndex(0);if(this._themeStore){for(var F=0;F<this._themeStore.getCount();F++){if(this._themeStore.getAt(F)&&this._themeStore.getAt(F).get("value")=="ThemesReportItems.Modern"){this._control_theme.setValue("ThemesReportItems.Modern");break;}}}this._updateChartNavigation();}}if(this.chart&&(this.chart.type=="FLASHCHART"||this.chart.type=="CHART")){this.chartSubType=this.chart.chartSubType;var A=this._subTypeComboStore.query("value",this.chartSubType).itemAt(0);if(A){this._control_subType.setValue(this.chartSubType);}var E=this.chart.dimension;this._control_dimension.setValue(E);this._control_showGlassStyleCheckBox.hide();if(this._updateLegend){this._updateLegend();}if(this.chart.xAxis&&this.chart.xAxis.categoryLabels){var D=this.chart.xAxis.categoryLabels.visible;this._control_xshowCategoryLabelCheckbox.setValue(D);if(D){this._control_xcategoryLabelRotateInput.setDisabled(false);var O=this.chart.xAxis.categoryLabels.rotation;O=(O/1)|0;this._control_xcategoryLabelRotateInput.setValue(O);this._onChangeLabelRotate();}else{this._control_xcategoryLabelRotateInput.setDisabled(true);}var C=this.chart.xAxis.categoryLabels.interval;if(C){this._control_categoryLabelInterval.setValue(C);}var B=this.chart.xAxis.categoryLabels.stagger;if(this._isFlashChart==false){this._control_staggerCategoryLabelCheckbox.setValue(B?true:false);}}if(this.chart.xAxis&&this.chart.xAxis.title){this._control_xTitle.setValue(this.chart.xAxis.title);}if(this.chart.yAxis&&this.chart.yAxis[0]){if(this.chart.yAxis[0]&&this.chart.yAxis[0].scale){if(this.chart.yAxis[0].scale.min!=undefined){this._control_yScaleMinLiteralID.setValue(this.chart.yAxis[0].scale.min+"");}if(this.chart.yAxis[0].scale.max!=undefined){this._control_yScaleMaxLiteralID.setValue(this.chart.yAxis[0].scale.max+"");}if(this._isFlashChart==true){if(this.chart.yAxis[0].scale.stepNumber==0){this._control_autoStep.setValue(true);}else{this._control_autoStep.setValue(false);this._control_step.setValue(this.chart.yAxis[0].scale.stepNumber);}}else{if(this._isFlashChart==false){if(this.chart.yAxis[0].scale.step==""||this.chart.yAxis[0].scale.step==undefined){this._control_autoStep.setValue(true);}else{this._control_autoStep.setValue(false);this._control_stepIntervalID.setValue(this.chart.yAxis[0].scale.step);}if(this._control_stepUnit&&this.chart.yAxis[0].scale.stepUnit!=""&&this.chart.yAxis[0].scale.stepUnit!=undefined){this._control_stepUnit.setValue(this.chart.yAxis[0].scale.stepUnit);}}}}if(this.chart.yAxis[0]&&this.chart.yAxis[0].title){this._control_yTitle.setValue(this.chart.yAxis[0].title);}this._control_yshowCategoryLabelCheckbox.setValue(this.chart.yAxis[0].categoryLabels.visible);if(this.chart.yAxis[0]&&this.chart.yAxis[0].categoryLabels){var I=this.chart.yAxis[0].categoryLabels;if(I.rotation&&actuate.util.String.trim(I.rotation)>0){this._control_yRotateInput.setValue(I.rotation);}else{this._control_yRotateInput.setValue("0");}}}var J=this.chart.width;var M=this.getUnit(J);var L=J.split(M)[0];this._control_width.setValue(L);this._control_widthUnit.setValue(M);var J=this.chart.height;var M=this.getUnit(J);var L=J.split(M)[0];this._control_height.setValue(L);this._control_heightUnit.setValue(M);if(this._isFlashChart==false){if(this.chart.theme){this._control_theme.setValue(this.chart.theme);}if(this.chart.allowZoomX){this._control_allowZoomX.setValue(this.chart.allowZoomX);}else{this._control_allowZoomX.setValue(false);}if(this.chart.allowZoomY){this._control_allowZoomY.setValue(this.chart.allowZoomY);}else{this._control_allowZoomY.setValue(false);}}}else{if(G.gadgetAttr){this._udpateSizeFromGadgetContainer(G.gadgetAttr);}}if(!this.hidden){this._enableType();}},_initUnitMap:function(){this._allUnitMap=new Array();this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_PT]="chartFormatDialog.Unit.PT";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_PC]="chartFormatDialog.Unit.PC";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_PERCENTAGE]="chartFormatDialog.Unit.Percentage";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_CM]="chartFormatDialog.Unit.CM";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_MM]="chartFormatDialog.Unit.MM";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_IN]="chartFormatDialog.Unit.IN";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_EM]="chartFormatDialog.Unit.EM";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_EX]="chartFormatDialog.Unit.EX";this._allUnitMap[actuate.dialog.impl.constant.DesignChoice.UNITS_PX]="chartFormatDialog.Unit.PX";},getUnit:function(C){var B=actuate.dialog.impl.constant.DesignChoice.UNITS_IN;for(var A in this._allUnitMap){if(C.indexOf(A)>-1){B=A;break;}}return B;},_enableType:function(){var A=this._parentDialog.getPanel("actuate_dialog_impl_helper_chartbuilder_chartTypeTab");if(A&&!A.hidden){A.updateType("Parent Chart");}},validate:function(){if(!actuate.dialog.impl.helper.chartbuilder.ParentChartFormatTab.superclass.validate.apply(this,arguments)){return false;}var B=this._control_yScaleMinLiteralID.getValue();var A=this._control_yScaleMaxLiteralID.getValue();if(B!=""&&A!=""&&parseFloat(B)>=parseFloat(A)){actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("chartBuilder.alertTitle"),actuate.util.Utility.getLocalizedString("chartBuilder.maxLessThanMin"));return false;}return true;},createSoapNode:function(A,B){this.createTypeNode(B,A);this.createAppearanceNode(B,A);A.appendChild(this.createLabelsNode(B));},createTypeNode:function(D,A){var F;var I=A.getElementsByTagName(actuate.Constant.tag.ChartType);if(I==null||I.length==0){F=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.ChartType);A.appendChild(F);}else{F=I[0];}var B=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.ChartSubType);var H=D.createTextNode(this._control_subType.getValue());B.appendChild(H);F.appendChild(B);if(this._isFlashChart==true){var E=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Dimention);var C=D.createTextNode(this._control_dimension.getValue());E.appendChild(C);var G=A.getElementsByTagName(actuate.Constant.tag.Apperance);if(G==null||G.length==0){appearance=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Apperance);A.appendChild(appearance);appearance.appendChild(E);}else{G[0].appendChild(E);}}},createAppearanceNode:function(M,d){var e;var U=d.getElementsByTagName(actuate.Constant.tag.Apperance);if(U==null||U.length==0){e=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.Apperance);d.appendChild(e);}else{e=U[0];}if(this._isFlashChart==false){var x=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.Theme);var R=actuate.util.String.trim(this._control_theme.getValue());var z=M.createTextNode(R);x.appendChild(z);e.appendChild(x);var t=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.AllowZoomX);var w=M.createTextNode(this._control_allowZoomX.getValue()==true?"true":"false");t.appendChild(w);e.appendChild(t);var g=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.AllowZoomY);var V=M.createTextNode(this._control_allowZoomY.getValue()==true?"true":"false");g.appendChild(V);e.appendChild(g);this._addChartNavigationToResponse(M,e);}var I=actuate.util.Utility.getNumberFormatter();var C=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.ChartWidth);var A;var k=actuate.util.String.trim(this._control_width.getValue());if(k==""){A=M.createTextNode("");}else{A=M.createTextNode(I.parse(this._control_width.getValue())+this._control_widthUnit.getValue());}C.appendChild(A);e.appendChild(C);var f=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.ChartHeight);var D;var u=actuate.util.String.trim(this._control_height.getValue());if(u==""){D=M.createTextNode("");}else{D=M.createTextNode(I.parse(this._control_height.getValue())+this._control_heightUnit.getValue());}f.appendChild(D);e.appendChild(f);this._addChartLegendToResponse(M,e);var a=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.ShowCategoryXLabels);var B=M.createTextNode(this._control_xshowCategoryLabelCheckbox.checked?"true":"false");a.appendChild(B);e.appendChild(a);var o=this._control_xcategoryLabelRotateInput.getValue();if(o==null||o.length==0){o="0.0";}var s=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.CategoryXLabelsRotateDegrees);var m=M.createTextNode(o);s.appendChild(m);e.appendChild(s);var Z=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.StaggerCategoryLabels);var X=M.createTextNode(this._control_staggerCategoryLabelCheckbox.checked?"true":"false");Z.appendChild(X);e.appendChild(Z);var b=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.CategoryLabelsInterval);var Y=M.createTextNode(this._control_categoryLabelInterval.getValue()==""?"1":this._control_categoryLabelInterval.getValue());b.appendChild(Y);e.appendChild(b);var O=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.ScaleForYAxis);var F=this._control_yScaleMinLiteralID.getValue();var v=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.MinValue);if(this._control_yScaleMinLiteralID.xtype=="datefield"){F=this._formatDate(F);}v.appendChild(M.createTextNode(F?F:""));O.appendChild(v);var S=this._control_yScaleMaxLiteralID.getValue();var y=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.MaxValue);if(this._control_yScaleMaxLiteralID.xtype=="datefield"){S=this._formatDate(S);}y.appendChild(M.createTextNode(S?S:""));O.appendChild(y);if(this._isFlashChart==true){var l=this._control_autoStep.checked?"0":this._control_step.getValue();var Q=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.StepNumber);var K=M.createTextNode(l);}else{if(this._isFlashChart==false){var l=this._control_autoStep.checked?"":this._control_stepIntervalID.getValue();var Q=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.Step);var K=M.createTextNode(l);if(this._control_stepUnit){var l=this._control_stepUnit.getValue();var J=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.StepUnit);var E=M.createTextNode(l);J.appendChild(E);O.appendChild(J);}}}Q.appendChild(K);O.appendChild(Q);if(O.childNodes.length>0){e.appendChild(O);}var q=this._control_yRotateInput.getValue();if(q==null){q="0.0";}var L=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.CategoryYLabelsRotateDegrees);var G=M.createTextNode(q);L.appendChild(G);e.appendChild(L);var h;var T=e.getElementsByTagName("YAxes");if(T==null||T.length==0){h=actuate.util.XmlDom.createElement(M,"YAxes");e.appendChild(h);}else{h=T[0];}var r=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.Y_Axis);var j=M.createTextNode(this._control_yTitle.getValue());r.appendChild(j);var N=actuate.util.XmlDom.createElement(M,"YAxisTitleVisible");var H=M.createTextNode("true");N.appendChild(H);var c=actuate.util.XmlDom.createElement(M,actuate.Constant.tag.ShowCategoryYLabels);var P=M.createTextNode(this._control_yshowCategoryLabelCheckbox.checked?"true":"false");c.appendChild(P);var p;var n;var W=h.getElementsByTagName("YAxis");if(W==null||W.length==0){p=actuate.util.XmlDom.createElement(M,"YAxis");n=actuate.util.XmlDom.createElement(M,"YAxis");h.appendChild(p);h.appendChild(n);p.appendChild(O);n.appendChild(O);p.appendChild(r);n.appendChild(r);p.appendChild(N);n.appendChild(N);p.appendChild(c);n.appendChild(c);}else{W[0].appendChild(O);W[0].appendChild(r);W[0].appendChild(N);W[0].appendChild(c);if(W.length>1){W[1].appendChild(O);W[1].appendChild(r);W[1].appendChild(N);W[1].appendChild(c);}}},_formatDate:function(A){if(!A){return null;}return A.format(actuate.util.Constants.LOCALE_NEUTRAL_DATE_FORMAT);},_okPress:function(){},_onChangeDimension:function(C,B){var A=B.json[0];if(A==1){this._control_showGlassStyleCheckBox.disable();this._control_showGlassStyleCheckBox.setValue(false);}else{this._control_showGlassStyleCheckBox.enable();}},_onChangeLabelRotate:function(){if(this._isFlashChart){var A=this._control_xcategoryLabelRotateInput.getValue();if(A=="0"||A==0){this._control_staggerCategoryLabelCheckbox.setDisabled(false);}else{this._control_staggerCategoryLabelCheckbox.setDisabled(true);this._control_staggerCategoryLabelCheckbox.setValue(false);}}}});