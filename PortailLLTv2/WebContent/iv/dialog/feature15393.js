actuate.util.Package.define("actuate.dialog.impl.helper");actuate.dialog.impl.helper.AdvancedFilterDialog=actuate.Class.create();actuate.dialog.impl.helper.AdvancedFilterDialog.superclass=actuate.dialog.impl.helper.AbstractIVDialog.prototype;actuate.dialog.impl.helper.AdvancedFilterDialog.prototype=actuate.Class.extend(new actuate.dialog.impl.helper.AbstractIVDialog(),{_classname:"actuate.dialog.AdvancedFilterDialog",_htmlElements:{"_filterBy":null,"_value1":null,"_filterValuePickerDiv1":null,"_radioByValue1":null,"_radioByColumn1":null,"_valueValueBlock1":null,"_textValue1Div":null,"_value1InputDiv":null,"_value1Text":null,"_ListSelectedValues":null,"_DateImg1":null,"_SelectValuesLink1":null,"_valueColumnBlock1":null,"_ValueByColumnList1":null,"_advAnyOfListValuesDiv":null,"_advAnyOfListValuesLink":null,"_advAnyOfDeleteValuesLink":null,"_value2":null,"_filterValuePickerDiv2":null,"_radioByValue2":null,"_radioByColumn2":null,"_valueValueBlock2":null,"_textValue2Div":null,"_value2InputDiv":null,"_value2Text":null,"_DateImg2":null,"_SelectValuesLink2":null,"_valueColumnBlock2":null,"_ValueByColumnList2":null,"_SelectValuesDiv":null,"_FilterText":null,"_FindButton":null,"_FindRow":null,"_ValuesList":null,"_Calendar":null,"_FormatHintMessage":null,"_button_addCondition":null,"_button_changeCondition":null,"_class_filter":null,"_button_andSymbol":null,"_button_orSymbol":null,"_button_notSymbol":null,"_button_leftBracketSymbol":null,"_button_rightBracketSymbol":null,"_button_deleteSymbol":null,"_button_validateSymbol":null,"_condition":null,"_previous":null,"_next":null,"_filterTextLabel":null,"_recalculateTotalsDiv":null},OP_TYPE_0_OPERAND:0,OP_TYPE_1_OPERAND:1,OP_TYPE_2_OPERAND:2,OP_TYPE_N_OPERAND:3,_width:581,_allowMeasureFilter:false,_cubeMode:false,_filterText:"",_popupEmptyCondition:true,initialize:function(){var E=this._getId(this._classname);this._applyHtmlElementsNames(E);actuate.dialog.impl.helper.AdvancedFilterDialog.superclass.initialize.call(this,E);this.columnName=null;this.bindingName=null;this.columnDataTypeCode=null;this.ivBoundDataColumnList=null;this.clearFilterFlag="false";this.valuesLoadedFlag="false";this.idFormatHintMessage=document.getElementById(this._htmlElements["_FormatHintMessage"]);this.opCategory=new Array(3);this.opCategory[0]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_NULL,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TRUE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_FALSE);this.opCategory[1]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_EQ,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LIKE,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE);this.opCategory[2]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN);this.opCategory[3]=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN);this.topBottomOpGroup=new Array(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT);this.textEq=actuate.util.Utility.getLocalizedString("filterDialog.text.Eq");this.textNe=actuate.util.Utility.getLocalizedString("filterDialog.text.Ne");this.textLt=actuate.util.Utility.getLocalizedString("filterDialog.text.Lt");this.textLe=actuate.util.Utility.getLocalizedString("filterDialog.text.Le");this.textGt=actuate.util.Utility.getLocalizedString("filterDialog.text.Gt");this.textGe=actuate.util.Utility.getLocalizedString("filterDialog.text.Ge");this.textBetween=actuate.util.Utility.getLocalizedString("filterDialog.text.Between");this.textNotbetween=actuate.util.Utility.getLocalizedString("filterDialog.text.Notbetween");this.textIsnull=actuate.util.Utility.getLocalizedString("filterDialog.text.Isnull");this.textIsnotnull=actuate.util.Utility.getLocalizedString("filterDialog.text.Isnotnull");this.textIstrue=actuate.util.Utility.getLocalizedString("filterDialog.text.Istrue");this.textIsfalse=actuate.util.Utility.getLocalizedString("filterDialog.text.Isfalse");this.textLike=actuate.util.Utility.getLocalizedString("filterDialog.text.Like");this.textNotLike=actuate.util.Utility.getLocalizedString("filterDialog.text.NotLike");this.textTopn=actuate.util.Utility.getLocalizedString("filterDialog.text.Topn");this.textBottomn=actuate.util.Utility.getLocalizedString("filterDialog.text.Bottomn");this.textToppercent=actuate.util.Utility.getLocalizedString("filterDialog.text.Toppercent");this.textBottompercent=actuate.util.Utility.getLocalizedString("filterDialog.text.Bottompercent");this.textIn=actuate.util.Utility.getLocalizedString("filterDialog.text.In");this.textNotIn=actuate.util.Utility.getLocalizedString("filterDialog.text.NotIn");this.MsgMissingQuotes=actuate.util.Utility.getLocalizedString("filterDialog.text.MsgMissingQuotes");this.conditionEq=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_EQ;this.conditionNe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NE;this.conditionLt=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LT;this.conditionLe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LE;this.conditionGt=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GT;this.conditionGe=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_GE;this.conditionBetween=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN;this.conditionNotbetween=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN;this.conditionIsnull=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NULL;this.conditionIsnotnull=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_NULL;this.conditionIstrue=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TRUE;this.conditionIsfalse=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_FALSE;this.conditionLike=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_LIKE;this.conditionNotLike=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE;this.conditionTopn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_N;this.conditionBottomn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N;this.conditionToppercent=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT;this.conditionBottompercent=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT;this.conditionIn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN;this.conditionNotIn=actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN;this._operatorMap=[];this._operatorMap[this.conditionEq]=this.textEq;this._operatorMap[this.conditionNe]=this.textNe;this._operatorMap[this.conditionLt]=this.textLt;this._operatorMap[this.conditionLe]=this.textLe;this._operatorMap[this.conditionGt]=this.textGt;this._operatorMap[this.conditionGe]=this.textGe;this._operatorMap[this.conditionBetween]=this.textBetween;this._operatorMap[this.conditionNotBetween]=this.textNotbetween;this._operatorMap[this.conditionIsnull]=this.textIsnull;this._operatorMap[this.conditionIsnotnull]=this.textIsnotnull;this._operatorMap[this.conditionIstrue]=this.textIstrue;this._operatorMap[this.conditionIsfalse]=this.textIsfalse;this._operatorMap[this.conditionIsLike]=this.textIsLike;this._operatorMap[this.conditionIsNotLike]=this.textIsNotLike;this._operatorMap[this.conditionTopn]=this.textTopn;this._operatorMap[this.conditionBottomn]=this.textBottomn;this._operatorMap[this.conditionToppercent]=this.textToppercent;this._operatorMap[this.conditionBottompercent]=this.textBottompercent;this._operatorMap[this.conditionIn]=this.textIn;this._operatorMap[this.conditionNotIn]=this.textNotIn;this.idValueBlock=[];this.idValueBlock.push(document.getElementById(this._htmlElements["_value1"]));this.idValueBlock.push(document.getElementById(this._htmlElements["_value2"]));this.idValueTextDiv=[];this.idValueTextDiv.push(document.getElementById(this._htmlElements["_textValue1Div"]));this.idValueTextDiv.push(document.getElementById(this._htmlElements["_textValue2Div"]));var H=document.getElementById(this._htmlElements["_value1InputDiv"]);this.value1Text=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX});this.value1Text.render(H);var J=document.getElementById(this._htmlElements["_value2InputDiv"]);this.value2Text=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX});this.value2Text.render(J);this.idValueInput=[];this.idValueInput.push(this.value1Text);this.idValueInput.push(this.value2Text);this.idValueInput[0].registerEventHandler("keyup",actuate.Method.bind(this.__neh_value1Change,this),false);this.idValueInput[1].registerEventHandler("keyup",actuate.Method.bind(this.__neh_value2Change,this),false);this.idMoreValueEnableLink=[];this.idMoreValueEnableLink.push(document.getElementById(this._htmlElements["_SelectValuesLink1"]));this.idMoreValueEnableLink.push(document.getElementById(this._htmlElements["_SelectValuesLink2"]));actuate.util.Event.observe(this.idMoreValueEnableLink[0],"click",actuate.Method.bind(this._neh_SelectValuesLink1,this),false);actuate.util.Event.observe(this.idMoreValueEnableLink[1],"click",actuate.Method.bind(this._neh_SelectValuesLink2,this),false);this.idAnyOfListValuesLink=document.getElementById(this._htmlElements["_advAnyOfListValuesLink"]);actuate.util.Event.observe(document.getElementById(this._htmlElements["_advAnyOfListValuesLink"]),"click",actuate.Method.bind(this._neh_AnyOfSelectValuesLink,this),false);actuate.util.Event.observe(document.getElementById(this._htmlElements["_advAnyOfDeleteValuesLink"]),"click",actuate.Method.bind(this._neh_DeleteValuesLink,this),false);this.stateMoreValue=[false,false];this.idCalendar=document.getElementById(this._htmlElements["_Calendar"]);this.cal=document.getElementById("outerCalendarDiv");this.idDateImg=[];this.idDateImg.push(document.getElementById(this._htmlElements["_DateImg1"]));this.idDateImg.push(document.getElementById(this._htmlElements["_DateImg2"]));this.__neh_CalendarDivClick_c=actuate.Method.bind(this.__neh_CalendarDivClick,this);actuate.util.Event.observe(this.idCalendar,"click",this.__neh_CalendarDivClick_c,false);this.__neh_CalendarDivChange_c=actuate.Method.bind(this.__neh_CalendarDivChange,this);actuate.util.Event.observe(this.idCalendar,"change",this.__neh_CalendarDivChange_c,false);this.__neh_CalendarClick1_c=actuate.Method.bind(this.__neh_CalendarClick1,this);actuate.util.Event.observe(this.idDateImg[0],"click",this.__neh_CalendarClick1_c,false);this.__neh_CalendarClick2_c=actuate.Method.bind(this.__neh_CalendarClick2,this);actuate.util.Event.observe(this.idDateImg[1],"click",this.__neh_CalendarClick2_c,false);this.__neh_changeCondition_c=actuate.Method.bind(this.__neh_changeCondition,this);this._operator=new actuate.uiadapter.ComboBox({editable:false,width:320});this._operator.render(document.getElementById(this._htmlElements["_condition"]));this._operator.registerEventHandler("select",this.__neh_changeCondition_c);this.idInOPValuesSelectDiv=document.getElementById(this._htmlElements["_ListSelectedValues"]);this.idInOPValuesSelect=new actuate.uiadapter.ListBox({width:320,height:50,enableKeyEvents:true,renderTo:this.idInOPValuesSelectDiv});var I=this;this.idInOPValuesSelect.registerEventHandler("keyup",function(N,M){if(M.stopPropagation){M.stopPropagation();}else{M.cancelBubble=true;}if(M.keyCode==M.DELETE){I._neh_DeleteValuesLink();}M.preventDefault();});this.idInOPValuesSelect.registerEventHandler("select",function(O,N){var M=I.idInOPValuesSelect.getLength()>0&&I.idInOPValuesSelect.getSelectedIndex()>=0;I.enableConditionButton(I.idAnyOfDeleteValuesLink,M);});this.__neh_InOPValuesFocus_c=actuate.Method.bind(this.__neh_InOPValuesFocus,this);this.idInOPValuesSelect.registerEventHandler("focus",this.__neh_InOPValuesFocus_c);this.idSelectValuesDiv=document.getElementById(this._htmlElements["_SelectValuesDiv"]);this.resultSetNameDiv=document.getElementById(this._htmlElements["_filterBy"]);this.resultSetName=new actuate.uiadapter.ComboBox({editable:false,width:320,valueField:"value",displayField:"text"});this.resultSetName.render(this.resultSetNameDiv);this.__neh_changeResultSet_c=actuate.Method.bind(this.__neh_changeResultSet,this);this.resultSetName.registerEventHandler("select",this.__neh_changeResultSet_c);this.deleteButton=document.getElementById(this._htmlElements["_button_deleteSymbol"]);this.__neh_clickDeleteButton_c=actuate.Method.bind(this.__neh_clickDeleteButton,this);actuate.util.Event.observe(this.deleteButton,"mousedown",this.__neh_clickDeleteButton_c,false);this._filterListDiv=document.getElementById(this._htmlElements["_class_filter"]);if(actuate.widget.form!=null){this._levelFilterLabel=new actuate.widget.form.Label({width:30,renderTo:this._filterListDiv,text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.levelFilters")});}this._filterList=new actuate.uiadapter.ListBox({width:350,height:80,renderTo:this._filterListDiv});this.__neh_changeFilterConditionSelection_c=actuate.Method.bind2(this.__neh_changeFilterConditionSelection,this);this._filterList.registerEventHandler("select",this.__neh_changeFilterConditionSelection_c);if(actuate.widget.form!=null){this._measureFilterLabel=new actuate.widget.form.Label({width:30,renderTo:this._filterListDiv,text:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.measureFilters")});}this._measureFilterList=new actuate.uiadapter.ListBox({width:350,height:80,renderTo:this._filterListDiv});this.__neh_changeMeasureFilterConditionSelection_c=actuate.Method.bind2(this.__neh_changeMeasureFilterConditionSelection,this);this._measureFilterList.registerEventHandler("select",this.__neh_changeMeasureFilterConditionSelection_c);this.andButton=document.getElementById(this._htmlElements["_button_andSymbol"]);this.__neh_clickAndButton_c=actuate.Method.bind(this.__neh_clickAndButton,this);actuate.util.Event.observe(this.andButton,"mousedown",this.__neh_clickAndButton_c,false);this.orButton=document.getElementById(this._htmlElements["_button_orSymbol"]);this.__neh_clickOrButton_c=actuate.Method.bind(this.__neh_clickOrButton,this);actuate.util.Event.observe(this.orButton,"mousedown",this.__neh_clickOrButton_c,false);this.notButton=document.getElementById(this._htmlElements["_button_notSymbol"]);this.__neh_clickNotButton_c=actuate.Method.bind(this.__neh_clickNotButton,this);actuate.util.Event.observe(this.notButton,"mousedown",this.__neh_clickNotButton_c,false);this.leftBracketButton=document.getElementById(this._htmlElements["_button_leftBracketSymbol"]);this.__neh_clickLeftBracketButton_c=actuate.Method.bind(this.__neh_clickLeftBracketButton,this);actuate.util.Event.observe(this.leftBracketButton,"mousedown",this.__neh_clickLeftBracketButton_c,false);this.rightBracketButton=document.getElementById(this._htmlElements["_button_rightBracketSymbol"]);this.__neh_clickRightBracketButton_c=actuate.Method.bind(this.__neh_clickRightBracketButton,this);actuate.util.Event.observe(this.rightBracketButton,"mousedown",this.__neh_clickRightBracketButton_c,false);this.addConditionButton=document.getElementById(this._htmlElements["_button_addCondition"]);this.__neh_clickAddConditionButton_c=actuate.Method.bind(this.__neh_clickAddConditionButton,this);actuate.util.Event.observe(this.addConditionButton,"click",this.__neh_clickAddConditionButton_c,false);this.changeConditionButton=document.getElementById(this._htmlElements["_button_changeCondition"]);this.__neh_clickChangeConditionButton_c=actuate.Method.bind(this.__neh_clickChangeConditionButton,this);actuate.util.Event.observe(this.changeConditionButton,"mousedown",this.__neh_clickChangeConditionButton_c,false);this.validateButton=document.getElementById(this._htmlElements["_button_validateSymbol"]);this.__neh_clickValidateButton_c=actuate.Method.bind(this.__neh_clickValidateButton,this);actuate.util.Event.observe(this.validateButton,"mousedown",this.__neh_clickValidateButton_c,false);this.idFindRow=document.getElementById(this._htmlElements["_FindRow"]);this.idFilterTextLabel=document.getElementById(this._htmlElements["_filterTextLabel"]);this.idFilterText=new actuate.uiadapter.TextField({cls:"valueTextBox "+actuate.dialog.impl.constant.CSS_INPUTBOX,name:"filterText"});this.idFilterText.render(this._htmlElements["_FilterText"]);this.idFindButton=new actuate.uiadapter.Button({text:actuate.util.Utility.getLocalizedString("filterDialog.text.find")});this.idFindButton.render(this._htmlElements["_FindButton"]);this.idValuesListDiv=document.getElementById(this._htmlElements["_ValuesList"]);this.idValuesList=new actuate.uiadapter.ListBox({width:320,height:100,renderTo:this.idValuesListDiv});this.__neh_FindClick_c=actuate.Method.bind(this.__neh_FindClick,this);this.idFindButton.registerEventHandler("click",this.__neh_FindClick_c,false);this.__neh_ListClick_c=actuate.Method.bind(this.__neh_ListClick,this);this.idValuesList.registerEventHandler("select",this.__neh_ListClick_c);this.__neh_FilterTextChange_c=actuate.Method.bind(this.__neh_FilterTextChange,this);this.idFilterText.registerEventHandler("keypress",this.__neh_FilterTextChange_c,false);this.selectedConditionChangedFlag=false;var G=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX+" filterValuePickerRadio",name:"filterValuePickerGroup1",value:"By Column",boxLabel:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByColumn"),label:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByColumn"),labelWidth:"220px"});var D=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX+" filterValuePickerRadio",name:"filterValuePickerGroup1",value:"By Value",boxLabel:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByValue"),label:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByValue"),checked:true,labelWidth:"175px"});var F=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX+" filterValuePickerRadio",name:"filterValuePickerGroup2",value:"By Column",boxLabel:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByColumn"),label:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByColumn"),labelWidth:"220px"});var B=new actuate.uiadapter.Radio({cls:actuate.dialog.impl.constant.CSS_INPUTBOX+" filterValuePickerRadio",name:"filterValuePickerGroup2",value:"By Value",boxLabel:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByValue"),label:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.radioByValue"),checked:true,labelWidth:"175px"});G.render(this._htmlElements["_radioByColumn1"]);F.render(this._htmlElements["_radioByColumn2"]);D.render(this._htmlElements["_radioByValue1"]);B.render(this._htmlElements["_radioByValue2"]);this.idRadioByColumn=[];this.idRadioByColumn.push(G);this.idRadioByColumn.push(F);this.idRadioByValue=[];this.idRadioByValue.push(D);this.idRadioByValue.push(B);this.valueValueBlock=[];this.valueValueBlock.push(document.getElementById(this._htmlElements["_valueValueBlock1"]));this.valueValueBlock.push(document.getElementById(this._htmlElements["_valueValueBlock2"]));this.valueColumnBlock=[];this.valueColumnBlock.push(document.getElementById(this._htmlElements["_valueColumnBlock1"]));this.valueColumnBlock.push(document.getElementById(this._htmlElements["_valueColumnBlock2"]));this.valueColumnList=[];var C=document.getElementById(this._htmlElements["_ValueByColumnList1"]);var L=new actuate.uiadapter.ComboBox({editable:false,width:320});L.render(C);var A=document.getElementById(this._htmlElements["_ValueByColumnList2"]);var K=new actuate.uiadapter.ComboBox({editable:false,width:320});K.render(A);this.valueColumnList.push(L);this.valueColumnList.push(K);this.__neh_filterValuePickerGroupClick1_c=actuate.Method.bind(this.__neh_filterValuePickerGroupClick1,this);this.idRadioByValue[0].registerEventHandler("check",this.__neh_filterValuePickerGroupClick1_c);this.idRadioByColumn[0].registerEventHandler("check",this.__neh_filterValuePickerGroupClick1_c);this.__neh_filterValuePickerGroupClick2_c=actuate.Method.bind(this.__neh_filterValuePickerGroupClick2,this);this.idRadioByValue[1].registerEventHandler("check",this.__neh_filterValuePickerGroupClick2_c);this.idRadioByColumn[1].registerEventHandler("check",this.__neh_filterValuePickerGroupClick2_c);this.filterValuePickerDiv=[];this.filterValuePickerDiv.push(document.getElementById(this._htmlElements["_filterValuePickerDiv1"]));this.filterValuePickerDiv.push(document.getElementById(this._htmlElements["_filterValuePickerDiv2"]));this.whichButton=null;this.idAnyOfDeleteValuesLink=document.getElementById(this._htmlElements["_advAnyOfDeleteValuesLink"]);this.idAnyOfListValuesDiv=document.getElementById(this._htmlElements["_advAnyOfListValuesDiv"]);this.FocusAfterCalendarFlag=false;this.idPrevious=document.getElementById(this._htmlElements["_previous"]);this.idNext=document.getElementById(this._htmlElements["_next"]);this._previousClick_c=actuate.Method.bind(this._previousClick,this);actuate.util.Event.observe(this.idPrevious,"click",this._previousClick_c,false);this._nextClick_c=actuate.Method.bind(this._nextClick,this);actuate.util.Event.observe(this.idNext,"click",this._nextClick_c,false);this._rowCount=0;this._prevCursor=-1;this._currCursor=-1;this._filterManager=new actuate.dialog.impl.helper.FilterManager();this._measureFilterManager=new actuate.dialog.impl.helper.FilterManager();this._filterView={manager:this._filterManager,list:this._filterList};this._measureFilterView={manager:this._measureFilterManager,list:this._measureFilterList};this.columnValues=null;this.recalculateTotals=new actuate.uiadapter.Checkbox({cls:actuate.dialog.impl.constant.CSS_INPUTBOX,boxLabel:actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.recalculateTotals"),checked:true});this.recalculateTotals.render(this._htmlElements["_recalculateTotalsDiv"]);},_localBind:function(C){if(!C){return ;}var D=C[actuate.model.Constant.MetadataType.ELEMENT];if(D&&D.type){if(D.type==actuate.Constant.element.SUMMARYTABLE||D.type==actuate.Constant.element.TABLE){this.recalculateTotals.show();}else{this.recalculateTotals.hide();}}if(C.messageList){var B=C.messageList;var J=B[0];if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,J);}}else{if(C.resultSetData){this._prevCursor=C.prevCursor;this._currCursor=C.currCursor;this.showData(C.resultSetData);}else{this._resetAll();this._cubeMode=(C.Base&&C.Base.isCube)?true:false;this._allowMeasureFilter=(C.Base&&C.Base.isCube)?true:false;this._measureFilterList.setVisibility(this._allowMeasureFilter);if(this._measureFilterLabel!=null&&this._levelFilterLabel!=null){this._levelFilterLabel.setVisibility(this._allowMeasureFilter);this._measureFilterLabel.setVisibility(this._allowMeasureFilter);}this._measureFilterList.setSelectedIndex(0);if(C.operationData){for(var E=0;E<C.operationData.length;E++){if(C.operationData[E] instanceof actuate.data.ResultSetData){this.columnValues=C.operationData[E];}else{if(C.operationData[E] instanceof actuate.data.ConditionLine){var G=C.operationData[E];if(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN_NEW==G.getOperator()){G.setOperator(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN);}else{if(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN_NEW==G.getOperator()){G.setOperator(actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN);}}if(this._allowMeasureFilter){var H;var A=C[actuate.model.Constant.MetadataType.BINDING];if(A[G._row]){H=A[G._row].bindingType;}if(H&&H=="measure"){this._measureFilterManager.insertConditionLine(G,1);}else{this._filterManager.insertConditionLine(G,1);}}else{this._filterManager.insertConditionLine(G,1);}}}}}var I=this._showFilter(C);this.showMoreValuesListBox();this._popupEmptyCondition=true;if(!I){var F=this.resultSetName.getValueAt(0);if(F){this.resultSetName.setValue(F);this.__neh_changeResultSet();}}}}this.adjustSize();},_previousClick:function(){if(this.idPrevious.className=="link_disabled"){return ;}if(this._prevCursor>0){if(this.idFilterText.getValue()!=this._filterText){this.__neh_FindClick(null);return ;}var B=new Array();var A=new Object();A.name="FilterText";A.value=this.idFilterText.getValue();var C=new Object();C.name="target";C.value=this._classname;var D=new Object();D.name="prevCursor";D.value=this._prevCursor;B[0]=A;B[1]=C;B[2]=D;B[3]=this.resultSetName.getValue();this._showHideFindRow();if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,B);}}},_nextClick:function(){if(this.idNext.className=="link_disabled"){return ;}if(this.idFilterText.getValue()!=this._filterText){this.__neh_FindClick(null);return ;}var B=new Array();var A=new Object();A.name="FilterText";A.value=this.idFilterText.getValue();var C=new Object();C.name="target";C.value=this._classname;var D=new Object();D.name="currCursor";D.value=this._currCursor;B[0]=A;B[1]=C;B[2]=D;B[3]=this.resultSetName.getValue();this._showHideFindRow();if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,B);}},_enter_key:function(A,B){if(!this.__preventEnterKey){var C=B==null?null:B.getTarget();if(C&&C.name&&C.name.toLowerCase()=="filtertext"){this.__neh_FilterTextChange(B);}else{actuate.dialog.impl.helper.AdvancedFilterDialog.superclass._enter_key.apply(this,arguments);}}},_okPress:function(){var A=this._filterManager.getConditionLineCount();if(this._allowMeasureFilter){A+=this._measureFilterManager.getConditionLineCount();}if(this._popupEmptyCondition==true&&!(A>0)){var B=this;actuate.uiadapter.MessageBox.confirm(actuate.util.Utility.getLocalizedString("common.promptTitle"),actuate.util.Utility.getLocalizedString("filterDialog.text.EmptyConditionList"),function(C){if(C=="no"){return ;}else{B._okPressContinue();}});return ;}this._okPressContinue();},_okPressContinue:function(){var A=this.isValidSyntax();if(A==false){return ;}if(actuate.viewer.impl.Viewer&&this._consumer instanceof actuate.viewer.impl.Viewer&&this._consumer._helper.contentPanel){if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,this.htmlId);}this._hide();}else{actuate.dialog.impl.helper.AdvancedFilterDialog.superclass._okPress.call(this);}},__getHelpTopic:function(){return"iv_advanced_filter";},_preHide:function(){this._resetAll();},_resetAll:function(){this.clearResultSetColumn();this.deleteAllFilter();this.resetGUI();this.filterValuePickerDiv[0].style.display="none";this.filterValuePickerDiv[1].style.display="none";this._isSharedBinding=undefined;},__neh_changeCondition:function(){if(this.isTopBottomOp(this._operator.getValue())!=this.isTopBottomOp(this._previousCondition)){this.value1Text.setValue("");this.value2Text.setValue("");}this.idValuesList.setSelectedIndex();this._showOperandGUI(this._operator.getValue());this._previousCondition=this._operator.getValue();},__neh_value1Change:function(){if(this.idValueInput[0].getEl()!=null){var A=this.idValueInput[0].getEl().dom;this.__updateTooltip(A);}},__neh_value2Change:function(){if(this.idValueInput[1].getEl()!=null){var A=this.idValueInput[1].getEl().dom;this.__updateTooltip(A);}},__updateTooltip:function(A){A.setAttribute("title",A.value);},__neh_InOPValuesFocus:function(){if(this.idInOPValuesSelect.getLength()>0&&this.idInOPValuesSelect.getSelectedIndex()!=-1){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);if(this.FocusAfterCalendarFlag){this.idInOPValuesSelect.setSelectedIndex(this.idInOPValuesSelect.getLength()-1,true);}}else{this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);}this.FocusAfterCalendarFlag=false;},_neh_DeleteValuesLink:function(D){if(this.idInOPValuesSelect.getLength()==0||this.idInOPValuesSelect.getSelectedIndex()<0){return ;}var C=0;var B=this.idInOPValuesSelect.getSelectedIndex()-1;var A=this.idInOPValuesSelect.getSelectedValues();for(C=0;C<A.length;C++){this.idInOPValuesSelect.remove(A[C]);}if(B<0){B=0;}if(this.idInOPValuesSelect.getLength()==0){this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);this.idInOPValuesSelect.setSelectedIndex(-1);}else{if(B!=-1&&B!=null){this.idInOPValuesSelect.setSelectedIndex(B);this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}}},__neh_clickValidateButton:function(B){actuate.util.Event.stop(B);var A=this.isValidSyntax();if(A==false){return ;}var C=new Array();var D=new Object();D.name="target";D.value=this._classname;C[0]=D;if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,C);}},isValidSyntax:function(){var F=0,C=0;var B=this._filterManager.getConditionLineCount();for(var E=0;E<B;E++){var D=this._filterManager.getConditionLine(E);if(D.getHasLeftBracket()){F++;}if(D.getHasRightBracket()){C++;}}if(F!=C){var A=actuate.util.Utility.getLocalizedString("advancedFilterDialog.ValueValidator.Error.LineNumber");var D=E-1;A=A.replace("LineNumberVariable",D);var G=A+" "+actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.unbalancedBrackets");if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,G);}return false;}return true;},_neh_SelectValuesLink1:function(A){this._handleClickSelectValueLink(0,this._isSharedBinding);},_neh_SelectValuesLink2:function(A){this._handleClickSelectValueLink(1,this._isSharedBinding);},_handleClickSelectValueLink:function(D,C){if(!C){var E=this.stateMoreValue.length;for(var A=0;A<E;A++){this.stateMoreValue[A]=(A==D);this._showhideMoreValueLink(A,false);}}if(this.valuesLoadedFlag=="false"){var F=new Array();var B=new Object();B.name="FilterText";B.value="";var G=new Object();G.name="target";G.value=this._classname;var H=new Object();H.name="currCursor";H.value=-1;F[0]=B;F[1]=G;F[2]=H;F[3]=this.resultSetName.getValue();if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,F);}if(C){return ;}this.valuesLoadedFlag="true";}this._showHideFindRow();this.showHideCalendarDiv(false);this._showhideMoreValueSelect();this.idValuesListDiv.focus();this.adjustSize();},_neh_AnyOfSelectValuesLink:function(A){this._handleClickSelectValueLink(0);this.idMoreValueEnableLink[0].style.display="none";this.idMoreValueEnableLink[1].style.display="none";this.enableConditionButton(this.idAnyOfListValuesLink,false);},__neh_clickDeleteButton:function(A){actuate.util.Event.stop(A);if(this._filterList.getSelectedIndex()>=0){this._deleteCondition(this._filterView);this._popupEmptyCondition=false;}else{if(this._measureFilterList.getSelectedIndex()>=0){this._deleteCondition(this._measureFilterView);this._popupEmptyCondition=false;}}},deleteAllFilter:function(){this._filterManager.resetFilterTable();this._measureFilterManager.resetFilterTable();this._filterList.clear();this._measureFilterList.clear();},_deleteCondition:function(C){var D=null;if(C.list.getEl()!=null){D=C.list.getEl().dom.scrollTop;}var B=C.list.getSelectedIndex();if(B>=0){C.manager.deleteConditionLine(B);this.deleteOption(C);if(B==0&&C.manager.getConditionLineCount()>0){var A=C.manager.getConditionLine(0);A.setLogicOp("");C.list.modify(0,[this.createConditionLineText(A)]);}if(C.list.getEl()!=null){C.list.getEl().dom.scrollTop=D;}}},deleteOption:function(C){var B=C.list.getSelectedIndex();if(B>=0){var A=C.list.getSelectedValues();for(i=0;i<A.length;i++){C.list.remove(A[i]);}if(B==C.list.getLength()){C.list.setSelectedIndex(B-1,true);}else{C.list.setSelectedIndex(B,true);}this.selectedConditionChanged(C);}},__neh_changeFilterConditionSelection:function(){this._measureFilterList.setSelectedIndex(-1);this.selectedConditionChangedFlag=true;this.__neh_clickFilterCondition(this._filterView);if(this._filterList.getSelectedIndex()>0){var A=this._filterManager.getConditionLine(this._filterList.getSelectedIndex());if(A){var B=A.getRow();if(B){if(this._cubeMode){B="dimensions::"+B.split("/")[0]+"::"+B;this.columnType="dimension";}}}}},__neh_changeMeasureFilterConditionSelection:function(){this._filterList.setSelectedIndex(-1);this.selectedConditionChangedFlag=true;this.__neh_clickFilterCondition(this._measureFilterView);var A=this._measureFilterManager.getConditionLine(this._measureFilterList.getSelectedIndex());if(A){var B=A.getRow();if(B){if(this._cubeMode){B="measures::"+B;this.columnType="measure";}}}},selectedConditionChanged:function(B){var A=B.list.getSelectedIndex();var C=false;if(A>0){this.enableConditionButton(this.changeConditionButton,true);this.enableConditionButton(this.addConditionButton,true);this.notButton.disabled=false||C;this.leftBracketButton.disabled=false||C;this.rightBracketButton.disabled=false||C;this.andButton.disabled=false||C;this.orButton.disabled=false||C;this.validateButton.disabled=false||C;this.deleteButton.disabled=false;}else{if(A==0){this.andButton.disabled=true;this.orButton.disabled=true;this.enableConditionButton(this.changeConditionButton,true);this.enableConditionButton(this.addConditionButton,true);this.notButton.disabled=false||C;this.leftBracketButton.disabled=false||C;this.rightBracketButton.disabled=false||C;this.validateButton.disabled=false;this.deleteButton.disabled=false;}else{this.enableConditionButton(this.changeConditionButton,false);this.enableConditionButton(this.addConditionButton,true);this.notButton.disabled=true;this.leftBracketButton.disabled=true;this.rightBracketButton.disabled=true;this.andButton.disabled=true;this.orButton.disabled=true;this.validateButton.disabled=true;this.deleteButton.disabled=true;}}},__neh_clickFilterCondition:function(A){this.selectedConditionChanged(A);this._populateFilterCondition(A);this.selectedConditionChangedFlag=false;},_populateFilterCondition:function(A){var B=A.list.getSelectedIndex();if(B>=0){return this.populateConditionToUI(B,A);}},populateConditionToUI:function(J,B){var O=B.manager.getConditionLine(J);if(O==null){return ;}var N=this.resultSetName.setValue(O.getRow())?true:false;this._adjustColumnType();this.columnName=this.resultSetName.getValue();this.columnDataTypeCode=this.getColumnDataType(this.columnName);this.loadConditions(this.columnDataTypeCode);var C=O.getOperator();this._previousCondition=this._operator.getValue();if(C!="clear"){var D=this._operatorMap[C];if(D!=null&&!this._operator.containsKey(C)){var G=[[C,D]];this._operator.add(G);}this._operator.setValue(C);}C=this._operator.getValue();this._showOperandGUI(C);if(O.getFilterOperands()==null){return N;}var F=O.getFilterOperands();if(F.length>0){if(C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN||C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_IN){var M=(F[0].value==null?[]:F[0].value.split("|"));var I=[];for(var E=0;E<M.length;E++){if(M[E]!=null&&M[E].charAt(M[E].length-1)=='"'){M[E]=M[E].substring(1,M[E].length-1);}I.push([M[E],M[E]]);}this.idInOPValuesSelect.setStore(I);if(this.idInOPValuesSelect.getLength()>0&&this.idInOPValuesSelect.getSelectedIndex()!=-1){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}return N;}if(C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN||C==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN){for(var E=0;E<F.length;E++){var K=F[E].isDataField;if(K){this.idRadioByColumn[E].setValue(true);this.filterValuePickerGroupClick(1);var L=F[E].boundDataColumnName;this.valueColumnList[E].setValue(L);}else{this.idRadioByValue[E].setValue(true);var A=F[E].isLiteral;var H=F[E].value;this.idValueInput[E].setValue(H);this.__updateTooltip(this.idValueInput[E].getEl().dom);}}return N;}this._showOperand(0,F[0]);if(F.length>1){this._showOperand(1,F[1]);}}if(!this.resultSetName.containsKey(O.getRow())){this._showhideMoreValueLink(0,true);this._showhideMoreValueLink(1,true);}return N;},_showOperand:function(B,F){var A=F.isDataField;if(A){this.idRadioByColumn[B].setValue(true);this.filterValuePickerGroupClick(B);var E=F.boundDataColumnName;this.valueColumnList[B].setValue(E);}else{this.idRadioByValue[B].setValue(true);var D=F.isLiteral;var C=F.value;this.idValueInput[B].setValue(C);this.__updateTooltip(this.idValueInput[B].getEl().dom);}},__neh_changeResultSet:function(){this.resetGUI();this.adjustSize();this._adjustColumnType();},_adjustColumnType:function(){var A=null;if(this.resulteSetNameStore.length>0){for(var B=0;B<this.resulteSetNameStore.length;B++){var D=this.resulteSetNameStore[B];if(D[0]==this.resultSetName.getValue()){var C=D[2].bindingType;if(C=="dimension"){this.columnType="dimension";}else{if(C=="measure"){this.columnType="measure";}}}}}},__neh_CalendarDivClick:function(B){var A=document.getElementById("hideCalendarFlag");if(A.value=="true"){this.showHideCalendarDiv(false);A.value="false";}this.adjustSize();},__neh_CalendarDivChange:function(A){this.adjustSize();},__neh_CalendarClick1:function(A){this._handleClickCalendar(A,0);},__neh_CalendarClick2:function(A){this._handleClickCalendar(A,1);},_handleClickCalendar:function(D,B){var A={};var C=this.getOperatorType(this._operator.getValue());if(this.columnDataTypeCode==actuate.Constant.DataType.DATE){A.isDateTime=false;}else{A.isDateTime=true;}if(C==this.OP_TYPE_N_OPERAND){this.FocusAfterCalendarFlag=true;A.target=this.idInOPValuesSelect;}else{A.target=this.idValueInput[B];}var E={};E.cache=A;if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_CALENDAR,E);}},_showFilter:function(K){var D=K[actuate.model.Constant.MetadataType.FILTER];var P;if(D&&!D.isAdvancedFilter){D=D.toAdvancedFilter(this._currentElement);}if(D&&D.updateAggregation!==undefined){this.recalculateTotals.setCheckedFlag(D.updateAggregation);}this.handleBoundDataColumn(K);this.filterValuePickerGroupClick(0);this.filterValuePickerGroupClick(1);for(var N=0;N<2;N++){this.idValueInput[N].setValue("");this.__updateTooltip(this.idValueInput[N].getEl().dom);this.stateMoreValue[N]=false;}this.columnName=this.resultSetName.getValue();this.columnDataTypeCode=this.getColumnDataType(this.columnName);this.loadConditions(this.columnDataTypeCode);var G=this._operator;G.setSelectedIndex(0);var F=G.getValue();this._showOperandGUI(F);P|=this.showSimpleFilter();if(D.advancedFilters){var B=K[actuate.model.Constant.MetadataType.BINDING];var E=false;var A=false;for(var I=0;I<D.advancedFilters.length;I++){var L=D.advancedFilters[I];var M="";for(var J=0;J<L.length;J++){if(B[L[J].row]){M=B[L[J].row].bindingType;}}if(M=="measure"){this._measureFilterManager.addConditionLinesFromMetadata(L,K[actuate.model.Constant.MetadataType.BINDING]);this._measureFilterList.clear();var O=this._measureFilterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._measureFilterView);}this.selectedConditionChanged(this._measureFilterView);P|=this._populateFilterCondition(this._measureFilterView);E=true;}else{this._filterManager.addConditionLinesFromMetadata(L,K[actuate.model.Constant.MetadataType.BINDING]);this._filterList.clear();var O=this._filterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._filterView);}this.selectedConditionChanged(this._filterView);P|=this._populateFilterCondition(this._filterView);A=true;}}if(!E){this._measureFilterManager.addConditionLinesFromMetadata(null,K[actuate.model.Constant.MetadataType.BINDING],true);this._measureFilterList.clear();var O=this._measureFilterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._measureFilterView);}this.selectedConditionChanged(this._measureFilterView);P|=this._populateFilterCondition(this._measureFilterView);}if(!A){this._filterManager.addConditionLinesFromMetadata(null,K[actuate.model.Constant.MetadataType.BINDING],true);this._filterList.clear();var O=this._filterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._filterView);}this.selectedConditionChanged(this._filterView);P|=this._populateFilterCondition(this._filterView);}}else{var H=new Array();var C=new Array();var B=K[actuate.model.Constant.MetadataType.BINDING];for(var I=0;I<D.filters.length;I++){var M;if(B[D.filters[I].row]){M=B[D.filters[I].row].bindingType;}if(M&&M=="measure"){C.push(D.filters[I]);}else{H.push(D.filters[I]);}}this._filterManager.addConditionLinesFromMetadata((H.length>0?H:null),K[actuate.model.Constant.MetadataType.BINDING]);this._filterList.clear();var O=this._filterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._filterView);}P|=this._populateFilterCondition(this._filterView);if(C.length>0){if(C[0].logicOp){C[0].logicOp="";}}this._measureFilterManager.addConditionLinesFromMetadata((C.length>0?C:null),K[actuate.model.Constant.MetadataType.BINDING],true);this._measureFilterList.clear();var O=this._measureFilterManager.getConditionLineCount();for(var J=0;J<O;J++){this.appendConditionLine(J,this._measureFilterView);}P|=this._populateFilterCondition(this._measureFilterView);if(H.length==0){this.selectedConditionChanged(this._measureFilterView);}else{this.selectedConditionChanged(this._filterView);}}return P;},showSimpleFilter:function(){var B;var A;if(this._filterManager.getConditionLineCount()>0){A=this._filterView.manager.getConditionLine(0);if(A.getRow()!=null){B|=this.populateConditionToUI(0,this._filterView);}this._filterManager.deleteConditionLine(0);}if(this._measureFilterManager.getConditionLineCount()>0){A=this._measureFilterView.manager.getConditionLine(0);if(A.getRow()!=null){B|=this.populateConditionToUI(0,this._measureFilterView);}this._measureFilterManager.deleteConditionLine(0);}return B;},showMoreValuesListBox:function(){var A=null;if(this._operator&&this._operator.getValue){A=this._operator.getValue();}var C=null;if(this._filterManager&&this._filterManager.getOperatorType){C=this._filterManager.getOperatorType(A);}if(this.columnValues!=null&&this.columnValues.getRows()!=null){this._populateColumnValuesInUI(this.columnValues.getRows());if(C===2){this.stateMoreValue[0]=false;this.stateMoreValue[1]=false;this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);this._showhideMoreValueLink(1,false);}else{this.stateMoreValue[0]=true;this.stateMoreValue[1]=false;this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);this._showhideMoreValueLink(1,true);}this._showHideFindRow();var B=this.columnValues.getEndOfResultSet();var D=this.columnValues.getCursor();if(D){this._currCursor=D.currCursor;this._prevCursor=D.prevCursor;}this._rowCount=this.columnValues.getRowCount();this.enableConditionButton(this.idNext,!B);this.enableConditionButton(this.idPrevious,true);if(this._prevCursor<=0){this.enableConditionButton(this.idPrevious,false);}}},_showOperandGUI:function(A){this.showHideCalendarDiv(false);this.idValuesList.setMultiSelect(false);this.idAnyOfListValuesDiv.style.display="none";var B=this.getOperatorType(A);switch(B){case this.OP_TYPE_N_OPERAND:this._showhideOperand(0,true,true);this._showhideOperand(1,false);this.idMoreValueEnableLink[0].style.display="none";this.idMoreValueEnableLink[1].style.display="none";if(this.idSelectValuesDiv.style.display=="block"){this.enableConditionButton(this.idAnyOfListValuesLink,false);}else{this.enableConditionButton(this.idAnyOfListValuesLink,true);}break;case this.OP_TYPE_1_OPERAND:this._showhideOperand(0,true,false);this._showhideOperand(1,false);break;case this.OP_TYPE_2_OPERAND:this._showhideOperand(0,true,false);this._showhideOperand(1,true);break;case this.OP_TYPE_0_OPERAND:this._showhideOperand(0,false,false);this._showhideOperand(1,false);break;default:break;}this._updateValueLabel(A);this._showhideMoreValueSelect();this.adjustSize();},isTopBottomOp:function(B){for(var A=0;A<this.topBottomOpGroup.length;A++){if(B==this.topBottomOpGroup[A]){return true;}}return false;},_updateValueLabel:function(A){var B=!(this.isTopBottomOp(A));if(A==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_BETWEEN||A==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN){if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&B){actuate.util.XmlDom.setTextContent(this.idValueTextDiv[0],actuate.util.Utility.getLocalizedString("filterDialog.text.dateValueFrom"));actuate.util.XmlDom.setTextContent(this.idValueTextDiv[1],actuate.util.Utility.getLocalizedString("filterDialog.text.dateValueTo"));}else{actuate.util.XmlDom.setTextContent(this.idValueTextDiv[0],actuate.util.Utility.getLocalizedString("filterDialog.text.valueFrom"));actuate.util.XmlDom.setTextContent(this.idValueTextDiv[1],actuate.util.Utility.getLocalizedString("filterDialog.text.valueTo"));}}else{if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&B){actuate.util.XmlDom.setTextContent(this.idValueTextDiv[0],actuate.util.Utility.getLocalizedString("filterDialog.text.dateValue"));}else{actuate.util.XmlDom.setTextContent(this.idValueTextDiv[0],actuate.util.Utility.getLocalizedString("filterDialog.text.value"));}}},_showhideOperand:function(C,A,D){if(A){this.idValueBlock[C].style.display="";if(D==true){this.idValueInput[C].hide();this.__updateTooltip(this.idValueInput[C].getEl().dom);this.idInOPValuesSelectDiv.style.display="block";this.idInOPValuesSelect.setMultiSelect(true);this.idValuesList.setMultiSelect(true);this.idAnyOfListValuesDiv.style.display="block";this._showhideMoreValueSelect();this._showhideMoreValueLink(0,false);this._showhideMoreValueLink(1,false);}else{if(D==false){this.idValueInput[C].show();this.__updateTooltip(this.idValueInput[C].getEl().dom);this.idInOPValuesSelectDiv.style.display="none";this._showhideMoreValueLink(C,this.isTopBottomOp(this._operator.getValue()));}}this.enableConditionButton(this.idAnyOfDeleteValuesLink,false);if(this.idInOPValuesSelect.getLength()>0){this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}var B=this._operator.getValue();this._showHideCalendarLink(C,this.isTopBottomOp(B)||B==this.conditionIn||B==this.conditionNotIn);this._showHideValuePickerDiv(C,(!this.isTopBottomOp(B)&&B!=this.conditionIn&&B!=this.conditionNotIn));}else{this.idValueBlock[C].style.display="none";this.stateMoreValue[C]=false;}this._showHideFormatHint();},_showHideCalendarLink:function(B,A){if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)&&!actuate.util.Utility.isTime(this.columnDataTypeCode)&&!A){this.idDateImg[B].style.display="";}else{this.idDateImg[B].style.display="none";}},_showHideFormatHint:function(){var A=!(this.isTopBottomOp(this._operator.getValue()));if((this.idValueBlock[0].style.display=="none"&&this.idValueBlock[1].style.display=="none")||(this.valueValueBlock[0].style.display=="none"&&this.valueValueBlock[1].style.display=="none")||(this.idValueBlock[1].style.display=="none"&&this.valueValueBlock[0].style.display=="none")){this.idFormatHintMessage.innerHTML="";}else{if(actuate.util.Utility.isDateTime(this.columnDataTypeCode)){var B="";if(this.columnDataTypeCode==actuate.Constant.DataType.DATE){B=actuate.util.Utility.getLocalizedString("filterDialog.text.dateFormatMsg")+" "+actuate.util.Utility.toDate(new Date());}else{if(this.columnDataTypeCode==actuate.Constant.DataType.TIME){B=actuate.util.Utility.getLocalizedString("filterDialog.text.timeFormatMsg")+" "+actuate.util.Utility.toTime(new Date());}else{if(this.columnDataTypeCode==actuate.Constant.DataType.DATETIME){B=actuate.util.Utility.getLocalizedString("filterDialog.text.dateTimeFormatMsg")+" "+actuate.util.Utility.toDateTime(new Date());}}}this.idFormatHintMessage.innerHTML=B;}else{this.idFormatHintMessage.innerHTML="";}}},_showHideValuePickerDiv:function(B,A){this.idRadioByValue[B].setValue(true);this.filterValuePickerDiv[B].style.display=A?"":"none";this.filterValuePickerGroupClick(B);},_postShow:function(){actuate.dialog.impl.helper.AbstractIVDialog.prototype._postShow.call(this);if(this.firstTime==undefined){this.firstTime=false;if(this.idValueBlock[0].style.display!="none"){this.idValueBlock[0].style.display="none";this.idValueBlock[0].style.display="";}}},_showhideMoreValueLink:function(A,B){if(B){this.idMoreValueEnableLink[A].style.display="none";this.stateMoreValue[A]=false;this._showhideMoreValueSelect();return ;}this.idMoreValueEnableLink[A].style.display="";this.idMoreValueEnableLink[A].className=(this.stateMoreValue[A]==false)?"iv_dialog_link_enabled":"iv_dialog_link_disabled";},_showhideMoreValueSelect:function(){if(this.stateMoreValue[0]==true||this.stateMoreValue[1]==true){this.idSelectValuesDiv.style.display="block";}else{this.idSelectValuesDiv.style.display="none";}},appendConditionLine:function(C,B){var A=B.manager.getConditionLine(C);if(A==null){return ;}var D=this.createConditionLineText(A);if(D!=null){B.list.add([D]);this.selectedConditionChanged(B);B.list.setSelectedIndex(C,true);}},focusColumnName:function(){var A=this._filterManager.getConditionLine(0);if(A==null){return ;}var B=A.getRow();this.resultSetName.setValue(B);this._adjustColumnType();},insertConditionLine:function(E,C){var B=C.manager.getConditionLine(E);if(B==null){return ;}var G=this.createConditionLineText(B);var A=C.manager.getConditionLineCount();if(E==A-1){C.list.add([G]);}else{C.list.insertAt(E,[G]);if(E==0){var F=C.manager.getConditionLine(1);F.setLogicOp("and");var D=this.createConditionLineText(F);C.list.modify(1,[D]);}}C.list.setSelectedIndex(E,true);this.selectedConditionChanged(C);},replaceConditionLine:function(D,B){var A=B.manager.getConditionLine(D);if(A==null){return ;}var C=this.createConditionLineText(A);B.list.modify(D,[C]);this.selectedConditionChanged(B);},createConditionLineText:function(A){var C="";if(A.getLogicOp()=="and"){C=C+"and ";}else{if(A.getLogicOp()=="or"){C=C+"or ";}}if(A.getHasLeftBracket()){C=C+"( ";}if(A.getHasNot()){C=C+"not( ";}var B=this.createExpressionText(A);if(B==null){return null;}C=C+B;if(A.getHasNot()){C=C+" )";}if(A.getHasRightBracket()){C=C+" )";}return C;},createExpressionText:function(B){if(!B){return null;}var D=B.getFilterOperands();var C=null;var A=null;var E="";if(D!=null&&D.length>0){if(D.length>0){C=D[0].value;if(D.length>1){A=D[1].value;}}}if(B.getOperator()==this.conditionBetween){E=B.getRow()+" between "+C+" and "+A;}else{if(B.getOperator()==this.conditionNotbetween){E=B.getRow()+" not between "+C+" and "+A;}else{if(B.getOperator()==this.conditionIsnull){E=B.getRow()+" is null";}else{if(B.getOperator()==this.conditionIsnotnull){E=B.getRow()+" is not null";}else{if(B.getOperator()==this.conditionIstrue){E=B.getRow()+" is true";}else{if(B.getOperator()==this.conditionIsfalse){E=B.getRow()+" is false";}else{if(B.getOperator()==this.conditionGt){E=B.getRow()+" > "+C;}else{if(B.getOperator()==this.conditionGe){E=B.getRow()+" >= "+C;}else{if(B.getOperator()==this.conditionLt){E=B.getRow()+" < "+C;}else{if(B.getOperator()==this.conditionLe){E=B.getRow()+" <= "+C;}else{if(B.getOperator()==this.conditionEq){E=B.getRow()+" = "+C;}else{if(B.getOperator()==this.conditionNe){E=B.getRow()+" != "+C;}else{if(B.getOperator()==this.conditionTopn||B.getOperator()==this.conditionBottomn||B.getOperator()==this.conditionToppercent||B.getOperator()==this.conditionBottompercent){E=B.getOperator()+"( "+B.getRow()+", "+C+" )";}else{if(B.getOperator()==this.conditionIn){E=B.getRow()+" in( "+C+" )";}else{if(B.getOperator()==this.conditionNotIn){E=B.getRow()+" not in( "+C+" )";}else{if(B.getOperator()==this.conditionLike||B.getOperator()==this.conditionNotLike){E=B.getOperator()+" ( "+B.getRow()+", "+C+" )";}else{E="";}}}}}}}}}}}}}}}}return E;},_handleSummaryTableBoundDataColumn:function(D){this.ivBoundDataColumnList=new Array();this.resulteSetNameStore=[];var E=D[actuate.model.Constant.MetadataType.ELEMENT];var J=E.columnsMap;if(E.bindingsMap==null){return ;}for(var K in J){var C=J[K];var B=C.bindingName;var F=E.bindingsMap[B];if(F==null){continue;}var G=F.dataType;if(!G||G==actuate.Constant.DataType.ANY){continue;}if(F.isAggregation&&F.aggregateOn==null){continue;}if(F.isAggregation&&F.isLinkedDataModel){continue;}if(E.groupsOrder!=null&&E.groupsOrder.length>0){var I=E.groupsOrder[E.groupsOrder.length-1];if(F.isAggregation&&F.aggregateOn!=I){continue;}}this.ivBoundDataColumnList.push(F);var H=F.displayName||F.name;if(F.isViewableBinding){var A=[F.name,H,F];this.resulteSetNameStore.push(A);}}this.resultSetName.setStore(this.resulteSetNameStore);if(this.resulteSetNameStore.length>0){this.resultSetName.setSelectedIndex(0);}},_isAvailable:function(B){var A=false;if(B){A=!B.isAggregation||(!B.isSubQuery&&!B.isLinkedDataModel);}return A;},handleBoundDataColumn:function(E){var B=E[actuate.model.Constant.MetadataType.ELEMENT];if(B!=null&&B.type==actuate.Constant.element.SUMMARYTABLE){if(B.groupsOrder!=null&&B.groupsOrder.length>0){this._handleSummaryTableBoundDataColumn(E);return ;}}var G=E[actuate.model.Constant.MetadataType.BINDING];this.ivBoundDataColumnList=new Array();this.resulteSetNameStore=[];for(var C in G){var F=G[C];if(this._isAvailable(F)){this.ivBoundDataColumnList.push(F);var A=F.displayName||F.name;if(F.isViewableBinding){var D=[F.name,A,F];this.resulteSetNameStore.push(D);}}}this.resultSetName.setStore(this.resulteSetNameStore);if(this.resulteSetNameStore.length>0){this.resultSetName.setSelectedIndex(0);}},getColumnDataType:function(B){if(this.ivBoundDataColumnList){for(var A=0;A<this.ivBoundDataColumnList.length;A++){if(this.ivBoundDataColumnList[A].name==B){return this.ivBoundDataColumnList[A].dataType;}}}return null;},clearResultSetColumn:function(){this.resultSetName.clear();this.valueColumnList[0].clear();this.valueColumnList[1].clear();},_isValidValueInput:function(A){var B=(this.idRadioByValue[A].getValue())?this.idValueInput[A].getValue():this.valueColumnList[A].getValue();return !(B==""||B==null);},resetGUI:function(){this.idFormatHintMessage.innerHTML="";this.columnName=this.resultSetName.getValue();this.columnDataTypeCode=this.getColumnDataType(this.columnName);this.loadConditions(this.columnDataTypeCode);this.idValueInput[0].setValue("");this.__updateTooltip(this.idValueInput[0].getEl().dom);this.idValueInput[1].setValue("");this.__updateTooltip(this.idValueInput[1].getEl().dom);this.idValuesList.clear();this.columnValues=null;this.idFilterText.setValue("");this.valuesLoadedFlag="false";this._rowCount=0;this._prevCursor=-1;this._currCursor=-1;var A=this._operator;A.setSelectedIndex(0);this.stateMoreValue=[false,false];this.idInOPValuesSelect.clear();this._showOperandGUI(A.getValue());this.idRadioByValue[0].setValue(true);this.idRadioByValue[1].setValue(true);this.filterValuePickerGroupClick(0);this.filterValuePickerGroupClick(1);this.idAnyOfListValuesDiv.style.display="none";this._popupEmptyCondition=true;this.columnType="";this.recalculateTotals.setCheckedFlag(true);},__neh_clickAndButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType1("and");},setLogicOpType1:function(C){if(this._filterList.getSelectedIndex()>=0){var D=this._filterList.getSelectedIndex();if(D==0){return ;}var B=this._filterManager.getConditionLine(D);B.setLogicOp(C);var A=this.createConditionLineText(B);this._filterList.modify(this._filterList.getSelectedIndex(),[A]);}},__neh_clickOrButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType1("or");},__neh_clickNotButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("not");},setLogicOpType2:function(D){var E;var C;var F;if(this._filterList.getSelectedIndex()>=0){E=this._filterList;C=this._filterManager;F=E.getSelectedIndex();}else{if(this._measureFilterList.getSelectedIndex()>=0){E=this._measureFilterList;C=this._measureFilterManager;F=E.getSelectedIndex();}}if(F>=0){var B=C.getConditionLine(F);if(D=="not"){if(B.getHasNot()){B.setHasNot(false);}else{B.setHasNot(true);}}else{if(D=="leftBracket"){if(B.getHasLeftBracket()){B.setHasLeftBracket(false);}else{B.setHasLeftBracket(true);}}else{if(D=="rightBracket"){if(B.getHasRightBracket()){B.setHasRightBracket(false);}else{B.setHasRightBracket(true);}}}}var A=this.createConditionLineText(B);E.modify(E.getSelectedIndex(),[A]);}},__neh_clickLeftBracketButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("leftBracket");},__neh_clickRightBracketButton:function(A){actuate.util.Event.stop(A);this.setLogicOpType2("rightBracket");},_validateUIOperand:function(A){if(this.idValueInput[A].getValue()){if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARNING,actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}return true;},__neh_clickAddConditionButton:function(D){var B=this._filterView;if(this.columnType=="measure"){B=this._measureFilterView;}actuate.util.Event.stop(D);if(this.addConditionButton.className!="iv_dialog_link_enabled"){return ;}var G=B.list.getSelectedIndex();if(!this._validate()){return ;}if(!(G>=0)){G=B.list.getLength()-1;}var E=new actuate.data.ConditionLine();if(G>=0){E.setLogicOp("and");}var F=G+1;E.setRow(this.resultSetName.getValue());E.setOperator(this._operator.getValue());var C=this.getOperatorType(this._operator.getValue());var A=this.collectFilterOperandsInfo(C);if(C!=this.OP_TYPE_0_OPERAND){E.setFilterOperands(A);}F=B.manager.insertConditionLine(E,F);this.insertConditionLine(F,B);if(B==this._measureFilterView){this._filterView.list.setSelectedIndex(-1);}else{this._measureFilterView.list.setSelectedIndex(-1);}},__neh_clickChangeConditionButton:function(E){var B=this._filterView;if(!(this._filterView.list.getSelectedIndex()>=0)){B=this._measureFilterView;}actuate.util.Event.stop(E);if(this.changeConditionButton.className!="iv_dialog_link_enabled"){return ;}if((B==this._filterView&&this.columnType=="measure")||(B==this._measureFilterView&&this.columnType!="measure")){return ;}if(B==this._filterView&&(!(B.list.getSelectedIndex()>=0)||!this._validate())){return ;}else{if(B==this._measureFilterView&&(!(B.list.getSelectedIndex()>=0)||!this._validate())){return ;}else{if(!(B.list.getSelectedIndex()>=0)){return ;}}}var F=new actuate.data.ConditionLine();var H=B.list.getSelectedIndex();var D=B.manager.getConditionLine(H);if(D==null){return ;}if(H>0){F.setLogicOp(D.getLogicOp());}F.setRow(this.resultSetName.getValue());F.setOperator(this._operator.getValue());var C=this.getOperatorType(this._operator.getValue());var A=this.collectFilterOperandsInfo(C);if(C!=this.OP_TYPE_0_OPERAND){if(this._operator.getValue()==this.conditionEq&&A[0].isLiteral&&A[0].value==""){F.setOperator(this.conditionIsnull);}else{if(this._operator.getValue()==this.conditionNe&&A[0].isLiteral&&A[0].value==""){F.setOperator(this.conditionIsnotnull);}else{F.setFilterOperands(A);}}}var G=B.manager.replaceConditionLine(F,H);this.replaceConditionLine(G,B);},_validate:function(){var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_1_OPERAND&&(this.columnDataTypeCode!=actuate.Constant.DataType.STRING||this.isTopBottomOp(this._operator.getValue()))){if(!this._isValidValueInput(0)){if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}else{if(A==this.OP_TYPE_2_OPERAND&&this.columnDataTypeCode!=actuate.Constant.DataType.STRING){if(!this._isValidValueInput(0)||!this._isValidValueInput(1)){if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}else{if(A==this.OP_TYPE_N_OPERAND){if(this.idInOPValuesSelect.getLength()==0){if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("filterDialog.text.MsgNoBlankValue"));}return false;}}}}return true;},getTextValue:function(C,F){if(!F){return this.idValueInput[C].getValue();}var B="";var A=this.idInOPValuesSelect.getStore().collect("value",true);for(var D=0;D<A.length;D++){if(D>0){B+="|";}var E=A[D];if(F&&E==null){E="-- No Value --";}B+=E;}return B;},collectOperand:function(A,B){var C=new Object();if(this.idRadioByValue[A].getValue()){C.isDataField=false;C.isLiteral=true;C.value=this.getTextValue(A,B);C.boundDataColumnName=null;}else{C.isDataField=true;C.value=this.valueColumnList[A].getValue();C.boundDataColumnName=this.valueColumnList[A].getValue();}return C;},collectFilterOperandsInfo:function(B){var A=new Array();if(B!=this.OP_TYPE_0_OPERAND){var C=this.collectOperand(0,B==this.OP_TYPE_N_OPERAND);A.push(C);}if(B==this.OP_TYPE_2_OPERAND){var C=this.collectOperand(1,false);A.push(C);}return A;},_createBoundDataColumnSoap:function(G){var I=actuate.util.XmlDom.createElement(G,"BoundDataColumnList");var B=this._filterManager.getConditionLineCount();if(B>0){for(var F=0;F<B;F++){var M=this._filterManager.getConditionLine(F);var E=actuate.util.XmlDom.createElement(G,"BoundDataColumn");var A=actuate.util.XmlDom.createElement(G,"Name");var K=M.getRow();var C=G.createTextNode(K);A.appendChild(C);E.appendChild(A);var D=this.getColumnDataType(K);if(D){var L=actuate.util.XmlDom.createElement(G,"Type");var J=null;var H=G.createTextNode(D);L.appendChild(H);E.appendChild(L);}I.appendChild(E);}}if(this._allowMeasureFilter){var B=this._measureFilterManager.getConditionLineCount();for(var F=0;F<B;F++){var M=this._measureFilterManager.getConditionLine(F);var E=actuate.util.XmlDom.createElement(G,"BoundDataColumn");var A=actuate.util.XmlDom.createElement(G,"Name");var K=M.getRow();var C=G.createTextNode(K);A.appendChild(C);E.appendChild(A);var L=actuate.util.XmlDom.createElement(G,"Type");var D=this.getColumnDataType(K);var H=G.createTextNode(D);L.appendChild(H);E.appendChild(L);I.appendChild(E);}}return I;},createSoapNode:function(){var N=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);N.documentElement.appendChild(this._createBoundDataColumnSoap(N));var M=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Filter);N.documentElement.appendChild(M);var E=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Type);var Z=N.createTextNode(actuate.Constant.tag.Advanced);E.appendChild(Z);M.appendChild(E);var U=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.ConditionLineList);M.appendChild(U);var J=this._filterManager.getConditionLineCount();if(J>0){for(var X=0;X<J;X++){var L=this._filterManager.getConditionLine(X);var a=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.ConditionLine);U.appendChild(a);if(L.getLogicOp()!=null){var R=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.LogicOp);var T=N.createTextNode(L.getLogicOp());R.appendChild(T);a.appendChild(R);}var F=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasLeftBracket);var O=N.createTextNode(L.getHasLeftBracket()?"true":"false");F.appendChild(O);a.appendChild(F);var D=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasNot);var Q=N.createTextNode(L.getHasNot()?"true":"false");D.appendChild(Q);a.appendChild(D);var G=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Row);var Y=N.createTextNode(L.getRow());G.appendChild(Y);a.appendChild(G);var I=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.CLOperator);var H=N.createTextNode(L.getOperator());I.appendChild(H);a.appendChild(I);var C=this.getOperatorType(L.getOperator());if(C!=this.OP_TYPE_0_OPERAND){var W=this._createFilterOperand(L,N,0,L.getOperator()==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN);a.appendChild(W);}if(C==this.OP_TYPE_2_OPERAND){var W=this._createFilterOperand(L,N,1,false);a.appendChild(W);}var A=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasRightBracket);var B=N.createTextNode(L.getHasRightBracket()?"true":"false");A.appendChild(B);a.appendChild(A);}var P=N.createTextNode(this.recalculateTotals.getValue()?"true":"false");var S=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.UpdateAggregation);S.appendChild(P);U.appendChild(S);}if(this._cubeMode==true){var K=actuate.util.XmlDom.createElement(N,"FilterList");var J=this._measureFilterManager.getConditionLineCount();if(J>0){var V=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Filter);var E=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Type);var Z=N.createTextNode(actuate.Constant.tag.Advanced);E.appendChild(Z);V.appendChild(E);var U=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.ConditionLineList);V.appendChild(U);K.appendChild(V);for(var X=0;X<J;X++){var L=this._measureFilterManager.getConditionLine(X);var a=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.ConditionLine);U.appendChild(a);if(L.getLogicOp()!=null){var R=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.LogicOp);var T=N.createTextNode(L.getLogicOp());R.appendChild(T);a.appendChild(R);}var F=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasLeftBracket);var O=N.createTextNode(L.getHasLeftBracket()?"true":"false");F.appendChild(O);a.appendChild(F);var D=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasNot);var Q=N.createTextNode(L.getHasNot()?"true":"false");D.appendChild(Q);a.appendChild(D);var G=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.Row);var Y=N.createTextNode(L.getRow());G.appendChild(Y);a.appendChild(G);var I=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.CLOperator);var H=N.createTextNode(L.getOperator());I.appendChild(H);a.appendChild(I);var C=this.getOperatorType(L.getOperator());if(C!=this.OP_TYPE_0_OPERAND){var W=this._createFilterOperand(L,N,0,L.getOperator()==actuate.dialog.impl.constant.DesignChoice.FILTER_OPERATOR_IN);a.appendChild(W);}if(C==this.OP_TYPE_2_OPERAND){var W=this._createFilterOperand(L,N,1,false);a.appendChild(W);}var A=actuate.util.XmlDom.createElement(N,actuate.Constant.tag.HasRightBracket);var B=N.createTextNode(L.getHasRightBracket()?"true":"false");A.appendChild(B);a.appendChild(A);}N.documentElement.appendChild(K);}}return N;},_createFilterOperand:function(L,B,F,E){var G=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.FilterOperand);var H=L.getFilterOperands();if(H.length>0){if(H[F].isDataField==true){var K=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.DataField);G.appendChild(K);var A=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.NAME);var D=B.createTextNode(H[F].value);A.appendChild(D);K.appendChild(A);}else{var C=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.LITERAL);G.appendChild(C);var J=H[F].value;var I=B.createTextNode(J==null?"":J);C.appendChild(I);}}return G;},getOperatorType:function(C){for(var B=0;B<4;B++){for(var A=0;A<this.opCategory[B].length;A++){if(C==this.opCategory[B][A]){return B;}}}return 0;},createMoreValuesRequest:function(C){var A=new actuate.data.BoundDataColumn();A.setName(C);var B=new actuate.data.BoundDataColumnList();B.setBoundDataColumn(A);return this.ivData.getBoundDataColumnList(B);},_showHideFindRow:function(){if(this.columnDataTypeCode!=actuate.Constant.DataType.STRING){this.idFindRow.style.display="none";this.idFilterText.hide();this.idFindButton.hide();this.idFilterTextLabel.style.display="none";}else{if(actuate.util.Utility.isIE){this.idFindRow.style.display="";}else{this.idFindRow.style.display="table-row";}this.idFilterText.show();this.idFindButton.show();this.idFilterTextLabel.style.display="inline";}},showData:function(B){this.idValuesList.clear();if(B){var A=new actuate.data.ResultSetData(B);var D=A.getRows();this.populateDataInUI(D);this.idValuesListDiv.focus();this._rowCount=parseInt(A.getRowCount());var C=A.getEndOfResultSet();this.enableConditionButton(this.idNext,false);this.enableConditionButton(this.idPrevious,false);if(!C){this.enableConditionButton(this.idNext,true);}if(this._prevCursor>0){this.enableConditionButton(this.idPrevious,true);}}},_populateColumnValuesInUI:function(B){if(this.idValuesList.getLength()>0){this.idValuesList.setSelectedIndex(0,false);}if(B&&B.length>0){var A=[];for(var C=0;C<B.length;C++){if(B[C]!=null){var D=B[C];if(D!=null){var F=0;var E=0;if(D.length>1){E=1;}A.push([D[E],D[F]]);}}}this.idValuesList.setStore(A);}},populateDataInUI:function(C){if(this.idValuesList.getLength()>0){this.idValuesList.setSelectedIndex(0,false);}if(C.length>0){var B=[];for(var A=0;A<C.length;A++){if(C[A]!=null){var E=0;var D=0;if(C[A].length>1){D=1;}B.push([C[A][E],C[A][D]]);}}this.idValuesList.setStore(B);}},moreValuesSelectionChanged:function(){var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_N_OPERAND){this._fillSelectedValuesInList(true);}else{this.fillTextBox(true);}},__neh_ValuesListKeyPress:function(B){var A=this.getOperatorType(this._operator.getValue());if(A==this.OP_TYPE_N_OPERAND){if(B.keyCode==38||B.keyCode==40){this._fillSelectedValuesInList(false);}else{this._fillSelectedValuesInList(true);}}else{if(B.keyCode==38||B.keyCode==40){this.fillTextBox(false);}else{this.fillTextBox(true);}}},__neh_ListClick:function(A){setTimeout(actuate.Method.bind(this.moreValuesSelectionChanged,this),100);},_fillSelectedValuesInList:function(D){if(D){var A=this.idValuesList.getSelectedValues();if(A){for(var C=0;C<A.length;C++){var B=(A[C]&&A[C].data!=null)?A[C].data.value:A[C];if(!this.idInOPValuesSelect.contains(B)){this.idInOPValuesSelect.add([B,B==null?actuate.util.Utility.getLocalizedString("advancedFilterDialog.text.nullValue"):B]);}}}}if(this.idInOPValuesSelect.getLength()>0){this.idInOPValuesSelect.setSelectedIndex(this.idInOPValuesSelect.getLength()-1,true);this.enableConditionButton(this.idAnyOfDeleteValuesLink,true);}else{this.idInOPValuesSelect.setSelectedIndex(null);}},__neh_FindClick:function(B){if(this.idFilterText.getValue()!=null){this.idValuesList.clear();this._filterText=this.idFilterText.getValue();var C=new Array();var A=new Object();A.name="FilterText";A.value=this._filterText;var D=new Object();D.name="target";D.value=this._classname;var E=new Object();E.name="currCursor";E.value=-1;C[0]=A;C[1]=D;C[2]=E;C[3]=this.resultSetName.getValue();if(this._consumer._eventDispatcher){this._consumer._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,C);}}},__neh_FilterTextChange:function(A){if(A.keyCode==13){this.__neh_FindClick(A);}},fillTextBox:function(D){var C="";if(this.idValuesList.getSelectedIndex()!=-1&&this.idValuesList.getLength()>0){C=this.idValuesList.getSelectedValue();}else{return ;}var B=this.stateMoreValue.length;for(var A=0;A<B;A++){if(this.stateMoreValue[A]==true){if(D){this.idValueInput[A].setValue(C);this.__updateTooltip(this.idValueInput[A].getEl().dom);}break;}}},__neh_filterValuePickerGroupClick1:function(){this.filterValuePickerGroupClick(0);},__neh_filterValuePickerGroupClick2:function(){this.filterValuePickerGroupClick(1);},filterValuePickerGroupClick:function(A){if(this.idRadioByValue[A].getValue()){this.valueValueBlock[A].style.display="";this.valueColumnBlock[A].style.display="none";this._showhideMoreValueLink(A,this.isTopBottomOp(this._operator.getValue()));}else{this.showHideCalendarDiv(false);this._showhideMoreValueLink(A,true);this.prepareColumnSelectionList(A);this.valueValueBlock[A].style.display="none";this.valueColumnBlock[A].style.display="";}this._showHideFormatHint();this.adjustSize();},prepareColumnSelectionList:function(B){this.valueColumnList[B].clear();var A=[];for(var C=0;C<this.ivBoundDataColumnList.length;C++){if(this.matchDataType(this.ivBoundDataColumnList[C].dataType,this.columnDataTypeCode)){A.push([this.ivBoundDataColumnList[C].name,this.ivBoundDataColumnList[C].displayName]);}}this.valueColumnList[B].setStore(A);this.valueColumnList[B].setSelectedIndex(0);},matchDataType:function(B,A){if(actuate.util.Utility.isDateTime(A)||A==actuate.Constant.DataType.STRING){return B==A;}else{return B==actuate.Constant.DataType.INTEGER||B==actuate.Constant.DataType.FLOAT||B==actuate.Constant.DataType.DECIMAL||B==actuate.Constant.DataType.BOOLEAN;}},showHideCalendarDiv:function(A){if(A){if(this.idCalendar.style.display=="none"){this.cal.style.display="";this.idCalendar.appendChild(this.cal);this.idCalendar.style.display="";}}else{if(this.idCalendar.style.display==""){this.cal.style.display="none";this.idCalendar.removeChild(this.cal);this.idCalendar.style.display="none";}}this.adjustSize();},enableConditionButton:function(B,A){if(A){B.className="iv_dialog_link_enabled";}else{B.className="iv_dialog_link_disabled";}},loadConditions:function(B){var A=[];var C=actuate.util.Utility.isNumber(B);var D=actuate.util.Utility.isDateDataType(B);var E=(B==actuate.Constant.DataType.BOOLEAN);if(E){A.push([this.conditionIstrue,this.textIstrue]);A.push([this.conditionIsfalse,this.textIsfalse]);}else{A.push([this.conditionEq,this.textEq]);A.push([this.conditionNe,this.textNe]);A.push([this.conditionLt,this.textLt]);A.push([this.conditionLe,this.textLe]);A.push([this.conditionGt,this.textGt]);A.push([this.conditionGe,this.textGe]);A.push([this.conditionBetween,this.textBetween]);A.push([this.conditionNotbetween,this.textNotbetween]);}A.push([this.conditionIsnull,this.textIsnull]);A.push([this.conditionIsnotnull,this.textIsnotnull]);if(!E&&!C&&!D){A.push([this.conditionLike,this.textLike]);A.push([this.conditionNotLike,this.textNotLike]);}A.push([this.conditionIn,this.textIn]);A.push([this.conditionNotIn,this.textNotIn]);if(C){A.push([this.conditionIstrue,this.textIstrue]);A.push([this.conditionIsfalse,this.textIsfalse]);}this._operator.setStore(A);}});