actuate.util.Package.define("actuate.dialog.impl.helper.datamanager");actuate.dialog.impl.helper.datamanager.DetailsDialog=actuate.Class.extendClass(actuate.dialog.impl.helper.AbstractIVDialog,{_tree:null,initialize:function(A,B){this._width=250;this._height=300;this.hasCancelButton=false;this._windowConfig={layout:"fit",header:false,allowDragOnBody:false,resizable:true};actuate.dialog.impl.helper.datamanager.DetailsDialog.superclass.initialize.call(this,A,this._width,false);},_render:function(){if(!this._rendered){var A=[{type:null,iconCls:"actuate_data_column_image"},{type:0,iconCls:"actuate_data_column_image"},{type:"Dimension",iconCls:"actuate_dimension_image"},{type:"SharedDimension",iconCls:"actuate_shared_dimension_image"},{type:"Dimensions",iconCls:"actuate_folder_image"},{type:"measures",iconCls:"actuate_category_image"},{type:"Measures",iconCls:"actuate_folder_image"},{type:"level",iconCls:"actuate_level_image"},{type:"measure",iconCls:"actuate_measure_image"},{type:"string",iconCls:"actuate_data_column_string_image"},{type:"integer",iconCls:"actuate_data_column_number_image"},{type:"float",iconCls:"actuate_data_column_number_image"},{type:"category",iconCls:"actuate_category_image"}];this._tree=new actuate.widget.tree.TreePanel({el:"tree-div",autoScroll:true,width:386,height:108,rootVisible:false,containerScroll:true,dataStore:new actuate.widget.tree.TreeStore([]),icons:A});this._window.add(this._tree);this._rendered=true;}},_localBind:function(D){this._render();var C;if(D&&D.operationData){C=D.operationData.details;this._callbacks.okCallback=D.operationData.okCallback;if(D.operationData.parentLinkUrl){this.parentLinkUrl=D.operationData.parentLinkUrl;}}if(C){this._tree.clear();var B=this._tree.getStore();var A=this._getCategories(C.columns);this._pushDataToStore(null,A,B);this._pushDataToStore(null,C.columns,B);this._pushDataToStore(actuate.util.Utility.getLocalizedString("manageDataDialog.dimensions"),C.dimensions,B);this._pushDataToStore(actuate.util.Utility.getLocalizedString("manageDataDialog.measures"),C.measures,B);this._tree.setStore(B);if(C.isLinkedDataModel){this._tree.expandDeeps(1);}else{this._tree.expandAll();}this._window.setTitle(C.name);}},_getCategories:function(E){var A={};var B=[];if(E){for(var D=0;D<E.length;D++){if(E[D].categoryName){var F={};F.name="categore::"+E[D].categoryName+"_id";F.displayName=E[D].categoryName;F.dataType="category";F.title=E[D].categoryHelpText||E[D].categoryName;F.strong=true;A[F.name]=F;}}for(var C in A){B.push(A[C]);}}return B;},createSoapNode:function(){},_pushDataToStore:function(M,K,A,F){if(A&&K&&K.length>0){if(M){A.put({id:F||M,text:M,type:M,strong:true});}for(var E=0;E<K.length;E++){var D=K[E];var C=D.fullName||D.name;var L=D.displayName||D.name;var H=D.type;var J=D.strong;var B=D.categoryName?"categore::"+D.categoryName+"_id":null;var I=D.title;if(D.levels){if(D.shared){H="SharedDimension";}else{H="Dimension";}}else{if(D.dataType=="category"){H="category";}}var G=C;if(F||M){C=(F||M)+"::"+C;}A.put({id:C,realId:G,text:L,type:H,parentId:F||M||B,strong:J,title:I});if(D.levels){this._pushDataToStore(null,D.levels,A,C);}if(D.measures){this._pushDataToStore(null,D.measures,A,C);}if(D.categoryName&&D.attributes){this._pushDataToStore(null,D.attributes,A,C);}}}},_neh_help_link:function(){if(this.parentLinkUrl){window.open(this.parentLinkUrl);}else{this.__openHelp(this.__getHelpTopic());}}});