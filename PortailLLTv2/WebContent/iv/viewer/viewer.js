actuate.util.Package.define("actuate.iv.core");actuate.iv.core.ClassLoader=actuate.Class.create();actuate.Class.extend(actuate.iv.core.ClassLoader,{_instance:null,getInstance:function(){var A=actuate.iv.core.ClassLoader;if(!A._instance){A._instance=new actuate.iv.core.ClassLoader();}return A._instance;}});actuate.iv.core.ClassLoader.prototype={forName:function(A){var B=actuate.util.Package.getNamespaceObjectReference2(A);if(!B){return null;}return this._getInstance(A,actuate.util.Package.getInstanceName(A));},_getInstance:function(F,C){var B="return "+C+";";var G=new Function(B);var A=G();if(A==null){var E=C+"= new "+F+"( )";var D=new Function(E);D();return G();}return A;},getHandler:function(A,B){var C=null;if(B=="InteractiveViewer"||B=="DataService"){C=A;}else{if(B=="Metadata"){C=A.cacheManager;}else{if(B=="_navigationBar"){C=A.navbar;}else{if(B=="_tocPanel"){if(A.tocPanel==null){var D=actuate.util.browser;if(D&&D.useMobile()){if(D.isIPod||D.isIPhone||D.isAndroidPhone){A.tocPanel=new actuate.iv.ui.mobile.view.IVTocForPhone(A);}else{A.tocPanel=new actuate.iv.ui.mobile.view.IVTocForTablet(A);}}else{A.tocPanel=new actuate.iv.ui.view.IVToc(A);}}C=A.tocPanel;}else{if(B==="cancel_gaget_generation_indicator"){C=A.cancelIndicator;}else{C=actuate.iv.core.ClassLoader.getInstance().forName(B);}}}}}return C;}};actuate.util.Package.define("actuate.iv");actuate.iv.constant=actuate.Class.create();actuate.Class.extend(actuate.iv.constant,{ExportFormat:{WORD:"doc",PWOERPOINT:"ppt",PDF:"pdf",EXCEL:"xls",POSTSCRIPT:"ps"}});actuate.Class.extend(actuate.iv.constant,{sqlTypes:{INTEGER:"4",DOUBLE:"8",DECIMAL:"3",FLOAT:"6",STRING:"12",OTHER:"1111"}});actuate.Class.extend(actuate.iv.constant,{urlParameter:{RESULTSETNAME:"__resultsetname",FORMAT:"__format",OS_NAME:"__os_name",PAGE:"__page",PAGESTYLE:"__pageoverflow",PAGESETTINGSTYLE:"__pagesettings_style",IVSESSIONID:"__ivsessionid",MAXROWS:"__maxrows",EXPORTDATATYPE:"__exportdatatype",EXPORTCOLUMNHEADER:"__exportcolumnheader",EXPORTWITHCR:"__exportwithcr",EXPORTCOLUMNTYPE:"__exportColumnType",NUMBERFORMAT:"__numberFormat",ENCODINGSTYLE:"__exportencoding",EXPORTLOCALENEUTRAL:"__exportlocaleneutral",SVG:"__svg",DPI:"__dpi",PERSISTENTDOCUMENTNAME:"__persistentdocumentname",ASATTACHMENT:"__asattachment",BOOKMARK:"__bookmark",GADGETID:"__gadgetid",ISFROMCUBE:"__isFromCube",POPUPPRINTDIALOG:"__popupprintdialog"}});actuate.Class.extend(actuate.iv.constant,{uiConfig:{CONFIG_ON:"ON",CONFIG_OFF:"OFF",SCROLL_PANEL:"ScrollPanel",PAN_IN_OUT:"PanInOut",MOUSE_SCROLLING:"MouseScrolling"}});actuate.Class.extend(actuate.iv.constant,{SaveFileDialogModel:{FILE_EXTENSIONS:["dir"]}});actuate.Class.extend(actuate.iv.constant,{LocalBind:{__E_LINKTOTHISPAGE:"actuate.iv.ui.dialog.ivLinkToThisPageDialog",__E_PRINT:"actuate.iv.ui.dialog.ivPrintDialog",__E_WARN:"actuate.iv.ui.dialog.ivWarningDialog",__E_EXCEPTION:"actuate.iv.ui.dialog.ivExceptionDialog",__E_CALENDAR:"actuate.dialog.CalendarDialog",__E_QUERY_PARAMETER:"InteractiveViewer",__E_TOC:"InteractiveViewer",__E_FACEBOOK_COMMENTS:"InteractiveViewer"}});actuate.Class.extend(actuate.iv.constant,{CrosstabElementType:{ROW_LEVEL:"RowLevel",COLUMN_LEVEL:"ColumnLevel",MEASURE:"Measure"},CrosstabAxis:{X:0,Y:1}});actuate.Class.extend(actuate.iv.constant,{ChartSubType:{CHART_TYPE_PIE_CHART:"Pie Chart",CHART_TYPE_GANTT_CHART:"Gantt Chart",CHART_TYPE_BUBBLE_CHART:"Bubble Chart",CHART_TYPE_DIFFERENCE_CHART:"Difference Chart",CHART_TYPE_METER_CHART:"Meter Chart",CHART_TYPE_SCATTER_CHART:"Scatter Chart",CHART_TYPE_BAR_CHART:"Bar Chart",CHART_TYPE_AREA_CHART:"Area Chart",CHART_TYPE_LINE_CHART:"Line Chart",CHART_TYPE_STOCK_CHART:"Stock Chart",CHART_TYPE_TUBE_CHART:"Tube Chart",CHART_TYPE_CONE_CHART:"Cone Chart",CHART_TYPE_DONUT_CHART:"Doughnut Chart",CHART_TYPE_COLUMN_CHART:"Column Chart",CHART_TYPE_PYRAMID_CHART:"Pyramid Chart",CHART_TYPE_RADER_CHART:"Radar Chart",CHART_TYPE_BAR_CHART:"Bar Chart"}});actuate.Class.extend(actuate.iv.constant,{EventFeatureMapping:{"__E_QUERY_FORMAT":{"boolean":"BOOLEAN_FORMAT_DIALOG","date-time":"DATATIME_FORMAT_DIALOG","date":"DATE_FORMAT_DIALOG","time":"TIME_FORMAT_DIALOG","decimal":"NUMBER_FORMAT_DIALOG","float":"NUMBER_FORMAT_DIALOG","integer":"NUMBER_FORMAT_DIALOG","string":"STRING_FORMAT_DIALOG"},"__E_QUERY_GRANDTOTAL_DATA_FORMAT":{"boolean":"BOOLEAN_FORMAT_DIALOG","date-time":"DATATIME_FORMAT_DIALOG","date":"DATE_FORMAT_DIALOG","time":"TIME_FORMAT_DIALOG","decimal":"NUMBER_FORMAT_DIALOG","float":"NUMBER_FORMAT_DIALOG","integer":"NUMBER_FORMAT_DIALOG","string":"STRING_FORMAT_DIALOG","any":"STRING_FORMAT_DIALOG"},"__E_QUERY_SUBTOTAL_DATA_FORMAT":{"boolean":"BOOLEAN_FORMAT_DIALOG","date-time":"DATATIME_FORMAT_DIALOG","date":"DATE_FORMAT_DIALOG","time":"TIME_FORMAT_DIALOG","decimal":"NUMBER_FORMAT_DIALOG","float":"NUMBER_FORMAT_DIALOG","integer":"NUMBER_FORMAT_DIALOG","string":"STRING_FORMAT_DIALOG","any":"STRING_FORMAT_DIALOG"},"__E_CALCULATION":"CALCULATION_DIALOG","__E_EDIT_CALCULATION":"CALCULATION_DIALOG","__E_QUERY_PAGE_BREAK":"PAGE_BREAK_DIALOG","__E_HIDESHOW_ITEM":"HIDESHOW_ITEM_DIALOG","__E_TOPBOTTOMN":"TOPBOTTOMN_DIALOG","__E_AGGREGATION":"AGGREGATION_DIALOG","__E_QUERY_HIDDEN_COLUMN":"SHOW_COLUMN_DIALOG","__E_QUERY_MANAGETABLECOLUMN":"MANAGETABLECOLUMN_DIALOG","__E_QUERY_EXPORT":"EXPORT_DIALOG","__E_QUERY_DOCUMENT_EXPORT":"EXPORT_DIALOG","__E_EXPORTREPORT":"EXPORTREPORT_DIALOG","__E_DOCUMENT_EXPORTREPORT":"EXPORTREPORT_DIALOG","__E_QUERY_SAVE_FILE":"SAVE__DIALOG","__E_QUERY_SAVE_DOCUMENT":"SAVE__DIALOG","__E_QUERY_GROUP":"GROUP_DIALOG","__E_SORTADVANCED":"ADVANCED_SORT_DIALOG","__E_QUERY_GROUP_DETAIL":"GROUP_DETAIL_DIALOG","__E_VALUE_DIALOG":"VALUE_DIALOG","__E_QUERY_HEADER_FONT":"FONT_DIALOG","__E_QUERY_FONT":"FONT_DIALOG","__E_SHARE_STYLE":"COLUMNLIST_DIALOG","__E_SHARE_FORMAT":"COLUMNLIST_DIALOG","__E_CONDITIONALFORMATTING":"CONDITIONALFORMATTING_DIALOG","__E_GET_AVAILABLE_DATA_TYPES":"COLUMN_DATATYPE_DIALOG","__E_GET_AVAILABLE_DATA_ITEMS":"AVAILABLE_DATAITEM_DIALOG","__E_LINKTOTHISPAGE":"LINKTOTHISPAGE_DIALOG","__E_PRINT":"PRINT_DIALOG","__E_FACEBOOK_COMMENTS":"FACEBOOK_COMMENTS_PANEL","__E_FILTER":"FILTER_DIALOG","__E_ADVANCEDFILTERDIALOG":"ADVANCEDFILTERDIALOG_DIALOG","__E_QUERYTYPE":"CHART_TYPE_DIALOG","__E_CHART_FORMAT":"CHART_FORMAT_DIALOG","__E_FLASHGADGET_FORMAT":{root:"FLASHGADGET_FORMAT_DIALOG",children:["METER_FORMAT_TAB","LINEARGAUGE_FORMAT_TAB","SPARKLINE_FORMAT_TAB","BULLET_FORMAT_TAB","CYLINDER_FORMAT_TAB","THERMOMETER_FORMAT_TAB"]},"__E_WARN":"WARN_DIALOG","__E_EXCEPTION":"EXCEPTION_DIALOG","__E_CALENDAR":"CALENDAR_DIALOG","__E_TOC":"TOC","__E_QUERY_PARAMETER":"PARAMETER","__E_DATA_ANALYZER":"DATA_ANALYZER_DIALOG","__E_QUERY_GRANDTOTAL_LABEL_FONT":"FONT_DIALOG","__E_QUERY_GRANDTOTAL_DATA_FONT":"FONT_DIALOG","__E_QUERY_SUBTOTAL_LABEL_FONT":"FONT_DIALOG","__E_QUERY_SUBTOTAL_DATA_FONT":"FONT_DIALOG","__E_CHART_CATEGORIES":"CHART_CATEGORIES_DIALOG","__E_CHART_SERIES":"CHART_SERIES_DIALOG"}});actuate.Class.extend(actuate.iv.constant,{Direction:{TOP:"TOP",BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT"}});actuate.Class.extend(actuate.iv.constant,{OverlayType:{ROW:"ROW",COLUMN:"COLUMN",CELL:"CELL"}});actuate.Class.extend(actuate.iv.constant,{CSS_INPUTBOX:"commonInputBoxStyle",GROUP_BUTTON_CSS_CLASS:"actuate_viewer_group_button_"});actuate.iv.constant.prototype={};actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVEventDispatcher=actuate.Class.extendClass(actuate.common.EventDispatcher,{initialize:function(A){actuate.common.EventDispatcher.prototype.initialize.call(this,A);},broadcastEvent:function(B,C,D){if(actuate.iv.core.iVEvent.__E_WARN==B){var A=C;C={};C.cache=A;}actuate.iv.core.IVEventDispatcher.superclass.broadcastEvent.call(this,B,C,D);},_createRequest:function(){return new actuate.iv.request.IVGenericRequest(this._service._helper||this._service);}});actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVEvent={__E_WARN:"__E_WARN",__E_SELECTED:"__E_SELECTED",__E_BLUR:"__E_BLUR",__E_GETPAGE:"__E_GETPAGE",__E_CANCEL_GADGET_GENERATION:"__E_CANCEL_GADGET_GENERATION",__E_GETREPORTLET:"__E_GETREPORTLET",__E_GOTO_BOOKMARK:"__E_GOTO_BOOKMARK",__E_PRINT:"__E_PRINT",__E_APPLY_PRINT:"__E_APPLY_PRINT",__E_QUERY_EXPORT:"__E_QUERY_EXPORT",__E_QUERY_DOCUMENT_EXPORT:"__E_QUERY_DOCUMENT_EXPORT",__E_APPLY_EXPORT:"__E_APPLY_EXPORT",__E_EXPORTREPORT:"__E_EXPORTREPORT",__E_DOCUMENT_EXPORTREPORT:"__E_DOCUMENT_EXPORTREPORT",__E_APPLY_EXPORTREPORT:"__E_APPLY_EXPORTREPORT",__E_TOC:"__E_TOC",__E_QUERY_PARAMETER:"__E_QUERY_PARAMETER",__E_FACEBOOK_COMMENTS:"__E_FACEBOOK_COMMENTS",__E_RESIZE:"__E_RESIZE",__E_TOC_DATA:"__E_TOC_DATA",__E_RUN_REPORT:"__E_RUN_REPORT",__E_START_UP:"__E_START_UP",__E_CONTEXTMENU:"__E_CONTEXTMENU",__E_BLUR_CONTEXTMENU:"__E_BLUR_CONTEXTMENU",__E_QUERY_SAVE_FILE:"__E_QUERY_SAVE_FILE",__E_QUERY_SAVE_DOCUMENT:"__E_QUERY_SAVE_DOCUMENT",__E_SAVE_FILE:"__E_SAVE_FILE",__E_SAVE_DOCUMENT:"__E_SAVE_DOCUMENT",__E_UNDO:"__E_UNDO",__E_REDO:"__E_REDO",__E_GET_PAGE_COUNT:"__E_GET_PAGE_COUNT",__E_SORTASC:"__E_SORTASC",__E_SORTDESC:"__E_SORTDESC",__E_SORTADVANCED:"__E_SORTADVANCED",__E_APPLY_SORT:"__E_APPLY_ADVANCED_SORT",__E_QUERY_PAGE_BREAK:"__E_QUERY_PAGE_BREAK",__E_UPDATE_PAGE_BREAK:"__E_UPDATE_PAGE_BREAK",__E_QUERY_GROUP_DETAIL:"__E_QUERY_GROUP_DETAIL",__E_ADD_GROUP:"__E_ADD_GROUP",__E_UPDATE_GROUP:"__E_UPDATE_GROUP",__E_DELETE_GROUP:"__E_DELETE_GROUP",__E_QUERY_GROUP:"__E_QUERY_GROUP",__E_MOVE_TO_GROUP:"__E_MOVE_TO_GROUP",__E_MOVE_TO_LEFT:"__E_MOVE_TO_LEFT",__E_MOVE_TO_RIGHT:"__E_MOVE_TO_RIGHT",__E_HIDE_COLUMN:"__E_HIDE_COLUMN",__E_QUERY_HIDDEN_COLUMN:"__E_QUERY_HIDDEN_COLUMN",__E_SHOW_COLUMN:"__E_SHOW_COLUMN",__E_QUERY_MANAGETABLECOLUMN:"__E_QUERY_MANAGETABLECOLUMN",__E_REORDERCOLUMN:"__E_REORDERCOLUMN",__E_SWAPCOLUMNS:"__E_SWAPCOLUMNS",__E_MOVE_COLUMN:"__E_MOVE_COLUMN",__E_REPEAT_VALUE:"__E_REPEAT_VALUE",__E_NO_REPEAT_VALUE:"__E_NO_REPEAT_VALUE",__E_LINK_CLICKED:"__E_LINK_CLICKED",__E_FILTER:"__E_FILTER",__E_APPLYFILTER:"__E_APPLYFILTER",__E_CLEARFILTER:"__E_CLEARFILTER",__E_ADVANCEDFILTERDIALOG:"__E_ADVANCEDFILTERDIALOG",__E_APPLYADVANCEDFILTER:"__E_APPLYADVANCEDFILTER",__E_VALIDATE_FILTER_EXPRESSION:"__E_VALIDATE_FILTER_EXPRESSION",__E_CALCULATION:"__E_CALCULATION",__E_EDIT_CALCULATION:"__E_EDIT_CALCULATION",__E_APPLY_NEW_COM_COL:"__E_APPLY_NEW_COM_COL",__E_EDIT_COM_COL:"__E_EDIT_COM_COL",__E_AGGREGATION:"__E_AGGREGATION",__E_SETCOLUMNAGGREGATION:"__E_SETCOLUMNAGGREGATION",__E_QUERY_FORMAT:"__E_QUERY_FORMAT",__E_APPLY_FORMAT:"__E_APPLY_FORMAT",__E_QUERY_FONT:"__E_QUERY_FONT",__E_SHARE_STYLE:"__E_SHARE_STYLE",__E_SHARE_FORMAT:"__E_SHARE_FORMAT",__E_COLUMN_LIST:"__E_COLUMN_LIST",__E_APPLY_FLASHGADGET_FORMAT:"__E_APPLY_FLASHGADGET_FORMAT",__E_APPLY_FORMATSHARING:"__E_APPLY_FORMATSHARING",__E_QUERY_HEADER_FONT:"__E_QUERY_HEADER_FONT",__E_SET_FONT:"__E_SET_FONT",__E_SET_LABEL_FONT:"__E_SET_LABEL_FONT",__E_MOREVALUES_FILTER:"__E_MOREVALUES_FILTER",__E_CF_MOREVALUES_FILTER:"__E_CF_MOREVALUES_FILTER",__E_QUERY_TEXT:"__E_QUERY_TEXT",__E_SET_TEXT:"__E_SET_TEXT",__E_DELETE_COLUMN:"__E_DELETE_COLUMN",__E_ALIGN_LEFT:"__E_ALIGN_LEFT",__E_ALIGN_CENTER:"__E_ALIGN_CENTER",__E_ALIGN_RIGHT:"__E_ALIGN_RIGHT",__E_HEADER_ALIGN_LEFT:"__E_HEADER_ALIGN_LEFT",__E_HEADER_ALIGN_CENTER:"__E_HEADER_ALIGN_CENTER",__E_HEADER_ALIGN_RIGHT:"__E_HEADER_ALIGN_RIGHT",__E_GRANDTOTAL_LABEL_ALIGN_LEFT:"__E_GRANDTOTAL_LABEL_ALIGN_LEFT",__E_GRANDTOTAL_LABEL_ALIGN_CENTER:"__E_GRANDTOTAL_LABEL_ALIGN_CENTER",__E_GRANDTOTAL_LABEL_ALIGN_RIGHT:"__E_GRANDTOTAL_LABEL_ALIGN_RIGHT",__E_GRANDTOTAL_DATA_ALIGN_LEFT:"__E_GRANDTOTAL_DATA_ALIGN_LEFT",__E_GRANDTOTAL_DATA_ALIGN_CENTER:"__E_GRANDTOTAL_DATA_ALIGN_CENTER",__E_GRANDTOTAL_DATA_ALIGN_RIGHT:"__E_GRANDTOTAL_DATA_ALIGN_RIGHT",__E_QUERY_GRANDTOTAL_LABEL_FONT:"__E_QUERY_GRANDTOTAL_LABEL_FONT",__E_QUERY_GRANDTOTAL_DATA_FONT:"__E_QUERY_GRANDTOTAL_DATA_FONT",__E_SET_GRANDTOTAL_LABEL_FONT:"__E_SET_GRANDTOTAL_LABEL_FONT",__E_SET_GRANDTOTAL_DATA_FONT:"__E_SET_GRANDTOTAL_DATA_FONT",__E_QUERY_GRANDTOTAL_DATA_FORMAT:"__E_QUERY_GRANDTOTAL_DATA_FORMAT",__E_APPLY_GRANDTOTAL_DATA_FORMAT:"__E_APPLY_GRANDTOTAL_DATA_FORMAT",__E_SUBTOTAL_LABEL_ALIGN_LEFT:"__E_SUBTOTAL_LABEL_ALIGN_LEFT",__E_SUBTOTAL_LABEL_ALIGN_CENTER:"__E_SUBTOTAL_LABEL_ALIGN_CENTER",__E_SUBTOTAL_LABEL_ALIGN_RIGHT:"__E_SUBTOTAL_LABEL_ALIGN_RIGHT",__E_SUBTOTAL_DATA_ALIGN_LEFT:"__E_SUBTOTAL_DATA_ALIGN_LEFT",__E_SUBTOTAL_DATA_ALIGN_CENTER:"__E_SUBTOTAL_DATA_ALIGN_CENTER",__E_SUBTOTAL_DATA_ALIGN_RIGHT:"__E_SUBTOTAL_DATA_ALIGN_RIGHT",__E_QUERY_SUBTOTAL_LABEL_FONT:"__E_QUERY_SUBTOTAL_LABEL_FONT",__E_QUERY_SUBTOTAL_DATA_FONT:"__E_QUERY_SUBTOTAL_DATA_FONT",__E_SET_SUBTOTAL_LABEL_FONT:"__E_SET_SUBTOTAL_LABEL_FONT",__E_SET_SUBTOTAL_DATA_FONT:"__E_SET_SUBTOTAL_DATA_FONT",__E_QUERY_SUBTOTAL_DATA_FORMAT:"__E_QUERY_SUBTOTAL_DATA_FORMAT",__E_APPLY_SUBTOTAL_DATA_FORMAT:"__E_APPLY_SUBTOTAL_DATA_FORMAT",__E_ENABLE_IV:"__E_ENABLE_IV",__E_DISABLE_IV:"__E_DISABLE_IV",__E_HIDESHOW_ITEM:"__E_HIDESHOW_ITEM",__E_APPLYHIDESHOW_ITEM:"__E_APPLYHIDESHOW_ITEM",__E_TOPBOTTOMN:"__E_TOPBOTTOMN",__E_APPLYTOPBOTTOMN:"__E_APPLYTOPBOTTOMN",__E_CLEARTOPBOTTOMN:"__E_CLEARTOPBOTTOMN",__E_QUERYTYPE:"__E_QUERYTYPE",__E_APPLYTYPE:"__E_APPLYTYPE",__E_CHART_FORMAT:"__E_CHART_FORMAT",__E_FLASHGADGET_FORMAT:"__E_FLASHGADGET_FORMAT",__E_APPLYCHARTFORMAT:"__E_APPLYCHARTFORMAT",__E_APPLYCHARTSIZE:"__E_APPLYCHARTSIZE",__E_APPLYGADGETFORMAT:"__E_APPLYGADGETFORMAT",__E_CONDITIONALFORMATTING:"__E_CONDITIONALFORMATTING",__E_APPLY_FORMAT_RULE:"__E_APPLY_FORMAT_RULE",__E_COLUMN_PROPERTIES:"__E_COLUMN_PROPERTIES",__E_APPLY_COLUMN_PROPERTIES:"__E_APPLY_COLUMN_PROPERTIES",__E_APPLY_COLUMN_WIDTH:"__E_APPLY_COLUMN_WIDTH",__E_APPLY_ROW_HEIGHT:"__E_APPLY_ROW_HEIGHT",__E_HIDEDETAIL:"__E_HIDEDETAIL",__E_SHOWDETAIL:"__E_SHOWDETAIL",__E_VALIDATE_BRD_EXPRESSION:"__E_VALIDATE_BRD_EXPRESSION",__E_APPLY_REQ_WITH_DATA:"__E_APPLY_REQ_WITH_DATA",__E_BATCH_UPDATE:"__E_BATCH_UPDATE",__E_DOWNLOAD_RESULTSET:"__E_DOWNLOAD_RESULTSET",__E_GET_REPORTCONTENT:"__E_GET_REPORTCONTENT",__E_SWITCH_VIEW:"__E_SWITCH_VIEW",__E_GET_AVAILABLE_DATA_ITEMS:"__E_GET_AVAILABLE_DATA_ITEMS",__E_GET_AVAILABLE_DATA_TYPES:"__E_GET_AVAILABLE_DATA_TYPES",__E_LINKTOTHISPAGE:"__E_LINKTOTHISPAGE",__E_VALUE_DIALOG:"__E_VALUE_DIALOG",__E_FONT_DIALOG:"__E_FONT_DIALOG",__E_EXCEPTION:"__E_EXCEPTION",__E_CALENDAR:"__E_CALENDAR",__E_ADJUST_BY_PARAMETER:"__E_ADJUST_BY_PARAMETER",__E_SHOW_TOOLTIP:"__E_SHOW_TOOLTIP",__E_QUERY_TOOLTIP:"__E_QUERY_TOOLTIP",__E_DATA_ANALYZER:"__E_DATA_ANALYZER",__E_APPLY_DATA_ANALYZER:"__E_APPLY_DATA_ANALYZER",__E_GET_DATETIME_FORMATS:"__E_GET_DATETIME_FORMATS",__E_DRILLUP_FROM_CATEGORIES:"__E_DRILLUP_FROM_CATEGORIES",__E_DRILLUP_FROM_SERIES:"__E_DRILLUP_FROM_SERIES",__E_DRILLDOWN_FROM_CATEGORIES:"__E_DRILLDOWN_FROM_CATEGORIES",__E_DRILLDOWN_FROM_SERIES:"__E_DRILLDOWN_FROM_SERIES",__E_CHART_CATEGORIES:"__E_CHART_CATEGORIES",__E_CHART_SERIES:"__E_CHART_SERIES"};actuate.iv.core.iVEvent=actuate.iv.core.IVEvent;actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVOperation={__OP_WARN:"__OP_WARN",__OP_SELECTED:"GetAvailableOperations",__OP_GETPAGE:"GetPage",__OP_CANCEL_GADGET_GENERATION:"CancelGadgetGeneration",__OP_GETREPORTLET:"GetReportlet",__OP_EXPORTREPORT:"ExportReport",__OP_DOCUMENT_EXPORTREPORT:"ExportReport",__OP_RUN_REPORT:"RunReport",__OP_START_UP:"StartUp",__OP_QUERY_SAVE_FILE:"QuerySaveFile",__OP_SAVE_FILE:"SaveFile",__OP_QUERY_SAVE_DOCUMENT:"QuerySaveDocument",__OP_SAVE_DOCUMENT:"SaveDocument",__OP_UNDO:"Undo",__OP_REDO:"Redo",__OP_QUERY_SERVERPRINT:"QueryServerPrint",__OP_SERVERPRINT:"ServerPrint",__OP_GET_PAGE_COUNT:"GetPageCount",__OP_SORTASC:"SetSort",__OP_SORTDESC:"SetSort",__OP_SORTADVANCED:"QuerySortingDirections",__OP_APPLY_ADVANCED_SORT:"SetSort",__OP_QUERY_PAGE_BREAK:"QueryPageBreak",__OP_UPDATE_PAGE_BREAK:"UpdatePageBreak",__OP_ADD_GROUP:"AddGroup",__OP_UPDATE_GROUP:"UpdateGroup",__OP_DELETE_GROUP:"DeleteGroup",__OP_QUERY_GROUP:"QueryGroup",__OP_MOVE_TO_GROUP:"MoveToGroup",__OP_MOVE_TO_LEFT:"MoveColumn",__OP_MOVE_TO_RIGHT:"MoveColumn",__OP_HIDE_COLUMN:"HideColumn",__OP_SHOW_COLUMN:"ShowColumn",__OP_COLUMN_LIST:"ShareColumnStyle",__OP_APPLY_FORMATSHARING:"ShareColumnFormat",__OP_APPLY_FLASHGADGET_FORMAT:"ApplyFlashGadgetFormat",__OP_REORDERCOLUMN:"ReorderColumn",__OP_SWAPCOLUMNS:"SwapColumns",__OP_MOVE_COLUMN:"MoveColumn",__OP_REPEAT_VALUE:"SetRepeatValue",__OP_NO_REPEAT_VALUE:"SetRepeatValue",__OP_FILTER:"GetFilter",__OP_APPLYFILTER:"SetFilter",__OP_CLEARFILTER:"ClearFilter",__OP_ADVANCEDFILTERDIALOG:"GetAdvancedFilter",__OP_APPLYADVANCEDFILTER:"SetAdvancedFilter",__OP_VALIDATE_FILTER_EXPRESSION:"ValidateFilterExpression",__OP_APPLY_NEW_COM_COL:"InsertComputedColumn",__OP_EDIT_COM_COL:"EditComputedColumn",__OP_SETCOLUMNAGGREGATION:"SetAggregation",__OP_APPLY_FORMAT:"ApplyFormat",__OP_SET_FONT:"SetFont",__OP_SET_LABEL_FONT:"SetLabelFont",__OP_MOREVALUES_FILTER:"MoreValuesFilter",__OP_CF_MOREVALUES_FILTER:"MoreValuesFilter",__OP_QUERY_TEXT:"GetText",__OP_SET_TEXT:"SetText",__OP_DELETE_COLUMN:"DeleteColumn",__OP_ALIGN_LEFT:"SetAlignment",__OP_ALIGN_CENTER:"SetAlignment",__OP_ALIGN_RIGHT:"SetAlignment",__OP_HEADER_ALIGN_LEFT:"SetHeaderAlignment",__OP_HEADER_ALIGN_CENTER:"SetHeaderAlignment",__OP_HEADER_ALIGN_RIGHT:"SetHeaderAlignment",__OP_ENABLE_IV:"EnableIV",__OP_DISABLE_IV:"DisableIV",__OP_HIDESHOW_ITEM:"HideShowItem",__OP_APPLYHIDESHOW_ITEM:"ApplyHideShowItem",__OP_TOPBOTTOMN:"GetTopBottomN",__OP_APPLYTOPBOTTOMN:"ApplyTopBottomN",__OP_CLEARTOPBOTTOMN:"ClearTopBottomN",__OP_QUERYTYPE:"QueryType",__OP_APPLYTYPE:"ApplyType",__OP_APPLYCHARTFORMAT:"ApplyChartFormat",__OP_APPLYCHARTSIZE:"ApplyChartSize",__OP_APPLYGADGETFORMAT:"ApplyGadgetFormat",__OP_CONDITIONALFORMATTING:"GetColumnFormatRule",__OP_APPLY_FORMAT_RULE:"ApplyColumnFormatRule",__OP_APPLY_COLUMN_WIDTH:"SetColumnWidth",__OP_APPLY_ROW_HEIGHT:"SetRowHeight",__OP_HIDEDETAIL:"HideDetail",__OP_SHOWDETAIL:"ShowDetail",__OP_VALIDATE_BRD_EXPRESSION:"CheckBRDValidity",__OP_SET_ALIGN:"SetAlignment",__OP_GET_PARAMETER:"GetParameter",__OP_SWITCH_VIEW:"SwitchView",__OP_GET_AVAILABLE_DATA_ITEMS:"GetAvailableDataItems",__OP_GET_FEATURE_METADATA:"GetFeatureMetadata",__OP_GET_REPORTCONTENT:"GetReportContent",__OP_GRANDTOTAL_LABEL_ALIGN_LEFT:"SetAlignment",__OP_GRANDTOTAL_LABEL_ALIGN_CENTER:"SetAlignment",__OP_GRANDTOTAL_LABEL_ALIGN_RIGHT:"SetAlignment",__OP_GRANDTOTAL_DATA_ALIGN_LEFT:"SetAlignment",__OP_GRANDTOTAL_DATA_ALIGN_CENTER:"SetAlignment",__OP_GRANDTOTAL_DATA_ALIGN_RIGHT:"SetAlignment",__OP_SET_GRANDTOTAL_LABEL_FONT:"SetFont",__OP_SET_GRANDTOTAL_DATA_FONT:"SetFont",__OP_APPLY_GRANDTOTAL_DATA_FORMAT:"ApplyFormat",__OP_SUBTOTAL_LABEL_ALIGN_LEFT:"SetAlignment",__OP_SUBTOTAL_LABEL_ALIGN_CENTER:"SetAlignment",__OP_SUBTOTAL_LABEL_ALIGN_RIGHT:"SetAlignment",__OP_SUBTOTAL_DATA_ALIGN_LEFT:"SetAlignment",__OP_SUBTOTAL_DATA_ALIGN_CENTER:"SetAlignment",__OP_SUBTOTAL_DATA_ALIGN_RIGHT:"SetAlignment",__OP_GET_DATETIME_FORMATS:"GetDateTimeFormats",__OP_SET_SUBTOTAL_LABEL_FONT:"SetFont",__OP_SET_SUBTOTAL_DATA_FONT:"SetFont",__OP_APPLY_SUBTOTAL_DATA_FORMAT:"ApplyFormat",__OP_DOWNLOAD_RESULTSET:"DownloadResultSet",__OP_SHOW_TOOLTIP:"ShowTooltip",__OP_DOWNLOAD_RESULTSET:"DownloadResultSet",__OP_DRILLUP_FROM_CATEGORIES:"DrillUp",__OP_DRILLUP_FROM_SERIES:"DrillUp",__OP_DRILLDOWN_FROM_CATEGORIES:"DrillDown",__OP_DRILLDOWN_FROM_SERIES:"DrillDown",__OP_CHART_CATEGORIES:"ChartCategories",__OP_CHART_SERIES:"ChartSeries",__OP_PRINT:"Print"};actuate.iv.core.iVOperation=actuate.iv.core.IVOperation;actuate.util.Package.define("actuate.iv.utility");actuate.iv.utility.IVZIndex=function(){};actuate.iv.utility.IVZIndex.prototype={CONTENT_PANEL:200,FLOATING_PANEL:300,BACKGROUND_OVERLAY:400,ELEMENT_OVERLAY:500,MOUSEOVER_OVERLAY:600,NAVBAR:700,MOBILE_MENU:900,PHONE_TOC:901,initialize:function(){}};actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVDndManager=actuate.Class.create();actuate.iv.core.IVDndManager.prototype={_consumer:null,_dragTarget:null,_dropTarget:null,_mousemove_closure:null,_mousedrop_closure:null,initialize:function(A){this._consumer=A;this._mousemove_closure=actuate.Method.bindAsEventListener(this._neh_mousemove,this);this._mousedrop_closure=actuate.Method.bindAsEventListener(this._neh_mouseup,this);},startDragAndDrop:function(A,B,C){if(!this._dragTarget){this._dragTarget=A;this._dropTarget=C;this._dragTarget.startDnd(B);if(this._dropTarget){this._dropTarget.startDnd(B);}actuate.util.Event.observe(document,"mousemove",this._mousemove_closure,false);actuate.util.Event.observe(document,"mouseup",this._mousedrop_closure,false);}},startDnd:function(A,C){if(document.selection){document.selection.empty();}else{if(window.getSelection){var B=window.getSelection();if(B){B.removeAllRanges();}}}A.offsetX=actuate.util.Event.pointerX(C)-parseInt(A.style.left||"0");A.offsetY=actuate.util.Event.pointerY(C)-parseInt(A.style.top||"0");A.lastX=actuate.util.Event.pointerX(C);A.lastY=actuate.util.Event.pointerY(C);A.originalTop=parseInt(A.style.top||"0");A.originalLeft=parseInt(A.style.left||"0");A.style.cursor="pointer";},drag:function(A,B){A.style.left=(B.x-A.offsetX)+"px";A.style.top=(B.y-A.offsetY)+"px";},_neh_mousemove:function(A){actuate.util.Event.stop(A);var B=actuate.util.Event.pointer(A);if(this._dragTarget){this._dragTarget.drag(B);}if(this._dropTarget){this._dropTarget.dragInto(B);}},_neh_mouseup:function(A){actuate.util.Event.stop(A);document.body.style.cursor="default";actuate.util.Event.stopObserving(document,"mousemove",this._mousemove_closure);actuate.util.Event.stopObserving(document,"mouseup",this._mousedrop_closure);if(this._dragTarget){this._dragTarget.drop();this._dragTarget=null;}if(this._dropTarget){this._dropTarget.dropInto();this._dropTarget=null;}this._consumer.finishDnd();}};actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVSoapResponse=actuate.Class.create();actuate.iv.core.IVSoapResponse.prototype=actuate.Class.extend(new actuate.common.GenericResponse(),{initialize:function(A){actuate.common.GenericResponse.prototype.initialize.call(this,A);},_getResponseHandler:function(){return new actuate.iv.core.IVSoapResponseHandler(this._service);},_getSoapFaultHandler:function(){return new actuate.iv.core.IVSoapFaultHandler(this._service);}});actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVSoapResponseHandler=actuate.Class.create();actuate.iv.core.IVSoapResponseHandler.prototype=actuate.Class.extend(new actuate.common.SoapResponseHandler(),{_unProcessedContent:null,_callbackTriggered:null,_contentsArray:[],initialize:function(A){actuate.common.SoapResponseHandler.prototype.initialize.call(this,A);},process:function(B,D){if(!B){return ;}this._unProcessedContent=null;this._callbackTriggered=null;this._processIVState(B);var C=this._processUpdateContent(B.getElementsByTagName("UpdateContent"),D);this._processUpdateData(B.getElementsByTagName("UpdateData"),D);if(D){if(this._unProcessedContent){D(this._unProcessedContent);}else{if(!this._callbackTriggered){setTimeout(D,0);}}}if(!this._service.progressiveViewing&&C){var A=actuate.util.browser&&actuate.util.browser.useMobile();if(!A){this._service.notifyContentChanged();}}return true;},_processIVState:function(K){var C=false;var B=actuate.iv.utility.ivUtility.getValueByTagName(K,"TransientDocument");if(B){if(B!=this._service.transientDocumentName){this._service.apiInstance._isclientInitializeScript=false;}this._service.transientDocumentName=B;C=true;}var E=K.getElementsByTagName("ConnectionHandle");var I=null;if(E&&E.length>0){var G=E[0].firstChild;if(G){I=G.data;this._service.connectionHandle=I;if(this._service.apiInstance.requestOptions){this._service.apiInstance.requestOptions.__getCustomParameters()["connectionHandle"]=I;}C=true;}}var F=K.getElementsByTagName("IVSessionID");var D=K.getElementsByTagName("ReportDocument");if(D&&D.length>0){var G=D[0].firstChild;var J=G.data;if(J){if(!I){this._service.apiInstance.setReportDocument(J,this._service.apiInstance.getConnectionHandle());}else{this._service.apiInstance.setReportDocument(J,I);}C=false;}}if(C){this._service.apiInstance._updateSoapUrl();}if(F&&F.length>0){var G=F[0].firstChild;var A=G.data;if(!A){A="";}this._service.apiInstance.sessionId=A;}var H=K.getElementsByTagName("Information");if(H&&H.length>0){this._service.information=H[0].firstChild.data;}},_processUpdateContent:function(G,B){var F=false;if(!G){return F;}this._contentsArray.length=0;for(var P=0;P<G.length;P++){var R=G[P].getElementsByTagName("Target")[0];var I=R.firstChild.data;var N=I.substring(0,5);var A=this._service["_document"];var M=G[P].getElementsByTagName("Content")[0];if(!M){var L={name:"CustomError",message:(" _processUpdateContent empty contents")};throw L;}var K="";if(M.hasChildNodes){for(var O=0;O<M.childNodes.length;O++){if(M.childNodes[O].nodeType==3){K+=M.childNodes[O].data;}}}if(K){if(I=="JSAPI"){this._unProcessedContent=K;return F;}else{var C=G[P].getElementsByTagName("Bookmark");var E=(C.length>0)?C[0].firstChild.data:null;var J=G[P].getElementsByTagName("ReplaceDiv");var H=(J.length>0)?J[0].firstChild.data:null;var Q=G[P].getElementsByTagName("Json");var S=this._getPageNo(Q);var D=G[P].getElementsByTagName("InitializationId");this._contentsArray.push({"contentData":K,"bookmark":E,"replaceDiv":H,"pageNo":S,"inits":D});F=true;}}}if(this._contentsArray.length>0){A.render(this._contentsArray);}return F;},_getPageNo:function(jsons){var pageNo=null;this._service._clientInitializeScript=null;if(jsons&&jsons.length>0){if(jsons[0].firstChild&&jsons[0].firstChild.data){var jsonsResult;pageNo=jsons[0].firstChild.data;try{jsonsResult=actuate.util.Utility.parseJson(jsons[0].firstChild.data);}catch(e){}if(jsonsResult){if(jsonsResult.clientInitializeScript!=null){if(!this._service.apiInstance._isclientInitializeScript){this._service.apiInstance._isclientInitializeScript=true;var clientInitializeScript=jsonsResult.clientInitializeScript;eval(clientInitializeScript);}}if(jsonsResult.pageNumber!=null){pageNo=jsonsResult.pageNumber;}}}}return pageNo;},_processUpdateData:function(K,L){if(!K){return ;}for(var F=0;F<K.length;F++){var H=K[F].getElementsByTagName("Target");if(!H||H.length<=0){continue;}var G=K[F].getElementsByTagName("Data");var E=H[0].textContent;if(E=="CommandStack"){var N=G[0];if(N){var B=N.getElementsByTagName("Json");if(B.length>0){N=actuate.util.Utility.parseJson(B[0]);actuate.common.CacheManager.COMMAND_STACK_LENGTH=N.currentRecord;actuate.common.CacheManager.COMMAND_STACK_RECORD=N.stackLength;}}continue;}var A=H[0].firstChild.data;if(A=="actuate.iv.ui.dialog.IVWarningDialog"){if(G&&G.length>0){this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,G[0]);continue;}}else{if(A=="actuate.iv.ui.dialog.IVAvailableDataItemDialog"){this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GET_AVAILABLE_DATA_ITEMS,G[0]);continue;}else{if(A=="DataService"){this._callbackTriggered=true;}}}var M=actuate.iv.core.ClassLoader.getInstance().getHandler(this._service,A);if(!M){continue;}var C=K[F].getElementsByTagName("Action");if(C&&C.length>0&&"None"!=C[0].firstChild.data){if(M.processAction){M.processAction(this._service,C[0].firstChild.data);}}if(!G||G.length<=0){continue;}if(M.processBind||M.show){var J=K[F].getElementsByTagName("Type");var I=null;if(J&&J.length>0){I=J[0].firstChild==null?null:J[0].firstChild.data;}var D=G[0];if(D){var B=D.getElementsByTagName("Json");if(B.length>0&&A!="_tocPanel"){D=actuate.util.Utility.parseJson(B[0]);}}if(M.processBind){M.processBind(this._service,D,I,L);}else{if(M.show){M.show(D);}}}}}});actuate.util.Package.define("actuate.iv.core");actuate.iv.core.IVSoapFaultHandler=actuate.Class.create();actuate.iv.core.IVSoapFaultHandler.prototype=actuate.Class.extend(new actuate.common.SoapResponseHandler(),{initialize:function(A){actuate.common.SoapResponseHandler.prototype.initialize.call(this,A);},process:function(B,F){var C=B.getElementsByTagName("faultstring");if(C[0]&&C[0].firstChild){var A=C[0].firstChild.data;if(A.toUpperCase().indexOf("$$$TRANSIENT")>=0){this._service.__processTransientReportTimeout();return ;}if(actuate.util.browser&&actuate.util.browser.isNativeApp()){window.location="error://message="+A+"&action=mobilelanding";return ;}}var E=this._service.apiInstance._getEventHandlers(actuate.viewer.impl.EventConstants.ON_EXCEPTION);if(!(E&&E.length>0)){var D={};D.cache=B;this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_EXCEPTION,D);}this._service.notifyException(B,F);return false;}});actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVBoundDataColumn=actuate.Class.create();actuate.iv.data.IVBoundDataColumn.prototype={_TAG_NAME:"Name",_TAG_TYPE:"Type",_TAG_DISPLAY_NAME:"DisplayName",_TAG_DATA_TYPE:"DataType",_TAG_EXPRESSION:"Expression",_name:null,_expression:null,_type:null,_dataType:null,_displayName:null,_pattern:null,initialize:function(){},getName:function(){return this._name;},setName:function(A){this._name=A;},getExpression:function(){return this._expression;},setExpression:function(A){this._expression=A;},getType:function(){return this._type;},setType:function(A){this._type=A;},getDataType:function(){return this._dataType;},setDataType:function(A){this._dataType=A;},getDisplayName:function(){return this._displayName;},setDisplayName:function(A){this._displayName=A;},getPattern:function(){return this._pattern;},setPattern:function(A){this._pattern=A;},getSoapRequest:function(C,E){var A=actuate.util.XmlDom.createElement(C,E);var B=actuate.util.XmlDom.createElement(C,this._TAG_NAME);A.appendChild(B);var D=C.createTextNode(this.getName());B.appendChild(D);return A;},breakDownData:function(B){if(B!=null){var A=actuate.iv.utility.ivUtility;this._name=A.getValueByTagName(B,this._TAG_NAME);this._displayName=A.getValueByTagName(B,this._TAG_DISPLAY_NAME);this._type=A.getValueByTagName(B,this._TAG_TYPE);this._dataType=A.getValueByTagName(B,this._TAG_DATA_TYPE);if(this._dataType){this._dataType=parseInt(this._dataType);}this._expression=A.getValueByTagName(B,this._TAG_EXPRESSION);}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVBoundDataColumnList=actuate.Class.create();actuate.iv.data.IVBoundDataColumnList.prototype={_boundDataColumnList:null,_BOUNDDATACOLUMN:"BoundDataColumn",initialize:function(){this._boundDataColumnList=new Array();},getBoundDataColumnList:function(){return this._boundDataColumnList;},setBoundDataColumn:function(A){this._boundDataColumnList.push(A);},clearBoundDataColumnList:function(){this._boundDataColumnList.length=0;},getSoapRequest:function(E,F){var D=actuate.util.XmlDom.createElement(E,F);var B=this.getBoundDataColumnList();for(var C=0;C<B.length;C++){if(B[C]!=null){var A=B[C].getSoapRequest(E,this._BOUNDDATACOLUMN);D.appendChild(A);}}return D;},breakDownData:function(D){var C=D.getElementsByTagName(this._BOUNDDATACOLUMN);for(var B=0;B<C.length;B++){var A=new actuate.iv.data.IVBoundDataColumn();A.breakDownData(C[B]);this._boundDataColumnList.push(A);}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVColumnDefinitionGroup=actuate.Class.create();actuate.iv.data.IVColumnDefinitionGroup.prototype={_TAG_COLUMNDEF:"ColumnDef",_tableColumnDefinitionList:null,initialize:function(){this._tableColumnDefinitionList=new Array();},getTableColumnDefinitionList:function(){return this._tableColumnDefinitionList;},addTableColumnDefinition:function(A){this._tableColumnDefinitionList.push(A);},getSoapRequest:function(D,E){var C=actuate.util.XmlDom.createElement(D,E);for(var A=0;A<this._tableColumnDefinitionList.length;A++){var B=this._tableColumnDefinitionList[A];if(B!=null){C.appendChild(B.getSoapRequest(D,this._TAG_COLUMNDEF));}}return C;},breakDownData:function(D){var A=D.getElementsByTagName(actuate.Constant.tag.COLUMNDEFS);var C=A[0].getElementsByTagName(this._TAG_COLUMNDEF);for(var B=0;B<C.length;B++){var E=new actuate.iv.data.IVTableColumnDefinition();E.breakDownData(C[B]);this._tableColumnDefinitionList.push(E);}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVConditionLineList=actuate.Class.create();actuate.iv.data.IVConditionLineList.prototype={_TAG_CONDITIONLINE:"ConditionLine",_conditionLineList:null,initialize:function(){this._conditionLineList=new Array();},getConditionLineList:function(){return this._conditionLineList;},addConditionLine:function(A){this._conditionLineList.push(A);},clearConditionLineList:function(){this._conditionLineList.length=0;},getSoapRequest:function(C,D){var A=actuate.util.XmlDom.createElement(C,D);if(this._conditionLineList!=null){for(var B=0;B<this._conditionLineList.length;B++){filter.appendChild(this._conditionLineList[B].getSoapRequest(C,this._TAG_CONDITIONLINE));}}return A;},breakDownData:function(D){var C=D.getElementsByTagName(this._TAG_CONDITIONLINE);for(var B=0;B<C.length;B++){var A=new actuate.data.ConditionLine();if(C[B]!=null){A.breakDownData(C[B]);this._conditionLineList.push(A);}}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVData=actuate.Class.create();actuate.iv.data.IVData.prototype={FONT:"Font",RESULTSETS:"ResultSets",FORMAT:"Format",TOC:"TOC",EXPORT:"Export",PARAMETE_RDEFINITIONS:"ParameterDefinitions",PARAMETER_SELECTIONS:"ParameterSelections",CASCADE_PARAMETER:"CascadeParameter",_TAG_FILTER:"Filter",_TAG_PARAMETERVALUES:"ParameterValues",FILTER_LIST:"FilterList",COLUMNVALUES:"ColumnValues",PAGE:"Page",DATASETS:"DataSets",EDITABLE_ITEMLIST:"EditableItemList",REPORT_ITEMLIST:"ReportItemList",THEMES:"Themes",_TAG_COLUMNDEFS:"ColumnDefs",GROUP_DETAIL:"GroupDetail",CELL_DEFS:"CellDefs",CELL_DEF:"CellDef",SECTION_DEF:"SectionDef",_TAG_CHART:"Chart",LABEL_TEXT:"LabelText",FILE_BROWSING:"FileBrowsing",FILE:"File",DATA_SOURCES:"DataSources",BINDING_LIST:"BindingList",DATASET_DEF:"DataSetDef",DATASETS_TOUSE:"DataSetsToUse",DESIGN_STATE:"DesignState",TOOLBAR_STATE:"ToolbarState",REDIRECT_URL:"RedirectURL",POPUP_URL:"PopupURL",PREVIEW_FORMAT:"PreviewFormat",PAGE_LAYOUT:"PageLayout",BRS_LAYOUT:"BRSLayout",BRD_EXPRESSION:"BRDExpression",JOIN_METADATA:"JoinMetadata",_TAG_BOUNDDATACOLUMNLIST:"BoundDataColumnList",IOINFO_LIST:"IOInfoList",TABLECOL_CONTEXTMENU:"TableColContextMenu",TABLESELECT_CONTEXTMENU:"TableSectContextMenu",TABLE_CONTEXTMENU:"TableContextMenu",TABLELAYOUT_LIST:"TableLayoutList",AVAILABLE_OPERATION:"AvailableOperation",SORTDEFINITION_LIST:"SortDefinitionList",CONDFORMATTING:"CondFormatting",VALUE_LIST:"ValueList",REPORTITEM_VISIBLE_LIST:"ReportItemVisibleList",MESSAGE_LIST:"MessageList",TEMPLATE_CATEGORY:"TemplateCategory",INITIALIZATIONID_LIST:"InitializationIdList",AVAILABLE_DATAITEM_LIST:"AvailableDataItemList",MERGE_SPLIT:"MergeSplit",INSERT_DELETE_ROW:"InsertDeleteRow",PRINTERS:"Printers",PRINTER_OPTIONS:"PrinterOptions",FORM_REQUEST:"FormRequest",DATASET_REORDER:"DataSetReorder",RESULTSETDATA:"ResultSetData",_TAG_LABELTEXT:"LabelText",_TAG_DATA:"Data",_TAG_RESULTSETREQUEST:"ResultSetRequest",initialize:function(){},getParameterValues:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_PARAMETERVALUES));return B;},getBoundDataColumnList:function(A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_BOUNDDATACOLUMNLIST));return B;},getColumnDefinitionGroup:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_COLUMNDEFS));return B;},getResultSetRequest:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_RESULTSETREQUEST));return B;},getFilter:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_FILTER));return B;},getChartProperties:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_CHART));return B;},getLabelText:function(C,A){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,this._TAG_DATA);B.documentElement.appendChild(A.getSoapRequest(B,this._TAG_LABELTEXT));return B;}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVFileBrowsing=actuate.Class.create();actuate.iv.data.IVFileBrowsing.prototype={_TAG_FILE_BROWSING:"FileBrowsing",_TAG_PATH:"Path",_TAG_DESCRIPTION:"FileDescription",_filePath:null,_fileDescription:null,initialize:function(A){this._filePath=A;},getFilePath:function(){return this._filePath;},setFilePath:function(A){this._filePath=A;},getFileDescription:function(){return this._fileDescription;},setFileDescription:function(A){this._fileDescription=A;},getSaveDesignRequest:function(A,B){return this.getSoapRequest();},getSaveDocumentRequest:function(A,B){return this.getSoapRequest();},getSoapRequest:function(F,G){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(B,this._TAG_FILE_BROWSING);var E=actuate.util.XmlDom.createElement(B,this._TAG_PATH);var A=B.createTextNode(this._filePath);E.appendChild(A);D.appendChild(E);if(this._fileDescription!=null){var C=actuate.util.XmlDom.createElement(B,this._TAG_DESCRIPTION);A=B.createTextNode(this._fileDescription);C.appendChild(A);D.appendChild(C);}B.documentElement.appendChild(D);return B;}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVFilterOperand=actuate.Class.create();actuate.iv.data.IVFilterOperand.prototype={_TAG_LITERAL:"Literal",_literal:null,initialize:function(){},getLiteral:function(){return this._literal;},setLiteral:function(A){this._literal=A;},getSoapRequest:function(C,D){var B=actuate.util.XmlDom.createElement(C,D);var A=actuate.util.XmlDom.createElement(C,this._TAG_LITERAL);A.appendChild(C.createTextNode(this._literal));B.appendChild(A);},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVFilter=actuate.Class.create();actuate.iv.data.IVFilter.prototype={FILTER_TYPE_SIMPLE:"Simple",FILTER_TYPE_ADVANCED:"Advanced",_TAG_LITERAL:"Literal",_TAG_FILTEROPERAND:"FilterOperand",_TAG_ANYOFLITERAL:"AnyOfLiteral",_TAG_COLUMNNAME:"ColumnName",_TAG_TYPE:"Type",_TAG_EXPRESSION:"Expression",_TAG_CLAUSE:"Clause",_TAG_FILTEROP:"FilterOp",_TAG_OPERAND:"Operand",_TAG_CONDITIONLINE:"ConditionLine",_TAG_CONDITIONLINELIST:"ConditionLineList",_filterType:null,_columnName:null,_operator:null,_valueList:null,_conditionLineList:null,initialize:function(){},getColumnName:function(){return this._columnName;},setColumnName:function(A){this._columnName=A;},getFilterType:function(){return this._filterType;},setFilterType:function(A){this._filterType=A;},getOperator:function(){return this._operator;},setOperator:function(A){this._operator=A;},getValueList:function(){return this._valueList;},setValueList:function(A){this._valueList=A;},getConditionLineList:function(){return this._conditionLineList;},setConditionLineList:function(A){this._conditionLineList=A;},getSoapRequest:function(B,C){var A=actuate.util.XmlDom.createElement(B,C);if(this._filterType!=this.FILTER_TYPE_ADVANCED){this._getSimpleFilter(B,A);}else{this._getAdvancedFilter(B,A);}return A;},_getSimpleFilter:function(I,C){var L=actuate.util.XmlDom.createElement(I,this._TAG_TYPE);L.appendChild(I.createTextNode(this.FILTER_TYPE_SIMPLE));C.appendChild(L);var N=actuate.util.XmlDom.createElement(I,this._TAG_CLAUSE);var A=this.getColumnName();N.appendChild(A.getSoapRequest(I,this._TAG_COLUMNNAME));var M=actuate.util.XmlDom.createElement(I,this._TAG_FILTEROP);var J=I.createTextNode(this.getOperator());M.appendChild(J);N.appendChild(M);if(this.getValueList()[0]!=null){var D="";if(this.getValueList()[0]){if(this._operator=="in"||this._operator=="not-in"){var E='"'+this._valueList[0]+'"';for(var H=1;H<this._valueList.length;H++){E+=', "'+this._valueList[H]+'"';}D=I.createTextNode(E);}else{D=I.createTextNode(this.getValueList()[0]);}}else{D=I.createTextNode("");}var G=actuate.util.XmlDom.createElement(I,this._TAG_OPERAND);G.appendChild(D);N.appendChild(G);}if(this._operator!="in"&&this._operator!="not-in"){if(this.getValueList()[1]!=null){var B="";if(this.getValueList()[1]){B=I.createTextNode(this.getValueList()[1]);}else{B=I.createTextNode("");}var F=actuate.util.XmlDom.createElement(I,this._TAG_OPERAND);F.appendChild(B);N.appendChild(F);}}var K=actuate.util.XmlDom.createElement(I,this._TAG_EXPRESSION);K.appendChild(N);C.appendChild(K);},_getAdvancedFilter:function(C,B){var A=actuate.util.XmlDom.createElement(C,this._TAG_TYPE);A.appendChild(C.createTextNode(this.FILTER_TYPE_ADVANCED));B.appendChild(A);if(this._conditionLineList!=null){B.appendChild(this._conditionLineList.getSoapRequest(C,this._TAG_CONDITIONLINELIST));}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVFilterList=actuate.Class.create();actuate.iv.data.IVFilterList.prototype={_TAG_FILTER:"Filter",_filterList:null,initialize:function(){this._filterList=new Array();},getFilterList:function(){return this._filterList;},setFilter:function(A){this._filterList.push(A);},clearFilterList:function(){this._filterList.length=0;},getSoapRequest:function(E,F){var B=actuate.util.XmlDom.createElement(E,F);var D=this._filterList;for(var A=0;A<D.length;A++){if(D[A]!=null){var C=D[A].getSoapRequest(E,this._TAG_FILTER);B.appendChild(C);}}return B;},breakDownData:function(B){var D=B.getElementsByTagName(this._TAG_FILTER);for(var A=0;A<D.length;A++){var C=new actuate.iv.data.IVFilter();if(D[A]!=null){C.breakDownData(D[A]);this._filterList.push(C);}}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVTableColumnDefinition=actuate.Class.create();actuate.iv.data.IVTableColumnDefinition.prototype={SORTDIR_ASC:"asc",SORTDIR_DESC:"desc",_TAG_BOUNDDATACOLUMN:"BoundDataColumn",_TAG_INDEX:"Index",_TAG_ISGROUPED:"IsGrouped",_TAG_IID:"Iid",_TAG_SORTDIR:"SortDir",_index:null,_iid:null,_header:null,_hidden:null,_dataType:null,_expr:null,_newIndex:null,_isGrouped:null,_pageBreak:null,_sortDir:null,_aggregate:null,_font:null,_format:null,_properties:null,_formatRuleSet:null,_boundDataColumn:null,_isCurrent:null,initialize:function(){},getIndex:function(){return this._index;},setIndex:function(A){this._index=A;},getHeader:function(){return this._header;},setHeader:function(A){this._header=A;},getIid:function(){return this._iid;},setIid:function(A){this._iid=A;},getHidden:function(){return this._hidden;},setHidden:function(A){this._hidden=A;},getDataType:function(){return this._dataType;},setDataType:function(A){this._dataType=A;},getExpr:function(){return this._expr;},setExpr:function(A){this._header=_expr;},getNewIndex:function(){return this._newIndex;},setNewIndex:function(A){this._newIndex=A;},getIsGrouped:function(){return this._isGrouped;},setIsGrouped:function(A){this._isGrouped=A;},getPageBreak:function(){return this._pageBreak;},setPageBreak:function(A){this._pageBreak=A;},getSortDir:function(){return this._sortDir;},setSortDir:function(A){this._sortDir=A;},getAggregate:function(){return this._aggregate;},setAggregate:function(A){this._aggregate=A;},getFont:function(){return this._font;},setFont:function(A){this._font=A;},getFormat:function(){return this._format;},setFormat:function(A){this._format=A;},getProperties:function(){return this._properties;},setProperties:function(A){this._properties=A;},getFormatRuleSet:function(){return this._formatRuleSet;},setFormatRuleSet:function(A){this._formatRuleSet=A;},getBoundDataColumn:function(){return this._boundDataColumn;},setBoundDataColumn:function(A){this._boundDataColumn=A;},getIsCurrent:function(){return this._isCurrent;},setIsCurrent:function(A){this._isCurrent=A;},getSoapRequest:function(C,E){var B=actuate.util.XmlDom.createElement(C,E);if(this._index!=null){var A=actuate.util.XmlDom.createElement(C,this._TAG_INDEX);var D=C.createTextNode(this._index);A.appendChild(D);B.appendChild(A);}if(this._iid!=null){A=actuate.util.XmlDom.createElement(C,this._TAG_IID);D=C.createTextNode(this._iid);A.appendChild(D);B.appendChild(A);}if(this._isGrouped){A=actuate.util.XmlDom.createElement(C,this._TAG_ISGROUPED);A.appendChild(C.createTextNode(this._isGrouped));B.appendChild(A);}if(this._sortDir){A=actuate.util.XmlDom.createElement(C,this._TAG_SORTDIR);A.appendChild(C.createTextNode(this._sortDir));B.appendChild(A);}if(this._boundDataColumn!=null){B.appendChild(this._boundDataColumn.getSoapRequest(C,this._TAG_BOUNDDATACOLUMN));}return B;},breakDownData:function(D){this.setHeader(D.getElementsByTagName(actuate.Constant.tag.HEADER)[0].firstChild.data);var B=actuate.iv.utility.ivUtility;this._dataType=B.getValueByTagName(D,"DataType");this._index=B.getValueByTagName(D,"Index");this._iid=B.getValueByTagName(D,"Iid");this._isGrouped=B.getValueByTagName(D,"IsGrouped")=="true";var A=D.getElementsByTagName(actuate.Constant.tag.BOUNDDATACOLUMN);var C=new actuate.iv.data.IVBoundDataColumn();C.breakDownData(A[0]);this.setBoundDataColumn(C);}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVChartType=actuate.Class.create();actuate.iv.data.IVChartType.prototype={_TAG_TYPE:"Type",_TAG_SUBTYPE:"SubType",_type:null,_subType:null,initialize:function(){},getType:function(){return this._type;},setType:function(A){this._type=A;},getSubType:function(){return this._subType;},setSubType:function(A){this._subType=A;},getSoapRequest:function(C,E){var B=actuate.util.XmlDom.createElement(C,E);if(this._type!=null){var A=actuate.util.XmlDom.createElement(C,this._TAG_TYPE);A.appendChild(C.createTextNode(this._type));B.appendChild(A);}if(this._subType!=null){var D=actuate.util.XmlDom.createElement(C,this._TAG_SUBTYPE);D.appendChild(C.createTextNode(this._subType));B.appendChild(D);}return B;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVChartLabels=actuate.Class.create();actuate.iv.data.IVChartLabels.prototype={_TAG_TITLE:"Title",_title:null,initialize:function(){},getTitle:function(){return this._title;},setTitle:function(A){this._title=A;},getSoapRequest:function(B,D){var A=actuate.util.XmlDom.createElement(B,D);if(this._title!=null){var C=actuate.util.XmlDom.createElement(B,this._TAG_TITLE);C.appendChild(B.createTextNode(this._title));A.appendChild(C);}return A;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVChartAppearance=actuate.Class.create();actuate.iv.data.IVChartAppearance.prototype={_TAG_DIMENTION:"Dimention",_dimention:null,_TAG_WIDTH:actuate.Constant.tag.ChartWidth,_width:null,_TAG_HEIGHT:actuate.Constant.tag.ChartHeight,_height:null,initialize:function(){},getDimention:function(){return this._dimention;},setDimention:function(A){this._dimention=A;},getWidth:function(){return this._width;},setWidth:function(A){this._width=A;},getHeight:function(){return this._height;},setHeight:function(A){this._height=A;},getSoapRequest:function(E,F){var B=actuate.util.XmlDom.createElement(E,F);if(this._dimention!=null){var D=actuate.util.XmlDom.createElement(E,this._TAG_DIMENTION);D.appendChild(E.createTextNode(this._dimention));B.appendChild(D);}if(this._width!=null){var C=actuate.util.XmlDom.createElement(E,this._TAG_WIDTH);C.appendChild(E.createTextNode(this._width));B.appendChild(C);}if(this._height!=null){var A=actuate.util.XmlDom.createElement(E,this._TAG_HEIGHT);A.appendChild(E.createTextNode(this._height));B.appendChild(A);}return B;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVChartProperties=actuate.Class.create();actuate.iv.data.IVChartProperties.prototype={_TAG_CHARTTYPE:"ChartType",_TAG_CHARTLABELS:"Labels",_TAG_CHARTAPPEARANCE:"Apperance",_chartType:null,_chartLabels:null,_chartAppearance:null,initialize:function(){},getChartType:function(){return this._chartType;},setChartType:function(A){this._chartType=A;},getChartLabels:function(){return this._chartLabels;},setChartLabels:function(A){this._chartLabels=A;},getChartAppearance:function(){return this._chartAppearance;},setChartAppearance:function(A){this._chartAppearance=A;},getSoapRequest:function(B,C){var A=actuate.util.XmlDom.createElement(B,C);if(this._chartType!=null){A.appendChild(this._chartType.getSoapRequest(B,this._TAG_CHARTTYPE));}if(this._chartLabels!=null){A.appendChild(this._chartLabels.getSoapRequest(B,this._TAG_CHARTLABELS));}if(this._chartAppearance!=null){A.appendChild(this._chartAppearance.getSoapRequest(B,this._TAG_CHARTAPPEARANCE));}return A;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVParameterValue=actuate.Class.create();actuate.iv.data.IVParameterValue.prototype={_TAG_NAME:"Name",_TAG_VALUE:"Value",_TAG_VALUEISNULL:"ValueIsNull",_TAG_DISPLAYNAME:"DisplayName",_name:null,_value:null,_valueIsNull:null,_displayName:null,initialize:function(){},getName:function(){return this._name;},setName:function(A){this._name=A;},getValue:function(){return this._value;},setValue:function(A){this._value=A;},getValueIsNull:function(){return this._valueIsNull;},setValueIsNull:function(A){this._valueIsNull=A;},getDisplayName:function(){return this._displayName;},setDisplayName:function(A){this._displayName=A;},getSoapRequest:function(G,H){var E=actuate.util.XmlDom.createElement(G,H);var D=actuate.util.XmlDom.createElement(G,this._TAG_NAME);D.appendChild(G.createTextNode(this._name));E.appendChild(D);if(this._value!=null){var F=actuate.util.XmlDom.createElement(G,this._TAG_VALUE);F.appendChild(G.createTextNode(this._value));E.appendChild(F);}if(this._valueIsNull){var C="true";var B=actuate.util.XmlDom.createElement(G,this._TAG_VALUEISNULL);B.appendChild(G.createTextNode(C));E.appendChild(B);}if(this._displayName){var A=actuate.util.XmlDom.createElement(G,this._TAG_DISPLAYNAME);A.appendChild(G.createTextNode(this._displayName));E.appendChild(A);}return E;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVParameterValues=actuate.Class.create();actuate.iv.data.IVParameterValues.prototype={_TAG_PARAMETERVALUE:"ParameterValue",_parameterValues:null,initialize:function(){this._parameterValues=[];},getParameterValues:function(){return this._parameterValues;},addParameterValue:function(A){this._parameterValues.push(A);},getSoapRequest:function(C,D){var B=actuate.util.XmlDom.createElement(C,D);if(this._parameterValues!=null){for(var A=0;A<this._parameterValues.length;A++){B.appendChild(this._parameterValues[A].getSoapRequest(C,this._TAG_PARAMETERVALUE));}}return B;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVLabelText=actuate.Class.create();actuate.iv.data.IVLabelText.prototype={_text:null,initialize:function(){},getText:function(){return this._text;},setText:function(A){this._text=A;},getSoapRequest:function(B,D){var A=actuate.util.XmlDom.createElement(B,D);B.documentElement.appendChild(A);var C=B.createTextNode(this._text);A.appendChild(C);return A;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.utility");actuate.iv.utility.IVUtility=function(){};actuate.iv.utility.IVUtility.prototype={CM_PER_INCH:2.54,POINTS_PER_INCH:72,POINTS_PER_CM:28.3464567,POINTS_PER_PICA:12,DPI:actuate.util.Utility.getDPI(),intersectBoolMap:function(E,D){if(!E||!D){return{};}var B={};for(var C in E){var A=E[C];if(A&&D[C]){B[C]=A;}}return B;},isLetter:function(A){return this._isBaseChar(A)||this._isIdeographic(A);},_isBaseChar:function(A){return("\u0041"<=A&&A<="\u005a")||("\u0061"<=A&&A<="\u007a")||("\u00c0"<=A&&A<="\u00d6")||("\u00d8"<=A&&A<="\u00f6")||("\u00f8"<=A&&A<="\u00ff")||("\u0100"<=A&&A<="\u0131")||("\u0134"<=A&&A<="\u013e")||("\u0141"<=A&&A<="\u0148")||("\u014a"<=A&&A<="\u017e")||("\u0180"<=A&&A<="\u01c3")||("\u01cd"<=A&&A<="\u01f0")||("\u01f4"<=A&&A<="\u01f5")||("\u01fa"<=A&&A<="\u0217")||("\u0250"<=A&&A<="\u02a8")||("\u02bb"<=A&&A<="\u02c1")||(A=="\u0386")||("\u0388"<=A&&A<="\u038a")||(A=="\u038c")||("\u038e"<=A&&A<="\u03a1")||("\u03a3"<=A&&A<="\u03ce")||("\u03d0"<=A&&A<="\u03d6")||(A=="\u03da")||(A=="\u03dc")||(A=="\u03de")||(A=="\u03e0")||("\u03e2"<=A&&A<="\u03f3")||("\u0401"<=A&&A<="\u040c")||("\u040e"<=A&&A<="\u044f")||("\u0451"<=A&&A<="\u045c")||("\u045e"<=A&&A<="\u0481")||("\u0490"<=A&&A<="\u04c4")||("\u04c7"<=A&&A<="\u04c8")||("\u04cb"<=A&&A<="\u04cc")||("\u04d0"<=A&&A<="\u04eb")||("\u04ee"<=A&&A<="\u04f5")||("\u04f8"<=A&&A<="\u04f9")||("\u0531"<=A&&A<="\u0556")||(A=="\u0559")||("\u0561"<=A&&A<="\u0586")||("\u05d0"<=A&&A<="\u05ea")||("\u05f0"<=A&&A<="\u05f2")||("\u0621"<=A&&A<="\u063a")||("\u0641"<=A&&A<="\u064a")||("\u0671"<=A&&A<="\u06b7")||("\u06ba"<=A&&A<="\u06be")||("\u06c0"<=A&&A<="\u06ce")||("\u06d0"<=A&&A<="\u06d3")||(A=="\u06d5")||("\u06e5"<=A&&A<="\u06e6")||("\u0905"<=A&&A<="\u0939")||(A=="\u093d")||("\u0958"<=A&&A<="\u0961")||("\u0985"<=A&&A<="\u098c")||("\u098f"<=A&&A<="\u0990")||("\u0993"<=A&&A<="\u09a8")||("\u09aa"<=A&&A<="\u09b0")||(A=="\u09b2")||("\u09b6"<=A&&A<="\u09b9")||("\u09dc"<=A&&A<="\u09dd")||("\u09df"<=A&&A<="\u09e1")||("\u09f0"<=A&&A<="\u09f1")||("\u0a05"<=A&&A<="\u0a0a")||("\u0a0f"<=A&&A<="\u0a10")||("\u0a13"<=A&&A<="\u0a28")||("\u0a2a"<=A&&A<="\u0a30")||("\u0a32"<=A&&A<="\u0a33")||("\u0a35"<=A&&A<="\u0a36")||("\u0a38"<=A&&A<="\u0a39")||("\u0a59"<=A&&A<="\u0a5c")||(A=="\u0a5e")||("\u0a72"<=A&&A<="\u0a74")||("\u0a85"<=A&&A<="\u0a8b")||(A=="\u0a8d")||("\u0a8f"<=A&&A<="\u0a91")||("\u0a93"<=A&&A<="\u0aa8")||("\u0aaa"<=A&&A<="\u0ab0")||("\u0ab2"<=A&&A<="\u0ab3")||("\u0ab5"<=A&&A<="\u0ab9")||(A=="\u0abd")||(A=="\u0ae0")||("\u0b05"<=A&&A<="\u0b0c")||("\u0b0f"<=A&&A<="\u0b10")||("\u0b13"<=A&&A<="\u0b28")||("\u0b2a"<=A&&A<="\u0b30")||("\u0b32"<=A&&A<="\u0b33")||("\u0b36"<=A&&A<="\u0b39")||(A=="\u0b3d")||("\u0b5c"<=A&&A<="\u0b5d")||("\u0b5f"<=A&&A<="\u0b61")||("\u0b85"<=A&&A<="\u0b8a")||("\u0b8e"<=A&&A<="\u0b90")||("\u0b92"<=A&&A<="\u0b95")||("\u0b99"<=A&&A<="\u0b9a")||(A=="\u0b9c")||("\u0b9e"<=A&&A<="\u0b9f")||("\u0ba3"<=A&&A<="\u0ba4")||("\u0ba8"<=A&&A<="\u0baa")||("\u0bae"<=A&&A<="\u0bb5")||("\u0bb7"<=A&&A<="\u0bb9")||("\u0c05"<=A&&A<="\u0c0c")||("\u0c0e"<=A&&A<="\u0c10")||("\u0c12"<=A&&A<="\u0c28")||("\u0c2a"<=A&&A<="\u0c33")||("\u0c35"<=A&&A<="\u0c39")||("\u0c60"<=A&&A<="\u0c61")||("\u0c85"<=A&&A<="\u0c8c")||("\u0c8e"<=A&&A<="\u0c90")||("\u0c92"<=A&&A<="\u0ca8")||("\u0caa"<=A&&A<="\u0cb3")||("\u0cb5"<=A&&A<="\u0cb9")||(A=="\u0cde")||("\u0ce0"<=A&&A<="\u0ce1")||("\u0d05"<=A&&A<="\u0d0c")||("\u0d0e"<=A&&A<="\u0d10")||("\u0d12"<=A&&A<="\u0d28")||("\u0d2a"<=A&&A<="\u0d39")||("\u0d60"<=A&&A<="\u0d61")||("\u0e01"<=A&&A<="\u0e2e")||(A=="\u0e30")||("\u0e32"<=A&&A<="\u0e33")||("\u0e40"<=A&&A<="\u0e45")||("\u0e81"<=A&&A<="\u0e82")||(A=="\u0e84")||("\u0e87"<=A&&A<="\u0e88")||(A=="\u0e8a")||(A=="\u0e8d")||("\u0e94"<=A&&A<="\u0e97")||("\u0e99"<=A&&A<="\u0e9f")||("\u0ea1"<=A&&A<="\u0ea3")||(A=="\u0ea5")||(A=="\u0ea7")||("\u0eaa"<=A&&A<="\u0eab")||("\u0ead"<=A&&A<="\u0eae")||(A=="\u0eb0")||("\u0eb2"<=A&&A<="\u0eb3")||(A=="\u0ebd")||("\u0ec0"<=A&&A<="\u0ec4")||("\u0f40"<=A&&A<="\u0f47")||("\u0f49"<=A&&A<="\u0f69")||("\u10a0"<=A&&A<="\u10c5")||("\u10d0"<=A&&A<="\u10f6")||(A=="\u1100")||("\u1102"<=A&&A<="\u1103")||("\u1105"<=A&&A<="\u1107")||(A=="\u1109")||("\u110b"<=A&&A<="\u110c")||("\u110e"<=A&&A<="\u1112")||(A=="\u113c")||(A=="\u113e")||(A=="\u1140")||(A=="\u114c")||(A=="\u114e")||(A=="\u1150")||("\u1154"<=A&&A<="\u1155")||(A=="\u1159")||("\u115f"<=A&&A<="\u1161")||(A=="\u1163")||(A=="\u1165")||(A=="\u1167")||(A=="\u1169")||("\u116d"<=A&&A<="\u116e")||("\u1172"<=A&&A<="\u1173")||(A=="\u1175")||(A=="\u119e")||(A=="\u11a8")||(A=="\u11ab")||("\u11ae"<=A&&A<="\u11af")||("\u11b7"<=A&&A<="\u11b8")||(A=="\u11ba")||("\u11bc"<=A&&A<="\u11c2")||(A=="\u11eb")||(A=="\u11f0")||(A=="\u11f9")||("\u1e00"<=A&&A<="\u1e9b")||("\u1ea0"<=A&&A<="\u1ef9")||("\u1f00"<=A&&A<="\u1f15")||("\u1f18"<=A&&A<="\u1f1d")||("\u1f20"<=A&&A<="\u1f45")||("\u1f48"<=A&&A<="\u1f4d")||("\u1f50"<=A&&A<="\u1f57")||(A=="\u1f59")||(A=="\u1f5b")||(A=="\u1f5d")||("\u1f5f"<=A&&A<="\u1f7d")||("\u1f80"<=A&&A<="\u1fb4")||("\u1fb6"<=A&&A<="\u1fbc")||(A=="\u1fbe")||("\u1fc2"<=A&&A<="\u1fc4")||("\u1fc6"<=A&&A<="\u1fcc")||("\u1fd0"<=A&&A<="\u1fd3")||("\u1fd6"<=A&&A<="\u1fdb")||("\u1fe0"<=A&&A<="\u1fec")||("\u1ff2"<=A&&A<="\u1ff4")||("\u1ff6"<=A&&A<="\u1ffc")||(A=="\u2126")||("\u212a"<=A&&A<="\u212b")||(A=="\u212e")||("\u2180"<=A&&A<="\u2182")||("\u3041"<=A&&A<="\u3094")||("\u30a1"<=A&&A<="\u30fa")||("\u3105"<=A&&A<="\u312c")||("\uac00"<=A&&A<="\ud7a3")||("\uff61"<=A&&A<="\uff9f")||("\u0e00"<=A&&A<="\u0e7f")||("\u30a1"<=A&&A<="\u30fe");},_isIdeographic:function(A){return(("\u4e00"<=A&&A<="\u9fa5")||(A=="\u3007")||("\u3021"<=A&&A<="\u3029"));},isDigit:function(A){return(("\u0030"<=A&&A<="\u0039")||("\u0660"<=A&&A<="\u0669")||("\u06f0"<=A&&A<="\u06f9")||("\u0966"<=A&&A<="\u096f")||("\u09e6"<=A&&A<="\u09ef")||("\u0a66"<=A&&A<="\u0a6f")||("\u0ae6"<=A&&A<="\u0aef")||("\u0b66"<=A&&A<="\u0b6f")||("\u0be7"<=A&&A<="\u0bef")||("\u0c66"<=A&&A<="\u0c6f")||("\u0ce6"<=A&&A<="\u0cef")||("\u0d66"<=A&&A<="\u0d6f")||("\u0e50"<=A&&A<="\u0e59")||("\u0ed0"<=A&&A<="\u0ed9")||("\u0f20"<=A&&A<="\u0f29"));},getValueByTagName:function(C,B){if(!C.childNodes){return null;}var D=C.getElementsByTagName(B);var A=(D&&D.length>0&&D[0].firstChild)?D[0].firstChild.data:null;return A;},getBooleanValueByTagName:function(D,A){if(!D.childNodes){return null;}var C=D.getElementsByTagName(A);var B=(C&&C.length>0&&C[0].firstChild)?C[0].firstChild.data:"false";return("true"==B);},__createElementWithName:function(B,A){return actuate.Method.tryThese(function(){return document.createElement("<"+B+' name="'+A+'" />');},function(){var C=document.createElement(B);C.setAttribute("name",A);return C;});},__removeSelection:function(){if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(B){}}else{if(window.getSelection){var A=window.getSelection();if(A){A.removeAllRanges();}}}},removeChildren:function(A){while(A.childNodes.length>0){if(A.firstChild.childNodes.length>0){this.removeChildren(A.firstChild);}A.removeChild(A.firstChild);}},haveTagName:function(B,A){return((B.getElementsByTagName(A).length==0)?false:true);},getDataReponseLeaf:function(A){if(A&&A[0]&&A[0].firstChild){return(A[0].firstChild.data);}return null;},setCheckBoxChecked:function(B,A){B.defaultChecked=A;B.checked=A;return A;},getCursorPosTextarea:function(A){if(A.selectionStart!=undefined){return(A.selectionEnd);}else{A.focus();return(document.selection.createRange());}},createDataDom:function(B){var C=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);if(actuate.util.Utility.isSafari||actuate.util.Utility.isChrome){var A=(B.nodeType==Node.DOCUMENT_NODE)?B:B.ownerDocument;this.copyNodes(C.documentElement,A);}else{C.documentElement.appendChild(B);}return C;},copyNodes:function(E,D){if(!E||!D){return ;}var B=(E.nodeType==Node.DOCUMENT_NODE)?E:E.ownerDocument;var A=D.childNodes;if(B.importNode){for(var C=0;C<A.length;C++){E.appendChild(B.importNode(A[C],true));}}else{for(var C=0;C<A.length;C++){E.appendChild(A[C].cloneNode(true));}}},appendColumnDef:function(A,E){var C=this._appendColumnDef(A);for(var B=0;B<E.length;B++){if(A.importNode){var D=A.importNode(E[B],true);C.appendChild(D);}else{C.appendChild(E[B]);}}},getNodeIntData:function(A){if(A.firstChild&&A.firstChild.data){return parseInt(A.firstChild.data);}return 0;},getNodeFloatData:function(A){if(A.firstChild&&A.firstChild.data){return parseFloat(A.firstChild.data);}return 0;},getNodeBooleanData:function(A){var B=false;if(A.firstChild&&A.firstChild.data){B=(A.firstChild.data=="true"?true:false);}return B;},_appendColumnDef:function(A){if(!A.firstChild||!A.firstChild.firstChild||A.firstChild.firstChild.nodeName!=actuate.Constant.tag.COLUMNDEFS){throw new WRError("WRSchemaUtil","Incorrect node type or structure");}var B=actuate.util.XmlDom.createElement(A,actuate.Constant.tag.ColumnDef);A.firstChild.firstChild.appendChild(B);return B;},_makeCookiePrefix:function(B){var A="xmlhttp_";var C=B.match(/^(([^:]*:\/\/[^\/]*)\/([^\/]*\/))/);if(C&&C[1]){C=encodeURIComponent(C[1]);return A+C.length+"_"+C+"_";}return A;},getJSessionId:function(A){var D=null;var F=document.cookie;if(F){var H=this._makeCookiePrefix(A);var E=/^JSESSIONID=(.+)$/;var F=F.split("; ");for(var C=0;C<F.length;C++){var B=F[C];if(B.substr(0,H.length)==H){var G=B.substr(H.length);if(E.test(G)){D=G.match(E)[1];break;}}}}return D;},getCookieValue:function(E){var D=document.cookie;if(D){var C=new RegExp("^"+E+"=(.+)$");var D=D.split("; ");for(var B=0;B<D.length;B++){var A=D[B];if(C.test(A)){return A.match(C)[1];}}}return null;},clearCookieValue:function(A){document.cookie=A+"=;expires="+(new Date()).toGMTString()+";";},needPNGFix:function(){if(!actuate.util.browser.__isIE()||navigator.platform!="Win32"){return false;}var C=navigator.userAgent.toLowerCase();var B=C.indexOf("msie")+1;var A=C.charAt(B+4);var D=C.charAt(B+6);if(A<5||(A==5&&D<5)){return false;}return true;},fixDropShadow:function(C,H,D){var F=document.getElementById(C+"_SHADOW");var I=document.getElementById(C+"_SHADOW_DIV");if(F!=null){var J=H.offsetHeight;var B=H.offsetWidth;var G=(G>B)?B:J;G=G/10;I.style.left=G+"px";I.style.top=G+"px";var E=D.getBaseUrl();if(I!=null&&this.needPNGFix()){I.style.height=J+"px";I.style.width=B+"px";var A="iv/images/bgimages/"+this.getImageName(H);if(E){A=E+A;}I.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+A+"', sizingMethod='scale')";F.style.display="none";}F.style.height=J+"px";F.style.width=B+"px";}},getImageName:function(B){var A=B.offsetHeight;var C=B.offsetWidth;if(A/C>2){return"Container_shade_whole_tall.png";}else{if(C/A>2){return"Container_shade_whole_wide.png";}else{return"Container_shade_whole.png";}}},getElementByClassName:function(B,D){if(B){var E=B.getElementsByTagName("div");for(var C=0;C<E.length;C++){var A=E[C].getAttributeNode("class");if(A&&A.value==D){return E[C];}}}},getElementById:function(A,D){if(A){var C=A.getElementsByTagName("div");for(var B=0;B<C.length;B++){if(C[B]&&C[B].id==D){return C[B];}}}},addWordWrap:function(A){A.style.wordWrap="break-word";A.style.overflow="auto";if(A.addEventListener){A.style.display="block";A.style.position="relative";A.style.overflow="hidden";A.addEventListener("overflow",function(){var E=new RegExp("<&#8203;\\/*[&#8203;_\\-:;\\s=\"'\\w]+>","g");var B=A.innerHTML;var D=B.split("");var C=D.join("&#8203;");C=C.replace(E,function(F){return F.replace(/&#8203;/g,"");});A.innerHTML=C;},false);}},isValidFileName:function(B){var C=B.match(/\S/);if(B.length==0||C==null){return false;}var A=B.match(/[\\\/\:\*?"<>\|;]/);if(A){return false;}return true;},isValidPathName:function(B){var C=B.match(/\S/);if(B.length==0||C==null){return false;}var A=B.match(/[\*?"<>\|]/);if(A){return false;}return true;},convertInchTo:function(B,C){var A=0;if((!actuate.Constant.DesignChoice.UNITS_PT)&&(!actuate.Constant.DesignChoice.UNITS_PC)&&(!actuate.Constant.DesignChoice.UNITS_CM)&&(!actuate.Constant.DesignChoice.UNITS_MM)&&(!actuate.Constant.DesignChoice.UNITS_IN)){return A;}if(actuate.Constant.DesignChoice.UNITS_IN==C){return B;}if(actuate.Constant.DesignChoice.UNITS_CM==C){A=B*this.CM_PER_INCH;}else{if(actuate.Constant.DesignChoice.UNITS_MM==C){A=B*this.CM_PER_INCH*10;}else{if(actuate.Constant.DesignChoice.UNITS_PT==C){A=B*this.POINTS_PER_INCH;}else{if(actuate.Constant.DesignChoice.UNITS_PC==C){A=B*this.POINTS_PER_INCH/this.POINTS_PER_PICA;}}}}return A;},convertToPixs:function(C,B){var A=0;switch(B){case actuate.Constant.DesignChoice.UNITS_IN:A=C*this.DPI;break;case actuate.Constant.DesignChoice.UNITS_PT:A=C*this.DPI/this.POINTS_PER_INCH;break;case actuate.Constant.DesignChoice.UNITS_CM:A=C*this.DPI/this.CM_PER_INCH;break;case actuate.Constant.DesignChoice.UNITS_MM:A=C*this.DPI/(this.CM_PER_INCH*10);break;case actuate.Constant.DesignChoice.UNITS_PC:A=C*this.POINTS_PER_PICA*this.DPI/this.POINTS_PER_INCH;break;default:A=C;break;}return A;},checkPageRange:function(B,C){var A=null;if(B.indexOf(",")>-1){A=B.split(",");}else{A=new Array(1);A[0]=B;}for(var D=0;D<A.length;D++){if(A[D]!=null){A[D]=A[D].replace(/^\s*|\s*$/g,"");}if(!this._validatePageNumbers(A[D],C)){return false;}}return true;},_validatePageNumbers:function(B,C){var A=null;var E=false;if(B.indexOf("-")>-1){A=B.split("-");if(A.length>2){return false;}E=true;}else{A=new Array(1);A[0]=B;}for(var D=0;D<A.length;D++){if(A[D]!=null){A[D]=A[D].replace(/^\s*|\s*$/g,"");}if(!isFinite(A[D]*1)||Math.floor(A[D])!=A[D]){return false;}else{if(A[D]*1<1*1||A[D]*1>C*1){return false;}}}if(E){if(A[0]*1>A[1]*1){return false;}}return true;}};actuate.iv.utility.ivUtility=new actuate.iv.utility.IVUtility();actuate.util.Package.define("actuate.iv.ui.controls");actuate.iv.ui.controls.IVTooltip=actuate.Class.create();actuate.iv.ui.controls.IVTooltip.prototype={instance:null,initialize:function(A){this.instance=document.createElement("div");if(A){A.appendChild(this.instance);}else{document.body.appendChild(this.instance);}this.instance.style.left="0px";this.instance.style.top="0px";this.instance.style.display="none";this.instance.style.zIndex=3000;this.instance.style.position="absolute";this.instance.style.border="1px solid black";this.instance.style.fontSize="11px";this.instance.style.fontFamily="tahoma, verdana, arial, sans-serif";this.instance.style.fontStyle="normal";this.instance.style.fontWeight="normal";this.instance.style.backgroundColor="#FFFFCC";this.instance.style.color="black";this.instance.style.padding="2px";},show:function(C,B,A){this.instance.style.left=C+"px";this.instance.style.top=B+"px";this.instance.innerHTML=A;this.instance.style.display="block";},hide:function(){this.instance.style.left="0px";this.instance.style.top="0px";this.instance.innerHTML="";this.instance.style.display="none";}};actuate.util.Package.define("actuate.iv.ui.controls");actuate.iv.ui.controls.IVTimer=actuate.Class.create();actuate.iv.ui.controls.IVTimer.prototype={_viewer:null,_timer:null,_timeout:0,_callback:null,initialize:function(A){this._viewer=A;this._timer=null;},setTimeout:function(A){this._timeout=A;},resetTimer:function(){if(this._timeout!=0){clearInterval(this._timer);this._timer=setInterval(this._callback,this._timeout);}},clearTimer:function(){clearInterval(this._timer);},setCallback:function(A){this._callback=A;},getCallback:function(){return this._callback;}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVWindow=actuate.Class.create();actuate.iv.ui.app.IVWindow.prototype={_viewer:null,initialize:function(A){this._viewer=A;this._installEventHandlers();},_installEventHandlers:function(){actuate.util.Event.observe(document,"keyup",actuate.Method.bindAsEventListener(this._neh_keyup,this),false);actuate.util.Event.observe(document,"keydown",actuate.Method.bindAsEventListener(this._neh_keydown,this),false);actuate.util.Event.observe(this._viewer.container,"contextmenu",actuate.Method.bindAsEventListener(this._neh_contextmenu,this),false);actuate.util.Event.observe(this._viewer.container,"click",actuate.Method.bindAsEventListener(this._neh_toolbarmenu_click,this),false);if(this._viewer.standalone){actuate.util.Event.observe(window,"resize",actuate.Method.bindAsEventListener(this._neh_resize,this),false);}},_isCheckboxOrRadio:function(A){var B=actuate.util.Event.element(A);if(B){if(B.type=="checkbox"){return true;}if(B.type=="radio"){return true;}}},_neh_click:function(A){actuate.util.Event.stop(A);},_neh_resize:function(C){var A=this._viewer.container;var E=actuate.util.Element.cumulativeOffset(A);var D=document.documentElement.clientWidth;var B=document.documentElement.clientHeight;this._viewer.clientWidth=D;this._viewer.clientHeight=B;this._viewer.width=D-E[0];this._viewer.height=B-E[1];A.style.width=this._viewer.width+"px";A.style.height=this._viewer.height+"px";actuate.util.Event.stop(C);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);},_neh_keydown:function(A){var C=actuate.util.Event.element(A);if(A.keyCode==8&&C.tagName.toUpperCase()!="INPUT"&&C.tagName.toUpperCase()!="TEXTAREA"){return false;}var B=this._viewer.apiInstance.peekActiveStack();if(B){if(B.__keydown){B.__keydown(A);}return ;}else{this._viewer.__keydown(A);}},_neh_keyup:function(B){var D=actuate.util.Event.element(B);var A=this._viewer.container;var C=this._viewer.apiInstance.peekActiveStack();if(C){if(C.__keyup){C.__keyup(B);}return ;}else{this._viewer.__keyup(B);}if(!this._viewer.interactive||this._viewer.progressiveViewing){return ;}if(B.keyCode==46){if(D.tagName.toUpperCase()!="TEXTAREA"&&D.tagName.toUpperCase()!="INPUT"){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DELETE_COLUMN);}}else{if(B.ctrlKey&&B.keyCode==89){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_REDO);}else{if(B.ctrlKey&&B.keyCode==90){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_UNDO);}}}},_neh_contextmenu:function(C){if(this._viewer.interactive){if(this._viewer.assertNotTimedOut()){var A=actuate.iv.ui.view.contentpanel.IVContentPanel.prototype._getActiveElement.call(this,actuate.util.Event.element(C));if(A&&A.target){this._viewer._contextMenu.showMenu(this._viewer,{left:actuate.util.Event.pointerX(C),top:actuate.util.Event.pointerY(C)});}}actuate.util.Event.stop(C);}if(this._viewer.featureMap&&this._viewer.featureMap.ContextMenu!=undefined&&!this._viewer.featureMap.ContextMenu){return ;}if(this._viewer.navbar&&this._viewer.toolbar&&!this._viewer._contextMenu._rootMenu._visible){if(!this._viewer.navbar.visible&&!this._viewer.standalone&&!this._viewer.toolbar._visible){var B=143;var F=176;var E=(C.layerX||C.x||actuate.util.Event.pointerX(C));if(this._viewer.toolbar._getWidth()>E&&((this._viewer.toolbar._getWidth()-E)<B)){E=this._viewer.toolbar._getWidth()-B;}var D=(C.layerY||C.y||actuate.util.Event.pointerY(C));if(this._viewer.toolbar._getHeight()>D&&((this._viewer.toolbar._getHeight()-D)<F)){D=this._viewer.toolbar._getHeight()-F;if(D<0){D=0;}}this._viewer.toolbar._instance.style.width=this._viewer.toolbar._getWidth()+"px";this._viewer.toolbar._instance.style.height=this._viewer.toolbar._getHeight()+"px";this._viewer.toolbar._instance.style.left=E+"px";this._viewer.toolbar._instance.style.top=D+"px";this._viewer.toolbar._enableDisableOperations();this._viewer.toolbar._instance.style.display="";this._viewer.toolbar._visible=true;if(this._viewer.toolbar._shadow&&this._viewer.toolbar._toolbarDiv){this._viewer.toolbar._shadow.show(this._viewer.toolbar._toolbarDiv);}this._viewer.toolbar._setTimer(10000);}}actuate.util.Event.stop(C);},_neh_toolbarmenu_click:function(A){if(this._isCheckboxOrRadio(A)){return ;}if(this._viewer.contentPanel._isHyperlink(A)){return ;}actuate.util.Event.stop(A);if(this._viewer.toolbar&&this._viewer.toolbar.close){this._viewer.toolbar.close();}}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVFloatPanel=actuate.Class.create();actuate.iv.ui.app.IVFloatPanel.prototype={_viewer:null,instance:null,reportContent:null,_isAutoLayout:true,_masterPageWidth:-1,_masterPageHeight:-1,_deltaWidth:0,_deltaHeight:0,_contentPanel:null,contentWidth:0,contentHeight:0,_informationMask:null,_topInformationMask:true,scrollReference:null,enclosingDiv:null,_dndX:null,_dndY:null,initialize:function(A){this._viewer=A._viewer;this._contentPanel=A;this.instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"floatPanel");this.instance.style.position="absolute";this.instance.style.width="100%";this.instance.style.margin="0px";this.instance.style.padding="0px";this.instance.style.overflow="visible";this._mousedown_closure=actuate.Method.bindAsEventListener(this._neh_mousedown,this);this._mouseup_closure=actuate.Method.bindAsEventListener(this._neh_mouseup,this);this._drag_closure=actuate.Method.bindAsEventListener(this._neh_drag,this);this._click_informationMask=actuate.Method.bindAsEventListener(this._neh_clickInformationMask,this),this.instance.style.zIndex=actuate.iv.utility.ivZIndex.FLOATING_PANEL;this._panelOffset=null;this.scrollReference=this._contentPanel.instance;},setActivePage:function(A){},addContent:function(D){for(var B=0,A=D.length;B<A;B++){var C=null;if(actuate.util.browser.__isIE()){C='<span style="display: none">&nbsp;</span>'+D[B].contentData;C=C.replace(/<script(.*)defer([^\s|^>]*)([^>]*)>/gi,"<script$1$3>");}else{C=D[B].contentData;}if(!D[B].replaceDiv){this._viewer.apiInstance.removeReportEventHandlers(actuate.viewer.EventConstants.ON_CONTENT_CHANGED);this.enclosingDiv=document.createElement("DIV");this._viewer._document._setContentMargin(this.enclosingDiv);this.enclosingDiv.innerHTML=C;this._viewer._document._processGroupButtons(this.enclosingDiv);this._addContent(this.enclosingDiv,D[B].pageNo);this._contentPanel.render();this._viewer._document._cb_installEventHandlers(D[B].inits);if(D[B].bookmark){this._viewer.apiInstance._bookmark=D[B].bookmark;}}}},_addContent:function(B,A){while(this.instance.childNodes.length>0){this.instance.removeChild(this.instance.firstChild);}this.instance.appendChild(B);},_getScrollEnabled:function(B){var A="NO";var C=B.getAttributeNode("SCROLLENABLED");if(C){A=C.value;}return A;},updateUIOptions:function(){var B=this._viewer.featureMap;var C=this._getScrollEnabled(this.instance)=="YES";var A=(!B||B["Scrolling"]==undefined||B["Scrolling"])&&C;this.enableScroll(A);},enableScroll:function(A){this._drag_closure=A?actuate.Method.bindAsEventListener(this._neh_drag,this):actuate.Method.bindAsEventListener(this._neh_drag_disabled,this);},bind:function(D){var C=D.getElementsByTagName("LayoutType")[0];this._isAutoLayout=("fixed_layout"!=C.firstChild.data);var A=D.getElementsByTagName("Width");if(A&&A.length>0&&A[0].firstChild!=null){this._masterPageWidth=A[0].firstChild.data;}var B=D.getElementsByTagName("Height");if(B&&B.length>0&&B[0].firstChild!=null){this._masterPageHeight=B[0].firstChild.data;}},setDeltaWidth:function(A){if(this._isAutoLayout){this._deltaWidth+=A;}},setDeltaHeight:function(A){if(this._isAutoLayout){this._deltaHeight+=A;}},markReportContent:function(){for(var A=0;A<this.instance.childNodes.length;A++){if(this.instance.childNodes[A].tagName=="DIV"){this.reportContent=this.instance.childNodes[A];this.contentWidth=this.getContentWidth();this.contentHeight=this.getContentHeight();this._createInformationMask();return this.reportContent;}}return null;},_createInformationMask:function(){if(this._viewer.information){this._informationMask=document.createElement("DIV");this._informationMask.style.position="absolute";this._informationMask.style.overflow="hidden";this._informationMask.style.margin="0px";this._informationMask.style.padding="0px";this._informationMask.style.top="0px";this._informationMask.style.left="0px";this._informationMask.style.backgroundColor="white";this._informationMask.style.fontStyle="italic";this._informationMask.style.width=this.contentWidth+"px";this._informationMask.style.color="#808080";this.instance.appendChild(this._informationMask);actuate.util.Event.observe(this._informationMask,"click",this._click_informationMask,false);this._informationMask.innerHTML="<center>"+this._viewer.information+"<BR></center>";this._informationMask.style.fontSize="14pt";this._informationMask.style.fontFamily="sans-serif";this._informationMask.style.height="17pt";}},_refreshInformationMask:function(){if(this._informationMask){this._informationMask.style.width=this.instance.style.width;this._informationMask.innerHTML="<center>"+this._viewer.information+"<BR></center>";}},_neh_clickInformationMask:function(){if(this._topInformationMask==false){this._topInformationMask=true;this._informationMask.style.top="0px";}else{this._topInformationMask=false;var A=parseInt(this.getContentHeight())-20;this._informationMask.style.top=A+"px";}},scrollToBookmark:function(A){var B=A&&document.getElementById(A);if(B){var C=actuate.util.Element.cumulativeOffsetAgainst(B,this.scrollReference);this.scrollReference.scrollTop=C[1];}else{}},startDnd:function(A){this._viewer.dndManager.startDnd(this.instance,A);},drag:function(B){var A=B.x-this.instance.lastX;var C=B.y-this.instance.lastY;if(A!=0){this.scrollReference.scrollLeft-=A;}if(C!=0){this.scrollReference.scrollTop-=C;}this.instance.lastX=B.x;this.instance.lastY=B.y;},drop:function(){this.instance.style.cursor="default";actuate.iv.ui.app.ivMask.hide();},cancelDnd:function(){},enablePaneInOut:function(A){if(A==true){actuate.util.Event.observe(this.instance,"mousedown",this._mousedown_closure,false);}else{actuate.util.Event.stopObserving(this.instance,"mousedown",this._mousedown_closure);}},_updateSize:function(C,A){var D=C;var B=A;if(this._isAutoLayout==true||this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_MAX||this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_NORMAL){if(this._deltaWidth<0){this.scrollReference.scrollLeft=this._deltaWidth/2;}this.instance.style.width=(D+this._deltaWidth-(this._viewer.standalone||this._contentPanel._isStandardPanel?18:0))+"px";this.instance.style.height=(B+this._deltaHeight)+"px";}else{if(this._isAutoLayout==false){if(this._masterPageWidth!=-1){this.instance.style.width=this._masterPageWidth;}if(this._masterPageHeight!=-1){this.instance.style.height=this._masterPageHeight;}var E=this.instance.offsetWidth-D;if(E<0){this.scrollReference.scrollLeft=E/2;}else{this.scrollReference.scrollLeft=0;}}}this._refreshInformationMask();},getOffset:function(){return actuate.util.Element.cumulativeOffset(this.instance);},getContentOffset:function(){return actuate.util.Element.cumulativeOffset(this.markReportContent());},getScrolledOffset:function(){var A=actuate.util.Element.cumulativeOffset(this.instance);A[0]-=this.scrollReference.scrollLeft;A[1]-=this.scrollReference.scrollTop;return A;},getContentWidth:function(){if(this.reportContent){if(this._isAutoLayout==false){return this.reportContent.offsetWidth+this.reportContent.offsetLeft*2;}var D=this.reportContent.offsetWidth;var A=this.reportContent.getElementsByTagName("TABLE");if(A.length>0){D=A[0].offsetWidth?A[0].offsetWidth:0;for(var C=1;C<A.length;C++){var B=A[C].offsetWidth?A[C].offsetWidth:0;if(B>D){D=A[C].offsetWidth;}}}return D+this.reportContent.offsetLeft*2;}else{return 0;}},getContentHeight:function(){if(this.reportContent){if(this._isAutoLayout==false){return this.reportContent.offsetHeight+this.reportContent.offsetTop*2;}var C=this.reportContent.offsetHeight;var A=this.reportContent.getElementsByTagName("TABLE");if(A.length>0){C=A[0].offsetHeight?A[0].offsetHeight:0;for(var B=1;B<A.length;B++){var D=A[B].offsetHeight?A[B].offsetHeight:0;if(D>C){C=A[B].offsetHeight;}}}return C+this.reportContent.offsetTop*2;}else{return 0;}},_neh_mousedown:function(E){if(!this.reportContent){actuate.util.Event.stop(E);return ;}var F=actuate.util.Event.element(E);if(actuate.util.Utility.isIE8){F=E;}if(F.type=="button"){actuate.util.Event.stop(E);return ;}var A=null;try{A=F.attributes.href;}catch(D){A=null;}if((!!A&&A.value)&&(actuate.util.Event.isLeftClick(E))){var B=actuate.util.String.trim(A.value);if(B.toLowerCase().indexOf("javascript:")!=0){window.open(A.value);}}if(F){while(F&&!F.reportBase){if(F.tagName&&(F.tagName.toUpperCase()=="EMBED"||F.tagName.toUpperCase()=="OBJECT"||F.tagName.toUpperCase()=="A")){return ;}F=F.parentNode;}}if(this._contentPanel._isHyperlink(E)){return ;}this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var C=actuate.util.Event.element(E);if(!(C&&C.disableDrag)&&actuate.util.Event.isLeftClick(E)&&!this._contentPanel._isHighChart(E)){this._startDrag(E);}},_startDrag:function(A){this._dndX=A.pageX;this._dndY=A.pageY;this._viewer.contentPanel.hibernate();actuate.util.Event.observe(this.instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.observe(this.instance,"mousemove",this._drag_closure,false);},_neh_mouseup:function(A){actuate.util.Event.stop(A);actuate.util.Event.stopObserving(this.instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this.instance,"mousemove",this._drag_closure,false);this._viewer.contentPanel.activate(A);},_neh_drag:function(A){if(A.pageX===this._dndX&&A.pageY===this._dndY){return ;}actuate.util.Event.stop(A);actuate.util.Event.stopObserving(this.instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this.instance,"mousemove",this._drag_closure,false);actuate.iv.ui.app.ivMask.show(this._viewer.apiInstance);this._viewer.dndManager.startDragAndDrop(this,A,null);},_neh_drag_disabled:function(A){},getCurrentScale:function(){return 1;},getPreloadingPages:function(A){}};actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVCarouselPanel=actuate.Class.create();actuate.iv.ui.mobile.app.IVCarouselPanel.prototype={_viewer:null,instance:null,reportContent:null,_isAutoLayout:true,_masterPageWidth:-1,_masterPageHeight:-1,_deltaWidth:0,_deltaHeight:0,_contentPanel:null,contentWidth:0,contentHeight:0,scrollReference:null,_utility:null,initialize:function(C){this._viewer=C._viewer;this._utility=actuate.util.Utility;this._contentPanel=C;this.instance=C.instance;var A=this;this._navbar=this._viewer.navbar;this._pageNavbar=this._viewer.pageNavbar;CustomCarousel=function(D){CustomCarousel.superclass.constructor.call(this,D);};Ext.extend(CustomCarousel,Ext.Carousel,{onDrag:function(E,D){if(E.touches.length>1){return ;}if(A._contentPanel._isHyperlink(E)||A._utility.isHighchart(E)){return ;}CustomCarousel.superclass.onDrag.call(this,E,D);},onDragEnd:function(J,G){A._navbar._hideNavBar();A._pageNavbar.hide();if(J.touches.length>1){return ;}var K=this.getActiveItem();if(K.scale>K.fitToScale){return ;}if(Math.abs(J.deltaX)<=100){this.scrollToCard(this.getActiveItem());return ;}var I=A._viewer.currentPage;if(J.deltaX>0&&parseInt(I)>1){var F=K.previousSibling();var E=parseInt(I);if(!F||F.page!=E-1||F.expired){if(F&&!F.expired){A.addBlankPage();}var H=[{name:"page",value:E-1,refreshToc:false}];H.push({name:"preload",value:A.getPreloadingPages(E-1)});H.push({name:"showMargin",value:"true"});A._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,H);A._viewer.showProgressIndicator();return ;}}else{if(J.deltaX<0&&I<A._viewer.totalPage){var D=K.nextSibling();var E=parseInt(I);if(!D||D.page!=E+1||D.expired){A.addBlankPage();var H=[{name:"page",value:E+1,refreshToc:false}];H.push({name:"preload",value:A.getPreloadingPages(E+1)});H.push({name:"showMargin",value:"true"});A._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,H);A._viewer.showProgressIndicator();return ;}}}CustomCarousel.superclass.onDragEnd.call(this,J,G);}});var B=new CustomCarousel({direction:"horizontal",indicator:false,ui:"light",bodyPadding:"2px 2px 2px 2px",activeItem:1,layoutOnOrientationChange:true,monitorOrientation:true,renderTo:this.instance,defaults:{cls:"card"}});B.on("cardswitch",this._preLoadBlankPage,this);this._pageNavbar._pageDisplayer.relayEvents(B,["beforecardswitch"]);this.carousel=B;this.carousel.on("orientationchange",this.checkOrientation,this);this.instance.style.zIndex=actuate.iv.utility.ivZIndex.FLOATING_PANEL;this._panelOffset=null;this.scrollReference=this._contentPanel.instance;this._utility=actuate.util.Utility;},_preLoadBlankPage:function(G,D,F,E){if(!!!F||!!!F.page){return ;}var C=D.page;if(F.page>C){if(C>1){var B=D.previousSibling();if((C-B.page)>1){this._appendPage(C-1,"",true);G.items.sort("page","ASC");G.doLayout();}}}else{if(F.page<D.page){if(C<this._viewer.totalPage){var A=D.nextSibling();}if(A&&A.page&&(A.page-C)>1){this._appendPage(C+1,"",true);G.items.sort("page","ASC");G.doLayout();}}}},checkOrientation:function(){this._pageNavbar.updateOnOrientationChange();var A=this.carousel.getActiveItem();if(!A){return ;}this.changeOrientation(A);for(var B=0;B<this.carousel.items.length;B++){A=this.carousel.items.items[B];if(A!=this.carousel.getActiveItem()){this.changeOrientation(A);}}},changeOrientation:function(A){var K=Ext.Viewport.getSize().width-4;var J=Ext.Viewport.getSize().height-4;this.carousel.setHeight(J);var H=["portrait","landscape"];var E="portrait";if(K>J){E="landscape";}var L=H.indexOf(E);var F=H[(L+1)%2];var C=A.el.dom.firstChild;var D=C.firstChild;var B=actuate.util.browser;if(D&&D.initPos&&!!!D.initPos[E]){if(B&&B.isAndroid2){A.fitToScale=A.scale=1;}else{var G=J/D.initPos[F].h;if(!!!G){G=1;}var I=K/D.initPos[F].w;if(!!!I){I=1;}A.scale=G>I?I:G;A.fitToScale=A.scale;}D.initPos[E]={x:(K-D.initPos[F].w)/2,y:(J-D.initPos[F].h)/2,w:D.initPos[F].w,h:D.initPos[F].h,"fitToScale":A.fitToScale};}if(D&&D.initPos){if(B&&!B.isAndroid2){actuate.uiadapter.Element.cssTransform(D,{scale:D.initPos[E].fitToScale});D.currPos[F]={};if(A.ownscroller&&A.ownscroller._scroller){A.ownscroller._scroller.disable();}window.setTimeout(function(){D.style.left=D.initPos[E].x+"px";D.style.top=D.initPos[E].y+"px";},0);}}},disable:function(){this.carousel.disable();},enable:function(){this.carousel.enable();},setActivePage:function(C){var A=true;var D=this.carousel.query("panel[page="+C+"]");var B=null;if(D.length>0){for(var E=0;E<D.length;E++){if(D[E].expired===false){try{this.carousel.setActiveItem(D[E]);}catch(G){console.log(G.message);}B=D[E];A=false;break;}}}if(A===true){if(this._viewer){this.addBlankPage();var F=[{name:"page",value:C,refreshToc:false}];F.push({name:"preload",value:this.getPreloadingPages(C)});F.push({name:"showMargin",value:"true"});this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,F);this._viewer.showProgressIndicator();}}},addBlankPage:function(){var A=this._appendPage(null,"",true);this.carousel.doLayout();this.carousel.setActiveItem(A);},_appendPage:function(B,E,D){var C={};C.html="<div class='none ' style='background-color:white;position:relative;'>"+E+"</div>";if(B!=null){C.page=parseInt(B);}C.expired=D;C.style="background-color:#474747";var A=this.carousel.add(C);return A;},addContent:function(C){this.carousel.setHeight(this.instance.style.height);for(var B=0,A=C.length;B<A;B++){if(actuate.util.browser.__isIE()){content='<span style="display: none">&nbsp;</span>'+C[B].contentData;content=content.replace(/<script(.*)defer([^\s|^>]*)([^>]*)>/gi,"<script$1$3>");}if(!C[B].replaceDiv){this._viewer.apiInstance.removeReportEventHandlers(actuate.viewer.EventConstants.ON_CONTENT_CHANGED);var D=document.createElement("DIV");this._viewer._document._setContentMargin(D);D.innerHTML=C[B].contentData;this._viewer._document._processGroupButtons(D);this._addContent(D,C[B].pageNo);this._contentPanel.render(C[B].bookmark);this._viewer._document._cb_installEventHandlers(C[B].inits);}}this.carousel.items.sort("page","ASC");this.carousel.doLayout();},_reScale:function(A){this._viewer._document._execJS(A.el.dom);this._viewer.notifyContentChanged();this._enablePinch(A);A.un("afterlayout",this._reScale,this);},_addContent:function(F,B){if(B=="Attachment"){B=1;}var C=this.carousel.query("panel[page="+B+"]");if(C.length>0&&!C[0].expired){for(var D=0;D<this.carousel.items.length;D++){this.carousel.items.items[D].expired=true;}}var E=actuate.util.browser;if(E&&E.isIPod){for(var D=0;D<this.carousel.items.length;D++){this.carousel.items.items[D].expired=true;}}this._getMasterPageSize(F);var A=this._appendPage(B,F.innerHTML,false);A.on("afterlayout",this._reScale,this);var G=this.carousel.query("panel[expired]");if(G.length>0){for(var D=0;D<G.length;D++){this.carousel.remove(G[D]);}}this._viewer.hideProgressIndicator();this._viewer._document._selectionManager.select(null);this._navbar._hideNavBar();this._pageNavbar.hide();if(!this._isManagedEventExist("drag")){this.carousel.mon(this.carousel.body,"drag",this.carousel.onDrag,this.carousel);}if(!this._isManagedEventExist("dragend")){this.carousel.mon(this.carousel.body,"dragend",this.carousel.onDragEnd,this.carousel);}},_enablePinch:function(A){if(A.fitToScale||!!!A.el.dom.offsetWidth){return ;}var B=A.el.dom.firstChild;var C=B.firstChild;var J=Ext.Viewport.getSize().width-4;var H=Ext.Viewport.getSize().height-4;var D="portrait";if(J>H){D="landscape";}C.initPos={};C.currPos={};var G=actuate.util.browser;if(G&&G.isAndroid2){A.fitToScale=A.scale=1;}if(this._masterPageHeight>-1&&this._masterPageWidth>-1){if(G&&!G.isAndroid2){var E=H/this._masterPageHeight;if(!!!E){E=1;}var F=J/this._masterPageWidth;if(!!!F){F=1;}A.scale=E>F?F:E;A.fitToScale=A.scale;}C.style.width=this._masterPageWidth+"px";C.style.height=this._masterPageHeight+"px";C.style.left=(J-this._masterPageWidth)/2+"px";C.style.top=(H-this._masterPageHeight)/2+"px";C.initPos[D]={x:parseFloat(C.style.left),y:parseFloat(C.style.top),w:this._masterPageWidth,h:this._masterPageHeight,"fitToScale":A.fitToScale};}else{if(G&&!G.isAndroid2){var E=H/C.scrollHeight;if(!!!E){E=1;}var F=J/C.scrollWidth;if(!!!F){F=1;}A.scale=E>F?F:E;A.fitToScale=A.scale;}C.style.width=C.scrollWidth+"px";C.style.height=C.scrollHeight+"px";C.style.left=(J-C.scrollWidth)/2+"px";C.style.top=(H-C.scrollHeight)/2+"px";C.initPos[D]={x:parseFloat(C.style.left),y:parseFloat(C.style.top),w:C.scrollWidth,h:C.scrollHeight,"fitToScale":A.fitToScale};}C.style.backgroundColor="white";C.style.position="relative";if(G&&G.isAndroid2){if(!A.ownscroller){A.ownscroller=new actuate.uiadapter.Scroller(C,{direction:"both",useCssTransform:false,updateBoundaryOnTouchStart:false,bounces:true,springTension:0.2,friction:0.5,acceleration:30});}A.ownscroller._scroller.setDirection("both");A.ownscroller._scroller.enable();}else{C.style["-moz-transform-origin"]="50% 50%";actuate.uiadapter.Element.cssTransform(C,{scale:A.scale});}var I=this;var K=false;Ext.fly(A.el.dom).on({singletap:function(M,L){if(M.touches.length>1){return ;}if(I._contentPanel._isHyperlink(M)||I._utility.isHighchart(M)){return ;}K=true;setTimeout(function(){if(!K){return ;}if(I._navbar.instance.style.display=="none"){I._navbar._showNavBar();I._pageNavbar.show();}else{I._navbar._hideNavBar();I._pageNavbar.hide();}},200);},doubletap:function(){if(G&&G.isAndroid2){return ;}K=false;I._restoreInitialScale(A,C);},pinchstart:function(P,O){if(O.className instanceof SVGAnimatedString){return ;}if(A.ownscroller&&A.ownscroller._scroller){A.ownscroller._scroller.disable();var L=A.ownscroller._scroller;var Q=L.el.getPageBox();var M=Ext.getOrientation();var N=C.initPos[M];C.currPos[M]={left:Q.left,top:Q.top,right:N.w*A.scale+Q.left,bottom:N.h*A.scale+Q.top};}C.style["-webkit-transition"]="";this.startScale=A.scale;},pinch:function(M,L){if(L.className instanceof SVGAnimatedString){return ;}if(M.scale==0){console.warn("event properties is wrong(scale=0), do nothing...");return ;}var N=M.scale*this.startScale;A.scale=N;actuate.uiadapter.Element.cssTransform(C,{scale:N});},pinchend:function(P,N){if(A.ownscroller){A.ownscroller._scroller.stopAnimation();A.ownscroller._scroller.stopMomentumAnimation();}var M=Ext.getOrientation();var L=Ext.Viewport.getSize().width-4;var O=Ext.Viewport.getSize().height-4;if(A.scale>A.fitToScale){if(!A.ownscroller){A.ownscroller=new actuate.uiadapter.Scroller(C,{direction:"both",useCssTransform:false,updateBoundaryOnTouchStart:false,bounces:true,springTension:0.2,friction:0.5,acceleration:30});}A.ownscroller._scroller.updateBoundary();I._adjustPinchEndPos(A.ownscroller._scroller,C,A.scale);if(C.initPos[M].w*A.scale<L){A.ownscroller._scroller.setDirection("vertical");}else{if(C.initPos[M].h*A.scale<O){A.ownscroller._scroller.setDirection("horizontal");}else{A.ownscroller._scroller.setDirection("both");}}if(A.ownscroller._scroller.disabled){A.ownscroller._scroller.enable();}}else{I._restoreInitialScale(A,C);}}});},_restoreInitialScale:function(A,C){if(A.ownscroller&&A.ownscroller._scroller){try{A.ownscroller._scroller.reset();A.ownscroller._scroller.stopAnimation();A.ownscroller._scroller.disable();}catch(D){}}var B=Ext.getOrientation();A.scale=C.initPos[B].fitToScale;actuate.uiadapter.Element.cssTransform(C,{scale:A.scale});C.style.left=C.initPos[B].x+"px";C.style.top=C.initPos[B].y+"px";C.style.width=C.initPos[B].w+"px";C.style.height=C.initPos[B].h+"px";C.style["-webkit-transition"]="-webkit-transform 300ms ease-in-out";},_adjustPinchEndPos:function(G,H,C){var A=G.containerBox;var B=Ext.getOrientation();var K=H.currPos[B];var D=H.initPos[B];var I=G.initialRegion;if(!!!K||!!!K.left){return ;}var J=G.offsetBoundary;G.stopAnimation();G.stopMomentumAnimation();var F=10;if(D.w*C<A.width||D.h*C<A.height){var E=this._getCenterXY(G,H,C);G.scrollBy(E,true);return ;}if(Math.abs(K.left-A.left)<F&&Math.abs(K.top-A.top)<F){G.scrollTo({x:J.right-I.right,y:J.bottom-I.bottom},true);}else{if(Math.abs(K.right-A.right)<F&&Math.abs(K.top-A.top)<F){G.scrollTo({x:(J.left-I.left*C),y:(J.bottom-I.bottom)},true);}else{if(Math.abs(K.left-A.left)<F&&Math.abs(K.bottom-A.bottom)<F){G.scrollTo({x:(J.right-I.right),y:(J.top-I.top)},true);}else{if(Math.abs(K.right-A.right)<F&&Math.abs(K.bottom-A.bottom)<F){G.scrollTo({x:(J.left-I.left*C),y:(J.top-I.top)},true);}else{return ;}}}}},_getCenterXY:function(E,G,C){var A=E.containerBox;var B=Ext.getOrientation();var D=G.initPos[B];var F=E.el.getPageBox();var I=(A.left+A.width/2)-(F.left+(D.w*C)/2);var H=(A.top+A.height/2)-(F.top+(D.h*C)/2);return{x:I,y:H};},_isManagedEventExist:function(C){var D=this.carousel.managedListeners;var A=D.length;for(var B=0;B<A;B++){if(D[B].ename===C){return true;}}return false;},getPreloadingPages:function(B){var G=3;var F=actuate.util.browser;if(F&&(F.isIPhone||F.isIPod||F.isAndroidPhone)){G=0;}var A=[];var E=this._viewer.totalPage;if(!E||E==undefined){E=B+G;}for(var D=B-G;D<=B+G;D++){if(D>=0&&D<=E){var C=this.carousel.query("panel[page="+D+"]");if(C.length<1){A.push(D);}}}return A;},getCurrentScale:function(){return this.carousel.getActiveItem().scale;},bind:function(D){var C=D.getElementsByTagName("LayoutType")[0];this._isAutoLayout=("fixed_layout"!=C.firstChild.data);var A=D.getElementsByTagName("Width");if(A&&A.length>0&&A[0].firstChild!=null){this._masterPageWidth=A[0].firstChild.data;}var B=D.getElementsByTagName("Height");if(B&&B.length>0&&B[0].firstChild!=null){this._masterPageHeight=B[0].firstChild.data;}},_getMasterPageSize:function(E){if(this._masterPageHeight>-1&&this._masterPageHeight>-1){return ;}var D=E.getElementsByTagName("table")[0];var C=!!D?D.style["table-layout"]:null;this._isAutoLayout=("fixed"!=C);if(!this._isAutoLayout){this._masterPageWidth=!!D?D.style.width:-1;this._masterPageHeight=!!D?D.style.height:-1;}var B;var A;if(/\d+\.?\d*(\w+)/.test(this._masterPageWidth)){B=RegExp.$1;A=parseFloat(this._masterPageWidth);this._masterPageWidth=actuate.iv.utility.ivUtility.convertToPixs(A,B);}if(/\d+\.?\d*(\w+)/.test(this._masterPageHeight)){B=RegExp.$1;A=parseFloat(this._masterPageHeight);this._masterPageHeight=actuate.iv.utility.ivUtility.convertToPixs(A,B);}},setDeltaWidth:function(A){if(this._isAutoLayout){this._deltaWidth+=A;}},setDeltaHeight:function(A){if(this._isAutoLayout){this._deltaHeight+=A;}},markReportContent:function(){for(var A=0;A<this.instance.childNodes.length;A++){if(this.instance.childNodes[A].tagName=="DIV"){this.reportContent=this.instance.childNodes[A];this.contentWidth=this.getContentWidth();this.contentHeight=this.getContentHeight();return this.reportContent;}}return null;},getOffset:function(){return actuate.util.Element.cumulativeOffset(this.instance);},getScrolledOffset:function(){var A=actuate.util.Element.cumulativeOffset(this.instance);A[0]-=this.scrollReference.scrollLeft;A[1]-=this.scrollReference.scrollTop;return A;},getContentWidth:function(){if(this.reportContent){if(this._isAutoLayout==false){return this.reportContent.offsetWidth+this.reportContent.offsetLeft*2;}var D=this.reportContent.offsetWidth;var A=this.reportContent.getElementsByTagName("TABLE");if(A.length>0){D=A[0].offsetWidth?A[0].offsetWidth:0;for(var C=1;C<A.length;C++){var B=A[C].offsetWidth?A[C].offsetWidth:0;if(B>D){D=A[C].offsetWidth;}}}return D+this.reportContent.offsetLeft*2;}else{return 0;}},getContentHeight:function(){if(this.reportContent){if(this._isAutoLayout==false){return this.reportContent.offsetHeight+this.reportContent.offsetTop*2;}var C=this.reportContent.offsetHeight;var A=this.reportContent.getElementsByTagName("TABLE");if(A.length>0){C=A[0].offsetHeight?A[0].offsetHeight:0;for(var B=1;B<A.length;B++){var D=A[B].offsetHeight?A[B].offsetHeight:0;if(D>C){C=A[B].offsetHeight;}}}return C+this.reportContent.offsetTop*2;}else{return 0;}}};actuate.util.Package.define("actuate.iv.ui.view");actuate.iv.ui.view.IVView=actuate.Class.create();actuate.iv.ui.view.IVView.prototype={_viewer:null,instance:null,initialize:function(A){this._viewer=A;},isVisible:function(){return actuate.util.Element.visible(this.instance);},close:function(){this.instance.style.display="none";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);}};actuate.util.Package.define("actuate.iv.ui.view");actuate.iv.ui.view.IVParameter=actuate.Class.create();actuate.iv.ui.view.IVParameter.prototype=actuate.Class.extend(new actuate.iv.ui.view.IVView(),{_height:230,_contentHeight:185,_runEnabled:false,parameter:null,initialize:function(O){actuate.iv.ui.view.IVView.prototype.initialize.call(this,O);var A=document.createElement("DIV");A.id="ParameterPanel";A.style.display="none";A.className="parameter";var L=document.createElement("DIV");L.className="paneHeader";L.id="actuate_iv_ui_view_ivParameter_parameterHeader";A.appendChild(L);var K=document.createElement("LABEL");K.style.align="left";K.className="ivViewLabel";var E=document.createTextNode(actuate.util.Utility.getLocalizedString("parameter.toolbar.displayname"));K.appendChild(E);L.appendChild(K);var P=document.createElement("SPAN");P.className="parameterToolbar";L.appendChild(P);var N=document.createElement("DIV");N.className="parameterToolbar_buttonStyleDisabled";N.id="actuate_iv_ui_view_ivParameter_runBtn";P.appendChild(N);var J=document.createElement("INPUT");J.id="actuate_iv_ui_view_ivParameter_runBtnImage";J.type="BUTTON";J.className="actuateCSSSprite_view actuateIV_parameterrun_disabled parameterRunBtn";J.title=actuate.util.Utility.getLocalizedString("parameter.button.run");J.style.marginRight="5px";N.appendChild(J);var H=document.createTextNode(actuate.util.Utility.getLocalizedString("parameter.button.run"));N.appendChild(H);var B=document.createElement("INPUT");B.type="BUTTON";B.className="closeButton actuate-widget-tool actuate-widget-tool-left";B.title=actuate.util.Utility.getLocalizedString("parameter.button.close");L.appendChild(B);var C=document.createElement("DIV");C.className="parameterContent";A.appendChild(C);var I=actuate.iv.utility.ivUtility.getElementByClassName(O.container,"content");if(I){I.appendChild(A);}this.instance=A;this.instance.style.height=this._height+"px";var G=(this._viewer.contentPanel&&this._viewer.contentPanel.getNavbarHeight)?this._viewer.contentPanel.getNavbarHeight():0;var M=this._viewer.height-this._height-G;this.instance.style.top=M+"px";this.instance.style.width=this._viewer.width+"px";this._contentDiv=null;this._closeBtn=null;this._runBtn=null;this._runBtnImage=null;for(var D=0;D<this.instance.childNodes.length;D++){if(this.instance.childNodes[D].getAttributeNode){var Q=this.instance.childNodes[D].getAttributeNode("class");if(Q.nodeValue=="parameterContent"){this._contentDiv=this.instance.childNodes[D];this._contentDiv.setAttribute("id","actuate_iv_ui_view_ivParameter_contentDiv_"+this._viewer.id);}else{if(Q.nodeValue=="paneHeader"){var F=this.instance.childNodes[D];this._closeBtn=F.getElementsByTagName("input")[1];this._runBtnImage=F.getElementsByTagName("input")[0];this._runBtn=this._runBtnImage.parentNode;}}}}this._contentDiv.style.height=this._contentHeight+"px";this._contentDiv.style.width=this._viewer.width+"px";this._eh_resize_closure=actuate.Method.bindAsEventListener(this._eh_resize,this);this.parametersLoadedCallBack_c=actuate.Method.bind(this.parametersLoadedCallBack,this);this.parametersExceptionCallBack_c=actuate.Method.bind(this.parametersExceptionCallBack,this);this._parameterValuesRunCallback_c=actuate.Method.bind(this._parameterValuesRunCallback,this);this._run_c=actuate.Method.bindAsEventListener(this._run,this);this._close_c=actuate.Method.bindAsEventListener(this.close,this);if(actuate.util.Utility.isIE8){this._closeBtn.buttonFixType=2;actuate.util.Utility.fixIE8ImageButtons(this.instance);}this._cb_installEventHandlers(this.instance.id);this._runEnabled=false;},_run:function(){if(!this._runEnabled){return ;}if(this._viewer.apiInstance.getReportDesign()){var B=this.parameter;var A=B.validateParameters();if(null!=A){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A);return ;}B.downloadParameterValues(this._parameterValuesRunCallback_c);}},_parameterValuesRunCallback:function(B){if(B){var A=new Object();A[actuate.data.impl.OptionKeys.REPORT_PARAMETERS]=B;A[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=this._viewer.apiInstance.getReportletBookmark();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RUN_REPORT,A);}},_cb_installEventHandlers:function(A){this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,this._eh_resize_closure);actuate.util.Event.observe(this._closeBtn,"click",this._close_c,false);actuate.util.Event.observe(this._runBtn,"click",this._run_c,false);if(this._runBtnImage){this._neh_buttonMouseOut_c=actuate.Method.bindAsEventListener(this._neh_buttonMouseOut,this);this._neh_buttonMouseOver_c=actuate.Method.bindAsEventListener(this._neh_buttonMouseOver,this);actuate.util.Event.observe(this._runBtnImage,"mouseout",this._neh_buttonMouseOut_c,false);actuate.util.Event.observe(this._runBtnImage,"mouseover",this._neh_buttonMouseOver_c,false);}},_neh_buttonMouseOver:function(A){var B=actuate.util.Event.element(A);if(B&&B.className&&B.className.indexOf("disabled",B.className.length-"disabled".length)==-1){if(B.className.lastIndexOf("_over")<B.className.length-5){B.className=B.className+"_over";}}},_neh_buttonMouseOut:function(A){var B=actuate.util.Event.element(A);if(B&&B.className){if(B.className.indexOf("_over",B.className.length-"_over".length)!==-1){B.className=B.className.substr(0,B.className.length-"_over".length);}}},_eh_resize:function(){this._updateSize();},_beh_parameter:function(B){this._setRunEnabled(false);this.instance.style.display="block";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);var A=new Array();A.push("actuate.parameter");actuate.resource.module.require(A,actuate.Method.bind2(this._prepareParameter,this,B));},_prepareParameter:function(D){if(this.parameter==null){this.parameter=new actuate.parameter.Parameter(this.getContentDivId());this.parameter.registerEventHandler(actuate.parameter.EventConstants.ON_EXCEPTION,this.parametersExceptionCallBack_c);}var C=this.parameter;var A=this._viewer.apiInstance.getReportDesign();if(A){C.setReportName(A);A=this._viewer.apiInstance.getReportDocument();var B=this._viewer.apiInstance.getConnectionHandle();C.setTransientDocumentName(A,B);}else{A=this._viewer.apiInstance.getReportDocument();C.setReportName(A);}C.submit(this.parametersLoadedCallBack_c);return ;},parametersLoadedCallBack:function(){this._showReadOnly(this.parameter.getParameterDefinitions());},_hasParams:function(B){if(B){for(var A=0;A<B.length;A++){if(!B[A].isHidden()){return true;}}}return false;},_setRunEnabled:function(A){if(this._runEnabled!=A){this._runEnabled=A;this._runBtn.className=A?"parameterToolbar_buttonStyle":"parameterToolbar_buttonStyleDisabled";this._runBtnImage.disabled=!A;this._runBtnImage.className="parameterRunBtn actuateCSSSprite_view "+(A?"actuateIV_parameterrun":"actuateIV_parameterrun_disabled");this._runBtn.style.cursor=A?"pointer":"default";this._runBtnImage.style.cursor=A?"pointer":"default";}},_showReadOnly:function(C){var A=this._hasParams(C);var D=false;if(!A){D=true;}else{if(A&&!this._viewer.apiInstance.getReportDesign()){D=true;var B=document.createElement("div");this._contentDiv.appendChild(B);B.className="informationDiv";B.innerHTML=actuate.util.Utility.getLocalizedString("parameter.readOnlyInformation");}}this._setRunEnabled(!D);},parametersExceptionCallBack:function(A){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A.getMessage());return ;},getContentDivId:function(){return this._contentDiv.getAttribute("id");},getPanelHeight:function(){return this._height;},_updateSize:function(){var A=(this._viewer.contentPanel&&this._viewer.contentPanel.getNavbarHeight)?this._viewer.contentPanel.getNavbarHeight():0;var B=this._viewer.height-this._height-A;this.instance.style.top=B+"px";this.instance.style.width=this._viewer.width+"px";this._contentDiv.style.width=this._viewer.width+"px";this._contentDiv.style.height=this._contentHeight+"px";}});actuate.util.Package.define("actuate.iv.ui.view");actuate.iv.ui.view.IVToc=actuate.Class.create();actuate.iv.ui.view.IVToc.prototype=actuate.Class.extend(new actuate.iv.ui.view.IVView(),{_tocRoot:null,_closeButton:null,_currentTocNode:null,width:250,_selectedNode:null,_tocleafClassName:"tocItems actuateCSSSprite_view actuateIV_tocleaf",_tocleaf_activeClassName:"tocItems actuateCSSSprite_view actuateIV_tocleaf_active",initialize:function(I){actuate.iv.ui.view.IVView.prototype.initialize.call(this,I);var A=document.createElement("DIV");A.id="TOCPanel";A.style.display="none";A.className="toc";var G=document.createElement("DIV");G.className="paneHeader";A.appendChild(G);var F=document.createElement("LABEL");F.style.align="left";F.className="ivViewLabel";var C=document.createTextNode(actuate.util.Utility.getLocalizedString("toc.toolbar.displayname"));F.appendChild(C);G.appendChild(F);var J=document.createElement("INPUT");J.type="BUTTON";J.className="closeButton actuate-widget-tool actuate-widget-tool-left";J.title=actuate.util.Utility.getLocalizedString("toc.close");G.appendChild(J);var B=document.createElement("DIV");B.id="display0";B.className="tocContent";A.appendChild(B);var E=actuate.iv.utility.ivUtility.getElementByClassName(I.container,"content");if(E){E.appendChild(A);}this.instance=A;this.instance.style.display="";this.instance.style.width=this.width+"px";var H=this.instance.getElementsByTagName("div");this._tocRoot=H[1];var D=H[0].getElementsByTagName("input");this._closeButton=D[0];this._beh_toc_data_closure=actuate.Method.bind(this._beh_toc_data,this);this._neh_img_click_closure=actuate.Method.bindAsEventListener(this._neh_img_click,this);this._eh_resize_closure=actuate.Method.bindAsEventListener(this._eh_resize,this);this.__neh_item_mouse_over_closure=actuate.Method.bindAsEventListener(this._neh_mousemove,this);this.__neh_item_mouse_out_closure=actuate.Method.bindAsEventListener(this._neh_mouseout,this);this.__neh_item_click_closure=actuate.Method.bindAsEventListener(this._neh_text_click,this);this._headerHeight=G.offsetHeight;this._cb_installEventHandlers(this.instance.id);if(actuate.util.Utility.isIE8){J.buttonFixType=2;actuate.util.Utility.fixIE8ImageButtons(this.instance);}},_cb_installEventHandlers:function(A){actuate.util.Event.observe(this._closeButton,"click",actuate.Method.bindAsEventListener(this._neh_click,this),false);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_TOC_DATA,A,this._beh_toc_data_closure);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,this._eh_resize_closure);},_neh_mousemove:function(A){var B=actuate.util.Event.element(A);this._highlightNode(B);},_highlightNode:function(B){if(B){if(!B.getAttribute("background-Color")){B.setAttribute("background-Color",B.style.backgroundColor);B.setAttribute("color",B.style.color);}B.style.backgroundColor="#2298fb";B.style.color="#FFFFFF";if(B.parentNode&&B.parentNode.tagName=="TD"&&B.parentNode.className=="actuateIV_tocleaf_td"){var A=B.parentNode.getElementsByClassName(this._tocleafClassName);if(A&&A.length>0){A[0].className=this._tocleaf_activeClassName;}if(!B.parentNode.getAttribute("background-Color")){B.parentNode.setAttribute("background-Color",B.parentNode.style.backgroundColor);B.parentNode.setAttribute("color",B.parentNode.style.color);}B.parentNode.style.backgroundColor="#2298fb";B.parentNode.style.color="#FFFFFF";}}},_reSetNodecolor:function(B){if(B){B.style.backgroundColor=B.getAttribute("background-Color");B.style.color=B.getAttribute("color");if(B.parentNode&&B.parentNode.tagName=="TD"&&B.parentNode.className=="actuateIV_tocleaf_td"){var A=B.parentNode.getElementsByClassName(this._tocleaf_activeClassName);if(A&&A.length>0){A[0].className=this._tocleafClassName;}B.parentNode.style.backgroundColor="";B.parentNode.style.color="";}}},_neh_mouseout:function(A){var B=actuate.util.Event.element(A);if(!this._selectedNode||this._selectedNode!=B){this._reSetNodecolor(B);}},_neh_click:function(A){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this.close();},_clearTocRoot:function(){this._tocRoot.innerHTML="";var A=this._tocRoot;while(A.firstChild){A.removeChild(A.firstChild);}this._currentTocNode=null;},_resetCurrentNode:function(){this._currentTocNode=null;},processBind:function(E,b){this.instance.style.display="";this.instance.style.width=this.width+"px";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);var C=this._viewer.getBaseUrl();var V=b.getElementsByTagName("Child");var d=true;var T=b.getElementsByTagName("Json");if(T.length>0){if(actuate.util.Utility.parseJson(T[0]).Operator=="GetToc"){d=false;}}if(d){this._clearTocRoot();}var U=V.length;if(U==0){this._clearTocRoot();}else{var D=document.createElement("table");D.border="0";D.cellspacing="0";D.cellpadding="0";var B=document.createElement("tbody");for(var S=0;S<U;S++){var N=null;if(this._currentTocNode==null){N="0"+"_"+S;}else{N=this._currentTocNode.id+"_"+S;}var Z=document.createElement("tr");var G=document.createElement("td");G.valign="top";G.id="td"+N;var W=V[S];var Q=W.getElementsByTagName("IsLeaf");var c=document.createElement("input");c.type="button";c.plusMinus="+";c.id=N;c.style.verticalAlign="middle";if(Q[0].firstChild.data=="false"){c.className="tocItems actuateCSSSprite_view actuateIV_tocexpand";c.style.cursor="pointer";actuate.util.Event.observe(c,"click",this._neh_img_click_closure,false);}else{c.className=this._tocleafClassName;c.style.cursor="default";G.className="actuateIV_tocleaf_td";}var R=W.getElementsByTagName("Id");c.nodeId=R[0].firstChild.data;var H=W.getElementsByTagName("Bookmark");c.bookmark=H[0].firstChild.data;G.appendChild(c);G.appendChild(document.createTextNode(" "));var J=document.createElement("input");var Y=W.getElementsByTagName("DisplayName");var A=Y[0].firstChild;var O=W.getElementsByTagName("Id");var M=O[0].firstChild;var K=(!A)?M.data:A.data;J.type="button";J.value=K;J.title=K;J.id="span_"+N;var a="color: #646464; padding-left: 0px;cursor:pointer;background-color:#e9e9e9;border:0px;overflow:visible;vertical-align:middle;";if(actuate.util.browser.isFirefox){a+="display:table-cell;";}var I=W.getElementsByTagName("Style");if(I&&I.length>0){if(I[0].firstChild){J.style.cssText=a+I[0].firstChild.data;}else{J.style.cssText=a;}}G.appendChild(J);G.setAttribute("nowrap","true");Z.appendChild(G);var X=document.createElement("tr");var F=document.createElement("td");F.id="display"+N;F.style.paddingLeft="10px";F.style.display="none";X.appendChild(F);B.appendChild(Z);B.appendChild(X);actuate.util.Event.observe(J,"mouseover",this.__neh_item_mouse_over_closure,false);actuate.util.Event.observe(J,"mouseout",this.__neh_item_mouse_out_closure,false);actuate.util.Event.observe(J,"click",this.__neh_item_click_closure,false);}D.appendChild(B);var L=null;if(this._currentTocNode==null){var L=this._tocRoot;}else{L=this._currentTocNode.parentNode.parentNode.nextSibling.firstChild;}var P=L.childNodes.length;if(P==0){L.appendChild(D);}else{L.replaceChild(D,L.childNodes[0]);}}this._updateSize();},processAction:function(B,A){if("Close"==A){this._showPVMessage();}},_neh_text_click:function(B){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var A=actuate.util.Event.element(B);var C=A.parentNode.firstChild;this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"bookmark",value:C.bookmark});var D=actuate.util.Event.element(B);this._reSetNodecolor(this._selectedNode);this._selectedNode=D;},_neh_img_click:function(C){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var B=this._viewer.getBaseUrl();var D=actuate.util.Event.element(C);D.className=(D.plusMinus=="+")?"tocItems actuateCSSSprite_view actuateIV_toccollapse":"tocItems actuateCSSSprite_view actuateIV_tocexpand";D.plusMinus=(D.plusMinus=="+")?"-":((D.plusMinus=="-")?"+":"0");var A=D.parentNode.parentNode.nextSibling.firstChild;A.style.display=(D.plusMinus=="+")?"none":"";if(!D.dataLoaded){D.dataLoaded="true";this._currentTocNode=D;this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_TOC_DATA,D.nodeId);}},_eh_resize:function(){this._updateSize();},_updateSize:function(){var A=this._viewer.height;if(this._viewer._parameterPanel&&this._viewer._parameterPanel.isVisible()){var B=(this._viewer.contentPanel&&this._viewer.contentPanel.getNavbarHeight)?this._viewer.contentPanel.getNavbarHeight():0;A=A-this._viewer._parameterPanel.getPanelHeight()-B;}else{A-=this._viewer.navbar.height;}this.instance.style.height=A+"px";var C=this._tocRoot.getElementsByTagName("table");this._tocRoot.style.height=A-this._headerHeight+"px";},_beh_toc_data:function(C,B,A){B.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,"GetToc",[null,[{name:"realId",value:A}]]);return true;},_showPVMessage:function(){if(this.isVisible()){this._clearTocRoot();this._tocRoot.innerHTML=actuate.util.Utility.getLocalizedString("toc.reportinPV");}},close:function(){if(this.isVisible()){this._clearTocRoot();this.instance.style.display="none";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);}}});actuate.util.Package.define("actuate.iv.ui.mobile.view");actuate.iv.ui.mobile.view.IVToc=actuate.Class.create();actuate.iv.ui.mobile.view.IVToc.prototype={_tocData:null,_viewer:null,_tocNestedList:null,_store:null,initialize:function(A){if(this.__extending){return ;}this._viewer=A;Ext.regModel("ListItems",{idProperty:"text",fields:[{name:"text",type:"string"}]});this._tocData={text:"",items:[]};var B=new Ext.data.TreeStore({model:"ListItems",root:this._tocData,proxy:{type:"memory",reader:{type:"tree",root:"items"}}});this._store=B;this._beh_toc_data_closure=actuate.Method.bind(this._beh_toc_data,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_TOC_DATA,"ivtoc",this._beh_toc_data_closure);TocNestedList=function(D){TocNestedList.superclass.constructor.call(this,D);};var C=this;Ext.extend(TocNestedList,Ext.NestedList,{onItemTap:function(D,H,G,I){var F=D.getStore();var E=F.getAt(H);this.currentSelectedNode=E.node;C._neh_fetch_bookmark(D,H,G,I);TocNestedList.superclass.onItemTap.call(this,D,H,G,I);},getActiveNode:function(){return this.currentSelectedNode;},setActiveNode:function(D){this.currentSelectedNode=D;},backToMainMenu:function(){var D=this.getActiveItem();var E=this.items.indexOf(D);while(E>0){TocNestedList.superclass.onBackTap.call(this);E--;}},getActiveNodePath:function(){return this.currentSelectedNode?this.currentSelectedNode.getPath():"/root";}});this._tocNestedList=TocNestedList;},_cb_installEventHandlers:function(){this._neh_goto_bookmark_c=actuate.Method.bind(this._neh_goto_bookmark,this);if(this._nestedList){this._nestedList.on("leafitemtap",this._neh_goto_bookmark_c);}this._neh_reset_nestedList_c=actuate.Method.bind(this._neh_reset_nestedList,this);if(this._nestedList){this._nestedList.on("hide",this._neh_reset_nestedList_c);}},_neh_reset_nestedList:function(){},_neh_goto_bookmark:function(A,G,F,D){this._nestedList.hide();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var C=A.getStore();var B=C.getAt(G);var E=B.raw.bookmark;this._viewer.contentPanel.floatPanel.addBlankPage();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,[{name:"bookmark",value:E},{name:"showMargin",value:"true"}]);this._viewer.showProgressIndicator();},_neh_fetch_bookmark:function(A,F,E,D){var G=this._nestedList.getActiveNode();if(!G.isLeaf()){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var C=A.getStore();var B=C.getAt(F);var H=B.raw.nodeId;if(!B.dataLoaded){B.dataLoaded="true";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_TOC_DATA,H);}}},isVisible:function(){return this._nestedList.isVisible();},_resetCurrentNode:function(){},_beh_toc_data:function(C,B,A){B.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,"GetToc",[null,[{name:"realId",value:A}]]);return true;},_resetCurrentNode:function(){},_parseData:function(datas,root){for(var i=0,len=datas.length;i<len;i++){var tmp=datas[i];var isLeaf=tmp.getElementsByTagName("IsLeaf")[0].firstChild.data;var nodeId=tmp.getElementsByTagName("Id")[0].firstChild.data;var bookmark=tmp.getElementsByTagName("Bookmark")[0].firstChild.data;var displayname=tmp.getElementsByTagName("DisplayName")[0].firstChild.data;var realDisplayName=(!displayname)?nodeId:displayname;var node={};if(isLeaf==="true"){node.text=realDisplayName;node.nodeId=nodeId;node.bookmark=bookmark;node.leaf=true;}else{node.text=realDisplayName;node.nodeId=nodeId;node.bookmark=bookmark;node.leaf=false;node.items=[];}var dest="root";var idxes=node.nodeId.slice(6).split("_");for(var j=0;j<idxes.length-1;j++){dest+="."+"items"+"["+idxes[j]+"]";}dest=eval(dest);dest.items[idxes.pop()]=node;}return root;}};actuate.util.Package.define("actuate.iv.ui.mobile.view");actuate.iv.ui.mobile.view.IVTocForPhone=actuate.Class.extendClass(actuate.iv.ui.mobile.view.IVToc,{initialize:function(A){actuate.iv.ui.mobile.view.IVTocForPhone.superclass.initialize.call(this,A);try{var D=new actuate.uiadapter.Button({text:"Cancel",ui:"back-small",scope:this,handler:function(){this._nestedList.hide();}});}catch(C){console.log(C.message);}var B=this;this._nestedList=new this._tocNestedList({store:B._store,stopMaskTapEvent:true,hideOnMaskTap:true,displayField:"text",useTitleAsBackText:false,updateTitleText:false,modal:true,title:"Table of Contents",fullscreen:true,toolbar:{items:[{xtype:"spacer"},D]},style:{"z-index":actuate.iv.utility.ivZIndex.PHONE_TOC},getItemTextTpl:function(){return"{"+this.displayField+'}<div <tpl if="leaf !== true">style="float:right;"</tpl>><tpl if="leaf !== true">></tpl></div>';}});this._nestedList.hide();this._cb_installEventHandlers();},processBind:function(E,D,B,F){var A=D.getElementsByTagName("Child");if(A.length==0){if(this._nestedList.isHidden()){this._nestedList.show();}return ;}this._tocData=this._parseData(A,this._tocData);if(this._nestedList.getActiveNodePath()=="/root"){this._nestedList.store.load({"doPreload":true});}else{var C=this._nestedList.getActiveNode();if(!C.isLeaf()){this._nestedList.store.load({"node":C,"doPreload":true});}}if(this._nestedList.isHidden()){this._nestedList.show();}}});actuate.util.Package.define("actuate.iv.ui.mobile.view");actuate.iv.ui.mobile.view.IVTocForTablet=actuate.Class.extendClass(actuate.iv.ui.mobile.view.IVToc,{initialize:function(A){actuate.iv.ui.mobile.view.IVTocForTablet.superclass.initialize.call(this,A);var D=document.createElement("div");var B=actuate.iv.utility.ivUtility.getElementByClassName(A.container,"actuateViewerContainer");B.appendChild(D);D.id="toc_cascading_div";D.style.fontSize="80%";D.style.position="absolute";D.style.width="auto";D.style.height="auto";D.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;var C=this;this._nestedList=new this._tocNestedList({store:C._store,stopMaskTapEvent:true,hideOnMaskTap:true,displayField:"text",floating:true,dock:"top",useTitleAsBackText:false,updateTitleText:false,modal:true,title:"Table of Contents",bodyStyle:"min-height : 320px; min-width : 275px;",renderTo:D,getItemTextTpl:function(){return"{"+this.displayField+'}<div <tpl if="leaf !== true">style="float:right;"</tpl>><tpl if="leaf !== true">></tpl></div>';}});this._nestedList.hide();this._cb_installEventHandlers();},processBind:function(E,D,B,F){var A=D.getElementsByTagName("Child");if(A.length==0){if(this._nestedList.isHidden()){this._nestedList.showBy(this._viewer.navbar.getTocBtnId());}return ;}this._tocData=this._parseData(A,this._tocData);if(this._nestedList.getActiveNodePath()=="/root"){this._nestedList.store.load({"doPreload":true});}else{var C=this._nestedList.getActiveNode();if(!C.isLeaf()){this._nestedList.store.load({"node":C,"doPreload":true});}}if(this._nestedList.isHidden()){this._nestedList.showBy(this._viewer.navbar.getTocBtnId());}}});actuate.util.Package.define("actuate.iv.ui.view");actuate.iv.ui.view.IVFacebookComments=actuate.Class.create();actuate.iv.ui.view.IVFacebookComments.prototype=actuate.Class.extend(new actuate.iv.ui.view.IVView(),{_height:250,_contentHeight:185,width:500,initialize:function(L){if(typeof (L)=="string"){return ;}actuate.iv.ui.view.IVView.prototype.initialize.call(this,L);var B=document.createElement("DIV");B.id="FBCommentPanel";B.style.zIndex="400";B.style.display="none";B.className="toc";B.style.border="1px solid #CCCCCC";var I=document.createElement("DIV");I.className="paneHeader";I.id="actuate_iv_ui_view_ivFacebookComment_Header";B.appendChild(I);var H=document.createElement("LABEL");H.style.align="left";H.className="ivViewLabel";var D=document.createTextNode(actuate.util.Utility.getLocalizedString("facebookCommentPanel.facebook.toolbar.displayname"));H.appendChild(D);I.appendChild(H);var C=document.createElement("INPUT");C.type="BUTTON";C.className="closeButton actuateCSSSprite_view actuateIV_tocclose";C.title=actuate.util.Utility.getLocalizedString("facebookCommentPanel.facebook.close");I.appendChild(C);this._contentDiv=document.createElement("DIV");this._contentDiv.className="parameterContent";this._contentDiv.style.zIndex="401";var M=this._viewer.apiInstance.getReportDesign();var G=this._viewer.apiInstance;var A=G.getIportalUrl();var K=A+"executereport.do?__executableName="+M;B.appendChild(this._contentDiv);var F=actuate.iv.utility.ivUtility.getElementByClassName(L.container,"content");if(F){F.appendChild(B);}this.instance=B;this.instance.style.width=this.width+"px";this.instance.style.left=this._viewer.width-530+"px";this.instance.style.height=this._viewer.height+"px";var J=this.instance.getElementsByTagName("div");var E=J[0].getElementsByTagName("input");this._closeBtn=E[0];this._eh_resize_closure=actuate.Method.bindAsEventListener(this._eh_resize,this);this._close_c=actuate.Method.bindAsEventListener(this.close,this);if(actuate.util.Utility.isIE8){this._closeBtn.buttonFixType=2;actuate.util.Utility.fixIE8ImageButtons(this.instance);}this._cb_installEventHandlers(this.instance.id);},_cb_installEventHandlers:function(A){this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,this._eh_resize_closure);actuate.util.Event.observe(this._closeBtn,"click",this._close_c,false);},_eh_resize:function(){this._updateSize();},_beh_parameter:function(A){this.instance.style.display="block";this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);},getContentDivId:function(){return this._contentDiv.getAttribute("id");},getPanelHeight:function(){return this._height;},_updateSize:function(){this.instance.style.width="515px";this.instance.style.left=this._viewer.width-530+"px";this.instance.style.height=this._viewer.height+"px";this._contentDiv.style.width="520px";this._contentDiv.style.height=this._viewer.height+"px";}});actuate.util.Package.define("actuate.iv.ui.view.contentpanel");actuate.iv.ui.view.contentpanel.IVContentPanel=actuate.Class.create();actuate.iv.ui.view.contentpanel.IVContentPanel.prototype=actuate.Class.extend(new actuate.iv.ui.view.IVView(),{floatPanel:null,_highlight:true,_hoverHighlight:true,_isStandardPanel:true,_hasPanInOut:false,_hasMouseScrolling:false,initialize:function(C,B){if(!C){return ;}actuate.iv.ui.view.IVView.prototype.initialize.call(this,C);this.instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"contentPanel");this.instance.style.overflow="hidden";this.instance.style.position="absolute";this.instance.style.width="100%";this.instance.style.height="100%";this.instance.style.margin="0px";this.instance.style.padding="0px";this.instance.style.backgroundColor="transparent";this.floatPanel=new actuate.iv.ui.app.IVFloatPanel(this);this.__neh_mousemove_closure=actuate.Method.bindAsEventListener(this.__neh_mousemove,this);this.__neh_click_closure=actuate.Method.bindAsEventListener(this.__neh_click,this);this.__neh_click_simple_closure=actuate.Method.bindAsEventListener(this.__neh_click_simple,this);this._neh_mousewheel_c=actuate.Method.bindAsEventListener(this._neh_mousewheel,this);this._updateSize();this._installGlobalEventHandlers(this.instance.id);this.instance.style.zIndex=actuate.iv.utility.ivZIndex.CONTENT_PANEL;if(B){this._applyPanelConfig(B);}else{var E=this.instance.getAttributeNode(actuate.iv.constant.uiConfig.SCROLL_PANEL);if(E&&E.value==actuate.iv.constant.uiConfig.CONFIG_OFF){this._isStandardPanel=true;}if(E&&E.value==actuate.iv.constant.uiConfig.CONFIG_ON){var A=this.instance.getAttributeNode(actuate.iv.constant.uiConfig.PAN_IN_OUT);var D=this.instance.getAttributeNode(actuate.iv.constant.uiConfig.MOUSE_SCROLLING);this._isStandardPanel=false;this._hasPanInOut=A&&A.value==actuate.iv.constant.uiConfig.CONFIG_OFF?false:true;this._hasMouseScrolling=D&&D.value==actuate.iv.constant.uiConfig.CONFIG_OFF?false:true;}else{if(C.standalone){this._isStandardPanel=true;}else{this._isStandardPanel=false;this._hasPanInOut=true;this._hasMouseScrolling=true;}}}this._setPanel();},_applyPanelConfig:function(A){if(A instanceof actuate.viewer.BrowserPanel){this._isStandardPanel=true;}if(A instanceof actuate.viewer.ScrollPanel){this._isStandardPanel=false;this._hasPanInOut=A.getPanInOutEnabled();this._hasMouseScrolling=A.getMouseScrollingEnabled();}},_setPanel:function(){if(this._isStandardPanel){var B=document.documentElement||{scrollLeft:0,scrollTop:0};var A=document.body||{scrollLeft:0,scrollTop:0};this.floatPanel.scrollReference.scrollTop=B.scrollTop||window.pageYOffset||A.scrollTop||0;this.floatPanel.scrollReference.scrollLeft=B.scrollLeft||window.pageXOffset||A.scrollLeft||0;this.instance.style.overflow="auto";this.floatPanel.instance.style.overflow="";}else{if(this._hasMouseScrolling){actuate.util.Event.observe(this._viewer.container,"mousewheel",this._neh_mousewheel_c,false);actuate.util.Event.observe(this._viewer.container,"DOMMouseScroll",this._neh_mousewheel_c,false);}if(this._hasPanInOut){this.floatPanel.enablePaneInOut(true);}this.instance.style.overflow="hidden";this.floatPanel.instance.style.overflow="hidden";this.floatPanel.scrollReference=this.floatPanel.instance;}},refresh:function(){if(this._viewer.apiInstance._uiConfig){var A=this._viewer.apiInstance._uiConfig.getContentPanel();if(A instanceof actuate.viewer.BrowserPanel&&this._isStandardPanel==false){this._isStandardPanel=true;this._hasPanInOut=false;}else{if(A instanceof actuate.viewer.ScrollPanel&&this._isStandardPanel==true){this._isStandardPanel=false;this._hasPanInOut=true;}}this._setPanel();}this._viewer._document._setContentMargin(this.floatPanel.reportContent);this._updateSize();},__keydown:function(A){switch(A.keyCode){case 33:this.floatPanel.instance.scrollTop-=this._viewer.height-this._viewer.navbar.instance.offsetHeight;break;case 34:this.floatPanel.instance.scrollTop+=this._viewer.height-this._viewer.navbar.instance.offsetHeight;break;case 38:this.floatPanel.instance.scrollTop-=10;break;case 40:this.floatPanel.instance.scrollTop+=10;break;case 37:this.floatPanel.instance.scrollLeft+=10;break;case 39:this.floatPanel.instance.scrollLeft-=10;break;case 36:case 35:default:return ;}},__keyup:function(A){},bind:function(A){this.floatPanel.bind(A);},isRTL:function(){var A=this.floatPanel.reportContent;if(A){for(var B=0;B<A.childNodes.length;B++){var D=A.childNodes[B];if(D&&D.tagName&&D.tagName.toLowerCase()=="div"){var C=D.dir;if(C&&C=="rtl"){return true;}}}}return false;},_installGlobalEventHandlers:function(A){this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_START_UP,A,actuate.Method.bind(this.__eh_start_up,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bindAsEventListener(this.__eh_resize,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A,actuate.Method.bind(this.__eh_showMenu,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU,A,actuate.Method.bind(this.__eh_hideMenu,this));},render:function(A){this.floatPanel.markReportContent();this.floatPanel.scrollToBookmark(A);},activate:function(){var C=this.floatPanel.reportContent;if(!C||!this._viewer.interactive){return ;}var A=this.instance.getAttributeNode("IVHighlight");if(!(this._highlight&&A&&A.value=="true")){actuate.util.Event.stopObserving(C,"click",this.__neh_click_closure);actuate.util.Event.stopObserving(C,"contextmenu",this.__neh_click_closure);actuate.util.Event.observe(C,"click",this.__neh_click_simple_closure,false);}else{actuate.util.Event.observe(C,"click",this.__neh_click_closure,false);actuate.util.Event.observe(C,"contextmenu",this.__neh_click_closure,false);}var B=this.instance.getAttributeNode("IVHoverHighlight");if(this._hoverHighlight&&B&&B.value=="true"){actuate.util.Event.observe(C,"mousemove",this.__neh_mousemove_closure,false);}else{actuate.util.Event.stopObserving(C,"mousemove",this.__neh_mousemove_closure);}actuate.util.Event.observe(this.instance,"click",this.__neh_click_closure,false);actuate.util.Event.observe(this.instance,"contextmenu",actuate.Method.bindAsEventListener(this._neh_contextmenu,this),false);},getNavbarHeight:function(){var A=((this._viewer.navbar&&this._viewer.navbar.visible==true)?this._viewer.navbar.height:0);return A;},_neh_contextmenu:function(A){if(this._viewer.interactive){actuate.util.Event.stop(A);}return ;},hibernate:function(){var C=this.floatPanel.reportContent;if(!C||!this._viewer.interactive){return ;}var A=this.instance.getAttributeNode("IVHighlight");if(!(this._highlight&&A&&A.value=="true")){actuate.util.Event.stopObserving(C,"click",this.__neh_click_simple_closure);}else{actuate.util.Event.stopObserving(C,"click",this.__neh_click_closure);actuate.util.Event.stopObserving(C,"contextmenu",this.__neh_click_closure);}var B=this.instance.getAttributeNode("IVHoverHighlight");if(this._hoverHighlight&&B&&B.value=="true"){actuate.util.Event.stopObserving(C,"mousemove",this.__neh_mousemove_closure);}},__eh_start_up:function(A,I,H){if(this._viewer.standalone){var K="";var M=this._viewer.apiInstance.getReportName();if(M){M=M.replace(/^.*(\\|\/|\:)/,"").replace(".rptdocument","").replace(".rptdesign","");var E=this._viewer.apiInstance.getReportDocument();var F=actuate.util.Utility.isTransient(E);if(F){K=" - "+actuate.util.Utility.getLocalizedString("transient");if(this._viewer.apiInstance.getReportDesign()){K+=" - "+M;}}else{K=" - "+M;}}if(document.title.indexOf(actuate.util.Utility.getLocalizedString("browser.svtitleFlag"))>=0){document.title=actuate.util.Utility.getLocalizedString("browser.svtitle",K);}}var D=null;var N=null;if(H&&H.reportParameters){N=H.reportParameters;var C=new actuate.iv.data.IVParameterValues();for(var G=0;G<N.length;G++){var B=new actuate.iv.data.IVParameterValue();B.setName(N[G].getName());B.setValue(N[G].getValue());B.setValueIsNull(N[G].getValueIsNull());C.addParameterValue(B);}var L=new actuate.iv.data.IVData();D=L.getParameterValues(this._viewer,C);}var J=[];J.push({name:"svg",value:this._viewer.supportSVG?"true":"false"});J.push({name:"dpi",value:actuate.util.Utility.getDPI()});J.push({name:"standalone",value:this._viewer.standalone?"true":"false"});if(H&&H.reportletBookmark){J.push({name:actuate.Constant.oprand.Bookmark,value:H.reportletBookmark});}if(H&&H.gadgetId){J.push({name:"gadgetId",value:H.gadgetId});}I.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_START_UP,[D,J]);this._viewer.eventDispatcher.focusId=this._viewer.id;return true;},__eh_showMenu:function(C,B,A){if(this._viewer.interactive){if(this._viewer.assertNotTimedOut()){this._viewer._contextMenu.showMenu(this._viewer,{left:this._getPointer(A).x,top:this._getPointer(A).y,canDrill:A.canDrill});}}},__eh_hideMenu:function(){var A=this._viewer._contextMenu;if(A){A.hideMenu(this._viewer);}if(this._viewer.toolbar){this._viewer.toolbar.close();}},_getActiveElement:function(D){var B={};var A=D;while(A.className!="floatPanel"){if(A.getAttribute){var F=A.getAttribute("element_type");if(F=="LABEL"){B.type=F;B.target=A;}else{if(F=="DATA"){B.type=F;B.target=A;}else{if(F=="GROUP"){B.type=F;B.target=A;break;}else{if(F==actuate.Constant.element.TABLE||F==actuate.Constant.element.SUMMARYTABLE){if(!B.type||B.type=="LABEL"){B.type=F;B.target=A;}else{B.parent=F;}break;}else{if(F=="Crosstab"){var E=A.getAttribute("id");if(E){if(!B.type||B.type=="DATA"||B.type=="LABEL"){B.type=F;B.target=A;}else{B.parent=F;}break;}}else{if(F=="Chart"){B.type="CHART";B.target=A;break;}else{if(F=="FlashCharts"){B.type="FlashCharts";B.target=A;break;}else{if(F=="FlashGadgets"){B.type="FlashGadgets";B.target=A;break;}else{if(F=="GeneralFlash"){B.type="FlashObject";B.target=A;break;}else{if(F=="EXTENDED"){if(A.className=="birt-chart-design"){B.type="CHART";B.target=A;}else{if(!B.type){B.type=F;B.target=A;}else{B.parent=F;}}break;}}}}}}}}}}}if(A.parentNode){A=A.parentNode;}else{break;}}if(D.childNodes.length>0){for(var C=0;C<D.childNodes.length;C++){if(D.childNodes[C].className=="birt-chart-design"){var F=D.childNodes[C].getAttribute("element_type");if(F=="Chart"){B.type="CHART";B.target=D.childNodes[C];break;}}}}return B;},__neh_mousemove:function(C){if(this._viewer.progressiveViewing||!this._viewer.interactive){return ;}actuate.util.Event.stop(C);var D=actuate.util.Event.pointerX(C);var B=actuate.util.Event.pointerY(C);var A=this._getActiveElement(actuate.util.Event.element(C));if(A.type=="LABEL"&&!A.parent){this._viewer._label.focus(A.target,D,B);A.target.style.cursor="pointer";}else{if(A.type=="DATA"&&(!A.parent||A.parent==actuate.Constant.element.TABLE||A.parent==actuate.Constant.element.SUMMARYTABLE)){this._viewer._dataItem.focus(A.target,D,B);A.target.style.cursor="pointer";}else{if(A.type==actuate.Constant.element.TABLE){this._viewer._table._selectionManager.focus(A.target,D,B);A.target.style.cursor="pointer";}else{if(A.type==actuate.Constant.element.SUMMARYTABLE){this._viewer._summarytable._selectionManager.focus(A.target,D,B);A.target.style.cursor="pointer";}else{if(A.target){A.target.style.cursor="default";}this._viewer._overlay.getMouseOverOverlay().hide();}}}}},__neh_click:function(C){if(this._isCheckboxOrRadio(C)){return ;}var D=this._isHyperlink(C);if(D){if(C.type=="contextmenu"){actuate.util.Event.stop(C);}return ;}if(this._viewer.progressiveViewing||!this._viewer.interactive){return ;}if(!D||!this._isPopupHyperlink(C)){actuate.util.Event.stop(C);}var B=this.instance.getAttributeNode("IVHoverHighlight");if(this._hoverHighlight&&B&&B.value=="true"){this._viewer._overlay.getMouseOverOverlay().hide();}var A=this._getActiveElement(actuate.util.Event.element(C));if(C.type=="contextmenu"){if(A.type){this._viewer.toolbar.close();if(A.id==this._viewer.eventDispatcher.focusId){this._viewer._contextMenu.showMenu(this._viewer,{left:actuate.util.Event.pointerX(C),top:actuate.util.Event.pointerY(C),canDrill:C.canDrill});return ;}else{this._viewer._contextMenu.positionMenu(this._viewer,C);}}else{return ;}}this._viewer._contextMenu.hideMenu(this._viewer);if(A.type=="LABEL"&&!A.parent){this._viewer._label.select(A.target);}else{if(A.type=="DATA"&&(!A.parent||A.parent==actuate.Constant.element.TABLE||A.parent==actuate.Constant.element.SUMMARYTABLE)){this._viewer._dataItem.select(A.target);}else{if(A.type=="CHART"){this._viewer._chart._selectionManager.select(A.target);}else{if(A.type=="FlashCharts"){this._viewer._flashchart._selectionManager.select(A.target,C.type);}else{if(A.type=="FlashGadgets"){this._viewer._flashgadgets._selectionManager.select(A.target);}else{if(A.type=="FlashObject"){this._viewer._flashobject._selectionManager.select(A.target);}else{if(A.type==actuate.Constant.element.TABLE){this._viewer._table._selectionManager.select(A.target,C);}else{if(A.type==actuate.Constant.element.SUMMARYTABLE){this._viewer._summarytable._selectionManager.select(A.target,C);}else{if(A.type=="GROUP"){this._viewer._table._selectionManager.collapseExpand(C);}else{if(A.type=="Crosstab"){this._viewer._crosstab._selectionManager.select(A.target,C);}else{this._viewer._document._selectionManager.select(C);}}}}}}}}}}},__neh_click_simple:function(B){if(this._isHyperlink(B)){return ;}actuate.util.Event.stop(B);var A=this._getActiveElement(actuate.util.Event.element(B));if(A.type=="GROUP"){this._viewer._table._selectionManager.collapseExpand(B);}},_neh_mousewheel:function(B){var C;if(B.wheelDelta){C=B.wheelDelta/120;if(window.opera){C=-C;}}else{if(B.detail){C=-B.detail/3;}}actuate.util.Event.stop(B);var A=Math.round(C)*40;if(A!=0){this.floatPanel.instance.scrollTop-=A;}},__eh_resize:function(){this._updateSize();},_updateSize:function(){var C=this._viewer.width;var A=null;var B=this.getNavbarHeight();A=this._viewer.height-B;this.instance.style.width=C+"px";if(this._viewer._parameterPanel){var G=this._viewer._parameterPanel.isVisible();if(G){var D=this._viewer._parameterPanel.getPanelHeight();A=this._viewer.height-D-B;}}this.instance.style.height=A+"px";if(this._viewer.tocPanel){var F=this._viewer.tocPanel.width;var E=this._viewer.tocPanel.isVisible();C=this._viewer.width-(E?F:0);this.instance.style.left=(E?F+1:0)+"px";}else{C=this._viewer.width;this.instance.style.left="0px";}this.instance.style.width=C+"px";this.floatPanel._updateSize(C,A);},_isPopupHyperlink:function(B){var C=actuate.util.Event.element(B);while(C&&C.tagName){if(!B.ctrlKey&&C.tagName.toUpperCase()=="A"||C.tagName.toUpperCase()=="AREA"){var A=C.getAttribute("target");if(A=="_blank"){return true;}}C=C.parentNode;}return false;},_isSVG:function(){var B="http://www.w3.org/2000/svg";var A=(!!document.createElementNS&&!!document.createElementNS(B,"svg").createSVGRect);return A;},_isCheckboxOrRadio:function(A){var B=actuate.util.Event.element(A);if(this._isSVG()&&B&&B.type){if(B.type=="checkbox"){return true;}if(B.type=="radio"){return true;}}},_isHyperlink:function(E){var G=actuate.util.Event.element(E);while(G&&G.tagName){if(!E.ctrlKey&&G.tagName.toUpperCase()=="A"||G.tagName.toUpperCase()=="AREA"){var B=this._viewer.apiInstance.getUIConfig();if(!this._viewer.standalone&&(!B||(B&&B.openLinkInNewWindow))){var D=G.getAttribute("target");if(D=="_self"){G.setAttribute("target","_blank");}}if(this._viewer.interactive){var F=/^(.*)(GenericRedirector\?)(.*)$/;var A=G.getAttribute("href");if(F.test(A)){G.setAttribute("href",A+"&__launchiv=true");}}return true;}else{var C=G.getAttribute("element_type");if("HTMLButton"==C){return true;}}G=G.parentNode;}return false;},_isHighChart:function(A){var B=actuate.util.Event.element(A);while(B&&B.tagName){if(B.tagName.toUpperCase()=="DIV"&&B.className=="highcharts-container"){return true;}B=B.parentNode;}return false;},updateUIOptions:function(){var A=this._viewer.featureMap;if(A){if(A["Highlight"]!=undefined){this._highlight=A["Highlight"];}if(A["HoverHighlight"]!=undefined){this._hoverHighlight=A["HoverHighlight"];}if(A.Toolbar!=undefined){this._updateSize();}}},_getPointer:function(B){var A=actuate.util.Event.pointerX(B);var C=actuate.util.Event.pointerY(B);return{x:A,y:C};}});actuate.util.Package.define("actuate.iv.ui.mobile.view.contentpanel");actuate.iv.ui.mobile.view.contentpanel.IVContentPanel=actuate.Class.create();actuate.iv.ui.mobile.view.contentpanel.IVContentPanel.prototype=actuate.Class.extend(new actuate.iv.ui.view.IVView(),{floatPanel:null,_highlight:true,_hoverHighlight:true,_isStandardPanel:true,initialize:function(B,A){if(!B){return ;}actuate.iv.ui.view.IVView.prototype.initialize.call(this,B);this.instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"contentPanel");if(this.instance==null){this._createContentPanel();}this.instance.style.overflow="hidden";this.instance.style.position="absolute";this.instance.style.width="100%";this.instance.style.height="100%";this.instance.style.margin="0px";this.instance.style.padding="0px";this.floatPanel=new actuate.iv.ui.mobile.app.IVCarouselPanel(this);this._navbar=this._viewer.navbar;this._pagenavbar=this._viewer.pageNavbar;this.__neh_click_closure=actuate.Method.bindAsEventListener(this.__neh_click,this);this._updateSize();this._installGlobalEventHandlers(this.instance.id);this.instance.style.zIndex=actuate.iv.utility.ivZIndex.CONTENT_PANEL;this._setPanel();},_createContentPanel:function(){var A='<div class="contentPanel" scrollpanel="" paninout="" mousescrolling="" ivhoverhighlight="false" ivhighlight="true" style="position: absolute; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; background-color: white; z-index: 200; overflow-x: auto; overflow-y: auto; height: 962px; left: 0px; width: 1920px; ">'+'<div class="floatPanel" ></div></div>';var B=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");B.innerHTML=B.innerHTML+A;this.instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"contentPanel");},_setPanel:function(){this.instance.style.overflow="hidden";},refresh:function(){if(this._viewer.apiInstance._uiConfig){this._setPanel();}},bind:function(A){this.floatPanel.bind(A);},isRTL:function(){return false;},_installGlobalEventHandlers:function(A){this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_START_UP,A,actuate.Method.bind(this.__eh_start_up,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bindAsEventListener(this.__eh_resize,this));},render:function(A){this.floatPanel.markReportContent();},activate:function(){var A=this.floatPanel.reportContent;if(!A||!this._viewer.interactive){return ;}},hibernate:function(){var A=this.floatPanel.reportContent;if(!A||!this._viewer.interactive){return ;}},__eh_start_up:function(A,I,H){if(this._viewer.standalone){var K="";var M=this._viewer.apiInstance.getReportName();if(M){M=M.replace(/^.*(\\|\/|\:)/,"").replace(".rptdocument","").replace(".rptdesign","");var E=this._viewer.apiInstance.getReportDocument();var F=actuate.util.Utility.isTransient(E);if(F){K=" - "+actuate.util.Utility.getLocalizedString("transient");if(this._viewer.apiInstance.getReportDesign()){K+=" - "+M;}}else{K=" - "+M;}}if(document.title.indexOf(actuate.util.Utility.getLocalizedString("browser.svtitleFlag"))>=0){document.title=actuate.util.Utility.getLocalizedString("browser.svtitle",K);}}var D=null;var N=null;if(H&&H.reportParameters){N=H.reportParameters;var C=new actuate.iv.data.IVParameterValues();for(var G=0;G<N.length;G++){var B=new actuate.iv.data.IVParameterValue();B.setName(N[G].getName());B.setValue(N[G].getValue());B.setValueIsNull(N[G].getValueIsNull());C.addParameterValue(B);}var L=new actuate.iv.data.IVData();D=L.getParameterValues(this._viewer,C);}var J=[];J.push({name:"dpi",value:actuate.util.Utility.getDPI()});J.push({name:"standalone",value:this._viewer.standalone?"true":"false"});J.push({name:"preload",value:this.floatPanel.getPreloadingPages(0)});J.push({name:"showMargin",value:"true"});if(H&&H.reportletBookmark){J.push({name:"reportletId",value:H.reportletBookmark});}if(H&&H.gadgetId){J.push({name:"gadgetId",value:H.gadgetId});}I.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_START_UP,[D,J]);this._viewer.eventDispatcher.focusId=this._viewer.id;return true;},__keydown:function(A){},__keyup:function(A){},__eh_resize:function(){this._updateSize();},_updateSize:function(){var B=this._viewer.width;var A=this._viewer.height;this.instance.style.width=B+"px";this.instance.style.height=A+"px";B=this._viewer.width;this.instance.style.left="0px";this.instance.style.width=B+"px";},_isHyperlink:function(D){var E=actuate.util.Event.element(D);while(E&&E.tagName){if(!D.ctrlKey&&E.tagName.toUpperCase()=="A"||E.tagName.toUpperCase()=="AREA"){if(!this._viewer.standalone){var C=E.getAttribute("target");if(C=="_self"){E.setAttribute("target","_blank");}}var A=E.getAttribute("href");if(A!=null&&A.indexOf("GenericRedirector")>-1){}return true;}else{var B=E.getAttribute("element_type");if("HTMLButton"==B){return true;}}E=E.parentNode;}return false;}});actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVMask=actuate.Class.create();actuate.iv.ui.app.IVMask.prototype={_consumer:null,zIndexStack:[],zIndexBase:1000,zIndexCurrent:null,_opacity:0,_mask:null,initialize:function(){this.zIndexCurrent=this.zIndexBase;this._mask=document.createElement("div");document.body.appendChild(this._mask);this._mask.style.position="absolute";this._mask.style.top="0px";this._mask.style.left="0px";this._mask.style.zIndex="200";this._mask.style.backgroundColor="#0044ff";this._mask.style.filter="alpha( opacity="+(this._opacity*100)+")";this._mask.style.opacity=this._opacity;this._mask.scrolling="no";this._mask.marginHeight="0px";this._mask.marginWidth="0px";this._mask.style.display="none";actuate.util.Event.observe(this._mask,"click",actuate.Method.bindAsEventListener(this._neh_click,this),false);actuate.util.Event.observe(this._mask,"contextmenu",actuate.Method.bindAsEventListener(this._neh_stopEvent,this),false);actuate.util.Event.observe(window,"resize",actuate.Method.bindAsEventListener(this._eh_resize,this),false);},getMaskInstance:function(){return this._mask;},show:function(B){this._consumer=B;if(this.zIndexStack.length==0){actuate.util.Element.show(this._mask);}this._mask.style.width=this._consumer.getClientWidth()+"px";this._mask.style.height=this._consumer.getClientHeight()+"px";this._mask.style.zIndex=this.zIndexCurrent;this.zIndexStack.push(this.zIndexCurrent);this.zIndexCurrent++;var A=this.zIndexCurrent;this.zIndexCurrent++;return A;},hide:function(){this._consumer=null;if(this.zIndexStack.length<1){return ;}else{if(this.zIndexStack.length==1){actuate.util.Element.hide(this._mask);this.zIndexStack.pop();this.zIndexCurrent=this.zIndexBase;}else{this.zIndexCurrent=this.zIndexStack.pop();this._mask.style.zIndex=this.zIndexStack[this.zIndexStack.length-1];}}this._mask.style.backgroundColor="#0044ff";this._mask.style.filter="alpha( opacity="+(this._opacity*100)+")";this._mask.style.opacity=this._opacity;},_eh_resize:function(){if(this._consumer){var B=document.body.clientWidth;var A=this._consumer.getClientHeight();this._mask.style.width=B+"px";this._mask.style.height=A+"px";}},_neh_stopEvent:function(A){actuate.util.Event.stop(A);},_neh_click:function(A){actuate.util.Event.stop(A);if(this._consumer){this._consumer._helper._contextMenu.hideMenu(this._consumer._helper);}}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVProgressMask=actuate.Class.create();actuate.iv.ui.app.IVProgressMask.prototype={_viewer:null,zIndexBase:1000,zIndexCurrent:null,_opacity:0,_progressBarMask:null,initialize:function(){this.zIndexCurrent=this.zIndexBase;this._progressBarMask=document.createElement("div");document.body.appendChild(this._progressBarMask);this._progressBarMask.style.position="absolute";this._progressBarMask.style.top="0px";this._progressBarMask.style.left="0px";this._progressBarMask.style.zIndex="200";this._progressBarMask.style.backgroundColor="#FFFFFF";this._progressBarMask.style.filter="alpha( opacity="+(this._opacity*100)+")";this._progressBarMask.style.opacity=this._opacity;this._progressBarMask.scrolling="no";this._progressBarMask.marginHeight="0px";this._progressBarMask.marginWidth="0px";this._progressBarMask.style.display="none";actuate.util.Event.observe(window,"resize",actuate.Method.bindAsEventListener(this._eh_resize,this),false);},_eh_resize:function(){if(this._consumer){var B=document.body.clientWidth;var A=this._consumer.getClientHeight();this._mask.style.width=B+"px";this._mask.style.height=A+"px";this._progressBarMask.style.width=B+"px";this._progressBarMask.style.height=A+"px";}},show:function(A){this._viewer=A;actuate.util.Element.show(this._progressBarMask);window.status=actuate.util.Utility.getLocalizedString("mask.progress.wait");this._progressBarMask.style.cursor="wait";if(this._viewer.standalone){this._progressBarMask.style.width=A.clientWidth+"px";this._progressBarMask.style.height=A.clientHeight+"px";}else{this._progressBarMask.style.width=document.body.clientWidth+"px";this._progressBarMask.style.height=document.body.clientHeight+"px";}this._progressBarMask.style.zIndex=this.zIndexCurrent;return(this.zIndexCurrent+1);},hide:function(){window.status="";this._progressBarMask.style.cursor="default";actuate.util.Element.hide(this._progressBarMask);},isVisible:function(){return actuate.util.Element.visible(this._progressBarMask);}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVClientPollingManager=actuate.Class.create();actuate.iv.ui.app.IVClientPollingManager.prototype={_viewer:null,_count:0,_timer:null,_cb_bind_closure:null,initialize:function(A){this._viewer=A;this._cb_bind_closure=actuate.Method.bindAsEventListener(this.processBind,this);},processBind:function(){window.clearTimeout(this._timer);this._timer=null;this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GET_PAGE_COUNT);},toggle:function(A){this._viewer.setProgressiveViewing(A);if(A){if(this._timer==null){var B=200;if(this._count>0&&this._count<=10){B=1000;}else{if(this._count>10&&this._count<=20){B=2000;}else{if(this._count>20){B=(this._count-18)*1000;}}}this._timer=window.setTimeout(this._cb_bind_closure,B);if(this._count<30){this._count++;}}else{}}else{window.clearTimeout(this._timer);this._timer=null;this._count=0;}}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVTimerManager=actuate.Class.create();actuate.iv.ui.app.IVTimerManager.prototype={_viewer:null,__notCompleteFlag:false,initialize:function(A){this._viewer=A;this.blink_closure=actuate.Method.bindAsEventListener(this.blinkTotalPage,this);this.interval=null;this.menuInterval=null;this.__obj=null;},blinkTotalPage:function(){var A=this._viewer.navbar._oTotalPage;if(A){A.setVisibility(A.hidden);}},setTimer:function(A){if(A){this.interval=setInterval(function(){A();},350);}else{this.interval=setInterval(this.blink_closure,350);}},clearTimer:function(){if(this.interval!=null){clearInterval(this.interval);}}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVNavigationBar=actuate.Class.create();actuate.iv.ui.app.IVNavigationBar.prototype={_viewer:null,instance:null,visible:true,height:45,_oGotoPage:null,_pollingManager:null,_toolbarBtn:null,_brsEdit:null,_oUndo:null,_undoBtn:null,_oRedo:null,_redoBtn:null,_pagenavigation:null,_operationStack:0,_originalStack:-1,_notUndoStack:0,_left:null,_top:null,initialize:function(G){this._viewer=G;this.instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"navbar");if(!this.instance){return ;}if(actuate.util.Utility.isIE8){actuate.util.Utility.fixIE8ImageButtons(this.instance);}var F="actuate.iv.ui.app.IVNavigationBar";var A=F.replace(/\./g,"_").replace("IV","iv");this._pagenavigation=document.getElementById(A+"_pagenavigation");this._pollingManager=new actuate.iv.ui.app.IVClientPollingManager(this._viewer);this._oUndo=false;this._oRedo=false;this._oGotoPage=new actuate.uiadapter.TextField({cls:"navbar_input_goto",inputCls:"navbar_input_goto",enableKeyEvents:true,height:"20px"});this._oTotalPage=new actuate.widget.form.Label({cls:"navbar_totalPage",hideMode:"visibility"});this._viewer.currentPage=null;this._oTotalPage.render(actuate.util.Element.getElement(this.instance,"div",A+"_totalPage"));this._oTotalPage.setText("0");var E=actuate.util.Element.getElement(this.instance,"span",A+"_gotoPage");this._oGotoPage.render(E);E.children[0].className="actuate-form-field navbar_input_goto";this._oGotoPage.setValue(E.getAttribute("value")||"");this._neh_mouseclick_c=actuate.Method.bindAsEventListener(this._neh_mouseclick,this);this._neh_mouseover_c=actuate.Method.bindAsEventListener(this._neh_mouseOver,this);this._neh_mouseout_c=actuate.Method.bindAsEventListener(this._neh_mouseOut,this);this.afterWarningHideFlag="false";this.timerManager=new actuate.iv.ui.app.IVTimerManager(this._viewer);var B=this.instance.getElementsByTagName("input");if(B){for(var D=0;D<B.length;D++){var C=B[D].getAttribute("name");if(C=="redoimg"){this._redoBtn=B[D];this._redoBtn.style.display="none";}else{if(C=="undoimg"){this._undoBtn=B[D];this._undoBtn.style.display="none";}else{if(C=="ToolbarBtn"){this._toolbarBtn=B[D];}else{if(C=="BrsEdit"){this._brsEdit=B[D];}}}}}}this.NavigationBar_ReportName=document.getElementById("NavigationBar_ReportName");this.NavigationBar_ReportName_Lable=this.NavigationBar_ReportName.children[0];this._positionHandle();this._eh_resize_c=actuate.Method.bindAsEventListener(this._eh_resize,this);this._cb_installEventHandlers(this.instance.id);},_cb_installEventHandlers:function(D){var A=this.instance.getElementsByTagName("input");if(A){for(var C=0;C<A.length;C++){var B=A[C].getAttribute("name");if(B!="redoimg"&&B!="undoimg"&&B!="ToolbarBtn"){actuate.util.Event.observe(A[C],"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(A[C],"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(A[C],"mouseout",this._neh_mouseout_c,false);}}}this._oGotoPage.registerEventHandler("keyup",actuate.Method.bind(this.__neh_keyup,this),false);this._oGotoPage.registerEventHandler("keydown",function(F,E){if(E.keyCode==E.RETURN){E.stopEvent();return false;}},false);if(this._toolbarBtn){actuate.util.Event.observe(this._toolbarBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._toolbarBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._toolbarBtn,"mouseout",this._neh_mouseout_c,false);}if(this._BrsEdit){actuate.util.Event.observe(this._BrsEdit,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._BrsEdit,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._BrsEdit,"mouseout",this._neh_mouseout_c,false);}this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,D,this._eh_resize_c);},_neh_mouseOver:function(D){var E=actuate.util.Event.element(D);var B=E.getAttribute("name");var A=this._viewer.currentPage;var C=parseInt(this._oTotalPage.getText());if(E){switch(B){case"undoimg":if(this._oUndo){this._setFocusClass(E);}break;case"redoimg":if(this._oRedo){this._setFocusClass(E);}break;case"First":E.blur();if(A>1){this._setFocusClass(E);}break;case"Previous":E.blur();if(A>1){this._setFocusClass(E);}break;case"Next":E.blur();if(C=="+"||A<C){this._setFocusClass(E);}break;case"ToolbarBtn":this._setFocusClass(E);break;case"Last":this._setFocusClass(E);break;default:}}},_setFocusClass:function(A){if(A&&A.className&&A.className.indexOf("disabled",A.className.length-"disabled".length)==-1){if(A.className.indexOf("_over")<0&&A.className.indexOf("_active")<0){A.className=A.className+"_over";}}},_neh_mouseOut:function(A){var B=actuate.util.Event.element(A);this.setNormalButtonStyle(B);},setNormalButtonStyle:function(A){if(A&&A.className){if(A.className.indexOf("_over",A.className.length-"_over".length)!==-1){A.className=A.className.substr(0,A.className.length-"_over".length);}A.style.textDecoration="none";}},processAction:function(B,A){if(!this.instance){return ;}if("Enable"==A){actuate.util.Event.observe(this._undoBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._undoBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._undoBtn,"mouseout",this._neh_mouseout_c,false);this._undoBtn.style.display="";actuate.util.Event.observe(this._redoBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._redoBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._redoBtn,"mouseout",this._neh_mouseout_c,false);this._redoBtn.style.display="";this._setDocumentTitle(false);}else{if("Close"==A){actuate.util.Event.stopObserving(this._undoBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.stopObserving(this._undoBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.stopObserving(this._undoBtn,"mouseout",this._neh_mouseout_c,false);this._undoBtn.style.display="none";actuate.util.Event.stopObserving(this._redoBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.stopObserving(this._redoBtn,"mouseover",this._neh_mouseclick_c,false);actuate.util.Event.stopObserving(this._redoBtn,"mouseout",this._neh_mouseout_c,false);this._redoBtn.style.display="none";this._setDocumentTitle(true);}}},processBind:function(G,F){if(!this.instance){return ;}var I=this._viewer.getBaseUrl();if(!F){return ;}var J=F.getElementsByTagName("FeatureOptions");if(J&&J.length>0){J=actuate.util.Utility.parseJson(J[0]);}else{J={};}if(this._viewer.interactive==true){if(this._originalStack==-1){if(actuate.common.CacheManager.COMMAND_STACK_RECORD===undefined){this._originalStack=0;}else{this._originalStack=actuate.common.CacheManager.COMMAND_STACK_RECORD;}}if(J.Undo!=null){var K=J.LastCommand?((J.LastCommand=="GetChartBuilder"||J.LastCommand=="GetFlexBuilder"||J.LastCommand=="ApplyTableBuilder")?true:false):false;if(this._viewer.apiInstance._viewingMode&&(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_NORMAL||K)){this._originalStack=J.Undo;var H=J.Undo-J.Redo;this._notUndoStack=H>0?H:0;}this._operationStack=parseInt(J.Undo)-this._originalStack;if(this._operationStack<0){this._operationStack=0;}this._oUndo=(this._operationStack>0)?true:false;if(J.Redo!=null){this._oRedo=J.Undo<(J.Redo+this._notUndoStack)&&J.Undo>=this._originalStack;}}}else{this._originalStack=0;}var E=F.getElementsByTagName("Page");if(E&&E.length>0){var M=F.getElementsByTagName("PageNumber");if(!M&&!M[0]){return ;}this._viewer.currentPage=parseInt(M[0].firstChild.data);this._oGotoPage.setValue(this._viewer.currentPage);var D=F.getElementsByTagName("TotalPage");var C=F.getElementsByTagName("Completed");var L=C.length>0&&"false"==C[0].firstChild.data;var A=L?"+":"";var B=D&&D[0]&&D[0].firstChild.data;this._viewer.totalPage=parseInt(B);this._oTotalPage.setText((B||"?")+" "+A);this._oTotalPage.getEl().dom.style.color=L?"red":"#353535";if(this._toolbarBtn){this._toolbarBtn.disabled=true;}this.handleTotalPageBlink(L);this._pollingManager.toggle(L);}if(this.NavigationBar_ReportName_Lable&&this._viewer._document.documentTitle){this.NavigationBar_ReportName_Lable.innerHTML=this._viewer._document.documentTitle;}this._enableDisableOperations(this.timerManager.__notCompleteFlag);this._movePanel_return();},updateUIOptions:function(){if(!this.instance){return ;}var D=this._viewer.featureMap;var A=this._viewer.apiInstance._viewingMode;if(A==actuate.Constant.ViewingMode.DASHBOARD_NORMAL){this._showHideUndoRedoBtn("hidden");this._brsEdit.style.display="none";this.height=40;}else{this._showHideUndoRedoBtn("visible");var H=this.instance.getElementsByTagName("table");for(var E=0;E<H.length;E++){if(this.visible&&H[E].className=="navbar_layout"){H[E].style.height=this.height+"px";}}}if(D&&D["UndoRedo"]!=undefined&&D["UndoRedo"]==false){this._oUndo=false;this._oRedo=false;if(this._originalStack==-1){if(actuate.common.CacheManager.COMMAND_STACK_RECORD===undefined){this._originalStack=0;}else{this._originalStack=actuate.common.CacheManager.COMMAND_STACK_RECORD;}}D["UndoRedo"]=true;this._updateUndoRedoBtn();}var F=this._getConfigEnabled(this.instance)=="YES";if(D&&D["Toolbar"]!=undefined){F=D["Toolbar"]&&F;}this.visible=F;this._updateMenuItemByAPI(this.instance,this.visible);var C=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"content");if(C){if(this.visible){C.style.top=this.height+"px";}else{C.style.top="0px";this._viewer.toolbar._close();}}var B=this._getConfigEnabled(this._toolbarBtn)=="YES";if(D&&D["MainMenu"]!=undefined){B=D["MainMenu"]&&B;}this._updateToolbarBtn(B);var G=this._getConfigEnabled(this._pagenavigation)=="YES";if(D&&D["PageNavigation"]!=undefined){G=D["PageNavigation"]&&G;}this._updateMenuItemByAPI(this._pagenavigation,G);},_updateMenuItemByAPI:function(C,B){var A=B;C.style.display=A?"block":"none";var E=C.getElementsByTagName("input");if(E&&E.length>0){E[3].style.dislay=A?"block":"none";E[3].style.visibility=A?"visible":"hidden";}var D=C.getElementsByTagName("span");if(D&&D.length>0){D[0].style.visibility=A?"visible":"hidden";}},_updateUndoRedoBtn:function(){if(!this.instance){return ;}this._toggleImageButton(this._undoBtn,this.timerManager.__notCompleteFlag&&this._oUndo);this._toggleImageButton(this._redoBtn,this.timerManager.__notCompleteFlag&&this._oRedo);},_showHideUndoRedoBtn:function(A){this._undoBtn.style.visibility=A;this._redoBtn.style.visibility=A;},_toggleImageButton:function(B,A){B.className=A?(B.getAttribute("ENABLED_ON")+""):B.getAttribute("ENABLED_OFF");},_getConfigEnabled:function(B){var A="NO";var C=B.getAttributeNode("CONFIGENABLED");if(C){A=C.value;}return A;},_updateToolbarBtn:function(A){this._toolbarBtn.style.visibility=A?"visible":"hidden";this._brsEdit.style.visibility=A?"visible":"hidden";if(A){actuate.util.Event.observe(this._toolbarBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._toolbarBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._toolbarBtn,"mouseout",this._neh_mouseout_c,false);actuate.util.Event.observe(this._brsEdit,"click",this._neh_mouseclick_c,false);actuate.util.Event.observe(this._brsEdit,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(this._brsEdit,"mouseout",this._neh_mouseout_c,false);}else{this._viewer.toolbar._close();actuate.util.Event.stopObserving(this._toolbarBtn,"click",this._neh_mouseclick_c,false);actuate.util.Event.stopObserving(this._toolbarBtn,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.stopObserving(this._toolbarBtn,"mouseout",this._neh_mouseout_c,false);actuate.util.Event.stopObserving(this._brsEdit,"click",this._neh_mouseclick_c,false);actuate.util.Event.stopObserving(this._brsEdit,"mouseover",this._neh_mouseover_c,false);actuate.util.Event.stopObserving(this._brsEdit,"mouseout",this._neh_mouseout_c,false);}},handleTotalPageBlink:function(A){if(A){if(this.timerManager.__notCompleteFlag==false){this.timerManager.setTimer();}this.timerManager.__notCompleteFlag=true;}else{if(this._toolbarBtn){this._toolbarBtn.disabled=false;}if(this._undoBtn){this._undoBtn.disabled=false;}if(this._redoBtn){this._redoBtn.disabled=false;}this.timerManager.__notCompleteFlag=false;this._oTotalPage.show();this.timerManager.clearTimer();}},_showNavBar:function(){if(!this.instance){return ;}this.instance.style.display="block";},_hideNavBar:function(){if(!this.instance){return ;}this.instance.style.display="none";},enable:function(){if(!this.instance){return ;}this.instance.disabled=false;},disable:function(){if(!this.instance){return ;}this.instance.disabled=true;},_enableDisableOperations:function(F){if(!this.instance){return ;}this._toggleImageButton(this._undoBtn,this._oUndo);this._undoBtn.disabled=F;this._toggleImageButton(this._redoBtn,this._oRedo);this._redoBtn.disabled=F;var A=this._viewer.currentPage;var E=parseInt(this._oTotalPage.getText());var B=this.instance.getElementsByTagName("input");if(B){for(var D=0;D<B.length;D++){var C=B[D].getAttribute("name");if(C=="Previous"){this._toggleImageButton(B[D],A>1);}else{if(C=="First"){this._toggleImageButton(B[D],A>1);}else{if(C=="Next"){this._toggleImageButton(B[D],A<E);}else{if(C=="Last"){this._toggleImageButton(B[D],A<E);}}}}}}},_neh_mouseclick:function(F){actuate.util.Event.stop(F);this._left=actuate.util.Event.pointerX(F);this._top=actuate.util.Event.pointerY(F);if(!this._viewer.assertNotTimedOut()||actuate.widget.custom.flash.FlashWrapperManager.isPending()){return ;}var A=this._viewer.currentPage;var D=(this._oTotalPage.getText()=="+")?"+":parseInt(this._oTotalPage.getText());this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var G=actuate.util.Event.element(F);var C=G.getAttribute("name");if(G){switch(C){case"undoimg":if(this._oUndo){G.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_UNDO);}break;case"redoimg":if(this._oRedo){G.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_REDO);}break;case"First":G.blur();if(A>1){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:1,refreshToc:false});}break;case"Previous":G.blur();if(A>1){var E=[{name:"page",value:A-1,refreshToc:false}];this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,E);}break;case"Next":G.blur();if(D=="+"||A<D){var E=[{name:"page",value:A+1,refreshToc:false}];this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,E);}break;case"Last":G.blur();if(D=="+"||A<D){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:D,refreshToc:false});}break;case"Go":this._handle_goto();break;case"ToolbarBtn":var B=this._viewer.featureMap;if(!B||B["EditReport"]!=false||B["SaveDesign"]!=false||B["SaveDocument"]!=false||B["Print"]!=false||B["ExportReport"]!=false||B["ExportData"]!=false||B["Toc"]!=false||B["Parameter"]!=false||B["FacebookComments"]!=false||B["HideShowItems"]!=false||B["ToolbarHelp"]!=false||B["LinkToThisPage"]!=false){G.blur();G.className="actuateCSSSprite_firstload actuateIV_start_active";this._openToolbar(G);}break;default:break;}}},_openToolbar:function(A){this._viewer.toolbar.processBind({left:this._left,top:this._top,menuobj:A});},__neh_keyup:function(B,A){A.stopEvent();if(A.keyCode==A.RETURN){if(this.afterWarningHideFlag=="false"){this._viewer._document._selectionManager._previousWarningFocusObj=this._oGotoPage.getEl().dom;B.blur();this._handle_goto();}else{this.afterWarningHideFlag="false";}}else{if(A.keyCode==A.ESC){this._oGotoPage.setValue(this._viewer.currentPage);this._viewer._document._selectionManager._previousWarningFocusObj=this._oGotoPage.getEl().dom;}}},_handle_goto:function(){var B=(this._oTotalPage.getText()=="+")?"+":parseInt(this._oTotalPage.getText());var D=-1;var A=this._oGotoPage.getValue();if(A!=null&&actuate.util.String.trim(A).length>0){var C=A.match(/^(\s*)[0-9]*(\s*)$/);if(C){D=parseInt(A);}}if(D>0&&D<=B){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:D,refreshToc:false});}else{this._oGotoPage.setValue(this._viewer.currentPage);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("error.navigationbar.invalidPageNumber"));this._viewer._document._selectionManager._previousWarningFocusObj=this._oGotoPage.getEl().dom;}},_eh_resize:function(){this._positionHandle();},_positionHandle:function(A){if(!this.instance){return ;}this.instance.style.width=this._viewer.width+"px";},_movePanel_return:function(){this._viewer.contentPanel.floatPanel.instance.style.top=0+"px";this._viewer.contentPanel.floatPanel.instance.style.left=0+"px";},_setDocumentTitle:function(A){if(this._viewer&&this._viewer._document){if(!A){this._viewer._document._setTitle(actuate.util.Utility.getLocalizedString("browser.ivtitleShortFlag"));}else{this._viewer._document._setTitle(actuate.util.Utility.getLocalizedString("browser.svtitleFlag"));}}}};actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVNavigationBar=actuate.Class.create();actuate.iv.ui.mobile.app.IVNavigationBar.prototype={_viewer:null,instance:null,visible:true,height:30,_oGotoPage:null,_pollingManager:null,_toolbarBtn:null,_oUndo:null,_undoBtn:null,_oRedo:null,_redoBtn:null,_pagenavigation:null,_operationStack:0,_originalStack:-1,_close_button_img:null,_toolbar_button_img:null,_toc_button_img:null,initialize:function(D){if(this.__extending){return ;}this._viewer=D;var B="actuate.iv.ui.mobile.app.IVNavigationBar";var A=B.replace(/\./g,"_").replace("IV","iv");this._pollingManager=new actuate.iv.ui.app.IVClientPollingManager(this._viewer);this.afterWarningHideFlag="false";this.timerManager=new actuate.iv.ui.app.IVTimerManager(this._viewer);var C=actuate.getDefaultIportalUrl();this._close_button_img=new Image();this._close_button_img.src=C+"iv/images/tomerge/firstload/navbar/icon-back1.png";this._toolbar_button_img=new Image();this._toolbar_button_img.src=C+"iv/images/tomerge/firstload/navbar/MOB_File.png";this._toc_button_img=new Image();this._toc_button_img.src=C+"iv/images/tomerge/firstload/navbar/MOB_TOC.png";},getTocBtnId:function(){return"actuate_iv_mobile_navbar_tocBtn";},getToolbarBtnId:function(){return"actuate_iv_mobile_navbar_toolbarBtn";},_adjustIconUI:function(A){if(A){A.style.width="35px";A.style.height="30px";A.style.marginTop="-8px";}},_showCtxShortcuts:function(A,B){},processAction:function(B,A){if(!this.instance){return ;}},_cb_installEventHandlers:function(){this._neh_closeclick_c=actuate.Method.bindAsEventListener(this._neh_closeclick,this);if(this._closeBtn){this._closeBtn.registerEventHandler("click",this._neh_closeclick_c);}this._neh_tocbtnclick_c=actuate.Method.bindAsEventListener(this._neh_tocbtnclick,this);if(this._tocBtn){this._tocBtn.registerEventHandler("click",this._neh_tocbtnclick_c);}this._neh_toolbarclick_c=actuate.Method.bindAsEventListener(this._neh_toolbarclick,this);if(this._toolbarBtn){this._toolbarBtn.registerEventHandler("click",this._neh_toolbarclick_c);}},processBind:function(G,F){G.pageNavbar.processBind(G,F);if(!this.instance){return ;}var H=this._viewer.getBaseUrl();if(!F){return ;}var I=F.getElementsByTagName("FeatureOptions");if(I&&I.length>0){I=actuate.util.Utility.parseJson(I[0]);}else{I={};}if(this._viewer.interactive==true){if(this._originalStack==-1){this._originalStack=actuate.common.CacheManager.COMMAND_STACK_RECORD;}if(I.Undo!=null){this._operationStack=parseInt(I.Undo)-this._originalStack;if(this._operationStack<0){this._operationStack=0;}}this._oUndo=(this._operationStack==0)?false:true;this._oRedo=I.Redo!=null&&I.Undo<I.Redo&&I.Undo>=this._originalStack;}else{this._originalStack=0;}var D=F.getElementsByTagName("Page");if(D&&D.length>0){var L=F.getElementsByTagName("PageNumber");if(!L&&!L[0]){return ;}this._viewer.currentPage=parseInt(L[0].firstChild.data);var E=F.getElementsByTagName("TotalPage");var C=F.getElementsByTagName("Completed");var J=C.length>0&&"false"==C[0].firstChild.data;if(E[0].firstChild.data>this._viewer.pageLimit*1&&this._viewer.interactive==false){this._viewer.reachPageLimit=true;}var A=J?"+":"";var B=E&&E[0]&&E[0].firstChild.data;this._viewer.totalPage=parseInt(B);if(this._toolbarBtn){this._toolbarBtn.disable();}this.handleTotalPageBlink(J);this._pollingManager.toggle(J);}var K=this._viewer.apiInstance.getReportName();if(K&&K.length>0){K=K.replace(/^.*(\\|\/|\:)/,"").replace(".rptdocument","").replace(".rptdesign","");this._reportLabel.innerHTML=K;}this._movePanel_return();},handleTotalPageBlink:function(A){if(A){if(this.timerManager.__notCompleteFlag==false){this.timerManager.setTimer();}this.timerManager.__notCompleteFlag=true;}else{if(this._toolbarBtn){this._toolbarBtn.enable();}if(this._undoBtn){this._undoBtn.enable();}if(this._redoBtn){this._redoBtn.enable();}this.timerManager.__notCompleteFlag=false;this.timerManager.clearTimer();}},updateUIOptions:function(){},_updateMenuItemByAPI:function(B,A){},_toggleImageButton:function(B,A){},_showNavBar:function(){if(!this.instance){return ;}this.instance.style.top="0px";this.instance.style.display="block";},_hideNavBar:function(){if(!this.instance){return ;}this.instance.style.display="none";},enable:function(){if(!this.instance){return ;}this.instance.disabled=false;if(this._toolbarBtn){this._toolbarBtn.enable();}if(this._closeBtn){this._closeBtn.enable();}if(this._tocBtn){this._tocBtn.enable();}if(this._openRecentBtn){this._openRecentBtn.enable();}},disable:function(){if(!this.instance){return ;}this.instance.disabled=true;if(this._toolbarBtn){this._toolbarBtn.disable();}if(this._closeBtn){this._closeBtn.disable();}if(this._tocBtn){this._tocBtn.disable();}if(this._openRecentBtn){this._openRecentBtn.disable();}},_enableDisableOperations:function(A){if(!this.instance){return ;}},_neh_closeclick:function(){if(actuate.util.browser&&actuate.util.browser.isNativeApp()){window.location="gotomydocuments://"+actuate.getDefaultIportalUrl()+"mobile.html";}else{window.location=actuate.getDefaultIportalUrl()+"mobile.html";}},_neh_toolbarclick:function(B){actuate.util.Event.stop(B);if(!this._viewer.assertNotTimedOut()){return ;}this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var A=this._viewer.featureMap;if(A["Print"]!=false||A["ExportReport"]!=false||A["ExportData"]!=false||A["Toc"]!=false){this._openToolbar();}},_neh_tocbtnclick:function(){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_TOC);},_neh_openRecentbtnclick:function(){window.location="myrecent://";},_commonButtonClick:function(A){actuate.util.Event.stop(A);if(!this._viewer.assertNotTimedOut()){return ;}this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);},_openToolbar:function(){this._viewer.toolbar.processBind();},_eh_resize:function(){this._positionHandle();},_positionHandle:function(A){if(!this.instance){return ;}this.instance.style.width=this._viewer.width+"px";},_movePanel_return:function(){this._viewer.contentPanel.floatPanel.instance.style.top=0+"px";this._viewer.contentPanel.floatPanel.instance.style.left=0+"px";}};actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVNavigationBarForPhone=actuate.Class.extendClass(actuate.iv.ui.mobile.app.IVNavigationBar,{initialize:function(C){actuate.iv.ui.mobile.app.IVNavigationBarForPhone.superclass.initialize.call(this,C);var B=document.createElement("div");var A=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");A.appendChild(B);B.className="new_navbar";B.style.position="absolute";B.style.backgroundImage='url("'+actuate.getDefaultIportalUrl()+'iv/images/bgimages/navbar_mob.png")';B.style.backgroundRepeat="repeat-x";B.style.top="0px";B.style.left="0px";B.style.width="100%";B.style.height="40px";B.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;var D=document.createElement("label");D.innerHTML="";D.style.position="absolute";D.style.width="100%";D.style.paddingTop="8px";D.style.textAlign="center";B.appendChild(D);this._reportLabel=D;this.instance=B;this._initButtons();this._hideNavBar();this._cb_installEventHandlers();},_initButtons:function(){var C=actuate.getDefaultIportalUrl();var A=document.createElement("table");this.instance.appendChild(A);var B=document.createElement("tr");A.appendChild(B);var D=document.createElement("td");D.style.width="34px";D.style.height="34px";D.style.paddingLeft="5px";D.id="actuate_iv_mobile_navbar_closeBtn";B.appendChild(D);this._closeBtn=new actuate.uiadapter.Button({style:"width:34px;height:34px !important;opacity:0.8;position:relative;background:none;border:0;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._closeBtn.setIcon(C+"iv/images/tomerge/firstload/navbar/icon-back1.png");this._closeBtn.render(D);this._adjustIconUI(this._closeBtn.buttonEl.iconEl.dom);D=document.createElement("td");D.style.width="34px";D.style.height="34px";D.id="actuate_iv_mobile_navbar_toolbarBtn";B.appendChild(D);this._toolbarBtn=new actuate.uiadapter.Button({style:"width:34px;height:34px !important;opacity:0.8;position: relative;border:0;background:none;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._toolbarBtn.setIcon(C+"iv/images/tomerge/firstload/navbar/MOB_File.png");this._toolbarBtn.render(D);this._adjustIconUI(this._toolbarBtn.buttonEl.iconEl.dom);D=document.createElement("td");D.style.width="34px";D.style.height="34px";D.id="actuate_iv_mobile_navbar_tocBtn";B.appendChild(D);this._tocBtn=new actuate.uiadapter.Button({style:"width:34px;height:34px !important;opacity:0.8;position: relative;border:0;background:none;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._tocBtn.setIcon(C+"iv/images/tomerge/firstload/navbar/MOB_TOC.png");this._tocBtn.render(D);this._adjustIconUI(this._tocBtn.buttonEl.iconEl.dom);}});actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVNavigationBarForTablet=actuate.Class.extendClass(actuate.iv.ui.mobile.app.IVNavigationBar,{initialize:function(C){actuate.iv.ui.mobile.app.IVNavigationBarForTablet.superclass.initialize.call(this,C);var B=document.createElement("div");var A=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");A.appendChild(B);B.className="new_navbar";B.style.position="absolute";B.style.backgroundImage='url("'+actuate.getDefaultIportalUrl()+'iv/images/bgimages/navbar_mob.png")';B.style.backgroundRepeat="repeat-x";B.style.top="0px";B.style.left="0px";B.style.width="100%";B.style.height="50px";B.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;var D=document.createElement("label");D.innerHTML="";D.style.position="absolute";D.style.width="100%";D.style.paddingTop="12px";D.style.textAlign="center";B.appendChild(D);this._reportLabel=D;this.instance=B;this._initButtons();this._initOpenRecentButton();this._hideNavBar();this._cb_installEventHandlers();},_initButtons:function(){var C=actuate.getDefaultIportalUrl();var A=document.createElement("table");this.instance.appendChild(A);var B=document.createElement("tr");A.appendChild(B);var D=document.createElement("td");D.style.width="44px";D.style.height="44px";D.style.paddingLeft="5px";D.id="actuate_iv_mobile_navbar_closeBtn";B.appendChild(D);this._closeBtn=new actuate.uiadapter.Button({style:"width:44px;height:44px !important;cursor: pointer;position: relative;background:none;border:0;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._closeBtn.setIcon(this._close_button_img.src);this._closeBtn.render(D);this._adjustIconUI(this._closeBtn.buttonEl.iconEl.dom);D=document.createElement("td");D.style.width="44px";D.style.height="44px";D.id="actuate_iv_mobile_navbar_toolbarBtn";B.appendChild(D);this._toolbarBtn=new actuate.uiadapter.Button({style:"width:44px;height:44px !important;cursor: pointer;position: relative;border:0;background:none;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._toolbarBtn.setIcon(this._toolbar_button_img.src);this._toolbarBtn.render(D);this._adjustIconUI(this._toolbarBtn.buttonEl.iconEl.dom);D=document.createElement("td");D.style.width="44px";D.style.height="44px";D.id="actuate_iv_mobile_navbar_tocBtn";B.appendChild(D);this._tocBtn=new actuate.uiadapter.Button({style:"width:44px;height:44px !important;cursor: pointer;position: relative;border:0;background:none;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._tocBtn.setIcon(this._toc_button_img.src);this._tocBtn.render(D);this._adjustIconUI(this._tocBtn.buttonEl.iconEl.dom);},_initOpenRecentButton:function(){var C=actuate.getDefaultIportalUrl();if(actuate.util.browser&&actuate.util.browser.isNativeApp()){if(!this._openRecentBtn){var A=document.createElement("table");A.style.position="absolute";A.style.top="2px";A.style.right="5px";this.instance.appendChild(A);var B=document.createElement("tr");A.appendChild(B);var D=document.createElement("td");D.style.width="44px";D.style.height="44px";D.style.paddingLeft="5px";B.appendChild(D);this._openRecentBtn=new actuate.uiadapter.Button({style:"width:44px;height:44px !important;position:relative;background:none;border:0;padding:0px;padding-top:10px;-webkit-box-shadow:#000000 0 0 0;-webkit-border-radius:0px;"});this._openRecentBtn.setIcon(C+"iv/images/tomerge/firstload/navbar/MOB_openRecent.png");this._openRecentBtn.render(D);this._adjustIconUI(this._openRecentBtn.buttonEl.iconEl.dom);}}},updateUIOptions:function(){actuate.iv.ui.mobile.app.IVNavigationBarForTablet.superclass.updateUIOptions.call(this);},processAction:function(B,A){actuate.iv.ui.mobile.app.IVNavigationBarForTablet.superclass.processAction.call(this,B,A);},_cb_installEventHandlers:function(){actuate.iv.ui.mobile.app.IVNavigationBarForTablet.superclass._cb_installEventHandlers.call(this);this._neh_toolbarclick_c=actuate.Method.bindAsEventListener(this._neh_toolbarclick,this);if(this._toolbarBtn){this._toolbarBtn.registerEventHandler("click",this._neh_toolbarclick_c);}this._neh_openRecentbtnclick_c=actuate.Method.bindAsEventListener(this._neh_openRecentbtnclick,this);if(this._openRecentBtn){this._openRecentBtn.registerEventHandler("click",this._neh_openRecentbtnclick_c);}}});actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVPageNavigationBar=actuate.Class.create();actuate.iv.ui.mobile.app.IVPageNavigationBar.prototype={_viewer:null,_slider:null,_pageDisplayer:null,initialize:function(A){this._viewer=A;this.timerManager=new actuate.iv.ui.app.IVTimerManager(this._viewer);this._pollingManager=new actuate.iv.ui.app.IVClientPollingManager(this._viewer);},_initComponents:function(){var A=new Ext.Template(['			<TABLE id="displaydiv_buttonSpan" WIDTH="100%">','				<TR WIDTH="100%" style="align:center;">','					<TD WIDTH="43.5%"></TD>'+'					<TD WIDTH="11%" style="padding-top:5px;padding-bottom:5px;background-color:gray;color:white;border-radius:4px;text-align:center;box-shadow: 1px 1px 1px #444444;">',"                      Page {currPage} of {totalPage}</TD>",'					<TD WIDTH="43.5%"></TD>',"				</TR>","			</TABLE>"]);A.compile();PageButton=function(B){PageButton.superclass.constructor.call(this,B);};Ext.extend(PageButton,Ext.Button,{setPageInfo:function(B,C){if(this.renderTpl&&this.renderTpl.overwrite){this.renderTpl.overwrite(this.getEl(),{currPage:B,totalPage:C});}}});if(!this._pageDisplayer){this._pageDisplayer=new PageButton({centered:true,width:"100%",renderTo:"page_navbar_displaydiv",baseCls:"new_button",componentCls:"none",renderTpl:A});this._pageDisplayer.show();}this._pageDisplayer.hide();if(!this._slider){this._slider=new actuate.uiadapter.Slider({value:1,minValue:1,maxValue:100,style:"background-color:transparent;"});this._slider.render(this.instance);this._slider.hide();}},_installEventHandlers:function(){this._neh_gotopage_c=actuate.Method.bind(this._gotopage,this);this._neh_updatepageinfo_c=actuate.Method.bind(this._updatepageinfo,this);this._neh__updatepageinfo_OnSwipe_c=actuate.Method.bind(this._updatepageinfo_OnSwipe,this);if(this._slider){this._slider.slider.on("tapend",this._neh_gotopage_c);this._slider.slider.on("drag",this._neh_updatepageinfo_c);this._slider.slider.on("dragend",this._neh_gotopage_c);}if(this._pageDisplayer){this._pageDisplayer.on("beforecardswitch",this._neh__updatepageinfo_OnSwipe_c);}},_gotopage:function(B,A,C){this._viewer.contentPanel.floatPanel.setActivePage(C);},_updatepageinfo:function(B,A,C){var D=C;this._pageDisplayer.setPageInfo(D,this._viewer.totalPage);},_updatepageinfo_OnSwipe:function(B,A,D,C){var E=A.page;if(E){this._pageDisplayer.setPageInfo(E,this._viewer.totalPage);this._viewer.currentPage=E;this._slider.setMaxValue(this._viewer.totalPage);this._slider.setValue(E);}},processBind:function(F,E){if(!this.instance){return ;}if(!E){return ;}var C=E.getElementsByTagName("Page");if(C&&C.length>0){var I=E.getElementsByTagName("PageNumber");if(!I&&!I[0]){return ;}this._viewer.currentPage=parseInt(I[0].firstChild.data);this._viewer.contentPanel.floatPanel.setActivePage(parseInt(this._viewer.currentPage));var D=E.getElementsByTagName("TotalPage");var A=E.getElementsByTagName("Completed");var G=A.length>0&&"false"==A[0].firstChild.data;if(D[0].firstChild.data>this._viewer.pageLimit*1&&this._viewer.interactive==false){this._viewer.reachPageLimit=true;}var B=D&&D[0]&&D[0].firstChild.data;this._viewer.totalPage=parseInt(B);this._pageDisplayer.setPageInfo(this._viewer.currentPage,this._viewer.totalPage);Ext.get("displaydiv_buttonSpan").dom.style.color=G?"red":"black";var H=this;new Ext.util.DelayedTask(function(){this._slider.setMaxValue(this._viewer.totalPage);this._slider.setValue(this._viewer.currentPage);},H).delay(100);this.handleTotalPageBlink(G);this._pollingManager.toggle(G);}},updateOnOrientationChange:function(){var A=Ext.Viewport.getSize().height-50;this.instance.style.top=A+"px";A=A-60;this._pageDisplayDiv.style.top=A+"px";},show:function(){this.instance.style.display="block";this._pageDisplayer.show();this._slider.show();},hide:function(){this.instance.style.display="none";this._pageDisplayer.hide();this._slider.hide();},enable:function(){this.instance.disabled=false;this._slider.enable();},disable:function(){this.instance.disabled=true;this._slider.disable();},handleTotalPageBlink:function(A){if(A){if(this.timerManager.__notCompleteFlag==false){this.timerManager.setTimer(function(){var B=Ext.get("displaydiv_buttonSpan");B.setVisible(B.dom.style.visibility=="hidden");});}this.timerManager.__notCompleteFlag=true;}else{this.timerManager.__notCompleteFlag=false;this.timerManager.clearTimer();}}};actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVPageNavigationBarForPhone=actuate.Class.extendClass(actuate.iv.ui.mobile.app.IVPageNavigationBar,{initialize:function(E){actuate.iv.ui.mobile.app.IVPageNavigationBarForPhone.superclass.initialize.call(this,E);var B=document.createElement("div");var A=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");var C=Ext.Viewport.getSize().height-40;A.appendChild(B);B.className="page_navbar";B.id="page_navbar";B.style.position="absolute";B.style.backgroundImage='url("'+actuate.getDefaultIportalUrl()+'iv/images/bgimages/page_navbar_mob.png")';B.style.backgroundRepeat="repeat-x";B.style.top=C+"px";B.style.left="0px";B.style.width="100%";B.style.height="40px";B.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;var D=document.createElement("div");A.appendChild(D);D.className="page_navbar";D.id="page_navbar_displaydiv";D.style.position="absolute";C=C-50;D.style.top=C+"px";D.style.left="0px";D.style.width="100%";D.style.height="30px";D.style.fontSize="8px";D.style.fontWeight="bold";D.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;this._pageDisplayDiv=D;this.instance=B;this._initComponents();this._installEventHandlers();this.instance.style.display="none";},_initComponents:function(){var A=new Ext.Template(['			<TABLE id="displaydiv_buttonSpan" WIDTH="100%">','				<TR WIDTH="100%" style="align:center;">','					<TD WIDTH="33.5%"></TD>'+'					<TD WIDTH="31%" style="padding-top:5px;padding-bottom:5px;background-color:gray;color:white;border-radius:4px;text-align:center;box-shadow: 1px 1px 1px #444444;">',"                      Page {currPage} of {totalPage}</TD>",'					<TD WIDTH="33.5%"></TD>',"				</TR>","			</TABLE>"]);A.compile();PageButton=function(B){PageButton.superclass.constructor.call(this,B);};Ext.extend(PageButton,Ext.Button,{setPageInfo:function(B,C){if(this.renderTpl&&this.renderTpl.overwrite){this.renderTpl.overwrite(this.getEl(),{currPage:B,totalPage:C});}}});if(!this._pageDisplayer){this._pageDisplayer=new PageButton({centered:true,width:"100%",renderTo:"page_navbar_displaydiv",baseCls:"new_button",componentCls:"none",renderTpl:A});this._pageDisplayer.show();}this._pageDisplayer.hide();if(!this._slider){this._slider=new actuate.uiadapter.Slider({value:1,minValue:1,maxValue:100,style:"background-color:transparent;bottom:6px;"});this._slider.render(this.instance);this._slider.hide();}},updateOnOrientationChange:function(){var A=Ext.Viewport.getSize().height-40;this.instance.style.top=A+"px";A=A-50;this._pageDisplayDiv.style.top=A+"px";}});actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVPageNavigationBarForTablet=actuate.Class.extendClass(actuate.iv.ui.mobile.app.IVPageNavigationBar,{initialize:function(E){actuate.iv.ui.mobile.app.IVPageNavigationBarForTablet.superclass.initialize.call(this,E);var B=document.createElement("div");var A=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");var C=Ext.Viewport.getSize().height-50;A.appendChild(B);B.className="page_navbar";B.id="page_navbar";B.style.position="absolute";B.style.backgroundImage='url("'+actuate.getDefaultIportalUrl()+'iv/images/bgimages/page_navbar_mob.png")';B.style.backgroundRepeat="repeat-x";B.style.top=C+"px";B.style.left="0px";B.style.width="100%";B.style.height="50px";B.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;var D=document.createElement("div");A.appendChild(D);D.className="page_navbar";D.id="page_navbar_displaydiv";D.style.position="absolute";C=C-60;D.style.top=C+"px";D.style.left="0px";D.style.width="100%";D.style.height="40px";D.style.fontSize="11px";D.style.fontWeight="bold";D.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;this._pageDisplayDiv=D;this.instance=B;this._initComponents();this._installEventHandlers();this.instance.style.display="none";}});actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVCancelGadgetGenerationIndicator=actuate.Class.create();actuate.iv.ui.app.IVCancelGadgetGenerationIndicator.prototype={_viewer:null,_cancelButton:null,_continueButton:null,_progressIndicator:null,zIndexBase:1000000,_gadgetId:null,_timeoutMsg:null,_cancelFailedMsg:null,_cancelDialog:null,_uid:null,initialize:function(A){actuate.iv.ui.app.IVCancelGadgetGenerationIndicator._instanceCount+=1;this._uid=actuate.iv.ui.app.IVCancelGadgetGenerationIndicator._instanceCount;this._viewer=A;this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,"cancel",actuate.Method.bind(this._adjustMsgSize,this));},_showTimeoutMsg:function(){if(!actuate.util.Utility.isEmpty(this._viewer,false)){this._viewer.hideProgressIndicator();}this._cancelDialog.hide();if(actuate.util.Utility.isEmpty(this._timeoutMsg,false)){var B=document.createElement("DIV");B.id="timeoutMsg";var A='<img align="left" valign="middle" src="'+this._viewer.apiInstance._iportalUrl+actuate.util.Constants.LOC_IMG_ERROR_ICON+'"/>';B.innerHTML="<p style='margin:30px 2px 2px 20px;'>"+A;B.innerHTML+="<span style='font-size:medium;margin-left:1px;'><b>"+"ERROR!</b></span>"+"</p>";B.innerHTML+="<p style='margin:2px 4px 2px 25px;'>"+actuate.util.Utility.getLocalizedString("cancelDialog.timeout")+"</p>";this._getViewerContainer()[1].appendChild(B);this._setMsgStyle(B);this._timeoutMsg=B;}else{this._timeoutMsg.style.display="block";}},_hideTimeoutMsg:function(){if(!actuate.util.Utility.isEmpty(this._timeoutMsg,false)){this._timeoutMsg.style.display="none";}},_showCancelFailedMsg:function(){if(!actuate.util.Utility.isEmpty(this._viewer,false)){this._viewer.hideProgressIndicator();}this._cancelDialog.hide();if(actuate.util.Utility.isEmpty(this._cancelFailedMsg,false)){var B=document.createElement("DIV");B.id="cancelFailedMsg";var A='<img valign="middle" src="'+this._viewer.apiInstance._iportalUrl+actuate.util.Constants.LOC_IMG_INFO_ICON+'"/>';B.innerHTML="<p style='margin:30px 2px 2px 20px'>"+A+"</p>";B.innerHTML+="<p style='margin:2px 4px 2px 25px;'>"+actuate.util.Utility.getLocalizedString("cancelDialog.cancelled")+"</p>";this._getViewerContainer()[1].appendChild(B);this._setMsgStyle(B);this._cancelFailedMsg=B;}else{this._cancelFailedMsg.style.display="block";}},_setMsgStyle:function(A){A.style.position="absolute";A.style.zIndex=this.zIndexBase;A.style.width=this._getPosition()[0]*2+"px";A.style.height=this._getPosition()[1]*2+"px";A.style.backgroundColor="white";A.style.display="block";},_adjustMsgSize:function(){if(!actuate.util.Utility.isEmpty(this._cancelFailedMsg)&&this._cancelFailedMsg.style.display!="none"){this._setMsgStyle(this._cancelFailedMsg);}},_showCancelDialog:function(){var E=this._initButtons()||null;var B='<div class="actuate-mb-icon actuate-mb-warning" style="height:52px;"></div>';var F='<div class="actuate-mb-content"><span class="actuate-mb-text">'+actuate.util.Utility.getLocalizedString("cancelDialog.warning")+"<br/>"+actuate.util.Utility.getLocalizedString("cancelDialog.warningMsg");"</span></div>";var A='<div class="actuate-window-dlg">'+B+F+"</div>";var B='<img valign="middle" src="'+this._viewer.apiInstance._iportalUrl+actuate.util.Constants.LOC_IMG_WARNING_ICON+'"/>';var C=this;if(!this._cancelDialog){this._cancelDialog=new actuate.widget.Window({id:"cancelDialog"+"_"+C._uid,modal:true,width:300,height:160,footer:false,header:false,title:actuate.util.Utility.getLocalizedString("cancelDialog.title.warning"),draggable:true,resizable:false,closable:true,allowDragOnBody:true,allowDragOnFooter:true,html:A,buttonAlign:"center",buttons:E});}var D=this._getViewerContainer();this._cancelDialog.render(D[0]);this._cancelDialog.x=266;this._cancelDialog.y=195;this._cancelDialog.show();},_initButtons:function(){var A=[];if(actuate.util.Utility.isEmpty(this._cancelButton)){this._cancelButton=new actuate.uiadapter.Button({text:"Cancel",listeners:{click:actuate.Method.bind(this._processCancel,this)}});}if(actuate.util.Utility.isEmpty(this._continueButton)){this._continueButton=new actuate.uiadapter.Button({text:"Continue",listeners:{click:actuate.Method.bind(this._processContinue,this)}});}A.push(this._cancelButton);A.push(this._continueButton);return A;},_hideCancelFailedMsg:function(){if(!actuate.util.Utility.isEmpty(this._cancelFailedMsg)){this._cancelFailedMsg.style.display="none";}},_getViewerContainer:function(){var A=null;if(!actuate.util.Utility.isEmpty(this._viewer,false)){A=actuate.viewer.impl.Constants.PREFIX_CONTAINER_NAME+this._viewer.apiInstance._id;}if(A){theContainer=document.getElementById(A);}if(!theContainer){theContainer=document.body;}return[A,theContainer];},_getPosition:function(){var B=null;var A=null;if(!actuate.util.Utility.isEmpty(this._viewer,false)){B=(this._viewer.width?this._viewer.width:this._viewer.clientWidth)/2;A=(this._viewer.height?this._viewer.height:this._viewer.clientHeight)/2;}else{B=document.documentElement.clientWidth/2;A=document.documentElement.clientHeight/2;}return[B,A];},_processCancel:function(B,D){var C={};if(this._gadgetId){C[actuate.data.impl.OptionKeys.GADGETID]=this._gadgetId;}var A=new Object();A["data"]=C;if(!actuate.util.Utility.isEmpty(this._viewer,false)){this._viewer.eventDispatcher.sendEvent(actuate.iv.core.iVEvent.__E_CANCEL_GADGET_GENERATION,A,true);}this._cancelDialog.hide();},_processContinue:function(){var B={};if(this._gadgetId){B[actuate.data.impl.OptionKeys.GADGETID]=this._gadgetId;}var A=new Object();A["data"]=B;if(!actuate.util.Utility.isEmpty(this._viewer,false)){this._viewer.hideProgressIndicator();this._viewer.eventDispatcher.sendEvent(actuate.iv.core.iVEvent.__E_GETPAGE,A,true);}this._cancelDialog.hide();},processBind:function(B,A){if(A&&A.WaitForCancel){this._gadgetId=A.GadgetId;this._showCancelDialog();this._hideCancelFailedMsg();this._hideTimeoutMsg();}if(A&&A.CancelStatus&&A.CancelStatus=="failed"){this._gadgetId=A.GadgetId;this._showCancelFailedMsg();}if(A&&A.CancelStatus&&A.CancelStatus=="successful"){this._gadgetId=A.GadgetId;this._showCancelFailedMsg();}}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVTimedObject=actuate.Class.create();actuate.iv.ui.app.IVTimedObject.prototype={_timer:null,initialize:function(){this._timer=null;this._object_mouseover_c=actuate.Method.bindAsEventListener(this._object_mouseover,this);this._object_mouseout_c=actuate.Method.bindAsEventListener(this._object_mouseout,this);this._objectClose_c=actuate.Method.bindAsEventListener(this._objectClose,this);},_setTimer:function(A){this._clearTimer();if(A){this._timer=setInterval(this._objectClose_c,parseInt(A));}else{this._timer=setInterval(this._objectClose_c,1000);}},_clearTimer:function(){if(this._timer!=null){clearInterval(this._timer);}},_object_mouseover:function(){this._clearTimer();},_object_mouseout:function(){this._setTimer(1000);},_objectClose:function(){this._close();},_close:function(){}};actuate.util.Package.define("actuate.iv.ui.app");actuate.iv.ui.app.IVGlobalToolbar=actuate.Class.create();actuate.iv.ui.app.IVGlobalToolbar.prototype=actuate.Class.extend(new actuate.iv.ui.app.IVTimedObject(),{_viewer:null,_instance:null,_toolbarDiv:null,_currentHighlighted:null,_visible:false,_shadow:null,initialize:function(C){this._viewer=C;this._visible=false;this._instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"toolbar_outermostDiv");if(!this._instance){return ;}actuate.iv.ui.app.IVTimedObject.prototype.initialize.call(this);if(actuate.util.Utility.isIE8){actuate.util.Utility.fixIE8ImageButtons(this._instance);}var A=this._instance.childNodes;for(var B=0;B<A.length;B++){if(A[B].className=="toolbar_menuDiv"){this._toolbarDiv=A[B];}}if(actuate.util.Utility.isIE8){this._shadow=new actuate.util.Shadow({mode:"frame"});}this._instance.style.zIndex=actuate.iv.utility.ivZIndex.NAVBAR;this._installEventHandlers();},_installEventHandlers:function(){actuate.util.Event.observe(this._toolbarDiv,"mouseout",this._object_mouseout_c,false);actuate.util.Event.observe(this._toolbarDiv,"mouseover",this._object_mouseover_c,false);this._neh_click_c=actuate.Method.bindAsEventListener(this._neh_click,this);this._neh_mouseover_c=actuate.Method.bindAsEventListener(this._neh_mouseover,this);this._neh_mouseout_c=actuate.Method.bindAsEventListener(this._neh_mouseout,this);var B=this._instance.getElementsByTagName("DIV");if(B){for(var A=0;A<B.length;A++){if(B[A].getAttribute("name")){actuate.util.Event.observe(B[A],"click",this._neh_click_c,false);actuate.util.Event.observe(B[A],"mouseover",this._neh_mouseover_c,false);actuate.util.Event.observe(B[A],"mouseout",this._neh_mouseout_c,false);}}}},processBind:function(C){this._visible=true;if(!this._instance){return ;}var B=this._viewer.navbar.instance;this._instance.style.width=this._getWidth()+"px";this._instance.style.height=this._getHeight()-B.offsetTop+"px";this._toolbarDiv.style.left=16+"px";this._toolbarDiv.style.top="1px";var A=this._viewer.apiInstance._viewingMode;this._toolbarDiv.style.top=(A==actuate.Constant.ViewingMode.DASHBOARD_NORMAL?-10:1)+"px";this._instance.style.left="";this._instance.style.top="";this._instance.style.display="";this._viewer.apiInstance.pushActiveStack(this);this._enableDisableOperations();this._currentHighlighted=null;if(this._shadow){this._shadow.show(this._toolbarDiv);}this._setTimer(10000);if(C.menuobj){this.menuobj=C.menuobj;}},SetupFeatureOptions:function(C){if(!this._instance){return ;}if(C){var B=this._instance.getElementsByTagName("DIV");for(var D=0;D<B.length;D++){var E=B[D].getAttributeNode("OPT");if(E){if(E.value=="SaveDesign"||E.value=="SaveDocument"){var A=C[E.value];if(A!=undefined&&A!=null){B[D].dynamicConfig=A?"YES":"NO";}}}}}},_getWidth:function(){return this._viewer.width;},_getHeight:function(){return this._viewer.height;},_getConfigEnabled:function(B){var A="NO";var C=B.getAttributeNode("CONFIGENABLED");if(C){A=C.value;}return(A=="YES")&&!(B.dynamicConfig&&B.dynamicConfig=="NO");},_enableDisableOperations:function(){if(!this._instance){return ;}var I=this._instance.getElementsByTagName("DIV");var Q=this._viewer.currentPage;var C=this._viewer.navbar._oTotalPage.text;var A=this._viewer.apiInstance._viewingMode;var J=(A==actuate.Constant.ViewingMode.DASHBOARD_NORMAL);var L=(A==actuate.Constant.ViewingMode.DASHBOARD_MAX);if(I){var E=this._viewer.featureMap;for(var M=0;M<I.length;M++){if(I[M].getAttribute("name")){var S=I[M].getAttribute("name");switch(S){case"EditBRS":var G=this._viewer.isBRSEnabled();if(G&&!J){I[M].style.display="";}else{I[M].style.display="none";}break;case"HELP":if(J||L){I[M].style.display="none";}else{I[M].style.display="";}break;case"ENABLE_IV":var N=I[M].getAttributeNode("OPT");var F=E?E[N.value]:true;var P=((F==undefined||F)&&this._getConfigEnabled(I[M]));if(P){I[M].style.display=this._viewer.interactive?"none":"";var K=I[M].getElementsByTagName("INPUT");if(K&&K.length>0){if(K[0].getAttribute("type")=="button"){K[0].style.display=!this._viewer.interactive?"":"none";K[0].style.visibility=!this._viewer.interactive?"visible":"hidden";}}}break;case"DISABLE_IV":var N=I[M].getAttributeNode("OPT");var P=((F==undefined||F)&&this._getConfigEnabled(I[M]));if(P){I[M].style.display=this._viewer.interactive?"":"none";}break;case"UNDO":I[M].style.display=this._viewer.interactive&&!J?"":"none";if(!this._viewer.interactive){break;}var R=I[M].getElementsByTagName("input");if(!this._viewer.navbar._oUndo){I[M].className="toolbar_buttonStyleDisabled";if(R){var D=R[0].getAttribute("ENABLED_OFF");R[0].className=D;}}else{I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}break;case"REDO":I[M].style.display=this._viewer.interactive&&!J?"":"none";if(!this._viewer.interactive){break;}var R=I[M].getElementsByTagName("input");if(!this._viewer.navbar._oRedo){I[M].className="toolbar_buttonStyleDisabled";if(R){var D=R[0].getAttribute("ENABLED_OFF");R[0].className=D;}}else{I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}break;case"HIDESHOW_ITEM":case"QUERY_SAVE_FILE":case"QUERY_SAVE_DOCUMENT":var R=I[M].getElementsByTagName("input");if(this._viewer.interactive){I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}else{I[M].className="toolbar_buttonStyleDisabled";if(R){var H=R[0].getAttribute("ENABLED_OFF");R[0].className=H;}}if(L){break;}if(R&&R[0]){var H=R[0].getAttribute("ENABLED_OFF");var D=R[0].getAttribute("ENABLED_ON");var B=R[0].getAttribute("SET_HIDDEN");if(R[0].className==H&&R[0].style.visibility!="hidden"&&I[M].style.display!="none"){I[M].style.display="none";R[0].setAttribute("SET_HIDDEN","true");}if(R[0].className==D&&B=="true"){I[M].style.display="";}}break;case"SHOW_MARGIN":var F=E?E["ContentMargin"]:true;var O=this._viewer._document._isReportletGadget&&this._viewer._document._isReportletGadget()&&this._viewer.apiInstance.isInteractive();if(F&&!O){if(this._viewer.apiInstance._gadgetId!=null||this._viewer.apiInstance._reportletMode==true){I[M].style.display="none";}else{I[M].style.display="block";}}else{I[M].style.display="none";}break;case"LAUNCH_VIEWER":if(this._viewer.featureMap){I[M].style.display=this._viewer.standalone?"none":(this._viewer.featureMap.LaunchViewer||this._viewer.featureMap.LaunchViewer==undefined?"":"none");}break;case"FIRST":if(!this._viewer.navbar.visible){I[M].style.display="";var R=I[M].getElementsByTagName("input");R[0].style.display="";R[0].style.visibility="visible";if(Q>1){I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}else{I[M].className="toolbar_buttonStyleDisabled";if(R){var H=R[0].getAttribute("ENABLED_OFF");R[0].className=H;}}}else{I[M].style.display="none";}break;case"PREVIOUS":if(!this._viewer.navbar.visible){I[M].style.display="";var R=I[M].getElementsByTagName("input");R[0].style.display="";R[0].style.visibility="visible";if(Q>1){I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}else{I[M].className="toolbar_buttonStyleDisabled";if(R){var H=R[0].getAttribute("ENABLED_OFF");R[0].className=H;}}}else{I[M].style.display="none";}break;case"NEXT":if(!this._viewer.navbar.visible){I[M].style.display="";var R=I[M].getElementsByTagName("input");R[0].style.display="";R[0].style.visibility="visible";if(Q<C||C=="+"){I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}else{I[M].className="toolbar_buttonStyleDisabled";if(R){var H=R[0].getAttribute("ENABLED_OFF");R[0].className=H;}}}else{I[M].style.display="none";}break;case"LAST":if(!this._viewer.navbar.visible){I[M].style.display="";var R=I[M].getElementsByTagName("input");R[0].style.display="";R[0].style.visibility="visible";if(Q<C||C=="+"){I[M].className="toolbar_buttonStyle";if(R){var D=R[0].getAttribute("ENABLED_ON");R[0].className=D;}}else{I[M].className="toolbar_buttonStyleDisabled";if(R){var H=R[0].getAttribute("ENABLED_OFF");R[0].className=H;}}}else{I[M].style.display="none";}break;default:}}}}this._updateMenuItemSeperator();},_close:function(){if(this.menuobj){this.menuobj.className="actuateCSSSprite_firstload actuateIV_start";}if(!this._instance){return ;}this._visible=false;if(this._shadow){this._shadow.hide();}this._clearTimer();this._instance.style.display="none";this._instance.style.height="100px";this._instance.style.width="220px";if(this._currentHighlighted){this._currentHighlighted.className="toolbar_buttonStyle";}this._viewer.apiInstance.popActiveStack(this);if(this._viewer.navbar&&this._viewer.navbar._toolbarBtn&&this._viewer.navbar.setNormalButtonStyle){this._viewer.navbar.setNormalButtonStyle(this._viewer.navbar._toolbarBtn);}},close:function(){if(this._visible){this._close();}},__keyup:function(A){if(A.keyCode==actuate.util.Event.KEY_ESC){this._close();}else{if(A.keyCode==actuate.util.Event.KEY_UP){this._highlightPrevOperation();}else{if(A.keyCode==actuate.util.Event.KEY_DOWN){this._highlightNextOperation();}else{if(A.keyCode==actuate.util.Event.KEY_RETURN){this._neh_click(A);}}}}},_highlightNextOperation:function(){if(!this._instance){return ;}var C=this._instance.getElementsByTagName("DIV");var A=false;if(C){for(var B=0;B<C.length;B++){if(C[B].getAttribute("name")){if(A){if(C[B].className!="toolbar_buttonStyleDisabled"){C[B].className="toolbar_buttonStyleHighlighted";this._currentHighlighted=C[B];break;}}else{if(C[B]==this._currentHighlighted&&B!=C.length-1){C[B].className="toolbar_buttonStyle";A=true;}}}}}},_highlightPrevOperation:function(){if(!this._instance){return ;}var C=this._instance.getElementsByTagName("DIV");var A=false;if(C){for(var B=C.length-1;B>=0;B--){if(C[B].getAttribute("name")){if(A){if(C[B].className!="toolbar_buttonStyleDisabled"){C[B].className="toolbar_buttonStyleHighlighted";this._currentHighlighted=C[B];break;}}else{if(C[B]==this._currentHighlighted&&B!=0){C[B].className="toolbar_buttonStyle";A=true;}}}}}},_neh_mouseover:function(A){var B=actuate.util.Event.element(A);while(B&&B.parentNode){if(B.tagName&&B.tagName.toUpperCase()=="DIV"){break;}B=B.parentNode;}if(B.className!="toolbar_buttonStyleDisabled"){B.className="toolbar_buttonStyleHighlighted";this._currentHighlighted=B;}},_neh_mouseout:function(A){var B=actuate.util.Event.element(A);while(B&&B.tagName){if(B.tagName.toUpperCase()=="DIV"){break;}B=B.parentNode;}if(B.className!="toolbar_buttonStyleDisabled"){B.className="toolbar_buttonStyle";}},_neh_click:function(A){this._neh_mouseover(A);var D=actuate.util.Event.element(A);var I=this._viewer.currentPage;var F=parseInt(this._viewer.navbar._oTotalPage.text);if(D.className=="toolbar_buttonStyleDisabled"){return ;}this._close();if(!this._currentHighlighted){return ;}var H=this._currentHighlighted.getAttribute("name").toUpperCase();if(H=="EDITBRS"){this.editUsingBizStudio();}else{if(H=="ENABLE_IV"){if(this._viewer.totalPage>this._viewer.pageLimit*1){var B=actuate.util.Utility.getLocalizedString("toolbar.message.IVNotAllowed",this._viewer.pageLimit);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,B);return ;}}else{if(H=="HELP"){this.openHelpPage();return ;}else{if(H=="LINKTOTHISPAGE"||H=="QUERY_PARAMETER"){var E={};E.cache={};E.cache.needParameterPanel=true;this._viewer.eventDispatcher.broadcastEvent("__E_"+H,E);return ;}else{if(H=="FACEBOOK_COMMENTS"){var E={};E.cache={};E.cache.needFBCommentPanel=true;this._viewer.eventDispatcher.broadcastEvent("__E_"+H,E);return ;}else{if(H=="LAUNCH_VIEWER"){window.open(this._viewer.createCurrentViewUrl(false));return ;}else{if(H=="FIRST"){D.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:1,refreshToc:false});return ;}else{if(H=="PREVIOUS"){D.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:I-1,refreshToc:false});return ;}else{if(H=="NEXT"){D.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:I+1,refreshToc:false});return ;}else{if(H=="LAST"){D.blur();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:F,refreshToc:false});return ;}else{if(H=="SHOW_MARGIN"){D=actuate.util.Event.findElement(A,"toolbar_buttonStyle");D.blur();var J=null;var C=null;if(D.tagName.toLowerCase()=="label"){J=D;C=D.parentNode;C=C.getElementsByTagName("input")[0];}else{if(D.tagName.toLowerCase()=="div"){J=D.getElementsByTagName("label")[0];C=D.getElementsByTagName("input")[0];}else{if(D.tagName.toLowerCase()=="input"){J=D.parentNode;J=J.getElementsByTagName("label")[0];C=D;}}}if(this._viewer.showMargin=="false"){this._viewer.showMargin="true";if(J!=null){J.innerHTML=actuate.util.Utility.getLocalizedString("toolbar.hidemargin");C.className="toolbar_imageUrl actuateCSSSprite_firstload actuateIV_Hide_margin";}}else{this._viewer.showMargin="false";if(J!=null){J.innerHTML=actuate.util.Utility.getLocalizedString("toolbar.showmargin");C.className="toolbar_imageUrl actuateCSSSprite_firstload actuateIV_Show_margin";}}this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GETPAGE,{name:"page",value:I,refreshToc:false});return ;}}}}}}}}}}}var G="__E_"+H;this._viewer.eventDispatcher.broadcastEvent(G);},editUsingBizStudio:function(){var B=this._viewer.isBRSEnabled();if(B){var A=this._viewer.documentModel._metadata.WinName;var F=this._viewer.documentModel._metadata.DesignName;var E=this._viewer.documentModel._metadata.CommonCP;var D=Math.floor(Math.random()*101);var C=this._viewer._baseUrl+"wr?__report="+actuate.util.Utility.encode(F)+"&"+E;var G=window.open(C,A+D);if(G==null||(typeof (G)=="undefined")||(typeof (G.location.hash)!="string")){retCode=false;}else{G.focus();}}},openHelpPage:function(){window.open(this._viewer.helpBase+"/ic/index.html");return ;},updateUIOptions:function(){if(!this._instance){return ;}var B=this._viewer.featureMap;var A=this._instance.getElementsByTagName("DIV");for(var C=0;C<A.length;C++){var D=A[C].getAttributeNode("OPT");if(D){this._updateMenuItemByAPI(A[C],B?B[D.value]:true);}}this._updateMenuItemSeperator();},_updateMenuItemSeperator:function(){var C=this._toolbarDiv.getElementsByTagName("HR");var B=false;for(var A=0;A<this._toolbarDiv.childNodes.length;A++){if(this._toolbarDiv.childNodes[A].tagName=="HR"){this._toolbarDiv.childNodes[A].style.display=B?"block":"none";B=false;}else{for(var D=0;D<this._toolbarDiv.childNodes[A].childNodes.length;D++){if(this._toolbarDiv.childNodes[A].childNodes[D].tagName=="DIV"&&this._toolbarDiv.childNodes[A].childNodes[D].style.display!="none"){B=true;}}}}B=false;for(var A=this._toolbarDiv.childNodes.length-1;A>=0;A--){if(this._toolbarDiv.childNodes[A].tagName=="HR"&&this._toolbarDiv.childNodes[A].style.display!="none"){this._toolbarDiv.childNodes[A].style.display=B?"block":"none";B=false;}else{for(var D=0;D<this._toolbarDiv.childNodes[A].childNodes.length;D++){if(this._toolbarDiv.childNodes[A].childNodes[D].tagName=="DIV"&&this._toolbarDiv.childNodes[A].childNodes[D].style.display!="none"){B=true;}}}}},_updateMenuItemByAPI:function(C,B){var A=((B==undefined||B)&&this._getConfigEnabled(C));if(C.getAttribute("NAME")=="ENABLE_IV"&&this._viewer.interactive){A=false;}if(A){C.style.display="";}else{C.style.display="none";}var D=C.getElementsByTagName("INPUT");if(D&&D.length>0){if(D[0].getAttribute("type")=="button"){D[0].style.display=A?"":"none";D[0].style.visibility=A?"visible":"hidden";}}}});actuate.util.Package.define("actuate.iv.ui.mobile.app");actuate.iv.ui.mobile.app.IVGlobalToolbar=actuate.Class.create();actuate.iv.ui.mobile.app.IVGlobalToolbar.prototype={_viewer:null,_instance:null,_currentHighlighted:null,_visible:false,initialize:function(H){this._viewer=H;this._visible=false;var E="actuate.iv.ui.mobile.app.IVGlobalToolbar";var B=E.replace(/\./g,"_").replace("IV","iv");var F=document.createElement("div");var D=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"actuateViewerContainer");D.appendChild(F);F.className="new_toolbar_outermostDiv";F.style.width="auto";F.style.height="auto";F.style.zIndex=actuate.iv.utility.ivZIndex.MOBILE_MENU;this._instance=F;var A={multiSelect:true,enableKeyEvents:true,renderTo:this._instance,autoHide:true,modal:true,height:(actuate.util.browser&&actuate.util.browser.isNativeApp())?160:60,id:"actuate_popup_menu",style:"position:absolute !important;"};var G=[{text:actuate.util.Utility.getLocalizedString("toolbar.print"),name:"PRINT",opt:"Print"},{text:actuate.util.Utility.getLocalizedString("toobar.exportReport"),name:"DOCUMENT_EXPORTREPORT",opt:"ExportReport"},{text:"Save Report",name:"QUERY_SAVE_FILE",opt:"SaveDesign"},{text:"Email",name:"EMAIL",opt:"Email"}];var C=[{text:actuate.util.Utility.getLocalizedString("toolbar.print"),name:"PRINT",opt:"Print",disabled:true},{text:actuate.util.Utility.getLocalizedString("toobar.exportReport"),name:"DOCUMENT_EXPORTREPORT",opt:"ExportReport",disabled:true},{text:"Save Report",name:"QUERY_SAVE_FILE",opt:"SaveDesign",disabled:true},{text:"Email",name:"EMAIL",opt:"Email"}];this._menuItems=G;this._menuItems_disabled=C;this._toolbarMenu=new actuate.uiadapter.Menu(A,["name","opt"],G);if(this._isMobile){this._toolbarMenu.addMenuItem({iconCls:"toolbar_imageUrl actuateCSSSprite_firstload actuateIV_Interactive_viewer",text:"Enable IV"});}this._toolbarMenu.hide();if(actuate.util.Utility.isIE8){actuate.util.Utility.fixIE8ImageButtons(this._instance);}this._installEventHandlers();},_installEventHandlers:function(){this.__neh__MenuItemSelect_c=actuate.Method.bind(this.__neh__MenuItemSelect,this);this._toolbarMenu.registerEventHandler("select",this.__neh__MenuItemSelect_c);},__neh__MenuItemSelect:function(){var A=this._toolbarMenu.getSelectedRecord();if(A==null||A.data==null){return ;}if(A.data.disabled==true){return ;}var D=A.data.name;this._close();this._toolbarMenu.hide();if(D=="ENABLE_IV"){if(this._viewer.reachPageLimit){var E=actuate.util.Utility.getLocalizedString("toolbar.message.IVNotAllowed",this._viewer.pageLimit);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,E);return ;}}else{if(D=="DISABLE_IV"){this._viewer.navbar._showCtxShortcuts(false);}else{if(D=="QUERY_PARAMETER"){var C={};C.cache={};C.cache.needParameterPanel=true;this._viewer.eventDispatcher.broadcastEvent("__E_"+D,C);return ;}else{if(D=="PRINT"){if(actuate.util.browser&&actuate.util.browser.isNativeApp()){window.location="print://print";}return ;}else{if(D=="EMAIL"){if(actuate.util.browser&&actuate.util.browser.isNativeApp()){window.location="email://email";}return ;}else{if(D=="QUERY_SAVE_FILE"){return ;}else{if(D=="LAUNCH_VIEWER"){window.open(this._viewer.createCurrentViewUrl(false));return ;}}}}}}}var B="__E_"+D;this._viewer.eventDispatcher.broadcastEvent(B);},_convertImageSrc:function(G){var A=G.getElementsByTagName("img");var B=G.innerHTML;for(var C=0;C<A.length;C++){this.iImg=A[C];var E=this;var D=A[C];var F=A[C];var H=this._getDataUrl(A[C]);var I="data:image/png;base64,"+H;F.src=I;G.replaceChild(D,F);}return G;},_getDataUrl:function(C){var A="trying to cache image";var D=document.createElement("canvas");D.width=C.width;D.height=C.height;var B=D.getContext("2d");B.drawImage(C,0,0);var E=D.toDataURL("image/png");return E.replace(/^data:image\/(png|jpg);base64,/,"");},processBind:function(){this._visible=true;if(!this._instance){return ;}var A=this._viewer.navbar.instance;this._instance.style.display="";this._toolbarMenu.showBy(this._viewer.navbar.getToolbarBtnId());this._viewer.apiInstance.pushActiveStack(this);this._enableDisableOperations();this._currentHighlighted=null;},SetupFeatureOptions:function(A){},_getWidth:function(){return this._viewer.width;},_getHeight:function(){return this._viewer.height;},_getConfigEnabled:function(B){var A=this._viewer.allowedFeatures["non-dashboard"];var C=B.opt;if(A[C]){return A[C];}return false;},_enableDisableOperations:function(){if(!this._instance){return ;}var H=this._viewer.currentPage;var C=this._viewer.totalPage;var G=this._viewer.featureMap;this._toolbarMenu.clear();for(var B=0;B<this._menuItems.length;B++){var D=this._menuItems[B];if(D){var A=D.name;switch(A){case"ENABLE_IV":break;case"DISABLE_IV":break;case"LAUNCH_VIEWER":if(this._viewer.featureMap){if(!this._viewer.standalone){if(this._viewer.featureMap.LaunchViewer||this._viewer.featureMap.LaunchViewer==undefined){this._toolbarMenu.addMenuItem(D);}}}break;case"QUERY_PARAMETER":break;case"QUERY_SAVE_FILE":break;case"PRINT":if(actuate.util.browser&&actuate.util.browser.isNativeApp()){var E=D.opt;var F=G?G[E]:true;var I=((F==undefined||F)&&this._getConfigEnabled(D));if(I){this._toolbarMenu.addMenuItem(D);}}break;case"EMAIL":if(actuate.util.browser&&actuate.util.browser.isNativeApp()){this._toolbarMenu.addMenuItem(D);}break;default:var E=D.opt;var F=G?G[E]:true;var I=((F==undefined||F)&&this._getConfigEnabled(D));if(I){this._toolbarMenu.addMenuItem(D);}}}}},_close:function(){if(!this._instance){return ;}this._visible=false;this._instance.style.display="none";this._viewer.apiInstance.popActiveStack(this);},close:function(){if(this._visible){this._close();}},__keyup:function(A){},updateUIOptions:function(){},_updateMenuItemByAPI:function(B,A){}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVBaseOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVBaseOverlay.prototype={_overlayHeaderHeight:27,_rendered:false,_shadow:null,_headerShadow:null,_viewer:null,_instance:null,_overlay:null,_header:null,_headerWidth:100,_headerPadding:6,_lastButtonPos:6,_buttonSize:34,_controls:null,_noMouseDown:false,_hasBody:true,_hasContextMenu:false,_showHeader:true,_hidden:true,_offset:null,_data:null,initialize:function(A){if(this.__extending){return ;}this._data={};this._viewer=A;this._offset=this._offset||[0,0,0,0];this._lastButtonPos=this._headerPadding;this._width=0;this._height=0;this._left=0;this._top=0;this._instance=this._create();if(actuate.util.Utility.isIE8){actuate.util.Utility.fixIE8ImageButtons(this._instance);}this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;if(this._header){this._header.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY+1;}},_create:function(){this._controls=[];this._lastButtonPos=2;var B=document.createElement("div");B.style.position="absolute";B.className="actuate-iv-overlay";this._overlay=B;this._createHeader();if(this._hasBody){this._createBody();}this._createHeaderContent(this._header);this._createcontextMenu();if(this._hasBody){this._createBodyContent(this._body);this._shadow=new actuate.util.Shadow({mode:"frame",offset:3});}this._headerShadow=new actuate.util.Shadow({mode:"frame",offset:3});var A=this._viewer.contentPanel.floatPanel.instance;A.appendChild(this._overlay);A.appendChild(this._header);this._rendered=true;return this._overlay;},_createHeaderContent:function(A){},_createBodyContent:function(A){},_createHeader:function(){if(this._viewer.contentPanel._hoverHighlight&&actuate.iv.HoverHighlight){actuate.util.Event.observe(this._overlay,"mousemove",actuate.Method.bindAsEventListener(this._neh_mousemove,this),false);}actuate.util.Event.observe(this._overlay,"contextmenu",actuate.Method.bindAsEventListener(this._neh_contextmenu,this),false);var A=document.createElement("div");A.className="overlayHeader columnOverlayHeader";this._header=A;actuate.util.Event.observe(A,"click",actuate.Method.bindAsEventListener(this._neh_headerClick,this),false);return this._header;},_createcontextMenu:function(){if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){this._contextMenuIcon=this._addButton({className:"overlayMenuIcon actuateCSSSprite_selection actuateIV_overlaymenu",id:"overlay_more_menu_id",titleKey:"columnOverlay.tooltip.more",onClick:actuate.Method.bindAsEventListener(this._neh_click_more,this),width:16,hidden:true});}else{this._contextMenuIcon=this._addButton({className:"overlayMenuIconDashboard actuateCSSSprite_selection actuateIV_overlaymenu_dashboard",id:"overlay_more_menu_id",titleKey:"columnOverlay.tooltip.more",onClick:actuate.Method.bindAsEventListener(this._neh_click_more,this),width:16,hidden:true});}},_createBody:function(){var A=document.createElement("div");A.style.position="absolute";A.style.borderStyle="solid";A.style.borderWidth="0";A.style.borderColor="#2998fb";A.style.backgroundColor="transparent";this._overlay.appendChild(A);this._body=A;var C=document.createElement("div");C.style.position="absolute";C.style.left="3px";C.style.textAlign="left";var B=actuate.util.Utility;if((B.isIE7||B.isIE8)&&(B.isWindowsVista||B.isWindows7)){C.style.backgroundImage="url( ../images/overlayCoverPixel.png )";C.style.backgroundRepeat="repeat";}else{C.style.opacity="0.50";C.style.filter="alpha( opacity=50 )";}this._body.appendChild(C);this._cover=C;actuate.util.Event.observe(C,"click",actuate.Method.bindAsEventListener(this._neh_click,this),false);if(!this._noMouseDown){actuate.util.Event.observe(this._overlay,"mousedown",actuate.Method.bindAsEventListener(this._neh_mousedown,this),false);}return this._body;},_addText:function(B){var D=B.title;if(!D&&B.titleKey){D=actuate.util.Utility.getLocalizedString(B.titleKey);}var C=document.createElement("DIV");if(B.className){C.className=B.className;}actuate.util.XmlDom.setTextContent(C,D);if(B.onClick){actuate.util.Event.observe(C,"click",B.onClick,false);}this._header.appendChild(C);var A=new actuate.uiadapter.Element(C);this._controls.push(A.element);return C;},_addButton:function(B){var D=B.title;if(!D&&B.titleKey){D=actuate.util.Utility.getLocalizedString(B.titleKey);}var A=document.createElement("input");A.type="button";A.className="overlayIcon "+B.className;A.title=D;if(B.id){A.id=B.id;}if(B.hidden){actuate.util.Element.hide(A);}else{if(this._rendered){A.style.left=this._lastButtonPos+"px";this._lastButtonPos+=this._controlsize;this._headerWidth=this._lastButtonPos+this._headerPadding;}}this._header.appendChild(A);if(B.onClick){actuate.util.Event.observe(A,"click",B.onClick,false);}if(!B.onMouseOver){actuate.util.Event.observe(A,"mouseover",this._neh_buttonMouseOver,false);}if(!B.onMouseOut){actuate.util.Event.observe(A,"mouseout",this._neh_buttonMouseOut,false);}var C=new actuate.uiadapter.Element(A);if(B.width){C.element.presetWidth=B.width;}this._controls.push(C.element);return A;},_neh_buttonMouseOut:function(A){var B=actuate.util.Event.element(A);if(B&&B.className){if(B.className.indexOf("_over",B.className.length-"_over".length)!==-1){B.className=B.className.substr(0,B.className.length-"_over".length);}}},_neh_buttonMouseOver:function(A){var B=actuate.util.Event.element(A);if(B&&B.className&&B.className.indexOf("disabled",B.className.length-"disabled".length)==-1){if(B.className.lastIndexOf("_over")<B.className.length-5){B.className=B.className+"_over";}}},_refreshButtons:function(){var C=0;this._lastButtonPos=this._headerPadding;if(this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){this._lastButtonPos=3;}for(var B=0;B<this._controls.length;B++){var A=this._controls[B];if(A.isVisible&&A.isVisible()||this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){A.dom.style.left=this._lastButtonPos+"px";this._lastButtonPos+=(A.presetWidth||A.getWidth()||16)+3;C++;}}this._headerWidth=this._lastButtonPos+this._headerPadding;if(this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){this._headerWidth=14;}return C;},_neh_headerClick:function(A){actuate.util.Event.stop(A);var B=actuate.util.Event.element(A);B.blur();},_neh_click_more:function(A){if(this._viewer.progressiveViewing||!this._viewer.interactive){return ;}actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A);},_neh_contextmenu:function(A){actuate.util.Event.stop(A);if(this._viewer.interactive){if(this._viewer.assertNotTimedOut()){this._viewer._contextMenu.showMenu(this._viewer,{left:actuate.util.Event.pointerX(A),top:actuate.util.Event.pointerY(A)});}}if(this._viewer.featureMap&&this._viewer.featureMap.ContextMenu!=undefined&&!this._viewer.featureMap.ContextMenu){return ;}if(this._viewer.navbar&&this._viewer.toolbar&&!this._viewer._contextMenu._rootMenu._visible){if(!this._viewer.navbar.visible&&!this._viewer.standalone&&!this._viewer.toolbar._visible){this._viewer.toolbar._instance.style.width=this._viewer.toolbar._getWidth()+"px";this._viewer.toolbar._instance.style.height=this._viewer.toolbar._getHeight()+"px";this._viewer.toolbar._instance.style.left=(A.layerX||A.x||actuate.util.Event.pointerX(A))+"px";this._viewer.toolbar._instance.style.top=(A.layerY||A.y||actuate.util.Event.pointerY(A))+"px";this._viewer.toolbar._enableDisableOperations();this._viewer.toolbar._instance.style.display="";this._viewer.toolbar._visible=true;this._viewer.toolbar._setTimer(10000);}}},_neh_click:function(A){actuate.util.Event.stop(A);},_neh_mousemove:function(A){this._viewer._overlay.getMouseOverOverlay().hide();},_neh_mousedown:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);},updatePosition:function(C,A,E,D){if(this._instance){A=A>0?A:0;if(this._hidden||!this._showHeader){this._instance.style.zIndex=actuate.iv.utility.ivZIndex.BACKGROUND_OVERLAY;this._header.style.display="none";}else{this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;this._header.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY+1;}this._width=(C>0)?C:C;this._height=A;this._left=E;this._top=D;var F=this._showHeader?this._overlayHeaderHeight:0;this._instance.style.width=C+"px";this._instance.style.height=A+"px";this._instance.style.left=E+"px";this._instance.style.top=D+"px";this._header.style.top=D-F+"px";if(this._chartElement||this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){this._header.style.top=D-F+28+"px";}var B=E;if(this._headerWidth&&this._width>this._headerWidth){B=E+this._width-this._headerWidth;}this._header.style.left=B+"px";if(this._body){this._body.style.left="1px";this._body.style.width=C+"px";this._body.style.height=A+"px";this._cover.style.width=C+"px";this._cover.style.height=A+"px";this._updateShadow();}}},setHeaderVisible:function(A){this._headerHidden=!A;this._updateHeader();},_updateHeader:function(){if(this._headerHidden||this._hidden||!this._showHeader){this._header.style.display="none";return ;}if(this._refreshButtons()==0){if(this._headerShadow._ele){this._headerShadow.hide(this._header);}this._header.style.display="none";return ;}if(actuate.util.browser&&actuate.util.browser.useMobile()){this._header.style.display="none";return ;}this._header.style.display="block";var B=this._headerWidth;this._header.style.width=B+"px";if(!this._headerShadow._ele){}var F=actuate.uiadapter.Element.get(this._header);var A=this._headerShadow.offset?this._headerShadow.offset:0;this._headerShadow.realign(F.getLeft(true),F.getTop(true),F.getWidth(),F.getHeight()-A);if(this._width&&this._headerWidth){var D=this._left+this._width-this._headerWidth;var C=0;if(this._chartElement){C=-4;}if(this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD&&!this._chartElement){C=-3;}var E=A-1;this._header.style.left=(D<0?this._left-E:D+E)+C+"px";}if(this._chartElement||this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){this._header.className="overlayHeaderDashboard dashboardOverlayHeader";if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){this._header.className="overlayHeader dashboardOverlayHeader";}}},show:function(B,A,D,C){this._hidden=false;this._beforeShow.apply(this,arguments);this.updatePosition(B+this._offset[2],A+this._offset[3],D+this._offset[0],C+this._offset[1]);if(this._showHeader){this._updateHeader();}actuate.util.Element.show(this._instance);this._afterShow.apply(this,arguments);},_updateShadow:function(){if(this._body){actuate.util.Element.show(this._instance);if(this._shadow){this._shadow.hide();this._shadow.show(this._body);}}},_beforeShow:function(){},_afterShow:function(){},_beforeHide:function(){},hide:function(){if(!this._hidden){this._beforeHide();this.updatePosition(0,0,0,0);actuate.util.Element.hide(this._instance);actuate.util.Element.hide(this._header);if(this._shadow){this._shadow.hide();}this._headerShadow.hide();this._viewer._contextMenu.hideMenu(this._viewer);this._hidden=true;}},updateUIOptions:function(){this._updateHeader();},enableContextMenu:function(A,B){if(B){this._hasContextMenu=A;}if(A&&this._hasContextMenu){actuate.util.Element.show(this._contextMenuIcon);}else{actuate.util.Element.hide(this._contextMenuIcon);}},getRect:function(){return[this._left,this._top,this._left+this._width,this._top+this._height];},getHeaderRect:function(){return[this._left,this._top-this._overlayHeaderHeight,this._left+this._headerWidth,this._top];},bind:function(A){},localBind:function(C){var B=false;if(C){this._data=C;for(var A in C){if(A=="canDrill"){if(C[A].canDrillDownFromCategories||C[A].canDrillDownFromSeries||C[A].canDrillUpFromCategories||C[A].canDrillUpFromSeries||C[A].canSwitchView){B=true;break;}}else{B=true;break;}}}if(this._hasContextMenu!=B){this._hasContextMenu=B;this.enableContextMenu(B);}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVDataItemOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_sortIconAsc:null,_sortIconDesc:null,_filterIcon:null,initialize:function(A){actuate.iv.ui.overlay.IVDataItemOverlay.superclass.initialize.call(this,A);this._offset=[2,0,0,0];},_createHeaderContent:function(){this._filterIcon=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlayfilter",titleKey:"columnOverlay.tooltip.filter",onClick:actuate.Method.bindAsEventListener(this._neh_click_filter,this)});this._sortIconDesc=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlaysortdesc",titleKey:"columnOverlay.tooltip.sortDesc",onClick:actuate.Method.bindAsEventListener(this._neh_click_sort_desc,this)});this._sortIconAsc=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlaysortasc",titleKey:"columnOverlay.tooltip.sortAsc",onClick:actuate.Method.bindAsEventListener(this._neh_click_sort_asc,this)});},_neh_click_sort_asc:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SORTASC);},_neh_click_sort_desc:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SORTDESC);},_neh_click_filter:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_FILTER);},_neh_click:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A);},_afterShow:function(){actuate.util.Element.show(this._instance);actuate.util.Element.hide(this._sortIconAsc);actuate.util.Element.hide(this._sortIconDesc);actuate.util.Element.hide(this._filterIcon);},localBind:function(A){actuate.iv.ui.overlay.IVDataItemOverlay.superclass.localBind.call(this,A);this._sortIconAsc.configEnabled=A["SortAsc"]?"YES":"NO";this._sortIconDesc.configEnabled=A["SortDsc"]?"YES":"NO";this._filterIcon.configEnabled=A["Filter"]?"YES":"NO";this.updateUIOptions();},enableSort:function(B){var A=(B==undefined||B)&&this._sortIconAsc.configEnabled=="YES";if(A){actuate.util.Element.show(this._sortIconAsc);}else{actuate.util.Element.hide(this._sortIconAsc);}var A=(B==undefined||B)&&this._sortIconDesc.configEnabled=="YES";if(A){actuate.util.Element.show(this._sortIconDesc);}else{actuate.util.Element.hide(this._sortIconDesc);}},enableFilter:function(B){var A=(B==undefined||B)&&this._filterIcon.configEnabled=="YES";if(A){actuate.util.Element.show(this._filterIcon);}else{actuate.util.Element.hide(this._filterIcon);}},showFilter:function(A){if(A&&A.hasFilter!=null){this._filterIcon.className=A.hasFilter?"overlayIcon actuateCSSSprite_selection actuateIV_overlayexistfilter":"overlayIcon actuateCSSSprite_selection actuateIV_overlayfilter";}},updateUIOptions:function(){if(this._viewer.featureMap){this.enableSort(this._viewer.featureMap["SortAsc"]);this.enableFilter(this._viewer.featureMap["Filter"]);}else{this.enableFilter(true);this.enableSort(true);}this._updateHeader();}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVDataItemOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVDataItemOverlays.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];},_allocateDataItemOverlay:function(){var A=this._freeOverlays.pop();if(!A){if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){A=new actuate.iv.ui.overlay.IVDataItemOverlay(this._viewer);}else{A=new actuate.iv.ui.overlay.IVDataItemOverlayDashboard(this._viewer);}}this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},show:function(D,B,F,E,A){if(this._usedOverlays.length==1){this._usedOverlays[0].show(D,B,F,E,A);}else{var C=this._allocateDataItemOverlay();C.show(D,B,F,E,A);}},showFilter:function(B){var A=this._usedOverlays[this._usedOverlays.length-1];A.showFilter(B);},updatePosition:function(B,A,D,C){if(this._usedOverlays.length==1){this._usedOverlays[0].updatePosition(B,A,D,C);}},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},bind:function(B){if(this._usedOverlays.length==1){var A=this._usedOverlays[this._usedOverlays.length-1];A.bind(B);}},localBind:function(B){if(this._usedOverlays.length==1){var A=this._usedOverlays[this._usedOverlays.length-1];A.localBind(B);}},updateUIOptions:function(){if(this._usedOverlays.length==1){var A=this._usedOverlays[this._usedOverlays.length-1];A.updateUIOptions();}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVColumnOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_sortIconAsc:null,_sortIconDesc:null,_filterIcon:null,_contextMenuIcon:null,_body:null,_cover:null,_leftBorder:null,_rightBorder:null,_width:null,_height:null,_left:null,_top:null,_dndEnabled:false,_borderWidth:2,_simpleFilterEnabled:false,columnIndex:null,_noMouseDown:true,initialize:function(A){actuate.iv.ui.overlay.IVColumnOverlay.superclass.initialize.call(this,A);this._mousedown_closure=actuate.Method.bindAsEventListener(this._neh_mousedown,this);this._mouseup_closure=actuate.Method.bindAsEventListener(this._neh_mouseup,this);this._drag_closure=actuate.Method.bindAsEventListener(this._neh_drag,this);this._border_mousedown_closure=actuate.Method.bindAsEventListener(this._neh_border_mousedown,this);this._border_mouseup_closure=actuate.Method.bindAsEventListener(this._neh_border_mouseup,this);this._border_drag_closure=actuate.Method.bindAsEventListener(this._neh_border_drag,this);this._width=0;this._height=0;this._left=0;this._top=0;},_createHeaderContent:function(){this._filterIcon=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlayfilter",titleKey:"columnOverlay.tooltip.filter",onClick:actuate.Method.bindAsEventListener(this._neh_click_filter,this)});this._sortIconDesc=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlaysortdesc",titleKey:"columnOverlay.tooltip.sortDesc",onClick:actuate.Method.bindAsEventListener(this._neh_click_sort_desc,this)});this._sortIconAsc=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlaysortasc",titleKey:"columnOverlay.tooltip.sortAsc",onClick:actuate.Method.bindAsEventListener(this._neh_click_sort_asc,this)});},_createBodyContent:function(){var A=document.createElement("div");A.style.position="absolute";A.style.backgroundColor="#2998fb";A.style.opacity="0";A.style.filter="alpha( opacity=0 )";A.style.left="0px";A.style.width="3px";A.style.height="100%";A.style.cursor="E-resize";this._body.appendChild(A);this._leftBorder=A;var B=document.createElement("div");B.style.position="absolute";B.style.backgroundColor="#2998fb";B.style.opacity="0";B.style.filter="alpha( opacity=0 )";B.style.right="0px";B.style.width="3px";B.style.height="100%";B.style.cursor="E-resize";this._body.appendChild(B);this._rightBorder=B;},_neh_click:function(A){actuate.util.Event.stop(A);if(A.ctrlKey&&!this._hidden){this._viewer._overlay.getTableOverlay().hideColumn(this);}},_neh_click_sort_asc:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SORTASC);},_neh_click_sort_desc:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SORTDESC);},_neh_click_filter:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_FILTER);},enableDnd:function(B){var A=(B==undefined||B)&&this._cover.configEnabled=="YES";var C=actuate.util.Utility.getLocalizedString("columnOverlay.tooltip.dnd");this._cover.title=A?C:"";if(A){if(!this._dndEnabled){actuate.util.Event.observe(this._cover,"mousedown",this._mousedown_closure,false);this._dndEnabled=true;}}else{actuate.util.Event.stopObserving(this._cover,"mousedown",this._mousedown_closure,false);this._dndEnabled=false;}},enableResize:function(B){var A=(B==undefined||B)&&this._leftBorder.configEnabled=="YES";var C=actuate.util.Utility.getLocalizedString("columnOverlay.tooltip.resize");this._leftBorder.title=A?C:"";this._rightBorder.title=A?C:"";this._leftBorder.style.cursor=A?"E-resize":"default";this._rightBorder.style.cursor=A?"E-resize":"default";if(A){if(!this._resizeEnabled){actuate.util.Event.observe(this._leftBorder,"mousedown",this._border_mousedown_closure,false);actuate.util.Event.observe(this._rightBorder,"mousedown",this._border_mousedown_closure,false);this._resizeEnabled=true;}}else{actuate.util.Event.stopObserving(this._leftBorder,"mousedown",this._border_mousedown_closure,false);actuate.util.Event.stopObserving(this._rightBorder,"mousedown",this._border_mousedown_closure,false);this._resizeEnabled=false;}},enableSort:function(B){var A=(B==undefined||B)&&this._sortIconAsc.configEnabled=="YES";if(A){actuate.util.Element.show(this._sortIconAsc);this._sortIconDesc.style.left="20px";}else{actuate.util.Element.hide(this._sortIconAsc);this._sortIconDesc.style.left="2px";}var A=(B==undefined||B)&&this._sortIconDesc.configEnabled=="YES";if(A){actuate.util.Element.show(this._sortIconDesc);}else{actuate.util.Element.hide(this._sortIconDesc);}this._updateHeader();},enableFilter:function(B){var A=(B==undefined||B)&&this._filterIcon.configEnabled=="YES"&&this._simpleFilterEnabled;if(A){actuate.util.Element.show(this._filterIcon);}else{actuate.util.Element.hide(this._filterIcon);}},showFilter:function(A){if(A&&A.hasFilter!=null){this._filterIcon.className=A.hasFilter?"overlayIcon actuateCSSSprite_selection actuateIV_overlayexistfilter":"overlayIcon actuateCSSSprite_selection actuateIV_overlayfilter";}},_afterShow:function(){actuate.util.Element.hide(this._sortIconAsc);actuate.util.Element.hide(this._sortIconDesc);actuate.util.Element.hide(this._filterIcon);},updatePosition:function(C,A,E,D){if(this._instance){actuate.iv.ui.overlay.IVColumnOverlay.superclass.updatePosition.call(this,C,A,E,D);var B=3;this._cover.style.width=((C>0)?C-2*B:C)+"px";}},localBind:function(A){actuate.iv.ui.overlay.IVColumnOverlay.superclass.localBind.call(this,A);this._sortIconAsc.configEnabled=A["SortAsc"]?"YES":"NO";this._sortIconDesc.configEnabled=A["SortDsc"]?"YES":"NO";this._filterIcon.configEnabled=A["Filter"]?"YES":"NO";this._simpleFilterEnabled=A["SimpleFilter"]?true:false;this._cover.configEnabled=A["ReorderColumns"]?"YES":"NO";this._leftBorder.configEnabled=A["ColumnWidth"]?"YES":"NO";},updateUIOptions:function(){if(this._viewer.featureMap){this.enableFilter(this._viewer.featureMap["Filter"]);this.enableSort(this._viewer.featureMap["SortAsc"]);this.enableDnd(this._viewer.featureMap["ReorderColumns"]);this.enableResize(this._viewer.featureMap["ColumnWidth"]);}else{this.enableFilter(true);this.enableSort(true);this.enableDnd(true);this.enableResize(true);}this._updateHeader();},_neh_border_mousedown:function(B){if(this._viewer.interactive){actuate.util.Event.stop(B);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this._viewer.contentPanel.hibernate();actuate.util.Event.observe(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.observe(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getColumnResizeOverlay();A.show(this._width,this._height,this._left,this._top);}},_neh_border_mouseup:function(B){actuate.util.Event.stop(B);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getColumnResizeOverlay();A.hide();this._viewer.contentPanel.activate();},_neh_border_drag:function(D){actuate.util.Event.stop(D);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var E=this._viewer.contentPanel.floatPanel.getScrolledOffset();var B=actuate.util.Event.pointerX(D)-E[0];var C=(B-this._left>this._width/2);var A=this._viewer._overlay.getColumnResizeOverlay();A.setResizeTo(C);this._viewer.dndManager.startDragAndDrop(A,D,null);},_neh_mousedown:function(A){if(this._viewer.interactive&&actuate.util.Event.isLeftClick(A)){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this._viewer.contentPanel.hibernate();actuate.util.Event.observe(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.observe(this._instance,"mousemove",this._drag_closure,false);}},_neh_mouseup:function(A){actuate.util.Event.stop(A);actuate.util.Event.stopObserving(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this._instance,"mousemove",this._drag_closure,false);this._viewer.contentPanel.activate();},_neh_drag:function(B){actuate.util.Event.stop(B);actuate.util.Event.stopObserving(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this._instance,"mousemove",this._drag_closure,false);var A=this._viewer._overlay.getDragOverlay();A.show(this._width,this._height,this._left,this._top);this._viewer.dndManager.startDragAndDrop(A,B,this._viewer._table.getSelectionManager());}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVTableOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVTableOverlay.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];this._mainOverlay=null;},_allocateColumnOverlay:function(B){var A=this._freeOverlays.pop();if(!A){if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){A=new actuate.iv.ui.overlay.IVColumnOverlay(this._viewer);}else{A=new actuate.iv.ui.overlay.IVColumnOverlayDashboard(this._viewer);}}A.columnIndex=B;this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},showFilter:function(A){var B=this._usedOverlays[this._usedOverlays.length-1];B.showFilter(A);},show:function(F,A,H,C,G,I){if(this._usedOverlays.length==1){this._usedOverlays[0].enableDnd(false);this._usedOverlays[0].enableResize(false);this._usedOverlays[0].enableSort(false);this._usedOverlays[0].enableFilter(false);}var B=this._allocateColumnOverlay(F);G+=2;C+=1;A-=2;H-=2;B.show(A,H,C,G,I);if(this._usedOverlays.length>1){B.enableDnd(false);B.enableResize(false);B.enableSort(false);B.enableFilter(false);for(var D=0;D<this._usedOverlays.length;D++){this._usedOverlays[D].enableContextMenu(false);}var E=this._findLastColumnOverlayIndex();this._mainOverlay=this._usedOverlays[E];}},_findLastColumnOverlayIndex:function(){var D=0;var A=0;for(var C=0;C<this._usedOverlays.length;C++){var B=this._usedOverlays[C].columnIndex;if(D<B){D=B;A=C;}}return A;},adjust:function(B,C,A,E,D){var F=this._usedOverlays[B];if(F){F.updatePosition(C,A,E,D);}},hideColumn:function(A){A.hide();actuate.util.Utility.arrayRemoveValue(this._usedOverlays,A);if(this._mainOverlay==A){this._mainOverlay=this._usedOverlays[this._findLastColumnOverlayIndex()];}this._freeOverlays.push(A);this._viewer._table.getSelectionManager().deSelectColumn(A.columnIndex);},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},localBind:function(A){if(this._usedOverlays.length==1){var C=this._usedOverlays[this._usedOverlays.length-1];C.localBind(A);}else{if(this._mainOverlay){this._mainOverlay.localBind(A);this._mainOverlay.enableContextMenu(true,true);for(var B=0;B<this._usedOverlays.length;B++){if(this._usedOverlays[B]!=this._mainOverlay){this._usedOverlays[B].localBind({});this._usedOverlays[B].enableContextMenu(false,true);}}}}this.updateUIOptions();},updateUIOptions:function(){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updateUIOptions();}else{if(this._mainOverlay){for(var A=0;A<this._usedOverlays.length;A++){this._usedOverlays[A].updateUIOptions();}}}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVMouseOverOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVMouseOverOverlay.prototype={_viewer:null,_instance:null,_type:null,_leftBorder:null,_rightBorder:null,_topBorder:null,_bottomBorder:null,_width:null,_height:null,_left:null,_top:null,_tooltip:null,_tooltipLeft:null,_tooltipTop:null,_tooltipTimer:null,_tooltipLife:null,_tooltipElapseTime:500,_opacity:0.7,_zIndex:null,initialize:function(A){this._viewer=A;this._width=0;this._height=0;this._left=0;this._top=0;this._titleLeft=0;this._titleTop=0;this._zIndex=actuate.iv.utility.ivZIndex.MOUSEOVER_OVERLAY;this._instance=this._create();this._instance.style.zIndex=this._zIndex;},_create:function(){var D=this._viewer.contentPanel.floatPanel.instance;var C=document.createElement("div");C.className="mouseOverOverlay";C.style.position="absolute";C.style.width="0px";C.style.height="0px";D.appendChild(C);var E=document.createElement("div");E.className="mouseOverOverlayVertial";E.style.opacity=this._opacity;E.style.filter="alpha( opacity="+(this._opacity*100)+")";C.appendChild(E);this._leftBorder=E;var G=document.createElement("div");G.className="mouseOverOverlayVertial";G.style.opacity=this._opacity;G.style.filter="alpha( opacity="+(this._opacity*100)+")";C.appendChild(G);this._rightBorder=G;var B=document.createElement("div");B.className="mouseOverOverlayHorizontal";B.style.opacity=this._opacity;B.style.filter="alpha( opacity="+(this._opacity*100)+")";C.appendChild(B);this._topBorder=B;var A=document.createElement("div");A.className="mouseOverOverlayHorizontal";A.style.opacity=this._opacity;A.style.filter="alpha( opacity="+(this._opacity*100)+")";C.appendChild(A);this._bottomBorder=A;var H=document.createElement("div");H.className="mouseOverOverlayTooltip";H.style.zIndex=this._zIndex;D.appendChild(H);this._tooltip=H;this._tooltip.style.display="none";var F=document.createElement("div");F.className="mouseOverOverlayTooltipSpan";H.appendChild(F);this._tooltipContent=F;return C;},_isUpdated:function(B,A,D,C){return this._width!=B||this._height!=A||this._left!=D||this._top!=C;},_updatePosition:function(C,A,F,E,D,B){if(this._isUpdated(C,A,F,E)){this._width=C;this._height=A;this._left=F;this._top=E;var G=20;this._instance.style.top=E-((this._type==actuate.Constant.tag.Table)?G:0)+"px";this._instance.style.left=F+"px";this._leftBorder.style.height=A+((this._type==actuate.Constant.tag.Table)?G:0)+"px";this._rightBorder.style.left=C+"px";this._rightBorder.style.height=A+((this._type==actuate.Constant.tag.Table)?G:0)+"px";this._topBorder.style.width=C+"px";this._bottomBorder.style.top=A+((this._type==actuate.Constant.tag.Table)?G:0)+"px";this._bottomBorder.style.width=C+"px";}this._tooltipLeft=D;this._tooltipTop=B;this._showTooltip();},_showTooltip:function(){if(this._tooltipLeft&&this._tooltipTop){if(this._type==actuate.Constant.tag.Label){this._tooltipContent.innerHTML=actuate.util.Utility.getLocalizedString("mouseOverOverlay.tooltip.selectLabel");}else{if(this._type==actuate.Constant.tag.DataItem){this._tooltipContent.innerHTML=actuate.util.Utility.getLocalizedString("mouseOverOverlay.tooltip.selectDataItem");}else{if(this._type==actuate.Constant.tag.Table){this._tooltipContent.innerHTML=actuate.util.Utility.getLocalizedString("mouseOverOverlay.tooltip.selectTable");}}}this._tooltip.style.left=this._tooltipLeft+"px";this._tooltip.style.top=this._tooltipTop+20+"px";this._tooltip.style.display="";this._tooltipLife=(new Date()).valueOf();if(!this._tooltipTimer){this._tooltipTimer=window.setTimeout(actuate.Method.bind(this._hideTooltip,this),this._tooltipElapseTime);}}},_hideTooltip:function(){var A=(new Date()).valueOf();if(A-this._tooltipLife>this._tooltipElapseTime){this._tooltip.style.display="none";if(this._tooltipTimer){delete this._tooltipTimer;this._tooltipTimer=null;}}else{this._tooltipTimer=window.setTimeout(actuate.Method.bind(this._hideTooltip,this),this._tooltipElapseTime);}},show:function(C,B,A,G,F,E,D){this._type=C;this._updatePosition(B,A,G,F,E,D);actuate.util.Element.show(this._instance);},hide:function(){this._updatePosition(0,0,0,0,0,0);actuate.util.Element.hide(this._instance);if(this._tooltipTimer){delete this._tooltipTimer;this._tooltipTimer=null;}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVDragColumnOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVDragColumnOverlay.prototype={_viewer:null,_instance:null,initialize:function(A){this._viewer=A;this._instance=this._create();this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;},startDnd:function(A){this._viewer.dndManager.startDnd(this._instance,A);},drag:function(A){this._instance.style.left=(A.x-this._instance.offsetX)+"px";},drop:function(){this.updatePosition(0,0,0,0);actuate.util.Element.hide(this._instance);},cancelDnd:function(){this.updatePosition(0,0,0,0);actuate.util.Element.hide(this._instance);},_create:function(){var B=this._viewer.contentPanel.floatPanel.instance;var A=document.createElement("div");A.style.position="absolute";A.style.borderStyle="dotted";A.style.borderColor="#9dc0d4";A.style.borderWidth="1px";A.style.backgroundColor="#bfd8ed";A.style.opacity="0.3";A.style.filter="alpha( opacity=30 )";B.appendChild(A);return A;},updatePosition:function(B,A,D,C){if(this._instance){this._instance.style.width=B+"px";this._instance.style.height=A+"px";this._instance.style.left=D+"px";this._instance.style.top=C+"px";}},show:function(B,A,D,C){this.updatePosition(B,A,D,C);actuate.util.Element.show(this._instance);}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVColumnResizeOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVColumnResizeOverlay.prototype={_viewer:null,_instance:null,_resizeToRight:true,_width:null,_currentWidth:null,_left:true,_panelOffset:null,initialize:function(A){this._viewer=A;this._instance=this._create();this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;this._panelOffset=null;},setResizeTo:function(A){return this._resizeToRight=A;},startDnd:function(B){if(document.selection){document.selection.empty();}else{if(window.getSelection){var A=window.getSelection();if(A){A.removeAllRanges();}}}document.body.style.cursor="E-resize";this._panelOffset=this._viewer.contentPanel.floatPanel.getScrolledOffset()[0];},drag:function(B){var A=B.x-this._panelOffset;if(this._resizeToRight){if(A>this._left){this._currentWidth=A-this._left;this._instance.style.width=this._currentWidth+"px";}}else{if(A<this._left+this._width){var C=this._left-A;this._instance.style.left=this._left-C+"px";this._currentWidth=C+this._width;this._instance.style.width=this._currentWidth+"px";}}},drop:function(){this._viewer.contentPanel.floatPanel.setDeltaWidth(this._currentWidth-this._width);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_COLUMN_WIDTH,[this._currentWidth,this._width]);this.hide();},cancelDnd:function(){this.hide();},_create:function(){var B=this._viewer.contentPanel.floatPanel.instance;var A=document.createElement("div");A.style.position="absolute";A.style.borderStyle="dotted";A.style.borderColor="#2a5fa7";A.style.borderWidth="1px";A.style.cursor="E-resize";B.appendChild(A);return A;},updatePosition:function(B,A,D,C){if(this._instance){this._width=B;this._currentWidth=B;this._left=D;var E=20;this._instance.style.width=B+"px";this._instance.style.height=A+E+"px";this._instance.style.left=D+"px";this._instance.style.top=C-E+"px";}},show:function(B,A,D,C){this.updatePosition(B,A,D,C);actuate.util.Element.show(this._instance);},hide:function(){this.updatePosition(0,0,0,0);actuate.util.Element.hide(this._instance);}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVDropColumnOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVDropColumnOverlay.prototype={_viewer:null,_instance:null,initialize:function(A){this._viewer=A;this._instance=this._create();this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;},_create:function(){var A=document.createElement("div");A.style.position="absolute";A.style.width="11px";A.style.height="6px";A.style.display="none";A.style.border="none";var C=document.createElement("input");C.type="button";C.className="dropIndicatorImage";A.appendChild(C);var B=this._viewer.contentPanel.floatPanel.instance;B.appendChild(A);return A;},updatePosition:function(B,A){if(this._instance){this._instance.style.left=B-6+"px";this._instance.style.top=A-8+"px";}},show:function(B,A){this.updatePosition(B,A);actuate.util.Element.show(this._instance);},hide:function(){actuate.util.Element.hide(this._instance);}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVLabelOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_selectedElement:null,_inlineEditControl:null,_inlineEditIcon:null,initialize:function(A){this._neh_mouseDown_closure=actuate.Method.bindAsEventListener(this._neh_mouseDown,this);actuate.iv.ui.overlay.IVLabelOverlay.superclass.initialize.call(this,A);this._offset=[-2,-1,0,1];},_createHeaderContent:function(){this._inlineEditIcon=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlayedit",titleKey:"labelOverlay.tooltip.inlineEdit",onClick:actuate.Method.bindAsEventListener(this._neh_click_toEdit,this)});this._createInlineEditControl();actuate.util.Event.observe(this._overlay,"mousedown",this._neh_mouseDown_closure,false);},_createInlineEditControl:function(){this._inlineEditControl=document.createElement("textarea");this._inlineEditControl.style.zIndex="16";this._inlineEditControl.style.display="none";this._inlineEditControl.style.position="absolute";this._inlineEditControl.style.backgroundColor="white";this._inlineEditControl.style.borderStyle="solid";this._inlineEditControl.style.borderWidth="1px";this._inlineEditControl.style.textAlign="left";this._inlineEditControl.disableDrag=true;var A=this._viewer.contentPanel.floatPanel.instance;A.appendChild(this._inlineEditControl);this._neh_keyPressEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_keyPressEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"keypress",this._neh_keyPressEditLabel_closure,false);this._neh_hideEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_hideEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"blur",this._neh_hideEditLabel_closure,false);this._neh_clickEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_clickEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"click",this._neh_clickEditLabel_closure,false);this._neh_contextMenuEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_contextMenuEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"contextmenu",this._neh_contextMenuEditLabel_closure,false);},_blurInlineTextEdit:function(){if(this._inlineEditControl==null){return ;}if(this._inlineEditControl.style.display!="none"){this._inlineEditControl.blur();this._inlineEditControl.style.display="none";}},showInlineEditControl:function(A){actuate.util.Element.hide(this._instance);actuate.util.Element.hide(this._header);this._shadow.hide();this._headerShadow.hide();this._inlineEditControl.value=A;this._inlineEditControl.style.display="block";this._inlineEditControl.style.width=this._instance.style.width;this._inlineEditControl.style.zIndex=this._instance.style.zIndex+1;this._inlineEditControl.style.left=this._instance.style.left;this._inlineEditControl.focus();this._inlineEditControl.select();},_neh_click_toEdit:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this.doInlineEdit();},doInlineEdit:function(){var C="";if(this._selectedElement){var A=this._selectedElement.childNodes;if(A!=undefined){for(var B=0;B<A.length;B++){if(A[B].nodeType==3&&A[B].nodeValue!=undefined){C+=A[B].nodeValue.replace(/^\s+|\s+$/g,"");if(B<A.length-1){C+="\n";}}}}else{if(this._selectedElement.innerText!=undefined){C=this._selectedElement.innerText;}}}this.showInlineEditControl(C);},updatePosition:function(B,A,D,C){actuate.iv.ui.overlay.IVLabelOverlay.superclass.updatePosition.call(this,B,A,D,C);if(this._instance){this._inlineEditControl.style.height=A+"px";this._inlineEditControl.style.top=C-1+"px";}},show:function(B,C,A,E,D){actuate.util.Element.hide(this._inlineEditIcon);actuate.iv.ui.overlay.IVLabelOverlay.superclass.show.call(this,C,A,E,D);this._selectedElement=B;},hide:function(){if(this._inlineEditControl.style.display=="block"){var A={name:"labelText",value:this._inlineEditControl.value};var B=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,B);}this._selectedElement=null;this._blurInlineTextEdit();actuate.iv.ui.overlay.IVLabelOverlay.superclass.hide.call(this);},_neh_keyPressEditLabel:function(B){if(B.keyCode==13&&B.ctrlkey){var A={name:"labelText",value:this._inlineEditControl.value};this._blurInlineTextEdit();var C=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,C);}else{if(B.keyCode==actuate.util.Event.KEY_ESC){this._blurInlineTextEdit();}}},_neh_hideEditLabel:function(B){var A={name:"labelText",value:this._inlineEditControl.value};this._blurInlineTextEdit();var C=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,C);},_neh_clickEditLabel:function(A){actuate.util.Event.stop(A);},_neh_mouseDown:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);},_neh_contextMenuEditLabel:function(A){actuate.util.Event.stop(A);},localBind:function(A){actuate.iv.ui.overlay.IVLabelOverlay.superclass.localBind.call(this,A);this._inlineEditIcon.configEnabled=A["Text"]?"YES":"NO";this.updateUIOptions();},updateUIOptions:function(){if(this._viewer.featureMap){var B=this._viewer.featureMap["Text"];var A=(B==undefined||B)&&this._inlineEditIcon.configEnabled=="YES";if(A){actuate.util.Element.show(this._inlineEditIcon);}else{actuate.util.Element.hide(this._inlineEditIcon);}}else{var A=this._inlineEditIcon.configEnabled=="YES";if(A){actuate.util.Element.show(this._inlineEditIcon);}else{actuate.util.Element.hide(this._inlineEditIcon);}}this._updateHeader();}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVLabelOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVLabelOverlays.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];},_allocateLabelOverlay:function(){var A=this._freeOverlays.pop();if(!A){if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){A=new actuate.iv.ui.overlay.IVLabelOverlay(this._viewer);}else{A=new actuate.iv.ui.overlay.IVLabelOverlayDashboard(this._viewer);}}this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},show:function(C,D,A,F,E){if(this._usedOverlays.length==1){this._usedOverlays[0].show(C,D,A,F,E);}else{var B=this._allocateLabelOverlay();B.show(C,D,A,F,E);}},doInlineEdit:function(){if(this._usedOverlays.length==1){this._usedOverlays[0].doInlineEdit();}},showEditTextBox:function(C,E,A,H,G){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var B=null;if(this._usedOverlays.length>0){B=this._usedOverlays[0];}else{B=this._allocateLabelOverlay();B.show(C,E,A,H,G);}var F="";if(C){if(C.innerText!=undefined){F=C.innerText;}else{if(C.textContent!=undefined){F=actuate.util.Utility.htmlDecode(C.innerHTML);var D=new RegExp("<br>","g");F=F.replace(D,"\n");}}}B.showInlineEditControl(F);},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},localBind:function(B){if(this._usedOverlays.length==1){var A=this._usedOverlays[this._usedOverlays.length-1];A.localBind(B);}},updateUIOptions:function(){if(this._usedOverlays.length==1){var A=this._usedOverlays[this._usedOverlays.length-1];A.updateUIOptions();}},updatePosition:function(C,A,E,D){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updatePosition(C,A,E,D);}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVOverlays.prototype={_viewer:null,_chartOverlay:null,_tableOverlay:null,_labelOverlay:null,_dataItemOverlay:null,_columnResizeOverlay:null,_crosstabResizeOverlay:null,_dragOverlay:null,_dropOverlay:null,_mouseOverOverlay:null,_crosstabOverlay:null,initialize:function(A){this._viewer=A;},reset:function(){if(this._chartOverlay){delete this._chartOverlay;}this._chartOverlay=null;if(this._flashChartOverlay){delete this._flashChartOverlay;}this._flashChartOverlay=null;if(this._tableOverlay){this._tableOverlay.reset();}if(this._labelOverlay){delete this._labelOverlay;}this._labelOverlay=null;if(this._dataItemOverlay){delete this._dataItemOverlay;}this._dataItemOverlay=null;if(this._dragOverlay){delete this._dragOverlay;}this._dragOverlay=null;if(this._columnResizeOverlay){delete this._columnResizeOverlay;}this._columnResizeOverlay=null;if(this._dropOverlay){delete this._dropOverlay;}this._dropOverlay=null;if(this._mouseOverOverlay){delete this._mouseOverOverlay;}this._mouseOverOverlay=null;if(this._crosstabOverlay){this._crosstabOverlay.reset();}if(this._crosstabResizeOverlay){delete this._crosstabResizeOverlay;}this._crosstabResizeOverlay=null;},getTableOverlay:function(){if(!this._tableOverlay){this._tableOverlay=new actuate.iv.ui.overlay.IVTableOverlay(this._viewer);}return this._tableOverlay;},getCrosstabOverlay:function(){if(!this._crosstabOverlay){this._crosstabOverlay=new actuate.iv.ui.overlay.IVCrosstabOverlays(this._viewer);}return this._crosstabOverlay;},getDataItemOverlay:function(){if(!this._dataItemOverlay){this._dataItemOverlay=new actuate.iv.ui.overlay.IVDataItemOverlays(this._viewer);}return this._dataItemOverlay;},getChartOverlay:function(){if(!this._chartOverlay){this._chartOverlay=new actuate.iv.ui.overlay.IVChartOverlays(this._viewer);}return this._chartOverlay;},getFlashChartOverlay:function(){if(!this._flashChartOverlay){this._flashChartOverlay=new actuate.iv.ui.overlay.IVFlashChartOverlays(this._viewer);}return this._flashChartOverlay;},getLabelOverlay:function(){if(!this._labelOverlay){this._labelOverlay=new actuate.iv.ui.overlay.IVLabelOverlays(this._viewer);}return this._labelOverlay;},getDragOverlay:function(){if(!this._dragOverlay){this._dragOverlay=new actuate.iv.ui.overlay.IVDragColumnOverlay(this._viewer);}return this._dragOverlay;},getCrosstabResizeOverlay:function(){if(!this._crosstabResizeOverlay){this._crosstabResizeOverlay=new actuate.iv.ui.overlay.IVCrosstabResizeOverlay(this._viewer);}return this._crosstabResizeOverlay;},getColumnResizeOverlay:function(){if(!this._columnResizeOverlay){this._columnResizeOverlay=new actuate.iv.ui.overlay.IVColumnResizeOverlay(this._viewer);}return this._columnResizeOverlay;},getMouseOverOverlay:function(){if(!this._mouseOverOverlay){this._mouseOverOverlay=new actuate.iv.ui.overlay.IVMouseOverOverlay(this._viewer);}return this._mouseOverOverlay;},getDropOverlay:function(B,A){if(!this._dropOverlay){this._dropOverlay=new actuate.iv.ui.overlay.IVDropColumnOverlay(this._viewer);}return this._dropOverlay;}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVChartOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_enableIcon:null,_chart:null,_enabled:false,_chartType:null,_simpleFilterEnabled:false,_filterIcon:null,_drillUpCategoriesIcon:null,_drillUpSeriesIcon:null,_chartElement:null,_useOffsetWidth:false,_hasBody:false,_shadowClass:undefined,initialize:function(C,B,A){this._chart=B;this._chartType=A;actuate.iv.ui.overlay.IVChartOverlay.superclass.initialize.call(this,C,"chartOverlay");actuate.util.Event.observe(window,"resize",actuate.Method.bindAsEventListener(this.__eh_resize,this),false);},_createHeaderContent:function(){this._filterIcon=this._addButton({className:"actuateCSSSprite_selection actuateIV_overlayfilter",titleKey:"columnOverlay.tooltip.filter",onClick:actuate.Method.bindAsEventListener(this._neh_click_filter,this)});this._drillUpCategoriesIcon=this._addButton({className:"chartOverlayDrillUpIcon actuateCSSSprite_selection actuateIV_overlay_drill_up_from_Categories",titleKey:"chartOverlay.tooltip.drillUpCategories",onClick:actuate.Method.bindAsEventListener(this._neh_click_drillUp_categories,this)});this._drillUpSeriesIcon=this._addButton({className:"chartOverlayDrillUpIcon actuateCSSSprite_selection actuateIV_overlay_drill_up_from_Series",titleKey:"chartOverlay.tooltip.drillUpSeries",onClick:actuate.Method.bindAsEventListener(this._neh_click_drillUp_series,this)});this._bodyShadow=new actuate.util.Shadow({mode:"frame",zIndex:0,absoluteBorder:true,offset:3});},__eh_resize:function(){this.updatePosition();},blur_overlay:function(){this._instance.style.display="none";},_neh_click_filter:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_FILTER);},_neh_click_drillUp_categories:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_CATEGORIES);},_neh_click_drillUp_series:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_SERIES);},enableFilter:function(C,B){var A=!this._hidden&&(C==undefined||C)&&this._filterIcon.configEnabled=="YES";this._filterIcon.style.display=A?"block":"none";this._filterIcon.style.visibility=A?"visible":"hidden";if(B&&B.hasFilter!=null){this._filterIcon.className=B.hasFilter?"overlayIcon actuateCSSSprite_selection actuateIV_overlayexistfilter":"overlayIcon actuateCSSSprite_selection actuateIV_overlayfilter";}this._updateHeader();},enableDrillUp:function(){if(this._drillUpCategoriesIcon){this._drillUpCategoriesIcon.style.display="none";this._drillUpCategoriesIcon.style.visibility="hidden";}if(this._drillUpSeriesIcon){this._drillUpSeriesIcon.style.display="none";this._drillUpSeriesIcon.style.visibility="hidden";}if(!this._hidden&&this._canDrill){var B=this._canDrill;var A="24px";if(B.canDrillUpFromCategories){this._drillUpCategoriesIcon.style.left=A;this._drillUpCategoriesIcon.style.display="block";this._drillUpCategoriesIcon.style.visibility="visible";if(B.canDrillUpFromCategoriesNames&&B.canDrillUpFromCategoriesNames.length>0){this._drillUpCategoriesIcon.title=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUpFromCategoriesName",B.canDrillUpFromCategoriesNames[0]);}A="42px";}if(B.canDrillUpFromSeries){this._drillUpSeriesIcon.style.left=A;this._drillUpSeriesIcon.style.display="block";this._drillUpSeriesIcon.style.visibility="visible";if(B.canDrillUpFromSeriesNames&&B.canDrillUpFromSeriesNames.length>0){this._drillUpSeriesIcon.title=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUpFromSeriesName",B.canDrillUpFromSeriesNames[0]);}}}},updateUIOptions:function(A){if(this._viewer.featureMap){this.enableFilter(this._viewer.featureMap["Filter"],A);}else{this.enableFilter(true,A);}},_beforeShow:function(B,A){this._chartElement=B;this._chartElement=this._chartElement.tagName=="OBJECT"?this._chartElement.parentNode:this._chartElement;this._filterIcon.style.display="none";this._filterIcon.style.visibility="hidden";this._drillUpCategoriesIcon.style.display="none";this._drillUpCategoriesIcon.style.visibility="hidden";this._drillUpSeriesIcon.style.display="none";this._drillUpSeriesIcon.style.visibility="hidden";},_afterShow:function(){if(!this._bodyShadow.isVisible()){this._bodyShadow.show(this._overlay);this._bodyShadow.setZIndex(0);}else{if(this._bodyShadow.getDom()){this._bodyShadow.getDom().style.display="block";}}var B=this._viewer.contentPanel.floatPanel.getCurrentScale();this._bodyShadow.realign(this._left,this._top,this._width*B,(this._useOffsetWidth?this._chartElement.offsetHeight:this._chartElement.clientHeight)*B);if(this._bodyShadow.getDom()){var A="actuate-iv-overlay";this._shadowClass=this._bodyShadow.getDom().className;if(this._shadowClass){A=this._shadowClass+" "+A;}this._bodyShadow.getDom().className=A;}},_beforeHide:function(){if(this._bodyShadow.getDom()){this._bodyShadow.getDom().style.display="none";this._bodyShadow.getDom().className=this._shadowClass;}this._canDrill=null;},updatePosition:function(C,B,F,E){if(this._chartElement&&this._instance){var D;D=actuate.util.Element.cumulativeOffset(this._chartElement);var A=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);var C;var B=0;if(this._useOffsetWidth){C=this._chartElement.offsetWidth;}else{C=this._chartElement.clientWidth+2;}var F=D[0]-A[0];var E=D[1]-A[1]-1;E+=3;F+=3;C-=6;B-=6;actuate.iv.ui.overlay.IVChartOverlay.superclass.updatePosition.call(this,C,B,F,E);}},updateCanDrill:function(A){if(this._canDrill){actuate.Class.extend(this._canDrill,A);}else{this._canDrill=A;}this.enableDrillUp();this._updateHeader();},localBind:function(A){actuate.iv.ui.overlay.IVChartOverlay.superclass.localBind.call(this,A);this._filterIcon.configEnabled=A["Filter"]?"YES":"NO";},_neh_click_more:function(A){A.canDrill=this._canDrill;actuate.iv.ui.overlay.IVChartOverlay.superclass._neh_click_more.call(this,A);}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVChartOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVChartOverlays.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];},_allocateChartOverlay:function(){var A=this._freeOverlays.pop();if(!A){if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){A=new actuate.iv.ui.overlay.IVChartOverlay(this._viewer);}else{A=new actuate.iv.ui.overlay.IVChartOverlayDashboard(this._viewer);}}this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},show:function(B,A){var C;if(this._usedOverlays.length==1){C=this._usedOverlays[0];}else{C=this._allocateChartOverlay();}C.setHeaderVisible(true);C.show(B,A);return C;},showWithoutHeader:function(B,A){var C=this.show(B,A);if(C){C.setHeaderVisible(false);}},enableContextMenu:function(A){if(this._usedOverlays.length==1){this._usedOverlays[0].enableContextMenu(A);}else{var B=this._allocateChartOverlay();B.enableContextMenu(A);}},adjust:function(B,A){if(this._usedOverlays.length==1){this._usedOverlays[0].updatePosition(B,A);}else{var C=this._allocateChartOverlay();C.updatePosition(B,A);}},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},blur_overlay:function(B){var A=this._allocateColumnOverlay();A.blur_overlay();},updateCanDrill:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updateCanDrill(A);}},localBind:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.localBind(A);}this.updateUIOptions();},updateUIOptions:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updateUIOptions(A);}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVChartOverlayDashboard=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_enableIcon:null,_chart:null,_enabled:false,_chartType:null,_simpleFilterEnabled:false,_filterIcon:null,_chartElement:null,_useOffsetWidth:false,_hasBody:false,_shadowClass:undefined,initialize:function(C,B,A){this._chart=B;this._chartType=A;actuate.iv.ui.overlay.IVChartOverlayDashboard.superclass.initialize.call(this,C,"chartOverlay");actuate.util.Event.observe(window,"resize",actuate.Method.bindAsEventListener(this.__eh_resize,this),false);},_createHeaderContent:function(){this._bodyShadow=new actuate.util.Shadow({mode:"frame",zIndex:0,absoluteBorder:true,offset:3});},__eh_resize:function(){this.updatePosition();},blur_overlay:function(){this._instance.style.display="none";},_neh_click_filter:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_FILTER);},_neh_click_drillUp_categories:function(A){},_neh_click_drillUp_series:function(A){},enableFilter:function(B,A){},enableDrillUp:function(){},updateUIOptions:function(A){this.enableFilter(true,A);},_beforeShow:function(B,A){this._chartElement=B;this._chartElement=this._chartElement.tagName=="OBJECT"?this._chartElement.parentNode:this._chartElement;},_afterShow:function(){var B=false;if(!this._bodyShadow.isVisible()){this._bodyShadow.show(this._overlay);this._bodyShadow.setZIndex(0);}else{if(this._bodyShadow.getDom()){B=true;}}var C=this._viewer.contentPanel.floatPanel.getCurrentScale();this._bodyShadow.realign(this._left,this._top,this._width*C,(this._useOffsetWidth?this._chartElement.offsetHeight:this._chartElement.clientHeight-this._viewer.contentMargin.bottom)*C);if(B){this._bodyShadow.getDom().style.display="block";}if(this._bodyShadow.getDom()){var A="actuate-iv-overlay";this._shadowClass=this._bodyShadow.getDom().className;if(this._shadowClass){A=this._shadowClass+" "+A;}this._bodyShadow.getDom().className=A;}},_beforeHide:function(){if(this._bodyShadow.getDom()){this._bodyShadow.getDom().style.display="none";this._bodyShadow.getDom().className=this._shadowClass;}},updatePosition:function(C,B,F,E){if(this._chartElement&&this._instance){var D;D=actuate.util.Element.cumulativeOffset(this._chartElement);var A=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);var C;var B=0;if(this._useOffsetWidth){C=this._chartElement.offsetWidth;}else{C=this._chartElement.clientWidth+1;}var F=D[0]-A[0];var E=D[1]-A[1]-1;E+=3;F+=3;C-=6;B-=6;actuate.iv.ui.overlay.IVChartOverlayDashboard.superclass.updatePosition.call(this,C,B,F,E);}},updateCanDrill:function(A){},localBind:function(A){actuate.iv.ui.overlay.IVChartOverlayDashboard.superclass.localBind.call(this,A);},_neh_click_more:function(A){A.canDrill=this._canDrill;actuate.iv.ui.overlay.IVChartOverlayDashboard.superclass._neh_click_more.call(this,A);}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVColumnOverlayDashboard=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_filterIcon:null,_contextMenuIcon:null,_body:null,_cover:null,_leftBorder:null,_rightBorder:null,_width:null,_height:null,_left:null,_top:null,_dndEnabled:false,_borderWidth:2,columnIndex:null,_noMouseDown:true,initialize:function(A){actuate.iv.ui.overlay.IVColumnOverlayDashboard.superclass.initialize.call(this,A);this._mousedown_closure=actuate.Method.bindAsEventListener(this._neh_mousedown,this);this._mouseup_closure=actuate.Method.bindAsEventListener(this._neh_mouseup,this);this._drag_closure=actuate.Method.bindAsEventListener(this._neh_drag,this);this._border_mousedown_closure=actuate.Method.bindAsEventListener(this._neh_border_mousedown,this);this._border_mouseup_closure=actuate.Method.bindAsEventListener(this._neh_border_mouseup,this);this._border_drag_closure=actuate.Method.bindAsEventListener(this._neh_border_drag,this);this._width=0;this._height=0;this._left=0;this._top=0;},_createHeaderContent:function(){},_createBodyContent:function(){var A=document.createElement("div");A.style.position="absolute";A.style.backgroundColor="#2998fb";A.style.opacity="0";A.style.filter="alpha( opacity=0 )";A.style.left="0px";A.style.width="3px";A.style.height="100%";A.style.cursor="E-resize";this._body.appendChild(A);this._leftBorder=A;var B=document.createElement("div");B.style.position="absolute";B.style.backgroundColor="#2998fb";B.style.opacity="0";B.style.filter="alpha( opacity=0 )";B.style.right="0px";B.style.width="3px";B.style.height="100%";B.style.cursor="E-resize";this._body.appendChild(B);this._rightBorder=B;},_neh_click:function(A){actuate.util.Event.stop(A);if(A.ctrlKey&&!this._hidden){this._viewer._overlay.getTableOverlay().hideColumn(this);}},_neh_click_sort_asc:function(A){},_neh_click_sort_desc:function(A){},_neh_click_filter:function(A){actuate.util.Event.stop(A);this._viewer._contextMenu.hideMenu(this._viewer);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_FILTER);},enableDnd:function(B){var A=(B==undefined||B)&&this._cover.configEnabled=="YES";var C=actuate.util.Utility.getLocalizedString("columnOverlay.tooltip.dnd");this._cover.title=A?C:"";if(A){if(!this._dndEnabled){actuate.util.Event.observe(this._cover,"mousedown",this._mousedown_closure,false);this._dndEnabled=true;}}else{actuate.util.Event.stopObserving(this._cover,"mousedown",this._mousedown_closure,false);this._dndEnabled=false;}},enableResize:function(B){var A=(B==undefined||B)&&this._leftBorder.configEnabled=="YES";var C=actuate.util.Utility.getLocalizedString("columnOverlay.tooltip.resize");this._leftBorder.title=A?C:"";this._rightBorder.title=A?C:"";this._leftBorder.style.cursor=A?"E-resize":"default";this._rightBorder.style.cursor=A?"E-resize":"default";if(A){if(!this._resizeEnabled){actuate.util.Event.observe(this._leftBorder,"mousedown",this._border_mousedown_closure,false);actuate.util.Event.observe(this._rightBorder,"mousedown",this._border_mousedown_closure,false);this._resizeEnabled=true;}}else{actuate.util.Event.stopObserving(this._leftBorder,"mousedown",this._border_mousedown_closure,false);actuate.util.Event.stopObserving(this._rightBorder,"mousedown",this._border_mousedown_closure,false);this._resizeEnabled=false;}},enableSort:function(A){},enableFilter:function(A){},showFilter:function(A){this._viewer._contextMenu.showFilter(A);},_afterShow:function(){},updatePosition:function(C,A,E,D){if(this._instance){actuate.iv.ui.overlay.IVColumnOverlayDashboard.superclass.updatePosition.call(this,C,A,E,D);var B=3;this._cover.style.width=((C>0)?C-2*B:C)+"px";}},localBind:function(A){actuate.iv.ui.overlay.IVColumnOverlayDashboard.superclass.localBind.call(this,A);this._simpleFilterEnabled=A["SimpleFilter"]?true:false;this._cover.configEnabled=A["ReorderColumns"]?"YES":"NO";this._leftBorder.configEnabled=A["ColumnWidth"]?"YES":"NO";},updateUIOptions:function(){if(this._viewer.featureMap){this.enableDnd(this._viewer.featureMap["ReorderColumns"]);this.enableResize(this._viewer.featureMap["ColumnWidth"]);}else{this.enableDnd(true);this.enableResize(true);}this._updateHeader();},_neh_border_mousedown:function(B){if(this._viewer.interactive){actuate.util.Event.stop(B);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this._viewer.contentPanel.hibernate();actuate.util.Event.observe(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.observe(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getColumnResizeOverlay();A.show(this._width,this._height,this._left,this._top);}},_neh_border_mouseup:function(B){actuate.util.Event.stop(B);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getColumnResizeOverlay();A.hide();this._viewer.contentPanel.activate();},_neh_border_drag:function(D){actuate.util.Event.stop(D);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var E=this._viewer.contentPanel.floatPanel.getScrolledOffset();var B=actuate.util.Event.pointerX(D)-E[0];var C=(B-this._left>this._width/2);var A=this._viewer._overlay.getColumnResizeOverlay();A.setResizeTo(C);this._viewer.dndManager.startDragAndDrop(A,D,null);},_neh_mousedown:function(A){if(this._viewer.interactive&&actuate.util.Event.isLeftClick(A)){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this._viewer.contentPanel.hibernate();actuate.util.Event.observe(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.observe(this._instance,"mousemove",this._drag_closure,false);}},_neh_mouseup:function(A){actuate.util.Event.stop(A);actuate.util.Event.stopObserving(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this._instance,"mousemove",this._drag_closure,false);this._viewer.contentPanel.activate();},_neh_drag:function(B){actuate.util.Event.stop(B);actuate.util.Event.stopObserving(this._instance,"mouseup",this._mouseup_closure,false);actuate.util.Event.stopObserving(this._instance,"mousemove",this._drag_closure,false);var A=this._viewer._overlay.getDragOverlay();A.show(this._width,this._height,this._left,this._top);this._viewer.dndManager.startDragAndDrop(A,B,this._viewer._table.getSelectionManager());}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVLabelOverlayDashboard=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_selectedElement:null,_inlineEditControl:null,_inlineEditIcon:null,initialize:function(A){this._neh_mouseDown_closure=actuate.Method.bindAsEventListener(this._neh_mouseDown,this);actuate.iv.ui.overlay.IVLabelOverlayDashboard.superclass.initialize.call(this,A);this._offset=[-2,-1,0,1];},_createHeaderContent:function(){actuate.util.Event.observe(this._overlay,"mousedown",this._neh_mouseDown_closure,false);this._createInlineEditControl();},_createInlineEditControl:function(){this._inlineEditControl=document.createElement("textarea");this._inlineEditControl.style.zIndex="16";this._inlineEditControl.style.display="none";this._inlineEditControl.style.position="absolute";this._inlineEditControl.style.backgroundColor="white";this._inlineEditControl.style.borderStyle="solid";this._inlineEditControl.style.borderWidth="1px";this._inlineEditControl.style.textAlign="left";this._inlineEditControl.disableDrag=true;var A=this._viewer.contentPanel.floatPanel.instance;A.appendChild(this._inlineEditControl);this._neh_keyPressEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_keyPressEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"keypress",this._neh_keyPressEditLabel_closure,false);this._neh_hideEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_hideEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"blur",this._neh_hideEditLabel_closure,false);this._neh_clickEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_clickEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"click",this._neh_clickEditLabel_closure,false);this._neh_contextMenuEditLabel_closure=actuate.Method.bindAsEventListener(this._neh_contextMenuEditLabel,this);actuate.util.Event.observe(this._inlineEditControl,"contextmenu",this._neh_contextMenuEditLabel_closure,false);},_blurInlineTextEdit:function(){if(this._inlineEditControl==null){return ;}if(this._inlineEditControl.style.display!="none"){this._inlineEditControl.blur();this._inlineEditControl.style.display="none";}},showInlineEditControl:function(A){actuate.util.Element.hide(this._instance);actuate.util.Element.hide(this._header);this._shadow.hide();this._headerShadow.hide();this._inlineEditControl.value=A;this._inlineEditControl.style.display="block";this._inlineEditControl.style.width=this._instance.style.width;this._inlineEditControl.style.zIndex=this._instance.style.zIndex+1;this._inlineEditControl.style.left=this._instance.style.left;this._inlineEditControl.focus();this._inlineEditControl.select();},_neh_click_toEdit:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this.doInlineEdit();},doInlineEdit:function(){var C="";if(this._selectedElement){var A=this._selectedElement.childNodes;if(A!=undefined){for(var B=0;B<A.length;B++){if(A[B].nodeType==3&&A[B].nodeValue!=undefined){C+=A[B].nodeValue.replace(/^\s+|\s+$/g,"");if(B<A.length-1){C+="\n";}}}}else{if(this._selectedElement.innerText!=undefined){C=this._selectedElement.innerText;}}}this.showInlineEditControl(C);},updatePosition:function(B,A,D,C){actuate.iv.ui.overlay.IVLabelOverlayDashboard.superclass.updatePosition.call(this,B,A,D,C);if(this._instance){this._inlineEditControl.style.height=A+"px";this._inlineEditControl.style.top=C-1+"px";}},show:function(B,C,A,E,D){actuate.iv.ui.overlay.IVLabelOverlayDashboard.superclass.show.call(this,C,A,E,D);this._selectedElement=B;},hide:function(){if(this._inlineEditControl.style.display=="block"){var A={name:"labelText",value:this._inlineEditControl.value};var B=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,B);}this._selectedElement=null;this._blurInlineTextEdit();actuate.iv.ui.overlay.IVLabelOverlay.superclass.hide.call(this);},_neh_keyPressEditLabel:function(B){if(B.keyCode==13&&B.ctrlkey){var A={name:"labelText",value:this._inlineEditControl.value};this._blurInlineTextEdit();var C=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,C);}else{if(B.keyCode==actuate.util.Event.KEY_ESC){this._blurInlineTextEdit();}}},_neh_hideEditLabel:function(B){var A={name:"labelText",value:this._inlineEditControl.value};this._blurInlineTextEdit();var C=[A];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_TEXT,C);},_neh_clickEditLabel:function(A){actuate.util.Event.stop(A);},_neh_mouseDown:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);},_neh_contextMenuEditLabel:function(A){actuate.util.Event.stop(A);},localBind:function(A){actuate.iv.ui.overlay.IVLabelOverlayDashboard.superclass.localBind.call(this,A);this.updateUIOptions();},updateUIOptions:function(){}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVDataItemOverlayDashboard=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_sortIconAsc:null,_sortIconDesc:null,_filterIcon:null,initialize:function(A){actuate.iv.ui.overlay.IVDataItemOverlayDashboard.superclass.initialize.call(this,A);this._offset=[2,0,0,0];},_createHeaderContent:function(){},_neh_click_sort_asc:function(A){},_neh_click_sort_desc:function(A){},_neh_click_filter:function(A){},_neh_click:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A);},_afterShow:function(){actuate.util.Element.show(this._instance);},localBind:function(A){actuate.iv.ui.overlay.IVDataItemOverlayDashboard.superclass.localBind.call(this,A);this.updateUIOptions();},enableSort:function(A){},enableFilter:function(A){},showFilter:function(A){},updateUIOptions:function(){}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVFlashChartOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVChartOverlay,{_useOffsetWidth:true,initialize:function(C,B,A){actuate.iv.ui.overlay.IVFlashChartOverlay.superclass.initialize.call(this,C,"chartOverlay");}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVFlashChartOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVFlashChartOverlays.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];},_allocateChartOverlay:function(){var A=this._freeOverlays.pop();if(this._viewer.apiInstance._viewingMode==actuate.Constant.ViewingMode.NON_DASHBOARD){A=new actuate.iv.ui.overlay.IVChartOverlay(this._viewer);}else{A=new actuate.iv.ui.overlay.IVChartOverlayDashboard(this._viewer);}this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},show:function(B,A){if(this._usedOverlays.length==1){this._usedOverlays[0].show(B,A);}else{var C=this._allocateChartOverlay();C.show(B,A);}},enableContextMenu:function(A){if(this._usedOverlays.length==1){this._usedOverlays[0].enableContextMenu(A);}else{var B=this._allocateChartOverlay();B.enableContextMenu(A);}},adjust:function(B,A){if(this._usedOverlays.length==1){this._usedOverlays[0].updatePosition(B,A);}else{var C=this._allocateChartOverlay();C.updatePosition(B,A);}},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},blur_overlay:function(B){var A=this._allocateColumnOverlay();A.blur_overlay();},updateCanDrill:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updateCanDrill(A);}},localBind:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.localBind(A);}this.updateUIOptions();},updateUIOptions:function(A){if(this._usedOverlays.length==1){var B=this._usedOverlays[this._usedOverlays.length-1];B.updateUIOptions(A);}}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVCrosstabOverlays=actuate.Class.create();actuate.iv.ui.overlay.IVCrosstabOverlays.prototype={_viewer:null,_instance:null,_freeOverlays:null,_usedOverlays:null,initialize:function(A){this._viewer=A;this._freeOverlays=[];this._usedOverlays=[];},_allocateCrosstabOverlay:function(C){var A;var B=[];do{A=this._freeOverlays.pop();B.push(A);}while(A&&A._overlayType!=C);B.pop();while(B.length>0){this._freeOverlays.push(B.pop());}if(!A){A=new actuate.iv.ui.overlay.IVCrosstabOverlay(this._viewer,C);}this._usedOverlays.push(A);return A;},reset:function(){while(this._freeOverlays.length>0){var A=this._freeOverlays.pop();delete A;}while(this._usedOverlays.length>0){var A=this._usedOverlays.pop();delete A;}},show:function(C,N){if(C.parentNode==N){return ;}var L=actuate.util.Element.cumulativeOffset(N);var H=N.offsetWidth;var D=N.offsetHeight;var M=this._viewer.contentPanel.floatPanel.getOffset();var K=actuate.util.Element.cumulativeOffset(C);var I=[C.offsetWidth,C.offsetHeight];var P=[C.parentNode.offsetWidth,C.parentNode.offsetHeight];for(var G=0;G<2;G++){if(P[G]>0&&P[G]<I[G]){I[G]=P[G];}}var E;if(N.tagName=="TH"||N.parentNode.tagName=="TH"){if(this._isRowLevel(N.tagName=="TH"?N:N.parentNode)){E=this._allocateCrosstabOverlay(actuate.iv.constant.OverlayType.CELL);E.show(H,D,L[0]-M[0],L[1]-M[1],true);var J=this._getRowLevelIndex(N.tagName=="TH"?N:N.parentNode);this._viewer._crosstab._selectionManager.selectedIndexMap.rowlevelindex=J;this._viewer._crosstab._selectionManager.selectedIndexMap.rowspan=N.getAttribute("rowspan");}else{var B=this._getFirstThInCrosstab(C);E=this._allocateCrosstabOverlay(actuate.iv.constant.OverlayType.CELL);E.show(H,D,L[0]-M[0],L[1]-M[1],true);var J=this._getColumnLevelIndex(N.tagName=="TH"?N:N.parentNode,B);this._viewer._crosstab._selectionManager.selectedIndexMap.columnlevelindex=J;this._viewer._crosstab._selectionManager.selectedIndexMap.colspan=N.getAttribute("colspan");}}else{if(N.tagName=="TD"||N.parentNode.tagName=="TD"){var A=this._getCellColumnIndex(N);var O=this._getCellRowIndex(N);this._viewer._crosstab._selectionManager.selectedIndexMap={columnlevelindex:A,rowlevelindex:O};}}E=this._allocateCrosstabOverlay(actuate.iv.constant.OverlayType.CELL);E.show(H,D,L[0]-M[0],L[1]-M[1],true);var F=this._getIid(N);if(F!=null){this._viewer._crosstab._selectionManager.selectedIndexMap.ItemId=F;}return E;},_isRowLevel:function(B){var A=B.parentNode;var C=this._getChildrenByTagName(A,"td");if(C&&C.length>0){return true;}return false;},_getChildrenByTagName:function(C,B){var D=new Array();for(var A=0;A<C.childNodes.length;A++){if(C.childNodes[A]&&C.childNodes[A].tagName&&C.childNodes[A].tagName.toLowerCase()==B.toLowerCase()){D.push(C.childNodes[A]);}}return D;},_getFirstTdInCrosstab:function(B){var A=B.getElementsByTagName("td");return A[0];},_getCellColumnIndex:function(A){var C=A.previousSibling;var B=0;while(C){if(C.nodeName.toLowerCase()=="td"){B++;}C=C.previousSibling;}return B;},_getCellRowIndex:function(A){var D=A;while(D.tagName.toLowerCase()!="tr"){if(D.parentNode){D=D.parentNode;}else{break;}}var C=D.previousSibling;var B=0;while(C){if(C.nodeName.toLowerCase()=="tr"){if(C.getElementsByTagName("td").length>0){B++;}else{break;}}C=C.previousSibling;}return B;},_getRowLevelIndex:function(A){var C=A.previousSibling;var B=0;while(C){if(C.nodeType==1&&C.nodeName){if(C.nodeName.toLowerCase()=="th"){B++;}else{break;}}C=C.previousSibling;}return B;},_getColumnLevelIndex:function(A,C){var G=A;while(G.tagName.toLowerCase()!="tr"){if(G.parentNode){G=G.parentNode;}else{break;}}var B=C.getAttribute("rowspan");var E=G.nextSibling;var D=0;while(E){if(E.nodeName&&E.nodeName.toLowerCase()=="tr"){D++;}var F=true;if(this._getChildrenByTagName(E,"td").length>0){F=false;}if(!F){break;}E=E.nextSibling;}return B-D;},_getFirstThInCrosstab:function(D){var B=D.getElementsByTagName("th");var A=B[0];var C=A.parentNode;if(this._getChildrenByTagName(C,"td").length==0){return A;}return null;},_getLabelThInColumn:function(D,H){var J=D.getElementsByTagName("tr");if(J.length>0){for(var G=0;G<J.length;G++){var F=this._getChildrenByTagName(J[G],"td");var C=true;if(F!=null&&F.length>0){C=false;}if(G==0){H++;}if(C){var A=J[G].getElementsByTagName("th");if(A){for(var E=0;E<A.length;E++){var B=A[E].getElementsByTagName("div");if(E==H){if(B&&B.length>0){var I=B[0].getAttribute("element_type");if(I!=null&&I.toLowerCase()=="label"){return A[E];}}}}}}}}return null;},_getLabelThInRow:function(D,G){var I=D.getElementsByTagName("tr");if(I.length>0){for(var F=0;F<I.length;F++){var E=this._getChildrenByTagName(I[F],"td");var C=true;if(E!=null&&E.length>0){C=false;}if(C){G=G+1;}else{if(F==G){var A=this._getChildrenByTagName(I[F],"th");if(A){var B=A[A.length-1].getElementsByTagName("div");if(B&&B.length>0){var H=B[0].getAttribute("element_type");if(H!=null&&H.toLowerCase()=="label"){return A[A.length-1];}}}}}}}return null;},adjust:function(B,C,A,F,E){var D=this._usedOverlays[B];if(D){D.updatePosition(C,A,F,E);}},hideCrosstab:function(C){var B=[];do{var A=this._usedOverlays.pop();B.push(A);}while(A!=C);this._viewer._crosstab.getSelectionManager().deSelect(this._usedOverlays.length);B.pop();this._freeOverlays.push(C);C.hide();while(B.length>0){this._usedOverlays.push(B.pop());}if(this._usedOverlays.length>0){this._usedOverlays[0].enableContextMenu(true);}},hide:function(){var A=this._usedOverlays.pop();while(A){A.hide();this._freeOverlays.push(A);A=this._usedOverlays.pop();}},localBind:function(B){this._featureMap=B;if(this._usedOverlays){for(var A=0;A<this._usedOverlays.length;A++){var C=this._usedOverlays[A];if(C){C.bind(B);}}}this.updateUIOptions();},updateUIOptions:function(){if(this._usedOverlays){for(var A=0;A<this._usedOverlays.length;A++){var B=this._usedOverlays[A];if(B){B.updateUIOptions();}}}},_getIid:function(D){var B=D.getAttribute("iid");if(B!=null){return B;}var C=D.getElementsByTagName("div");for(var A=0;A<C.length;A++){B=C[A].getAttribute("iid");if(B!=null){return B;}}return null;}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVCrosstabOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{_ctxMenuItems:["AlignCenter","AlignLeft","AlignRight","ChangeFont","DataAnamyzer","ExportReport","Format","ShowTooltip","TextEdit"],_leftBorder:null,_rightBorder:null,_borderWidth:2,_overlayType:null,_resizeableConfig:null,_resizeableBorders:null,_resizingBorder:null,initialize:function(B,A){this._overlayType=A;this._resizeableConfig={TOP:true,BOTTOM:true,LEFT:true,RIGHT:true};this._resizeableBorders=[];this._border_mousedown_closure=actuate.Method.bindAsEventListener(this._neh_border_mousedown,this);this._border_mouseup_closure=actuate.Method.bindAsEventListener(this._neh_border_mouseup,this);this._border_drag_closure=actuate.Method.bindAsEventListener(this._neh_border_drag,this);actuate.iv.ui.overlay.IVCrosstabOverlay.superclass.initialize.call(this,B,"crosstabOverlay");},_createBodyContent:function(){var A=actuate.iv.constant.OverlayType;if(this._overlayType==A.CELL){this._offset=[-1,-1,-2,-2];}if(this._overlayType==A.ROW){this._offset=[-1,-2,-2,-2];}else{if(this._overlayType==A.COLUMN){this._offset=[-1,-2,-2,-2];}}},enableResize:function(C){var B;if(C){B=C;}else{B=[actuate.iv.constant.Direction.TOP,actuate.iv.constant.Direction.BOTTOM,actuate.iv.constant.Direction.LEFT,actuate.iv.constant.Direction.RIGHT];}for(var A=0;A<B.length;A++){this._createResizeableBorder(B[A]);}},disableResize:function(E){var D;if(E){D=E;}else{D=[actuate.iv.constant.Direction.TOP,actuate.iv.constant.Direction.BOTTOM,actuate.iv.constant.Direction.LEFT,actuate.iv.constant.Direction.RIGHT];}for(var A=0;A<D.length;A++){var C=D[A];var B=this._resizeableBorders[C];if(B){actuate.util.Event.stopObserving(B,"mousedown",this._border_mousedown_closure,false);this._body.removeChild(B);this._resizeableBorders[C]=null;}}},_createResizeableBorder:function(B){var A=null;this.disableResize([B]);if(this._body){A=document.createElement("div");A.direction=B;A.style.position="absolute";A.style.backgroundColor="#9dc0d4";A.style.opacity="0";A.style.filter="alpha( opacity=0 )";switch(B){case actuate.iv.constant.Direction.TOP:A.style.top="0px";A.style.width="100%";A.style.height="3px";A.style.cursor="n-resize";break;case actuate.iv.constant.Direction.BOTTOM:A.style.bottom="0px";A.style.width="100%";A.style.height="3px";A.style.cursor="s-resize";break;case actuate.iv.constant.Direction.LEFT:A.style.left="0px";A.style.width="3px";A.style.height="100%";A.style.cursor="e-resize";break;case actuate.iv.constant.Direction.RIGHT:A.style.right="0px";A.style.width="3px";A.style.height="100%";A.style.cursor="w-resize";break;default:break;}this._body.appendChild(A);this._resizeableBorders[B]=A;if(this._resizeableConfig[B]){A.title=actuate.util.Utility.getLocalizedString("crosstabOverlay.tooltip.resize");actuate.util.Event.observe(A,"mousedown",this._border_mousedown_closure,false);}}return A;},show:function(B,A,E,D,C){if(B==0||A==0){return ;}this._showHeader=C;actuate.iv.ui.overlay.IVCrosstabOverlay.superclass.show.call(this,B,A,E,D);},_beforeHide:function(){this.disableResize();},bind:function(A){actuate.iv.ui.overlay.IVCrosstabOverlay.superclass.localBind.call(this,A);this._resizeableConfig.TOP=false;this._resizeableConfig.BOTTOM=false;this._resizeableConfig.LEFT=false;this._resizeableConfig.RIGHT=false;switch(this._overlayType){case actuate.iv.constant.OverlayType.ROW:this._resizeableConfig.TOP=A.RowHeight;this._resizeableConfig.BOTTOM=A.RowHeight;break;case actuate.iv.constant.OverlayType.COLUMN:this._resizeableConfig.LEFT=A.ColumnWidth;this._resizeableConfig.RIGHT=A.ColumnWidth;break;case actuate.iv.constant.OverlayType.CELL:this._resizeableConfig.TOP=A.RowHeight;this._resizeableConfig.BOTTOM=A.RowHeight;this._resizeableConfig.LEFT=A.ColumnWidth;this._resizeableConfig.RIGHT=A.ColumnWidth;break;default:break;}var C=false;for(var B=0;B<this._ctxMenuItems.length;B++){var D=this._ctxMenuItems[B];if(A[D]==true&&this._viewer.featureMap[D]!=false){C=true;}}this.enableContextMenu(C);},updateUIOptions:function(){var A=[];if(this._resizeableConfig.TOP){A.push(actuate.iv.constant.Direction.TOP);}if(this._resizeableConfig.BOTTOM){A.push(actuate.iv.constant.Direction.BOTTOM);}if(this._resizeableConfig.LEFT){A.push(actuate.iv.constant.Direction.LEFT);}if(this._resizeableConfig.RIGHT){A.push(actuate.iv.constant.Direction.RIGHT);}this.disableResize();this.enableResize(A);this._updateHeader();},_neh_border_mousedown:function(B){if(this._viewer.interactive){this._resizingBorder=actuate.util.Event.element(B);actuate.util.Event.stop(B);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);this._viewer.contentPanel.hibernate();actuate.util.Event.observe(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.observe(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getCrosstabResizeOverlay();if(A){A.show(this._width,this._height,this._left,this._top);}}},_neh_border_mouseup:function(B){actuate.util.Event.stop(B);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var A=this._viewer._overlay.getCrosstabResizeOverlay();if(A){A.hide();}this._viewer.contentPanel.activate();},_neh_border_drag:function(C){actuate.util.Event.stop(C);actuate.util.Event.stopObserving(document,"mouseup",this._border_mouseup_closure,false);actuate.util.Event.stopObserving(document,"mousemove",this._border_drag_closure,false);var D=this._viewer.contentPanel.floatPanel.getScrolledOffset();var B=actuate.util.Event.pointerX(C)-D[0];var A=this._viewer._overlay.getCrosstabResizeOverlay();if(A&&this._resizingBorder){A.setResizeTo(this._resizingBorder.direction);}this._viewer.dndManager.startDragAndDrop(A,C,null);}});actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVCrosstabResizeOverlay=actuate.Class.create();actuate.iv.ui.overlay.IVCrosstabResizeOverlay.prototype={_viewer:null,_instance:null,_resizeTo:null,_width:null,_height:null,_currentWidth:null,_currentHeight:null,_left:true,_top:true,_panelOffset:null,initialize:function(A){this._viewer=A;this._instance=this._create();this._instance.style.zIndex=actuate.iv.utility.ivZIndex.ELEMENT_OVERLAY;},setResizeTo:function(A){this._resizeTo=A;},startDnd:function(B){if(document.selection){document.selection.empty();}else{if(window.getSelection){var A=window.getSelection();if(A){A.removeAllRanges();}}}if(this._resizeTo==actuate.iv.constant.Direction.TOP){document.body.style.cursor="n-resize";}else{if(this._resizeTo==actuate.iv.constant.Direction.BOTTOM){document.body.style.cursor="s-resize";}else{if(this._resizeTo==actuate.iv.constant.Direction.LEFT){document.body.style.cursor="e-resize";}else{if(this._resizeTo==actuate.iv.constant.Direction.RIGHT){document.body.style.cursor="w-resize";}}}}this._panelOffset=this._viewer.contentPanel.floatPanel.getScrolledOffset();},drag:function(C){var E=this._panelOffset;var A=C.x-E[0];var B=C.y-E[1];if(this._resizeTo==actuate.iv.constant.Direction.TOP){if(B<this._top+this._height){var D=this._top-B;this._instance.style.top=this._top-D+"px";this._currentHeight=D+this._height;this._instance.style.height=this._currentHeight+"px";}}else{if(this._resizeTo==actuate.iv.constant.Direction.BOTTOM){if(B>this._top){this._currentHeight=B-this._top;this._instance.style.height=this._currentHeight+"px";}}else{if(this._resizeTo==actuate.iv.constant.Direction.LEFT){if(A<this._left+this._width){var D=this._left-A;this._instance.style.left=this._left-D+"px";this._currentWidth=D+this._width;this._instance.style.width=this._currentWidth+"px";}}else{if(this._resizeTo==actuate.iv.constant.Direction.RIGHT){if(A>this._left){this._currentWidth=A-this._left;this._instance.style.width=this._currentWidth+"px";}}}}}},drop:function(){var A=this._currentWidth-this._width;var B=this._currentHeight-this._height;if(A!=0){this._viewer.contentPanel.floatPanel.setDeltaWidth(A);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_COLUMN_WIDTH,[this._currentWidth]);}if(B!=0){this._viewer.contentPanel.floatPanel.setDeltaHeight(B);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_ROW_HEIGHT,[this._currentHeight]);}this.hide();},cancelDnd:function(){this.hide();},_create:function(){var B=this._viewer.contentPanel.floatPanel.instance;var A=document.createElement("div");A.style.position="absolute";A.style.borderStyle="dotted";A.style.borderColor="#2a5fa7";A.style.borderWidth="1px";B.appendChild(A);return A;},updatePosition:function(B,A,D,C){if(this._instance){this._width=B;this._height=A;this._currentWidth=B;this._currentHeight=A;this._left=D;this._top=C;this._instance.style.width=B+"px";this._instance.style.height=A+"px";this._instance.style.left=D+"px";this._instance.style.top=C+"px";}},show:function(B,A,D,C){this.updatePosition(B,A,D,C);actuate.util.Element.show(this._instance);},hide:function(){this.updatePosition(0,0,0,0);actuate.util.Element.hide(this._instance);}};actuate.util.Package.define("actuate.iv.ui.overlay");actuate.iv.ui.overlay.IVCrosstabDataAnalyzerOverlay=actuate.Class.extendClass(actuate.iv.ui.overlay.IVBaseOverlay,{defaultWidth:100,_overlayHeaderHeight:24,_hasBody:false,_hasContextMenu:false,_button:null,initialize:function(A){actuate.iv.ui.overlay.IVCrosstabDataAnalyzerOverlay.superclass.initialize.call(this,A,"crosstabDataAnalyzerOverlay");},_createHeaderContent:function(){this._icon=actuate.uiadapter.Element.get(this._addButton({className:"dataAnalyzerOverlayIcon actuateCSSSprite_selection actuateIV_DataAnalyzer",titleKey:"crosstabOverlay.dataAnalyzerButton",onClick:actuate.Method.bindAsEventListener(this._neh_click_overlay,this)}));this._text=actuate.uiadapter.Element.get(this._addText({className:"dataAnalyzerOverlayText",titleKey:"crosstabOverlay.dataAnalyzerButton",onClick:actuate.Method.bindAsEventListener(this._neh_click_overlay,this)}));actuate.util.Event.observe(this._overlay,"contextmenu",actuate.Method.bindAsEventListener(this._neh_contextmenu,this),false);},show:function(B,A){A=parseInt(A)-2;if(actuate.util.Utility.isIE8Compat){actuate.util.Element.hide(this._instance);}this._width=this._text.getWidth()||this.defaultWidth;actuate.iv.ui.overlay.IVCrosstabDataAnalyzerOverlay.superclass.show.call(this,this._width,0,B,A);},_afterShow:function(){this._updateHeader();},_neh_click_overlay:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DATA_ANALYZER);},_neh_headerClick:function(A){this._neh_click_overlay(A);},_neh_contextmenu:function(A){actuate.util.Event.stop(A);}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.AbstractIVEventHandlers=actuate.Class.create();actuate.iv.ui.report.AbstractIVEventHandlers.prototype={_base:null,_viewer:null,_selectionManager:null,initialize:function(A){if(A){this._base=A;this._viewer=A._viewer;if(A.getSelectionManager){this._selectionManager=A.getSelectionManager();}}},_createCommonOperands:function(C){var E={};var F=true;if(C){for(var D=0;D<C.length;D++){if(C[D]&&C[D].name&&C[D].name=="bookmark"){F=false;break;}}}if(F){E[actuate.Constant.oprand.Page]=this._viewer.currentPage;}E[actuate.Constant.oprand.ShowMargin]=this._viewer.showMargin;if(this._viewer.tocPanel!=null){E[actuate.Constant.oprand.Toc]=this._viewer.isTocVisible()?"true":"false";}if(this._viewer.apiInstance._dashboardDesign){E[actuate.Constant.oprand.DashboardDesign]=this._viewer.apiInstance._dashboardDesign;}if(this._viewer.apiInstance._gadgetId){E[actuate.Constant.oprand.GadgetId]=this._viewer.apiInstance._gadgetId;}if(C){for(var D=0;D<C.length;D++){E[C[D].name]=C[D].value;}}if(this._viewer.apiInstance._reportletMode==true&&this._viewer.apiInstance.getReportletBookmark()){E[actuate.Constant.oprand.Bookmark]=this._viewer.apiInstance.getReportletBookmark();}E[actuate.Constant.oprand.DPI]=actuate.util.Utility.getDPI();var B=[];for(var A in E){B.push({name:A,value:E[A]});}return B;},_eh_adjust:function(){if(this._selectionManager){this._selectionManager.adjustSelection();}},__eh_blur:function(A){if(this._selectionManager){return this._selectionManager.deSelect();}}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVDocumentSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVDocumentSelectionManager.prototype={_viewer:null,_selectedIId:null,_selectedType:null,_previousWarningFocusObj:null,initialize:function(A){this._viewer=A;},activate:function(){this._viewer.contentPanel.activate();},getSelectedIId:function(){return this._selectedIId;},getSelectedType:function(){return this._selectedType;},select:function(B){this.deSelect();this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);this._viewer.eventDispatcher.focusId=this._viewer.id;this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);if(this._viewer._toolbar){this._viewer._toolbar.reset();}var C=actuate.util.browser;var A=C&&C.useMobile();if(!A){this._viewer._contextMenu.reset();}},deSelect:function(A){this._selectedIId=null;this._selectedType=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVDocumentEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{_OPRAND_REQUEST_BASE_METADATA:"requestBaseMetadata",_OPRAND_TOC:"Toc",initialize:function(A){actuate.iv.ui.report.IVDocumentEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(A){this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_TEXT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,actuate.Method.bind(this.__eh_setFont,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_LEFT,A,actuate.Method.bind(this.__eh_set_align_left,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_CENTER,A,actuate.Method.bind(this.__eh_set_align_center,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_RIGHT,A,actuate.Method.bind(this.__eh_set_align_right,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ENABLE_IV,A,actuate.Method.bind(this._eh_enable_iv,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DISABLE_IV,A,actuate.Method.bind(this._eh_disable_iv,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UNDO,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_REDO,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_TOC,A,actuate.Method.bind(this._eh_toc,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GETPAGE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CANCEL_GADGET_GENERATION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GETREPORTLET,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RUN_REPORT,A,actuate.Method.bind(this.__beh_run_report,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_SAVE_FILE,A,actuate.Method.bind(this.__eh_query_save_file,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SAVE_FILE,A,actuate.Method.bind(this.__eh_save_file,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_SAVE_DOCUMENT,A,actuate.Method.bind(this.__eh_query_save_document,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SAVE_DOCUMENT,A,actuate.Method.bind(this.__eh_save_document,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_PRINT,A,actuate.Method.bind(this._eh_printReport,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_DOCUMENT_EXPORT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_EXPORT,A,actuate.Method.bind(this._eh_exportData,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DOCUMENT_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_EXPORTREPORT,A,actuate.Method.bind(this._eh_exportReport,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GET_PAGE_COUNT,A,actuate.Method.bind(this.__eh_getPageCount,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYHIDESHOW_ITEM,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GET_DATETIME_FORMATS,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_PRINT,A,actuate.Method.bind(this._eh_query_print,this));this._cb_waitPreviewLoaded_closure=actuate.Method.bind(this._cb_waitPreviewLoaded,this);},__eh_setFont:function(C,B,A){return this._base.__setFont(C,B,A);},__eh_set_align_left:function(B,A){return this._base.__setAlignment(B,A,"left");},__eh_set_align_center:function(B,A){return this._base.__setAlignment(B,A,"center");},__eh_set_align_right:function(B,A){return this._base.__setAlignment(B,A,"right");},_eh_enable_iv:function(B,A){return this._base.__enableIV(B,A,true);},_eh_disable_iv:function(B,A){return this._base.__enableIV(B,A,false);},_eh_toc:function(C,A){var B=this._viewer;if(B&&B.tocPanel){B.tocPanel._resetCurrentNode();}A.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,"GetToc");return true;},__beh_run_report:function(A,G,E){var J=null;var D=null;if(E){if(E.reportParameters){J=E.reportParameters;var B=new actuate.iv.data.IVParameterValues();for(var F=0;F<J.length;F++){var C=new actuate.iv.data.IVParameterValue();C.setName(J[F].getName());C.setValue(J[F].getValue());C.setValueIsNull(J[F].getValueIsNull());if(J[F].getDisplayName){C.setDisplayName(J[F].getDisplayName());}B.addParameterValue(C);}var I=new actuate.iv.data.IVData();D=I.getParameterValues(this._viewer,B);}}var H=[];if(E&&E.reportletBookmark){H.push({name:actuate.Constant.oprand.Bookmark,value:E.reportletBookmark});}H.push({name:actuate.Constant.oprand.SVG,value:(this._viewer.supportSVG?"true":"false")});H.push({name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()});H.push({name:this._OPRAND_TOC,value:this._viewer.isTocVisible()?"true":"false"});H.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});G.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_RUN_REPORT,[D,H]);this._viewer.eventDispatcher.focusId=this._viewer.id;return true;},__eh_getPageCount:function(B,A){return this._base.__getPageCount(B,A);},__eh_query_save_file:function(D,B,C){if(C==undefined){C="";}var A=null;B.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_QUERY_SAVE_FILE,[A]);return true;},__eh_query_save_document:function(D,B,C){if(C==undefined){C="";}var A=null;B.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_QUERY_SAVE_DOCUMENT,[A]);return true;},__eh_save_file:function(C,B,A){return this._base.__saveFile(C,B,A);},__eh_save_document:function(C,B,A){return this._base.__saveDocument(C,B,A);},__get_GETPAGE_data:function(E,F){this._selectionManager.select();if(!actuate.util.Utility.isArray(F)){F=[F];}var C=[];if(F){if(actuate.util.Utility.isArray(F)){for(var D=0;D<F.length;D++){C.push(F[D]);}}else{C.push(F);}}C=this._createCommonOperands(C);for(var D=0;D<F.length;D++){if((F[D].name==="bookmark")||(F[D].name==="page"&&!actuate.util.Utility.isEmpty(F[D].refreshToc,false)&&!F[D].refreshToc)){for(var B in C){if(C[B].name===actuate.Constant.oprand.Toc){C[B].value="false";break;}}}}if(this._viewer.apiInstance._reportletMode==true&&this._viewer.apiInstance.getReportletBookmark()){C.push({name:actuate.Constant.oprand.Bookmark,value:this._viewer.apiInstance.getReportletBookmark()});}C.push({name:actuate.Constant.oprand.SVG,value:this._viewer.supportSVG&&!this._viewer.interactive?"true":"false"});if(this._viewer.documentModel){var A=this._viewer.documentModel.getKnownDesignIds();C.push({name:this._OPRAND_REQUEST_BASE_METADATA,value:A.join(",")});}this._viewer.eventDispatcher.focusId=this._viewer.id;return[null,C];},__get_CANCEL_GADGET_GENERATION_data:function(C,D){this._selectionManager.select();var A=[];if(D){if(actuate.util.Utility.isArray(D)){for(var B=0;B<D.length;B++){A.push(D[B]);}}else{if(D&&D.gadgetId){A.push({name:"gadgetId",value:D.gadgetId});}else{A.push(D);}}}this._viewer.eventDispatcher.focusId=this._viewer.id;return[null,A];},__get_GETREPORTLET_data:function(C,B){var A=[];var D=B;if(B.reportletBookmark){D=B.reportletBookmark;}A.push({name:actuate.Constant.oprand.Bookmark,value:D});A.push({name:actuate.Constant.oprand.SVG,value:(this._viewer.supportSVG?"true":"false")});A.push({name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()});if(B&&B.gadgetId){A.push({name:"gadgetId",value:data.gadgetId});}this._viewer.eventDispatcher.focusId=this._viewer.id;return[null,A];},__get_SET_TEXT_data:function(E,C){var D=new actuate.iv.data.IVLabelText();D.setText(C[0].value);var F=new actuate.iv.data.IVData();var B=F.getLabelText(this._viewer,D);var A=[];A.push({name:actuate.Constant.oprand.Page,value:this._viewer.currentPage});A.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});return[B,A];},__get_UNDO_data:function(B,A){if(this._viewer.tocPanel!=null&&this._viewer.tocPanel.close){this._viewer.tocPanel.close();}return[null,this._createCommonOperands()];},__get_REDO_data:function(B,A){if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}return[null,this._createCommonOperands()];},__get_APPLYHIDESHOW_ITEM_data:function(D,C){if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.group.IVHideShowItemDialog").createSoapResponse();var A=[];A.push({name:actuate.Constant.oprand.Page,value:this._viewer.currentPage});A.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});return[B,A];},__get_GET_DATETIME_FORMATS_data:function(A,B){return[null,B];},_processOperation:function(A,F,E,D){var B=null;var I=this["__get_"+D.replace("__OP_","")+"_data"];if(I){var C=actuate.Method.bind(I,this);B=C(F,E);}var H=this._selectionManager.getSelectedIId();if(H==null){H=actuate.Constant.tag.documentId;}var G=this._selectionManager.getSelectedType();if(G==null){G=actuate.Constant.tag.Document;}F.addOperation(H,G,actuate.iv.core.iVOperation[D],B);return true;},_eh_query_export:function(E,C,D,A){var B=null;if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){C.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,actuate.iv.core.iVOperation[A],B);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":"all","defaultFormat":"PDF"});return false;},_eh_query_print:function(E,C,D,A){var B=null;if(!actuate.iv.ui.dialog||!actuate.iv.ui.dialog.IVPrintDialog){C.addOperation(actuate.Constant.tag.documentId,actuate.Constant.tag.Document,actuate.iv.core.iVOperation[A],B);return true;}actuate.iv.ui.dialog.ivPrintDialog._show();},_eh_exportData:function(Y,N,g){var X=null;var l=null;var O=null;var S=null;var F=null;var W=null;var Q=null;var P=null;var B=null;var V=null;var K=null;var n=null;var m=null;document.skipOnbeforeunload=true;for(var e=0;e<g.length;e++){var b=g[e];if(b.name=="ResultSetName"){X=b.value;}else{if(b.name=="isFromCube"){l=b.value;}else{if(b.name=="SelectedColumnNumber"){O=b.value;}else{if(b.name=="EncodingStyle"){F=b.value;}else{if(b.name=="DataSep"){W=b.value;}else{if(b.name=="ExportColumnType"){n=b.value;}else{if(b.name=="NumberFormat"){m=b.value;}else{if(b.name=="ExportDataType"){Q=b.value;}else{if(b.name=="SelectedColumns"){S=b.value;}else{if(b.name=="ExportLocaleNeutral"){P=b.value;}else{if(b.name=="MaxRows"){K=b.value;}else{if(b.name=="ExportColumnHeader"){B=b.value;}else{if(b.name=="ExportWithCR"){V=b.value;}}}}}}}}}}}}}}var k=document.body;var T=document.createElement("div");T.style.display="none";var h=document.createElement("form");h.method="post";h.target="_self";var D=actuate.util.Utility.addJSessionId(this._viewer.getRequestUrl(),this._viewer.getBaseUrl());D=actuate.util.Utility.removeURLParameter(D,actuate.iv.constant.urlParameter.FORMAT);D+="&"+actuate.iv.constant.urlParameter.PERSISTENTDOCUMENTNAME+"="+this._viewer.apiInstance._reportDocument;if(this._viewer.apiInstance._gadgetId){D+="&"+actuate.iv.constant.urlParameter.GADGETID+"="+this._viewer.apiInstance._gadgetId;}h.action=D;var a=document.createElement("input");a.type="hidden";a.name=actuate.iv.constant.urlParameter.RESULTSETNAME;a.value=X;h.appendChild(a);var U=document.createElement("input");U.type="hidden";U.name=actuate.iv.constant.urlParameter.ISFROMCUBE;U.value=l;h.appendChild(U);if(S.length>0){var I=document.createElement("input");I.type="hidden";I.name="SelectedColumnNumber";I.value=S.length;h.appendChild(I);for(var e=0;e<S.length;e++){if(S[e]&&S[e].name){var M=document.createElement("input");M.type="hidden";M.name="SelectedColumn"+e;M.value=S[e].name;h.appendChild(M);if(S[e].dataType){var d=document.createElement("input");d.type="hidden";d.name="SelectedColumn"+e+"_DataType";d.value=S[e].dataType;h.appendChild(d);}}}}var A=document.createElement("input");A.type="hidden";A.name=actuate.iv.constant.urlParameter.IVSESSIONID;A.value=this._viewer.apiInstance.sessionId;h.appendChild(A);var C=document.createElement("input");C.type="hidden";C.name=actuate.iv.constant.urlParameter.ENCODINGSTYLE;C.value=F;h.appendChild(C);var c=document.createElement("input");c.type="hidden";c.name=actuate.iv.constant.urlParameter.FORMAT;c.value=W;h.appendChild(c);var L=document.createElement("input");L.type="hidden";L.name=actuate.iv.constant.urlParameter.EXPORTCOLUMNTYPE;L.value=n;h.appendChild(L);if(m){var E=document.createElement("input");E.type="hidden";E.name=actuate.iv.constant.urlParameter.NUMBERFORMAT;E.value=m;h.appendChild(E);}var G=document.createElement("input");G.type="hidden";G.name=actuate.iv.constant.urlParameter.MAXROWS;G.value=K;h.appendChild(G);var H=document.createElement("input");H.type="hidden";H.name=actuate.iv.constant.urlParameter.EXPORTDATATYPE;H.value=Q;h.appendChild(H);var R=document.createElement("input");R.type="hidden";R.name=actuate.iv.constant.urlParameter.EXPORTCOLUMNHEADER;R.value=B;h.appendChild(R);var Z=document.createElement("input");Z.type="hidden";Z.name=actuate.iv.constant.urlParameter.EXPORTLOCALENEUTRAL;Z.value=P;h.appendChild(Z);var J=document.createElement("input");J.type="hidden";J.name=actuate.iv.constant.urlParameter.EXPORTWITHCR;J.value=V;h.appendChild(J);T.appendChild(h);k.appendChild(T);var f=window.onbeforeunload;if(f){window.onbeforeunload=null;}h.submit();if(f){window.setTimeout(actuate.Method.bind2(this._restoreOnBeforeUnload,this,f),1000);}k.removeChild(T);},_restoreOnBeforeUnload:function(A){window.onbeforeunload=A;},_eh_exportReport:function(C,H,F){var I=null;document.skipOnbeforeunload=true;var E=document.createElement("form");E.method="post";E.target="_self";var M=null;var D=null;for(var G=0;G<F.length;G++){var O=F[G].name;var A=F[G].value;if(O&&O.toLowerCase()=="target"){E.target=A;}else{if(O&&O.toLowerCase()=="format"){M=A;}else{if(O&&O.toLowerCase().indexOf("pagerange")>-1){D=A;}else{if(O&&O.toLowerCase()=="bookmark"){I=A;}else{var N=document.createElement("input");N.type="hidden";N.name=O;N.value=A;E.appendChild(N);}}}}}if(I==null&&this._viewer.apiInstance._reportletMode==true){I=this._viewer.apiInstance._reportlet;}var B=actuate.util.Utility.addJSessionId(this._viewer.getRequestUrl(),this._viewer.getBaseUrl());B=actuate.util.Utility.removeURLParameter(B,"__bookmark");B=actuate.util.Utility.removeURLParameter(B,actuate.iv.constant.urlParameter.FORMAT);B+="&"+actuate.iv.constant.urlParameter.FORMAT+"="+M;if(D!=null&&this._viewer.apiInstance._reportletMode==false){B+="&"+actuate.iv.constant.urlParameter.PAGE+"="+D;}B+="&"+actuate.iv.constant.urlParameter.IVSESSIONID+"="+this._viewer.apiInstance.sessionId;B+="&"+actuate.iv.constant.urlParameter.PERSISTENTDOCUMENTNAME+"="+this._viewer.apiInstance._reportDocument;if(I){B+="&"+actuate.iv.constant.urlParameter.BOOKMARK+"="+I;}if(this._viewer.apiInstance._gadgetId){B+="&"+actuate.iv.constant.urlParameter.GADGETID+"="+this._viewer.apiInstance._gadgetId;}var L=document.body;var K=document.createElement("div");K.style.display="none";E.action=B;E.method="post";K.appendChild(E);L.appendChild(K);var J=window.onbeforeunload;if(J){window.onbeforeunload=null;}E.submit();if(J){window.setTimeout(actuate.Method.bind2(this._restoreOnBeforeUnload,this,J),1000);}L.removeChild(K);return false;},_eh_printReport:function(J,F,R){var M=null;var N=null;var A=null;for(var L=0;L<R.length;L++){if(R[L].name=="format"){M=R[L].value;}else{if(R[L].name=="pageRange"){N=R[L].value;}else{if(R[L].name=="pageStyle"){A=R[L].value;}}}}this.__printFormat=M;var D=actuate.util.Utility.addJSessionId(this._viewer.getRequestUrl(),this._viewer.getBaseUrl());var H=!actuate.util.Utility.isSameDomain(location.href,D);D=actuate.util.Utility.removeURLParameter(D,actuate.iv.constant.urlParameter.FORMAT);D=actuate.util.Utility.removeURLParameter(D,"__bookmark");D+="&"+actuate.iv.constant.urlParameter.FORMAT+"="+M;if(this._viewer.apiInstance._reportletMode==true&&this._viewer.apiInstance._reportlet!=null){D+="&"+actuate.iv.constant.urlParameter.BOOKMARK+"="+this._viewer.apiInstance._reportlet;}if(this._viewer.apiInstance._reportletMode==false){D+="&"+actuate.iv.constant.urlParameter.PAGE+"="+N;}if(A!=null){D+="&"+actuate.iv.constant.urlParameter.PAGESTYLE+"="+A;}D+="&"+actuate.iv.constant.urlParameter.IVSESSIONID+"="+this._viewer.apiInstance.sessionId;D+="&"+actuate.iv.constant.urlParameter.SVG+"="+this._viewer.supportSVG;D+="&"+actuate.iv.constant.urlParameter.ASATTACHMENT+"=false";D+="&"+actuate.iv.constant.urlParameter.PAGESETTINGSTYLE+"="+A;if(H&&M=="html"){D+="&"+actuate.iv.constant.urlParameter.POPUPPRINTDIALOG+"=true";}if(this._viewer.apiInstance._gadgetId){D+="&"+actuate.iv.constant.urlParameter.GADGETID+"="+this._viewer.apiInstance._gadgetId;}if(actuate.util.Utility.getDPI()){D+="&"+actuate.iv.constant.urlParameter.DPI+"="+actuate.util.Utility.getDPI();}if((actuate.util.browser.isIEFlag)&&this.__printFormat==="pdf"){this._pdfPrintPreview(D);return ;}var I=document.createElement("form");var P="__actuatePrintPreview";var B=false;if(!actuate.util.browser.useMobile()){var C=window.open("",P,"location=no,scrollbars=yes,dependent=yes");try{var O=C.document.body;if(O&&actuate.util.String.trim(O.innerHTML).length>0){B=true;}}catch(Q){B=true;}if(B){var E=this._viewer.eventDispatcher;window.setTimeout(function(){E.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("error.printDialog.printPreviewExists"));},0);return false;}else{this.__printWindow=C;}I.target=P;}else{if(actuate.util.browser.isIPhone||actuate.util.browser.isIPod){this.__printWindow=this.__printWindow=window.open("","__blank","location=no,scrollbars=yes,dependent=yes");if(!this.__printWindow){this.__printWindow=window.self;I.target="_self";}else{I.target="__blank";}}else{if(!actuate.util.browser.isAndroid){this.__printWindow=window.open("","__blank","location=no,scrollbars=yes,dependent=yes");I.target="__blank";}}}var G=document.body;var K=document.createElement("div");K.style.display="none";I.action=D;I.method="post";K.appendChild(I);G.appendChild(K);if(!H&&!actuate.util.browser.isIEFlag&&!actuate.util.browser.useMobile()){actuate.util.Event.observe(this.__printWindow,"load",actuate.Method.bindAsEventListener(this._cb_print,this),false);}I.submit();G.removeChild(K);if(!H&&((actuate.util.browser.isIEFlag&&this.__printFormat!="pdf")||actuate.util.browser.isSafari)){this.__timer=window.setTimeout(this._cb_waitPreviewLoaded_closure,1000);}if(actuate.util.browser.isIPad||actuate.util.browser.isIPhone||actuate.util.browser.isIPod){this._cb_print();}return false;},_pdfPrintPreview:function(A){var E=document.body;var C=document.createElement("div");C.style.display="none";var D=document.createElement("form");var B=document.createElement("input");B.setAttribute("name","printUrl");B.setAttribute("id","printUrl");B.setAttribute("value",A);D.appendChild(B);D.action=this._viewer.getBaseUrl()+"iv/pages/dialog/IVPrintPreviewDialog.jsp";D.target=this._viewer.getBaseUrl()+"iv/pages/dialog/IVPrintPreviewDialog.jsp";D.method="post";C.appendChild(D);E.appendChild(C);D.submit();E.removeChild(C);},_cb_waitPreviewLoaded:function(){window.clearTimeout(this.__timer);try{if(!this.__printWindow||this.__printWindow.closed){return ;}if(!this.__printWindow.document||this.__printWindow.document.readyState!="complete"){this.__timer=window.setTimeout(this._cb_waitPreviewLoaded_closure,1000);}else{this._cb_print();}}catch(A){}},_cb_print:function(){try{if(!this.__printWindow||this.__printWindow.closed){return ;}var B=this.__printWindow.document.getElementById("idExceptionErrorPage");if(B&&B.innerHTML!=""){return ;}if(actuate.util.browser.useMobile()){this.__printWindow.print();}else{if(this.__printFormat=="pdf"){this.__printWindow.setTimeout("window.print();",1000);}else{this.__printWindow.setTimeout("window.print();",0);}}}catch(A){}}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVDocument=actuate.Class.create();actuate.iv.ui.report.IVDocument.prototype={_DYNAMIC_STYLE_SHEET:"actuateIV_dynamic_CSS",_viewer:null,_instance:null,_selectionManager:null,_eventHandlers:null,_initIds:null,dynamicCss:null,_groupButtonCssRule:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVDocumentSelectionManager(this._viewer);this._eventHandlers=new actuate.iv.ui.report.IVDocumentEventHandlers(this);this._eventHandlers.registerEventHandlers(this._viewer.id);this._instance=this._viewer.contentPanel.floatPanel.instance;this._initIds=null;this._groupButtonCssRule=null;this.dynamicCss=null;},getSelectionManager:function(){return this._selectionManager;},_parseInitIds:function(B){if(!B){return null;}var C=[];for(var E=0;E<B.length;E++){var D=B[E].getElementsByTagName("Id");var F=D[0].firstChild.data;var A=B[E].getElementsByTagName("Type");var G=A[0].firstChild.data;var I=B[E].getElementsByTagName("RptElementId");var J=I[0].firstChild.data;var H={id:F,type:G,designId:J};C.push(H);}return C;},_processInitIds:function(){this._instance.reportBase=true;if(!this._initIds){return ;}for(var C=0;C<this._initIds.length;C++){var E=this._initIds[C];var B=E.id;var A=E.type;var D=this._viewer["_"+A.toLowerCase()];if(A=="FlashGadgets"){D=this._viewer._flashgadgets;}else{if(A=="GeneralFlash"){D=this._viewer._flashobject;}else{if(A=="FlashCharts"){D=this._viewer._flashchart;}}}if(D){if(D._cb_installEventHandlers){D._cb_installEventHandlers(B);}else{this._viewer.documentModel.registerItemByIid("/"+E.designId,A);}}}},_cb_installEventHandlers:function(A){this.clear();if(A){this._initIds=this._parseInitIds(A);}this._selectionManager.activate();this._processInitIds();},processAction:function(B,A){if("Enable"==A){this._cb_installEventHandlers();if(this._groupButtonCssRule){this._groupButtonCssRule.style.display="";}}else{if("Close"==A){this._selectionManager.select();this._selectionManager.deSelect();this.clear(true);if(this._groupButtonCssRule){this._groupButtonCssRule.style.display="none";}}}},clear:function(A){if(this._viewer.interactive||A){this._viewer._label.clear();this._viewer._dataItem.clear();this._viewer._table.clear();this._viewer._chart.clear();this._viewer._flashchart.clear();this._viewer._flashgadgets.clear();this._viewer._flashobject.clear();this._viewer._crosstab.clear();}},render:function(C){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);if(this._viewer._overlay){this._viewer._overlay.reset();}var B=this._instance;this._viewer.contentPanel.floatPanel.addContent(C);var A=actuate.util.browser&&actuate.util.browser.useMobile();if(!A){this._execJS(B);}this._viewer.eventDispatcher.focusId=this._viewer.id;this._birt_root=document.getElementById(this._viewer.id+"___BIRT_ROOT");this._setTitle();if(actuate.util.browser.isIE()){setTimeout(actuate.Method.bind(this._hackRedrawSVGChart,this),500);}},_hackRedrawSVGChart:function(){var B=this._instance.getElementsByTagName("svg");for(var A=0;A<B.length;A++){B[A].style.listStylePosition="inside";}},_execJS:function(container){if(!!!container){return ;}if(!actuate.util.browser.isFirefox||actuate.util.browser.isFirefox4||actuate.util.browser.isFirefox5||actuate.util.browser.isFirefox6||actuate.util.browser.isFirefoxHigherVersion){var scripts=container.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].src){var head=document.getElementsByTagName("head")[0];if(head){var scriptObj=document.createElement("script");scriptObj.setAttribute("type","text/javascript");scriptObj.setAttribute("src",scripts[i].src);head.appendChild(scriptObj);}}else{if(scripts[i].innerHTML){try{try{if(window.execScript){window.execScript(scripts[i].innerHTML);}else{window.eval(scripts[i].innerHTML);}}catch(e){}}catch(e){}}}}}if(actuate.util.browser.isSafari){var styles=container.getElementsByTagName("style");for(var i=0;i<styles.length;i++){if(scripts[i].src){var head=document.getElementsByTagName("head")[0];if(head){head.appendChild(styles[i]);}}else{if(scripts[i].innerHTML){window.setTimeout(scripts[i].innerHTML,0);}}}}},_setTitle:function(A){var D=this._viewer.apiInstance._viewingMode;if(D&&D==actuate.Constant.ViewingMode.DASHBOARD_NORMAL){return ;}if(!this._viewer.standalone){return ;}var F="";var G="";var H="";if(A){F=A;var C=document.getElementById("viewer_title_label");if(C){actuate.util.XmlDom.setTextContent(C,F);}}else{F=document.title;}H=this._viewer.apiInstance.getReportName();if(F&&F.indexOf(" - ")<0){this._birt_root=document.getElementById(this._viewer.id+"___BIRT_ROOT");if(this._birt_root&&this._birt_root.getAttributeNode("title")&&this._birt_root.getAttributeNode("title").nodeValue){H=this._birt_root.getAttributeNode("title").nodeValue;}H=H.replace(/^.*(\\|\/|\:)/,"").replace(".rptdocument","").replace(".rptdesign","");var E=this._viewer.apiInstance.getReportDocument();var B=actuate.util.Utility.isTransient(E);G=H+" - ";document.title=G+F;}},_setContentMargin:function(A){if(A){if(this._viewer.featureMap&&this._viewer.featureMap.ContentMargin==false){A.style.margin="0px";}else{var B=this._viewer.contentMargin;if(typeof (B)=="object"){A.style.marginTop=B.top+"px";A.style.marginRight=B.right+"px";A.style.marginBottom=B.bottom+"px";A.style.marginLeft=B.left+"px";}else{A.style.margin=B+"px";}}}},selectElement:function(E,D){var C=E;if(typeof (C)=="string"){C=document.getElementById(E);}if(!C){return ;}var B=C.getAttribute("element_type");var A=this._viewer.getSelectionManager(B);if(A){return A.select(C,D);}return false;},_processGroupButtons:function(G){var C=actuate.iv.constant.GROUP_BUTTON_CSS_CLASS+this._viewer.id;var A=G.getElementsByTagName("img");var E=false;for(var D=0;D<A.length;D++){var F=A[D];if(F.getAttribute("element_type")=="GROUP"){E=true;if(this._isCollapsible(F)){F.parentNode.className=C;F.parentNode.style.width="1px";F.parentNode.style.textAlign="left";}else{F.parentNode.style.display="none";}}}if(E){if(!this._groupButtonCssRule){var B="display:"+(this._viewer.interactive?"":"none")+";";if(!this.dynamicCss){actuate.util.Style.addStyleSheet(null,this._DYNAMIC_STYLE_SHEET);this.dynamicCss=actuate.util.Style.findStyleSheet(this._DYNAMIC_STYLE_SHEET);}if(this.dynamicCss){actuate.util.Style.addCSSRule(this.dynamicCss,"."+C,B);this._groupButtonCssRule=actuate.util.Style.findCSSRule(this.dynamicCss,"."+C);}}else{this._groupButtonCssRule.style.display=this._viewer.interactive?"":"none";}}return E;},_isCollapsible:function(A){var D=true;var B=actuate.uiadapter.Element.fly(A);var E=B.up("[row-type=group-header]",null);if(E!=null){var C=E.next("tr",true);if(C&&C.getAttribute("row-type")=="group-footer"){D=false;}}return D;},__setFont:function(E,C,B){if(this._viewer.eventDispatcher.focusId!=E){return false;}var D=this._selectionManager.getSelectedIId();var A=this._selectionManager.getSelectedType();if(D){C.addOperation(D,A,actuate.iv.core.iVOperation.__OP_SET_FONT,[B,[{name:"page",value:this._viewer.currentPage},{name:"totalpage",value:this._viewer.totalPage},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}]]);}return true;},__setAlignment:function(E,B,D){if(this._viewer.eventDispatcher.focusId!=E){return false;}var C=this._selectionManager.getSelectedIId();var A=this._selectionManager.getSelectedType();if(C){B.addOperation(C,A,actuate.iv.core.iVOperation.__OP_SET_ALIGN,[null,[{name:"alignment",value:D},{name:"page",value:this._viewer.currentPage},{name:"totalpage",value:this._viewer.totalPage},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}]]);return true;}},_isReportletGadget:function(){if(this._viewer.apiInstance.builderType&&this._viewer.apiInstance.builderType==="reportlet"){return true;}else{return false;}},__enableIV:function(A,E,F){var C=F?actuate.iv.core.iVOperation.__OP_ENABLE_IV:actuate.iv.core.iVOperation.__OP_DISABLE_IV;var I=[];if(F&&this._isReportletGadget()){if(this._viewer.featureMap){this._viewer.featureMap.ContentMargin=null;this._setContentMargin(this._viewer.contentPanel.floatPanel.enclosingDiv);}}I.push({name:actuate.Constant.oprand.Page,value:this._viewer.currentPage});I.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});var M=false;try{M=this._viewer.documentModel._metadata.PLSEnabled;}catch(H){M=false;}M=!!M;I.push({name:actuate.Constant.oprand.PLSEnabled,value:M.toString()});var L=this._viewer.apiInstance.getReportletBookmark();if(L!=null){I.push({name:actuate.Constant.oprand.Bookmark,value:L});}if(this._viewer.apiInstance._gadgetId!=null){I.push({name:"gadgetId",value:this._viewer.apiInstance._gadgetId});}E.addOperation(this._viewer.id,actuate.Constant.tag.Document,C,[null,I]);this._viewer.eventDispatcher.focusId=this._viewer.id;if(F){var G="";if(this._initIds){for(var D=0;D<this._initIds.length;D++){var K=this._initIds[D];if(D>0){G+=",";}G+="/"+K.designId;}}var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var N=actuate.util.XmlDom.createElement(B,"Metadata");var J=B.createTextNode(G);N.appendChild(J);B.documentElement.appendChild(N);I=[];I.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});I.push({name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()});E.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_GET_FEATURE_METADATA,[B,I]);}return true;},__beh_run_report:function(B,A){A.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_RUN_REPORT,[actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.parameter.IVParameterDialog").__getXmlData(),[{name:"page",value:"1"},{name:"svg",value:this._viewer.supportSVG?"true":"false"},{name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}]]);this._viewer.eventDispatcher.focusId=this._viewer.id;return true;},__getPageCount:function(C,B){var A=[];A.push({name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()});A.push({name:"svg",value:this._viewer.supportSVG?"true":"false"});A.push({name:"page",value:this._viewer.currentPage});A.push({name:"totalpage",value:this._viewer.totalPage});A.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});if(this._viewer.apiInstance._reportletMode==true&&this._viewer.apiInstance.getReportletBookmark()){A.push({name:actuate.Constant.oprand.Bookmark,value:this._viewer.apiInstance.getReportletBookmark()});}if(this._viewer.tocPanel!=null){A.push({name:actuate.Constant.oprand.Toc,value:this._viewer.isTocVisible()?"true":"false"});}B.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_GET_PAGE_COUNT,[null,A]);return true;},__saveFile:function(F,D,B){var C=B[0];var E=new actuate.iv.data.IVFileBrowsing(C);E.setFileDescription(B[1]);var A=E.getSaveDesignRequest(C);D.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_SAVE_FILE,[A]);return true;},__saveDocument:function(F,D,B){var C=B[0];var E=new actuate.iv.data.IVFileBrowsing(C);E.setFileDescription(B[1]);var A=E.getSaveDocumentRequest(C);D.addOperation(this._viewer.id,actuate.Constant.tag.Document,actuate.iv.core.iVOperation.__OP_SAVE_DOCUMENT,[A]);return true;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVTableSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVTableSelectionManager.prototype={_base:null,_viewer:null,_columnIIds:null,_selectedTable:null,_selectedTableOffset:null,_columnWidths:null,_selectedColumnIIds:null,_selectedIId:null,_selectedType:actuate.Constant.tag.Table,_selectedColumnIndex:[],_dropAreaColumnIndex:null,initialize:function(B){if(B){this._base=B;this._viewer=B._viewer;this._columnIIds={};this._columnWidths=null;}var A=actuate.Constant.DataType;},getSelectedColumnIIds:function(A){return this._selectedColumnIIds;},getSelectedType:function(){return this._selectedType;},getSelectedIId:function(){return this._selectedIId;},getSelectedTable:function(){return this._selectedTable;},activate:function(A){this._viewer.documentModel.registerItem(A);this._columnIIds[A.iid]=this._collectColumnIIds(A);this._selectedColumnIIds=[];this._selectedColumnIndex=[];this._processGroups(A);},_processGroups:function(C){if(!C.preProcessed){var A=C.getElementsByTagName("img");for(var B=0;B<A.length;B++){var D=A[B];if(D.getAttribute("element_type")=="GROUP"){if(D.parentNode.className==actuate.iv.constant.GROUP_BUTTON_CSS_CLASS+this._viewer.id){this._viewer._table.processGroupIcon(D,C.getAttribute("pre_collapse"));}}}this._viewer._table.pre_collapse(C);C.preProcessed=true;}},deActivate:function(){for(var A in this._columnIIds){delete this._columnIIds[A];}this._columnIIds={};this._selectedIId=null;delete this._selectedColumnIIds;},_collectColumnIIds:function(F){if(!F){return ;}var G=F.childNodes;if(!G){return ;}var C=this._viewer.contentPanel.isRTL();var E=[];for(var D=G.length-1;D>=0;D--){var B=C?D:G.length-1-D;if(G[B].tagName&&G[B].tagName.toUpperCase()=="COLGROUP"){G=G[B].childNodes;break;}}for(var D=G.length-1;D>=0;D--){var B=C?D:G.length-1-D;if(G[B].tagName&&G[B].tagName.toUpperCase()=="COL"){var A=G[B].getAttributeNode("iid");if(A!=null){E.push(A.nodeValue);}}}return E;},focus:function(G,A,I){if(G){this._columnWidths=this._computeColumnWidths(G);var H=actuate.util.Element.cumulativeOffset(this._getFirstCellInTable(G));var E=actuate.util.Element.realOffset(G);var F=this._viewer.contentPanel.floatPanel.getOffset();var B=A-H[0];var C=0;for(var D=0;D<this._columnWidths.length;D++){C+=this._columnWidths[D];if(B<=C){this._viewer._overlay.getMouseOverOverlay().show(this._selectedType,this._columnWidths[D],G.offsetHeight,H[0]+C-this._columnWidths[D]-F[0],H[1]-F[1],A-F[0]+E[0],I-F[1]+E[1]);break;}}}},startDnd:function(A){},dragInto:function(A){var F=this._selectedColumnIndex[0];this._dropAreaColumnIndex=null;if(this._selectedTable){var J=this._viewer.contentPanel.floatPanel.getScrolledOffset();var G=this._viewer.contentPanel.floatPanel.getOffset();var I=J[0]>0?0:J[0];var E=0;var H=this._viewer.container;while(H){E+=H.scrollLeft;H=H.parentElement;}var B=A.x-this._selectedTableOffset[0]-I+E;var C=0;for(var D=0;D<this._columnWidths.length;D++){C+=this._columnWidths[D];if(B<=C){this._dropAreaColumnIndex=D;if(D==F){this._viewer._overlay.getDropOverlay().hide();this._dropAreaColumnIndex=null;}else{if(D<F){this._viewer._overlay.getDropOverlay().show(this._selectedTableOffset[0]+C-this._columnWidths[D]-G[0],this._selectedTableOffset[1]-G[1]);}else{this._viewer._overlay.getDropOverlay().show(this._selectedTableOffset[0]+C-G[0],this._selectedTableOffset[1]-G[1]);}}break;}}}},dropInto:function(C){var A=this._selectedColumnIndex[0];var D=this._dropAreaColumnIndex;this._dropAreaColumnIndex=null;this._viewer._overlay.getDropOverlay().hide();if(D!=null&&A!=D){var E=this._selectedTable.iid||this._selectedTable.getAttribute("iid");var B=this._columnIIds[E][D];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_MOVE_COLUMN,B);}},cancelDnd:function(){this._viewer._overlay.getDropOverlay().hide();},adjustSelection:function(){if(this._selectedTable){this._columnWidths=this._computeColumnWidths(this._selectedTable);this._selectedTableOffset=actuate.util.Element.cumulativeOffset(this._getFirstCellInTable(this._selectedTable));var D=this._viewer.contentPanel.floatPanel.getCurrentScale();var I=this._viewer.contentPanel.floatPanel.getOffset();var B=this._viewer.contentPanel.floatPanel.getOffset();var J=this._selectedTable.offsetHeight;var H=this._selectedTableOffset[1]-B[1];for(var F=0;F<this._selectedColumnIndex.length;F++){var G=this._selectedColumnIndex[F];var A=this._columnWidths[G];var C=this._selectedTableOffset[0]-B[0];for(var E=0;E<G;E++){C+=this._columnWidths[E];}var H=this._selectedTableOffset[1]-I[1]+this._groupTopHeight+2;var J=this._offsetHeight*D;this._viewer._overlay.getTableOverlay().adjust(F,A,J,C,H);}}},_computeColumnWidths:function(K){if(!K){return ;}var J=K.childNodes;if(!J){return ;}var I=this._viewer.contentPanel.isRTL();var B=actuate.util.browser;if(B.isIEFlag||B.isChrome||B.isFirefoxHigherVersion||B.isAndroid||B.isSafari){for(var H=J.length-1;H>=0;H--){var F=I?H:J.length-1-H;if(J[F].tagName&&J[F].tagName.toUpperCase()=="COLGROUP"){J=J[F].childNodes;break;}}}var L=0;for(var H=J.length-1;H>=0;H--){if(J[H].tagName&&J[H].tagName.toUpperCase()=="COL"){L++;}}var C=[];for(var H=0;H<K.rows.length;H++){J=K.rows[H].childNodes;if(J.length<L){continue;}C=[];for(var G=J.length-1;G>=0;G--){var F=I?G:J.length-1-G;var E=J[F].tagName;if(E){E=E.toUpperCase();if(E=="TH"||E=="TD"){var D=actuate.util.Element.visible(J[F])?J[F].offsetWidth:0;if(B.isChrome&&this._viewer.apiInstance._viewingMode!=actuate.Constant.ViewingMode.NON_DASHBOARD){D=actuate.util.Element.visible(J[F])?J[F].clientWidth+1:0;}if(F>0){var A=J[F].offsetLeft-J[F-1].offsetLeft;if(D==A+1||D==A-1){D=A;}}C.push(D);if(C.length>L){C=[];break;}}}}if(C.length==L){break;}}return C;},_getFirstCellInTable:function(G){var A=G.getElementsByTagName("th");var E=[];if(A&&A.length>0){var D=0;for(var F=0;F<A.length;F++){if(A[F].offsetParent&&A[F].offsetParent.id&&A[F].offsetParent.id==G.id){E[D++]=A[F];}}}if(E.length<=0){E=G.getElementsByTagName("td");}var C=this._viewer.contentPanel.isRTL();var B=null;if(C){B=E[E.length-1];for(var F=E.length-1;F>=0;F--){if(actuate.util.Element.visible(E[F])){B=E[F];break;}}return B;}B=E[0];for(var F=0;F<E.length;F++){if(actuate.util.Element.visible(E[F])){B=E[F];break;}}return B;},select:function(B,A){actuate.iv.utility.ivUtility.__removeSelection();var C=A.ctrlKey?((A.button==2&&actuate.util.Utility.isSafari)?false:true):false;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR,C);this._selectTable(B,actuate.util.Event.pointerX(A),A);this._viewer.eventDispatcher.focusId=B.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.TABLE;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED,null,actuate.Method.bind(this._updateFilterIcon,this));this._viewer.notifySelection(B,this._selectedColumnIndex[0]);},_updateFilterIcon:function(){this._viewer._overlay.getTableOverlay().showFilter({hasFilter:this._hasFilter()});},_selectTable:function(K,A,B){if(K){var F=this._viewer.contentPanel.floatPanel.getCurrentScale();this._columnWidths=this._computeColumnWidths(K);this.__computeColumnHeights(K,B);this._selectedTableOffset=actuate.util.Element.cumulativeOffset(this._getFirstCellInTable(K));var I=this._viewer.contentPanel.floatPanel.getOffset();var H=actuate.util.Element.realOffset(K);var C=A-this._selectedTableOffset[0]+H[0];this._selectedIId=K.getAttribute("iid");this._selectedTable=K;var D=0;for(var G=0;G<this._columnWidths.length;G++){var E=this._columnWidths[G]*F;D+=E;if(C<=D){var J=K.iid||K.getAttribute("iid");if(this._selectedColumnIIds.indexOf(this._columnIIds[J][G])==-1){this._selectedColumnIIds.push(this._columnIIds[J][G]);}this._selectedColumnIndex.push(G);this._viewer._overlay.getTableOverlay().show(G,E,this._offsetHeight*F,this._selectedTableOffset[0]+D-E-I[0],this._selectedTableOffset[1]-I[1]+this._groupTopHeight,this._hasFilter());break;}}this.__adjustOverlay();}},_hasFilter:function(){var A=false;if(!this._selectedIId||!this._selectedColumnIIds||this._selectedColumnIIds.length!=1){return A;}var D=this._viewer.documentModel.getElementByIId(this._selectedIId);var C=D.columnsMap[this._selectedColumnIIds[0]];if(C&&C.bindingName&&D.filterList){var B=D.filterList.getSimpleFilter(C.bindingName);if(!B){B=D.filterList.getTopBottomFilter(C.bindingName);}if(B||D.filterList.isAdvancedFilter){A=true;}}return A;},deSelect:function(){this._viewer._overlay.getTableOverlay().hide();this._selectedColumnIIds=[];this._selectedIId=null;this._selectedTable=null;this._selectedColumnIndex=[];},deSelectColumn:function(B){var A=actuate.util.Utility.arrayIndexOf(this._selectedColumnIndex,B);if(A<0){return ;}this._selectedColumnIIds.splice(A,1);this._selectedColumnIndex.splice(A,1);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED);},collapseExpand:function(B){if(!this._viewer.interactive){return ;}actuate.util.Event.stop(B);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR);if(this._viewer._toolbar){this._viewer._toolbar.reset();}this._viewer._contextMenu.reset();this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);var C=actuate.util.Event.element(B);while(!C.reportBase){C=C.parentNode;}var A=actuate.util.Event.element(B);this._base.collapse_expand_group(A);},_getSummaryFeatures:function(J){var I={"AlignLeft":true,"AlignCenter":true,"AlignRight":true,"HideColumn":true,"ShowColumns":true};I.ExportElement=false;var E=this._selectedColumnIIds;var H=(E.length==1);var B=J.columnsMap[E[0]];var F=B.getBinding();var G=B.isGrouped;if(H){var C=this._selectedColumnIndex;if(C&&C[0]==0){I["MoveToLeft"]=false;}else{I["MoveToLeft"]=!G;}if(C&&C[0]==J.getColumnCount()-1){I["MoveToRight"]=false;}else{I["MoveToRight"]=!G;}I["DeleteColumn"]=!G;I["Filter"]=true;I["SimpleFilter"]=true;I["ColumnWidth"]=true;I["ChangeFont"]=true;I["Format"]=true;var A=true;if(A){I["TopBottomN"]=true;}if(!B.isMergedColumn&&G&&F){var D=J.getSortDirection(F.name);if(!D||D==actuate.Constant.tag.Descending){I["SortAsc"]=true;}if(!D||D==actuate.Constant.tag.Ascending){I["SortDsc"]=true;}}if(B.isHeader){I["HeaderText"]=true;I["ChangeHeaderFont"]=true;I["HeaderAlignLeft"]=true;I["HeaderAlignCenter"]=true;I["HeaderAlignRight"]=true;}}if(J.canSwitchView){I["SwitchView"]=true;}return I;},getFeatures:function(){if(!this._selectedIId||!this._selectedColumnIIds||this._selectedColumnIIds.length==0){return{};}var U=this._viewer.documentModel.getElementByIId(this._selectedIId);var k=null;this.isSummaryTable=false;if(U.isSummaryTable){k=this._getSummaryFeatures(U);return k;}k={"AlignLeft":true,"AlignCenter":true,"AlignRight":true,"HideColumn":true,"ShowColumns":true,"DeleteColumn":true};k.ExportElement=actuate.util.Utility.isUserDefinedBookmark(U.id);var B=this._selectedColumnIIds;var N=(B.length==1);var e=U.columnsMap[B[0]];var G=e.getBinding();var F=e.isGrouped;var l=G&&G.isAggregation;var T=!F||e.isHiddenGroupDetail();var b=e.isDetailsVisible?true:false;var h=(U.groupsOrder.length>0);var P=(G)?true:false;var C=true;var R=true;if(N){R=(!F&&G&&!G.isAggregation)?true:false;}else{var d=actuate.Constant.DataType;for(var g=0;g<B.length;g++){var W=U.columnsMap[B[g]];if(W&&W.bindingName){var c=W.getDataItems();for(var M in c){var f=c[M];var I=f.getDataType();var J=(I==d.DATETIME||I==d.DATE||I==d.TIME);R&=!W.isGrouped&&!J&&!W.isMergedColumn;}}if(W&&W.groupName){R=0;}C&=(W.bindingName?true:false);}}var H=true;if(!G){H=U.hasBindings;}var Q=U.isSharedBinding;if(!U.isView){if(h&&!Q&&U.canSecureDeleteLastGroup&&!U.isSummaryTable){var Z=this._viewer&&this._viewer.documentModel&&this._viewer.documentModel._metadata&&this._viewer.documentModel._metadata.PLSEnabled;k.DeleteGroup=Z?false:true;}if(H){k["AdvancedSort"]=true;}if(R&&!Q&&C){k["AddGroup"]=true;}if(b&&!l){k["SimpleFilter"]=true;}}if(N){var a=this._selectedColumnIndex;if(a&&a[0]==0){k["MoveToLeft"]=false;}else{k["MoveToLeft"]=true;}if(a&&a[0]==U.getColumnCount()-1){k["MoveToRight"]=false;}else{k["MoveToRight"]=true;}k["ChangeFont"]=true;k["ShareStyle"]=true;k["ColumnWidth"]=true;if(F&&!U.isSummaryTable){if(T){k.ShowDetail=true;}else{k.HideDetail=true;}}if(G){k[e.suppressDuplicates?"SuppressDuplicateValues":"NotSuppressDuplicateValues"]=true;if(G.dataType){k["Format"]=true;var A=[];var K=U.columnsOrder;var S=U.columnsMap[B[0]];var D=U.bindingsMap[S.bindingName].dataType;for(var g=0;g<K.length;g++){var X=K[g];if(X!=B[0]){var Y=U.columnsMap[X];var L=(Y.bindingName&&Y.bindingName!=null)?Y.bindingName:Y.header;var E=U.bindingsMap[L];if(E){var I=E.dataType;if(I==D||(actuate.util.Utility.isNumericalType(I)&&actuate.util.Utility.isNumericalType(D))){A.push([X,Y.header]);}}}}if(A.length>0){k["ShareFormat"]=true;}else{k["ShareFormat"]=false;}}if(!F){k["ConditionalFormat"]=true;}}if(!U.isView){k["PageBreak"]=true;if(G){k["Aggregation"]=true;if(!e.isMergedColumn&&!e.isGrouped&&!e._binding.isAggregation){var O=U.getSortDirection(G.name);if(!O||O==actuate.Constant.tag.Descending){k.SortAsc=true;}if(!O||O==actuate.Constant.tag.Ascending){k.SortDsc=true;}}}if(H&&!F&&!l){k["Filter"]=true;}if(P&&!l){k["TopBottomN"]=true;var d=actuate.Constant.DataType;if(G){if(!G.dataType||(G.dataType!=d.DECIMAL&&G.dataType!=d.FLOAT&&G.dataType!=d.INTEGER&&G.dataType!=d.DOUBLE)){k["TopBottomN"]=false;}}}if(!Q){k["Calculation"]=true;}if(G&&e.isEditableExpression){k["EditCalculation"]=true;}}if(e.isHeader){k["HeaderText"]=true;k["ChangeHeaderFont"]=true;k["HeaderAlignLeft"]=true;k["HeaderAlignCenter"]=true;k["HeaderAlignRight"]=true;}}if(U.canSwitchView){k["SwitchView"]=true;}if(U.isAllowExport){k.ExportElementData=G==true&&Q==false;}if(R&&h){if(l){k.MoveToGroup=false;}else{k.MoveToGroup=true;}}var V=(e&&!e.dataItems)&&!R&&this._selectedColumnIIds.length==1;if(!V&&!Q&&C){k.Aggregation=true;}if(U.getColumnCount()>1){k.ReorderColumns=true;}return k;},__computeColumnHeights:function(E,D){var A=null;var F=D.target||D.srcElement;this._groupTopHeight=0;while(!F.reportBase){if(F.tagName.toUpperCase()=="TBODY"&&A==null){if(F.parentNode.reportBase){A=F.childNodes[0];while(A){if(A.nodeType!==1){A=A.nextSibling;continue;}var C=A.getAttribute?A.getAttribute("row-type"):null;if(!C||C=="footer"){A=null;break;}if(C=="header"){A=A.nextSibling;continue;}if(A.getAttribute("group-id")){break;}}break;}}F=F.parentNode;}if(A){var B=parseFloat(A.getAttribute("group-id"));while(A.getAttribute("group-id")){if(parseFloat(A.getAttribute("group-id"))==B){this._groupTopHeight=A.offsetTop;do{A=A.nextSibling;}while(A.nodeType!==1);if(A==null){this._offsetHeight=E.offsetHeight;break;}}else{break;}}this._offsetHeight=E.offsetHeight-this._groupTopHeight;}else{this._offsetHeight=E.offsetHeight;}},__adjustOverlay:function(){var F=this._viewer.contentPanel.floatPanel.getCurrentScale();var D=this._viewer.contentPanel.floatPanel.getOffset();var C=this._viewer._overlay.getTableOverlay()._usedOverlays;for(var B=0;B<C.length;B++){var E=this._selectedTableOffset[1]-D[1]+this._groupTopHeight+2;var A=this._offsetHeight*F;C[B].updatePosition(C[B]._width,A-2,C[B]._left,E);}}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVTableEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{_OPRAND_COLUMNNAME:"columnname",_OPRAND_ISADVANCED:"isAdavanced",_OPRAND_COLUMNIID:"columniid",_OPRAND_ITEMID:"ItemId",_OPRAND_ISEDIT:"isEdit",_OPRAND_TARGET_COLUMNIID:"targetColumniid",_OPRAND_COLUMNWIDTH:"columnWidth",_OPRAND_OLD_COLUMNWIDTH:"oldColumnWidth",_OPRAND_TABLEWIDTH:"tableWidth",initialize:function(A){actuate.iv.ui.report.IVTableEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.TABLE;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._eh_deleteColumn_c=actuate.Method.bind(this._eh_deleteColumn,this);this._queryText_c=actuate.Method.bind(this._queryText,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_TEXT,A,this._queryText_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_TEXT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTASC,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTDESC,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_SORT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_LABEL_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UPDATE_PAGE_BREAK,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ADD_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UPDATE_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DELETE_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HIDE_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SHOW_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_COLUMN_LIST,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMATSHARING,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_REORDERCOLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_REPEAT_VALUE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_NO_REPEAT_VALUE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SETCOLUMNAGGREGATION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_NEW_COM_COL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EDIT_COM_COL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_BRD_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CF_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DELETE_COLUMN,A,this._eh_deleteColumn_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT_RULE,A,actuate.Method.bind(this.__eh_applyFormatRule,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_COLUMN_WIDTH,A,actuate.Method.bind(this._eh_applyColumnWidth,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HIDEDETAIL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SHOWDETAIL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_REQ_WITH_DATA,A,actuate.Method.bind(this.__eh_multiDataItem,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SWITCH_VIEW,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));},__eh_blur:function(C,A,B){if(!B){this._selectionManager.deSelect();}return false;},__get_ADD_GROUP_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});if(B&&B.dataItemId){C.push({name:this._OPRAND_ITEMID,value:B.dataItemId});}if(B){return[B.documentElement?B:null,C];}else{return[null,C];}},__get_DELETE_GROUP_data:function(A,B){var C=this._createCommonOperands();return[B,C];},__get_UPDATE_GROUP_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});if(B&&B.dataItemId){C.push({name:this._OPRAND_ITEMID,value:B.dataItemId});}return[B,C];},__get_HIDEDETAIL_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B||C["name"]=="columniid"||C["name"]=="dataitem"){A=this._createCommonOperands();A.push({name:C["name"],value:C["value"]});}else{A=E;}return[B,A];},__get_SHOWDETAIL_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B||C["name"]=="columniid"||C["name"]=="dataitem"){A=this._createCommonOperands();A.push({name:C["name"],value:C["value"]});}else{A=E;}return[B,A];},__get_SORTASC_data:function(H,G){var B=G;var K=null;var F=this._getColumn(G);if(F==null){return null;}if(B||F["name"]=="columniid"){B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var A=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.COLUMNDEFS);B.documentElement.appendChild(A);var L=actuate.Constant.tag.Ascending;var C=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.ColumnDef);childNode=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.Iid);D=B.createTextNode(F["value"]);childNode.appendChild(D);C.appendChild(childNode);childNode=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);D=B.createTextNode(L);childNode.appendChild(D);C.appendChild(childNode);A.appendChild(C);K=this._createCommonOperands();}else{if(F["name"]=="dataitem"){B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var E=actuate.util.XmlDom.createElement(B,"SortDefinitionList");B.documentElement.appendChild(E);var I=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDefinition);E.appendChild(I);var L=actuate.Constant.tag.Ascending;var J=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);var D=B.createTextNode(L);J.appendChild(D);I.appendChild(J);K=this._createCommonOperands();}else{K=G;}}return[B,K];},__get_SORTDESC_data:function(H,G){var B=G;var K=null;var F=this._getColumn(G);if(F==null){return null;}if(B||F["name"]=="columniid"){B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var A=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.COLUMNDEFS);B.documentElement.appendChild(A);var L=actuate.Constant.tag.Descending;var C=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.ColumnDef);childNode=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.Iid);D=B.createTextNode(F["value"]);childNode.appendChild(D);C.appendChild(childNode);childNode=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);D=B.createTextNode(L);childNode.appendChild(D);C.appendChild(childNode);A.appendChild(C);K=this._createCommonOperands();}else{if(F["name"]=="dataitem"){B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var E=actuate.util.XmlDom.createElement(B,"SortDefinitionList");B.documentElement.appendChild(E);var I=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDefinition);E.appendChild(I);var L=actuate.Constant.tag.Descending;var J=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);var D=B.createTextNode(L);J.appendChild(D);I.appendChild(J);K=this._createCommonOperands();}else{K=G;}}return[B,K];},__get_APPLY_ADVANCED_SORT_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_ISADVANCED,value:"true"});return[B,C];},__get_HIDE_COLUMN_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});return[B,C];},_eh_applyColumnWidth:function(F,C,D,A){if(this._viewer.eventDispatcher.focusId!=F){return false;}var E=this._createCommonOperands();E.push({name:this._OPRAND_COLUMNWIDTH,value:D[0]});E.push({name:this._OPRAND_OLD_COLUMNWIDTH,value:D[1]});E.push({name:this._OPRAND_TABLEWIDTH,value:this._selectionManager.getSelectedTable().offsetWidth});E.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds()});var B=[null,E];if(B==null){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("error.table.noColumn"));return false;}C.addOperation(this._selectionManager.getSelectedIId(),this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],B);if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}return true;},__get_SHOW_COLUMN_data:function(A,B){var C=this._createCommonOperands();return[B,C];},__get_COLUMN_LIST_data:function(A,B){var C=this._createCommonOperands();return[B,C];},__get_APPLY_FORMATSHARING_data:function(A,B){var C=this._createCommonOperands();return[B,C];},__get_APPLYFILTER_data:function(F,G){var D=null;var A=null;var E=this._getColumn(G);var B=false;for(var C=0;C<G.length;C++){if(G[C]&&G[C]["name"]=="filter"){D=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createFilterRequestForMashup(G[C]["value"]);A=null;B=true;break;}}if(E&&!B){D=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createFilterRequest();A=this._createCommonOperands();A.push({name:E["name"],value:E["value"]});}return[D,A];},__get_MOREVALUES_FILTER_data:function(F,G,H){var B=H;var C=null;var A=null;var D=this._getColumn(G);if(D==null){return null;}if(D&&D["name"]=="columniid"){if(!G[3]||G[3]==null){if(!B){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog");}C=B.createMoreValuesRequest(D["value"]);}else{if(!B){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog");}C=B.createMoreValuesRequest(G[3]);}A=G;}else{if(D&&D["name"]=="dataitem"){if(!G[3]||G[3]==null){var E=document.getElementById(this._viewer.eventDispatcher.focusId);if(!B){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog");}C=B.createMoreValuesRequest(E.iid);}A=G;}else{A=G;}}return[C,A];},__get_CF_MOREVALUES_FILTER_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(C&&C["name"]=="columniid"){B=E[2];A=[E[1],{name:"target",value:"actuate.iv.ui.dialog.style.IVValueDialog"},E[3],E[4]];}else{A=E;}return[B,A];},__get_VALIDATE_FILTER_EXPRESSION_data:function(B,C){var A=null;if(C[0]["name"]=="target"){A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();}return[A,C];},__get_APPLYADVANCEDFILTER_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(C["name"]=="columniid"){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();A=this._createCommonOperands();}else{A=E;}return[B,A];},__get_CLEARFILTER_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B||C["name"]=="columniid"||C["name"]=="dataitem"){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createShowDialogRequest(this._viewer);A=this._createCommonOperands();A.push({name:C["name"],value:C["value"]});A.push({name:"dialogName",value:"actuate.dialog.SelectedFilterDialog"});}else{A=E;}return[B,A];},__get_APPLYTOPBOTTOMN_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B||C["name"]=="columniid"||C["name"]=="dataitem"){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();A=this._createCommonOperands();A.push({name:C["name"],value:C["value"]});}else{A=E;}return[B,A];},__get_CLEARTOPBOTTOMN_data:function(D,E){var B=null;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B||C["name"]=="columniid"||C["name"]=="dataitem"){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);A=this._createCommonOperands();A.push({name:C["name"],value:C["value"]});A.push({name:"dialogName",value:"ivTopBottomNDialog"});}else{A=E;}return[B,A];},__get_SET_TEXT_data:function(C,D){var E=this._createCommonOperands();var A=this._getColumn(D);if(A.name=="columniid"){E.push({name:this._OPRAND_COLUMNIID,value:A.value});}else{if(A.name=="dataitem"){E=null;}else{E=D;}}var B=new actuate.iv.data.IVLabelText();B.setText(D[0].value);var D=new actuate.iv.data.IVData();return[D.getLabelText(this._viewer,B),E];},__get_SETCOLUMNAGGREGATION_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});return[B,C];},__get_UPDATE_PAGE_BREAK_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});return[B,C];},__get_APPLY_FORMAT_data:function(D,E){if(!E){return null;}var B=E;var F=this._createCommonOperands();var C=this._getColumn(E);if(C==null){return null;}if(C["name"]=="columniid"){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);B.documentElement.appendChild(actuate.util.XmlDom.createElement(B,actuate.Constant.tag.COLUMNDEFS));var A=[];A.push(actuate.util.XmlDom.createElementTextNode(B,actuate.Constant.tag.Iid,C["value"]));A.push(E);actuate.iv.utility.ivUtility.appendColumnDef(B,A);}return[B,F];},__get_SET_FONT_data:function(C,D){var A=D;var E=null;var B=this._getColumn(D);if(A){E=this._createCommonOperands();E.push({name:B.name,value:B.value});}else{E=D;}return[A,E];},__get_SET_LABEL_FONT_data:function(C,D){var A=D;var E=null;var B=this._getColumn(D);if(A){E=this._createCommonOperands();E.push({name:B.name,value:B.value});}else{E=D;}return[A,E];},__get_REORDERCOLUMN_data:function(A,B){var C=this._createCommonOperands();return[B,C];},__get_MOVE_COLUMN_data:function(A,B){return this._getMoveColumnData(this._getColumn(B)["value"],B);},__get_MOVE_TO_LEFT_data:function(){var F=this._selectionManager._columnIIds[this._selectionManager.getSelectedTable().iid];var D=this._selectionManager._selectedColumnIndex[0];var B=D-1;var E=this._viewer.documentModel.getElementByIId(this._selectionManager._selectedIId);if(E!=null){for(var A=D-1;A>=0;A--){var C=E.columnsMap[F[A]];if(C!=null&&C.visible!=false){B=A;break;}}}return this._getMoveColumnData(F[D],F[B]);},__get_MOVE_TO_RIGHT_data:function(){var F=this._selectionManager._columnIIds[this._selectionManager.getSelectedTable().iid];var D=this._selectionManager._selectedColumnIndex[0];var B=D+1;var E=this._viewer.documentModel.getElementByIId(this._selectionManager._selectedIId);if(E!=null){for(var A=D+1;A<E.getColumnCount();A++){var C=E.columnsMap[F[A]];if(C!=null&&C.visible!=false){B=A;break;}}}return this._getMoveColumnData(F[D],F[B]);},_getMoveColumnData:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:A});C.push({name:this._OPRAND_TARGET_COLUMNIID,value:B});return[null,C];},__get_DELETE_COLUMN_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});return[B,C];},__get_ALIGN_LEFT_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"left"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"left"});}else{A=D;}}return[null,A];},__get_ALIGN_RIGHT_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"right"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"right"});}else{A=D;}}return[null,A];},__get_ALIGN_CENTER_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"center"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"center"});}else{A=D;}}return[null,A];},__get_HEADER_ALIGN_LEFT_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"left"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"left"});}else{A=D;}}return[null,A];},__get_HEADER_ALIGN_RIGHT_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"right"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"right"});}else{A=D;}}return[null,A];},__get_HEADER_ALIGN_CENTER_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=this._createCommonOperands();if(B["name"]=="columniid"){A.push({name:"alignment",value:"center"});A.push({name:"columniid",value:B["value"]});}else{if(B["name"]=="dataitem"){A.push({name:"alignment",value:"center"});}else{A=D;}}return[null,A];},__get_REPEAT_VALUE_data:function(D,E){var B=null;var A=this._createCommonOperands();var C=this._getColumn(E);if(C==null){return null;}if(C.name=="columniid"){A.push({name:"columniid",value:C.value});A.push({name:"norepeat",value:"false"});}else{A.push(E);A.push({name:"norepeat",value:"true"});}return[B,A];},__get_NO_REPEAT_VALUE_data:function(D,E){var B=null;var A=this._createCommonOperands();var C=this._getColumn(E);if(C==null){return null;}if(C["name"]=="columniid"){A.push({name:"columniid",value:C.value});A.push({name:"norepeat",value:"true"});}else{A.push(E);A.push({name:"norepeat",value:"false"});}return[B,A];},__get_SWITCH_VIEW_data:function(A,B){var C=this._createCommonOperands();C.push({name:"from",value:"TABLE"});C.push({name:"to",value:"CHART"});C.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});return[B,C];},__get_MOVE_TO_GROUP_data:function(B,C){var A=this._getColumn(C);if(A==null){return null;}var D=this._createCommonOperands();if(A.name=="columniid"){D.push({name:this._OPRAND_COLUMNIID,value:A.value});D.push({name:"groupName",value:actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.column.IVMoveToGroupDialog").__getGroupName()});D.push({name:"groupHeader",value:actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.column.IVMoveToGroupDialog").__getHeaderCount()});}else{D=C;}return[null,D];},__get_APPLY_NEW_COM_COL_data:function(C,D){var B=this._getColumn(D);if(B==null){return null;}var A=null;var E=this._createCommonOperands();if(B.name=="columniid"){A=D;E.push({name:this._OPRAND_COLUMNIID,value:B.value});}else{E=D;}return[A,E];},__get_EDIT_COM_COL_data:function(A,B){var C=this._createCommonOperands();C.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});return[B,C];},__get_VALIDATE_BRD_EXPRESSION_data:function(D,E){var B=E;var A=null;var C=this._getColumn(E);if(C==null){return null;}if(B){A=[{name:"columniid",value:C["value"]},{name:"dialog",value:"actuate.iv.ui.dialog.calculation.ivCalculatedColumnDialog"}];}else{A=E;}return[B,A];},_processOperation:function(E,C,D,A){if(this._viewer.eventDispatcher.focusId!=E){return false;}methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(C,D);if(B==null){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("error.table.noColumn"));return false;}C.addOperation(this._selectionManager.getSelectedIId(),this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],B);return true;},_eh_deleteColumn:function(F,C,D,A){var E=this._createCommonOperands();E.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});var B=[D,E];if(this._selectionManager.getSelectedIId()!=null){C.addOperation(this._selectionManager.getSelectedIId(),this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],B);if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}}return true;},_getColumn:function(B,D){var A=this._selectionManager.getSelectedType();var E=this._selectionManager.getSelectedIId();if(A!=actuate.Constant.tag.Table&&A!=actuate.Constant.tag.SummaryTable){return{name:"dataitem",value:E};}var C=this._selectionManager.getSelectedColumnIIds(E);return{name:"columniid",value:C};},__eh_applyFormatRule:function(B,E,C){var J=document.getElementById(B);var G=this._selectionManager.getSelectedColumnIIds(J.iid);if(G!=null){var F=C.getElementsByTagName(actuate.Constant.tag.ColumnDef);if(F!=null){for(var D=0;D<F.length;D++){var H=C.getElementsByTagName(actuate.Constant.tag.ColumnDef)[D];var A=actuate.util.XmlDom.createElement(C,actuate.Constant.tag.Iid);var I=C.createTextNode(G);H.appendChild(A);A.appendChild(I);}}}if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}E.addOperation(J.iid,this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation.__OP_APPLY_FORMAT_RULE,[C,this._createCommonOperands()]);return true;},__eh_multiDataItem:function(C,A,B){return this._base.handleMultiDataItem(C,A,B);},_queryText:function(C,I,H,E){var Q=this._selectionManager.getSelectedTable();var N=this._selectionManager._selectedColumnIndex[0];var M=Q.rows;if(!M){return ;}var K=null;for(var G=0;G<M.length;G++){var B=M[G].getElementsByTagName("TH");for(var F=0;F<B.length;F++){var A=B[F].getElementsByTagName("DIV");if(A&&A.length>0){for(var D=0;D<A.length;D++){if("LABEL"==A[D].getAttribute("element_type")){K=B;break;}}}}if(K!=null){break;}}var J=null;var L=0;for(var G=0;G<K.length;G++){if(L==N){var A=K[L].getElementsByTagName("DIV");if(A&&A.length>0){for(var D=0;D<A.length;D++){if("LABEL"==A[D].getAttribute("element_type")){J=A[D];break;}}}}if(K[G].getAttribute("colspan")){L=L+parseInt(K[G].getAttribute("colspan"));}else{L++;}}if(J==null){return ;}var P=actuate.util.Element.cumulativeOffset(J);var O=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getLabelOverlay().showEditTextBox(J,J.offsetWidth,J.offsetHeight,P[0]-O[0],P[1]-O[1]);this._viewer._overlay.getTableOverlay().hide();},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._selectionManager.getSelectedIId(),this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._selectionManager.getSelectedType(),"defaultFormat":"XLS","bookmark":B});return false;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVTable=actuate.Class.create();actuate.iv.ui.report.IVTable.prototype={_viewer:null,_selectionManager:null,_eventHandlers:null,_firstTable:null,initialize:function(A){if(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVTableSelectionManager(this);this._eventHandlers=new actuate.iv.ui.report.IVTableEventHandlers(this);this._eventHandlers.registerEventHandlers();}},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(B){var A=this.getTable(B);if(A==null){return ;}var C=A.getAttributeNode("iid");if(C){A.iid=C.nodeValue;}A.reportBase=true;this._selectionManager.activate(A);},_getFirstTable:function(A){if(!this._firstTable){var C=A.getElementsByTagName("table");for(var B=0;B<C.length;B++){var D=C[B].getAttribute("element_type");if(D!="TABLE"){continue;}this._firstTable=C[B];break;}}return this._firstTable;},getTable:function(C){if(!C){return this._getFirstTable(this._viewer.contentPanel.floatPanel.instance);}var A=document.getElementById(C);if(A){var B=A.getAttribute("element_type");if(B=="TABLE"){return document.getElementById(C);}return null;}return null;},clear:function(){this._selectionManager.deActivate();this._firstTable=null;},processGroupIcon:function(F,G){var B=null;var D=F;while(!D.reportBase){if(D.getAttributeNode("group-id")!=null&&D.tagName.toUpperCase()=="TR"&&B==null){B=D;break;}D=D.parentNode;}if(B){var E=B.getAttributeNode("group-id").value;var H=parseInt(E.substring(0,E.indexOf(".")));var I=false;if(G){var J=G.split(",");for(var A=0;A<J.length;A++){if(J[A]==H){I=true;break;}}}B.collapsed=I;var C=this._viewer.getBaseUrl();F.src=I?C+"iv/images/Collapse.gif":C+"iv/images/Expand.gif";}},pre_collapse:function(M){var B=[];for(var F=0;F<M.rows.length;F++){var A=M.rows[F];var L=A.getAttributeNode("group-id");if(L){var D=parseInt(L.value.substring(0,L.value.indexOf(".")));var K=true;try{for(var E=0;E<D-1;E++){K=K&&!(B[E].collapsed);}}catch(H){}if(actuate.util.browser&&actuate.util.browser.__isIE()){var J=A.getElementsByTagName("div");for(var C=0;C<J.length;C++){if(J[C].getAttribute("element_type")=="Chart"){if(J[C].style.display!=null&&J[C].style.display.toLowerCase()!="none"){J[C].style.display=K?"":"none";}}}}if(A.style.display!=null&&A.style.display.toLowerCase()!="none"){A.style.display=K?"":"none";}if(D>B.length){B.push(A);}else{if(D==B.length){var I=B[B.length-1].collapsed;if(I!=true&&I!=false){var G=B.length;for(var E=0;E<=G-D;E++){B.pop();}B.push(A);}}else{if(D<B.length){var G=B.length;for(var E=0;E<=G-D;E++){B.pop();}B.push(A);}}}}}},collapse_expand_group:function(A){var T=null;var X=A;while(!X.reportBase){if(X.getAttributeNode("group-id")!=null&&X.tagName.toUpperCase()=="TR"&&T==null){T=X;}X=X.parentNode;}var E=T.getAttributeNode("group-id").value;var F=parseInt(E.substring(0,E.indexOf(".")));T.collapsed=!T.collapsed;var U=[];var H=false;var Q=X;var J=T;for(var O=0;O<Q.rows.length;O++){var D=Q.rows[O];var I=D.getAttributeNode("group-id");if(I){var V=parseInt(I.value.substring(0,I.value.indexOf(".")));if(H&&F>V){break;}if(H){var W=true;try{for(var M=0;M<V-1;M++){W=W&&!(U[M].collapsed);}}catch(R){}if(actuate.util.browser&&actuate.util.browser.__isIE()){var S=D.getElementsByTagName("div");for(var L=0;L<S.length;L++){if(S[L].getAttribute("element_type")=="Chart"){S[L].style.display=W?"":"none";}}}D.style.display=W?"":"none";}else{if(E==I.value&&T.id==D.id){H=true;var G=0;var K=D.cells[0];if(K){if(D.collapsed){var B=K.getAttribute("rowSpan");B=parseInt(B?B:1);K.setAttribute("rowSpan",1);G=B-1;D.rowSpanDelta=B-1;}else{K.setAttribute("rowSpan",D.rowSpanDelta+1);G=0-D.rowSpanDelta;D.rowSpanDelta=0;}}if(G!=0){for(var M=0;M<V-1;M++){K=U[M].cells[0];if(K){var B=K.getAttribute("rowSpan");B=parseInt(B?B:1);K.setAttribute("rowSpan",B-G);}}}}}if(V>U.length){U.push(D);}else{if(V==U.length){var N=U[U.length-1].collapsed;if(N!=true&&N!=false){var P=U.length;for(var M=0;M<=P-V;M++){U.pop();}U.push(D);}}else{if(V<U.length){var P=U.length;for(var M=0;M<=P-V;M++){U.pop();}U.push(D);}}}}}var C=this._viewer.getBaseUrl();A.src=T.collapsed?C+"iv/images/Collapse.gif":C+"iv/images/Expand.gif";},handleMultiDataItem:function(C,A,B){A.copyOperation(B[0],B[1]);return true;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVSummaryTableSelectionManager=actuate.Class.extendClass(actuate.iv.ui.report.IVTableSelectionManager,{_selectedType:actuate.Constant.tag.SummaryTable,initialize:function(A){if(A){actuate.iv.ui.report.IVSummaryTableSelectionManager.superclass.initialize.call(this,A);}},getSelectedType:function(){return this._selectedType;},select:function(B,A){actuate.iv.utility.ivUtility.__removeSelection();var C=A.ctrlKey?((A.button==2&&actuate.util.Utility.isSafari)?false:true):false;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR,C);this._selectTable(B,actuate.util.Event.pointerX(A));this._viewer.eventDispatcher.focusId=B.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.SUMMARYTABLE;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED,null,actuate.Method.bind(this._updateFilterIcon,this));this._viewer.notifySelection(B,this._selectedColumnIndex[0]);},_getSummaryFeatures:function(N){var L={"AlignLeft":true,"AlignCenter":true,"AlignRight":true,"HideColumn":true,"ShowColumns":true};L.ExportElement=actuate.util.Utility.isUserDefinedBookmark(N.id);var H=this._selectedColumnIIds;var K=(H.length==1);var B=N.columnsMap[H[0]];var I=B.getBinding();var J=B.isGrouped;if(K){var C=this._selectedColumnIndex;if(C&&C[0]==0){L["MoveToLeft"]=false;}else{L["MoveToLeft"]=!J;var G=N.columnsMap[N.columnsOrder[C[0]-1]];if(G!=null&&G.isEditableExpression!=true){var E=G.getBinding();if(E!=null&&G.isGrouped){L["MoveToLeft"]=false;}else{if(E!=null&&E.isAggregation==false){L["MoveToLeft"]=false;}}}}if(C&&C[0]==N.getColumnCount()-1){L["MoveToRight"]=false;}else{L["MoveToRight"]=!J;}if(I&&I.hasDependents==true){L["DeleteColumn"]=false;}else{L["DeleteColumn"]=true;}if(J){var M=B.getGroup();if(M!=null&&M.intervalType!=null&&M.intervalType!="none"){L["SimpleFilter"]=false;L["Filter"]=false;}else{L["SimpleFilter"]=true;L["Filter"]=true;}}else{if(B.bindingPosition!=null&&B.bindingPosition=="table-header"){L["SimpleFilter"]=false;L["Filter"]=false;}else{L["SimpleFilter"]=true;L["Filter"]=true;}}L["ColumnWidth"]=true;L["ChangeFont"]=true;if(I){L["Format"]=true;}var A=true;var D=actuate.Constant.DataType;if(I){if(!I.dataType||(I.dataType!=D.DECIMAL&&I.dataType!=D.FLOAT&&I.dataType!=D.INTEGER&&I.dataType!=D.DOUBLE)){A=false;}}if(N.groupsOrder.length==0){A=false;}if(A){L["TopBottomN"]=true;}if(!B.isMergedColumn&&J&&I){var F=N.getSortDirection(I.name);if(!F||F==actuate.Constant.tag.Descending){L["SortAsc"]=true;}if(!F||F==actuate.Constant.tag.Ascending){L["SortDsc"]=true;}}if(B.isHeader){L["HeaderText"]=true;L["ChangeHeaderFont"]=true;L["HeaderAlignLeft"]=true;L["HeaderAlignCenter"]=true;L["HeaderAlignRight"]=true;}}if(N.canSwitchView){L["SwitchView"]=true;}L["Calculation"]=false;L["EditCalculation"]=false;return L;},getFeatures:function(){if(!this._selectedIId||!this._selectedColumnIIds||this._selectedColumnIIds.length==0){return{};}var B=this._viewer.documentModel.getElementByIId(this._selectedIId);var A=null;this.isSummaryTable=false;if(B.isSummaryTable){A=this._getSummaryFeatures(B);return A;}},__computeColumnHeights:function(B,A){this._groupTopHeight=0;this._offsetHeight=B.offsetHeight;},__adjustOverlay:function(){}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVSummaryTableEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.IVTableEventHandlers,{initialize:function(A){actuate.iv.ui.report.IVSummaryTableEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.SUMMARYTABLE;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._eh_deleteColumn_c=actuate.Method.bind(this._eh_deleteColumn,this);this._queryText_c=actuate.Method.bind(this._queryText,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_TEXT,A,this._queryText_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_TEXT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTASC,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTDESC,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_SORT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_LABEL_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UPDATE_PAGE_BREAK,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ADD_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UPDATE_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DELETE_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HIDE_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SHOW_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_COLUMN_LIST,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMATSHARING,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_REORDERCOLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_COLUMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOVE_TO_GROUP,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SETCOLUMNAGGREGATION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_NEW_COM_COL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EDIT_COM_COL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_BRD_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CF_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DELETE_COLUMN,A,this._eh_deleteColumn_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HEADER_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT_RULE,A,actuate.Method.bind(this.__eh_applyFormatRule,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_COLUMN_WIDTH,A,actuate.Method.bind(this._eh_applyColumnWidth,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HIDEDETAIL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SHOWDETAIL,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_REQ_WITH_DATA,A,actuate.Method.bind(this.__eh_multiDataItem,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SWITCH_VIEW,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));},_eh_deleteColumn:function(A,G,F,E){if(this._selectionManager.getSelectedIId()==null){return ;}var H=this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId());if(H==null||H.length<=0){return ;}if(H!=null&&H.length>0){var I=this._viewer.documentModel.getElementByIId(this._selectionManager.getSelectedIId());var C=I.columnsMap[H[0]];if(C.getBinding()!=null&&C.getBinding().hasDependents==true){return ;}}var D=this._createCommonOperands();D.push({name:this._OPRAND_COLUMNIID,value:this._selectionManager.getSelectedColumnIIds(this._selectionManager.getSelectedIId())});var B=[F,D];G.addOperation(this._selectionManager.getSelectedIId(),this._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[E],B);if(this._viewer.tocPanel!=null){this._viewer.tocPanel.close();}return true;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVSummaryTable=actuate.Class.extendClass(actuate.iv.ui.report.IVTable,{initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVSummaryTableSelectionManager(this);this._eventHandlers=new actuate.iv.ui.report.IVSummaryTableEventHandlers(this);this._eventHandlers.registerEventHandlers();},_getFirstTable:function(A){if(!this._firstTable){var C=A.getElementsByTagName("table");for(var B=0;B<C.length;B++){var D=C[B].getAttribute("element_type");if(D!="SUMMARYTABLE"){continue;}this._firstTable=C[B];break;}}return this._firstTable;},getTable:function(C){if(!C){return this._getFirstTable(this._viewer.contentPanel.floatPanel.instance);}var A=document.getElementById(C);if(A){var B=A.getAttribute("element_type");if(B=="SUMMARYTABLE"){return document.getElementById(C);}return null;}return null;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVLabel=actuate.Class.create();actuate.iv.ui.report.IVLabel.prototype={_viewer:null,_LABEL:"LABEL",_TEXTITEM:"TEXT",_firstLabel:null,_firstTextItem:null,_selectedLabel:null,_selectedIId:null,_selectedType:actuate.Constant.tag.Label,initialize:function(A){this._viewer=A;this._registerEventHandlers();},getSelectedIId:function(){return this._selectedIId;},getSelectedType:function(){return this._selectedType;},_registerEventHandlers:function(){var A=actuate.Constant.element.LABEL;this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this._eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_TEXT,A,actuate.Method.bind(this._queryText,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_TEXT,A,actuate.Method.bind(this._eh_setText,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_TEXT,A,actuate.Method.bind(this._eh_queryText,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,actuate.Method.bind(this._eh_setFont,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_LABEL_FONT,A,actuate.Method.bind(this._eh_setFont,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_LEFT,A,actuate.Method.bind(this._eh_setAlign_left,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_CENTER,A,actuate.Method.bind(this._eh_setAlign_center,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_RIGHT,A,actuate.Method.bind(this._eh_setAlign_right,this));},getLabel:function(C){if(!C){this._generateFirstItems(this._viewer.contentPanel.floatPanel.instance);return this._firstLabel;}var A=document.getElementById(C);if(A){var B=A.getAttribute("element_type");if(B==this._LABEL){return A;}return null;}return null;},getTextItem:function(C){if(!C){this._generateFirstItems(this._viewer.contentPanel.floatPanel.instance);return this._firstTextItem;}var B=document.getElementById(C);if(B){var A=B.getAttribute("element_type");if(A==this._TEXTITEM){return B;}return null;}return null;},_generateFirstItems:function(A){if(!this._firstLabel&&!this._firstTextItem){var C=A.getElementsByTagName("div");for(var B=0;B<C.length;B++){if(C[B].getAttribute("element_type")==this._LABEL){if(!this._firstLabel){this._firstLabel=C[B];}}else{if(C[B].getAttribute("element_type")==this._TEXTITEM){if(!this._firstTextItem){this._firstTextItem=C[B];}}}if(this._firstLabel!=null&&this._firstTextItem!=null){break;}}}},clear:function(){this._firstLabel=null;this._firstTextItem=null;},focus:function(A,E,C){if(A){var D=actuate.util.Element.cumulativeOffset(A);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getMouseOverOverlay().show(this._selectedType,A.offsetWidth,A.offsetHeight,D[0]-B[0],D[1]-B[1],E-B[0],C-B[1]);}},select:function(A){if(A){var D=this._viewer.contentPanel.floatPanel.getCurrentScale();actuate.iv.utility.ivUtility.__removeSelection();this._viewer.documentModel.registerItem(A);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);var C=actuate.util.Element.cumulativeOffset(A);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getLabelOverlay().show(A,A.offsetWidth*D,A.offsetHeight*D,C[0]-B[0],C[1]-B[1]);this._selectedIId=A.getAttribute("iid");this._selectedLabel=A;this._viewer.eventDispatcher.focusId=A.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.LABEL;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED);this._viewer.notifySelection(A);}},deSelect:function(){this._viewer._overlay.getLabelOverlay().hide();this._selectedIId=null;},_eh_blur:function(A){this.deSelect();return false;},_eh_adjust:function(C){if(this._selectedLabel){var A=actuate.util.Element.cumulativeOffset(this._selectedLabel);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getLabelOverlay().updatePosition(this._selectedLabel.offsetWidth,this._selectedLabel.offsetHeight,A[0]-B[0],A[1]-B[1]);}},_eh_setFont:function(D,B,C){if(this._selectedIId){var A=[{name:"page",value:this._viewer.currentPage},{name:"totalpage",value:this._viewer.totalPage},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}];if(this._viewer&&this._viewer.apiInstance&&this._viewer.apiInstance._gadgetId!=null){A.push({name:"gadgetId",value:this._viewer.apiInstance._gadgetId});}B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SET_FONT,[C,A]);}return true;},_eh_setAlign_left:function(B,A){return this._setAlignment("left",A);},_eh_setAlign_center:function(B,A){return this._setAlignment("center",A);},_eh_setAlign_right:function(B,A){return this._setAlignment("right",A);},_setAlignment:function(C,B){if(this._selectedIId){var A=[{name:"alignment",value:C},{name:"page",value:this._viewer.currentPage},{name:"totalpage",value:this._viewer.totalPage},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}];if(this._viewer&&this._viewer.apiInstance&&this._viewer.apiInstance._gadgetId!=null){A.push({name:"gadgetId",value:this._viewer.apiInstance._gadgetId});}B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SET_ALIGN,[null,A]);return true;}},_queryText:function(G,D,F,B){var A=this._selectedLabel;if(A){var E=actuate.util.Element.cumulativeOffset(A);var C=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getLabelOverlay().showEditTextBox(A,A.offsetWidth,A.offsetHeight,E[0]-C[0],E[1]-C[1]);}},_eh_setText:function(F,D,E){if(this._selectedIId){var C=new actuate.iv.data.IVLabelText();C.setText(E[0].value);var E=new actuate.iv.data.IVData();var B=E.getLabelText(this._viewer,C);var A=[{name:"page",value:this._viewer.currentPage},{name:"totalpage",value:this._viewer.totalPage},{name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin}];if(this._viewer&&this._viewer.apiInstance&&this._viewer.apiInstance._gadgetId!=null){A.push({name:"gadgetId",value:this._viewer.apiInstance._gadgetId});}D.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SET_TEXT,[B,A]);}return true;},_eh_queryText:function(C,A,B){if(this._selectedIId){this._viewer._overlay.getLabelOverlay().doInlineEdit();}return false;},getFeatures:function(){var A={"ChangeFont":true,"AlignLeft":true,"AlignCenter":true,"AlignRight":true,"Text":true};return A;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVDataItem=actuate.Class.create();actuate.iv.ui.report.IVDataItem.prototype={_viewer:null,_firstDataItem:null,_DATAITEM:"DATA",_selectedDataItem:null,_selectedIId:null,_selectedType:actuate.Constant.tag.DataItem,initialize:function(A){this._viewer=A;this._registerEventHandlers();},getSelectedIId:function(){return this._selectedIId;},getSelectedType:function(){return this._selectedType;},_registerEventHandlers:function(){var A=actuate.Constant.element.DATAITEM;this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this._eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTASC,A,actuate.Method.bind(this._eh_sortasc,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SORTDESC,A,actuate.Method.bind(this._eh_sortdesc,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,actuate.Method.bind(this._eh_setFont,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT,A,actuate.Method.bind(this._eh_setFormat,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,actuate.Method.bind(this._eh_setTopBottomN,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,actuate.Method.bind(this._eh_clearTopBottomN,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,actuate.Method.bind(this._eh_setFilter,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,actuate.Method.bind(this._eh_moreValues,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,actuate.Method.bind(this._eh_clearFilter,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_HIDEDETAIL,A,actuate.Method.bind(this._eh_hideDetail,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SHOWDETAIL,A,actuate.Method.bind(this._eh_showDetail,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_UPDATE_PAGE_BREAK,A,actuate.Method.bind(this._eh_page_break,this));},focus:function(B,E,D){if(B){var A=actuate.util.Element.cumulativeOffset(B);var C=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getMouseOverOverlay().show(this._selectedType,B.offsetWidth,B.offsetHeight,A[0]-C[0],A[1]-C[1],E-C[0],D-C[1]);}},clear:function(){this._firstDataItem=null;},getDataItem:function(A){if(!A){return this._getFirstDataItem(this._viewer.contentPanel.floatPanel.instance);}var B=document.getElementById(A);if(B){var C=B.getAttribute("element_type");if(C==this._DATAITEM){return B;}return null;}return null;},_getFirstDataItem:function(A){if(!this._firstDataItem){var C=A.getElementsByTagName("div");for(var B=0;B<C.length;B++){if(C[B].getAttribute("element_type")==this._DATAITEM){this._firstDataItem=C[B];break;}}}return this._firstDataItem;},select:function(B){if(B){var D=this._viewer.contentPanel.floatPanel.getCurrentScale();actuate.iv.utility.ivUtility.__removeSelection();this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);this._viewer.documentModel.registerItem(B,actuate.Constant.element.DATAITEM);var A=actuate.util.Element.cumulativeOffset(B);var C=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._selectedIId=B.getAttribute("iid");this._viewer._overlay.getDataItemOverlay().show(B.offsetWidth*D,B.offsetHeight*D,A[0]-C[0],A[1]-C[1],this._hasFilter());this._selectedDataItem=B;this._viewer.eventDispatcher.focusId=B.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.DATAITEM;this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED,null,actuate.Method.bind(this._updateFilterIcon,this));this._viewer.notifySelection(B);}},_updateFilterIcon:function(){this._viewer._overlay.getDataItemOverlay().showFilter({hasFilter:this._hasFilter()});},deSelect:function(){this._viewer._overlay.getDataItemOverlay().hide();this._selectedIId=null;},_createCommonOperands:function(){var A=[];A.push({name:actuate.Constant.oprand.Page,value:this._viewer.currentPage});A.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});if(this._viewer.tocPanel!=null){A.push({name:actuate.Constant.oprand.Toc,value:this._viewer.isTocVisible()?"true":"false"});}if(this._viewer.apiInstance._dashboardDesign){A.push({name:actuate.Constant.oprand.DashboardDesign,value:this._viewer.apiInstance._dashboardDesign});}if(this._viewer.apiInstance._gadgetId){A.push({name:actuate.Constant.oprand.GadgetId,value:this._viewer.apiInstance._gadgetId});}return A;},_eh_blur:function(A){this.deSelect();return false;},_eh_adjust:function(C){if(this._selectedDataItem){var A=actuate.util.Element.cumulativeOffset(this._selectedDataItem);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getDataItemOverlay().updatePosition(this._selectedDataItem.offsetWidth,this._selectedDataItem.offsetHeight,A[0]-B[0],A[1]-B[1]);}},_eh_hideDetail:function(C,B){if(this._selectedIId){var A=this._createCommonOperands();B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_HIDEDETAIL,[null,A]);}return true;},_eh_showDetail:function(C,B){if(this._selectedIId){var A=this._createCommonOperands();B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SHOWDETAIL,[null,A]);}return true;},_eh_page_break:function(D,B,C){if(this._selectedIId){var A=this._createCommonOperands();B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_UPDATE_PAGE_BREAK,[C,A]);}return true;},_eh_sortasc:function(A,E){if(this._selectedIId){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(B,"SortDefinitionList");B.documentElement.appendChild(D);var F=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDefinition);D.appendChild(F);var I=actuate.Constant.tag.Ascending;var H=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);var C=B.createTextNode(I);H.appendChild(C);F.appendChild(H);var G=this._createCommonOperands();E.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SORTASC,[B,G]);}return true;},_eh_sortdesc:function(A,E){if(this._selectedIId){var B=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(B,"SortDefinitionList");B.documentElement.appendChild(D);var F=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDefinition);D.appendChild(F);var I=actuate.Constant.tag.Descending;var H=actuate.util.XmlDom.createElement(B,actuate.Constant.tag.SortDir);var C=B.createTextNode(I);H.appendChild(C);F.appendChild(H);var G=this._createCommonOperands();E.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SORTASC,[B,G]);}return true;},_eh_setFilter:function(D,C){if(this._selectedIId){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createFilterRequest();var A=this._createCommonOperands();A.push({name:actuate.Constant.oprand.DataItem,value:this._selectedIId});C.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_APPLYFILTER,[B,A]);}return true;},_hasFilter:function(){var A=false;if(!this._selectedIId){return A;}var B=this._viewer.documentModel.getElementByIId(this._selectedIId);if(B.filterList&&B.filterList.filters&&B.filterList.filters.length>0){A=true;}return A;},_eh_moreValues:function(G,D,E){if(this._selectedIId){var A=this._selectedDataItem;var C=A.parentNode;var F="false";while(C!="undefined"){if(C.iid!="undefined"&&C.iid!=null){F="true";break;}C=C.parentNode;}if(F=="false"){C=A;}var B=null;var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createMoreValuesRequest(C.iid);D.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_MOREVALUES_FILTER,[B,E]);return true;}},_eh_clearFilter:function(E,C,D){if(this._selectedIId){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.SelectedFilterDialog").createShowDialogRequest(this._viewer);var A=this._createCommonOperands();A.push({name:actuate.Constant.oprand.DataItem,value:this._selectedIId});A.push({name:actuate.Constant.oprand.DialogName,value:'actuate.iv.core.ClassLoader.getInstance( ).forName("actuate.dialog.SelectedFilterDialog")'});C.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_CLEARFILTER,[B,A]);}return true;},_eh_setTopBottomN:function(D,C){if(this._selectedIId){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();var A=this._createCommonOperands();A.push({name:actuate.Constant.oprand.DataItem,value:this._selectedIId});C.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_APPLYTOPBOTTOMN,[B,A]);}return true;},_eh_clearTopBottomN:function(D,C){if(this._selectedIId){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);var A=this._createCommonOperands();A.push({name:actuate.Constant.oprand.DataItem,value:this._selectedIId});A.push({name:actuate.Constant.oprand.DialogName,value:"actuate.dialog.TopBottomNDialog"});C.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_CLEARTOPBOTTOMN,[B,A]);}return true;},_eh_setFormat:function(F,D,E){if(this._selectedIId){var C=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var A=E;if(actuate.util.browser.isChrome||actuate.util.browser.isSafari){A=C.importNode(E,true);}C.documentElement.appendChild(A);var B=this._createCommonOperands();B.push({name:actuate.Constant.oprand.TotalPage,value:this._viewer.totalPage});D.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_APPLY_FORMAT,[C,B]);}return true;},_eh_setFont:function(D,B,C){if(this._selectedIId){var A=this._createCommonOperands();A.push({name:actuate.Constant.oprand.TotalPage,value:this._viewer.totalPage});B.addOperation(this._selectedIId,this._selectedType,actuate.iv.core.iVOperation.__OP_SET_FONT,[C,A]);}return true;},getFeatures:function(A){if(!A){if(!this._selectedIId){return{};}A=this._viewer.documentModel.getElementByIId(this._selectedIId);}if(!A){return{};}var I={"ChangeFont":true,"Format":true};var C=A.isGroupLevel();if(C){var H=A.getGroup()?true:false;var F=A.getBinding();var G=F&&F.isAggregation;if(H&&!G){var B=A.isHiddenGroupDetail();I[B?"ShowDetail":"HideDetail"]=true;I.PageBreak=true;}if(H){var J=A.getGroup();if(J!=null&&J.intervalType!=null&&J.intervalType!="none"){I.SimpleFilter=false;I.Filter=false;I.TopBottomN=false;}else{I.SimpleFilter=true;I.Filter=true;I.TopBottomN=true;}var E=A.getSortDirection();I.SortAsc=(A.bindingName!==J.sortKey)||!E||E==actuate.Constant.tag.Descending;I.SortDsc=(A.bindingName!==J.sortKey)||!E||E==actuate.Constant.tag.Ascending;}else{I.Filter=true;I.TopBottomN=true;}var D=actuate.Constant.DataType;if(F){if(!F.dataType||(F.dataType!=D.DECIMAL&&F.dataType!=D.FLOAT&&F.dataType!=D.INTEGER&&F.dataType!=D.DOUBLE)){I.TopBottomN=false;}}}return I;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVChartSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVChartSelectionManager.prototype={_viewer:null,_selected:null,_chart:null,initialize:function(A){this._viewer=A;},getSelectedIId:function(){if(this._chart){return this._chart.iid||this._chart.getAttribute("iid");}return null;},getSelectedType:function(){return actuate.Constant.tag.Chart;},activate:function(C){if(C.tagName=="EMBED"){var B=function(){var F=null;if(actuate.util.Utility.isIE){F=document.embeds[C.id].document;if(F){F.firstChild.bookmark=C.id;}}else{F=C.getSVGDocument();if(F){F.firstChild.firstChild.bookmark=C.id;}}};var D=C.parentNode;var A=document.createElement("DIV");D.appendChild(A);A.style.height=C.style.height;A.style.width=C.style.width;A.style.display="inline";var E=C.cloneNode(true);E.onload=B;A.appendChild(E);D.removeChild(C);C=E;if(actuate.util.Utility.isIE){window.setTimeout(B,2000);}}this._viewer.documentModel.registerItem(C,actuate.Constant.element.CHART);},_select:function(A){if(A){this._selected=A.id;this._chart=A;}},focus:function(A){if(A){var C=actuate.util.Element.cumulativeOffset(A);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getMouseOverOverlay.show(A.offsetWidth,A.offsetHeight,C[0]-B[0],C[1]-B[1]);}},_isHyperlink:function(A){var B=actuate.util.Event.element(A);return(B.tagName.toUpperCase()=="AREA"&&B.href);},_neh_contextMenu:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A);},select:function(B,C){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);this._select(B);this._viewer.documentModel.registerItem(B,actuate.Constant.element.CHART);this._viewer.eventDispatcher.focusId=B.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.CHART;var A=B;if(B.tagName=="EMBED"){A=B.parentNode;}var D=actuate.Method.bind(this._updateFilterIcon,this);if(C){this._viewer._overlay.getChartOverlay().showWithoutHeader(A);D=null;}else{this._viewer._overlay.getChartOverlay().show(A);}this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED,null,D);this._viewer.notifySelection(B);},_updateFilterIcon:function(){this._viewer._overlay.getChartOverlay().updateUIOptions({hasFilter:this._hasFilter()});},updateFlashContextMenu:function(A){},_isMenuEnabled:function(C){var A="Filter";var B="ChartSubType";var E="ChartProperty";var D="ExportElmentData";return this._isMenuItemEnabled(A,C)||this._isMenuItemEnabled(B,C)||this._isMenuItemEnabled(E,C)||this._isMenuItemEnabled(D,C);},_isMenuItemEnabled:function(A,B){if(B[A]){var C=!this._viewer.featureMap||this._viewer.featureMap[A]==undefined||this._viewer.featureMap[A];return C;}return false;},deSelect:function(){if(this._chart){this._selected=null;this._viewer._overlay.getChartOverlay().hide();this._chart=null;}},adjustSelection:function(){if(this._selected){this._viewer._overlay.getChartOverlay().hide();if(this._chart.tagName=="IMG"){this._viewer._overlay.getChartOverlay().adjust(this._chart);}}},_hasFilter:function(){var A=false;var D=this.getSelectedIId();if(!D){return A;}var C=this._viewer.documentModel.getElementByIId(D);if(D.lastIndexOf("/")>0){var B=this._viewer.documentModel.getElementBySId(D,"CHART");if(B!=null&&B.type!=null&&(B.type.toUpperCase()=="FLASHCHART"||B.type.toUpperCase()=="FLASHGADGET"||B.type.toUpperCase()=="CHART")){C=B;}}if(C.filterList&&C.filterList.filters&&C.filterList.filters.length>0){A=true;}return A;},getFeatures:function(E){if(!E){var I=this.getSelectedIId();if(!I){return{};}E=this._viewer.documentModel.getElementByIId(I);}if(!E){return{};}var H={"ChartSubType":true,"ChartProperty":true};H.ExportElement=actuate.util.Utility.isUserDefinedBookmark(E.id);H.Filter=!E.isSharedBinding&&!E.isView&&!E.isMeasureView;var B=!E.isSharedBinding&&!E.isView;var D=false;if(B==true){var A=E.bindingsMap;for(var C in A){var F=A[C];var G=F.displayName||F.name;if(F.isViewableBinding){if(F.dataType&&actuate.util.Utility.isNumber(F.dataType)&&!E.isMeasureView){D=true;}}}}H.TopBottomN=D;if(E.canSwitchView){H["SwitchView"]=true;}if(E.canDrillUpFromCategories){H["DrillUpFromCategories"]=true;}if(E.canDrillUpFromSeries){H["DrillUpFromSeries"]=true;}if(E.isView){if(!actuate.util.browser.useMobile()){H.DataAnalyzer=true;}}if(E.isAxisChart){H={};}if(E.isAllowExport){H.ExportElementData=E.hasBindings==true&&E.isSharedBinding==false;}return H;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVChartEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{initialize:function(A){actuate.iv.ui.report.IVTableEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.CHART;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_CATEGORIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_SERIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_CATEGORIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_SERIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYCHARTFORMAT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTYPE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SWITCH_VIEW,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));},__get_DRILLDOWN_FROM_CATEGORIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"categoryData",value:actuate.util.Utility.xmlEncode(D.categoryData)});A.push({name:"drillDownFrom",value:"Categories"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_DRILLDOWN_FROM_SERIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"seriesName",value:actuate.util.Utility.xmlEncode(D.seriesName)});A.push({name:"drillDownFrom",value:"Series"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_DRILLUP_FROM_CATEGORIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"drillUpFrom",value:"Categories"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_DRILLUP_FROM_SERIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"drillUpFrom",value:"Series"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_APPLYFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_CLEARFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();var A=this._createCommonOperands();return[B,A];},__get_MOREVALUES_FILTER_data:function(C,D,E){var B=null;var A=null;if(D[3]==null){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();}else{B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createMoreValuesRequest(D[3]);}A=[D[0],D[1],D[2]];return[B,A];},__get_VALIDATE_FILTER_EXPRESSION_data:function(B,C,D){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();return[A,C];},__get_APPLYADVANCEDFILTER_data:function(B,C,D){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();return[A,this._createCommonOperands()];},__get_APPLYCHARTFORMAT_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.chart.IVChartFormatDialog").createSettingRequest();var A=this._createCommonOperands();A.push({name:"chartIid",value:E});return[B,A];},__get_APPLYTYPE_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.chart.IVChartSubTypeDialog").createSettingRequest();var A=this._createCommonOperands();A.push({name:"chartIid",value:E});return[B,A];},__get_SWITCH_VIEW_data:function(A,B,C){return[null,this._createCommonOperands()];},__get_APPLYTOPBOTTOMN_data:function(B,C){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();operandsArray=this._createCommonOperands();return[A,operandsArray];},__get_CLEARTOPBOTTOMN_data:function(B,C){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);operandsArray=this._createCommonOperands();return[A,operandsArray];},_processOperation:function(G,D,E,A){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.core.iVOperation[A];var F=this._base._selectionManager.getSelectedIId();methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(D,E,F);D.addOperation(F,actuate.Constant.tag.Chart,C,B);return true;},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._base._selectionManager.getSelectedIId(),this._base._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._base._selectionManager.getSelectedType(),"defaultFormat":"XLS","bookmark":B});return false;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVChart=actuate.Class.create();actuate.iv.ui.report.IVChart.prototype={_CHART:"Chart",_viewer:null,_selectionManager:null,eventHandlers:null,_firstChart:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVChartSelectionManager(this._viewer);this.eventHandlers=new actuate.iv.ui.report.IVChartEventHandlers(this);this.eventHandlers.registerEventHandlers();this.chartInstances={};},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(C){var A=this.getChart(C);if(A){var B=A.getAttributeNode("iid");if(B){A.iid=B.nodeValue;}A.reportBase=true;this._selectionManager.activate(A);}},_getFirstChart:function(A){if(!this._firstChart){var B=A.getElementsByTagName("img");for(var C=0;C<B.length;C++){var D=B[C].getAttribute("element_type");if(D==this._CHART){if(!this._firstChart){this._firstChart=B[C];break;}}}B=A.getElementsByTagName("div");for(var C=0;C<B.length;C++){var D=B[C].getAttribute("element_type");if(D==this._CHART){if(!this._firstChart){this._firstChart=B[C];break;}}}}return this._firstChart;},getChart:function(C){if(!C){return this._getFirstChart(this._viewer.contentPanel.floatPanel.instance);}var A=document.getElementById(C);if(A){var B=A.getAttribute("element_type");if(B==this._CHART){return A;}return null;}return null;},clear:function(){this._firstChart=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.AbstractIVFlashSelectionManager=actuate.Class.create();actuate.iv.ui.report.AbstractIVFlashSelectionManager.prototype={__WRAPPER_PATH:"iv/flash/Wrapper_AS2.swf",_viewer:null,_flash:null,_wrapperID:null,_featureMap:null,initialize:function(A){this._viewer=A;this._flash=null;},getSelectedIId:function(){if(this._flash){return this._getFlashIid(this._flash);}return null;},getSelectedType:function(){},__getElementType:function(){},activate:function(N){var K=N.getElementsByTagName("DIV")[0];if(K&&N.style!=null&&N.style.display!="none"){var C;var B=K.getElementsByTagName("OBJECT");var P=K.getElementsByTagName("EMBED");if(P&&P.length>0){P[0].wmode="transparent";}if(B&&B.length>0){var D=this._viewer?this._viewer.getBaseUrl():"";if(D!=null&&D.charAt(D.length-1)!="/"){D+="/";}var Q=D+this.__WRAPPER_PATH;this._wrapperID=N.id;if(actuate.util.browser.__isIE()){var R=B[0].childNodes;if(R&&R.length>0&&!B[0].processed){var L;var S;L=B[0].movie;L=encodeURIComponent(L);if(L.indexOf("http")<0){L=this._viewer.getBaseUrl()+L;}if(B[0].altHtml){var H=B[0].altHtml;S=H.split(/flashvars=\"/)[1].split('"')[0];H=H.replace('flashvars="','flashvars="&amp;viewerID='+this._viewer.id+"&amp;chartID="+this._wrapperID+"&amp;embedswf="+L);H=H.replace(/src=\"([^\"]*)\"/,'src="'+Q+'"');H=H.replace(/name=\"([^\"]*)\"/,'name="'+this._wrapperID+'"');H=H.replace("&amp;","&");B[0].altHtml=H;}else{S=this._getParamValue(B[0],"flashvars");}var G=S.split(/dataURL=/)[1];var F=S.split(/dataXML=/)[1];var E=S.split(/registerWithJS=/)[1];var I="&viewerID="+this._viewer.id+"&chartID="+this._wrapperID+"&embedswf="+L+S.replace("&amp;","&");if(G){I+=("&dataURL="+G);}else{if(F){I+=("&dataXML="+F);}}if(E){I+=("&registerWithJS="+E);}B[0].id=this._wrapperID+"_wrapper";B[0].flashvars=I;var J=B[0].outerHTML;var O=/<PARAM NAME="FlashVars" VALUE="">/ig;if(actuate.util.browser.isIE9()||actuate.util.browser.isIE10()){O=/<PARAM NAME="FlashVars" VALUE="[^"]+">/ig;}J=J.replace(/<param name="Movie" value="[^"]+">/ig,'<param name="movie" value="'+Q+'">');J=J.replace(/<param name="Src" value="[^"]+">/ig,'<param name="src" value="'+Q+'">');if(G){J=J.replace(O,'<param name="allowScriptAccess" value="always" /><param name=\'FlashVars\' value=\''+"&viewerID="+this._viewer.id+"&chartID="+this._wrapperID+"&embedswf="+L+"&dataURL="+G+"'>");}else{if(F){var A="&viewerID="+this._viewer.id+"&chartID="+this._wrapperID+"&embedswf="+L+"&dataXML="+F;J=J.replace(O,'<param name="allowScriptAccess" value="always" /><param name=\'FlashVars\' value="'+A.replace(/\"/g,'\\"').replace(/\'/g,"\\'")+'">');}}B[0].outerHTML=J;this._copyParams(R,B[0]);B[0].processed=true;B[0].name=this._wrapperID;C=B[0];}}else{if(P&&P.length>0&&!P[0].processed){var L=encodeURIComponent(P[0].src);var M=P[0].getAttribute("flashvars");var G=M.split(/dataURL=/)[1];var F=M.split(/dataXML=/)[1];var T=P[0];if(G){T.setAttribute("flashvars","&viewerID="+this._viewer.id+"&chartID="+this._wrapperID+"&embedswf="+L+"&dataURL="+G);}else{if(F){T.setAttribute("flashvars","&viewerID="+this._viewer.id+"&chartID="+this._wrapperID+"&embedswf="+L+"&dataXML="+F);}}T.setAttribute("allowScriptAccess","always");T.setAttribute("src",Q);T.setAttribute("name",this._wrapperID);T.setAttribute("id",this._wrapperID+"_wrapper");if(actuate.util.browser.__isSafari()){P[0].outerHTML=T.outerHTML;}P[0].processed=true;C=P[0];}}}this._deHighLightFlash(K);this.__createFlashWrapper(C);}this._viewer.documentModel.registerItem(N,this.__getElementType());},_copyParams:function(C,F){if(C&&F){var B=F.childNodes;for(var G=0;G<C.length;G++){if(C[G].tagName!=null&&C[G].tagName.toLowerCase()=="param"){var A=C[G].getAttribute("name");var I=C[G].getAttribute("value");var H=false;for(var D=0;D<B.length;D++){if(B[D].tagName!=null&&B[D].tagName.toLowerCase()=="param"){var E=B[D].getAttribute("name");if(A!=null&&A.toLowerCase()==E.toLowerCase()){H=true;break;}}}if(!H){this.__createParam(A,I,F);}}}}},_getParamValue:function(C,E){if(E&&C){var B=C.childNodes;for(var A=0;A<B.length;A++){if(B[A]&&B[A].tagName!=null&&B[A].tagName.toLowerCase()=="param"){var D=B[A].getAttribute("name");if(E.toLowerCase()==D.toLowerCase()){return B[A].getAttribute("value");}}}}},__createParam:function(C,G,E){if(C&&E){var D=E.childNodes;var A=false;for(var B=0;B<D.length;B++){if(D[B]&&D[B].tagName!=null&&D[B].tagName.toLowerCase()=="param"){var F=D[B].getAttribute("name");if(C.toLowerCase()==F.toLowerCase()){D[B].setAttribute("value",G);A=true;}}}if(!A){var H=document.createElement("param");H.setAttribute("name",C);H.setAttribute("value",G);E.appendChild(H);}}},__highLightFlash:function(B){if(B){var A=B.getElementsByTagName("DIV")[0];if(A){var C=A.getElementsByTagName("OBJECT");if(actuate.util.browser.__isIE()){if(C&&C.length>0){this._viewer._overlay.getFlashChartOverlay().show(C[0]);}else{this._viewer._overlay.getFlashChartOverlay().show(A);}}else{this._viewer._overlay.getFlashChartOverlay().show(A);}this._viewer._overlay.getFlashChartOverlay().updateUIOptions({hasFilter:this._hasFilter()});}}},_hasFilter:function(){var A=false;var D=this.getSelectedIId();if(!D){return A;}var C=this._viewer.documentModel.getElementByIId(D);if(D.lastIndexOf("/")>0){var B=this._viewer.documentModel.getElementBySId(D,"FLASHCHART");if(B!=null&&B.type!=null&&(B.type.toUpperCase()=="FLASHCHART"||B.type.toUpperCase()=="FLASHGADGET"||B.type.toUpperCase()=="CHART")){C=B;}}if(C.filterList&&C.filterList.filters&&C.filterList.filters.length>0){A=true;}return A;},_deHighLightFlash:function(){this._viewer._overlay.getFlashChartOverlay().hide();},__createFlashWrapper:function(C,A){if(C){var B=this._getFlashWrapper(this._wrapperID);if(B){B.destroy();}B=new actuate.widget.custom.flash.FlashWrapper({flash:C,id:this._wrapperID,customMenuItems:this.__getCustomMenuItems(),activated:A});B.registerEventHandler("activate",actuate.Method.createDelegate(this._activateFlash,this));B.registerEventHandler("contextmenu",actuate.Method.createDelegate(this._selectCustomMenuItem,this));B.registerEventHandler("select",actuate.Method.createDelegate(this.__selectFlash,this));}return B;},_getFlashWrapper:function(A){return actuate.widget.custom.flash.FlashWrapperManager.get(A);},_activateFlash:function(A){this.updateFlashContextMenu();},__selectFlash:function(C){if(this._viewer.interactive&&C){var B=this._getFlashWrapper(C);if(B){var D=actuate.iv.ui.view.contentpanel.IVContentPanel.prototype._getActiveElement.call(this,B.flash);if(D){var A=(this._flash?this._flash.id:null);if(C!=A){this.select(D.target);}else{this.__highLightFlash(D.target);}}}}},_selectCustomMenuItem:function(D){var C=this.__getCustomMenuItems();var A;if(D&&C){for(var B in C){if(D==C[B].id){A=C[B].eventName;break;}}}if(A){this._viewer.eventDispatcher.fireEvent("__E_"+A.toUpperCase());}},focus:function(A){if(A){var C=actuate.util.Element.cumulativeOffset(A);var B=actuate.util.Element.cumulativeOffset(this._viewer.contentPanel.floatPanel.instance);this._viewer._overlay.getMouseOverOverlay.show(A.offsetWidth,A.offsetHeight,C[0]-B[0],C[1]-B[1]);}},_isHyperlink:function(A){var B=actuate.util.Event.element(A);return(B.tagName.toUpperCase()=="AREA"&&B.href);},_neh_contextMenu:function(A){actuate.util.Event.stop(A);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_CONTEXTMENU,A);},_getFlashIid:function(A){var B=A.iid;if(!B){B=A.getAttribute("iid");if(B){A.iid=B;}}return B;},select:function(A,B){if(this._flash&&this._getFlashIid(this._flash)==this._getFlashIid(A)&&!(B&&actuate.util.browser.isChrome&&B=="contextmenu")){}this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);this._flash=A;this._viewer.eventDispatcher.focusId=A.id;this._viewer.eventDispatcher.focusElementType=this.__getElementType();this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED);this._viewer.notifySelection(A);this.__highLightFlash(A);},updateFlashContextMenu:function(D){if(!this._flash){return ;}var C=this.__getCustomMenuItems();var A=this._getFlashWrapper(this._flash.id);if(A){for(var B=0;B<C.length;B++){if(this.__isMenuItemEnabled(C[B].id,D)){var F=C[B].id;var E=this.__getMenuItemText(F);if(E){A.setMenuItemText(F,E);}A.enableMenuItem(F);}else{A.disableMenuItem(C[B].id);}}}this._viewer._overlay.getFlashChartOverlay().enableContextMenu(this._isMenuEnabled(D));},__getMenuItemText:function(A){},__getCustomMenuItems:function(){return[];},_isMenuEnabled:function(D){var C=this.__getCustomMenuItems();var A=false;for(var B=0;B<C.length;B++){if(this.__isMenuItemEnabled(C[B].id,D)){A=true;break;}}return A;},__isMenuItemEnabled:function(B,A){if(!A||A[B]){return !this._featureMap||this._featureMap[B];}return false;},deSelect:function(){if(this._flash){var A=this._getFlashWrapper(this._flash.id);if(A){A.hideCustomMenuItems();}this._deHighLightFlash();this._flash=null;}},adjustSelection:function(){if(this._flash){var A=this._flash.getElementsByTagName("DIV")[0];var B=A.getElementsByTagName("OBJECT");this._viewer._overlay.getFlashChartOverlay().hide();if(actuate.util.browser.__isIE()){if(B&&B.length>0){this._viewer._overlay.getFlashChartOverlay().adjust(B[0]);}}else{this._viewer._overlay.getFlashChartOverlay().adjust(A);}}},getFeatures:function(A){this._featureMap={};if(A.hasBindings){this._featureMap.Filter=true;var C=false;var E=A.bindingsMap;for(var B in E){var D=E[B];if(D.isViewableBinding){if(D.dataType&&actuate.util.Utility.isNumber(D.dataType)){C=true;}}}if(C==true){this._featureMap.TopBottomN=true;}}this._featureMap.ExportElement=actuate.util.Utility.isUserDefinedBookmark(A.id)&&!(A.flashComponentType);if(A.isAllowExport){this._featureMap.ExportElementData=A.hasBindings==true&&A.isSharedBinding==false;}return this._featureMap;},getLocalizedText:function(A){return actuate.util.Utility.getLocalizedString(A);}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashChartSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVFlashChartSelectionManager.superclass=actuate.iv.ui.report.AbstractIVFlashSelectionManager.prototype;actuate.iv.ui.report.IVFlashChartSelectionManager.prototype=actuate.Class.extend(new actuate.iv.ui.report.AbstractIVFlashSelectionManager(),{_pointer:null,_isClicked:false,getSelectedType:function(){return actuate.Constant.tag.FlashChart;},__getElementType:function(){return actuate.Constant.element.FLASHCHART;},__getCustomMenuItems:function(){return[{id:"DrillUpFromCategories",eventName:"DRILLUP_FROM_CATEGORIES",text:this.getLocalizedText("chartContextMenu.text.DrillUpFromCategories")},{id:"DrillUpFromSeries",eventName:"DRILLUP_FROM_SERIES",text:this.getLocalizedText("chartContextMenu.text.DrillUpFromSeries")},{id:"DrillDownFromCategories",eventName:"CHART_CATEGORIES",text:this.getLocalizedText("chartContextMenu.text.DrillDownFromCategories")},{id:"DrillDownFromSeries",eventName:"CHART_SERIES",text:this.getLocalizedText("chartContextMenu.text.DrillDownFromSeries")},{separator:true,id:"Filter",eventName:"FILTER",text:this.getLocalizedText("chartContextMenu.text.Filter")},{id:"ChartSubType",eventName:"QUERYTYPE",text:this.getLocalizedText("chartContextMenu.text.ChangeSubType")},{id:"ChartProperty",eventName:"CHART_FORMAT",text:this.getLocalizedText("chartContextMenu.text.Format")},{id:"ExportElementData",eventName:"QUERY_EXPORT",text:this.getLocalizedText("chartContextMenu.text.ExportData")},{id:"ExportElement",eventName:"EXPORTREPORT",text:this.getLocalizedText("chartContextMenu.text.ExportReport")}];},getFeatures:function(G){if(!G){var L=this.getSelectedIId();if(!L){return{};}G=this._viewer.documentModel.getElementByIId(L);}if(!G){return{};}var J=actuate.iv.ui.report.IVFlashChartSelectionManager.superclass.getFeatures.call(this,G);J.Filter=!G.isSharedBinding&&!G.isView;var B=!G.isSharedBinding&&!G.isView;var D=false;if(B==true){var A=G.bindingsMap;for(var C in A){var H=A[C];var I=H.displayName||H.name;if(H.isViewableBinding){if(H.dataType&&actuate.util.Utility.isNumber(H.dataType)){D=true;}}}}J.TopBottomN=D;J.ChartSubType=true;J.ChartProperty=true;if(G.canDrillDownFromCategories){J.DrillDownFromCategories=true;}if(G.canDrillDownFromSeries){J.DrillDownFromSeries=true;}if(G.canDrillUpFromCategories){J.DrillUpFromCategories=true;}if(G.canDrillUpFromSeries){J.DrillUpFromSeries=true;}if(G.canDrillUpFromCategoriesNames){var K=G.canDrillUpFromCategoriesNames;for(var E=0;E<K.length;E++){J["DrillUpFromCategories"+(E+1)]=true;}}if(G.canDrillUpFromSeriesNames){var F=G.canDrillUpFromSeriesNames;for(var E=0;E<F.length;E++){J["DrillUpFromSeries"+(E+1)]=true;}}if(G.canDrillDownFromCategoriesNames){J["DrillDownFromCategoriesNames"]=G.canDrillDownFromCategoriesNames;}if(G.canDrillUpFromSeriesNames){J["DrillUpFromSeriesNames"]=G.canDrillUpFromSeriesNames;}if(G.canSwitchView){J.SwitchView=true;}if(G.isView){if(!actuate.util.browser.useMobile()){J.DataAnalyzer=true;}}if(G.isAxisChart){J={};}return J;},activate:function(F){this._viewer.documentModel.registerItem(F,this.__getElementType());var B=F.getElementsByTagName("DIV")[0];if(B){var A=actuate.Method.bindAsEventListener(this._neh_mouseMove,this);var G=B.getElementsByTagName("OBJECT");actuate.util.Event.observe(B,"mousemove",A,false);if(G&&G.length>0){var C=this._viewer.documentModel.getElementByIId(this._getFlashIid(F));if(this._getFlashIid(F)!=null&&this._getFlashIid(F).lastIndexOf("/")>0){C=this._viewer.documentModel.getElementBySId(this._getFlashIid(F),this.__getElementType());}var H;if(actuate.util.browser.__isIE()){H=G[0].childNodes;}else{H=G[0].getElementsByTagName("PARAM");}if(H&&C){for(var D=0;D<H.length;D++){var E=null;switch(H[D].name){case"categoryValues":E=actuate.model.Constant.MetadataType.CATEGORIES;break;case"seriesValues":E=actuate.model.Constant.MetadataType.SERIES;break;default:break;}if(E){C[E]=this._toArray(H[D].value);}}}}}actuate.iv.ui.report.IVFlashChartSelectionManager.superclass.activate.call(this,F);window.setTimeout(actuate.Method.createDelegate(this._hideChartPopupMenu,this),300);},_toArray:function(E){if(E){var C=[];var A=E.split(",");for(var B=0;B<A.length;B++){var D=A[B];if(D){D=decodeURIComponent(D.replace(/\+/g," "));}C.push(D);}return C;}},__createFlashWrapper:function(B){var A=actuate.iv.ui.report.IVFlashChartSelectionManager.superclass.__createFlashWrapper.call(this,B);if(A){A.registerEventHandler("click",actuate.Method.createDelegate(this._onLinkClicked,this));}return A;},_neh_mouseMove:function(A){this._pointer=actuate.util.Event.pointer(A);},_onLinkClicked:function(B,A){if(this._isClicked){return ;}this._isClicked=true;window.setTimeout(actuate.Method.createDelegate(this._linkClicked,this,[B,A]),500);},_linkClicked:function(C,B){if(!this._featureMap){this._isClicked=false;return ;}var D=C||C=="";var F=B||B=="";var A=this.__isMenuItemEnabled("DrillUpFromCategories");var E=this.__isMenuItemEnabled("DrillUpFromSeries");if(!D&&!F&&!A){this._isClicked=false;return ;}this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_LINK_CLICKED,{categoryData:actuate.util.Utility.xmlEncode(C),seriesName:actuate.util.Utility.xmlEncode(B),pointer:this._pointer,canDrillUpFromCategories:A,canDrillUpFromSeries:E});this._isClicked=false;},__highLightFlash:function(B){if(this._selectTimer){window.clearTimeout(this._selectTimer);}var A=actuate.iv.ui.report.IVFlashChartSelectionManager.superclass.__highLightFlash;var C=actuate.Method.createDelegate(A,this,[B]);this._selectTimer=window.setTimeout(actuate.Method.createDelegate(this._showOverlay,this,[C]),500);},_showOverlay:function(A){A();this._viewer._overlay.getFlashChartOverlay().updateCanDrill({canDrillUpFromCategories:this.__isMenuItemEnabled("DrillUpFromCategories"),canDrillUpFromSeries:this.__isMenuItemEnabled("DrillUpFromSeries")});},_hideChartPopupMenu:function(){var A=this._viewer;if(A&&A._flashchart&&A._flashchart.eventHandlers&&A._flashchart.eventHandlers._chartPopupMenu){A._flashchart.eventHandlers._chartPopupMenu.hide();}}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashChartEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{_chartPopupMenu:null,initialize:function(A){actuate.iv.ui.report.IVFlashChartEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.FLASHCHART;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_CATEGORIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_SERIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_CATEGORIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DRILLUP_FROM_SERIES,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYCHARTFORMAT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTYPE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SWITCH_VIEW,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_LINK_CLICKED,A,actuate.Method.bind(this._eh_link_clicked,this));},__get_DRILLDOWN_FROM_CATEGORIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"categoryData",value:actuate.util.Utility.xmlEncode(D.categoryData)});A.push({name:"drillDownFrom",value:"Categories"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_DRILLDOWN_FROM_SERIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"seriesName",value:actuate.util.Utility.xmlEncode(D.seriesName)});A.push({name:"drillDownFrom",value:"Series"});A.push({name:"replaceDiv",value:B});return[null,A];},__get_DRILLUP_FROM_CATEGORIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"drillUpFrom",value:"Categories"});A.push({name:"replaceDiv",value:B});if(D&&D.drillLevel){A.push({name:"drillLevel",value:D.drillLevel});}return[null,A];},__get_DRILLUP_FROM_SERIES_data:function(C,D,E){var A=this._createCommonOperands();var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);A.push({name:"drillUpFrom",value:"Series"});A.push({name:"replaceDiv",value:B});if(D&&D.drillLevel){A.push({name:"drillLevel",value:D.drillLevel});}return[null,A];},__get_APPLYFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_CLEARFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();var A=this._createCommonOperands();return[B,A];},__get_MOREVALUES_FILTER_data:function(C,D,E){var B=null;var A=null;if(D[3]==null){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();}else{B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createMoreValuesRequest(D[3]);}A=[D[0],D[1],D[2]];return[B,A];},__get_VALIDATE_FILTER_EXPRESSION_data:function(B,C,D){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();return[A,C];},__get_APPLYADVANCEDFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_APPLYCHARTFORMAT_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.chart.IVChartFormatDialog").createSettingRequest();var A=this._createCommonOperands();A.push({name:"chartIid",value:E});return[B,A];},__get_APPLYTYPE_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.chart.IVChartSubTypeDialog").createSettingRequest();var A=this._createCommonOperands();A.push({name:"chartIid",value:E});return[B,A];},__get_SWITCH_VIEW_data:function(A,B,C){return[null,[]];},_processOperation:function(G,D,E,A){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.core.iVOperation[A];var F=this._base._selectionManager.getSelectedIId();methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(D,E,F);D.addOperation(F,actuate.Constant.tag.FlashChart,C,B);return true;},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._base._selectionManager.getSelectedIId(),this._base._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._base._selectionManager.getSelectedType(),"defaultFormat":"PDF","bookmark":B});return false;},_eh_link_clicked:function(F,D,E,B){if(!this._viewer||!this._viewer.interactive||!E){return ;}var A=E.categoryData||E.categoryData=="";var C=E.seriesName||E.seriesName=="";if(E.canDrillUpFromCategories){this._showChartPopupMenu(E);}else{if(A){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_CATEGORIES,{categoryData:actuate.util.Utility.xmlEncode(E.categoryData)});}else{if(C){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_SERIES,{seriesName:actuate.util.Utility.xmlEncode(E.seriesName)});}}}return true;},_showChartPopupMenu:function(C){if(!C){return ;}var A=C.categoryData||C.categoryData=="";var B=C.seriesName||C.seriesName=="";var D=actuate.Method.bind(this._chartPopupMenuHandler,this);if(!this._chartPopupMenu){this._chartPopupMenu=new actuate.uiadapter.Menu({id:"chartPopupMenu",autoHide:true});}this._chartPopupMenu.removeAll();if(A){this._chartPopupMenu.addMenuItem({iconCls:"actuateCSSSprite_selection actuateIV_drill_down_from_Categories",text:actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillDown"),title:actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillDownFromCategoriesName",actuate.util.Utility.xmlEncode(C.categoryData)),data:{categoryData:actuate.util.Utility.xmlEncode(C.categoryData),event:actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_CATEGORIES},handler:D});}if(C.canDrillUpFromCategories){this._chartPopupMenu.addMenuItem({iconCls:"actuateCSSSprite_selection actuateIV_overlay_drill_up_from_Categories",text:actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUp"),title:actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUpFromCategories"),data:{event:actuate.iv.core.iVEvent.__E_DRILLUP_FROM_CATEGORIES},handler:D});}this._chartPopupMenu.showAt([C.pointer.x,C.pointer.y]);},__get_APPLYTOPBOTTOMN_data:function(B,C){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();operandsArray=this._createCommonOperands();return[A,operandsArray];},__get_CLEARTOPBOTTOMN_data:function(C,D){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);var A=this._createCommonOperands();return[B,A];},_chartPopupMenuHandler:function(A){if(A&&A.data&&A.data.event){this._viewer.eventDispatcher.fireEvent(A.data.event,A.data);}}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashChart=actuate.Class.create();actuate.iv.ui.report.IVFlashChart.prototype={_FLASHCHART:"FlashCharts",_viewer:null,_selectionManager:null,eventHandlers:null,_firstChart:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVFlashChartSelectionManager(this._viewer);this.eventHandlers=new actuate.iv.ui.report.IVFlashChartEventHandlers(this);this.eventHandlers.registerEventHandlers();this.chartInstances={};},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(C){var A=this.getFlashChart(C);if(A==null){return ;}var B=A.getAttributeNode("iid");if(B){A.iid=B.nodeValue;}A.reportBase=true;this._selectionManager.activate(A);},_getFirstChart:function(A){if(!this._firstChart){var B=A.getElementsByTagName("div");for(var C=0;C<B.length;C++){var D=B[C].getAttribute("element_type");if(D==this._FLASHCHART){if(!this._firstChart){this._firstChart=B[C];break;}}}}return this._firstChart;},getFlashChart:function(C){if(!C){return this._getFirstChart(this._viewer.contentPanel.floatPanel.instance);}var A=document.getElementById(C);if(A){var B=A.getAttribute("element_type");if(B==this._FLASHCHART){return A;}return null;}return null;},clear:function(){this._firstChart=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashGadgetSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVFlashGadgetSelectionManager.superclass=actuate.iv.ui.report.AbstractIVFlashSelectionManager.prototype;actuate.iv.ui.report.IVFlashGadgetSelectionManager.prototype=actuate.Class.extend(new actuate.iv.ui.report.AbstractIVFlashSelectionManager(),{getSelectedType:function(){return actuate.Constant.tag.FlashGadget;},__getElementType:function(){return actuate.Constant.element.FLASHGADGET;},__getCustomMenuItems:function(){return[{id:"Filter",eventName:"FILTER",text:this.getLocalizedText("flashGadgetContextMenu.text.Filter")},{id:"FlashGadgetType",eventName:"QUERYTYPE",text:this.getLocalizedText("flashGadgetContextMenu.text.ChangeType")},{id:"FlashGadgetFormat",eventName:"FLASHGADGET_FORMAT",text:this.getLocalizedText("flashGadgetContextMenu.text.FormatFlashGadget")},{id:"ChartProperty",eventName:"CHART_FORMAT",text:this.getLocalizedText("flashGadgetContextMenu.text.Format")},{id:"ExportElementData",eventName:"QUERY_EXPORT",text:this.getLocalizedText("flashGadgetContextMenu.text.ExportData")},{id:"ExportElement",eventName:"EXPORTREPORT",text:this.getLocalizedText("chartContextMenu.text.ExportReport")}];},getFeatures:function(F){if(!F){return{};}var C=actuate.iv.ui.report.IVFlashGadgetSelectionManager.superclass.getFeatures.call(this,F);C.Filter=!F.isSharedBinding&&!F.isView;C.ExportElement=true;var B=!F.isSharedBinding&&!F.isView;var E=false;if(B==true){var H=F.bindingsMap;for(var D in H){var G=H[D];var A=G.displayName||G.name;if(G.isViewableBinding){if(G.dataType&&actuate.util.Utility.isNumber(G.dataType)){E=true;}}}}C.TopBottomN=E;if(F.getCompatibleTypes().length>0){C.FlashGadgetType=true;}C.FlashGadgetFormat=true;return C;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashGadgetEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{initialize:function(A){actuate.iv.ui.report.IVFlashGadgetEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.FLASHGADGET;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTYPE,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FLASHGADGET_FORMAT,A,this._processOperation_c);},__get_APPLYFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_CLEARFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();var A=this._createCommonOperands();return[B,A];},__get_MOREVALUES_FILTER_data:function(C,D,E){var B=null;var A=null;if(D[3]==null){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();}else{B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createMoreValuesRequest(D[3]);}A=[D[0],D[1],D[2]];return[B,A];},__get_VALIDATE_FILTER_EXPRESSION_data:function(B,C,D){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();return[A,C];},__get_APPLYADVANCEDFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_APPLYTYPE_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.chart.IVFlashGadgetTypeDialog").createSettingRequest();var A=this._createCommonOperands();A.push({name:"chartIid",value:E});return[B,A];},__get_APPLY_FLASHGADGET_FORMAT_data:function(A,B){var C=this._createCommonOperands();return[B,C];},_processOperation:function(G,D,E,A){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.core.iVOperation[A];var F=this._base._selectionManager.getSelectedIId();methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(D,E,F);D.addOperation(F,actuate.Constant.tag.FlashGadget,C,B);return true;},__get_APPLYTOPBOTTOMN_data:function(B,C){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();operandsArray=this._createCommonOperands();return[A,operandsArray];},__get_CLEARTOPBOTTOMN_data:function(C,D){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);var A=this._createCommonOperands();return[B,A];},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._base._selectionManager.getSelectedIId(),this._base._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._base._selectionManager.getSelectedType(),"defaultFormat":"PDF","bookmark":B});return false;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashGadget=actuate.Class.create();actuate.iv.ui.report.IVFlashGadget.prototype={_FLASHGADGETS:"FlashGadgets",_viewer:null,_selectionManager:null,eventHandlers:null,_firstGadget:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVFlashGadgetSelectionManager(this._viewer);this.eventHandlers=new actuate.iv.ui.report.IVFlashGadgetEventHandlers(this);this.eventHandlers.registerEventHandlers();this.chartInstances={};},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(A){var B=this.getGadget(A);if(B==null){return ;}var C=B.getAttributeNode("iid");if(C){B.iid=C.nodeValue;}B.reportBase=true;this._selectionManager.activate(B);},_getFirstGadget:function(A){if(!this._firstGadget){var D=A.getElementsByTagName("div");for(var B=0;B<D.length;B++){var C=D[B].getAttribute("element_type");if(C==this._FLASHGADGETS){if(!this._firstGadget){this._firstGadget=D[B];break;}}}}return this._firstGadget;},getGadget:function(A){if(!A){return this._getFirstGadget(this._viewer.contentPanel.floatPanel.instance);}var C=document.getElementById(A);if(C){var B=C.getAttribute("element_type");if(B==this._FLASHGADGETS){return C;}return null;}return null;},clear:function(){this._firstGadget=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashObjectSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVFlashObjectSelectionManager.superclass=actuate.iv.ui.report.AbstractIVFlashSelectionManager.prototype;actuate.iv.ui.report.IVFlashObjectSelectionManager.prototype=actuate.Class.extend(new actuate.iv.ui.report.AbstractIVFlashSelectionManager(),{getSelectedType:function(){return actuate.Constant.tag.FlashObject;},__getElementType:function(){return actuate.Constant.element.FLASHOBJECT;},__getCustomMenuItems:function(){return[{id:"Filter",eventName:"FILTER",text:this.getLocalizedText("chartContextMenu.text.Filter")},{id:"ExportElementData",eventName:"QUERY_EXPORT",text:this.getLocalizedText("chartContextMenu.text.ExportData")},{id:"ExportElement",eventName:"EXPORTREPORT",text:this.getLocalizedText("chartContextMenu.text.ExportReport")}];},activate:function(B){if(B){var E=B.getElementsByTagName("DIV");var A;if(E&&E.length>0){A=E[0];}if(!A){A=B;}A.style.width=B.style.width;if(actuate.util.browser.__isIE()||actuate.util.browser.__isChrome()){var F=A.getElementsByTagName("OBJECT");if(F[0]&&!F[0].processed){var C=F[0];if(!actuate.util.browser.__isIE()&&F[1]!=null){C=F[1];}var D=this._getObjectTag(C,B);if(actuate.util.browser.__isIE()){A.innerHTML=D.outerHTML;var G=document.getElementById(D.id);G.setAttribute("classid",C.getAttribute("classid"));G.altHtml=C.altHtml;}else{A.removeChild(F[0]);A.appendChild(D);}this._wrapperID=B.id;this.__createFlashWrapper(F[0],true);}}this._deHighLightFlash(A);}this._viewer.documentModel.registerItem(B,this.__getElementType());},_getObjectTag:function(E,M){var H=document.createElement("object");var D="&onClickJSFunction=actuate.widget.custom.flash.FlashWrapperManager.onSelect&onClickJSFunctionParameters="+M.id;var J=E.getAttribute("classid");var I=E.getAttribute("data");var K=E.getAttribute("type");var G=E.getAttribute("codebase");if(!actuate.util.browser.__isIE()){if(J!=null){H.setAttribute("classid",J);}}if(I!=null&&I.length>0){H.setAttribute("data",I);}if(K!=null&&K.length>0){H.setAttribute("type",K);}if(G!=null){H.setAttribute("codebase",G);}H.setAttribute("id",M.id+"_wrapper");H.setAttribute("processed",true);var B=E.childNodes;if(B&&B.length>0){for(var F=0;F<B.length;F++){if(B[F].tagName&&B[F].tagName.toLowerCase()=="param"){var C=B[F];var A=C.getAttribute("name");var L=C.getAttribute("value");if(A.toLowerCase()=="flashvars"){if(L&&L.indexOf("onClickJSFunction")<0){L+=D;L.replace(/\"/g,'\\"').replace(/\'/g,"\\'");}}this.__createParam(A,L,H);}}}this.__createParam("allowScriptAccess","always",H);H.style.height=E.style.height;H.style.width=E.style.width;return H;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashObjectEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{initialize:function(A){actuate.iv.ui.report.IVFlashObjectEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.FLASHOBJECT;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_MOREVALUES_FILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_CLEARFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_VALIDATE_FILTER_EXPRESSION,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLYADVANCEDFILTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));},__get_APPLYFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},__get_CLEARFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();var A=this._createCommonOperands();return[B,A];},__get_MOREVALUES_FILTER_data:function(C,D,E){var B=null;var A=null;if(D[3]==null){B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.ChartFilterDialog").createMoreValuesRequest();}else{B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createMoreValuesRequest(D[3]);}A=[D[0],D[1],D[2]];return[B,A];},__get_VALIDATE_FILTER_EXPRESSION_data:function(B,C,D){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();return[A,C];},__get_APPLYADVANCEDFILTER_data:function(C,D,E){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.AdvancedFilterDialog").createFilterRequest();var A=this._createCommonOperands();return[B,A];},_processOperation:function(G,D,E,A){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.core.iVOperation[A];var F=this._base._selectionManager.getSelectedIId();methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(D,E,F);D.addOperation(F,actuate.Constant.tag.FlashObject,C,B);return true;},__get_APPLYTOPBOTTOMN_data:function(B,C){var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createTopBottomNRequest();operandsArray=this._createCommonOperands();return[A,operandsArray];},__get_CLEARTOPBOTTOMN_data:function(C,D){var B=actuate.iv.core.ClassLoader.getInstance().forName("actuate.dialog.TopBottomNDialog").createRequest(this._viewer);var A=this._createCommonOperands();return[B,A];},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._base._selectionManager.getSelectedIId(),this._base._selectionManager.getSelectedType(),actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._base._selectionManager.getSelectedType(),"defaultFormat":"PDF","bookmark":B});return false;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVFlashObject=actuate.Class.create();actuate.iv.ui.report.IVFlashObject.prototype={_FLASHOBJECT:"GeneralFlash",_viewer:null,_selectionManager:null,eventHandlers:null,_firstObject:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVFlashObjectSelectionManager(this._viewer);this.eventHandlers=new actuate.iv.ui.report.IVFlashObjectEventHandlers(this);this.eventHandlers.registerEventHandlers();this.chartInstances={};},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(A){var B=this.getObject(A);if(B==null){return ;}var C=B.getAttributeNode("iid");if(C){B.iid=C.nodeValue;}B.reportBase=true;this._selectionManager.activate(B);},_getFirstObject:function(A){if(!this._firstObject){var D=A.getElementsByTagName("div");for(var B=0;B<D.length;B++){var C=D[B].getAttribute("element_type");if(C==this._FLASHOBJECT){if(!this._firstObject){this._firstObject=D[B];break;}}}}return this._firstObject;},getObject:function(A){if(!A){return this._getFirstObject(this._viewer.contentPanel.floatPanel.instance);}var C=document.getElementById(A);if(C){var B=C.getAttribute("element_type");if(B==this._FLASHOBJECT){return C;}return null;}return null;},clear:function(){this._firstObject=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVCrosstabSelectionManager=actuate.Class.create();actuate.iv.ui.report.IVCrosstabSelectionManager.prototype={_viewer:null,selectedIId:null,selectedItemType:null,selectedCrosstab:null,selectedType:actuate.Constant.tag.Crosstab,selectedIndexMap:{},highlightedElement:null,tooltipDiv:null,_dataAnalyzerOverlay:null,_showAnalyzeButton:true,_showAnalyzerCubeView:true,_showAnalyzerFilterView:true,_showAnalyzerCrosstabView:true,initialize:function(A){this._viewer=A;this._neh_click_c=actuate.Method.bindAsEventListener(this._neh_click,this);},activate:function(A){this._dataAnalyzerOverlay=null;this._viewer.documentModel.registerItem(A,actuate.Constant.element.CROSSTAB);},adjustSelection:function(){if(this.selectedCrosstab){this._viewer._overlay.getCrosstabOverlay().hide();this._viewer._overlay.getCrosstabOverlay().show(this.selectedCrosstab,this.highlightedElement);}},_neh_click:function(A){},deSelect:function(){this._viewer._overlay.getCrosstabOverlay().hide();this.selectedIId=null;this.selectedType=null;this.selectedCrosstab=null;this.selectedIndexMap={};if(this._dataAnalyzerOverlay!=null){this._dataAnalyzerOverlay.hide();}},select:function(E,A){this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);if(E){this._viewer.eventDispatcher.focusId=E.id;this._viewer.eventDispatcher.focusElementType=actuate.Constant.element.CROSSTAB;this.selectedIId=E.getAttribute("iid");this.selectedType=actuate.Constant.tag.Crosstab;this.selectedCrosstab=E;var G=actuate.util.Event.element(A);this.highlightedElement=this._getParentThOrTd(G);var H=this._viewer._overlay.getCrosstabOverlay();var K=H.show(E,this.highlightedElement);this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SELECTED);var N=this._viewer.contentPanel.floatPanel.getOffset();var L=actuate.util.Element.cumulativeOffset(E);if(actuate.util.Utility.isIE){if(E.firstChild.tagName=="CAPTION"){L[1]+=E.firstChild.offsetHeight;}}var F=L[0]-N[0]+1;var M=L[1]-N[1]+1;var B=this._viewer.allowedFeatures[this._viewer.apiInstance._viewingMode];if(B.DataAnalyzer){if(this._dataAnalyzerOverlay==null&&this._showAnalyzeButton){this._dataAnalyzerOverlay=new actuate.iv.ui.overlay.IVCrosstabDataAnalyzerOverlay(this._viewer);}if(K&&this._dataAnalyzerOverlay){if(this._dataAnalyzerOverlay._width==0){this._showDataAnalyzerOverlay(-1000,-1000);}var J=K.getHeaderRect();var D=this._dataAnalyzerOverlay._headerWidth;var I=this._dataAnalyzerOverlay._overlayHeaderHeight;var O=[F,M-I,F+D,M-5];var C=true;if(J[2]<O[0]||J[0]>O[2]||J[3]<O[1]||J[1]>O[3]){C=false;}if(C){F+=(J[0]-O[0])+K._headerWidth+20;}}if(!actuate.util.browser.useMobile()){this._showDataAnalyzerOverlay(F,M);}}}},_showDataAnalyzerOverlay:function(B,A){if(this._showAnalyzeButton){if(this._dataAnalyzerOverlay==null){this._dataAnalyzerOverlay=new actuate.iv.ui.overlay.IVCrosstabDataAnalyzerOverlay(this._viewer);}this._dataAnalyzerOverlay.show(B,A);}},_getParentThOrTd:function(A){while(A.tagName!="TH"&&A.tagName!="TD"){if(A.parentNode){A=A.parentNode;}else{break;}}return A;},getFeatures:function(C,B){if(!this.selectedIId){return{};}var A={"AlignLeft":true,"AlignCenter":true,"AlignRight":true,"ChangeFont":true,"SwitchView":C.canSwitchView,"RowHeight":true,"ColumnWidth":true,"DataAnalyzer":true};A.ExportElement=actuate.util.Utility.isUserDefinedBookmark(C.id);if(B&&B.getBinding()){A["Format"]=true;}if(actuate.util.browser.useMobile()){A["DataAnalyzer"]=false;}if(B&&B.type=="CrosstabLevel"){this.selectedItemType="CrosstabLevel";if(this.hasGrandTotal(C,B)){A["GrandTotal"]=true;}if(this.hasSubTotal(C,B)){A["SubTotal"]=true;}}if(B&&B.type=="CrosstabMeasure"){this.selectedItemType="CrosstabMeasure";if(actuate.widget){A["ShowTooltip"]=true;}}if(B&&B.type=="CrosstabHeader"){this.selectedItemType="CrosstabHeader";if(this._isGrandTotalHeader(C,B)){A["GrandTotal"]=true;A["Text"]=true;}else{if(B.headerType=="aggregation"){A["SubTotal"]=true;}else{A["Text"]=true;}}}this._showAnalyzeButton=A?A["DataAnalyzer"]:false;this._showAnalyzerCubeView=this._viewer.allowedFeatures["non-dashboard"].AnalyzerCubeView;this._showAnalyzerFilterView=this._viewer.allowedFeatures["non-dashboard"].AnalyzerFilterView;this._showAnalyzerCrosstabView=this._viewer.allowedFeatures["non-dashboard"].AnalyzerCrosstabView;return A;},_isGrandTotalHeader:function(C,A){iid=A.iid;headers=C.headers;for(var B=0;B<2;B++){if(headers[B]&&iid==headers[B].iid){return true;}}return false;},hasGrandTotal:function(F,C){if(!(C&&C.type=="CrosstabLevel")){return false;}cellIid=C.iid;levels=F.levels;var A=true;var G=false;for(var E=0;E<2;E++){lCount=levels[E].length;for(var B=0;B<lCount;B++){if(levels[E][B].iid&&levels[E][B].iid==cellIid){G=true;if(E==1){A=false;}}}if(G){break;}}if(!G){return false;}aggregations=F.aggregations;var D="rowLevelIid";if(!A){D="columnLevelIid";}for(E=0;E<aggregations.length;E++){if(!aggregations[E][D]&&aggregations[E][D]==cellIid){return true;}}return false;},hasSubTotal:function(G,C){if(!(C&&C.type=="CrosstabLevel")){return false;}cellIid=C.iid;levels=G.levels;var A=true;var H=false;for(var D=0;D<2;D++){lCount=levels[D].length;for(var B=0;B<lCount;B++){if(levels[D][B].iid&&levels[D][B].iid==cellIid){if(B==lCount-1){return false;}H=true;if(D==1){A=false;}}}if(H){break;}}if(!H){return false;}aggregations=G.aggregations;var F="rowLevelIid";var E="columnLevelIid";if(!A){F="columnLevelIid";E="rowLevelIid";}for(D=0;D<aggregations.length;D++){if(aggregations[D][F]==cellIid&&aggregations[D][E]){return true;}}return false;},showTooltip:function(C){if(!this.selectedCrosstab||!this.selectedCrosstab.isShowTooltip){if(this.tooltipDiv){this.tooltipDiv.hide();if(this.selectedTooltipNodes&&this.selectedTooltipInputs){this.selectedTooltipNodes.innerHTML=actuate.util.Utility.getLocalizedString("contextmenu.showTooltip");}}return ;}else{if(this.selectedTooltipNodes&&this.selectedTooltipInputs){this.selectedTooltipNodes.innerHTML=actuate.util.Utility.getLocalizedString("contextmenu.hideTooltip");}}if((!C.selectedElement)||C.selectedElement.type!="CrosstabMeasure"){if(this.tooltipDiv){this.tooltipDiv.hide();}return ;}var B=this._getRowLevels(this.highlightedElement,C);var N=this._getColumnLevels(this.highlightedElement,C);var D=actuate.util.Utility.getLocalizedString("IVCrosstabSelectionManager.text.rowLevel");var P="<b>"+D+"</b><br>";var E=C.ColumnDef.levels[0].length;for(var G=0;G<E;G++){P+="&nbsp;<b>";if(C.ColumnDef.levels[0][G].binding){P+=C.ColumnDef.levels[0][G].binding.name;}P+="</b>";if(B[G]){P+=": ";P+=B[G];}P+="<br>";}D=actuate.util.Utility.getLocalizedString("IVCrosstabSelectionManager.text.columnLevel");P+="<br><b>"+D+"</b> <br>";E=C.ColumnDef.levels[1].length;for(G=0;G<E;G++){P+="&nbsp;<b>";if(C.ColumnDef.levels[1][G].binding){P+=C.ColumnDef.levels[1][G].binding.name;}P+="</b>: ";if(N[G]){P+=N[G];}P+="<br>";}D=actuate.util.Utility.getLocalizedString("IVCrosstabSelectionManager.text.measure");P+="<br><b>"+D+"</b> <br>";var I=C.selectedElement.headerIid;D="&nbsp;<b>";if(I){headerCell=C.ColumnDef.cellsMap[I];if(headerCell&&headerCell.displayText){D+=headerCell.displayText;}}if(headerCell.displayText){D+="</b>: ";}var L=this.highlightedElement.getElementsByTagName("DIV");D+=this._getInnerMostDivHTML(L);P+=D+"<br>";var K=C.selectedElement.binding;if(K&&K.aggregationFun){D=actuate.util.Utility.getLocalizedString("IVCrosstabSelectionManager.text.function");P+="<br><b>"+D+"</b> <br>";P+="&nbsp;"+K.aggregationFun+"<br>";}tooltipTitle=actuate.util.Utility.getLocalizedString("IVCrosstabSelectionManager.text.tooltipTitle");if(!(this.tooltipDiv&&this.tooltipDiv.getEl()&&this.tooltipDiv.getEl().dom&&this.tooltipDiv.getEl().dom.parentNode==this._viewer.contentPanel.floatPanel.instance)){this.tooltipDiv=new actuate.widget.tips.ToolTip({title:tooltipTitle,closable:true,html:P});this.tooltipDiv.render(this._viewer.contentPanel.floatPanel.instance);}else{this.tooltipDiv.setTitle(tooltipTitle);this.tooltipDiv.body.update(P);}var M=this._viewer.contentPanel.floatPanel.getOffset();var J=actuate.util.Element.cumulativeOffset(this.highlightedElement);this.tooltipDiv.doAutoWidth();this.tooltipDiv.show();var O=this.tooltipDiv.getSize();var F=J[0]-M[0]-O.width-5;var H=J[1]-M[1]-18;if(F<0){var A=J[0]-M[0]+this.highlightedElement.offsetWidth+5;if(A+O.width<=this._viewer.contentPanel.floatPanel.contentWidth){F=A;}else{F=0;}}this.tooltipDiv.setPosition([F,H]);},_getInnerMostDivHTML:function(F){if(!F){return"";}else{if(F.length==1){var E=F[0].className;if(E&&E.toLowerCase().indexOf("birt-data-design")>=0){return F[0].innerHTML;}else{return"";}}else{var B="";for(var D=0;D<F.length;D++){var C=F[D].getElementsByTagName("DIV");if((!C)||C.length==0){var E=F[D].className;if(E&&E.toLowerCase().indexOf("birt-data-design")>=0){if(B!=""){B+=",";}B+=F[D].innerHTML;}else{continue;}}else{var A=this._getInnerMostDivHTML(C);if(A){return A;}}}return B;}}return"";},_getRowLevels:function(A,L){var Q=L.ColumnDef.levels[0].length;var P=new Array();var F=A.parentNode;var C=0;while(P.length<Q){if(!F){break;}var B=F.getElementsByTagName("TH");var D=B.length;var G=B[0].childNodes;var R=false;for(var N=0;N<G.length;N++){if(G[N].nodeName.toUpperCase().indexOf("TABLE")!=-1&&G[N].getAttribute("element_type")=="Crosstab"){R=true;break;}}for(var N=0;N<D-C;N++){J=B[D-N-C-1].getElementsByTagName("DIV");if(J&&J.length>0){if(R&&D-N-C-1==0){for(var K=0;K<G.length;K++){if(G[K].nodeName.toLowerCase().indexOf("div")!=-1&&G[K].className.toLowerCase().indexOf("birt-data-design")>=0){P.push(G[K].innerHTML);}}}else{P.push(this._getInnerMostDivHTML(J));}}else{P.push("");}}if(P.length>=Q){break;}do{F=F.previousSibling;if(!F){break;}if(F.nodeName!="TR"){continue;}B=F.getElementsByTagName("TH");if(B.length>D){C=D;D=B.length;break;}}while(1);}if(L.ColumnDef.direction===1){Q++;}var O=P.length;for(var N=Q-O;N>0;N--){var M=1;if(F.previousSibling){var I=F.previousSibling;while(I){var H=I.getElementsByTagName("TH");M=M+1;var E=H.length-O+N-2;if(E>=0&&H[E]){if(H[E].rowSpan==M){var J=H[E].getElementsByTagName("DIV");if(J&&J.length>0){P.push(this._getInnerMostDivHTML(J));break;}}}I=I.previousSibling;}}}return P.reverse();},_getChildrenByTagName:function(C,B){var D=new Array();for(var A=0;A<C.childNodes.length;A++){if(C.childNodes[A]&&C.childNodes[A].tagName&&C.childNodes[A].tagName.toLowerCase()==B.toLowerCase()){D.push(C.childNodes[A]);}}return D;},_getColumnLevels:function(F,A){var H=new Array();var K=F.previousSibling;var J=0;while(K){if(K.nodeName.toLowerCase()=="td"){J++;}K=K.previousSibling;}if(A.ColumnDef.direction===1){J++;}var B=this.selectedCrosstab;var N=B.getElementsByTagName("th");var L=N[0];var G=L.parentNode;if(this._getChildrenByTagName(G,"td").length!=0){return H;}var C=A.ColumnDef.levels[1].length;var I=true;for(var E=0;E<C;E++){if(!G){break;}N=G.getElementsByTagName("th");index=0;for(var D=0;D<N.length;D++){if((E==0&&D==0)||(E>0&&D==0&&!I)){I=N[0].rowSpan>1?true:false;var M=A.ColumnDef.levels[0].length;if(M>0){D=(I?1:M);}}if(index<=J){span=N[D].colSpan?N[D].colSpan:1;if(index+span>J){divs=N[D].getElementsByTagName("DIV");if(divs&&divs.length>0){H.push(this._getInnerMostDivHTML(divs));}break;}else{index+=span;}}}do{G=G.nextSibling;}while(!G||G.nodeName!="TR");}return H;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVCrosstabEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{initialize:function(A){actuate.iv.ui.report.IVCrosstabEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(){var A=actuate.Constant.element.CROSSTAB;this._processOperation_c=actuate.Method.bind(this._processOperation,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BLUR,A,actuate.Method.bind(this.__eh_blur,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_RESIZE,A,actuate.Method.bind(this._eh_adjust,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_FORMAT,A,actuate.Method.bind(this._eh_applyFormat,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_LABEL_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_LABEL_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_LABEL_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_DATA_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_DATA_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GRANDTOTAL_DATA_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_LABEL_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_LABEL_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_LABEL_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_DATA_ALIGN_LEFT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_DATA_ALIGN_CENTER,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SUBTOTAL_DATA_ALIGN_RIGHT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_GRANDTOTAL_LABEL_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_GRANDTOTAL_DATA_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_SUBTOTAL_LABEL_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_SUBTOTAL_DATA_FONT,A,this._processOperation_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT,A,actuate.Method.bind(this._eh_applyGrandTotalFormat,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT,A,actuate.Method.bind(this._eh_applySubTotalFormat,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SWITCH_VIEW,A,actuate.Method.bind(this._eh_switchView,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_COLUMN_WIDTH,A,actuate.Method.bind(this._eh_setColumnWidth,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_APPLY_ROW_HEIGHT,A,actuate.Method.bind(this._eh_setRowHeight,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_EXPORTREPORT,A,actuate.Method.bind(this._eh_query_export,this));this._queryText_c=actuate.Method.bind(this._queryText,this);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_QUERY_TEXT,A,this._queryText_c);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SET_TEXT,A,this._processOperation_c);},_eh_applyFormat:function(G,E,F,B,D){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.utility.ivUtility.createDataDom(F);var A=this._createCommonOperands();this._getArrayFromSelectedMap(A);if(D&&(D=="GrandTotal"||D=="SubTotal")){A.push({name:"total",value:D});}if(this._base._selectionManager.selectedItemType){A.push({name:"selectedItemType",value:this._base._selectionManager.selectedItemType});}E.addOperation(this._base._selectionManager.selectedIId,actuate.Constant.tag.Crosstab,actuate.iv.core.iVOperation[B],[C,A]);return true;},_eh_applyGrandTotalFormat:function(D,B,C,A){return this._eh_applyFormat(D,B,C,A,"GrandTotal");},_eh_applySubTotalFormat:function(D,B,C,A){return this._eh_applyFormat(D,B,C,A,"SubTotal");},_eh_setColumnWidth:function(A,G,F,E){if(this._viewer.eventDispatcher.focusId!=A){return false;}var B=F[0];var C=null;var I=this._createCommonOperands();this._getArrayFromSelectedMap(I);var H=this._base._selectionManager.selectedIndexMap;if(H.colspan){var D=parseInt(H.colspan);if(D>1){B=B/D;}}I.push({name:"columnWidth",value:B});G.addOperation(this._base._selectionManager.selectedIId,this._base._selectionManager.selectedType,actuate.iv.core.iVOperation[E],[C,I]);return true;},_eh_setRowHeight:function(A,F,E,D){if(this._viewer.eventDispatcher.focusId!=A){return false;}var H=E[0];var B=null;var I=this._createCommonOperands();this._getArrayFromSelectedMap(I);var G=this._base._selectionManager.selectedIndexMap;if(G.rowspan){var C=parseInt(G.rowspan);if(C>1){H=H/C;}}I.push({name:"rowHeight",value:H});F.addOperation(this._base._selectionManager.selectedIId,this._base._selectionManager.selectedType,actuate.iv.core.iVOperation[D],[B,I]);return true;},__get_SET_FONT_data:function(D,E,C,F){var B=E;var A=this._createCommonOperands();this._getArrayFromSelectedMap(A);if(C){A.push({name:"total",value:C});}if(F){A.push({name:"target",value:F});}if(this._base._selectionManager.selectedItemType){A.push({name:"selectedItemType",value:this._base._selectionManager.selectedItemType});}return[B,A];},__get_SET_GRANDTOTAL_LABEL_FONT_data:function(A,B){return this.__get_SET_FONT_data(A,B,"GrandTotal","label");},__get_SET_GRANDTOTAL_DATA_FONT_data:function(A,B){return this.__get_SET_FONT_data(A,B,"GrandTotal","data");},__get_SET_SUBTOTAL_LABEL_FONT_data:function(A,B){return this.__get_SET_FONT_data(A,B,"SubTotal","label");},__get_SET_SUBTOTAL_DATA_FONT_data:function(A,B){return this.__get_SET_FONT_data(A,B,"SubTotal","data");},_processOperation:function(G,D,E,A){if(this._viewer.eventDispatcher.focusId!=G){return false;}var C=actuate.iv.core.iVOperation[A];var F=this._base._selectionManager.selectedIId;methodClosure=actuate.Method.bind(this["__get_"+A.replace("__OP_","")+"_data"],this);var B=methodClosure(D,E,F);D.addOperation(F,actuate.Constant.tag.Crosstab,C,B);return true;},_eh_switchView:function(C,A){if(this._viewer.eventDispatcher.focusId!=C){return false;}var B=this._base._selectionManager.selectedIId;A.addOperation(B,actuate.Constant.tag.Crosstab,actuate.iv.core.iVOperation.__OP_SWITCH_VIEW,[null,this._createCommonOperands()]);return true;},__get_ALIGN_LEFT_data:function(A,B){return this.__get_ALIGN_data(A,B,"left");},__get_ALIGN_RIGHT_data:function(A,B){return this.__get_ALIGN_data(A,B,"right");},__get_ALIGN_CENTER_data:function(A,B){return this.__get_ALIGN_data(A,B,"center");},__get_ALIGN_data:function(D,E,G,C,F){var B=null;var A=this._createCommonOperands();this._getArrayFromSelectedMap(A);A.push({name:"alignment",value:G});if(C){A.push({name:"total",value:C});}if(F){A.push({name:"target",value:F});}if(this._base._selectionManager.selectedItemType){A.push({name:"selectedItemType",value:this._base._selectionManager.selectedItemType});}return[B,A];},_get_GRANDTOTAL_LABEL_ALIGN_data:function(A,B,C){return this.__get_ALIGN_data(A,B,C,"GrandTotal","label");},_get_GRANDTOTAL_DATA_ALIGN_data:function(A,B,C){return this.__get_ALIGN_data(A,B,C,"GrandTotal","data");},__get_GRANDTOTAL_LABEL_ALIGN_LEFT_data:function(A,B){return this._get_GRANDTOTAL_LABEL_ALIGN_data(A,B,"left");},__get_GRANDTOTAL_LABEL_ALIGN_CENTER_data:function(A,B){return this._get_GRANDTOTAL_LABEL_ALIGN_data(A,B,"center");},__get_GRANDTOTAL_LABEL_ALIGN_RIGHT_data:function(A,B){return this._get_GRANDTOTAL_LABEL_ALIGN_data(A,B,"right");},__get_GRANDTOTAL_DATA_ALIGN_LEFT_data:function(A,B){return this._get_GRANDTOTAL_DATA_ALIGN_data(A,B,"left");},__get_GRANDTOTAL_DATA_ALIGN_CENTER_data:function(A,B){return this._get_GRANDTOTAL_DATA_ALIGN_data(A,B,"center");},__get_GRANDTOTAL_DATA_ALIGN_RIGHT_data:function(A,B){return this._get_GRANDTOTAL_DATA_ALIGN_data(A,B,"right");},_get_SUBTOTAL_LABEL_ALIGN_data:function(A,B,C){return this.__get_ALIGN_data(A,B,C,"SubTotal","label");},_get_SUBTOTAL_DATA_ALIGN_data:function(A,B,C){return this.__get_ALIGN_data(A,B,C,"SubTotal","data");},__get_SUBTOTAL_LABEL_ALIGN_LEFT_data:function(A,B){return this._get_SUBTOTAL_LABEL_ALIGN_data(A,B,"left");},__get_SUBTOTAL_LABEL_ALIGN_CENTER_data:function(A,B){return this._get_SUBTOTAL_LABEL_ALIGN_data(A,B,"center");},__get_SUBTOTAL_LABEL_ALIGN_RIGHT_data:function(A,B){return this._get_SUBTOTAL_LABEL_ALIGN_data(A,B,"right");},__get_SUBTOTAL_DATA_ALIGN_LEFT_data:function(A,B){return this._get_SUBTOTAL_DATA_ALIGN_data(A,B,"left");},__get_SUBTOTAL_DATA_ALIGN_CENTER_data:function(A,B){return this._get_SUBTOTAL_DATA_ALIGN_data(A,B,"center");},__get_SUBTOTAL_DATA_ALIGN_RIGHT_data:function(A,B){return this._get_SUBTOTAL_DATA_ALIGN_data(A,B,"right");},_createCommonOperands:function(){var A=[];A.push({name:actuate.Constant.oprand.Page,value:this._viewer.currentPage});A.push({name:actuate.Constant.oprand.ShowMargin,value:this._viewer.showMargin});if(this._viewer.tocPanel!=null){A.push({name:actuate.Constant.oprand.Toc,value:this._viewer.isTocVisible()?"true":"false"});}if(this._viewer.apiInstance._dashboardDesign){A.push({name:actuate.Constant.oprand.DashboardDesign,value:this._viewer.apiInstance._dashboardDesign});}if(this._viewer.apiInstance._gadgetId){A.push({name:actuate.Constant.oprand.GadgetId,value:this._viewer.apiInstance._gadgetId});}A.push({name:actuate.Constant.oprand.DPI,value:actuate.util.Utility.getDPI()});return A;},_getArrayFromSelectedMap:function(A){var B=this._base._selectionManager.selectedIndexMap;if(B["ItemId"]!=null){A.push({name:"ItemId",value:B["ItemId"]});}if(B["rowlevelindex"]!=null){A.push({name:"rowlevelindex",value:B["rowlevelindex"]});}if(B["columnlevelindex"]!=null){A.push({name:"columnlevelindex",value:B["columnlevelindex"]});}},_eh_query_export:function(F,C,D,A){var B=this._viewer.apiInstance._eventDispatcher.focusId;B=B.substr(this._viewer.id.length+1);if(!actuate.iv.ui.dialog.exportReport||!actuate.iv.ui.dialog.exportReport.IVExportReportDialog){var E=[];E.push({name:"bookmark",value:B});C.addOperation(this._base._selectionManager.selectedIId,this._base._selectionManager.selectedType,actuate.iv.core.iVOperation[A],[null,E]);return true;}actuate.iv.ui.dialog.exportReport.ivExportReportDialog.localBind(this._viewer,{"type":this._base._selectionManager.selectedType,"defaultFormat":"XLS","bookmark":B});return false;},_queryText:function(B,G,D,C){var E=this._base._selectionManager.highlightedElement;if(!E){return ;}var A=E.getElementsByTagName("DIV");if(A){var H=null;for(var F=0;F<A.length;F++){if("LABEL"==A[F].getAttribute("element_type")){H=A[F];}}if(H){var J=actuate.util.Element.cumulativeOffset(H);var I=actuate.util.Element.cumulativeOffset(this._base._viewer.contentPanel.floatPanel.instance);this._base._viewer._overlay.getLabelOverlay().showEditTextBox(H,H.offsetWidth,H.offsetHeight,J[0]-I[0],J[1]-I[1]);this._base._viewer._overlay.getCrosstabOverlay().hide();}}},__get_SET_TEXT_data:function(D,E){var B=E;var A=this._createCommonOperands();this._getArrayFromSelectedMap(A);A.push({name:"target",value:"label"});if(this._base._selectionManager.selectedItemType){A.push({name:"selectedItemType",value:this._base._selectionManager.selectedItemType});}var C=new actuate.iv.data.IVLabelText();C.setText(E[0].value);var E=new actuate.iv.data.IVData();return[E.getLabelText(this._viewer,C),A];}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVCrosstab=actuate.Class.create();actuate.iv.ui.report.IVCrosstab.prototype={_viewer:null,_selectionManager:null,_eventHandlers:null,_firstCrosstab:null,initialize:function(A){this._viewer=A;this._selectionManager=new actuate.iv.ui.report.IVCrosstabSelectionManager(this._viewer);this._eventHandlers=new actuate.iv.ui.report.IVCrosstabEventHandlers(this);this._eventHandlers.registerEventHandlers();},getSelectionManager:function(){return this._selectionManager;},_cb_installEventHandlers:function(C){var A=document.getElementById(C);if(A==null){return ;}var B=A.getAttributeNode("iid");if(B){A.iid=B.nodeValue;}A.reportBase=true;this._selectionManager.activate(A);},getCrosstab:function(A){if(!A){return this._getFirstCrosstab(this._viewer.contentPanel.floatPanel.instance);}var B=document.getElementById(A);if(B){var C=B.getAttribute("element_type");if(C=="CROSSTAB"){return document.getElementById(A);}return null;}return null;},_getFirstCrosstab:function(A){if(!this._firstCrosstab){var C=A.getElementsByTagName("crosstab");for(var B=0;B<C.length;B++){var D=C[B].getAttribute("element_type");if(D!="CROSSTAB"){continue;}this._firstCrosstab=C[B];break;}}return this._firstCrosstab;},clear:function(){this._firstCrosstab=null;}};actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVScriptAPIEventHandlers=actuate.Class.extendClass(actuate.iv.ui.report.AbstractIVEventHandlers,{_OPRAND_COLUMNNAME:"columnname",_OPRAND_ISADVANCED:"isAdavanced",_OPRAND_COLUMNIID:"columniid",_OPRAND_TOC:"toc",_OPRAND_PAGE:"page",_OPRAND_CHART_CATEGORIES_NAME:"categoryData",_OPRAND_CHART_SERIES_NAME:"seriesName",_JS_CHART_FORMAT_TITLE:"chartTitle",_JS_CHART_FORMAT_DIMENSION:"chartDimension",_JS_CHART_DIMENSION_2D:"2D",_JS_CHART_DIMENSION_2D_DEPTH:"2D_depth",_JS_CHART_DIMENSION_3D:"3D",_CHART_DIMENSION_2D:"0",_CHART_DIMENSION_2D_DEPTH:"1",_CHART_DIMENSION_3D:"2",_DATASERVICE_OPTIONKEYS_BOOKMARK:"bookmark",_DATASERVICE_OPTIONKEYS_START_ROW:"start",_DATASERVICE_OPTIONKEYS_MAX_ROWS:"maxrows",_DATASERVICE_OPTIONKEYS_SORTERS:"sorters",_DATASERVICE_OPTIONKEYS_FILTERS:"filters",_DATASERVICE_OPTIONKEYS_ASCENDING:"ascending",_DATASERVICE_OPTIONKEYS_COLUMN_NAME:"columnname",_DATASERVICE_OPTIONKEYS_OPERATOR:"operator",_DATASERVICE_OPTIONKEYS_VALUES:"values",_DATASERVICE_OPTIONKEYS_COLUMNS:"columnnames",_operatorsMap:{"=":"eq","<>":"ne","<":"lt","<=":"le",">=":"ge",">":"gt","BETWEEN":"between","NOT BETWEEN":"not-between","NULL":"is-null","NOT NULL":"is-not-null","TRUE":"is-true","FALSE":"is-false","LIKE":"like","TOP N":"top-n","BOTTOM N":"bottom-n","TOP PERCENT":"top-percent","BOTTOM PERCENT":"bottom-percent","MATCH":"match","NOT LIKE":"not-like","NOT MATCH":"not-match","IN":"in","NOT IN":"not-in"},initialize:function(A){actuate.iv.ui.report.IVScriptAPIEventHandlers.superclass.initialize.call(this,A);},registerEventHandlers:function(A){if(!this._viewer.eventDispatcher){return ;}this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BATCH_UPDATE,A,actuate.Method.bind(this._batch_process,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_DOWNLOAD_RESULTSET,A,actuate.Method.bind(this._download_resultset,this));this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_GET_REPORTCONTENT,A,actuate.Method.bind(this._get_reportcontent,this));},_batch_process:function(A,H,F,D){for(var G=0;G<F.length;G++){var K=F[G][1].value[0];if(!K){continue;}var I=F[G][1].value[1];if(!I){continue;}var E=null;if(F[G][1].value.length>2){E=F[G][1].value[2].value;}var D=null;var B=null;var J=F[G][0];switch(J.value){case actuate.iv.core.iVEvent.__E_APPLYFILTER:D=actuate.iv.core.iVOperation.__OP_APPLYFILTER;B=this._convert_filter(E);break;case actuate.iv.core.iVEvent.__E_CLEARFILTER:D=actuate.iv.core.iVOperation.__OP_CLEARFILTER;B=this._convert_clearFilter(I.value,E);break;case actuate.iv.core.iVEvent.__E_CLEARTOPBOTTOMN:D=actuate.iv.core.iVOperation.__OP_CLEARTOPBOTTOMN;B=this._convert_clearFilter(I.value,E);break;case actuate.iv.core.iVEvent.__E_APPLY_SORT:D=actuate.iv.core.iVOperation.__OP_APPLY_ADVANCED_SORT;B=this._convert_sort(E);break;case actuate.iv.core.iVEvent.__E_HIDE_COLUMN:D=actuate.iv.core.iVOperation.__OP_HIDE_COLUMN;B=this._convert_hideColumn(E);break;case actuate.iv.core.iVEvent.__E_SHOW_COLUMN:D=actuate.iv.core.iVOperation.__OP_SHOW_COLUMN;B=this._convert_showColumn(E);break;case actuate.iv.core.iVEvent.__E_HIDEDETAIL:D=actuate.iv.core.iVOperation.__OP_HIDEDETAIL;B=this._convert_hideDetail(E);break;case actuate.iv.core.iVEvent.__E_SHOWDETAIL:D=actuate.iv.core.iVOperation.__OP_SHOWDETAIL;B=this._convert_showDetail(E);break;case actuate.iv.core.iVEvent.__E_DELETE_GROUP:D=actuate.iv.core.iVOperation.__OP_DELETE_GROUP;B=this._convert_deleteGroup(E);break;case actuate.iv.core.iVEvent.__E_ADD_GROUP:D=actuate.iv.core.iVOperation.__OP_ADD_GROUP;B=this._convert_addGroup(E);break;case actuate.iv.core.iVEvent.__E_SWAPCOLUMNS:D=actuate.iv.core.iVOperation.__OP_SWAPCOLUMNS;B=this._convert_swapColumns(E);break;case actuate.iv.core.iVEvent.__E_APPLYHIDESHOW_ITEM:D=actuate.iv.core.iVOperation.__OP_APPLYHIDESHOW_ITEM;var C=[];C.push({name:"ItemId",value:F[G][1].value[2].value});C.push({name:"visibility",value:F[G][1].value[3].value});B=[null,C];break;case actuate.iv.core.iVEvent.__E_APPLYTYPE:D=actuate.iv.core.iVOperation.__OP_APPLYTYPE;B=this._convert_applySubType(I.value,E,H);break;case actuate.iv.core.iVEvent.__E_APPLYCHARTFORMAT:D=actuate.iv.core.iVOperation.__OP_APPLYCHARTFORMAT;B=this._convert_applyChartFormat(F[G][1].value[2]);break;case actuate.iv.core.iVEvent.__E_APPLYCHARTSIZE:D=actuate.iv.core.iVOperation.__OP_APPLYCHARTSIZE;B=this._convert_applyChartFormat(F[G][1].value[2]);break;case actuate.iv.core.iVEvent.__E_APPLYGADGETFORMAT:D=actuate.iv.core.iVOperation.__OP_APPLYGADGETFORMAT;B=this._convert_applyGadgetFormat(F[G][1].value[2]);break;case actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_CATEGORIES:D=actuate.iv.core.iVOperation.__OP_DRILLDOWN_FROM_CATEGORIES;B=this._convert_drillDownFromCategories(F[G][1].value[3].value,F[G][1].value[2].value);break;case actuate.iv.core.iVEvent.__E_DRILLDOWN_FROM_SERIES:D=actuate.iv.core.iVOperation.__OP_DRILLDOWN_FROM_SERIES;B=this._convert_drillDownFromSeries(F[G][1].value[3].value,F[G][1].value[2].value);break;case actuate.iv.core.iVEvent.__E_DRILLUP_FROM_CATEGORIES:D=actuate.iv.core.iVOperation.__OP_DRILLUP_FROM_CATEGORIES;var C=this._createCommonOperands();C.push({name:"drillUpFrom",value:"Categories"});C.push({name:"replaceDiv",value:F[G][1].value[2].value});B=[null,C];break;case actuate.iv.core.iVEvent.__E_DRILLUP_FROM_SERIES:D=actuate.iv.core.iVOperation.__OP_DRILLUP_FROM_SERIES;var C=this._createCommonOperands();C.push({name:"drillUpFrom",value:"Series"});C.push({name:"replaceDiv",value:F[G][1].value[2].value});B=[null,C];break;break;}if(D&&B){H.addOperation(K.value,I.value,D,B);}}return true;},_convert_drillDownFromCategories:function(A,B){var C=this._createCommonOperands();if(A!=null){C.push({name:this._OPRAND_CHART_CATEGORIES_NAME,value:actuate.util.Utility.xmlEncode(A)});}C.push({name:"drillDownFrom",value:"Categories"});C.push({name:"replaceDiv",value:B});return[null,C];},_convert_drillDownFromSeries:function(A,B){var C=this._createCommonOperands();if(A!=null){C.push({name:this._OPRAND_CHART_SERIES_NAME,value:actuate.util.Utility.xmlEncode(A)});}C.push({name:"drillDownFrom",value:"Series"});C.push({name:"replaceDiv",value:B});return[null,C];},_convert_filter:function(H){var A=new actuate.data.Filters();var B=H.getOperator();if(this._operatorsMap[B]){B=this._operatorsMap[B];}A.setOperator(B);A.setFilterType(A.FILTER_TYPE_SIMPLE);var F=new actuate.iv.data.IVBoundDataColumn();F.setName(H.getColumnName());A.setColumnName(F);var G=H.getValues();var I=[];if(G){if(G[0]){for(var E=0;E<G.length;E++){I.push(G[E]);}}else{I.push(G);}}A.setValueList(actuate.util.Json.makeArray(I));var D=new actuate.data.Data();var C=[];if(this._viewer.apiInstance._reportlet){C.push({name:actuate.Constant.oprand.Bookmark,value:this._viewer.apiInstance._reportlet});}return[D.getFilter(this._viewer,A),C];},_convert_clearFilter:function(F,B){if(F==actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_TABLE){var D=new actuate.iv.data.IVBoundDataColumn();D.setName(B);var E=new actuate.iv.data.IVTableColumnDefinition();E.setBoundDataColumn(D);var C=new actuate.iv.data.IVColumnDefinitionGroup();C.addTableColumnDefinition(E);var G=new actuate.iv.data.IVData();return[G.getColumnDefinitionGroup(this._viewer,C),[]];}else{var D=new actuate.iv.data.IVBoundDataColumn();D.setName(B);var A=new actuate.iv.data.IVBoundDataColumnList();A.setBoundDataColumn(D);var G=new actuate.iv.data.IVData();return[G.getBoundDataColumnList(A),[]];}},_convert_sort:function(G){var C=new actuate.iv.data.IVColumnDefinitionGroup();for(var B=0;B<G.length;B++){var F=G[B];var A=new actuate.iv.data.IVBoundDataColumn();A.setName(F.getColumnName());var D=new actuate.iv.data.IVTableColumnDefinition();D.setBoundDataColumn(A);D.setSortDir(F.isAscending()?D.SORTDIR_ASC:D.SORTDIR_DESC);C.addTableColumnDefinition(D);}var E=new actuate.iv.data.IVData();return[E.getColumnDefinitionGroup(this._viewer,C),[{name:"isAdavanced",value:"true"}]];},_convert_hideColumn:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A});return[null,B];},_convert_showColumn:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A});return[null,B];},_convert_hideDetail:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A});return[null,B];},_convert_showDetail:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A});return[null,B];},_convert_addGroup:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A});return[null,B];},_convert_deleteGroup:function(A){return[null,[]];},_convert_swapColumns:function(A){var B=[];B.push({name:this._OPRAND_COLUMNNAME,value:A[0]});B.push({name:this._OPRAND_COLUMNNAME,value:A[1]});return[null,B];},_convert_applySubType:function(I,J,D){if(I==actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_CHART||I=="FlashCharts"){var H=new actuate.iv.data.IVChartType();H.setSubType(J);var E=new actuate.iv.data.IVChartProperties();E.setChartType(H);var C=new actuate.iv.data.IVData();return[C.getChartProperties(this._viewer,E),[]];}else{if(I==actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_FLASHGADGETS){var F=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var G=actuate.util.XmlDom.createElement(F,"FlashGadget");F.documentElement.appendChild(G);var A=actuate.util.XmlDom.createElement(F,actuate.Constant.tag.Type);var B=F.createTextNode(J);A.appendChild(B);G.appendChild(A);return[F,[]];}}},_convert_applyGadgetFormat:function(K){var F=new actuate.iv.data.IVChartProperties();if(K){if(K.name==actuate.data.impl.OptionKeys.SIZE){var C=new actuate.iv.data.IVChartAppearance();var N=K.value;var A="";var M="";var G="";var D="";for(var E=0;E<N.length;E++){if(N[E]&&N[E].name){if(N[E].name==actuate.data.impl.OptionKeys.WIDTH){A=N[E].value;}else{if(N[E].name==actuate.data.impl.OptionKeys.WIDTHUNIT){G=N[E].value;}else{if(N[E].name==actuate.data.impl.OptionKeys.HEIGHT){M=N[E].value;}else{if(N[E].name==actuate.data.impl.OptionKeys.HEIGHTUNIT){D=N[E].value;}}}}}}if(G=="px"){A=parseInt(A)*72/96;G="pt";}if(D=="px"){M=parseInt(M)*72/96;D="pt";}var H=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var I=actuate.util.XmlDom.createElement(H,"FlashGadget");H.documentElement.appendChild(I);var L=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.ChartWidth);L.appendChild(H.createTextNode(A+G));I.appendChild(L);var J=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.ChartHeight);J.appendChild(H.createTextNode(M+D));I.appendChild(J);var B=this._createCommonOperands();return[H,B];}}return[];},_convert_applyChartFormat:function(I){var G=new actuate.iv.data.IVChartProperties();if(I){if(I.name==this._JS_CHART_FORMAT_TITLE){var J=new actuate.iv.data.IVChartLabels();J.setTitle(I.value);G.setChartLabels(J);}else{if(I.name==this._JS_CHART_FORMAT_DIMENSION){var C=new actuate.iv.data.IVChartAppearance();if(I.value==this._JS_CHART_DIMENSION_2D){C.setDimention(this._CHART_DIMENSION_2D);}else{if(I.value==this._JS_CHART_DIMENSION_2D_DEPTH){C.setDimention(this._CHART_DIMENSION_2D_DEPTH);}else{if(I.value==this._JS_CHART_DIMENSION_3D){C.setDimention(this._CHART_DIMENSION_3D);}else{this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("error.chartFormat.invalidDimension"));return ;}}}G.setChartAppearance(C);}else{if(I.name==actuate.data.impl.OptionKeys.SIZE){var J=new actuate.iv.data.IVChartLabels();G.setChartLabels(J);var C=new actuate.iv.data.IVChartAppearance();var L=I.value;var A="";var K="";var H="";var D="";for(var F=0;F<L.length;F++){if(L[F]&&L[F].name){if(L[F].name==actuate.data.impl.OptionKeys.WIDTH){A=L[F].value;}else{if(L[F].name==actuate.data.impl.OptionKeys.WIDTHUNIT){H=L[F].value;}else{if(L[F].name==actuate.data.impl.OptionKeys.HEIGHT){K=L[F].value;}else{if(L[F].name==actuate.data.impl.OptionKeys.HEIGHTUNIT){D=L[F].value;}}}}}}if(H=="px"){A=Math.floor(parseInt(A)*72/96);H="pt";}if(D=="px"){K=Math.floor(parseInt(K)*72/96);D="pt";}C.setWidth(A+H);C.setHeight(K+D);G.setChartAppearance(C);}}}}var B=this._createCommonOperands();var E=new actuate.iv.data.IVData();return[E.getChartProperties(this._viewer,G),B];},_get_reportcontent:function(E,C,D){var B=null;var A=[];A.push({name:"pagerange",value:D.pageRange==null?"all":D.pageRange});if(D.pageRange==null){A.push({name:"bookmark",value:D.bookmark==null?"all":D.bookmark});}A.push({name:"format",value:D.format==null?"all":D.format});A.push({name:"svg",value:this._viewer.supportSVG?"true":"false"});C.addOperation(this._viewer.id,"Document",actuate.iv.core.iVOperation.__OP_GET_REPORTCONTENT,[B,A]);return true;},_download_resultset:function(Q,H,Y){var O=null;var I=[];var V=new actuate.iv.data.IVResultSetRequest();var C=Y[this._DATASERVICE_OPTIONKEYS_COLUMNS];if(C){var E=new actuate.iv.data.IVColumnDefinitionGroup();for(var W=0;W<C.length;W++){var G=new actuate.iv.data.IVBoundDataColumn();G.setName(C[W]);var D=new actuate.iv.data.IVTableColumnDefinition();D.setBoundDataColumn(G);E.addTableColumnDefinition(D);}V.setColumns(E);}var M=new actuate.iv.data.IVFilterList();var X=Y[this._DATASERVICE_OPTIONKEYS_FILTERS];if(X){for(var W=0;W<X.length;W++){var T=X[W];var N=new actuate.iv.data.IVFilter();N.setFilterType(actuate.iv.data.IVFilter.FILTER_TYPE_SIMPLE);var P=new actuate.iv.data.IVBoundDataColumn();P.setName(T[this._DATASERVICE_OPTIONKEYS_COLUMN_NAME]);N.setColumnName(P);N.setOperator(T[this._DATASERVICE_OPTIONKEYS_OPERATOR]);var U=[];var F=T[this._DATASERVICE_OPTIONKEYS_VALUES];if(!actuate.util.Utility.isArray(F)){U.push(F);}else{for(var W=0;W<F.length;W++){if(F[W]==true){U.push("true");}else{if(F[W]==false){U.push("false");}else{U.push(F[W]);}}}}N.setValueList(U);M.setFilter(N);}V.setFilters(M);}var B=new actuate.iv.data.IVDataSortColumns();var S=Y[this._DATASERVICE_OPTIONKEYS_SORTERS];if(S){for(var W=0;W<S.length;W++){var J=S[W];var L=new actuate.iv.data.IVDataSortColumn();L.setColumnName(J[this._DATASERVICE_OPTIONKEYS_COLUMN_NAME]);if(J[this._DATASERVICE_OPTIONKEYS_ASCENDING]==true){L.setSortDirection(L.SORTDIR_ASC);}else{L.setSortDirection(L.SORTDIR_DESC);}B.setSorter(L);}V.setSorters(B);}var K=Y[this._DATASERVICE_OPTIONKEYS_BOOKMARK];V.setBookmark(K);var R=Y[this._DATASERVICE_OPTIONKEYS_MAX_ROWS];V.setMaxRow(R);var A=Y[this._DATASERVICE_OPTIONKEYS_START_ROW];V.setStartRow(A);var Y=new actuate.iv.data.IVData();operataionData=Y.getResultSetRequest(this._viewer,V);H.addOperation(this._viewer.id,"Document",actuate.iv.core.iVOperation.__OP_DOWNLOAD_RESULTSET,[operataionData,I]);return true;}});actuate.util.Package.define("actuate.iv.ui.report");actuate.iv.ui.report.IVScriptAPI=actuate.Class.create();actuate.iv.ui.report.IVScriptAPI.prototype={_viewer:null,_eventHandlers:null,initialize:function(A){this._viewer=A;this._eventHandlers=new actuate.iv.ui.report.IVScriptAPIEventHandlers(this);this._cb_installEventHandlers();},_cb_installEventHandlers:function(){this._eventHandlers.registerEventHandlers(this._viewer.id);},clear:function(){}};actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.AbstractIVDialog=function(){};actuate.iv.ui.dialog.AbstractIVDialog.prototype={_name:null,_viewer:null,_consumer:null,_instance:null,htmlId:null,_width:500,offsetHeight:null,offsetWidth:null,_visible:null,_rendered:false,_elementType:null,_window:null,_firstTimeShow:null,_title:null,hasCancelButton:true,hasHelpButton:false,hasFooter:true,isResizable:false,hasAutoAdjustSize:true,__preventEnterKey:false,_dialogMonitor:null,initialize:function(C,A,J,E){this._firstTimeShow=true;this._instance=document.getElementById(C);this.props={};var D=document.getElementById(C+"_properties");if(D){var H=D.getElementsByTagName("span");for(var F=0;F<H.length;F++){var B=H[F].getAttribute("name");var I=H[F].getAttribute("value");if(B&&I){this.props[B]=I;}}D.parentNode.removeChild(D);D=null;}this.htmlId=C;this._visible=false;if(this._instance){this._instance.className+=" actuate_shared_resource";if(J!=false){this._instance.className+=" actuate_shared_resource_global";}}if(!this._title){this._title=this.props["title"];}if(this._width=="auto"){this._width=undefined;}if(this._height=="auto"){this._height=undefined;}this._neh_cancel_closure=actuate.Method.bind(this._neh_cancel,this);this._neh_resize_closure=actuate.Method.bind(this._neh_resize,this);var G=this._initButtons()||null;if(E){}else{this._window=new actuate.uiadapter.Window({width:this._width,cls:"actuate-iv-dialog",title:this._title,footer:this.hasFooter,resizable:this.isResizable,closeAction:"hide",constrain:true,modal:true,contentEl:this._instance,visibilityMode:"display",buttonAlign:"right",buttons:G,closable:true,allowDragOnBody:true,allowDragOnFooter:true});this._window.render(actuate.uiadapter.Element.getBody());if(this.props["showCloseButton"]){this._window.windowEl.tools.close.hide();}if(this._window.getBodyDom()!=null){this._instance=this._window.getBodyDom();}this._base_installEventHandlers(C);this.ivData=new actuate.iv.data.IVData();}this._dialogMonitor=new actuate.dialog.impl.DialogStatusMonitor();},getWindowDom:function(){return this._window.getEl().dom;},reset:function(){},getName:function(){if(!this._name&&this._classname){this._name=actuate.util.Package.getLastNamespaceObjectName(this._classname);}return this._name?this._name:"";},_initButtons:function(){if(!this.hasFooter){return null;}this._isMobile=actuate.util.browser&&actuate.util.browser.useMobile();var B=actuate.util.Utility;var A=this.__getOkText();this._okBtn=new actuate.uiadapter.Button({text:A,ui:"action",cls:"btn-primary"});var C=[this._okBtn.buttonEl];if(this.hasCancelButton){this._cancelBtn=new actuate.uiadapter.Button({text:B.getLocalizedString("baseDialog.button.cancel")});C.unshift(this._cancelBtn.buttonEl);}if(!this._isMobile){if(this.props["showCloseButton"]){this._helpBtn=new actuate.uiadapter.Button({icon:actuate.getDefaultIportalUrl()+"iv/images/tomerge/dialog/dialogHelp.gif",iconCls:"helpLinkButtonPosition",cls:"helpLinkButtonPosition",style:"position:absolute;right:0;width:30px;height:auto;border:none;margin:0px;padding:0px;"});C.push(this._helpBtn.buttonEl);}}return C;},_base_installEventHandlers:function(A){this._window.registerEventHandler("hide",actuate.Method.bind(this._afterHide,this),true);if(this._okBtn){this._okBtn.registerEventHandler("click",actuate.Method.bind(this._neh_okay,this),false);}if(this._cancelBtn){this._cancelBtn.registerEventHandler("click",actuate.Method.bind(this._neh_cancel,this),false);this._window.setCloseButtonHandler(actuate.Method.bind(this._neh_cancel,this));}if(this._helpBtn){this._helpBtn.registerEventHandler("click",actuate.Method.bind(this._neh_help_link,this),false);}this._window.registerEventHandler("beforehide",actuate.Method.bind(this._beforeHide,this),false);if(!this.__preventEnterKey){this._window.registerEventHandler("keyup",actuate.Method.bind(this._enter_key,this));}actuate.uiadapter.EventManager.onWindowResize(this._neh_resize,this);},processBind:function(C,B,A){this._viewer=C;this._consumer=C.apiInstance;if(A!=null){this._elementType=A;}this._bind(B);this._show();},localBind:function(B,A){this._viewer=B;this._consumer=B.apiInstance;if(!this._localBind(A)){this._show();}},consumerBind:function(A,B){if(A._&&A._._helper){this._viewer=A._._helper;}this._consumer=(A._)?A._:A;if(!this._localBind(B)){this._show();}},processAction:function(B,A){this._viewer=B;if("Close"==A){this._hide();}},_bind:function(A){},showDialog:function(){this._show();},_show:function(){this._preShow();if(this._visible){return ;}this._visible=true;this._window.show();this._consumer.pushActiveStack(this);this._window.focus();this._postShow();this._firstTimeShow=false;},_fixDropShadow:function(){if(this._window){this._window.syncShadow();}},_preShow:function(){},_postShow:function(){if(this.hasAutoAdjustSize){this.adjustSize();}this._adjustPosition();},adjustSize:function(A){this._window.adjustSizeToContent();var B=actuate.util.Utility;if(this._helpBtn&&(B.isIE6||B.isIE7||B.isIE8Compat)){this._helpBtn.hide();this._helpBtn.show();}if(A){this.center();}},center:function(){if(this._window){this._window.center();}},_adjustPosition:function(C){var B=true;if(!C&&this._consumer&&this._consumer.needAdjustPosition&&this._consumer.needAdjustPosition()){if(this._consumer.getWidth){var D=this._consumer.getWidth();if(D!=undefined&&this._width!=undefined){if(this._consumer.getOffset){var F=this._consumer.getOffset();if(F!=undefined){B=false;var A=(D<this._width)?0:(D-this._width-(D-this._width)%2)/2;if(this._consumer._viewingMode&&(this._consumer._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_NORMAL||this._consumer._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_MAX)){B=false;var E=this._consumer._helper.contentPanel.instance.getBoundingClientRect().top;this._window.setPosition(A+F[0],E+40);}else{B=false;this._window.setPosition(A+F[0],80+F[1]);}}}}}}if(B){this.center();}},_hide:function(){this._visible=false;if(!this._window.isHidden()){this._window.hide();}},_beforeHide:function(){if(this._preHide){this._preHide();}if(this._consumer&&this._consumer.popActiveStack){this._consumer.popActiveStack(this);}this._visible=false;},_neh_stopEvent:function(A){actuate.util.Event.stop(A);},_neh_resize:function(A){if(!this._window.isHidden()){this._adjustPosition();}},_neh_cancel:function(){if(this._visible){this._hide();this._cancelPress();}},_afterHide:function(){if(this._consumer&&this._consumer.popActiveStack){var A=this._consumer.peekActiveStack(this);if(A){this._window.showMask();}}},__validate:function(){return true;},_neh_okay:function(){if(!this._okPressTimer){this._okPressTimer=window.setTimeout(actuate.Method.bind(this._clearOkPressTimer,this),500);if(this.__validate()){this._okPress();}}},_enter_key:function(A,B){if(!this.__preventEnterKey){var C=B==null?null:B.getTarget();if(!C||"textarea"!=C.type){if(this._visible&&B.keyCode==actuate.widget.EventObject.ENTER&&!this._okPressTimer){this._okPressTimer=window.setTimeout(actuate.Method.bind(this._clearOkPressTimer,this),500);if(this.__validate()){this._okPress();}}}}},_clearOkPressTimer:function(){if(this._okPressTimer){window.clearTimeout(this._okPressTimer);this._okPressTimer=null;}},_neh_help_link:function(){var B=this.__getHelpTopic();var A=null;if(!actuate.util.Utility.isEmpty(this._consumer._helper,false)){A=this._consumer._helper.helpBase;}else{A=this._consumer.getHelpBase();}if(actuate.util.Utility.isEmpty(A,false)){A="http://www.actuate.com/documentation/R11/aic/help";}window.open(A+"/birt/wwhelp.htm?single=true&context=BIRTIV&topic="+B);},__neh_keyup:function(A){actuate.util.Event.stop(A);},_okPress:function(){},_cancelPress:function(){},_getId:function(A){return A.replace(/\./g,"_").replace("IV","iv");},_getJSId:function(A){return A.replace("IV","iv");},__getOkText:function(){var A=actuate.util.Utility.getLocalizedString("baseDialog.button.ok");if(this._isMobile){A=actuate.util.Utility.getLocalizedString("baseDialog.button.done");}return A;},_applyHtmlElementsNames:function(A){for(var B in this._htmlElements){this._htmlElements[B]=A+B;}},_popupConfirmDialog:function(B,A){actuate.uiadapter.MessageBox.confirm(actuate.util.Utility.getLocalizedString("baseDialog.promptTitle"),B,A);}};actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.IVDialogEventHandlers={CalculationDialog:{onCheckBRDValidity:function(E,C){var D=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var A=actuate.util.XmlDom.createElement(D,actuate.Constant.tag.Json);D.documentElement.appendChild(A);var B=D.createTextNode(C);A.appendChild(B);E.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_VALIDATE_BRD_EXPRESSION,D,function(F){alert("data:"+F);});}},FontDialog:{onDialogOk:function(D,C){var B=D._._helper;if(B&&B._subDialog){return ;}if(B._elementType==actuate.Constant.element.LABEL){D.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SET_LABEL_FONT,C);}else{var A=actuate.iv.core.iVEvent.__E_SET_FONT;if(B.total&&B.target){if(B.total=="GrandTotal"){if(B.target=="label"){A=actuate.iv.core.iVEvent.__E_SET_GRANDTOTAL_LABEL_FONT;}else{if(B.target=="data"){A=actuate.iv.core.iVEvent.__E_SET_GRANDTOTAL_DATA_FONT;}}}else{if(B.total=="SubTotal"){if(B.target=="label"){A=actuate.iv.core.iVEvent.__E_SET_SUBTOTAL_LABEL_FONT;}else{if(B.target=="data"){A=actuate.iv.core.iVEvent.__E_SET_SUBTOTAL_DATA_FONT;}}}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);}}},ColumnListDialog:{onDialogOk:function(C,B){var A=C._._helper;if(A._formatTrigger){C.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_FORMATSHARING,B);}else{C.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_COLUMN_LIST,B);}}},FlashGadgetFormatDialog:{onDialogOk:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_APPLY_FLASHGADGET_FORMAT,A);}},StringFormattingDialog:{onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);}},NumberFormattingDialog:{onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);}},DateFormattingDialog:{onDialogWarning:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A);},onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);},onDialogChangeLocale:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GET_DATETIME_FORMATS,A);}},DateTimeFormattingDialog:{onDialogWarning:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A);},onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);},onDialogChangeLocale:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GET_DATETIME_FORMATS,A);}},TimeFormattingDialog:{onDialogWarning:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A);},onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);},onDialogChangeLocale:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_GET_DATETIME_FORMATS,A);}},BooleanFormattingDialog:{onDialogWarning:function(B,A){B.getConsumer()._eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,A);},onDialogOk:function(D,C){var B=D._._helper;var A=actuate.iv.core.iVEvent.__E_APPLY_FORMAT;if(B.total){if(B.total=="GrandTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_GRANDTOTAL_DATA_FORMAT;}else{if(B.total=="SubTotal"){A=actuate.iv.core.iVEvent.__E_APPLY_SUBTOTAL_DATA_FORMAT;}}}D.getConsumer()._eventDispatcher.fireEvent(A,C);}}};actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.IVPromptDialog=actuate.Class.create();actuate.iv.ui.dialog.IVPromptDialog.prototype=actuate.Class.extend(new actuate.iv.ui.dialog.AbstractIVDialog(),{_classname:"actuate.iv.ui.dialog.IVPromptDialog",_width:288,_htmlElements:{"_promptMessage":null,"_yes":null,"_no":null},_TIMER_INTERVAL:10000,_timer:null,_yesClickHandler:null,_noClickHandler:null,_timeoutHandler:null,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.iv.ui.dialog.AbstractIVDialog.prototype.initialize.call(this,A,"250px");this._installEventHandlers(A);this._timer=new actuate.iv.ui.controls.IVTimer(this);this._processTimeout_c=actuate.Method.bindAsEventListener(this._processTimeout,this);this._timer.setCallback(this._processTimeout_c);this._timer.setTimeout(this._TIMER_INTERVAL);this.clearHandlers();},_initButtons:function(){var A=actuate.util.Utility;this._yesBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.yes"),cls:"btn-primary"});this._noBtn=new actuate.uiadapter.Button({text:A.getLocalizedString("baseDialog.button.no")});return[this._noBtn,this._yesBtn];},_installEventHandlers:function(A){this._yesBtn.registerEventHandler("click",actuate.Method.bind(this._yesClick,this),false);this._noBtn.registerEventHandler("click",actuate.Method.bind(this._noClick,this),false);},_yesClick:function(A){this._timer.clearTimer();this._hide();if(this._yesClickHandler){this._yesClickHandler(this);}},_noClick:function(A){this._timer.clearTimer();this._hide();if(this._noClickHandler){this._noClickHandler(this);}},clearHandlers:function(){this._yesClickHandler=null;this._noClickHandler=null;this._timeoutHandler=null;},setYesClickHandler:function(A){this._yesClickHandler=A;},setNoClickHandler:function(A){this._noClickHandler=A;},setTimeoutHandler:function(A){this._timeoutHandler=A;},_bind:function(A){if(A){var B=document.getElementById(this._htmlElements["_promptMessage"]);B.innerHTML=A;B.style.visibility="visible";}this.adjustSize();this._timer.resetTimer();},_postShow:function(A){var B=this._yesBtn.getDom();if(B!=null){this._yesBtn._ele.dom.getElementsByTagName("button")[0].focus();}this._yesBtn.focus();},_processTimeout:function(){this._timer.clearTimer();if(this._timeoutHandler){this._hide();this._timeoutHandler(this);}},_okPress:function(){this._hide();},__getHelpTopic:function(){return"iv_prompt";}});actuate.util.Package.define("actuate.iv.ui.dialog.exportReport");actuate.iv.ui.dialog.exportReport.IVAbstractRenderOption=function(){};actuate.iv.ui.dialog.exportReport.IVAbstractRenderOption.prototype={_name:null,_displayName:null,_helpText:null,_dataType:null,_defaultValue:null,_nameValuePair:null,_cascadingParentName:null,initialize:function(B,A){this._init_properties(B);this._init_htmlContent(A);},_init_properties:function(A){this._name=A.name||null;this._displayName=A.displayName||null;this._helpText=A.helpText||null;this._dataType=A.dataType||null;this._defaultValue=A.defaultValue||null;this._isHidden=A.isHidden?true:false;this._nameValuePair=A.selectNameValueList||null;this._cascadingParentName=A.cascadingParentName||null;},_init_htmlContent:function(A){},_cb_bind:function(A){},render:function(A){},setDefaultValue:function(){},getName:function(){return this._name;}};actuate.util.Package.define("actuate.iv.ui.dialog.file");actuate.iv.ui.dialog.file.IVFileBrowsingDialogModel=function(A){this.fileExtensions=A;this.rPaths=null;this.linkNames=null;this.files=null;};actuate.iv.ui.dialog.file.IVFileBrowsingDialogModel.prototype={initialize:function(){},UNSELECTED_INDEX:-1,fileSeparator:"/",reset:function(){this.rPaths=null;this.linkNames=null;this.files=null;},setData:function(A){if(A.currentWorkingFolder){this._setSegments(A.currentWorkingFolder);}if(A.defaultSavingFolder){this._setSegments(A.defaultSavingFolder);}this._setContents(A.fileList);},_setSegments:function(B){this.rPaths=[];this.linkNames=[];var A;for(var C=0;C<B.length;C++){var D=B[C];this.rPaths.push(D.rPath);this.linkNames.push(D.name);}},_setContents:function(B){this.files=[];for(var A=0;A<B.length;A++){this.files.push(new actuate.iv.ui.dialog.file.IVFile(B[A]));}},getFileExtensions:function(){return this.fileExtensions;},getLinkNames:function(){return this.linkNames;},getFileNames:function(){var B=[];for(var A=0;A<this.files.length;A++){B.push(this.files[A].name);}return B;},getFileName:function(A){return this.files[A].name;},getFileDescriptions:function(){var B=[];for(var A=0;A<this.files.length;A++){B.push(this.files[A].description);}return B;},getRPath:function(A){return this.rPaths[A];},getPath:function(A){return this.makePath(this.files[A].name);},makePath:function(B){var A=this.rPaths[this.rPaths.length-1];if(A==this.fileSeparator){return(A+B);}return(A+this.fileSeparator+B);},isFolder:function(A){return !this.files[A].isFile;}};actuate.util.Package.define("actuate.iv.ui.dialog.file");actuate.iv.ui.dialog.file.IVFileBrowsingDialogBase=function(){};actuate.iv.ui.dialog.file.IVFileBrowsingDialogBase.prototype=actuate.Class.extend(new actuate.iv.ui.dialog.AbstractIVDialog(),{__neh_listChange:function(){var B=this.currentListSelection;var A=this.listElement.getSelectedIndex();if(B>-1){this.detailElement.childNodes[B].style.display="none";}if(A>-1){this.detailElement.childNodes[A].style.display="block";}this.currentListSelection=A;},__selectFile:function(){},_preShow:function(){var A=this.htmlId;this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_BROWSE_FOLDER,A,this.__wreh_browseFolderRequest);this._viewer.eventDispatcher.registerEventHandler(actuate.iv.core.iVEvent.__E_SELECT_FILE,A,this.__wreh_selectFileRequest);},_preHide:function(){var A=this.htmlId;this._viewer.eventDispatcher.unregisterEventHandler(actuate.iv.core.iVEvent.__E_BROWSE_FOLDER,A);this._viewer.eventDispatcher.unregisterEventHandler(actuate.iv.core.iVEvent.__E_SELECT_FILE,A);},getFileExtensions:function(){return this.model.getFileExtensions();},_setBreadcrumbs:function(G,E){var C,F,A,B;for(var D=0;D<G.length;D++){C=G[D];F=document.createElement("span");F.className="filebrowser_dialog_breadcrumb_item_enabled";F.selectionId=D;F.contentEditable=false;A=document.createTextNode(C);E.appendChild(F);F.appendChild(A);B=document.createElement("span");B.appendChild(document.createTextNode(" > "));E.appendChild(B);}E.removeChild(this.categoryElement.lastChild);E.lastChild.selectionId=null;E.lastChild.className="filebrowser_dialog_breadcrumb_item_disabled";},_setFileNames:function(A,D){var B=[];for(var C=0;C<A.length;C++){name=A[C];B.push([name,name]);}D.setStore(B);},_setFileDescriptions:function(E,D){var B,F,A;for(var C=0;C<E.length;C++){B=E[C];if(B==null){B="";}F=document.createElement("div");F.style.position="absolute";F.style.left=0;F.style.top=0;F.readOnly=true;F.style.display="none";A=document.createTextNode(B);D.appendChild(F);F.appendChild(A);}},_createBrowseFolderRequest:function(C,F,E){var A=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(A,"FileBrowsing");var H=actuate.util.XmlDom.createElement(A,"Search");var G=actuate.util.XmlDom.createElement(A,"Path");var I=actuate.util.XmlDom.createElement(A,"FileType");typeText=A.createTextNode(E);I.appendChild(typeText);H.appendChild(I);D.appendChild(H);var B=A.createTextNode(F);G.appendChild(B);D.appendChild(G);A.documentElement.appendChild(D);return A;}});actuate.util.Package.define("actuate.iv.ui.contextmenu");actuate.iv.ui.contextmenu.IVContextMenu=actuate.Class.extendClass(actuate.iv.ui.app.IVTimedObject,{_classname:"actuate.iv.ui.contextmenu.IVContextMenu",_viewer:null,_instance:null,_subMenus:{},_rootMenu:null,_valid:false,_left:null,_top:null,_show:false,initialize:function(D){this._viewer=D;this._instance=actuate.iv.utility.ivUtility.getElementByClassName(this._viewer.container,"contextMenu");this._subMenus={};if(actuate.util.Utility.isIE8){actuate.util.Utility.fixIE8ImageButtons(this._instance);}actuate.iv.ui.app.IVTimedObject.prototype.initialize.call(this);var B=this._instance.childNodes;for(var A=0;A<B.length;A++){if(B[A].nodeType!=1){continue;}var C=B[A].getAttributeNode("ROOT");if(C){this._subMenus[B[A].id]=new actuate.iv.ui.contextmenu.IVRootContextMenu(B[A].id,this);this._rootMenu=this._subMenus[B[A].id];}else{this._subMenus[B[A].id]=new actuate.iv.ui.contextmenu.IVSubContextMenu(B[A].id,this);}}this._neh_menuClick_c=actuate.Method.bindAsEventListener(this._neh_menuClick,this);this._neh_mouseDown_c=actuate.Method.bindAsEventListener(this._neh_mouseDown,this);this._installEventHandlers();},_installEventHandlers:function(){actuate.util.Event.observe(this._instance,"click",this._neh_menuClick_c,false);actuate.util.Event.observe(this._instance,"contextmenu",this._neh_menuClick_c,false);actuate.util.Event.observe(this._instance,"mouseout",this._object_mouseout_c,false);actuate.util.Event.observe(this._instance,"mouseover",this._object_mouseover_c,false);},localBind:function(B,A){this._data=A;if(this._show){this.showMenu(this._viewer,{left:this._left,top:this._top});this._show=false;}},reset:function(){this._rootMenu.reset();this._valid=false;},_close:function(){this.hideMenu(this._viewer);},showMenu:function(B,A){if(A&&A.canDrill){if(!this._data){this._data={canDrill:A.canDrill};}else{this._data.canDrill=A.canDrill;}}if(this._data){this._valid=this._rootMenu.__bind(this._data);}if(this._viewer==null){return ;}if(this._viewer.progressiveViewing){return ;}if(!this._valid){return ;}this._rootMenu.hideMenu();this._rootMenu.showMenu(A.left,A.top);this.position=this._rootMenu.position;this._setTimer(2000);},showFilter:function(A){if(A&&A.hasFilter!=null){var B=document.getElementById("contextMenu_subMenu_Filter_Id_arrow_ID");if(B){B.className=A.hasFilter?"ContextMenuItemIcon actuateCSSSprite_selection actuateIV_overlayexistfilter":"ContextMenuItemIcon actuateCSSSprite_selection actuateIV_overlayfilter";}}},positionMenu:function(B,A){if(B&&B.progressiveViewing){return ;}this._left=actuate.util.Event.pointerX(A);this._top=actuate.util.Event.pointerY(A);this._show=true;},hideMenu:function(A){this._rootMenu.hideMenu();this._clearTimer();},_neh_mouseDown:function(A){actuate.util.Event.stop(A);},selectMenu:function(G){this._rootMenu.hideMenu();if(!G){return ;}var F=actuate.iv.core.iVEvent;var B=G.getAttribute("eventName");var A=G.getAttribute("eventParam");B="__E_"+B.toUpperCase();switch(B){case F.__E_QUERY_EXPORT:case F.__E_EXPORTREPORT:case F.__E_QUERY_FONT:case F.__E_SHARE_STYLE:case F.__E_SHARE_FORMAT:case F.__E_QUERY_HEADER_FONT:case F.__E_SORTASC:case F.__E_SORTDESC:case F.__E_SORTADVANCED:case F.__E_QUERY_PAGE_BREAK:case F.__E_QUERY_GROUP_DETAIL:case F.__E_HIDEDETAIL:case F.__E_SHOWDETAIL:case F.__E_UPDATE_PAGE_BREAK:case F.__E_DELETE_GROUP:case F.__E_HIDE_COLUMN:case F.__E_QUERY_HIDDEN_COLUMN:case F.__E_QUERY_MANAGETABLECOLUMN:case F.__E_FILTER:case F.__E_QUERYTYPE:case F.__E_TOPBOTTOMN:case F.__E_AGGREGATION:case F.__E_CALCULATION:case F.__E_EDIT_CALCULATION:case F.__E_QUERY_FORMAT:case F.__E_CHART_FORMAT:case F.__E_FLASHGADGET_FORMAT:case F.__E_QUERY_TEXT:case F.__E_ALIGN_LEFT:case F.__E_ALIGN_CENTER:case F.__E_ALIGN_RIGHT:case F.__E_HEADER_ALIGN_LEFT:case F.__E_HEADER_ALIGN_CENTER:case F.__E_HEADER_ALIGN_RIGHT:case F.__E_COLUMN_PROPERTIES:case F.__E_MOVE_TO_GROUP:case F.__E_MOVE_TO_LEFT:case F.__E_MOVE_TO_RIGHT:case F.__E_CONDITIONALFORMATTING:case F.__E_QUERY_GROUP:case F.__E_SWITCH_VIEW:case F.__E_DATA_ANALYZER:case F.__E_GRANDTOTAL_LABEL_ALIGN_LEFT:case F.__E_GRANDTOTAL_LABEL_ALIGN_CENTER:case F.__E_GRANDTOTAL_LABEL_ALIGN_RIGHT:case F.__E_GRANDTOTAL_DATA_ALIGN_LEFT:case F.__E_GRANDTOTAL_DATA_ALIGN_CENTER:case F.__E_GRANDTOTAL_DATA_ALIGN_RIGHT:case F.__E_QUERY_GRANDTOTAL_LABEL_FONT:case F.__E_QUERY_GRANDTOTAL_DATA_FONT:case F.__E_SUBTOTAL_LABEL_ALIGN_LEFT:case F.__E_SUBTOTAL_LABEL_ALIGN_CENTER:case F.__E_SUBTOTAL_LABEL_ALIGN_RIGHT:case F.__E_SUBTOTAL_DATA_ALIGN_LEFT:case F.__E_SUBTOTAL_DATA_ALIGN_CENTER:case F.__E_SUBTOTAL_DATA_ALIGN_RIGHT:case F.__E_QUERY_SUBTOTAL_LABEL_FONT:case F.__E_QUERY_SUBTOTAL_DATA_FONT:case F.__E_QUERY_GRANDTOTAL_DATA_FORMAT:case F.__E_QUERY_SUBTOTAL_DATA_FORMAT:case F.__E_CHART_CATEGORIES:case F.__E_CHART_SERIES:this._viewer.eventDispatcher.fireEvent(B);break;case F.__E_DELETE_COLUMN:var D=this;var C=actuate.util.Utility.getLocalizedString("contextmenu.deletecolumn.prompt");actuate.uiadapter.MessageBox.confirm(actuate.util.Utility.getLocalizedString("baseDialog.promptTitle"),C,function(E){if(E=="yes"){D._viewer.eventDispatcher.fireEvent(B);}});break;case F.__E_DRILLUP_FROM_CATEGORIES:case F.__E_DRILLUP_FROM_SERIES:var H;if(A){H=parseInt(A);}if(H>1){this._viewer.eventDispatcher.fireEvent(B,{drillLevel:H});}else{this._viewer.eventDispatcher.fireEvent(B);}break;case F.__E_SHOW_TOOLTIP:this._updateTooltipMenu(G);break;default:this._viewer.eventDispatcher.broadcastEvent(B);break;}},_updateTooltipMenu:function(B){var A=this._viewer._crosstab._selectionManager.selectedCrosstab;if(A){A.isShowTooltip=A.isShowTooltip?false:true;}nodes=B.getElementsByTagName("Label");inputs=B.getElementsByTagName("Input");if(nodes){if(this._viewer._crosstab._selectionManager.selectedCrosstab.showTooltip){nodes[0].innerHTML=actuate.util.Utility.getLocalizedString("contextmenu.hideTooltip");}else{nodes[0].innerHTML=actuate.util.Utility.getLocalizedString("contextmenu.showTooltip");}this._viewer._crosstab._selectionManager.selectedTooltipNodes=nodes[0];this._viewer._crosstab._selectionManager.selectedTooltipInputs=inputs[0];this._viewer.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SHOW_TOOLTIP);}},_neh_menuClick:function(B){actuate.util.Event.stop(B);if(B.type=="contextmenu"){return ;}var C=actuate.util.Event.findElement(B,"ContextMenuItem");var A=C&&C.getAttributeNode("SUBMENUID");if(A||(C&&C.className!="ContextMenuItem")){this._rootMenu.highlightMenu(B);return ;}this.selectMenu(C);}});actuate.util.Package.define("actuate.iv.ui.contextmenu");actuate.iv.ui.contextmenu.IVSingleContextMenu=actuate.Class.create();actuate.iv.ui.contextmenu.IVSingleContextMenu.prototype={_htmlId:null,_instance:null,_contextMenu:null,_visible:false,_parentMenuID:null,_highlightedSubMenuID:null,_highlightedMenuItem:null,position:null,_shadow:null,_canDrill:null,initialize:function(B){if(B){this._htmlId=B;this._instance=actuate.iv.utility.ivUtility.getElementById(this._contextMenu._viewer.container,B);var A=this._instance.getAttributeNode("PARENTID");if(A){this._parentMenuID=A.value;}if(actuate.util.Utility.isIE8){this._shadow=new actuate.util.Shadow({mode:"frame"});}}},_installEventHandlers:function(){actuate.util.Event.observe(this._instance,"mousemove",actuate.Method.bindAsEventListener(this._neh_highLight,this),false);},reset:function(){var D=this._instance.getElementsByTagName("TD");var C=D[0].childNodes;for(var B=0;B<C.length;B++){if(C[B].nodeType!=1||C[B].tagName!="DIV"){continue;}switch(C[B].className){case"ContextMenuHorizontalRule":C[B].style.display="none";break;case"ContextMenuItem":this._updateMenuItem(C[B],false);var A=C[B].getAttributeNode("SUBMENUID");if(A&&this._contextMenu._subMenus[A.value]){this._contextMenu._subMenus[A.value].reset();}break;}}},__bind:function(E){var G=false;var F=this._instance.getElementsByTagName("TD");var C=F[0].childNodes;if(E.canDrill){this._canDrill=E.canDrill;}for(var B=0;B<C.length;B++){if(C[B].nodeType!=1||C[B].tagName!="DIV"||C[B].className!="ContextMenuItem"){continue;}var H=C[B].getAttributeNode("OPT");var D=false;if(H){if(E[H.value]){D=!this._contextMenu._viewer.featureMap||this._contextMenu._viewer.featureMap[H.value]==undefined||this._contextMenu._viewer.featureMap[H.value];G=D?true:G;}this._updateMenuItem(C[B],D);}if((!H)||D){D=false;var A=C[B].getAttributeNode("SUBMENUID");if(A&&this._contextMenu._subMenus[A.value]){if(this._contextMenu._subMenus[A.value].__bind(E)){D=true;G=true;}this._updateMenuItem(C[B],D);}}}this._updateMenuItemSeperator();return G;},_updateMenuItem:function(C,B){C.status=B;C.style.display=B?"block":"none";var D=C.getAttribute("SUBMENUID");var G=C.getElementsByTagName("INPUT");var F=C.getElementsByTagName("LABEL");if(G&&G.length>0){G[0].style.dislay=B?"block":"none";G[0].style.visibility=B?"visible":"hidden";if(D){G[0].id=D+"_arrow_ID";}}if(D){C.id=D+"_ID";}var A=C.getAttribute("eventName");if(A){C.id=A+"_ID";}if(F&&F.length>0){var E=this._getMenuItemText(C);if(E){F[0].innerHTML=E;}}},_getMenuItemText:function(D){var E;var B=D.getAttribute("eventName");var A=D.getAttribute("eventParam");var C=A?parseInt(A)-1:-1;if(C>=0&&this._canDrill){switch(B){case"DRILLUP_FROM_CATEGORIES":if(this._canDrill.canDrillUpFromCategoriesNames&&C<this._canDrill.canDrillUpFromCategoriesNames.length){E=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUpFromCategoriesName",this._canDrill.canDrillUpFromCategoriesNames[C]);}break;case"CHART_CATEGORIES":if(this._canDrill.canDrillDownFromCategoriesNames&&C<this._canDrill.canDrillDownFromCategoriesNames.length){E=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillDownFromCategoriesName",this._canDrill.canDrillDownFromCategoriesNames[C]);}break;case"DRILLUP_FROM_SERIES":if(this._canDrill.canDrillUpFromSeriesNames&&C<this._canDrill.canDrillUpFromSeriesNames.length){E=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillUpFromSeriesName",this._canDrill.canDrillUpFromSeriesNames[C]);}break;case"CHART_SERIES":if(this._canDrill.canDrillDownFromSeriesNames&&C<this._canDrill.canDrillDownFromSeriesNames.length){E=actuate.util.Utility.getLocalizedString("chartContextMenu.text.DrillDownFromSeriesName",this._canDrill.canDrillDownFromSeriesNames[C]);}break;default:break;}}return E;},_updateMenuItemSeperator:function(){var F=this._instance.getElementsByTagName("TD");var D=F[0].childNodes;F[0].style.width="auto";var E=false;var C=false;var A=null;for(var B=0;B<D.length;B++){if(D[B].nodeType!=1||D[B].tagName!="DIV"){continue;}switch(D[B].className){case"ContextMenuHorizontalRule":if(A){A.style.display=(E&C)?"":"none";}A=D[B];E=E|C;C=false;break;case"ContextMenuItem":if(D[B].style.display!="none"){C=true;}break;}}if(A){A.style.display=(E&C)?"":"none";}},_offLightMenuItem:function(C){if(C==this._highlightedMenuItem){C.style.backgroundColor="transparent";var D=C.getElementsByTagName("label");if(D&&D.length>0){D[0].style.color="black";}var A=C.getElementsByTagName("input");if(A){for(var B=0;B<A.length;B++){if(actuate.util.String.endWith(A[B].className,"_active")){A[B].className=A[B].className.substr(0,A[B].className.length-7);}}}this._highlightedMenuItem=null;}},_highLightMenuItem:function(C){if(C!=this._highlightedMenuItem){C.style.backgroundColor="#464646";var D=C.getElementsByTagName("label");if(D&&D.length>0){D[0].style.color="white";}var A=C.getElementsByTagName("input");if(A){for(var B=0;B<A.length;B++){if(A[B].className.indexOf("actuateIV_")>0){A[B].className=A[B].className+"_active";}}}this._highlightedMenuItem=C;}},_showNextMenuItem:function(C){var A=null;if(this._highlightedMenuItem){A=C?this._highlightedMenuItem.nextSibling:this._highlightedMenuItem.previousSibling;this._offLightMenuItem(this._highlightedMenuItem);while(A&&(A.nodeType!=1||A.style.display=="none"||A.tagName!="DIV")){A=C?A.nextSibling:A.previousSibling;}}if(!A){var B=this._instance.getElementsByTagName("TD");A=C?B[0].firstChild:B[0].lastChild;while(A&&(A.nodeType!=1||A.style.display=="none"||A.tagName!="DIV")){A=C?A.nextSibling:A.previousSibling;}}this._highLightMenuItem(A);},_showSubMenu:function(D,A){var C=D.getAttributeNode("SUBMENUID");if(C){var B=C.value;if(B&&this._contextMenu._subMenus[B]){this._contextMenu._subMenus[B].showMenu(D);this._highlightedSubMenuID=B;}if(A){this._contextMenu._subMenus[B]._showNextMenuItem(true);}}},_neh_highLight:function(A){actuate.util.Event.stop(A);var B=actuate.util.Event.findElement(A,"ContextMenuItem");if(B){if(this._highlightedSubMenuID&&this._contextMenu._subMenus[this._highlightedSubMenuID]){this._contextMenu._subMenus[this._highlightedSubMenuID].hideMenu();this._highlightedSubMenuID=null;}if(this._highlightedMenuItem){this._offLightMenuItem(this._highlightedMenuItem);}this._highLightMenuItem(B);this._showSubMenu(B,false);}},__keyup:function(A){if(A.keyCode==actuate.util.Event.KEY_ESC){this.hideMenu();}else{if(A.keyCode==actuate.util.Event.KEY_LEFT){if(this._parentMenuID){this.hideMenu();}}else{if(A.keyCode==actuate.util.Event.KEY_UP){this._showNextMenuItem(false);}else{if(A.keyCode==actuate.util.Event.KEY_RIGHT){if(this._highlightedMenuItem){this._showSubMenu(this._highlightedMenuItem,true);}}else{if(A.keyCode==actuate.util.Event.KEY_DOWN){this._showNextMenuItem(true);}else{if(A.keyCode==actuate.util.Event.KEY_RETURN){this._contextMenu.selectMenu(this._highlightedMenuItem);}}}}}}},hideMenu:function(){if(this._visible){if(this._highlightedSubMenuID&&this._contextMenu._subMenus[this._highlightedSubMenuID]){if(this._parentMenuID){this._contextMenu._subMenus[this._parentMenuID]._instance.focus();}this._contextMenu._subMenus[this._highlightedSubMenuID].hideMenu();this._highlightedSubMenuID=null;}if(this._highlightedMenuItem){this._offLightMenuItem(this._highlightedMenuItem);this._highlightedMenuItem=null;}actuate.util.Element.hide(this._instance);this._contextMenu._viewer.apiInstance.popActiveStack(this);if(this._shadow){this._shadow.hide();}this._visible=false;}}};actuate.util.Package.define("actuate.iv.ui.contextmenu");actuate.iv.ui.contextmenu.IVRootContextMenu=actuate.Class.extendClass(actuate.iv.ui.contextmenu.IVSingleContextMenu,{initialize:function(B,A){this._contextMenu=A;actuate.iv.ui.contextmenu.IVSingleContextMenu.prototype.initialize.call(this,B);this._installEventHandlers();},showMenu:function(B,K){actuate.util.Element.show(this._instance);var D=actuate.util.Element.cumulativeOffset(this._contextMenu._viewer.contentPanel.instance);var G=actuate.util.Element.realOffset(this._contextMenu._viewer.contentPanel.instance);var R=document.documentElement||{scrollLeft:0,scrollTop:0};var F=document.body||{scrollLeft:0,scrollTop:0};G[0]-=(R.scrollLeft||window.pageXOffset||F.scrollLeft||0);G[1]-=(R.scrollTop||window.pageYOffset||F.scrollTop||0);var I=D[0]-G[0];var E=D[1]-G[1];var J=20;var Q=this._contextMenu._viewer.contentPanel.instance.clientWidth-(B-I);var N=this._instance.children[0].offsetWidth;if(B+N+J>this._contextMenu._viewer.contentPanel.instance.clientWidth+I){B=B-N;Q=B;}Q=(Q<0)?0:Q;var P=20;var M=this._contextMenu._viewer.contentPanel.instance.clientHeight-(K-E);var L=this._instance.offsetHeight;if((K+L+P>=this._contextMenu._viewer.contentPanel.instance.clientHeight+E)&&(K-L-P>E)){K=K-L;M=K;}M=(M<0)?0:M;var C=actuate.util.Element.cumulativeOffset(this._contextMenu._viewer.container);var G=actuate.util.Element.realOffset(this._contextMenu._viewer.container);R=document.documentElement||{scrollLeft:0,scrollTop:0};F=document.body||{scrollLeft:0,scrollTop:0};G[0]-=(R.scrollLeft||window.pageXOffset||F.scrollLeft||0);G[1]-=(R.scrollTop||window.pageYOffset||F.scrollTop||0);var A=C[0]-G[0];var H=C[1]-G[1];B=B-A;K=K-H;if(B<0){B=0;}if(K<0){K=0;}this._instance.style.left=B+"px";this._instance.style.top=K+"px";this._instance.style.maxWidth=Q+"px";this._instance.style.maxHeight=M+"px";this.position=[B,K];if(actuate.util.Utility.isIE7||actuate.util.Utility.isIE8Compat){var S=this._instance.offsetWidth+this._instance.offsetHeight;var O=this._instance.getElementsByTagName("div");O[0].style.margin="10px";O[0].style.margin="0px";}if(this._shadow){this._shadow.show(this._instance);}this._instance.focus();this._contextMenu._viewer.apiInstance.pushActiveStack(this);this._visible=true;},highlightMenu:function(A){actuate.iv.ui.contextmenu.IVSingleContextMenu.prototype._neh_highLight.call(this,A);},hideMenu:function(){actuate.iv.ui.contextmenu.IVSingleContextMenu.prototype.hideMenu.call(this);}});actuate.util.Package.define("actuate.iv.ui.contextmenu");actuate.iv.ui.contextmenu.IVSubContextMenu=actuate.Class.extendClass(actuate.iv.ui.contextmenu.IVSingleContextMenu,{yOffset:null,initialize:function(B,A){this._contextMenu=A;actuate.iv.ui.contextmenu.IVSingleContextMenu.prototype.initialize.call(this,B);this._installEventHandlers();},showMenu:function(A){actuate.util.Element.show(this._instance);var E=20;var H=this._contextMenu._subMenus[this._parentMenuID].position;var F=this._contextMenu._viewer;var B=actuate.util.Element.cumulativeOffset(F.contentPanel.instance);var G=B[0];var C=B[1];var D=H[0]+A.offsetWidth-1;var K=this._contextMenu._viewer.contentPanel.instance.clientWidth-D;if(F.tocPanel){if(F.tocPanel.isVisible()){K+=F.tocPanel.width;}}if(D+this._instance.offsetWidth+E>this._contextMenu._viewer.contentPanel.instance.clientWidth){D=H[0]-this._instance.offsetWidth+10;if(D<0){D=0;}K=this._contextMenu._viewer.contentPanel.instance.clientWidth-D;if(F.tocPanel){if(F.tocPanel.isVisible()){K+=F.tocPanel.width;}}}K=(K<0)?0:K;this.yOffset=actuate.util.Element.cumulativeOffsetAgainst(A,this._contextMenu._subMenus[this._parentMenuID]._instance)[1];var I=H[1]+this.yOffset;var J=this._contextMenu._viewer.contentPanel.instance.clientHeight-I;if(I+this._instance.offsetHeight+E>this._contextMenu._viewer.contentPanel.instance.clientHeight+C){I=H[1]+this.yOffset-this._instance.offsetHeight;J=I;}J=(J<0)?0:J;if(D<0){D=0;}if(I<0){I=0;}this._instance.style.left=D+"px";this._instance.style.top=I+"px";this._instance.style.maxWidth=K+"px";this._instance.style.maxHeight=J+"px";this.position=[D,I];if(this._shadow){this._shadow.show(this._instance);}this._instance.focus();this._contextMenu._viewer.apiInstance.pushActiveStack(this);this._visible=true;}});actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVDataSortColumns=actuate.Class.create();actuate.iv.data.IVDataSortColumns.prototype={_sorters:null,_DATASORTCOLUMN:"DataSortColumn",initialize:function(){this._sorters=new Array();},getSorterList:function(){return this._sorters;},setSorter:function(A){this._sorters.push(A);},clearSorterList:function(){this._sorters.length=0;},getSoapRequest:function(D,F){var E=actuate.util.XmlDom.createElement(D,F);var C=this.getSorterList();for(var B=0;B<C.length;B++){if(C[B]!=null){var A=C[B].getSoapRequest(D,this._DATASORTCOLUMN);E.appendChild(A);}}return E;},breakDownData:function(D){var A=D.getElementsByTagName("SortDefinition");if(A){this._sorters=[];for(var C=0;C<A.length;C++){var E=actuate.util.XmlDom.getNodeTextData(A[C].getElementsByTagName("BindingName")[0]);var B=actuate.util.XmlDom.getNodeTextData(A[C].getElementsByTagName("SortDir")[0]);this._sorters.push(new actuate.iv.data.IVDataSortColumn(E,B));}}}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVDataSortColumn=actuate.Class.create();actuate.iv.data.IVDataSortColumn.prototype={SORTDIR_ASC:"ASC",SORTDIR_DESC:"DES",_TAG_COLUMNNAME:"ColumnName",_TAG_SORTDIRECTION:"SortDirection",_columnName:null,_sortDirection:null,initialize:function(A,B){this._columnName=A||null;this._sortDirection=B||null;},getColumnName:function(){return this._columnName;},setColumnName:function(A){this._columnName=A;},getSortDirection:function(){return this._sortDirection;},setSortDirection:function(A){this._sortDirection=A;},getSoapRequest:function(D,E){var B=actuate.util.XmlDom.createElement(D,E);var A=actuate.util.XmlDom.createElement(D,this._TAG_COLUMNNAME);A.appendChild(D.createTextNode(this._columnName));B.appendChild(A);var C=actuate.util.XmlDom.createElement(D,this._TAG_SORTDIRECTION);C.appendChild(D.createTextNode(this._sortDirection));B.appendChild(C);return B;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVResultSetRequest=actuate.Class.create();actuate.iv.data.IVResultSetRequest.prototype={_TAG_COLUMNS:"Columns",_TAG_FILTERS:"FilterList",_TAG_SORTERS:"SortColumnList",_TAG_BOOKMARK:"BookMark",_TAG_STARTROW:"StartRowNumber",_TAG_MAXROW:"MaxRowNumber",_columns:null,_filters:null,_sorters:null,_bookmark:null,_startRow:null,_maxRow:null,initialize:function(){},getColumns:function(){return this._columns;},setColumns:function(A){this._columns=A;},getFilters:function(){return this._filters;},setFilters:function(A){this._filters=A;},getSorters:function(){return this._sorters;},setSorters:function(A){this._sorters=A;},getBookmark:function(){return this._bookmark;},setBookmark:function(A){this._bookmark=A;},getStartRow:function(){return this._startRow;},setStartRow:function(A){this._startRow=A;},getMaxRow:function(){return this._maxRow;},setMaxRow:function(A){this._maxRow=A;},getSoapRequest:function(D,F){var A=actuate.util.XmlDom.createElement(D,F);if(this._columns&&this._columns.getTableColumnDefinitionList()){A.appendChild(this._columns.getSoapRequest(D,this._TAG_COLUMNS));}if(this._filters){A.appendChild(this._filters.getSoapRequest(D,this._TAG_FILTERS));}if(this._sorters){A.appendChild(this._sorters.getSoapRequest(D,this._TAG_SORTERS));}var C=actuate.util.XmlDom.createElement(D,this._TAG_BOOKMARK);C.appendChild(D.createTextNode(this._bookmark));A.appendChild(C);if(this._startRow){var B=actuate.util.XmlDom.createElement(D,this._TAG_STARTROW);B.appendChild(D.createTextNode(this._startRow));A.appendChild(B);}if(this._maxRow){var E=actuate.util.XmlDom.createElement(D,this._TAG_MAXROW);E.appendChild(D.createTextNode(this._maxRow));A.appendChild(E);}return A;},breakDownData:function(A){}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVResultSetData=actuate.Class.create();actuate.iv.data.IVResultSetData.prototype={_TAG_COLUMNNAMES:"ColumnNames",_TAG_ROW:"Row",_TAG_ROW_COUNT:"RowCount",_TAG_ENDOF_RESULTSET:"EndOfResultSet",_columnNames:null,_rows:null,_rowCount:0,_endOfResultSet:false,_cursor:0,initialize:function(B){this._columnNames=null;this._rows=[];this._rowCount=0;this._endOfResultSet=true;if(!B){return ;}if(B.columnNames){this._columnNames=B.columnNames;}if(B.rows){this._rows=[];for(var A=0;A<B.rows.length;A++){var C=B.rows[A];if(!actuate.util.Utility.isArray(C)){C=[C];}this._rows.push(C);}}this.setRowCount(B.rowCount?B.rowCount:0);this.setEndOfResultSet(B.endOfResultSet?true:false);},getColumnNames:function(){return this._columnNames;},setColumnNames:function(A){this._columnNames=A;},getCursor:function(){return this._cursor;},setCursor:function(A){this._cursor=A;},getRows:function(){return this._rows;},setRows:function(A){this._rows=A;},getRowCount:function(){return this._rowCount;},setRowCount:function(A){this._rowCount=A;},getEndOfResultSet:function(){return this._endOfResultSet;},setEndOfResultSet:function(A){this._endOfResultSet=A;},getSoapRequest:function(){},getConvertedRows:function(){var D=null;var E=null;if(this._rows&&this._rows.length>0){D=new Array();for(var B=0;B<this._rows.length;B++){var C=this._rows[B];if(C&&C.length>0){E=new Array();for(var A=0;A<this._rows[B].length;A++){E.push(C[A]);}D.push(E);}}}return D;}};actuate.util.Package.define("actuate.iv.data");actuate.iv.data.IVArrayOfString=actuate.Class.create();actuate.iv.data.IVArrayOfString.prototype={_TAG_STRING:"String",_stringValues:null,initialize:function(){},getStringValues:function(){return this._stringValues;},setStringValues:function(A){this._stringValues=A;},getSoapRequest:function(){},breakDownData:function(A){var C=A.getElementsByTagName(this._TAG_STRING);if(C){this._stringValues=new Array();for(var B=0;B<C.length;B++){this._stringValues.push(C[B].firstChild.data);}}}};actuate.util.Package.define("actuate.iv.service");actuate.iv.service.InteractiveViewer=actuate.Class.create();actuate.Class.extend(actuate.iv.service.InteractiveViewer,{ELEMENT_TYPE_TABLE:"Table",ELEMENT_TYPE_SUMMARY_TABLE:"SummaryTable",ELEMENT_TYPE_CHART:"Chart",ELEMENT_TYPE_FLASHCHART:"FlashChart",ELEMENT_TYPE_FLASHGADGETS:"FlashGadgets",ELEMENT_TYPE_FLASHOBJECT:"FlashObject",ELEMENT_TYPE_DATAITEM:"Data",ELEMENT_TYPE_LABEL:"Label",ELEMENT_TYPE_TEXT:"Text",ELEMENT_TYPE_CROSSTAB:"Crosstab"});actuate.iv.service.InteractiveViewer.superclass=actuate.common.Service.prototype;actuate.iv.service.InteractiveViewer.prototype=actuate.Class.extend(new actuate.common.Service(),{_HTML_ELEMENT_TYPE_CHART:"Chart",_HTML_ELEMENT_TYPE_FLASHCHART:"FlashCharts",_HTML_ELEMENT_TYPE_FLASHGADGET:"FlashGadgets",_HTML_ELEMENT_TYPE_FLASHOBJECT:"GeneralFlash",_HTML_ELEMENT_TYPE_DATAITEM:"DATA",_HTML_ELEMENT_TYPE_LABEL:"LABEL",_HTML_ELEMENT_TYPE_TEXT:"TEXT",_HTML_ELEMENT_TYPE_CROSSTAB:"Crosstab",container:null,width:null,height:null,clientWidth:null,clientHeight:null,scrollTop:null,scrollLeft:null,contentMargin:{top:25,left:0,right:0,bottom:0},dndManager:null,contentPanel:null,toolbar:null,navbar:null,pageNavbar:null,dialogSelections:null,tocPanel:null,_overlay:null,_window:null,_document:null,_table:null,_summarytable:null,_chart:null,_flashchart:null,_flashgadgets:null,_flashobject:null,_label:null,_dataItem:null,_crosstab:null,_scriptAPI:null,interactive:false,pageLimit:200,helpBase:null,facebookBaseUrl:null,progressiveViewing:false,supportSVG:false,featureMap:null,_parameterPanel:null,_fbCommentPanel:null,cachingEnabled:true,allowedFeatures:null,uiConfig:null,fontOptions:null,utility:null,totalPage:null,currentPage:null,showMargin:"false",transientDocumentName:null,information:null,requestProgressOn:false,_BRSEnabled:false,initialize:function(B,A){actuate.iv.service.InteractiveViewer.superclass.initialize.call(this,B,A);this._scriptAPI=new actuate.iv.ui.report.IVScriptAPI(this);this.maxChannel=1;this.hasTimedOut=null;this.utility=actuate.iv.utility.ivUtility;this.supportSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");},buildViewerSkeleton:function(B,E){this.container=B;var F=E;var D=this.utility.getCookieValue(F);this.utility.clearCookieValue(F);this.standalone=(D)?true:false;if(actuate.USER_ENV=="tablet"||actuate.USER_ENV=="tabletapp"){this.standalone=true;}this.clientWidth=document.documentElement.clientWidth;this.clientHeight=actuate.util.Element.getClientHeight(window);this._updateContainerSize();var C=document.documentElement||{scrollLeft:0,scrollTop:0};var A=document.body||{scrollLeft:0,scrollTop:0};this.scrollTop=C.scrollTop||window.pageYOffset||A.scrollTop||0;this.scrollLeft=C.scrollLeft||window.pageXOffset||A.scrollLeft||0;this.dndManager=new actuate.iv.core.IVDndManager(this.apiInstance);this._window=new actuate.iv.ui.app.IVWindow(this);},startup:function(A){this.featureMap=new Object();var B=actuate.util.browser;this._isMobile=B&&B.useMobile();if(this._isMobile){if(B.isIPod||B.isIPhone||B.isAndroidPhone){this.navbar=new actuate.iv.ui.mobile.app.IVNavigationBarForPhone(this);this.pageNavbar=new actuate.iv.ui.mobile.app.IVPageNavigationBarForPhone(this);}else{this.navbar=new actuate.iv.ui.mobile.app.IVNavigationBarForTablet(this);this.pageNavbar=new actuate.iv.ui.mobile.app.IVPageNavigationBarForTablet(this);}}else{this.navbar=new actuate.iv.ui.app.IVNavigationBar(this);}this.cancelIndicator=new actuate.iv.ui.app.IVCancelGadgetGenerationIndicator(this);if(this._isMobile){this.contentPanel=new actuate.iv.ui.mobile.view.contentpanel.IVContentPanel(this,A?A.getContentPanel():null);}else{this.contentPanel=new actuate.iv.ui.view.contentpanel.IVContentPanel(this,A?A.getContentPanel():null);}this._document=new actuate.iv.ui.report.IVDocument(this);this._overlay=new actuate.iv.ui.overlay.IVOverlays(this);this._table=new actuate.iv.ui.report.IVTable(this);this._summarytable=new actuate.iv.ui.report.IVSummaryTable(this);this._label=new actuate.iv.ui.report.IVLabel(this);this._dataItem=new actuate.iv.ui.report.IVDataItem(this);this._chart=new actuate.iv.ui.report.IVChart(this);this._flashchart=new actuate.iv.ui.report.IVFlashChart(this);this._flashgadgets=new actuate.iv.ui.report.IVFlashGadget(this);this._flashobject=new actuate.iv.ui.report.IVFlashObject(this);this._crosstab=new actuate.iv.ui.report.IVCrosstab(this);if(this._isMobile){this.toolbar=new actuate.iv.ui.mobile.app.IVGlobalToolbar(this);}else{this.toolbar=new actuate.iv.ui.app.IVGlobalToolbar(this);}if(!this._isMobile){this._contextMenu=new actuate.iv.ui.contextmenu.IVContextMenu(this);}this.allowedFeatures={};this.uiConfig={};if(A){this.uiConfig.ShowToc=A.getShowToc();}this.fontOptions={};this.transientDocumentName=null;this.dialogSelections={};this._updateContainerSize();},__processTransientReportTimeout:function(){var E=this;var C;var B;var D=this.apiInstance.getReportDesign();this.hasTimedOut="transient";this.apiInstance.__reset();if(D&&D.length>0){B=actuate.Method.bind(this._rerunReport,this);C="promptDialog.transientReportTimeoutAskRerun";}else{if(!this.standalone){this.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,actuate.util.Utility.getLocalizedString("promptDialog.transientReportTimeout"));return ;}B=function(){window.close();};C="promptDialog.transientReportTimeoutAskClose";}var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.IVPromptDialog");A.setYesClickHandler(B);A.setNoClickHandler(null);A.processBind(this,actuate.util.Utility.getLocalizedString(C),null);},createCurrentViewUrl:function(A,F){var C=this.getRequestUrl().split("?");if(C.length<2){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Internal error: Invalid request URL");}var B=null;if(this.apiInstance._reportletMode){B=this.apiInstance._reportlet;}var K=new actuate.util.HashMap(C[1]);var J=this.apiInstance.getReportDesign();var H=this.apiInstance.getReportDocument();var I=actuate.util.Utility.isTransient(H);var L=J&&(!H||I);var E=this.getBaseUrl();var G=this.apiInstance.requestOptions;K.remove("connectionHandle");var D=false;if(F==true&&J){D=true;}if(H&&!D){E+="iv?";K.put("__report",H);}else{E+="executereport.do?";K.put("__executableName",J);K.put("__requesttype","immediate");K.put("closex","true");K.remove("__design");K.remove("__report");K.remove("connectionHandle");}if(B){K.put(actuate.iv.constant.urlParameter.FORMAT,"reportlet");K.put("__bookmark",B);}K.remove("viewerId");if(A){K.remove("userid");K.remove("password");K.remove(actuate.util.Constants.IPORTAL_SESSION_ID_KEY);}return E+K.toURI();},_rerunReport:function(){if(this.standalone){if(actuate.util.browser&&actuate.util.browser.useMobile()){window.location=this.getBaseUrl()+"mobile.html";}else{window.location=this.createCurrentViewUrl();}}else{var A=this;var B=this.apiInstance;actuate.authenticate(B._iportalUrl,B.requestOptions,null,null,null,function(){A.hasTimedOut=null;B.submit();});}},showReloginPromptDialog:function(B){if(!this.standalone&&this.notifySessionTimeout()){return ;}if(actuate.util.browser&&actuate.util.browser.isNativeApp()){window.location="error://message="+actuate.util.Utility.getLocalizedString("promptDialog.sessionTimeoutAskLogin")+"&action=setting";}else{if(B){this._rerunReport();return ;}var A=actuate.iv.core.ClassLoader.getInstance().forName("actuate.iv.ui.dialog.IVPromptDialog");A.setYesClickHandler(actuate.Method.bind(this._rerunReport,this));A.processBind(this,actuate.util.Utility.getLocalizedString("promptDialog.sessionTimeoutAskLogin"),null);}},triggerSessionTimeout:function(){actuate.iv.service.InteractiveViewer.superclass.triggerSessionTimeout.call(this);this.apiInstance.__reset();this.showReloginPromptDialog();},assertNotTimedOut:function(){if(this.hasTimedOut){if(this.hasTimedOut=="transient"){this.__processTransientReportTimeout();}else{this.showReloginPromptDialog();}return false;}return true;},getTable:function(B){var A=this._table.getTable(B);if(A==null){A=this._summarytable.getTable(B);}return A;},getChart:function(A){return this._chart.getChart(A);},getCrosstab:function(A){return this._crosstab.getCrosstab(A);},getFlashChart:function(A){return this._flashchart.getFlashChart(A);},getFlashGadget:function(A){return this._flashgadgets.getGadget(A);},getFlashObject:function(A){return this._flashobject.getObject(A);},getLabel:function(A){return this._label.getLabel(A);},getDataItem:function(A){return this._dataItem.getDataItem(A);},getTextItem:function(A){return this._label.getTextItem(A);},getSelectionManager:function(A){var B=this.getItemManager(A);return(B)?(B._selectionManager||B):null;},getItemManager:function(A){var C=actuate.Constant.element;var B=actuate.iv.service.InteractiveViewer;switch(A){case B.ELEMENT_TYPE_TABLE:case C.TABLE:return this._table;case B.ELEMENT_TYPE_SUMMARY_TABLE:case C.SUMMARYTABLE:return this._summarytable;case B.ELEMENT_TYPE_CHART:case C.CHART:return this._chart;case B.ELEMENT_TYPE_FLASHCHART:case C.FLASHCHART:case"FlashCharts":return this._flashchart;case B.ELEMENT_TYPE_FLASHGADGETS:case C.FLASHGADGET:return this._flashgadgets;case B.ELEMENT_TYPE_FLASHOBJECT:case C.FLASHOBJECT:return this._flashobject;case B.ELEMENT_TYPE_TEXT:case C.TEXT:case B.ELEMENT_TYPE_LABEL:case C.LABEL:return this._label;case B.ELEMENT_TYPE_DATAITEM:case C.DATAITEM:return this._dataItem;case B.ELEMENT_TYPE_CROSSTAB:case C.CROSSTAB:return this._crosstab;default:return null;}},__keydown:function(A){if(this.contentPanel){this.contentPanel.__keydown(A);}},__keyup:function(A){if(this.contentPanel){this.contentPanel.__keyup(A);}},updateFeatureMap:function(A){this.featureMap=A;this._updateFeature(this);},updateGlobalFeatures:function(A){this.featureMap=A;this.toolbar.updateUIOptions();this.navbar.updateUIOptions();if(!this._isMobile){this.contentPanel.updateUIOptions();}},setProgressiveViewing:function(A){if((this.progressiveViewing==true)&&(A==false)){this.progressiveViewing=A;this.notifyContentChanged();if(this.selectElementId){this._document.selectElement(this.selectElementId);delete this.selectElementId;}}this.progressiveViewing=A;},selectElement:function(A){this.setSelection(A,this.apiInstance.isPending());},setSelection:function(A){if(this.progressiveViewing){this.selectElementId=A;}else{this._document.selectElement(A,this.requestProgressOn||this.apiInstance._pendingElement);}if(this.toolbar&&this.toolbar.close){this.toolbar.close();}},localBind:function(C,B,D,A){if(B&&B.needParameterPanel==true){if(this._parameterPanel==null){this._parameterPanel=new actuate.iv.ui.view.IVParameter(this);}this._parameterPanel._beh_parameter();}if(B&&B.needFBCommentPanel==true){if(this._fbCommentPanel==null){this._fbCommentPanel=new actuate.iv.ui.view.IVFacebookComments(this);}this._fbCommentPanel._beh_parameter();}else{if(B["PageLayout"]){this.contentPanel.bind(B["PageLayout"]);}else{if(B.FeatureOptions){B.FeatureOptions.canDrill=B.CanDrill;this._bindLocalFeatures(C,B.FeatureOptions);}else{if(B["FontOptions"]){this.fontOptions=B["FontOptions"];}else{if(B["RedirectURL"]){this.triggerSessionTimeout();}else{if(B&&B.needTocPanel){this.uiConfig.ShowToc=true;}}}}}}if(B&&B.CanDrill){this._overlay.getChartOverlay().updateCanDrill(B.CanDrill);this._overlay.getFlashChartOverlay().updateCanDrill(B.CanDrill);}},processBind:function(F,E){if(!E||!E.firstChild){return ;}if("PageLayout"==E.firstChild.tagName){this.contentPanel.bind(E.firstChild);}else{if("FeatureOptions"==E.firstChild.tagName){var C=actuate.util.Utility.parseJson(E.firstChild);this._bindLocalFeatures(F,C);}else{if("AllowedFeatureOptions"==E.firstChild.tagName){this.allowedFeatures=actuate.util.Utility.parseJson(E.firstChild);}else{if("RedirectURL"==E.firstChild.tagName){this.triggerSessionTimeout();}}}}for(var D=1;D<E.childNodes.length;D++){if("FontOptions"==E.childNodes[D].tagName){this.fontOptions=actuate.util.Utility.parseJson(E.childNodes[D]);}else{if("Webxml"==E.childNodes[D].tagName){var A=actuate.util.Utility.parseJson(E.childNodes[D]);this.pageLimit=A.PageLimit;this.helpBase=A.HelpBase;this.facebookBaseUrl=A.FacebookBaseUrl;}else{if("CalculationFunctions"==E.childNodes[D].tagName){this.calculationFunctions=actuate.util.Utility.parseJson(E.childNodes[D]);}else{if("UIConfig"==E.childNodes[D].tagName){var B=actuate.util.Utility.parseJson(E.childNodes[D]);if(B.DefaultSavingFolder){this.uiConfig.DefaultSavingFolder=B.DefaultSavingFolder;}if(this.uiConfig.ShowToc==undefined&&B.ShowToc!=undefined){this.uiConfig.ShowToc=B.ShowToc;}if(this.uiConfig.ShowParameterPanel==undefined&&B.ShowParameterPanel!=undefined){this.uiConfig.ShowParameterPanel=B.ShowParameterPanel;}if(this.uiConfig.ShowFacebookCommentPanel==undefined&&B.ShowFacebookCommentPanel!=undefined){this.uiConfig.ShowFacebookCommentPanel=B.ShowFacebookCommentPanel;}if(this.uiConfig.DefaultPrintFormat==undefined&&B.DefaultPrintFormat!=undefined){this.uiConfig.DefaultPrintFormat=B.DefaultPrintFormat;}}}}}}},getReportContent:function(E,G,B){var A=null;if(E.pageRange){if(E.pageRange.indexOf(",")>-1){A=E.pageRange.split(",");}else{A=new Array(1);A[0]=E.pageRange;}for(var D=0;D<A.length;D++){if(A[D]!=null){A[D]=A[D].replace(/^\s*|\s*$/g,"");}var F=this._validatePageNumbers(A[D]);if(F!="valid"){if(B){B(F);}else{this.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,F);}return false;}}}if(E.format&&E.format!="html"&&E.format!="xhtml"){var F=actuate.util.Utility.getLocalizedString("error.getReportContent.format"," html "," xhtml");if(B){B(F);}else{this.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,F);}return false;}var C=new Object();C["data"]=E;C["callback"]=G;C["errorcallback"]=B;this.eventDispatcher.sendEvent(actuate.iv.core.iVEvent.__E_GET_REPORTCONTENT,C,false);},_validatePageNumbers:function(B){var C=this.totalPage;var A=null;var F=false;var G="valid";if(B.indexOf("-")>-1){A=B.split("-");if(A.length>2){G=actuate.util.Utility.getLocalizedString("error.printDialog.oneDashInRange");return G;}F=true;}else{A=new Array(1);A[0]=B;}for(var D=0;D<A.length;D++){if(A[D]!=null){A[D]=A[D].replace(/^\s*|\s*$/g,"");}if(!isFinite(A[D]*1)||Math.floor(A[D])!=A[D]){G=actuate.util.Utility.getLocalizedString("error.printDialog.pageNumberPositiveInteger");return G;}else{if(A[D]*1<1*1||(C!=null&&A[D]*1>C*1)){var E=actuate.util.Utility.getLocalizedString("error.printDialog.invalidPageRange");C=C.replace(/^\s*|\s*$/g,"");E=E.replace("variable1",1);E=E.replace("variable2",C);return E;}}}if(F){if(A[0]*1>A[1]*1){G=actuate.util.Utility.getLocalizedString("error.printDialog.reversePageRange")+" ("+B+")";return G;}}return G;},processAction:function(B,A){if(!this.interactive&&"Enable"==A){this.interactive=true;this.navbar.processAction(this,A);this._document.processAction(this,A);this.notifyContentChanged();}else{if(this.interactive&&"Close"==A){this.interactive=false;this.transientDocumentName=null;this.navbar.processAction(this,A);this._document.processAction(this,A);this.notifyContentChanged();}}},_bindLocalFeatures:function(B,A){if(this._isMobile){this.navbar._showCtxShortcuts(true,A);}if(!this._isMobile){this._contextMenu.localBind(B,A);}this._chart._selectionManager.updateFlashContextMenu(A);this._flashchart._selectionManager.updateFlashContextMenu(A);this._flashgadgets._selectionManager.updateFlashContextMenu(A);this._flashobject._selectionManager.updateFlashContextMenu(A);this.contentPanel.updateUIOptions();this._overlay.getTableOverlay().localBind(A);this._overlay.getDataItemOverlay().localBind(A);this._overlay.getChartOverlay().localBind(A);this._overlay.getFlashChartOverlay().localBind(A);this._overlay.getLabelOverlay().localBind(A);this._overlay.getCrosstabOverlay().localBind(A);this.toolbar.SetupFeatureOptions(A);this.toolbar.updateUIOptions();this.navbar.updateUIOptions();},_updateFeature:function(A){this.updateGlobalFeatures(A.featureMap);if(!this._isMobile){this._contextMenu.hideMenu(A);}this._overlay.getDataItemOverlay().updateUIOptions();this._overlay.getTableOverlay().updateUIOptions();this._overlay.getLabelOverlay().updateUIOptions();this._overlay.getChartOverlay().updateUIOptions();this._overlay.getFlashChartOverlay().updateUIOptions();this._overlay.getCrosstabOverlay().updateUIOptions();if(this.eventDispatcher){this.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_BLUR);}},isTocVisible:function(){return this.tocPanel&&this.tocPanel.isVisible();},notifyContentChanged:function(){this.apiInstance.__contentChanged();},notifySessionTimeout:function(){var A=this.apiInstance._getEventHandlers(actuate.viewer.impl.EventConstants.ON_SESSION_TIMEOUT);if(A&&A.length>0){this.apiInstance.__sessionTimeout();return true;}else{return false;}},notifyException:function(C,A){var F={};var D=C.getElementsByTagName("faultcode");if(D.length>0){var B=D[0].firstChild.data;if(B){F.errCode=B.replace(/soapenv:/,"");}}var E=C.getElementsByTagName("faultstring");if(E.length>0){F.message=E[0].firstChild.data;}this.apiInstance._exceptionHandler(F);},notifySelection:function(E,C){var D=this.apiInstance._getEventHandlers(actuate.viewer.impl.EventConstants.ON_CONTENT_SELECTED);if(!D||D.length==0){return ;}var A={};A.elementName=E.getAttribute("id");var B=E.getAttribute("element_type");if(B){if(actuate.Constant.element.TABLE==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_TABLE;A.columnIndex=C;}else{if(actuate.Constant.element.SUMMARYTABLE==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_SUMMARY_TABLE;A.columnIndex=C;}else{if(this._HTML_ELEMENT_TYPE_CHART==B||this._HTML_ELEMENT_TYPE_FLASHCHART==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_CHART;}else{if(this._HTML_ELEMENT_TYPE_FLASHGADGET==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_FLASHGADGETS;}else{if(this._HTML_ELEMENT_TYPE_FLASHOBJECT==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_FLASHOBJECT;}else{if(this._HTML_ELEMENT_TYPE_DATAITEM==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_DATAITEM;}else{if(this._HTML_ELEMENT_TYPE_LABEL==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_LABEL;}else{if(this._HTML_ELEMENT_TYPE_TEXT==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_TEXT;}else{if(this._HTML_ELEMENT_TYPE_CROSSTAB==B){A.elementType=actuate.iv.service.InteractiveViewer.ELEMENT_TYPE_CROSSTAB;}}}}}}}}}this.apiInstance.__contentSelected(A);}},getConnectionHandle:function(){return this.connectionHandle||this.apiInstance.requestOptions.__getCustomParameters()["connectionHandle"];},getTransientReportDocument:function(){if(this.transientDocumentName){return this.transientDocumentName;}else{if(this.apiInstance._reportDocument){return this.apiInstance._reportDocument;}else{return null;}}},showProgressIndicator:function(B){var A=actuate.viewer.impl.Constants.PREFIX_CONTAINER_NAME+this.apiInstance._id;this._progressIndicator=actuate.util.Utility.showProgressIndicator(this._progressIndicator,A,this.apiInstance._iportalUrl,this.width?this.width:this.clientWidth,this.height?this.height:this.clientHeight);if(B){B();}},hideProgressIndicator:function(A){actuate.util.Utility.hideProgressIndicator(this._progressIndicator);if(A){A();}},_updateContainerSize:function(){if(!this.container){return ;}if(!this.width||this.width=="0"||!this.height||this.height=="0"){var A=actuate.util.Element.cumulativeOffset(this.container);if(!this.width||this.width=="0"){if(this.standalone){this.width=this.clientWidth-A[0];}else{this.width=800;}}if(!this.height||this.height=="0"){if(this.standalone){this.height=this.clientHeight-A[1];}else{this.height=500;}}}this.container.style.width=this.width+"px";this.container.style.height=this.height+"px";},getOperatorByEvent:function(A){return actuate.iv.core.iVOperation[A];},refresh:function(){if(this.cancelIndicator){this.cancelIndicator._hideCancelFailedMsg();this.cancelIndicator._hideTimeoutMsg();}if(this.navbar){this.navbar._positionHandle();}if(this._overlay){this._overlay.reset();}this.contentPanel.refresh();},isBRSEnabled:function(){return this._BRSEnabled;},setBRSEnabled:function(A){this._BRSEnabled=A;}});actuate.util.Package.define("actuate.iv");actuate.iv.service.DataService=actuate.Class.extendClass(actuate.common.Service,{_scriptAPI:null,initialize:function(B,A){this.maxChannel=5;actuate.iv.service.DataService.superclass.initialize.call(this,B,A);this.eventDispatcher=new actuate.iv.core.IVEventDispatcher(this);this._scriptAPI=new actuate.iv.ui.report.IVScriptAPI(this);},processBind:function(E,D,B,F,A){if(F){if(D.resultSetData){var C=new actuate.iv.data.IVResultSetData(D.resultSetData);F(C.getConvertedRows(),C.getColumnNames(),A);}else{F(new Array(),new Array(),A);}}},notifyException:function(E,B){var D="";var F="";var C=E.getElementsByTagName("faultstring");if(C&&C[0]&&C[0].firstChild){D=C[0].firstChild.data;}var A=E.getElementsByTagName("string");if(C&&A[0]&&A[0].firstChild){F=A[0].firstChild.data;}if(B){B(new actuate.Exception(D,F));}},downloadResultSet:function(C,D,A){var B=new Object();B["data"]=C;B["callback"]=D;B["errorcallback"]=A;this.eventDispatcher.sendEvent(actuate.iv.core.iVEvent.__E_DOWNLOAD_RESULTSET,B,false);}});actuate.util.Package.define("actuate.iv.request");actuate.iv.request.IVMetadataQueries={__E_START_UP:{preProcess:function(){this._service.dialogSelections={};},postProcess:function(){var C=this._service.allowedFeatures[this._service.apiInstance._viewingMode];var D=new Array();if(this._service.uiConfig.ShowToc&&C&&C.Toc){var E=function(G){this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_TOC,null,G);};D.push(actuate.Method.bind(E,this));}if(this._service.uiConfig.ShowFacebookCommentPanel){var B=function(H){var G={};G.cache={};G.cache.needFBCommentPanel=true;this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_FACEBOOK_COMMENTS,G,H);return true;};D.push(actuate.Method.bind(B,this));}if(this._service.uiConfig.ShowParameterPanel){var A=function(H){var G={};G.cache={};G.cache.needParameterPanel=true;this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_QUERY_PARAMETER,G,H);return true;};D.push(actuate.Method.bind(A,this));}if(C&&C.AutoEnableIV){var F=function(G){this._service.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_ENABLE_IV,null,G);};D.push(actuate.Method.bind(F,this));}actuate.util.Utility.chainCallbacksArray(D,null);}},__E_ENABLE_IV:{},__E_DISABLE_IV:{invalidateMdType:actuate.model.Constant.MetadataType.ALL},__E_UNDO:{invalidateMdType:actuate.model.Constant.MetadataType.ALL,mdType:[],changesReportDesignItems:true},__E_REDO:"__E_UNDO",__E_BATCH_UPDATE:"__E_UNDO",__E_SORTASC:{invalidateMdType:actuate.model.Constant.MetadataType.SORT,invalidateMdType_DATAITEM:actuate.model.Constant.MetadataType.GROUP,useSelected:true},__E_SORTDESC:"__E_SORTASC",__E_SELECTED:{mdType:actuate.model.Constant.MetadataType.BASE,mdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.SORT,actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.BASE],mdType_TABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.SORT,actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.BASE],mdType_CHART:[actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FORMAT,actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.FILTER],mdType_FLASHCHART:[actuate.model.Constant.MetadataType.CATEGORIES,actuate.model.Constant.MetadataType.SERIES,actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FILTER],mdType_FLASHGADGET:[actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FILTER],mdType_HTML5GADGET:[actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FILTER],mdType_FLASHOBJECT:[actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_DATAITEM:[actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.GROUP],mdType_CROSSTAB:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.STYLE,actuate.model.Constant.MetadataType.COLUMN_DEF],target:"InteractiveViewer",useSelected:true,useSelectedColumn:true,postProcessMetadataResponse:function(B){var A=this._service.getSelectionManager(this._elementType);if(A.getFeatures){B["FeatureOptions"]=actuate.iv.utility.ivUtility.intersectBoolMap(A.getFeatures(this._currentElement,B.selectedElement),this._service.allowedFeatures[this._service.apiInstance._viewingMode]);}if(this._elementType==actuate.Constant.element.CROSSTAB){this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_SHOW_TOOLTIP);}else{var C=this._service.getSelectionManager(actuate.Constant.element.CROSSTAB);if(C&&C.tooltipDiv&&(!C.tooltipDiv.hidden)){C.tooltipDiv.hide();}}return true;}},__E_GET_AVAILABLE_DATA_ITEMS:{mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING],target:"actuate.iv.ui.dialog.IVAvailableDataItemDialog",useSelected:true,useSelectedColumn:true,postProcessMetadataResponse:function(B){if(this._elementType==actuate.Constant.element.TABLE||this._elementType==actuate.Constant.element.SUMMARYTABLE){var A=this._service.getSelectionManager(this._elementType);B.columnIid=A.getSelectedColumnIIds()[0];}B.operation=this._operationData.operation;return true;}},__E_GET_AVAILABLE_DATA_TYPES:{mdType:null,target:"actuate.iv.ui.dialog.column.IVColumnDataTypeDialog",useSelectedBinding:true,postProcessMetadataResponse:function(B){if(this._elementType==actuate.Constant.element.TABLE){var A=this._service.getSelectionManager(this._elementType);B.columnIid=A.getSelectedColumnIIds()[0];}B.operation=this._operationData.operation;B.dataType=this._operationData.dataType;return true;}},__E_SORTADVANCED:{mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.SORT],target:"actuate.iv.ui.dialog.IVAdvancedSortDialog",useSelected:true},__E_APPLY_ADVANCED_SORT:{invalidateMdType:actuate.model.Constant.MetadataType.SORT,useSelected:true},__E_FILTER:{mdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_TABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.DATA_ITEM],mdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],useSelectedBinding:true,needsDataType:true,preProcess:function(){if(this._elementType==actuate.Constant.element.TABLE||this._elementType==actuate.Constant.element.SUMMARYTABLE){var A=this._service.getSelectionManager(this._elementType);if(A.getSelectedColumnIIds){var B=A.getSelectedColumnIIds()[0];var D=this._currentElement.columnsMap[B].getBindings();if(D.length<1){return"__E_ADVANCEDFILTERDIALOG";}}}var C=this._currentElement.getMetadata(actuate.model.Constant.MetadataType.FILTER);if(C&&C.isAdvancedFilter){return"__E_ADVANCEDFILTERDIALOG";}},target:function(){if(this._currentElement.type==actuate.Constant.element.CHART||this._currentElement.type==actuate.Constant.element.FLASHCHART||this._currentElement.type==actuate.Constant.element.FLASHGADGET||this._currentElement.type==actuate.Constant.element.HTML5GADGET||this._currentElement.type==actuate.Constant.element.FLASHOBJECT){return"actuate.dialog.ChartFilterDialog";}else{return"actuate.dialog.SelectedFilterDialog";}},postProcessMetadataResponse:function(C,B){var A=C[actuate.model.Constant.MetadataType.FILTER];if(A&&A.isAdvancedFilter){B.target="actuate.dialog.AdvancedFilterDialog";B.needsDataType=false;}return true;}},__E_APPLYFILTER:{invalidateMdType:[actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.CATEGORIES,actuate.model.Constant.MetadataType.SERIES],useSelected:true,changesReportLayout:true},__E_CLEARFILTER:"__E_APPLYFILTER",__E_DRILLUP_FROM_CATEGORIES:{reselect:true,invalidateMdType:[actuate.model.Constant.MetadataType.CATEGORIES,actuate.model.Constant.MetadataType.SERIES,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.CAN_DRILL,actuate.model.Constant.MetadataType.FILTER,actuate.model.Constant.MetadataType.XAXISSERIES,actuate.model.Constant.MetadataType.YAXISSERIES],useSelected:true,mdType:[actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.CAN_DRILL]},__E_DRILLUP_FROM_SERIES:"__E_DRILLUP_FROM_CATEGORIES",__E_DRILLDOWN_FROM_CATEGORIES:"__E_DRILLUP_FROM_CATEGORIES",__E_DRILLDOWN_FROM_SERIES:"__E_DRILLUP_FROM_CATEGORIES",__E_CHART_CATEGORIES:{useSelected:true,target:function(){return"actuate.dialog.ChartCategoriesDialog";},postProcessMetadataResponse:function(C,B){var A=actuate.model.Constant.MetadataType.CATEGORIES;C[A]=this._currentElement[A];return true;}},__E_CHART_SERIES:{useSelected:true,target:function(){return"actuate.dialog.ChartSeriesDialog";},postProcessMetadataResponse:function(C,B){var A=actuate.model.Constant.MetadataType.SERIES;C[A]=this._currentElement[A];return true;}},__E_TOPBOTTOMN:{mdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_TABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],target:"actuate.dialog.TopBottomNDialog",useSelectedBinding:true},__E_CLEARTOPBOTTOMN:"__E_APPLYFILTER",__E_APPLYTOPBOTTOMN:"__E_APPLYFILTER",__E_ADVANCEDFILTERDIALOG:{mdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_TABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],mdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FILTER],target:"actuate.dialog.AdvancedFilterDialog",useSelected:true},__E_APPLYADVANCEDFILTER:"__E_APPLYFILTER",__E_HIDESHOW_ITEM:{mdType:actuate.model.Constant.MetadataType.REPORT_ITEMS,target:"actuate.iv.ui.dialog.group.IVHideShowItemDialog",useSelected:false},__E_APPLYHIDESHOW_ITEM:{invalidateMdType:actuate.model.Constant.MetadataType.REPORT_ITEMS},__E_QUERY_MANAGETABLECOLUMN:{mdType:actuate.model.Constant.MetadataType.COLUMN_DEF,useSelected:true,target:"actuate.iv.ui.dialog.column.IVArrangeColumnDialog",postProcessMetadataResponse:function(C,B){if(this._currentElement.type==actuate.Constant.element.TABLE){var A=this._service.getSelectionManager(this._currentElement.type);C.columnIid=A.getSelectedColumnIIds()[0];}return true;}},__E_QUERY_HIDDEN_COLUMN:{mdType:actuate.model.Constant.MetadataType.COLUMN_DEF,useSelected:true,target:"actuate.iv.ui.dialog.column.IVShowColumnDialog"},__E_FLASHGADGET_FORMAT:{mdType:actuate.model.Constant.MetadataType.FORMAT,useSelected:true,target:"actuate.dialog.FlashGadgetFormatDialog"},__E_SHARE_STYLE:{mdType:actuate.model.Constant.MetadataType.COLUMN_DEF,useSelected:true,target:"actuate.dialog.ColumnListDialog",postProcessMetadataResponse:function(C,B){if(this._currentElement.type==actuate.Constant.element.TABLE){var A=this._service.getSelectionManager(this._currentElement.type);C.columnIid=A.getSelectedColumnIIds()[0];}return true;}},__E_SHARE_FORMAT:{mdType:actuate.model.Constant.MetadataType.DATA_FORMAT,useSelected:true,target:"actuate.dialog.ColumnListDialog",postProcessMetadataResponse:function(C,B){if(this._currentElement.type==actuate.Constant.element.TABLE){var A=this._service.getSelectionManager(this._currentElement.type);C.columnIid=A.getSelectedColumnIIds()[0];}return true;}},__E_HIDE_COLUMN:{invalidateMdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.STYLE],invalidateMdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.STYLE,actuate.model.Constant.MetadataType.AGGREGATIONS],useSelected:true},__E_SHOW_COLUMN:"__E_HIDE_COLUMN",__E_REORDERCOLUMN:"__E_HIDE_COLUMN",__E_SWAPCOLUMNS:"__E_HIDE_COLUMN",__E_MOVE_COLUMN:"__E_HIDE_COLUMN",__E_REPEAT_VALUE:"__E_HIDE_COLUMN",__E_NO_REPEAT_VALUE:"__E_HIDE_COLUMN",__E_MOVE_TO_LEFT:"__E_HIDE_COLUMN",__E_MOVE_TO_RIGHT:"__E_HIDE_COLUMN",__E_APPLY_FLASHGADGET_FORMAT:{invalidateMdType:actuate.model.Constant.MetadataType.FORMAT,useSelected:true},__E_COLUMN_LIST:{invalidateMdType:actuate.model.Constant.MetadataType.STYLE,useSelected:true},__E_APPLY_FORMATSHARING:{invalidateMdType:actuate.model.Constant.MetadataType.DATA_FORMAT,useSelected:true},__E_DELETE_COLUMN:{invalidateMdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.STYLE,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.AGGREGATIONS],invalidateMdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.ALL],useSelected:true,changesReportDesignItems:true},__E_QUERY_GROUP:{mdType:actuate.model.Constant.MetadataType.GROUP,useSelectedSubElement:true,target:"actuate.iv.ui.dialog.column.IVMoveToGroupDialog"},__E_ADD_GROUP:{invalidateMdType:[actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.SORT,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.STYLE],changesReportDesignItems:true,useSelected:true},__E_UPDATE_GROUP:"__E_ADD_GROUP",__E_MOVE_TO_GROUP:"__E_ADD_GROUP",__E_DELETE_GROUP:{invalidateMdType:[actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.AGGREGATIONS,actuate.model.Constant.MetadataType.SORT,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_FORMAT],changesReportDesignItems:true,useSelected:true},__E_VALUE_DIALOG:{mdType:actuate.model.Constant.MetadataType.BINDING,useSelected:true,target:"actuate.iv.ui.dialog.style.ivValueDialog"},__E_QUERY_FONT:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_TABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],mdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],useSelectedSubElement:true,target:"actuate.dialog.FontDialog",postProcessMetadataResponse:function(A){if(A.selectedElement){A.style=A.selectedElement.style;}if(!A.style&&A.selectedColumn){A.style=A.selectedColumn.style;}return true;},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_QUERY_GRANDTOTAL_LABEL_FONT:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],useSelectedSubElement:true,total:"GrandTotal",targetType:"label",target:"actuate.dialog.FontDialog",postProcessMetadataResponse:function(A){A.style=A.selectedElement.style;A.total="GrandTotal";A.target="label";return true;},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_QUERY_GRANDTOTAL_DATA_FONT:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],total:"GrandTotal",targetType:"data",useSelectedSubElement:true,target:"actuate.dialog.FontDialog",postProcessMetadataResponse:function(A){A.style=A.selectedElement.style;A.total="GrandTotal";A.target="data";return true;},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_QUERY_SUBTOTAL_LABEL_FONT:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],useSelectedSubElement:true,target:"actuate.dialog.FontDialog",total:"SubTotal",targetType:"label",postProcessMetadataResponse:function(A){A.style=A.selectedElement.style;A.total="SubTotal";A.target="label";return true;},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_QUERY_SUBTOTAL_DATA_FONT:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],useSelectedSubElement:true,target:"actuate.dialog.FontDialog",total:"SubTotal",targetType:"data",postProcessMetadataResponse:function(A){A.style=A.selectedElement.style;A.total="SubTotal";A.target="data";return true;},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_SHOW_TOOLTIP:{mdType:actuate.model.Constant.MetadataType.STYLE,mdType_TABLE:[],mdType_SUMMARYTABLE:[],mdType_CROSSTAB:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],useSelectedSubElement:true,target:function(A){ivCrosstabSelectionManager=this._service._crosstab._selectionManager;ivCrosstabSelectionManager.showTooltip(A);},postProcessMetadataResponse:function(A){if(A.selectedElement){A.style=A.selectedElement.style;}else{if(A.selectedColumn){A.style=A.selectedColumn.style;}}return true;}},__E_QUERY_HEADER_FONT:{mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.STYLE],useSelectedColumn:true,target:"actuate.dialog.FontDialog",postProcessMetadataResponse:function(B){if(this._elementType==actuate.Constant.element.TABLE||this._elementType==actuate.Constant.element.SUMMARYTABLE){var A=this._service.getSelectionManager(this._elementType);B.columnIid=A.getSelectedColumnIIds()[0];B.style=this._currentElement.columnsMap[B.columnIid].headerStyle;B.columnHeaderMode=true;}else{B.style=this._currentElement.style;}},showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FONT_DIALOG"}],function(){var C=actuate.dialog.FontDialog.getInstance();C.setConsumer(A);C.show(null,B);});}},__E_SET_FONT:{invalidateMdType:actuate.model.Constant.MetadataType.STYLE,useSelected:true},__E_SET_GRANDTOTAL_LABEL_FONT:"__E_SET_FONT",__E_SET_GRANDTOTAL_DATA_FONT:"__E_SET_FONT",__E_SET_SUBTOTAL_LABEL_FONT:"__E_SET_FONT",__E_SET_SUBTOTAL_DATA_FONT:"__E_SET_FONT",__E_SET_GRANDTOTAL_LABEL_FONT:"__E_SET_FONT",__E_SET_LABEL_FONT:"__E_SET_FONT",__E_CALCULATION:{mdType:[actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.BINDING],useSelected:true,target:"actuate.dialog.CalculationDialog",showDialog:function(C,B){var A=actuate.dialog.CalculationDialog.getInstance();A.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,function(E,G){var H=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Json);H.documentElement.appendChild(D);var F=H.createTextNode(G);D.appendChild(F);E.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_NEW_COM_COL,H);});if(B&&B._helper){A.setFunctions(B._helper.calculationFunctions);}A.setColumnBindings(C.Binding);A.setGroups(C.Group);A.setSelectedColumn(C.selectedColumn);A.setConsumer(B);A.show();}},__E_APPLY_COLUMN_WIDTH:{postProcess:function(){this._service.contentPanel.updateUIOptions();}},__E_EDIT_CALCULATION:{mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.BINDING],useSelectedBinding:true,target:"actuate.dialog.CalculationDialog",showDialog:function(C,B){var A=actuate.dialog.CalculationDialog.getInstance();A.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,function(E,G){var H=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var D=actuate.util.XmlDom.createElement(H,actuate.Constant.tag.Json);H.documentElement.appendChild(D);var F=H.createTextNode(G);D.appendChild(F);E.getConsumer()._eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_APPLY_NEW_COM_COL,H);});if(B&&B._helper){A.setFunctions(B._helper.calculationFunctions);}A.setColumnBindings(C.Binding);A.setGroups(C.Group);A.setSelectedColumn(C.selectedColumn);A.setConsumer(B);A.show();}},__E_APPLY_NEW_COM_COL:{invalidateMdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.RESULT_SET,actuate.model.Constant.MetadataType.STYLE,actuate.model.Constant.MetadataType.DATA_FORMAT,actuate.model.Constant.MetadataType.AGGREGATIONS],mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.STYLE],changesReportDesignItems:true,useSelected:true},__E_EDIT_COM_COL:{invalidateMdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING],useSelected:true},__E_AGGREGATION:{invalidateMdType:[actuate.model.Constant.MetadataType.AGGREGATIONS],mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.AGGREGATIONS],allowMultipleSelection:true,useSelectedBinding:true,target:function(G){var E=null;var D=this._service._table.getSelectionManager().getSelectedIId();var C=this._service.documentModel.getElementByIId(D);var H=this._service._table.getSelectionManager().getSelectedColumnIIds();var F=[];var A=[];var I=true;if(H.length>1){for(var B=0;B<H.length;B++){F[B]=C.columnsMap[H[B]];A[B]=F[B].getBinding();}compareAggregation=function(J){var K=[];for(var M=0;M<J.length;M++){if(M!=0&&A[M].dataType!=A[0].dataType){if(actuate.util.Utility.isNumericalType(A[M].dataType)&&actuate.util.Utility.isNumericalType(A[0].dataType)){return true;}else{return false;}}if(!G.Aggregations[A[M].name]){K[A[M].name]=[];}else{K[A[M].name]=G.Aggregations[A[M].name];}if(M!=0&&K[A[M].name].length!=K[A[0].name].length){return false;}for(var L=0;L<K[A[M].name].length;L++){if(M!=0&&!K[A[0].name][L].equal(K[A[M].name][L])){return false;}}}return true;};I=compareAggregation(F);if(I){E="actuate.iv.ui.dialog.aggregation.IVColumnAggregationDialog";}else{E="actuate.iv.ui.dialog.aggregation.IVAggregationAccordionDialog";}}else{E="actuate.iv.ui.dialog.aggregation.IVColumnAggregationDialog";}return E;}},__E_SETCOLUMNAGGREGATION:{invalidateMdType:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.AGGREGATIONS,actuate.model.Constant.MetadataType.DATA_FORMAT,actuate.model.Constant.MetadataType.GROUP,actuate.model.Constant.MetadataType.RESULT_SET],mdType:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.AGGREGATIONS],useSelected:true,changesReportDesignItems:true},__E_QUERY_FORMAT:{mdType:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_FORMAT],mdType_DATAITEM:[actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_FORMAT],useSelectedBinding:true,needsDataType:true,target:function(E){var F=null;var B=actuate.Constant.DataType;var A=E.selectedBinding&&E.selectedBinding.dataType;switch(A){case B.BOOLEAN:F="actuate.dialog.format.BooleanFormattingDialog";break;case B.DATETIME:F="actuate.dialog.format.DateTimeFormattingDialog";break;case B.DATE:F="actuate.dialog.format.DateFormattingDialog";break;case B.TIME:F="actuate.dialog.format.TimeFormattingDialog";break;case B.DECIMAL:case B.FLOAT:case B.INTEGER:F="actuate.dialog.format.NumberFormattingDialog";break;case B.STRING:default:F="actuate.dialog.format.StringFormattingDialog";}var D=actuate.iv.core.ClassLoader.getInstance().getHandler(this._service,F);if(!D&&!(E.operation&&E.operation.redirected)){var C=E.operation||{};C.redirected=true;this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_QUERY_FORMAT,E.operation);return null;}return D;}},__E_QUERY_GRANDTOTAL_DATA_FORMAT:{mdType:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_FORMAT],useSelectedBinding:true,needsDataType:true,total:"GrandTotal",targetType:"data",target:function(E){target=null;targetMd=E.selectedElement;E.total="GrandTotal";E.targetMd=targetMd;var B=actuate.Constant.DataType;var A=targetMd.binding&&targetMd.binding.dataType;switch(A){case B.BOOLEAN:target="actuate.dialog.format.BooleanFormattingDialog";break;case B.DATETIME:target="actuate.dialog.format.DateTimeFormattingDialog";break;case B.DATE:target="actuate.dialog.format.DateFormattingDialog";break;case B.TIME:target="actuate.dialog.format.TimeFormattingDialog";break;case B.DECIMAL:case B.FLOAT:case B.INTEGER:target="actuate.dialog.format.NumberFormattingDialog";break;case B.STRING:default:target="actuate.dialog.format.StringFormattingDialog";}var D=actuate.iv.core.ClassLoader.getInstance().getHandler(this._service,target);if(!D&&!(E.operation&&E.operation.redirected)){var C=E.operation||{};C.redirected=true;this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_QUERY_GRANDTOTAL_DATA_FORMAT,E.operation);return null;}return D;}},__E_QUERY_SUBTOTAL_DATA_FORMAT:{mdType:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.DATA_FORMAT],useSelectedBinding:true,needsDataType:true,total:"SubTotal",targetType:"data",target:function(E){F=null;targetMd=E.selectedElement;var F=null;E.total="SubTotal";E.targetMd=targetMd;var B=actuate.Constant.DataType;var A=targetMd.binding&&targetMd.binding.dataType;switch(A){case B.BOOLEAN:F="actuate.dialog.format.BooleanFormattingDialog";break;case B.DATETIME:F="actuate.dialog.format.DateTimeFormattingDialog";break;case B.DATE:F="actuate.dialog.format.DateFormattingDialog";break;case B.TIME:F="actuate.dialog.format.TimeFormattingDialog";break;case B.DECIMAL:case B.FLOAT:case B.INTEGER:F="actuate.dialog.format.NumberFormattingDialog";break;case B.STRING:default:F="actuate.dialog.format.StringFormattingDialog";}var D=actuate.iv.core.ClassLoader.getInstance().getHandler(this._service,F);if(!D&&!(E.operation&&E.operation.redirected)){var C=E.operation||{};C.redirected=true;this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_QUERY_SUBTOTAL_DATA_FORMAT,E.operation);return null;}return D;}},__E_APPLY_FORMAT:{invalidateMdType:[actuate.model.Constant.MetadataType.DATA_FORMAT],useSelected:true},__E_APPLY_SUBTOTAL_DATA_FORMAT:{invalidateMdType:[actuate.model.Constant.MetadataType.DATA_FORMAT],total:"SubTotal",useSelected:true},__E_APPLY_GRANDTOTAL_DATA_FORMAT:{invalidateMdType:[actuate.model.Constant.MetadataType.DATA_FORMAT],total:"GrandTotal",useSelected:true},__E_QUERYTYPE:{mdType:actuate.model.Constant.MetadataType.BASE,useSelected:true,target:function(){if(this._currentElement.type==actuate.Constant.element.FLASHGADGET){return"actuate.iv.ui.dialog.chart.IVFlashGadgetTypeDialog";}else{return"actuate.iv.ui.dialog.chart.IVChartSubTypeDialog";}}},__E_APPLYTYPE:{invalidateMdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FORMAT,],useSelected:true},__E_CHART_FORMAT:{mdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FORMAT],useSelected:true,target:"actuate.iv.ui.dialog.chart.IVChartFormatDialog"},__E_APPLYCHARTFORMAT:{invalidateMdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FORMAT],useSelected:true},__E_APPLYCHARTSIZE:{invalidateMdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.FORMAT],useSelected:true},__E_CONDITIONALFORMATTING:{mdType:[actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.FORMAT_RULES],useSelectedBinding:true,target:"actuate.iv.ui.dialog.style.IVConditionalFormattingDialog"},__E_APPLY_FORMAT_RULE:{invalidateMdType:actuate.model.Constant.MetadataType.FORMAT_RULES,useSelected:true},__E_QUERY_PAGE_BREAK:{mdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.COLUMN_DEF,actuate.model.Constant.MetadataType.GROUP],useSelectedColumn:true,target:"actuate.iv.ui.dialog.IVPageBreakDialog"},__E_UPDATE_PAGE_BREAK:{invalidateMdType:[actuate.model.Constant.MetadataType.BASE,actuate.model.Constant.MetadataType.GROUP],useSelected:true,changesReportLayout:true},__E_QUERY_GROUP_DETAIL:{mdType:[actuate.model.Constant.MetadataType.BINDING,actuate.model.Constant.MetadataType.COLUMN_DEF],useSelectedBinding:true,needsDataType:true,postProcessMetadataResponse:function(G){var D=actuate.Constant.DataType;var B=G.selectedBinding.dataType;if(B!=D.DATETIME&&B!=D.DATE&&B!=D.TIME){var E={dataItemId:G.selectedElement.iid};var A=this._service.getSelectionManager(this._currentElement.type);var C=A.getSelectedColumnIIds()[0];var F=this._currentElement.columnsMap[C];if(F.isMergedColumn){this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_ADD_GROUP,E);}else{this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_ADD_GROUP,null);}return false;}},target:"actuate.iv.ui.dialog.group.IVGroupDetailDialog"},__E_HIDEDETAIL:{invalidateMdType_TABLE:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.GROUP,],invalidateMdType_SUMMARYTABLE:[actuate.model.Constant.MetadataType.DATA_ITEM,actuate.model.Constant.MetadataType.GROUP,],invalidateMdType_DATAITEM:actuate.model.Constant.MetadataType.GROUP,useSelected:true,changesReportLayout:true},__E_SHOWDETAIL:"__E_HIDEDETAIL",__E_QUERY_EXPORT:{mdType:[actuate.model.Constant.MetadataType.RESULT_SET],useSelected:true,target:"actuate.iv.ui.dialog.IVSimpleExportDataDialog"},__E_QUERY_DOCUMENT_EXPORT:{mdType:[actuate.model.Constant.MetadataType.RESULT_SET],useSelected:false,target:"actuate.iv.ui.dialog.IVSimpleExportDataDialog"},__E_SWITCH_VIEW:{mdType:[],preProcess:function(){this._service.documentModel.removeItem(this._currentElement);},changesReportDesignItems:true,useSelected:true},__E_RUN_REPORT:{mdType:[],preProcess:function(){this._service.documentModel.clear();this._service.dialogSelections={};},changesReportDesignItems:true},__E_DATA_ANALYZER:{mdType:actuate.model.Constant.MetadataType.BASE,useSelected:true,target:"actuate.iv.ui.dialog.IVDataAnalyzerDialog",postProcessMetadataResponse:function(A){var B=this._service.getSelectionManager(actuate.Constant.element.CROSSTAB);A[actuate.model.Constant.MetadataType.ELEMENT].showAnalyzerCubeView=B._showAnalyzerCubeView;A[actuate.model.Constant.MetadataType.ELEMENT].showAnalyzerFilterView=B._showAnalyzerFilterView;A[actuate.model.Constant.MetadataType.ELEMENT].showAnalyzerCrosstabView=B._showAnalyzerCrosstabView;if(B&&B.tooltipDiv&&(!B.tooltipDiv.hidden)){B.tooltipDiv.hide();}}},__E_APPLY_DATA_ANALYZER:{preProcess:function(){this._service.documentModel.removeItem(this._currentElement);},target:function(){var A;var B={};if(this._service.apiInstance._reportlet){B[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=this._service.apiInstance._reportlet;A=actuate.iv.core.IVEvent.__E_GETREPORTLET;}else{A=actuate.iv.core.IVEvent.__E_GETPAGE;}this._service.eventDispatcher.broadcastEvent(A,{data:B});return null;},changesReportDesignItems:true,useSelected:true},__E_QUERY_SAVE_FILE:{target:"actuate.dialog.FilePickerDialog",showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FILEPICKER_DIALOG"}],function(){var C=A;var D=actuate.dialog.FilePickerDialog.getInstance();D.setFileFilters([{"filter":"*.rptdesign","description":actuate.util.Utility.getLocalizedString("filePickerDialog.FileTypeDescription.rptDesign")},{"filter":"*.rptdocument","description":actuate.util.Utility.getLocalizedString("filePickerDialog.FileTypeDescription.rptDocument")}]);D.setDialogType(D.SAVE_DIALOG);D.setConsumer(C);D.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,function(H,E){if(C&&C._helper){var J=E[0];var I=null;var F=E[E.length-1];if(E.length>1){I=E[1];}if(!actuate.util.String.endWith(J,F)){J+=F;}var G=actuate.iv.core.iVEvent.__E_SAVE_FILE;if(F&&F.indexOf(".rptdocument")>=0){G=actuate.iv.core.iVEvent.__E_SAVE_DOCUMENT;}C._helper.eventDispatcher.broadcastEvent(G,[J,I]);}});D.show();});}},__E_QUERY_SAVE_DOCUMENT:{target:"actuate.dialog.FilePickerDialog",showDialog:function(B,A){actuate.resource.module.feature.require([{module:"actuate.dialog",feature:"FILEPICKER_DIALOG"}],function(){var C=A;var D=actuate.dialog.FilePickerDialog.getInstance();var E=".rptdocument";D.setTitle(actuate.util.Utility.getLocalizedString("filePickerDialog.saveDocument.title"));D.setFileFilters([{"filter":"*"+E,"description":actuate.util.Utility.getLocalizedString("filePickerDialog.FileTypeDescription.rptDocument")}]);D.setDialogType(D.SAVE_DIALOG);D.setConsumer(C);D.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_OK,function(G,F){if(C&&C._helper){var I=F[0];var H=null;if(F.length>1){H=F[1];}if(!actuate.util.String.endWith(I,E)){I+=E;}C._helper.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_SAVE_DOCUMENT,[I,H]);}});D.registerEventHandler(actuate.dialog.impl.EventConstants.ON_DIALOG_VALID,function(H,F){var G=F[0];if(!actuate.util.String.endWith(G,E)){G+=E;}if(C&&G==C._reportDocument){return actuate.util.Utility.getLocalizedString("error.saveViewDialog.duplicateDocName");}});D.show();});}}};actuate.util.Package.define("actuate.iv.request");actuate.iv.request.IVGenericRequest=actuate.Class.create();actuate.iv.request.IVGenericRequest.prototype=actuate.Class.extend(new actuate.common.GenericRequest(),{_lazyLoaderFinished:null,_responseProcessed:false,_currentElement:null,_elementType:null,_metadataQuery:null,_operationData:null,_metadata:null,_exception:null,initialize:function(A){actuate.common.GenericRequest.prototype.initialize.call(this,A);this._lazyLoaderCallback_closure=actuate.Method.bind2(this._lazyLoaderCallback,this);this._exceptionHandler_closure=actuate.Method.bind(this._exceptionHandler,this);this._exception=null;this._metadata=null;this._lazyLoaderFinished=null;this._ajaxRequestFinished=null;this._currentElement=null;this._responseProcessed=false;},processEvent:function(C,K,G,H,N,I){if(this._busy||(this._service&&this._service.requestProgressOn)){return ;}var L=true;this._finishCallback=N;this._errorCallback=I;this._metadata=null;this._ajaxResponse=null;this._eventType=C;this._currentElement=null;if(actuate.iv.core.iVEvent.__E_START_UP==C){this._progressOn=true;}if(actuate.iv.core.iVEvent.__E_BATCH_UPDATE==C&&G.length==1){var M;var P;var J=G[0];var B=null;for(var F=0;F<J.length;F++){if(J[F].name==actuate.data.impl.OptionKeys.IV_EVENT){M=J[F].value;}else{if(J[F].name==actuate.data.impl.OptionKeys.IV_OPTIONS){P=J[F].value;}else{if(J[F].name==actuate.data.impl.OptionKeys.IV_OPTIONS){P=J[F].value;}else{if(J[F].name=="gadgetId"){B=J[F].value;}}}}}if(M.toLowerCase().indexOf("_drill")>0||B){this._eventType=M;G=P;if(G&&G.length>0){var O=null;for(var F=0;F<G.length;F++){if(G[F].name==actuate.data.impl.OptionKeys.IID){O=G[F].value;}else{if(G[F].name==actuate.data.impl.OptionKeys.TYPE){K=G[F].value;}}}if(O){this._currentElement=this._service.documentModel.getElementBySId(O,K);}else{this._currentElement=this._service.documentModel;}if(this._currentElement&&this._service&&this._service.setSelection&&M.toLowerCase().indexOf("_drill")>0){this._service.setSelection(this._currentElement.id);}}}}this._elementType=K;this._metadataQuery={};this._exception=null;this._responseProcessed=false;this._lazyLoaderFinished=null;this._ajaxRequestFinished=null;this._operationData=G;if(G&&G.cache){this._metadata=G.cache;this._metadataQuery.target=actuate.iv.constant.LocalBind[this._eventType];this._currentElement=this._currentElement||this._getSelectedElement(K);}else{this._metadataQuery=this._getQuerySpec(this._eventType);if(this._metadataQuery){do{var D=this._eventType;this._prepareMetadataQuery(K);this._currentElement=this._getSelectedElement(K);if(this._metadataQuery.preProcess){var A=this._metadataQuery.preProcess.call(this,this._metadataQuery);if(A&&A!=D){this._eventType=A;this._metadataQuery=this._getQuerySpec(A);}}}while(this._metadataQuery&&D!=this._eventType);}if(this._metadataQuery){if(this._metadataQuery.invalidateMdType){this._service.cacheManager.invalidateMetadata(this._currentElement,this._metadataQuery.invalidateMdType);}if(this._metadataQuery.changesReportDesignItems){this._service.documentModel.invalidateMetadata(actuate.model.Constant.MetadataType.REPORT_ITEMS);}if(this._metadataQuery.mdType){var E=C.replace("__E_","__OP_");this._service.cacheManager.queryMetadata(H,this._currentElement,E,this._metadataQuery.mdType,this._metadataQuery.changesReportLayout);}else{if(this._metadataQuery.showDialog){this._metadataQuery.showDialog(this._operationData,this._service.apiInstance);return ;}}}if(!H.isEmpty()){if(this._progressOn&&this._service.showProgressIndicator){this._service.showProgressIndicator();}this._setBusy(true);this._service.requestProgressOn=true;this._connect(H);L=false;}}this._loadFeature();this._processResponses();if(N&&L){N();}return false;},_getMetadataQuerySpecs:function(){return actuate.iv.request.IVMetadataQueries;},_exceptionHandler:function(A){if(this._progressOn&&this._service.hideProgressIndicator){this._service.hideProgressIndicator();}this._exception=A;this._service.requestProgressOn=false;this._setBusy(false);if(this._errorCallback){this._errorCallback(A);}},_prepareMetadataQuery:function(B){if(this._metadataQuery.useSelectedBinding||this._metadataQuery.useSelectedColumn){this._metadataQuery.useSelectedSubElement=true;}if(this._metadataQuery.useSelectedSubElement){this._metadataQuery.useSelected=true;}if(this._metadataQuery.changesReportDesignItems){this._metadataQuery.changesReportLayout=true;}var A=this._metadataQuery["mdType_"+B];if(A){this._metadataQuery.mdType=A;}var C=this._metadataQuery["invalidateMdType_"+B];if(C){this._metadataQuery.invalidateMdType=C;}if(this._metadataQuery.invalidateMdType&&!this._metadataQuery.mdType){this._metadataQuery.mdType=this._metadataQuery.invalidateMdType;}if(this._metadataQuery.changesReportDesignItems){if(actuate.util.Utility.isArray(this._metadataQuery.mdType)){this._metadataQuery.mdType.push(actuate.model.Constant.MetadataType.REPORT_ITEMS);}else{this._metadataQuery.mdType=actuate.model.Constant.MetadataType.REPORT_ITEMS;}}},_getSelectedElement:function(B){var D=null;if(this._metadataQuery.useSelected){var A=this._service.getSelectionManager(B);var C=(A)?A.selectedIId:null;if(!C&&A){C=A.getSelectedIId();}if(C){if(B!=null&&(B.toUpperCase()=="FLASHCHART"||B.toUpperCase()=="FLASHGADGET"||B.toUpperCase()=="HTML5GADGET"||B.toUpperCase()=="CHART")&&C.lastIndexOf("/")>0&&A!=null){D=this._service.documentModel.getElementBySId(C,B);}else{D=this._service.documentModel.getElementByIId(C);}}else{D=null;}}else{D=this._service.documentModel;}return D;},_loadFeature:function(){var C=actuate.iv.constant.EventFeatureMapping[this._eventType];if(C){this._setBusy(true);this._lazyLoaderFinished=false;var D=C;switch(this._eventType){case"__E_QUERY_FORMAT":D=null;case"__E_QUERY_GRANDTOTAL_DATA_FORMAT":case"__E_QUERY_SUBTOTAL_DATA_FORMAT":case"__E_QUERY_GRANDTOTAL_DATA_FONT":case"__E_QUERY_SUBTOTAL_DATA_FONT":var B=this._getCurrentDataType();if(B&&C&&C[B]){D=C[B];}break;default:break;}if(this._eventType=="__E_FILTER"){var B=this._getCurrentDataType();}if(!D){this._lazyLoaderFinished=true;return ;}if(D=="ADVANCEDFILTERDIALOG_DIALOG"||D=="FILTER_DIALOG"||D=="CALCULATION_DIALOG"||D=="FILEPICKER_DIALOG"||D=="FONT_DIALOG"||D=="TOPBOTTOMN_DIALOG"||D=="COLUMNLIST_DIALOG"||D=="CHART_CATEGORIES_DIALOG"||D=="CHART_SERIES_DIALOG"||D=="CALENDAR_DIALOG"||D=="FONT_DIALOG"||D=="STRING_FORMAT_DIALOG"||D=="NUMBER_FORMAT_DIALOG"||D=="DATE_FORMAT_DIALOG"||D=="DATATIME_FORMAT_DIALOG"||D=="TIME_FORMAT_DIALOG"||D=="BOOLEAN_FORMAT_DIALOG"||(D.root&&D.root=="COLUMNCHART_BUILDER_DIALOG")||this._eventType=="__E_FLASHGADGET_FORMAT"){var A=new Array();A.push({module:"actuate.dialog",feature:D});return actuate.resource.module.feature.require(A,this._lazyLoaderCallback_closure,this._exceptionHandler_closure);}else{var A=new Array();A.push({module:actuate.util.Constants.MODULE_NAME_VIEWER,feature:D});return actuate.resource.module.feature.require(A,this._lazyLoaderCallback_closure,this._exceptionHandler_closure);}}},_getCurrentDataType:function(){var A=this._getSelectedSubElement();return A&&A.getBinding&&A.getBinding()?A.getBinding().dataType:null;},_lazyLoaderCallback:function(G){for(var B=0;B<G.length;B++){var E=G[B];if(E){var A=actuate.iv.ui.dialog.IVDialogEventHandlers[E.getName()];if(A){var D=E.getEvents();for(var C=0;C<D.length;C++){var F=A[D[C]];if(F){E.registerEventHandler(D[C],F);}}}}}this._lazyLoaderFinished=true;this._processResponses();},_setBusy:function(A){if(this._busy!=A){this._busy=A;if(A){actuate.iv.ui.app.ivProgressMask.show(this._service);}else{if(!this._service.requestProgressOn&&!this._service.apiInstance._pendingElement){actuate.iv.ui.app.ivProgressMask.hide();}}}},_processResponses:function(){if(this._lazyLoaderFinished==false||this._ajaxRequestFinished==false||this._responseProcessed){return ;}if(this._progressOn&&this._service.hideProgressIndicator){this._service.hideProgressIndicator();}this._responseProcessed=true;if(this._exception){return ;}var A=true;try{if(this._ajaxResponse){this._service.requestProgressOn=false;A=this._processAjaxResponse();}if(this._metadataQuery&&this._metadataQuery.target){this._service.requestProgressOn=false;if(!this._metadata){A&=this._prepareMetadataResponse();}if(A){this._processMetadataResponse();}}}catch(B){this._service.requestProgressOn=false;this._setBusy(false);if(this._errorCallback){this._errorCallback(B);return ;}else{throw B;}}if(this._metadataQuery.postProcess){this._metadataQuery.postProcess.call(this,A);}if(this._metadataQuery.reselect&&this._currentElement&&this._service.selectElement){this._service.setSelection(this._currentElement.id);}this._setBusy(false);},_prepareMetadataResponse:function(){var G=this._metadata||{};var C=this._metadataQuery.mdType;if(C){if(!actuate.util.Utility.isArray(C)){C=[C];}for(var D=0;D<C.length;D++){var H=C[D];G[H]=this._currentElement.getMetadata(H);}G[actuate.model.Constant.MetadataType.ELEMENT]=this._currentElement;}if(this._metadataQuery.useSelectedSubElement){if(!this._getSelectedSubElement(G)){return false;}if(this._metadataQuery.useSelectedBinding){if(!this._prepareSelectedBinding(G)){return false;}}}G.operationData=this._operationData;if(this._metadataQuery.useSelectedBinding&&this._metadataQuery.needsDataType){var F=G.selectedBinding;if(!(G.operationData&&G.operationData.dataType)&&F&&F.isAnyDataType){var E=G.selectedElement;var A=actuate.iv.core.iVEvent.__E_GET_AVAILABLE_DATA_TYPES;if(F.dataType==actuate.Constant.DataType.ANY||F.dataType==actuate.Constant.DataType.JAVAOBJECT){var B=this._service.dialogSelections[A];var I=B&&B[E.iid+"|"+F.name];if(I){F.dataType=I;}}this._service.eventDispatcher.fireEvent(A,{operation:this._eventType,operationData:this._operationData});return false;}}if(this._metadataQuery.postProcessMetadataResponse){if(this._metadataQuery.postProcessMetadataResponse.call(this,G,this._metadataQuery)==false){return false;}}this._metadata=G;return true;},_processMetadataResponse:function(){var C=this._metadataQuery.target;if(typeof (C)=="function"){C=C.call(this,this._metadata);}if(!C){return ;}var A=this._metadataQuery.showDialog;if(A){A(this._metadata,this._service.apiInstance);return ;}var B=null;if(typeof (C)!="string"){B=C;}else{B=actuate.iv.core.ClassLoader.getInstance().getHandler(this._service,C);}if(B){if(B.localBind){B.localBind(this._service,this._metadata);}else{if(B.show){B.setConsumer(this._service.apiInstance);B.setData(this._metadata);B.show();}}}},_getSelectedSubElement:function(I){var F=[];var B=[];if(this._currentElement.type==actuate.Constant.element.TABLE||this._currentElement.type==actuate.Constant.element.SUMMARYTABLE){var A=this._service.getSelectionManager(this._currentElement.type);var D=A.getSelectedColumnIIds();var J=this._operationData&&this._operationData.dataItemId;if(this._metadataQuery.useSelectedColumn){var C=[];for(var E=0;E<D.length;E++){C[E]=this._currentElement.columnsMap[D[E]];F[E]=C[E];B[E]=C[E];}}else{if(J){F=this._currentElement.dataItemsMap[J];}else{var C=[];for(var E=0;E<D.length;E++){C[E]=this._currentElement.columnsMap[D[E]];if(C[E]&&C[E].isMergedColumn&&this._metadataQuery.useSelectedSubElement){this._service.eventDispatcher.fireEvent(actuate.iv.core.iVEvent.__E_GET_AVAILABLE_DATA_ITEMS,{operation:this._eventType,data:this._operationData});return false;}else{if(C[E]&&C[E].dataItems){F[E]=this._currentElement.dataItemsMap[C[E].dataItems[0]];}B[E]=C[E];}}}}}else{if(this._currentElement.type==actuate.Constant.element.CROSSTAB){var A=this._service.getSelectionManager(this._currentElement.type);var G=A.selectedIndexMap;var H=G.ItemId;var L=null;if(this._metadataQuery.total){total=this._metadataQuery.total;targetType=this._metadataQuery.targetType;var M=null;var K=null;if(H){M=actuate.util.Utility.getDesignId(H);K=this._currentElement.cellsMap[M];}levels=this._currentElement.levels;headers=this._currentElement.headers;aggregations=this._currentElement.aggregations;if(total=="GrandTotal"){axis=-1;if(K.type=="CrosstabLevel"){for(E=0;E<2;E++){for(j=0;j<levels[E].length;j++){if(levels[E][j].iid==M){axis=E;break;}}if(axis!=-1){break;}}}else{if(K.type=="CrosstabHeader"){for(E=0;E<2;E++){if(headers&&headers[E]&&headers[E].iid==M){axis=E;break;}}}}if(axis==-1){return false;}if(targetType=="data"){if(axis==0){if(levels[1]&&levels[1].length>0){columnLevelIid=levels[1][levels[1].length-1].iid;}else{columnLevelIid=null;}}else{if(levels[0]&&levels[0].length>0){rowLevelIid=levels[0][levels[0].length-1].iid;}else{rowLevelIid=null;}}for(E=0;E<aggregations.length;E++){if(axis==0){if((!aggregations[E].rowLevelIid)&&aggregations[E].columnLevelIid==columnLevelIid){L=aggregations[E];break;}}else{if((!aggregations[E].columnLevelIid)&&aggregations[E].rowLevelIid==rowLevelIid){L=aggregations[E];break;}}}}else{if(targetType=="label"){L=headers[axis];}}if(I){I.selectedElement=L;}return L;}else{if(total=="SubTotal"){axis=-1;for(E=0;E<2;E++){for(j=0;j<levels[E].length;j++){if((levels[E][j].iid==M&&K.type=="CrosstabLevel")||(levels[E][j].headerIid==M&&K.type=="CrosstabHeader")){axis=E;if(levels[E][j].headerIid==M&&K.type=="CrosstabHeader"){M=levels[E][j].iid;}break;}}if(axis!=-1){break;}}if(axis==-1){return false;}if(targetType=="data"){if(axis==0){rowLevelIid=M;if(levels[1]&&levels[1].length>0){columnLevelIid=levels[1][levels[1].length-1].iid;}else{columnLevelIid=null;}}else{if(levels[0]&&levels[0].length>0){rowLevelIid=levels[0][levels[0].length-1].iid;}else{rowLevelIid=null;}columnLevelIid=M;}for(E=0;E<aggregations.length;E++){if(aggregations[E].rowLevelIid==rowLevelIid&&aggregations[E].columnLevelIid==columnLevelIid){L=aggregations[E];break;}}}else{if(targetType=="label"){find=false;cellIid=M;for(E=0;E<2;E++){for(j=0;j<levels[E].length;j++){if(levels[E][j].iid==M){find=true;cellIid=levels[E][j].headerIid;break;}}if(find){break;}}L=this._currentElement.cellsMap[cellIid];}}if(I){I.selectedElement=L;}return L;}}}else{if(H){var M=actuate.util.Utility.getDesignId(H);L=this._currentElement.cellsMap[M];}}if(!L){L=this._currentElement.getCellByIndex(G.columnlevelindex,G.rowlevelindex);}F=L;}else{F=this._currentElement;}}if(!this._metadataQuery.allowMultipleSelection&&actuate.util.Utility.isArray(F)){F=F[0];if(actuate.util.Utility.isArray(B)){B=B[0];}}if(I){I.selectedElement=F;if(B){I.selectedColumn=B;}}return F||B;},_prepareSelectedBinding:function(C){if(this._operationData){C.dataType=this._operationData.dataType;}if(!C.selectedElement){C.selectedBinding=null;return true;}var B=C.selectedElement;if(!actuate.util.Utility.isArray(B)){B=[B];}C.selectedBinding=[];for(var A=0;A<B.length;A++){if(B[A].getBinding){C.selectedBinding.push(B[A].getBinding());}else{C.selectedBinding.push(null);}}if(!this._metadataQuery.allowMultipleSelection&&actuate.util.Utility.isArray(C.selectedBinding)){C.selectedBinding=C.selectedBinding[0];}return true;},_sendSoapOperation:function(A,C){var B=this._currentElement;soapRequest.addOperation(B.iid,actuate.common.CacheManager.ELEMENT_TYPE_MAPPING[B.type],actuate.iv.core.iVOperation[A],C);if(this._service.tocPanel!=null){this._service.tocPanel.close();}},_getSoapResponse:function(){return new actuate.iv.core.IVSoapResponse(this._service);}});actuate.util.Package.define("actuate.data.impl");actuate.data.impl.OptionKeys={PAGE:"page",BOOKMARK:"bookmark",REPORTLET_BOOKMARK:"reportletBookmark",REPORT_PARAMETERS:"reportParameters",VISIBILITY:"visibility",FORMAT:"format",PAGE_RANGE:"pageRange",IS_MULTISHEET:"$$$AC_CONVERSION_OPTION_rptdocument_XLS_excelRenderOption.multipleSheet",PAGE_STYLE:"pageStyle",TARGET:"target",RESULTSET_NAME:"resultset",ID:"id",IID:"iid",TYPE:"type",START_ROW:"start",MAX_ROWS:"maxrows",COLUMN_NAME:"columnname",COLUMN_NAMES:"columnnames",FILTER:"filter",FILTERS:"filters",SORTERS:"sorters",GROUP_LEVEL:"grouplevel",REPORT_NAME:"reportname",IV_EVENT:"ivEvent",IV_OPTIONS:"ivOptions",CHART_SUBTYPE:"chartSubType",CHART_TITLE:"chartTitle",CHART_DIMENSION:"chartDimension",CHART_CATEGORIES_NAME:"categoryData",CHART_SERIES_NAME:"seriesName",DPI:actuate.Constant.oprand.DPI,SVG:actuate.Constant.oprand.SVG,ASCENDING:"ascending",OPERATOR:"operator",VALUES:"values",GADGETID:"gadgetId",SIZE:"size",WIDTH:"width",WIDTHUNIT:"widthUnit",HEIGHT:"height",HEIGHTUNIT:"heightUnit"};actuate.util.Package.define("actuate.data.impl");actuate.data.impl.DataService=actuate.Class.create();actuate.data.impl.DataService.prototype=actuate.Class.extend(new actuate.common.AbstractService(),{_dataServiceRequest:null,_dataServiceHelper:null,initialize:function(B,A){actuate.common.AbstractService.prototype.initialize.call(this,null);if(B){this.setService(B,A);}this._dataServiceRequest=null;},_getIportalRequest:function(B){if(!this._dataServiceRequest){this._dataServiceRequest=new actuate.data.impl.DataServiceRequest();}this._dataServiceRequest.setService(this._iportalUrl,this.requestOptions);var A=this._getReportType(B);if(A==this._REPORT_TYPE_DESIGN){this._dataServiceRequest.setReportDocument(null);this._dataServiceRequest.setReportDesign(B);}else{if(A==this._REPORT_TYPE_DOCUMENT||A==this._REPORT_TYPE_BIZDOCUMENT||A==this._REPORT_TYPE_DASHBOARDDOCUMENT){this._dataServiceRequest.setReportDesign(null);this._dataServiceRequest.setReportDocument(B);}else{throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Unknown report type for data source: "'+B+'"');}}return this._dataServiceRequest;},_prepareSettings:function(){this._requestUrl=this._dataServiceRequest.createRequestURL(actuate.util.Constants.SERVLET_IV);if(this._dataServiceHelper){this._dataServiceHelper.setRequestUrl(this._requestUrl);}},downloadResultSet:function(F,D,G,B){if(!F){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Argument "dataSource" is required');}if(!D){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Argument "request" is required');}D=actuate.Class.getFacadedInstance(D);if(!D.getBookmark&&D.__toRequestArray){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Invalid request object, must be an instance of actuate.data.Request.");}if(!G){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Argument "callback" is required');}if(typeof (G)!="function"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Argument "callback" must be a function');}if(B&&typeof (B)!="function"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Argument "errorCallback" must be a function');}var A=this._getIportalRequest(F);var C=this;var E=function E(){C._prepareSettings();var H=C._getDataServiceHelper();H.downloadResultSet(D.__toRequestArray(),function(J,K){var I=new actuate.data.ResultSet(J,K);G(I);},B);};A.authenticate(E);},_getDataServiceHelper:function(){if(!this._dataServiceHelper){this._dataServiceHelper=new actuate.iv.service.DataService(this._id,this);this._dataServiceHelper.setRequestUrl(this._requestUrl);}return this._dataServiceHelper;}});actuate.data.impl.DataService._LAST_TRANSACTION_ID=0;actuate.util.Package.define("actuate.viewer.impl");actuate.data.impl.DataServiceRequest=actuate.Class.create();actuate.data.impl.DataServiceRequest.prototype=actuate.Class.extend(new actuate.common.IportalRequest(),{_reportDocument:null,_reportDesign:null,initialize:function(A){actuate.common.IportalRequest.prototype.initialize.call(this,A);if(A&&A.getReportDocument){this._reportDocument=A._reportDocument;this._reportDesign=A._reportDesign;}},_getRequestAttributes:function(){var A=actuate.common.IportalRequest.prototype._getRequestAttributes.call(this);if(this._reportDocument){A.put("__report",this._reportDocument);}if(this._reportDesign){A.put("__design",this._reportDesign);}return A;},setReportDocument:function(A){this._reportDocument=A;},setReportDesign:function(A){this._reportDesign=A;},getReportDocument:function(){return this._reportDocument;},getReportDesign:function(){return this._reportDesign;},validate:function(){actuate.common.IportalRequest.prototype.validate.call(this);if(!this._reportDocument&&!this._reportDesign){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"One of the attributes reportDocument or reportDesign must be set");}}});actuate.util.Package.define("actuate.data.impl");actuate.data.impl.Filter=actuate.Class.create();actuate.data.impl.Filter.EQ="=";actuate.data.impl.Filter.NOT_EQ="<>";actuate.data.impl.Filter.LESS_THAN="<";actuate.data.impl.Filter.LESS_THAN_OR_EQUAL="<=";actuate.data.impl.Filter.GREATER_THAN_OR_EQUAL=">=";actuate.data.impl.Filter.GREATER_THAN=">";actuate.data.impl.Filter.BETWEEN="BETWEEN";actuate.data.impl.Filter.NOT_BETWEEN="NOT BETWEEN";actuate.data.impl.Filter.NULL="NULL";actuate.data.impl.Filter.NOT_NULL="NOT NULL";actuate.data.impl.Filter.TRUE="TRUE";actuate.data.impl.Filter.FALSE="FALSE";actuate.data.impl.Filter.LIKE="LIKE";actuate.data.impl.Filter.TOP_N="TOP N";actuate.data.impl.Filter.BOTTOM_N="BOTTOM N";actuate.data.impl.Filter.TOP_PERCENT="TOP PERCENT";actuate.data.impl.Filter.BOTTOM_PERCENT="BOTTOM PERCENT";actuate.data.impl.Filter.MATCH="MATCH";actuate.data.impl.Filter.NOT_LIKE="NOT LIKE";actuate.data.impl.Filter.NOT_MATCH="NOT MATCH";actuate.data.impl.Filter.IN="IN";actuate.data.impl.Filter.NOT_IN="NOT IN";actuate.data.impl.Filter.prototype={_columnName:null,_operator:null,_values:null,initialize:function(D,C,B,A){this.setColumnName(D);this.setOperator(C);if(B!=null){this.setValues(B,A);}},getColumnName:function(){return this._columnName;},setColumnName:function(A){if(!A&&typeof (A)!="string"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "columnName" is required and must be a string.');}this._columnName=A;},getOperator:function(){return this._operator;},setOperator:function(A){if(!A&&typeof (A)!="string"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "operator" is required and must be a string.');}this._operator=A;},getValues:function(){return this._values;},setValues:function(C,A){if(C==null){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Argument value1 is required");}var B=new Array();if(A!=null){if(actuate.util.Utility.isArray(C)||actuate.util.Utility.isArray(A)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"When using two arguments value1 and value2, they must be values, not arrays");}B.push(C);B.push(A);}else{if(actuate.util.Utility.isArray(C)){for(var D=0;D<C.length;D++){B.push(C[D]);}}else{B.push(C);}}this._values=B;},__toRequestArray:function(){var A=new Array();A[actuate.data.impl.OptionKeys.COLUMN_NAME]=this._columnName;A[actuate.data.impl.OptionKeys.OPERATOR]=this._operator;A[actuate.data.impl.OptionKeys.VALUES]=this._values;return A;}};actuate.util.Package.define("actuate.data.impl");actuate.data.impl.Request=actuate.Class.create();actuate.data.impl.Request.prototype={_bookmark:null,_sorters:null,_columns:null,_filters:null,_startRow:0,_maxRows:0,initialize:function(C,B,A){this.setBookmark(C);if(B!=null){this.setStartRow(B);}if(A!=null){this.setMaxRows(A);}},getBookmark:function(){return this._bookmark;},setBookmark:function(A){if(!A||typeof (A)!="string"||A==""){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "bookmark" is required and must be a string.');}this._bookmark=A;},getStartRow:function(){return this._startRow;},setStartRow:function(A){if(A==null||isNaN(A)||A<0){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "startRow" must be a integer, starting with 0.');}this._startRow=A;},getMaxRows:function(){return this._maxRows;},setMaxRows:function(A){if(A==null||isNaN(A)||A<0){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "maxRows" must be a positive integer, or 0.');}this._maxRows=A;},getSorters:function(){return this._sorters;},setSorters:function(A){if(A&&!actuate.util.Utility.isArray(A)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The "sorters" argument must be an array.');}this._sorters=A;},getFilters:function(){return this._filters;},setFilters:function(A){if(A&&!actuate.util.Utility.isArray(A)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The "filters" argument must be an array.');}this._filters=A;},setColumns:function(A){if(A){if(!actuate.util.Utility.isArray(A)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The "columns" argument must be an array.');}if(A.length>0){A.sort();while(A[0]==""||A[0].match(/^\s+$/)){A.shift();}}}this._columns=A;},getColumns:function(){return this._columns;},__toRequestArray:function(){var E=new Array();if(this._bookmark){E[actuate.data.impl.OptionKeys.BOOKMARK]=this._bookmark;}if(this._startRow){E[actuate.data.impl.OptionKeys.START_ROW]=this._startRow;}if(this._maxRows>0){E[actuate.data.impl.OptionKeys.MAX_ROWS]=this._maxRows;}if(this._sorters&&this._sorters.length>0){var H=new Array();for(var B=0;B<this._sorters.length;B++){var G=actuate.Class.getFacadedInstance(this._sorters[B]);if(!G.__toRequestArray&&!G.isAscending){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Invalid sorter found in sorter's array of the request.");}H.push(G.__toRequestArray());}E[actuate.data.impl.OptionKeys.SORTERS]=H;}if(this._filters&&this._filters.length>0){var F=new Array();for(var B=0;B<this._filters.length;B++){var D=actuate.Class.getFacadedInstance(this._filters[B]);if(!D.__toRequestArray&&!D.getOperator){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Invalid filter found in filters's array of the request.");}F.push(D.__toRequestArray());}E[actuate.data.impl.OptionKeys.FILTERS]=F;}if(this._columns&&this._columns.length>0){var A=new Array();for(var B=0;B<this._columns.length;B++){var C=this._columns[B];if(!C){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Invalid column name found in column name's array of the request.");}A.push(C.replace(/^\s+|\s+$/g,""));}E[actuate.data.impl.OptionKeys.COLUMN_NAMES]=A;}return E;}};actuate.util.Package.define("actuate.data.impl");actuate.data.impl.ResultSet=actuate.Class.create();actuate.data.impl.ResultSet.prototype={_data:null,_columnIndexes:null,_index:null,_columnNames:null,initialize:function(B,C){if(B&&!actuate.util.Utility.isArray(B)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The "data" argument must be an array.');}if(!actuate.util.Utility.isArray(C)){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The "columnNames" argument must be an array of strings.');}if(!B){B=new Array();}this._data=B;this._index=-1;this._columnIndexes=new Object();for(var A=0;A<C.length;A++){this._columnIndexes[C[A]]=A+1;}this._columnNames=C;},getColumnNames:function(){return this._columnNames;},next:function(){if(!this._data){return false;}if(this._index<this._data.length-1){this._index++;return true;}else{return false;}},getValue:function(A){if(typeof (A)!="number"){return this._getValueByName(A);}if(A<=0){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Column index out of range ("+A+" < 1)");}var B=this._getValues();if(A<=B.length){return B[A-1];}else{throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Column index out of range ("+A+" > "+B.length+")");}},_getValueByName:function(A){if(typeof (A)!="string"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"Argument columnName must be a string.");}var B=this._columnIndexes[A];if(!B){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'Column name "'+A+'" not present in result set.');}return this.getValue(B);},_getValues:function(){if(this._index<0){throw new actuate.Exception(actuate.Exception.ERR_USAGE,"The method next() must be called prior to getting result set values.");}if(this._data){return this._data[this._index];}else{throw new actuate.Exception(actuate.Exception.ERR_CLIENT,"No data");}}};actuate.util.Package.define("actuate.data.impl");actuate.data.impl.Sorter=actuate.Class.create();actuate.data.impl.Sorter.prototype={_columnName:null,_ascending:true,initialize:function(A,B){this.setColumnName(A);if(typeof (B)!="undefined"){this.setAscending(B);}},getColumnName:function(){return this._columnName;},setColumnName:function(A){if(!A&&typeof (A)!="string"){throw new actuate.Exception(actuate.Exception.ERR_USAGE,'The argument "columnName" is required and must be a string.');}this._columnName=A;},isAscending:function(){return this._ascending;},setAscending:function(A){this._ascending=A?true:false;},__toRequestArray:function(){var A=new Array();A[actuate.data.impl.OptionKeys.ASCENDING]=this._ascending;A[actuate.data.impl.OptionKeys.COLUMN_NAME]=this._columnName;return A;}};actuate.util.Package.define("actuate.data.impl");actuate.data.impl.ReportContent=actuate.Class.create();actuate.data.impl.ReportContent.prototype={_textContent:null,initialize:function(A){this._textContent=A;},getTextContent:function(){return this._textContent;}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.Constants={ACTION_EXECUTE_REPORT:"executereport.do",PREFIX_IFRAME_NAME:"actuateViewerFrame",PREFIX_CONTAINER_NAME:"actuateViewerContainer",VIEWER_CONTAINER_CSS_CLASS:"actuateViewerContainer",LOADING_MESSAGE:"Loading report viewer......",DOCUMENT_ID:"Document",LOC_IMG_PROGRESS_ANIMATION:"iportal/common/images/progress_animation.gif",LOC_IMG_PROGRESS_ANIMATION_MOBILE:"iportal/common/images/progress_animation_mobile.gif",ATTR_ELEMENT_TYPE:"element_type",ATTR_IID:"iid"};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.PageContent=actuate.Class.create();actuate.viewer.impl.PageContent.prototype={_viewer:null,_constants:null,_elements:null,_defaultBookmarks:null,initialize:function(A){this._viewer=A;this._elements=new actuate.util.HashMap();this._defaultBookmarks=new actuate.util.HashMap();this._constants=actuate.report.impl.Constants;},_exceptionHandler:function(A){if(this._viewer&&this._viewer._exceptionHandlerClosure){this._viewer._exceptionHandlerClosure(A);}else{throw A;}},getViewerId:function(){return this._viewer.getId();},_getElementsByType:function(A){var B=this._elements.get(A);if(!B){B=new actuate.util.HashMap();this._elements.put(A,B);}return B;},_getDefaultBookmark:function(A){var B=this._defaultBookmarks.get(A);if(B){return B;}else{return null;}},__getElementByBookmark:function(J,I){var A=this._getElementsByType(J);var B=false;var G;if(!I){I=this._getDefaultBookmark(J);if(!I){B=true;}}if(!B){G=A.get(I);}if(!G){var D=this._viewer._helper;var C=actuate.report.impl.Constants;if(I){if(I.indexOf(this._viewer._id)<0){I=this._viewer._id+"_"+I;}}var F=null;switch(J){case C.ELEMENT_TYPE_GADGET:F=D.getFlashGadget(I);break;case C.ELEMENT_TYPE_FLASHOBJECT:F=D.getFlashObject(I);break;case C.ELEMENT_TYPE_CHART:F=D.getChart(I)||D.getFlashChart(I);break;case C.ELEMENT_TYPE_TABLE:F=D.getTable(I);break;case C.ELEMENT_TYPE_DATA:F=D.getDataItem(I);break;case C.ELEMENT_TYPE_LABEL:F=D.getLabel(I);break;case C.ELEMENT_TYPE_TEXT:F=D.getTextItem(I);break;case C.ELEMENT_TYPE_CROSSTAB:F=D.getCrosstab(I);break;default:throw new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,'Invalid element type "'+J+'".');}if(F){G=this._createElement(J,F);var E=G.getBookmark();if(!E){var H=new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Internal error: Report element has no id attribute (bookmark)");this._exceptionHandler(H);}var K=A.get(E);if(!K){A.put(E,G);}else{G=K;}if(B){this._defaultBookmarks.put(J,E);}}else{G=null;}}return G;},_createElement:function(A,B){switch(A){case this._constants.ELEMENT_TYPE_TABLE:return new actuate.report.Table(this,B);case this._constants.ELEMENT_TYPE_CHART:return new actuate.report.Chart(this,B);case this._constants.ELEMENT_TYPE_DATA:return new actuate.report.DataItem(this,B);case this._constants.ELEMENT_TYPE_TEXT:return new actuate.report.TextItem(this,B);case this._constants.ELEMENT_TYPE_LABEL:return new actuate.report.Label(this,B);case this._constants.ELEMENT_TYPE_GADGET:return new actuate.report.Gadget(this,B);case this._constants.ELEMENT_TYPE_FLASHOBJECT:return new actuate.report.FlashObject(this,B);case this._constants.ELEMENT_TYPE_CROSSTAB:return new actuate.report.Crosstab(this,B);default:throw new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,'Invalid element type "'+A+'".');}},_addElement:function(A,D,B){var C=this._getElementsByType(A);C.put(D,B);},getTableByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_TABLE,A);},getChartByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_CHART,A);},getCrosstabByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_CROSSTAB,A);},getGadgetByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_GADGET,A);},getFlashObjectByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_FLASHOBJECT,A);},getLabelByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_LABEL,A);},getTextByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_TEXT,A);},getDataItemByBookmark:function(A){return this.__getElementByBookmark(this._constants.ELEMENT_TYPE_DATA,A);},__clearElements:function(){var G=this._elements.keys();for(var D=0;D<G.length;D++){var A=G[D];var H=this._elements.get(A);if(!H){continue;}var F=H.keys();for(var B=0;B<F.length;B++){var E=F[B];var C=H.get(E);if(C){C=actuate.Class.getFacadedInstance(C);if(C._visible){C.__setHtmlDom(null);this._elements.clear();}}}}this._defaultBookmarks.clear();}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.EventConstants={ON_CONTENT_CHANGED:"onContentChanged",ON_CONTENT_SELECTED:"onContentSelected",ON_SESSION_TIMEOUT:"onSessionTimeout",ON_EXCEPTION:"onException",ON_DIALOG_OK:"onDialogOk"};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.Viewer=actuate.Class.create();actuate.Class.extend(actuate.viewer.impl.Viewer,{_viewersMap:null,_resetCache:function(){this._viewersMap=null;},_addViewer:function(C){var B=actuate.viewer.impl.Viewer;var A=actuate.Class.getFacadedInstance(C)._helper.container;if(!B._viewersMap){B._viewersMap=new actuate.util.HashMap();}B._viewersMap.put(A.id,C);},_getViewer:function(A){var B=actuate.viewer.impl.Viewer;if(B._viewersMap&&A){return B._viewersMap.get(A.id);}else{return null;}},__getViewerFromUserContainer:function(B){if(!B){return null;}if(typeof (B)=="string"){B=document.getElementById(B);}var A=actuate.viewer.impl.Viewer;return A._getViewer(B);},getViewer:function(A){var D=actuate.viewer.impl.Viewer;var C;if(typeof A=="string"){C=document.getElementById(A);if(!C){for(var B in D._viewersMap.values()){var F=D._viewersMap.values()[B];if(F){var G=F._._id+"_"+A;C=document.getElementById(G);if(C){break;}}}}}else{C=A;}var E=actuate.viewer.impl.Constants.PREFIX_CONTAINER_NAME;while(C&&C.tagName!="body"&&C.parentNode){if(C.className==actuate.viewer.impl.Constants.VIEWER_CONTAINER_CSS_CLASS){return D._getViewer(C.parentNode);}C=C.parentNode;}return null;},_getExistingClassInstance:function(A){var B=actuate.viewer.impl.Viewer.__getViewerFromUserContainer(A);if(B){B=actuate.Class.getFacadedInstance(B);return B;}else{return null;}}});actuate.viewer.impl.Viewer.prototype=actuate.Class.extend(new actuate.common.Gadget(),{_validEvents:new Array(actuate.viewer.impl.EventConstants.ON_CONTENT_CHANGED,actuate.viewer.impl.EventConstants.ON_CONTENT_SELECTED,actuate.viewer.impl.EventConstants.ON_SESSION_TIMEOUT,actuate.viewer.impl.EventConstants.ON_EXCEPTION,actuate.viewer.impl.EventConstants.ON_DIALOG_OK),_content:null,_reportDocument:null,_reportDesign:null,_isTransientDocument:false,_isclientInitializeScript:false,_viewerRequest:null,_dataServiceHelper:null,_reportletMode:false,_reportlet:null,_viewingMode:actuate.Constant.ViewingMode.NON_DASHBOARD,_dashboardDesign:null,_gadgetId:null,_needsSoftRestart:false,_pendingCallback:null,_pendingElement:null,_viewerStarted:false,_uIOptions:null,_uiConfig:null,_helper:null,_progressIndicator:null,_helpBase:null,initialize:function(D,C,E){if(!D){return ;}this._uiConfig=C;var H=null;if(typeof (D)=="string"){H=document.getElementById(D);}else{H=D;}if(!H){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Specified container doesn't exist");}if(!H.id){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Specified container object must have the id attribute set");}actuate.common.AbstractService.prototype.initialize.call(this);this._needsSoftRestart=true;this._viewerStarted=false;this._dataServiceHelper=null;this._eventDispatcher=new actuate.iv.core.IVEventDispatcher(this);this._endPending_closure=actuate.Method.bind(this.__endPending,this);this._helper=new actuate.iv.service.InteractiveViewer(this._id,this);this._helper.buildViewerSkeleton(H,E);this._reportlet=null;this._reportletMode=false;this._content=new actuate.viewer.PageContent(this);this._pendingCallback=null;this._pendingElement=null;var B="theme";if(document&&document.getElementById){var A=document.getElementById(B);if(!A){var G=location.href.replace(/(\/servlet.*)/,"/");var F=G+"iportal/jsapi/actuate/widget/themes/_THEME_/styles/xtheme-_THEME_.css";actuate.util.Style.swapStyleSheet("theme",F.replace(/_THEME_/g,"classic"));}}actuate.viewer.impl.Viewer._addViewer(actuate.Class.getFacadeInstance(this));},_needsRunReport:function(A){return this._reportDesign?(A!=false):false;},_refresh:function(B){this._helper.refresh();if(this._helper.apiInstance._isclientInitializeScript){this._helper.apiInstance._isclientInitializeScript=false;}if(this._needsRunReport(B)){this.sessionId=null;var C=new Object();if(this._reportParameters&&this._reportParameters.length>0){C[actuate.data.impl.OptionKeys.REPORT_PARAMETERS]=this._reportParameters;}if(this._reportlet){this._reportletMode=true;C[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=this._reportlet;}if(this._gadgetId){C[actuate.data.impl.OptionKeys.GADGETID]=this._gadgetId;}C[actuate.data.impl.OptionKeys.SVG]=(this._helper.supportSVG?"true":"false");C[actuate.data.impl.OptionKeys.DPI]=actuate.util.Utility.getDPI();this._helper.hasTimedOut=null;this.__sendIVEvent(actuate.iv.core.IVEvent.__E_RUN_REPORT,true,C,this._endPending_closure,this._endPending_closure);}else{var A=null;if(this._needsSoftRestart){this._isTransientDocument=false;this.sessionId=null;if(this._helper){this._helper.hasTimedOut=null;}A=actuate.iv.core.IVEvent.__E_START_UP;this._needsSoftRestart=false;this._updateSoapUrl();}else{if(this._reportlet){A=actuate.iv.core.IVEvent.__E_GETREPORTLET;}else{A=actuate.iv.core.IVEvent.__E_GETPAGE;if(this._reportDesign!=null){if(this._helper.transientDocumentName==null||actuate.util.String.trim(this._helper.transientDocumentName)==""){return ;}}}}var D={};if(this._reportlet){this._reportletMode=true;D[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=this._reportlet;}if(this._gadgetId){D[actuate.data.impl.OptionKeys.GADGETID]=this._gadgetId;}D[actuate.data.impl.OptionKeys.SVG]=(this._helper.supportSVG?"true":"false");D[actuate.data.impl.OptionKeys.DPI]=actuate.util.Utility.getDPI();this.__sendIVEvent(A,true,D,this._endPending_closure,this._endPending_closure,this._exceptionHandlerClosure);}},isPending:function(){return !this._helper.__isChannelAvailable();},__startPending:function(B,A){if(this.isPending()){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"An operation is already pending");}if(B){if(typeof (B)!="function"){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Invalid callback function passed as argument");}}this._pendingCallback=B;this._pendingElement=A;},__endPending:function(){this._pendingElement=false;this._helper.__releaseChannel();this._needsSoftRestart=false;if(this._helper.interactive&&this._helper.totalPage>this._helper.pageLimit*1){this.disableIV(this._pendingCallback);}else{if(this._pendingCallback){var A=arguments;var D=this._pendingCallback;var B=this._helper;this._pendingCallback=null;var C=setInterval(function(){if(!B.progressiveViewing){clearInterval(C);D.apply(null,A);}},100);}}if(actuate.util.browser.isFirefox){window.setTimeout(actuate.Method.createDelegate(this._scrollToBookmark,this),100);}else{this._scrollToBookmark();}},_scrollToBookmark:function(){if(this._bookmark){this._helper.contentPanel.floatPanel.scrollToBookmark(this._bookmark);}},getContentByPageRange:function(F,D,E){var C=this;var B=function B(){var G={};G.pageRange=F;G.format=D;C._helper.getReportContent(G,function(H){E(new actuate.data.impl.ReportContent(H));},C._exceptionHandlerClosure);};var A=new Array();if(!this._viewerRequest){this._viewerRequest=this._createViewerRequest();A.push(actuate.Method.bind(this._authenticate,this));A.push(actuate.Method.bind(this._prepareSettings,this));}A.push(actuate.Method.bind(B,this));actuate.util.Utility.chainCallbacksArray(A,this._exceptionHandlerClosure);},getContentByBookmark:function(C,E,F){var D=this;var B=function B(){var G={};G.bookmark=C;G.format=E;D._helper.getReportContent(G,function(H){F(new actuate.data.impl.ReportContent(H));},D._exceptionHandlerClosure);};var A=new Array();if(!this._viewerRequest){this._viewerRequest=this._createViewerRequest();A.push(actuate.Method.bind(this._authenticate,this));A.push(actuate.Method.bind(this._prepareSettings,this));}A.push(actuate.Method.bind(B,this));actuate.util.Utility.chainCallbacksArray(A,this._exceptionHandlerClosure);},enableIV:function(A){if(actuate.util.browser&&actuate.util.browser.useMobile()){return ;}this._assertViewerStarted();this._assertNotDirty();this.__startPending(A,this);if(!this._helper.interactive){this.__sendIVEvent(actuate.iv.core.IVEvent.__E_ENABLE_IV,true,null,this._endPending_closure,this._endPending_closure,this._exceptionHandlerClosure);}else{this.__contentChanged(null);}},disableIV:function(A){this._assertViewerStarted();this._assertNotDirty();this.__startPending(A,this);if(this._helper.interactive){this.__sendIVEvent(actuate.iv.core.IVEvent.__E_DISABLE_IV,true);}else{this.__contentChanged(null);}},isInteractive:function(){if(this._helper){return this._helper.interactive;}return false;},submit:function(B,A){this.__startPending(B,this);if(this._viewerStarted){this._refresh(A);}else{this._createViewer();}},refresh:function(B,A){this.submit(B,A);},clearCachedElement:function(B){var A=this._helper.documentModel.getElementByIId(B);this._helper.cacheManager.invalidateMetadata(A,actuate.model.Constant.MetadataType.ALL);},getUIConfig:function(){return this._uiConfig;},_createViewer:function(){this._reportletMode=false;var A=new Array();this._viewerRequest=this._createViewerRequest();A.push(actuate.Method.bind(this._authenticate,this));A.push(actuate.Method.bind(this._prepareSettings,this));A.push(actuate.Method.bind(this._updateViewerContent,this));A.push(actuate.Method.bind(this._startupViewer,this));actuate.util.Utility.chainCallbacksArray(A,this._exceptionHandlerClosure);},_prepareSettings:function(E){var C=this._viewerRequest.getIportalUrl();var B=actuate.util.Constants.SERVLET_IV;var D=actuate.util.Utility.getJSessionId(C);if(D){B+=";jsessionid="+D;}var A=this._viewerRequest.createRequestURL(B);C=actuate.util.Utility.makeAbsoluteUrl(C);this._helper.setRequestUrl(A);this._helper.setBaseUrl(C);if(E){E();}},_updateViewerContent:function(C){var A=actuate.resource.module.modules[actuate.util.Constants.MODULE_NAME_VIEWER];var B=A._container.cloneResource();B.id=actuate.viewer.impl.Constants.PREFIX_CONTAINER_NAME+this._id;B.style.margin="0px";B.style.padding="0px";B.style.textIndent="0px";B.className=actuate.viewer.impl.Constants.VIEWER_CONTAINER_CSS_CLASS;this._helper.container.appendChild(B);if(C){window.setTimeout(C,1);}},_workaroundStyleIssues:function(){var A=this._helper.container;A.style.overflow="hidden";var B=A.firstChild;while(B&&(!B.tagName||B.tagName.toUpperCase()!="DIV")){B=B.nextSibling;}if(B){B.style.position="relative";}},_startupViewer:function(){this._workaroundStyleIssues();if(!this._dataServiceHelper){this._dataServiceHelper=new actuate.iv.service.DataService(this._id,this);}this._dataServiceHelper.setBaseUrl(this._iportalUrl);this._dataServiceHelper.setRequestUrl(this._helper.getRequestUrl());this._helper.startup(this._uiConfig);this._helper.updateGlobalFeatures(this._uIOptions?this._uIOptions.getFeatureMap():null);var C=new Object();if(this._reportParameters&&this._reportParameters.length>0){C[actuate.data.impl.OptionKeys.REPORT_PARAMETERS]=this._reportParameters;}if(this._reportlet){this._reportletMode=true;C[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=this._reportlet;}else{if(!actuate.util.Utility.isEmpty(this.requestOptions,false)&&this.requestOptions.__getCustomParameters()!=null){var B=this.requestOptions.__getCustomParameters()["__bookmark"];var A=this.requestOptions.__getCustomParameters()["__format"];if(A!=null){if(A=="reportlet"&&B!=null){this._reportletMode=true;this._reportlet=B;C[actuate.data.impl.OptionKeys.REPORTLET_BOOKMARK]=B;}}}}if(this._gadgetId){C[actuate.data.impl.OptionKeys.GADGETID]=this._gadgetId;}this.__sendIVEvent(actuate.iv.core.IVEvent.__E_START_UP,true,C,this._endPending_closure,this._endPending_closure,this._exceptionHandlerClosure);this._needsSoftRestart=false;this._viewerStarted=true;},__sendIVEvent:function(E,D,F,A,G,B){if(!E){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Event name is required");}if(this._helper.assertNotTimedOut()){var C=new Object();C["data"]=F;C["callback"]=G;C["errorcallback"]=B;this._helper.eventDispatcher.sendEvent(E,C,D);}},_exceptionHandler:function(C){this._helper.__releaseChannel();this._pendingCallback=null;var A=C;if(C&&C.message){A=new actuate.viewer.ViewerException(actuate.Exception.ERR_SERVER,C.message,null,C.errCode);}else{if(!(C instanceof actuate.viewer.ViewerException)&&!(C instanceof actuate.Exception)){A=actuate.util.Utility.createException(C,actuate.viewer.ViewerException);if(this._pendingElement){actuate.Class.getFacadedInstance(A)._element=this._pendingElement;}}}this._pendingElement=null;var B=this._getEventHandlers(actuate.viewer.impl.EventConstants.ON_EXCEPTION);if(B&&B.length>0){this.fireEvent(actuate.viewer.impl.EventConstants.ON_EXCEPTION,A);}else{throw A;}},getCurrentPageContent:function(){this._assertViewerStarted();return this._content;},getTable:function(A){var B=this.getCurrentPageContent();if(B){return B.getTableByBookmark(A);}return null;},getChart:function(A){var B=this.getCurrentPageContent();if(B){return B.getChartByBookmark(A);}return null;},getCrosstab:function(A){var B=this.getCurrentPageContent();if(B){return B.getCrosstabByBookmark(A);}return null;},getGadget:function(A){var B=this.getCurrentPageContent();if(B){return B.getGadgetByBookmark(A);}return null;},getFlashObject:function(A){var B=this.getCurrentPageContent();if(B){return B.getFlashObjectByBookmark(A);}return null;},getLabel:function(A){var B=this.getCurrentPageContent();if(B){return B.getLabelByBookmark(A);}return null;},getText:function(A){var B=this.getCurrentPageContent();if(B){return B.getTextByBookmark(A);}return null;},getDataItem:function(A){var B=this.getCurrentPageContent();if(B){return B.getDataItemByBookmark(A);}return null;},getCurrentPageNum:function(){return(this._helper&&this._helper.currentPage)||0;},setUIOptions:function(A){this._uIOptions=A;if(this._viewerStarted){this._helper.updateFeatureMap(this._uIOptions.getFeatureMap());}},getUIOptions:function(){return this._uIOptions;},getTotalPageCount:function(){return(this._helper&&this._helper.totalPage)||0;},gotoPage:function(B){if(isNaN(B)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Page number must be an integer");}if(this._reportletMode){return ;}var A=this.getTotalPageCount();if(B<1||B>A){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Page number out of range: "+B+" of "+A);}this.__startPending(null,this);this.__sendIVEvent(actuate.iv.core.IVEvent.__E_GETPAGE,true,{name:actuate.data.impl.OptionKeys.PAGE,value:B});},gotoBookmark:function(A){if(A){if(this._reportletMode){return ;}this.__startPending(null,this);this.__sendIVEvent(actuate.iv.core.IVEvent.__E_GETPAGE,true,[{name:actuate.data.impl.OptionKeys.BOOKMARK,value:A}]);}},downloadResultSet:function(C,E){if(!C){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Argument "request" is required.');}if(!E||typeof (E)!="function"){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Argument "callback" is required and must be a function.');}var A=this._dataServiceHelper;C=actuate.Class.getFacadedInstance(C);if(!C.getBookmark&&C.__toRequestArray){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Invalid request object, it must be an instance of actuate.data.Request.");}this._assertViewerStarted();var B=this;var D=function D(){A.downloadResultSet(C.__toRequestArray(),function(G,H){var F=new actuate.data.ResultSet(G,H);E(F);},B._exceptionHandlerClosure);};this._viewerRequest.authenticate(D);},downloadReport:function(E,A,B){if(E){this._assertViewerStarted();var D=new Array();D.push({name:actuate.data.impl.OptionKeys.FORMAT,value:E});if(!A){A="1-"+this.getTotalPageCount();}if(!actuate.iv.utility.ivUtility.checkPageRange(A,this.getTotalPageCount())){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Invalid page range");}D.push({name:actuate.data.impl.OptionKeys.PAGE_RANGE,value:A});if(B&&B.getOptions){var C=B.getOptions();if(C&&C[actuate.viewer.RenderOptions.IS_MULTISHEET]){if((E=="XLS"||E=="xls")){D.push({name:actuate.data.impl.OptionKeys.IS_MULTISHEET,value:C[actuate.viewer.RenderOptions.IS_MULTISHEET]==true?"true":"false"});}}}D.push({name:actuate.data.impl.OptionKeys.TARGET,value:"_blank"});this.__sendIVEvent(actuate.iv.core.IVEvent.__E_APPLY_EXPORTREPORT,false,D);}else{throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Argument "format" is required');}},showPrintDialog:function(){var A={};A.cache={};this.__sendIVEvent(actuate.iv.core.IVEvent.__E_PRINT,true,A);},showParameterPanel:function(){var A={};A.cache={};A.cache.needParameterPanel=true;this.__sendIVEvent(actuate.iv.core.iVEvent.__E_QUERY_PARAMETER,true,A);},showTocPanel:function(){this.__sendIVEvent(actuate.iv.core.iVEvent.__E_TOC,true);},showFacebookCommentPanel:function(){var A={};A.cache={};A.cache.needFBCommentPanel=true;this.__sendIVEvent(actuate.iv.core.iVEvent.__E_FACEBOOK_COMMENTS,true,A);},showDownloadResultSetDialog:function(){this.__sendIVEvent(actuate.iv.core.IVEvent.__E_QUERY_DOCUMENT_EXPORT);},showDownloadReportDialog:function(){this.__sendIVEvent(actuate.iv.core.IVEvent.__E_DOCUMENT_EXPORTREPORT);},__sessionTimeout:function(){this.fireEvent(actuate.viewer.impl.EventConstants.ON_SESSION_TIMEOUT);},__contentSelected:function(G){var E=G.elementName;var B=G.elementType;var F=actuate.Class.getFacadedInstance(this._content);var C=F.__getElementByBookmark(B,E);var D=null;if(typeof (G.columnIndex)!="undefined"){D=G.columnIndex+1;}var A=new actuate.viewer.SelectedContent(C,D);this.fireEvent(actuate.viewer.impl.EventConstants.ON_CONTENT_SELECTED,A);},__contentChanged:function(){var A=actuate.Class.getFacadedInstance(this._content);A.__clearElements();this.__endPending(actuate.Class.getFacadeInstance(this));this.fireEvent(actuate.viewer.impl.EventConstants.ON_CONTENT_CHANGED);},__reset:function(){this._needsSoftRestart=true;if(this._isTransientDocument&&this._reportDesign){this._reportDocument=null;}},setWidth:function(A){if(A!=null){this._helper.width=parseInt(A||"0");}},getWidth:function(){return this._helper.width;},setHeight:function(A){if(A!=null){this._helper.height=parseInt(A||"0");}},getHeight:function(){return this._helper.height;},setSize:function(B,A){this.setWidth(B);this.setHeight(A);this._helper._updateContainerSize();this._helper.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_RESIZE);this._helper.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);},setFocus:function(A){if(A==false){this._helper.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_BLUR_CONTEXTMENU);}},setContentMargin:function(A){if(typeof (A)=="object"){this._helper.contentMargin={};this._helper.contentMargin.top=parseInt(A.top+""||"0");this._helper.contentMargin.right=parseInt(A.right+""||"0");this._helper.contentMargin.bottom=parseInt(A.bottom+""||"0");this._helper.contentMargin.left=parseInt(A.left+""||"0");}else{this._helper.contentMargin=parseInt(A+""||"30");}},getContentMargin:function(){return this._helper.contentMargin;},setReportletBookmark:function(A){if(this._reportlet!=A){this._needsSoftRestart=true;this._resetConnectionHandle();this._reportlet=A;this._updateSoapUrl();}},getReportletBookmark:function(){return this._reportlet;},setReportName:function(A){var B=this._getReportType(A);if(B==this._REPORT_TYPE_DESIGN||B==this._REPORT_TYPE_BIZDESIGN||B==this._REPORT_TYPE_DASHBOARD){this.setReportDesign(A);}else{if(B==this._REPORT_TYPE_DOCUMENT||B==this._REPORT_TYPE_BIZDOCUMENT||B==this._REPORT_TYPE_DASHBOARDDOCUMENT){this.setReportDocument(A);}else{throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Viewer: unknown report type for report: "'+A+'"');}}},setReportDesign:function(B){var A=this._getReportType(B);if(A!=this._REPORT_TYPE_DESIGN&&A!=this._REPORT_TYPE_BIZDESIGN){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Viewer: unknown report type for report design "'+B+'"');}else{if(this._reportDesign!=B){this._needsSoftRestart=true;this._resetConnectionHandle();}this._reportDesign=B;this._reportDocument=null;this._updateSoapUrl();}},setReportDocument:function(C,D){var A=this._getReportType(C);if(A!=this._REPORT_TYPE_DOCUMENT&&A!=this._REPORT_TYPE_BIZDOCUMENT&&A!=this._REPORT_TYPE_DASHBOARDDOCUMENT){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Viewer: unknown report type for report document: "'+C+'"');}else{if(!D){if(this._reportDocument!=C){this._needsSoftRestart=true;this._resetConnectionHandle();}this._reportDesign=null;this._reportDocument=C;this._isTransientDocument=false;}else{this._isTransientDocument=true;this._reportDocument=C;if(this.requestOptions){this.requestOptions.__getCustomParameters()["connectionHandle"]=D;}else{this.requestOptions=new actuate.RequestOptions();var B={"connectionHandle":D};this.requestOptions.setCustomParameters(B);}}this._updateSoapUrl();}},setHelpBase:function(A){this._helpBase=A;},_updateSoapUrl:function(){if(this._viewerRequest){var B=this._helper.transientDocumentName||this._reportDocument;if(this._reportDocument!=null&&this._isTransientDocument==false){B=this._reportDocument;}this._viewerRequest.setReportDocument(B);this._viewerRequest.setReportDesign(this._reportDesign);this._viewerRequest.setReportletBookmark(this._reportlet);this._viewerRequest.setService(this._iportalUrl,this.requestOptions);var A=this._viewerRequest.createRequestURL(actuate.util.Constants.SERVLET_IV);if(this._helper){this._helper.setRequestUrl(A);}if(this._dataServiceHelper){this._dataServiceHelper.setRequestUrl(A);}}},_resetConnectionHandle:function(){if(this.requestOptions){if(this.requestOptions.__getCustomParameters()["connectionHandle"]){this.requestOptions.__getCustomParameters()["connectionHandle"]=null;}}},getConnectionHandle:function(){if(this.requestOptions){return this.requestOptions.__getCustomParameters()["connectionHandle"];}},getReportName:function(){if(this._reportDesign){return this._reportDesign;}else{return this._reportDocument;}},getReportDesign:function(){return this._reportDesign;},getReportDocument:function(){return this._reportDocument;},getHelpBase:function(){return this._helpBase;},setParameters:function(F){if(!F){return ;}var A=[];if(F.length>0){for(var C=0;C<F.length;C++){var D=F[C];var E=new actuate.viewer.impl.ParameterValue();if(D.getName){E.setName(D.getName());}if(D.getValue){E.setValue(D.getValue());}if(D.getValueIsNull){E.setValueIsNull(D.getValueIsNull());}A.push(E);}}else{for(var B in F){var E=new actuate.viewer.impl.ParameterValue();E.setName(B);E.setValue(F[B]);A.push(E);}}this.setParameterValues(A);},setParameterValues:function(A){this._reportParameters=A;this._resetReportDocument();this._parametersChanged=true;},setSupportSVG:function(A){this._helper.supportSVG=A;},setService:function(B,A){if(this._iportalUrl!=B&&this.requestOptions!=A){this.sessionId=null;this._needsSoftRestart=true;}actuate.common.AbstractService.prototype.setService.apply(this,arguments);},_resetReportDocument:function(){if(this._reportDesign&&this._reportDocument){this._reportDocument=null;}},_createViewerRequest:function(A){var A=new actuate.viewer.impl.ViewerRequest(A);this._updateRequest(A);if(this._reportDocument){A.setReportDocument(this._reportDocument);}if(this._reportDesign){A.setReportDesign(this._reportDesign);}return A;},_updateRequest:function(A){if(this._iportalUrl){A.setService(this._iportalUrl,this.requestOptions);}A.setViewerId(this._id);A.setExceptionHandler(this._exceptionHandlerClosure);return A;},_validate:function(){actuate.common.AbstractService.prototype._validate.call(this);if(!this._reportDesign&&!this._reportDocument){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'"report" attribute is required');}return true;},_authenticate:function(A){if(this._viewerRequest){this._viewerRequest.authenticate(A);}},saveReportDesign:function(C,B){this._assertViewerStarted();this._assertNotDirty();this._assertInteractive();var A=this._reportDesign;if(!A){A=this._getDesignFromDocument(this._reportDocument);}if(!C||C==""){C=A?A:actuate.util.Utility.stripPath(A);}else{if(C.indexOf("/")<0){C=A?actuate.util.Utility.stripFileName(A)+C:C;}else{if(!this._isSameReportType(C,A)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Invalid file extension for report design "'+C+'".');}}}if(!actuate.iv.utility.ivUtility.isValidPathName(C)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Invalid path name  "'+C+'".');}this.__startPending(B,this);this.__sendIVEvent(actuate.iv.core.IVEvent.__E_SAVE_FILE,false,[C,""],this._endPending_closure,this._endPending_closure,this._exceptionHandlerClosure);},saveReportDocument:function(C,B){this._assertViewerStarted();this._assertNotDirty();this._assertInteractive();if(!C||C==""){var A;if(!this._reportDocument||this._isTransientDocument){A=this._getDocumentFromDesign(this._reportDesign);}else{A=this._reportDocument;}C=actuate.util.Utility.stripPath(A);}else{if(!this._isSameReportType(C,this._reportDocument)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Invalid file extension for report document "'+C+'".');}}if(!actuate.iv.utility.ivUtility.isValidPathName(C)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,'Invalid path name  "'+C+'".');}this.__startPending(B,this);this.__sendIVEvent(actuate.iv.core.IVEvent.__E_SAVE_DOCUMENT,false,[C,""],this._endPending_closure,this._endPending_closure,this._exceptionHandlerClosure);},setGadgetId:function(B,A){this._dashboardDesign=B;this._gadgetId=A;},setViewingMode:function(A){if(A==actuate.Constant.ViewingMode.DASHBOARD_NORMAL){this._viewingMode=actuate.Constant.ViewingMode.DASHBOARD_NORMAL;}else{if(A==actuate.Constant.ViewingMode.DASHBOARD_MAX){this._viewingMode=actuate.Constant.ViewingMode.DASHBOARD_MAX;}else{this._viewingMode=actuate.Constant.ViewingMode.NON_DASHBOARD;}}},getViewingMode:function(){return this._viewingMode;},_getDesignFromDocument:function(A){var B=this._getReportType(A);if(B==this._REPORT_TYPE_DOCUMENT){B=this._REPORT_TYPE_DESIGN;}else{if(B==this._REPORT_TYPE_BIZDOCUMENT){B=this._REPORT_TYPE_BIZDESIGN;}else{if(B==this._REPORT_TYPE_DASHBOARDDOCUMENT){B=this._REPORT_TYPE_DASHBOARD;}}}return actuate.util.Utility.stripFileExtension(A)+"."+B;},_getDocumentFromDesign:function(A){var B=this._getReportType(A);if(B==this._REPORT_TYPE_DESIGN){B=this._REPORT_TYPE_DOCUMENT;}else{if(B==this._REPORT_TYPE_BIZDESIGN){B=this._REPORT_TYPE_BIZDOCUMENT;}else{if(B==this._REPORT_TYPE_DASHBOARD){B=this._REPORT_TYPE_DASHBOARDDOCUMENT;}}}return actuate.util.Utility.stripFileExtension(A)+"."+B;},_isSameReportType:function(C,A){var B=this._getReportType(C);var D=this._getReportType(A);return(B==D);},_assertViewerStarted:function(){if(!this._viewerStarted){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"The viewer must be started first by calling submit()");}},_assertNotDirty:function(){if(this._needsSoftRestart){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Some attributes have been changed, "+"they need to be submit first using submit().");}},_assertInteractive:function(){if(!this._helper||!this._helper.interactive){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"The viewer is not in interactive mode.");}},getOffset:function(){return actuate.util.Element.cumulativeOffset(this._helper.container);},needAdjustPosition:function(){return !this._helper.standalone;},getClientWidth:function(){if(this._helper.standalone){return this._helper.clientWidth;}else{return document.body.clientWidth;}},getClientHeight:function(){if(this._helper.standalone){return this._helper.clientHeight;}else{return document.body.clientHeight;}},prepareDnd:function(){if(this._helper&&this._helper.contentPanel){this._helper.contentPanel.hibernate();}},startDnd:function(A,B,C){if(this._helper){this._helper.dndManager.startDragAndDrop(A,B,C);}},finishDnd:function(){if(this._helper&&this._helper.contentPanel){this._helper.contentPanel.activate();}},getDndManager:function(){if(this._helper){return this._helper.dndManager;}return null;},showProgressIndicator:function(C){var B=document.documentElement.clientWidth;var A=document.documentElement.clientHeight;this._progressIndicator=actuate.viewer.impl.Utility.showProgressIndicator(this._progressIndicator,this._helper.container.id,this._iportalUrl,this._helper.width?this._helper.width:B,this._helper.height?this._helper.height:A);if(C){C();}},hideProgressIndicator:function(A){actuate.viewer.impl.Utility.hideProgressIndicator(this._progressIndicator);if(A){A();}},notifyEvent:function(A,B){if(!this._viewerStarted){return false;}if(A=="refresh"||A=="select"){this._refresh();}return true;},__getHelper:function(){return this._helper;},setBRSEnabled:function(A){this._helper.setBRSEnabled(A);}});actuate.util.Package.define("actuate.viewer.impl.adapter");actuate.viewer.impl.adapter.DashboardAdapter=actuate.Class.extendClass(actuate.viewer.impl.Viewer,{initialize:function(B,A,C){actuate.viewer.impl.Viewer.prototype.initialize.call(this,B,A,C);this._helper.documentModel=actuate.model.DocumentModel.getInstance();}});actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.ViewerRequest=actuate.Class.create();actuate.viewer.impl.ViewerRequest.prototype=actuate.Class.extend(new actuate.data.impl.DataServiceRequest(),{_viewerId:null,_reportlet:null,initialize:function(A){actuate.common.IportalRequest.prototype.initialize.call(this,A);if(A&&A._viewerId){this._viewerId=A._viewerId;this._bookmark=A._bookmark;}},_getRequestAttributes:function(){var A=actuate.data.impl.DataServiceRequest.prototype._getRequestAttributes.call(this);if(this._viewerId){A.put("viewerId",this._viewerId);}if(this._bookmark){A.put("format","reportlet");A.put("bookmark",this._bookmark);}return A;},setViewerId:function(A){this._viewerId=A;},getViewerId:function(){return this._viewerId;},setReportletBookmark:function(A){this._reportlet=A;},getReportletBookmark:function(){return this._reportlet;}});actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.SelectedContent=actuate.Class.create();actuate.viewer.impl.SelectedContent.prototype={_selectedElement:null,_columnIndex:null,initialize:function(B,A){this._selectedElement=B;this._columnIndex=A;},getSelectedElement:function(){return this._selectedElement;},getColumnIndex:function(){return this._columnIndex;}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.ViewerException=actuate.Class.create();actuate.viewer.impl.ViewerException.prototype=actuate.Class.extend(new actuate.Exception(),{_element:null,initialize:function(A,E,D,B,C){actuate.Exception.prototype.initialize.call(this,A,E,D,B);this._element=C;},getElement:function(){return this._element;},getErrorMessage:function(){return this.getMessage();},_getName:function(){return"actuate.viewer.ViewerException";}});actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.UIOptions=actuate.Class.create();actuate.viewer.impl.UIOptions.prototype={_featureMap:null,FEATURE_TOOLBAR_TYPE:"Toolbar",FEATURE_MAINMENU_TYPE:"MainMenu",FEATURE_PARAMETER_TYPE:"Parameter",FEATURE_EXPORTDATA_TYPE:"ExportData",FEATURE_EXPORTELEMENTDATA_TYPE:"ExportElementData",FEATURE_EDITREPORT_TYPE:"EditReport",FEATURE_EXPORTREPORT_TYPE:"ExportReport",FEATURE_EXPORTELEMENT_TYPE:"ExportElement",FEATURE_SAVEDESIGN_TYPE:"SaveDesign",FEATURE_SAVEDOCUMENT_TYPE:"SaveDocument",FEATURE_TOC_TYPE:"Toc",FEATURE_PRINT_TYPE:"Print",FEATURE_SERVERPRINT_TYPE:"ServerPrint",FEATURE_HIDECOLUMN_TYPE:"HideColumn",FEATURE_HIDESHOWITEMS_TYPE:"HideShowItems",FEATURE_SHOWCOLUMNS_TYPE:"ShowColumns",FEATURE_REORDERCOLUMNS_TYPE:"ReorderColumns",FEATURE_CALCULATION_TYPE:"Calculation",FEATURE_EDITCALCULATION_TYPE:"EditCalculation",FEATURE_DELETECOLUMN_TYPE:"DeleteColumn",FEATURE_ROWHEIGHT_TYPE:"RowHeight",FEATURE_COLUMNWIDTH_TYPE:"ColumnWidth",FEATURE_SUPPRESSDUPLICATEVALUES_TYPE:"SuppressDuplicateValues",FEATURE_NOTSUPPRESSDUPLICATEVALUES_TYPE:"NotSuppressDuplicateValues",FEATURE_MOVETOGROUP_TYPE:"MoveToGroup",FEATURE_MOVETOLEFT_TYPE:"MoveToLeft",FEATURE_MOVETORIGHT_TYPE:"MoveToRight",FEATURE_SORT_ASC:"SortAsc",FEATURE_SORT_DSC:"SortDsc",FEATURE_ADVANCEDSORT_TYPE:"AdvancedSort",FEATURE_FILTER_TYPE:"Filter",FEATURE_CHARTSUBTYPE_TYPE:"ChartSubType",FEATURE_FLASHGADGETTYPE_TYPE:"FlashGadgetType",FEATURE_FLASHGADGETTYPE_FORMAT:"FlashGadgetFormat",FEATURE_TOPBOTTOMNFILTER_TYPE:"TopBottomN",FEATURE_AGGREGATION_TYPE:"Aggregation",FEATURE_TEXTEDIT_TYPE:"Text",FEATURE_HEADERTEXTEDIT_TYPE:"HeaderText",FEATURE_ADDGROUP_TYPE:"AddGroup",FEATURE_DELETEGROUP_TYPE:"DeleteGroup",FEATURE_HIDEDETAIL_TYPE:"HideDetail",FEATURE_SHOWDETAIL_TYPE:"ShowDetail",FEATURE_CHANGEFONT_TYPE:"ChangeFont",FEATURE_CHANGEHEADERFONT_TYPE:"ChangeHeaderFont",FEATURE_FORMAT_TYPE:"Format",FEATURE_SHARESTYLE_TYPE:"ShareStyle",FEATURE_ALIGNLEFT_TYPE:"AlignLeft",FEATURE_ALIGNCENTER_TYPE:"AlignCenter",FEATURE_ALIGNRIGHT_TYPE:"AlignRight",FEATURE_HEADERALIGNLEFT_TYPE:"HeaderAlignLeft",FEATURE_HEADERALIGNCENTER_TYPE:"HeaderAlignCenter",FEATURE_HEADERALIGNRIGHT_TYPE:"HeaderAlignRight",FEATURE_CONDITIONALFORMAT_TYPE:"ConditionalFormat",FEATURE_PAGEBREAK_TYPE:"PageBreak",FEATURE_SWITCHVIEW_TYPE:"SwitchView",FEATURE_TOOLBAR_HELP_TYPE:"ToolbarHelp",FEATURE_LINKTOTHISPAGE_TYPE:"LinkToThisPage",FEATURE_HIGHLIGHT_TYPE:"Highlight",FEATURE_HOVERHIGHLIGHT_TYPE:"HoverHighlight",FEATURE_PAGENAVIGATION_TYPE:"PageNavigation",FEATURE_CHARTPROPERTY_TYPE:"ChartProperty",FEATURE_SCROLLING_TYPE:"Scrolling",FEATURE_CONTENT_MARGIN:"ContentMargin",FEATURE_LAUNCHVIEWER_TYPE:"LaunchViewer",FEATURE_CONTEXT_MENU:"ContextMenu",FEATURE_SHOWTOOLTIP:"ShowTooltip",FEATURE_DATAANALYZER:"DataAnalyzer",FEATURE_UNDO_REDO:"UndoRedo",FEATURE_FACEBOOK_COMMENTS:"FacebookComments",initialize:function(){this._featureMap=new Object();},getFeatureMap:function(){return this._featureMap;},enableToolBar:function(A){this._featureMap[this.FEATURE_TOOLBAR_TYPE]=A;},enableMainMenu:function(A){this._featureMap[this.FEATURE_MAINMENU_TYPE]=A;},enableParameterPage:function(A){this._featureMap[this.FEATURE_PARAMETER_TYPE]=A;},enableTOC:function(A){this._featureMap[this.FEATURE_TOC_TYPE]=A;},enableExportReport:function(A){this._featureMap[this.FEATURE_EXPORTREPORT_TYPE]=A;},enableDataExtraction:function(A){this._featureMap[this.FEATURE_EXPORTDATA_TYPE]=A;},enableSaveDesign:function(A){this._featureMap[this.FEATURE_SAVEDESIGN_TYPE]=A;},enableSaveDocument:function(A){this._featureMap[this.FEATURE_SAVEDOCUMENT_TYPE]=A;},enablePrint:function(A){this._featureMap[this.FEATURE_PRINT_TYPE]=A;},enableServerPrint:function(A){this._featureMap[this.FEATURE_SERVERPRINT_TYPE]=A;},enableHideShowItems:function(A){this._featureMap[this.FEATURE_HIDESHOWITEMS_TYPE]=A;},enableColumnEdit:function(A){this._featureMap[this.FEATURE_HIDECOLUMN_TYPE]=A;this._featureMap[this.FEATURE_SHOWCOLUMNS_TYPE]=A;this._featureMap[this.FEATURE_DELETECOLUMN_TYPE]=A;},enableReorderColumns:function(A){this._featureMap[this.FEATURE_REORDERCOLUMNS_TYPE]=A;},enableCalculatedColumn:function(A){this._featureMap[this.FEATURE_CALCULATION_TYPE]=A;this._featureMap[this.FEATURE_EDITCALCULATION_TYPE]=A;},enableRowResize:function(A){this._featureMap[this.FEATURE_ROWHEIGHT_TYPE]=A;},enableColumnResize:function(A){this._featureMap[this.FEATURE_COLUMNWIDTH_TYPE]=A;},enableSuppressDuplicate:function(A){this._featureMap[this.FEATURE_SUPPRESSDUPLICATEVALUES_TYPE]=A;this._featureMap[this.FEATURE_NOTSUPPRESSDUPLICATEVALUES_TYPE]=A;},enableGroupEdit:function(A){this._featureMap[this.FEATURE_MOVETOGROUP_TYPE]=A;this._featureMap[this.FEATURE_ADDGROUP_TYPE]=A;this._featureMap[this.FEATURE_DELETEGROUP_TYPE]=A;},enableMoveColumn:function(A){this._featureMap[this.FEATURE_MOVETOLEFT_TYPE]=A;this._featureMap[this.FEATURE_MOVETORIGHT_TYPE]=A;},enableSort:function(A){this._featureMap[this.FEATURE_SORT_ASC]=A;this._featureMap[this.FEATURE_SORT_DSC]=A;},enableAdvancedSort:function(A){this._featureMap[this.FEATURE_ADVANCEDSORT_TYPE]=A;},enableFilter:function(A){this._featureMap[this.FEATURE_FILTER_TYPE]=A;},enableChartSubType:function(A){this._featureMap[this.FEATURE_CHARTSUBTYPE_TYPE]=A;},enableFlashGadgetType:function(A){this._featureMap[this.FEATURE_FLASHGADGETTYPE_TYPE]=A;},enableTopBottomNFilter:function(A){this._featureMap[this.FEATURE_TOPBOTTOMNFILTER_TYPE]=A;},enableAggregation:function(A){this._featureMap[this.FEATURE_AGGREGATION_TYPE]=A;},enableTextEdit:function(A){this._featureMap[this.FEATURE_TEXTEDIT_TYPE]=A;this._featureMap[this.FEATURE_HEADERTEXTEDIT_TYPE]=A;},enableCollapseExpand:function(A){this._featureMap[this.FEATURE_HIDEDETAIL_TYPE]=A;this._featureMap[this.FEATURE_SHOWDETAIL_TYPE]=A;},enableFormat:function(A){this._featureMap[this.FEATURE_CHANGEFONT_TYPE]=A;this._featureMap[this.FEATURE_CHANGEHEADERFONT_TYPE]=A;this._featureMap[this.FEATURE_FORMAT_TYPE]=A;this._featureMap[this.FEATURE_ALIGNLEFT_TYPE]=A;this._featureMap[this.FEATURE_ALIGNCENTER_TYPE]=A;this._featureMap[this.FEATURE_ALIGNRIGHT_TYPE]=A;this._featureMap[this.FEATURE_HEADERALIGNLEFT_TYPE]=A;this._featureMap[this.FEATURE_HEADERALIGNCENTER_TYPE]=A;this._featureMap[this.FEATURE_HEADERALIGNRIGHT_TYPE]=A;this._featureMap[this.FEATURE_CONDITIONALFORMAT_TYPE]=A;this._featureMap[this.FEATURE_SHARESTYLE_TYPE]=A;},enablePageBreak:function(A){this._featureMap[this.FEATURE_PAGEBREAK_TYPE]=A;},enableSwitchView:function(A){this._featureMap[this.FEATURE_SWITCHVIEW_TYPE]=A;},enableEditReport:function(A){this._featureMap[this.FEATURE_EDITREPORT_TYPE]=A;},enableToolbarHelp:function(A){this._featureMap[this.FEATURE_TOOLBAR_HELP_TYPE]=A;},enableLinkToThisPage:function(A){this._featureMap[this.FEATURE_LINKTOTHISPAGE_TYPE]=A;},enableHighlight:function(A){this._featureMap[this.FEATURE_HIGHLIGHT_TYPE]=A;},enableHoverHighlight:function(A){this._featureMap[this.FEATURE_HOVERHIGHLIGHT_TYPE]=A;},enablePageNavigation:function(A){this._featureMap[this.FEATURE_PAGENAVIGATION_TYPE]=A;},enableChartProperty:function(A){this._featureMap[this.FEATURE_CHARTPROPERTY_TYPE]=A;},enableContentMargin:function(A){this._featureMap[this.FEATURE_CONTENT_MARGIN]=A;},enableLaunchViewer:function(A){this._featureMap[this.FEATURE_LAUNCHVIEWER_TYPE]=A;},enableToolbarContextMenu:function(A){this._featureMap[this.FEATURE_CONTEXT_MENU]=A;},enableDataAnalyzer:function(A){this._featureMap[this.FEATURE_DATAANALYZER]=A;},enableShowToolTip:function(A){this._featureMap[this.FEATURE_SHOWTOOLTIP]=A;},enableUndoRedo:function(A){this._featureMap[this.FEATURE_UNDO_REDO]=A;},enableFacebookComments:function(A){this._featureMap[this.FEATURE_FACEBOOK_COMMENTS]=A;},enableExportElement:function(A){this._featureMap[this.FEATURE_EXPORTELEMENT_TYPE]=A;},enableExportElementData:function(A){this._featureMap[this.FEATURE_EXPORTELEMENTDATA_TYPE]=A;}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.ScrollPanel=actuate.Class.create();actuate.viewer.impl.ScrollPanel.prototype={_hasPanInOut:false,_hasMouseScrolling:false,initialize:function(){this._hasPanInOut=true;this._hasMouseScrolling=true;},setPanInOutEnabled:function(A){this._hasPanInOut=A;},getPanInOutEnabled:function(){return this._hasPanInOut;},setMouseScrollingEnabled:function(A){this._hasMouseScrolling=A;},getMouseScrollingEnabled:function(){return this._hasMouseScrolling;}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.BrowserPanel=actuate.Class.create();actuate.viewer.impl.BrowserPanel.prototype={initialize:function(){}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.UIConfig=actuate.Class.create();actuate.viewer.impl.UIConfig.prototype={_contentPanel:null,_showToc:null,openLinkInNewWindow:true,initialize:function(){},setContentPanel:function(A){if(!(A instanceof actuate.viewer.ScrollPanel||A instanceof actuate.viewer.BrowserPanel)){throw new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Invalid content panel.");}else{this._contentPanel=A;}},getContentPanel:function(){return this._contentPanel;},setShowToc:function(A){this._showToc=A;},getShowToc:function(){return this._showToc;}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.RenderOptions=actuate.Class.create();actuate.viewer.impl.RenderOptions.prototype={_options:{},initialize:function(){},getOptions:function(){return this._options;},setOption:function(A,B){if(A){this._options[A]=B;}}};actuate.Class.extend(actuate.viewer.impl.RenderOptions,{IS_MULTISHEET:"isMultiSheet"});actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.HTMLControl=actuate.Class.create();actuate.viewer.impl.HTMLControl.prototype={onContentUpdate:function(A){this.unregisterEvents(this);},registerEvents:function(C,B){for(var A in C){if(A=="onfocus"){B.onfocus=function(D){C.onfocus(D);};}else{if(A=="onblur"){B.onblur=function(D){C.onblur(D);};}else{if(A=="onclick"){B.onclick=function(D){C.onclick(D);};}else{if(A=="ondblclick"){B.ondblclick=function(D){C.ondblclick(D);};}else{if(A=="onmousedown"){B.onmousedown=function(D){C.onmousedown(D);};}else{if(A=="onmouseup"){B.onmouseup=function(D){C.onmouseup(D);};}else{if(A=="onmouseover"){B.onmouseover=function(D){C.onmouseover(D);};}else{if(A=="onmousemove"){B.onmousemove=function(D){C.onmousemove(D);};}else{if(A=="onmouseout"){B.onmouseout=function(D){C.onmouseout(D);};}else{if(A=="onkeypress"){B.onkeypress=function(D){C.onkeypress(D);};}else{if(A=="onkeydown"){B.onkeydown=function(D){C.onkeydown(D);};}else{if(A=="onkeyup"){B.onkeyup=function(D){C.onkeyup(D);};}else{if(A=="onContentUpdate"){C.onContentUpdate_closure=actuate.Method.bind(C.onContentUpdate,C);if(C.getViewer()){C.getViewer().registerReportEventHandler(actuate.viewer.EventConstants.ON_CONTENT_CHANGED,C.onContentUpdate_closure);}}}}}}}}}}}}}}}},unregisterEvents:function(A){if(A.onContentUpdate_closure){A.getViewer().removeReportEventHandler(actuate.viewer.EventConstants.ON_CONTENT_CHANGED,A.onContentUpdate_closure);}}};actuate.util.Package.define("actuate.viewer.impl");actuate.viewer.impl.ParameterValue=actuate.Class.create();actuate.viewer.impl.ParameterValue.prototype={_name:null,_value:null,_valueIsNull:null,getName:function(){return this._name;},setName:function(A){this._name=A;},getValue:function(){return this._value;},setValue:function(A){this._value=A;},getValueIsNull:function(){return this._valueIsNull;},setValueIsNull:function(A){this._valueIsNull=A;}};actuate.util.Package.define("actuate.report.impl");actuate.report.impl.AbstractReportElement=actuate.Class.extendClass(actuate.common.Observable,{_reportContent:null,_htmlElement:null,_iid:null,_id:null,_validEvents:new Array("select"),initialize:function(A,B){actuate.common.Observable.prototype.initialize.call(this);this._reportContent=A;this.__setHtmlDom(B);},_init:function(){},_exceptionHandler:function(A){if(this._reportContent&&this._reportContent._exceptionHandler){this._reportContent._exceptionHandler(A);}else{throw A;}},_parseElementText:function(B){if(!B){return null;}var A=B.innerText||B.textContent;if(A){if(A=="\u00a0"){A="";}else{A=A.replace(/\u00a0/g," ");}A=actuate.util.String.trim(A);}else{A="";}return A;},getPageContent:function(){if(this._isObsolete()){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"This element instance is obsolete."));}return actuate.Class.getFacadeInstance(this._reportContent);},getHtmlDom:function(){if(this._isObsolete()){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"This element instance is obsolete."));}return this._htmlElement;},_isObsolete:function(){return !this._htmlElement;},__setHtmlDom:function(A){this._htmlElement=A;if(A){var B=A.id;B=B.substring(B.indexOf("_")+1);this._id=B;this._iid=A.getAttribute(actuate.viewer.impl.Constants.ATTR_IID);}this._init();},getInstanceId:function(){return this._iid;},getBookmark:function(){return this._id;},getType:function(){return null;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.ReportDataElement=actuate.Class.create();actuate.report.impl.ReportDataElement.prototype=actuate.Class.extend(new actuate.report.impl.AbstractReportElement(),{_batchOperationList:null,_visible:true,_init:function(){this.registerEventHandler("select",actuate.Method.bind(this._selectHandler,this));},_selectHandler:function(A){if(A){var C=A.getPageContent();var B=A.getBookmark();var D=C._._viewer?C._._viewer:C._viewer;if(B){if(B.indexOf(D._id)<0){B=D._id+"_"+B;}}D._helper.selectElement(B);}},_validate:function(){if(!this._id){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Invalid report data element (empty id)."));}if(this._isObsolete()){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"This element instance is obsolete."));}},_setFilters:function(D){if(!D){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"The filters argument is required."));}if(!actuate.util.Utility.isArray(D)){D=new Array(D);}this._validate();for(var B=0;B<D.length;B++){var C=D[B];var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.FILTER,value:C}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYFILTER,A);}},_clearFilters:function(A){var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_CLEARTOPBOTTOMN,B);this._addOperation(actuate.iv.core.IVEvent.__E_CLEARFILTER,B);},_setSorters:function(B){if(!B){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"The sorters argument is required."));}if(!actuate.util.Utility.isArray(B)){B=new Array(B);}this._validate();var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.SORTERS,value:B}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLY_SORT,A);},submit:function(B){if(B&&typeof (B)!="function"){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Invalid callback function passed to submit()"));}var A=this._reportContent._viewer;if(this._batchOperationList&&this._batchOperationList.length>0){if(!A.isPending()){A.__startPending(B,this);}else{if(B){B(actuate.Class.getFacadeInstance(A));}}A.__sendIVEvent(actuate.iv.core.IVEvent.__E_BATCH_UPDATE,true,this._batchOperationList,B,A._endPending_closure,A._exceptionHandlerClosure);this._batchOperationList=new Array();}else{if(B){B(actuate.Class.getFacadeInstance(A));}}},_addOperation:function(C,B){if(C){var A=[{name:actuate.data.impl.OptionKeys.IV_EVENT,value:C},{name:actuate.data.impl.OptionKeys.IV_OPTIONS,value:B}];var D=this._reportContent._viewer;if(D._gadgetId){A.push({name:"gadgetId",value:D._gadgetId});}if(!this._batchOperationList){this._batchOperationList=new Array();}this._batchOperationList.push(A);}},hide:function(){this._setVisible(false);this._visible=false;},show:function(){this._setVisible(true);this._visible=true;},_setVisible:function(A){this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:"ItemId",value:this._iid},{name:actuate.data.impl.OptionKeys.VISIBILITY,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYHIDESHOW_ITEM,B);}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Constants={ELEMENT_TYPE_TABLE:"Table",ELEMENT_TYPE_CHART:"Chart",ELEMENT_TYPE_FLASHCHART:"FlashCharts",ELEMENT_TYPE_LABEL:"Label",ELEMENT_TYPE_TEXT:"Text",ELEMENT_TYPE_DATA:"Data",ELEMENT_TYPE_GADGET:"FlashGadgets",ELEMENT_TYPE_FLASHOBJECT:"GeneralFlash",ELEMENT_TYPE_CROSSTAB:"Crosstab"};actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Chart=actuate.Class.create();actuate.Class.extend(actuate.report.impl.Chart,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_CHART,CHART:actuate.report.impl.Constants.ELEMENT_TYPE_CHART,FLASH_CHART:actuate.report.impl.Constants.ELEMENT_TYPE_FLASHCHART,CHART_DIMENSION_2D:"2D",CHART_DIMENSION_2D_WITH_DEPTH:"2D_depth",CHART_DIMENSION_3D:"3D",CHART_SUBTYPE_SIDEBYSIDE:"Side-by-side",CHART_SUBTYPE_STACKED:"Stacked",CHART_SUBTYPE_PERCENTSTACKED:"Percent Stacked"});actuate.report.impl.Chart._VALID_DIMENSIONS=[actuate.report.impl.Chart.CHART_DIMENSION_2D,actuate.report.impl.Chart.CHART_DIMENSION_2D_WITH_DEPTH,actuate.report.impl.Chart.CHART_DIMENSION_3D];actuate.report.impl.Chart._VALID_SUBTYPE=[actuate.report.impl.Chart.CHART_SUBTYPE_SIDEBYSIDE,actuate.report.impl.Chart.CHART_SUBTYPE_STACKED,actuate.report.impl.Chart.CHART_SUBTYPE_PERCENTSTACKED];actuate.report.impl.Chart.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{_chartType:actuate.report.impl.Constants.ELEMENT_TYPE_CHART,_init:function(){if(this._htmlElement){var A=this._htmlElement.getAttribute("element_type");if(A=="Chart"){this._chartType=actuate.report.impl.Constants.ELEMENT_TYPE_CHART;}if(A=="FlashCharts"){this._chartType=actuate.report.impl.Constants.ELEMENT_TYPE_FLASHCHART;}actuate.report.impl.ReportDataElement.prototype._init.call(this);}},setSubType:function(B){this._validate();if(this._validateSubType(B)){var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.CHART_SUBTYPE,value:B},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYTYPE,A);}},_validateSubType:function(B){var A=actuate.util.Utility.arrayIndexOf(actuate.report.impl.Chart._VALID_SUBTYPE,B);if(A>=0){return true;}this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Invalid chart subtype."));return false;},setDimension:function(B){this._validate();if(this._validateDim(B)){var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.CHART_DIMENSION,value:B},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYCHARTFORMAT,A);}},_validateDim:function(B){var A=actuate.util.Utility.arrayIndexOf(actuate.report.impl.Chart._VALID_DIMENSIONS,B);if(A>=0){return true;}this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Invalid chart dimension."));return false;},setChartTitle:function(B){this._validate();var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.CHART_TITLE,value:B},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYCHARTFORMAT,A);},setSize:function(C,A){this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.SIZE,value:[{name:actuate.data.impl.OptionKeys.WIDTH,value:parseInt(C||"0")},{name:actuate.data.impl.OptionKeys.WIDTHUNIT,value:"px"},{name:actuate.data.impl.OptionKeys.HEIGHT,value:parseInt(A||"0")},{name:actuate.data.impl.OptionKeys.HEIGHTUNIT,value:"px"}]},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYCHARTSIZE,B);},setFilters:function(){this._setFilters.apply(this,arguments);},clearFilters:function(){this._clearFilters.apply(this,arguments);},drillDownCategory:function(A){var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.BOOKMARK,value:this._id},{name:actuate.data.impl.OptionKeys.CHART_CATEGORIES_NAME,value:actuate.util.Utility.xmlEncode(A)},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_DRILLDOWN_FROM_CATEGORIES,B);},drillDownSeries:function(A){var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.BOOKMARK,value:this._id},{name:actuate.data.impl.OptionKeys.CHART_SERIES_NAME,value:actuate.util.Utility.xmlEncode(A)},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_DRILLDOWN_FROM_SERIES,B);},drillUpCategory:function(){var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.BOOKMARK,value:this._id},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_DRILLUP_FROM_CATEGORIES,A);},drillUpSeries:function(){var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.BOOKMARK,value:this._id},{name:actuate.data.impl.OptionKeys.DPI,value:actuate.util.Utility.getDPI()}];this._addOperation(actuate.iv.core.IVEvent.__E_DRILLUP_FROM_SERIES,A);},getClientChart:function(){if(this._htmlElement){var A=this._htmlElement.getAttribute("element_type");if(A=="Chart"){return actuate.report.Chart["ClientChart"+this._htmlElement.id];}}return null;},getType:function(){return this._chartType;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Crosstab=actuate.Class.create();actuate.Class.extend(actuate.report.impl.Crosstab,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_CROSSTAB});actuate.report.impl.Crosstab.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{_analyzerXtab:null,initialize:function(A,B){this._reportContent=A;this.__setHtmlDom(B);this._analyzerXtab=new actuate.xtabanalyzer.impl.Crosstab(A,B);},getRow:function(A){return this._analyzerXtab.getRow(A);},getColumn:function(A){return this._analyzerXtab.getColumn(A);},addDimension:function(A){this._analyzerXtab.addDimension(A);},removeDimension:function(B,A){this._analyzerXtab.removeDimension(B,A);},addMeasure:function(A){this._analyzerXtab.addMeasure(A);},editMeasure:function(A){this._analyzerXtab.editMeasure(A);},removeMeasure:function(A){this._analyzerXtab.removeMeasure(A);},pivot:function(){this._analyzerXtab.pivot();},setSorters:function(A){this._analyzerXtab.setSorters(A);},setFilters:function(A){this._analyzerXtab.setFilters(A);},showDetail:function(A,B){this._analyzerXtab.showDetail(A,B);},hideDetail:function(A){this._analyzerXtab.hideDetail(A);},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_CROSSTAB;},switchView:function(){this._validate();var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:"ItemId",value:this._iid}];this._addOperation(actuate.iv.core.IVEvent.__E_SWITCH_VIEW,A);}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.DataItem=actuate.Class.create();actuate.Class.extend(actuate.report.impl.DataItem,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_DATA});actuate.report.impl.DataItem.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{getData:function(){return this._parseElementText(this.getHtmlDom());},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_DATA;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.FlashObject=actuate.Class.create();actuate.Class.extend(actuate.report.impl.FlashObject,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_FLASHOBJECT});actuate.report.impl.FlashObject.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{setFilters:function(){this._setFilters.apply(this,arguments);},clearFilters:function(){this._clearFilters.apply(this,arguments);},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_FLASHOBJECT;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Gadget=actuate.Class.create();actuate.Class.extend(actuate.report.impl.Gadget,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_GADGET,GADGET_TYPE_BULLET:"Bullet",GADGET_TYPE_CYLINDER:"Cylinder",GADGET_TYPE_LINEARGAUGE:"LinearGauge",GADGET_TYPE_METER:"Meter",GADGET_TYPE_SPARK:"Spark",GADGET_TYPE_THERMOMETER:"Thermometer"});actuate.report.impl.Gadget.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{setGadgetType:function(B){this._validate();if(!B||(B!=actuate.report.impl.Gadget.GADGET_TYPE_BULLET&&B!=actuate.report.impl.Gadget.GADGET_TYPE_CYLINDER&&B!=actuate.report.impl.Gadget.GADGET_TYPE_LINEARGAUGE&&B!=actuate.report.impl.Gadget.GADGET_TYPE_METER&&B!=actuate.report.impl.Gadget.GADGET_TYPE_SPARK&&B!=actuate.report.impl.Gadget.GADGET_TYPE_THERMOMETER)){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_CLIENT,"Invalid Gadget Type."));}var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.CHART_SUBTYPE,value:B}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYTYPE,A);},setSize:function(C,A){this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.SIZE,value:[{name:actuate.data.impl.OptionKeys.WIDTH,value:parseInt(C||"0")},{name:actuate.data.impl.OptionKeys.WIDTHUNIT,value:"px"},{name:actuate.data.impl.OptionKeys.HEIGHT,value:parseInt(A||"0")},{name:actuate.data.impl.OptionKeys.HEIGHTUNIT,value:"px"}]}];this._addOperation(actuate.iv.core.IVEvent.__E_APPLYGADGETFORMAT,B);},setFilters:function(){this._setFilters.apply(this,arguments);},clearFilters:function(){this._clearFilters.apply(this,arguments);},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_GADGET;},getClient:function(){if(this._htmlElement){var A=this._htmlElement.getAttribute("element_type");if(A==actuate.report.impl.Constants.ELEMENT_TYPE_GADGET){return actuate.report.Chart["ClientChart"+this._htmlElement.id];}}return null;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Label=actuate.Class.create();actuate.Class.extend(actuate.report.impl.Label,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_LABEL});actuate.report.impl.Label.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{getLabel:function(){return this._parseElementText(this.getHtmlDom());},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_LABEL;}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.Table=actuate.Class.create();actuate.Class.extend(actuate.report.impl.Table,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_TABLE});actuate.report.impl.Table.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{_tableData:null,_init:function(){this._tableData=null;},_parseTableCell:function(D){var B="";var C=D;var A=D.getElementsByTagName("div");if(A&&A.length>0){C=A[0];}B=this._parseElementText(C);return B;},getRow:function(D){this._parseTableData();D--;if(D<0||D>=this._tableData.length){return null;}var C=this._tableData[D];var B=new Array();for(var A=0;A<C.length;A++){B.push(C[A]);}return B;},getColumn:function(A){this._parseTableData();A--;if(A<0||A>=this._tableData[0].length){return null;}var B=new Array();for(var C=0;C<this._tableData.length;C++){B.push(this._tableData[C][A]);}return B;},_parseTableData:function(B){var A=this.getHtmlDom();if(this._tableData&&!B){return ;}this._tableData=new Array();var I=A.rows;if(I&&I.length>0){for(var D=0;D<I.length;D++){var F=A.rows[D];var C=F.getAttribute("row-type");if(C!="header"&&C!="footer"){var H=F.cells;var E=new Array();for(var G=0;G<H.length;G++){E.push(this._parseTableCell(H[G]));}this._tableData.push(E);}}}},swapColumns:function(D,B){if(!D||!B){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column names array argument is required."));}this._validate();var C=new Array();C.push(D);C.push(B);var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAMES,value:C}];this._addOperation(actuate.iv.core.IVEvent.__E_SWAPCOLUMNS,A);},showColumn:function(A){if(!A){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column name argument is required."));}this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_SHOW_COLUMN,B);},hideColumn:function(A){if(!A){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column name argument is required."));}this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_HIDE_COLUMN,B);},showDetail:function(A){if(!A){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column name argument is required."));}this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_SHOWDETAIL,B);},hideDetail:function(A){if(!A){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column name argument is required."));}this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_HIDEDETAIL,B);},groupBy:function(A){if(!A){this._exceptionHandler(new actuate.viewer.ViewerException(actuate.Exception.ERR_USAGE,"Column name argument is required."));}this._validate();var B=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:actuate.data.impl.OptionKeys.COLUMN_NAME,value:A}];this._addOperation(actuate.iv.core.IVEvent.__E_ADD_GROUP,B);},removeGroup:function(){this._validate();var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()}];this._addOperation(actuate.iv.core.IVEvent.__E_DELETE_GROUP,A);},setFilters:function(){this._setFilters.apply(this,arguments);},clearFilters:function(){this._clearFilters.apply(this,arguments);},setSorters:function(){this._setSorters.apply(this,arguments);},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_TABLE;},switchView:function(){this._validate();var A=[{name:actuate.data.impl.OptionKeys.IID,value:this._iid},{name:actuate.data.impl.OptionKeys.TYPE,value:this.getType()},{name:"ItemId",value:this._iid}];this._addOperation(actuate.iv.core.IVEvent.__E_SWITCH_VIEW,A);}});actuate.util.Package.define("actuate.report.impl");actuate.report.impl.TextItem=actuate.Class.create();actuate.Class.extend(actuate.report.impl.TextItem,{TYPE:actuate.report.impl.Constants.ELEMENT_TYPE_TEXT});actuate.report.impl.TextItem.prototype=actuate.Class.extend(new actuate.report.impl.ReportDataElement(),{getText:function(){return this._parseElementText(this.getHtmlDom());},getType:function(){return actuate.report.impl.Constants.ELEMENT_TYPE_TEXT;}});