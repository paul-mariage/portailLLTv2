actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.IVExceptionDialog=actuate.Class.extendClass(actuate.iv.ui.dialog.AbstractIVDialog,{_classname:"actuate.iv.ui.dialog.IVExceptionDialog",_width:350,_htmlElements:{"_faultstring":null,"_stacktraceicon":null,"_stacktracerow":null,"_stacktrace":null},hasCancelButton:true,_isDashboardException:false,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.iv.ui.dialog.AbstractIVDialog.prototype.initialize.call(this,A,"290px");this._faultstringObj=document.getElementById(this._htmlElements["_faultstring"]);this._stacktraceiconObj=document.getElementById(this._htmlElements["_stacktraceicon"]);this._stacktracerowObj=document.getElementById(this._htmlElements["_stacktracerow"]);this._stacktraceObj=document.getElementById(this._htmlElements["_stacktrace"]);this._installEventHandlers(A);},_installEventHandlers:function(A){if(this._stacktraceiconObj){actuate.util.Event.observe(this._stacktraceiconObj,"click",actuate.Method.bindAsEventListener(this._neh_collapseExpand,this),false);}},_preShow:function(){if(!this._visible&&this._consumer._viewingMode&&(this._consumer._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_NORMAL||this._consumer._viewingMode==actuate.Constant.ViewingMode.DASHBOARD_MAX)){var B=this._consumer._helper.container;if(B&&B.offsetParent&&B.offsetParent.offsetParent){var D=B.offsetParent.offsetParent.offsetParent;var G=B.offsetParent.offsetParent.getBoundingClientRect().top;var E=B.offsetParent.offsetParent.getBoundingClientRect().height;var I=this._consumer._helper.contentPanel.instance.getBoundingClientRect().top;if(D){var C=D.scrollTop;var F=D.getBoundingClientRect().top;var K=document.body.clientHeight;var J=this._window.getEl().dom.clientHeight;var A=I+50+J;if(G-F<0){D.scrollTop+=G-F;}else{if(A>K){var H=A-K;if(H>0){D.scrollTop+=H;}}}}}}},_localBind:function(C){if(!C){return ;}var B=C.getElementsByTagName("faultstring");if(B[0]&&B[0].firstChild){this._faultstringObj.innerHTML=B[0].firstChild.data;}else{this._faultstringObj.innerHTML="";}if(this._stacktraceiconObj){var A=C.getElementsByTagName("string");if(A[0]&&A[0].firstChild){this._stacktraceObj.innerHTML=A[0].firstChild.data;}else{this._stacktraceObj.innerHTML="";}this._stacktraceiconObj.collapsed=true;this._stacktracerowObj.style.display="none";}this._processButtonStatus();},_bind:function(C){if(!C){return ;}var B=C.getElementsByTagName("faultstring");if(B[0]&&B[0].firstChild){this._faultstringObj.innerHTML=B[0].firstChild.data;}else{this._faultstringObj.innerHTML="";}if(this._stacktraceiconObj){var A=C.getElementsByTagName("string");if(A[0]&&A[0].firstChild){this._stacktraceObj.innerHTML=A[0].firstChild.data;}else{this._stacktraceObj.innerHTML="";}this._stacktraceiconObj.collapsed=true;this._stacktracerowObj.style.display="none";}this._processButtonStatus();this.adjustSize();},_processButtonStatus:function(){if(this._viewer&&this._viewer.apiInstance){this._isDashboardException=this._viewer.apiInstance.getViewingMode()!=actuate.Constant.ViewingMode.NON_DASHBOARD;}var A=this.__getOkText();if(!this._isDashboardException){A=actuate.iv.ui.dialog.IVExceptionDialog.superclass.__getOkText.apply(this,arguments);this._cancelBtn.hide();}else{this._cancelBtn.show();}this._okBtn.setText(A);},_okPress:function(){this._hide();if(this._isDashboardException){window.location.reload();}},__getHelpTopic:function(){return"iv_exception";},__getOkText:function(){var A=actuate.util.Utility.getLocalizedString("baseDialog.button.refresh");return A;},_neh_collapseExpand:function(A){actuate.util.Event.stop(A);this._stacktraceiconObj.collapsed=!this._stacktraceiconObj.collapsed;this._stacktracerowObj.style.display=this._stacktraceiconObj.collapsed?"none":"";this._stacktraceiconObj.className=this._stacktraceiconObj.collapsed?"exception_dialog_stacktrace_collapsed":"exception_dialog_stacktrace_expanded";this.adjustSize();}});