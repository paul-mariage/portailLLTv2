actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.IVPrintDialog=actuate.Class.create();actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_AUTO="auto";actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_ACTUALSIZE="actualSize";actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_FIT_TOWHOLE="fitToWholePage";actuate.iv.ui.dialog.IVPrintDialog.prototype=actuate.Class.extend(new actuate.iv.ui.dialog.AbstractIVDialog(),{_classname:"actuate.iv.ui.dialog.IVPrintDialog",_htmlElements:{"_format_html":null,"_format_pdf":null,"_format_pdf_pagination":null,"_PrintReportPageSizeInfo":null,"_pagerange_all":null,"_pagerange_current":null,"_pagerange_pages":null,"_pages":null,"_Format":null,"_PagesDiv":null,"_printLimitInfo":null},_height:340,_width:330,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.iv.ui.dialog.AbstractIVDialog.prototype.initialize.call(this,A);this._initTemplates();this._initContent();this._local_installEventHandlers(A);},_initContent:function(){var A=[];this._htmlRadio=new actuate.uiadapter.Radio({cls:actuate.iv.constant.CSS_INPUTBOX,name:"printDialog.id.format",valueText:"html",boxLabel:actuate.util.Utility.getLocalizedString("printDialog.format.html"),value:"html",label:actuate.util.Utility.getLocalizedString("printDialog.format.html"),checked:true});this._pdfRadio=new actuate.uiadapter.Radio({cls:actuate.iv.constant.CSS_INPUTBOX,name:"printDialog.id.format",valueText:"pdf",boxLabel:actuate.util.Utility.getLocalizedString("printDialog.format.pdf"),value:"pdf",label:actuate.util.Utility.getLocalizedString("printDialog.format.pdf")});this._htmlRadio.render(this._htmlElements["_format_html"]);this._pdfRadio.render(this._htmlElements["_format_pdf"]);var C=[["auto","printDialog.format.pdf.auto"],["actualSize","printDialog.format.pdf.actualSize"],["fitToWholePage","printDialog.format.pdf.fit"]];for(var B=0;B<C.length;B++){C[B][1]=actuate.util.Utility.getLocalizedString(C[B][1]);}this._pdfPageSelectDiv=document.getElementById(this._htmlElements["_format_pdf_pagination"]);this._pdfPageSelect=new actuate.uiadapter.ComboBox({editable:false,width:150,store:C});this._pdfPageSelect.render(this._pdfPageSelectDiv);this._idPageSizeInfo=document.getElementById(this._htmlElements["_PrintReportPageSizeInfo"]);this._pageRangeCurrentRadio=new actuate.uiadapter.Radio({cls:actuate.iv.constant.CSS_INPUTBOX,name:"printDialog.id.pagerange",valueText:"Current",boxLabel:actuate.util.Utility.getLocalizedString("printDialog.pagerange.current"),value:"Current",label:actuate.util.Utility.getLocalizedString("printDialog.pagerange.current"),checked:true});this._pageRangeAllRadio=new actuate.uiadapter.Radio({cls:actuate.iv.constant.CSS_INPUTBOX,name:"printDialog.id.pagerange",valueText:"All",boxLabel:actuate.util.Utility.getLocalizedString("printDialog.pagerange.all"),value:"All",label:actuate.util.Utility.getLocalizedString("printDialog.pagerange.all")});this._pageRangeRadio=new actuate.uiadapter.Radio({cls:actuate.iv.constant.CSS_INPUTBOX,name:"printDialog.id.pagerange",valueText:"Pages",boxLabel:actuate.util.Utility.getLocalizedString("printDialog.pagerange.pages"),value:"Pages",label:actuate.util.Utility.getLocalizedString("printDialog.pagerange.pages")});this._pageRangeCurrentRadio.render(this._htmlElements["_pagerange_current"]);this._pageRangeAllRadio.render(this._htmlElements["_pagerange_all"]);this._pageRangeRadio.render(this._htmlElements["_pagerange_pages"]);this._pageRangeText=new actuate.uiadapter.TextField({cls:actuate.iv.constant.CSS_INPUTBOX,name:"pages",width:150});this._pageRangeText.render(this._htmlElements["_pages"]);},_initTemplates:function(){var B=document.createElement("div");var J=new actuate.uiadapter.Template('<TABLE CELLPADDING="0px" CELLSPACING="0px" >'+"	<TR>"+'		<TD colspan="2">'+'			<SPAN ID="actuate_iv_ui_dialog_ivPrintDialog_format_html"></SPAN>'+"		</TD>"+"	</TR>"+"	<TR>"+"		<TD NOWRAP>"+'			<SPAN ID="actuate_iv_ui_dialog_ivPrintDialog_format_pdf" NOWRAP></SPAN>'+"		</TD>"+'		<TD><DIV ID="actuate_iv_ui_dialog_ivPrintDialog_format_pdf_pagination" style="WIDTH:156px; margin-top: 1px; padding-left: 2px; align:right;"></TD>'+"	</TR>"+"	<TR>"+"		<TD></TD>"+"		<TD >"+'			<DIV ID="actuate_iv_ui_dialog_ivPrintDialog_PrintReportPageSizeInfo"style="WIDTH:156px;" ></DIV>'+"		</TD>"+"	</TR>"+"</TABLE>");var F=J._append(B,null,true);var H=new actuate.uiadapter.FieldSet({checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("printDialog.fieldset.lable.format"),autoHeight:true,defaultType:"textfield",contentEl:B});H.render(this._htmlElements["_Format"]);var I=document.createElement("div");var D=new actuate.uiadapter.Template('<TABLE CELLPADDING="0px" CELLSPACING="0px">'+"	<TR>"+"		<TD>"+'			<SPAN ID="actuate_iv_ui_dialog_ivPrintDialog_pagerange_all"></SPAN>'+"		</TD>"+"	</TR>"+"	<TR>"+"		<TD>"+'			<SPAN ID="actuate_iv_ui_dialog_ivPrintDialog_pagerange_current"></SPAN>'+"		</TD>"+"	</TR>"+"	<TR>"+'		<TD COLSPAN="2">'+'			<table CELLPADDING="0px" CELLSPACING="0px">'+'           <tr><td ID="actuate_iv_ui_dialog_ivPrintDialog_pagerange_pages" style="vertical-align: top; padding: 0px;"></td>'+'			<td style="padding: 0px 0px 0px 4px;">'+'			<span ID="actuate_iv_ui_dialog_ivPrintDialog_pages"></span><br/>'+"			<label>{0}</label></td>"+"           </tr></table>"+"		</TD>"+"	</TR>"+"	<TR></TR>"+"	<TR>"+"		<TD>"+'			<DIV CLASS="padding" id="actuate_iv_ui_dialog_ivPrintDialog_printLimitInfo">'+"				{1}"+"			</DIV>"+"		</TD>"+"	</TR>"+"</TABLE>");var G=actuate.util.Utility.getLocalizedString("printDialog.printLimitInfo",this._viewer?this._viewer.pageLimit:200);var A=[actuate.util.Utility.getLocalizedString("printDialog.pagerangesample"),G];var E=D._append(I,A,true);var C=new actuate.uiadapter.FieldSet({margins:{top:"2px",right:"2px",bottom:"2px",left:"2px"},checkboxToggle:false,title:actuate.util.Utility.getLocalizedString("printDialog.fieldset.lable.pages"),autoHeight:true,defaultType:"textfield",contentEl:I});C.render(this._htmlElements["_PagesDiv"]);},_updateLimitInfo:function(){var A=actuate.util.Utility.getLocalizedString("printDialog.printLimitInfo",this._viewer?this._viewer.pageLimit:200);this._pageLimitDiv=document.getElementById(this._htmlElements["_printLimitInfo"]);this._pageLimitDiv.innerHTML=A;},_show:function(){this._updateLimitInfo();actuate.iv.ui.dialog.AbstractIVDialog.prototype._show.call(this);},_local_installEventHandlers:function(B){var A=actuate.Method.bind(this._neh_click,this);this._htmlRadio.registerEventHandler("check",A);this._pdfRadio.registerEventHandler("check",A);this._neh_pdfPageSelectClick_c=actuate.Method.bind(this._neh_pdfPageSelectClick,this);this._pdfPageSelect.registerEventHandler("select",this._neh_pdfPageSelectClick_c);},_bind:function(A){this._localBind(A);},_localBind:function(C){this._pdfPageSelect.setSelectedIndex(0);var B=this._viewer.uiConfig.DefaultPrintFormat;if(B&&B.toLowerCase()=="pdf"){this._pdfRadio.setValue(true);this._neh_click();}else{this._htmlRadio.setValue(true);this._pdfPageSelect.disable();}if(C&&C.pdfConversionOption){var D=C.pdfConversionOption.conversionOptions;if(D){for(var A=0;A<D.length;A++){if(D[A].name=="$$$AC_CONVERSION_OPTION_rptdocument_PDF_PageStyle"){if(D[A].defaultValue){this._pdfPageSelect.setValue(D[A].defaultValue);}}}}}this._pageRangeCurrentRadio.setValue(true);this._pageRangeText.setValue("");this._idPageSizeInfo.style.display="none";this._neh_pdfPageSelectClick();},_neh_click:function(A){if(this._htmlRadio.isChecked()){this._pdfPageSelect.disable();this._idPageSizeInfo.style.display="none";}else{this._pdfPageSelect.enable();this._idPageSizeInfo.style.display="block";}},_neh_pdfPageSelectClick:function(){if(this._pdfPageSelect.getValue()==actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_ACTUALSIZE){this._idPageSizeInfo.innerHTML=actuate.util.Utility.getLocalizedString("printDialog.actualSizeInfo");}else{if(this._pdfPageSelect.getValue()==actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_FIT_TOWHOLE){this._idPageSizeInfo.innerHTML=actuate.util.Utility.getLocalizedString("printDialog.fitToPageInfo");}else{if(this._pdfPageSelect.getValue()==actuate.iv.ui.dialog.IVPrintDialog.PAGE_STYLE_AUTO){this._idPageSizeInfo.innerHTML="";}}}this.adjustSize();},_okPress:function(){if(this._pageRangeRadio.getValue()){this._viewer._document._selectionManager._previousWarningFocusObj=document.getElementById(this._pageRangeText);var B=this._pageRangeText.getValue();var A=null;if(B.indexOf(",")>-1){A=B.split(",");}else{A=new Array(1);A[0]=B;}for(var C=0;C<A.length;C++){if(A[C]!=null){A[C]=A[C].replace(/^\s*|\s*$/g,"");}var D=this._validatePageNumbers(A[C]);if(D!="valid"){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_WARN,D);return false;}}}else{this._pageRangeText.setValue("");}this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_APPLY_PRINT,this._getObjectArray());this._hide();},__getHelpTopic:function(){return"iv_print";},_validatePageNumbers:function(B){var C=this._viewer.totalPage;var A=null;var F=false;var G="valid";if(B.indexOf("-")>-1){A=B.split("-");if(A.length>2){G=actuate.util.Utility.getLocalizedString("error.printDialog.oneDashInRange");return G;}F=true;}else{A=new Array(1);A[0]=B;}for(var D=0;D<A.length;D++){if(A[D]!=null){A[D]=A[D].replace(/^\s*|\s*$/g,"");}if(!isFinite(A[D]*1)||Math.floor(A[D])!=A[D]){G=actuate.util.Utility.getLocalizedString("error.printDialog.pageNumberPositiveInteger");return G;}else{if(A[D]*1<1*1||A[D]*1>C*1){var E=actuate.util.Utility.getLocalizedString("error.printDialog.invalidPageRange");C=(C+"").replace(/^\s*|\s*$/g,"");E=E.replace("{variable1}",1);E=E.replace("{variable2}",C);return E;}}}if(F){if(A[0]*1>A[1]*1){G=actuate.util.Utility.getLocalizedString("error.printDialog.reversePageRange")+" ("+B+")";return G;}}return G;},_getFormat:function(){if(this._htmlRadio.isChecked()){return"html";}else{return"pdf";}},_getPageRange:function(){if(this._pageRangeAllRadio.isChecked()){return"1-"+this._viewer.totalPage;}else{if(this._pageRangeCurrentRadio.isChecked()){return this._viewer.currentPage;}else{return this._pageRangeText.getValue();}}},_getObjectArray:function(){var A=new Array();A.push({name:"format",value:this._getFormat()});A.push({name:"pageRange",value:this._getPageRange()});if(this._pdfRadio.getValue()){A.push({name:"pageStyle",value:this._pdfPageSelect.getValue()});}return A;}});