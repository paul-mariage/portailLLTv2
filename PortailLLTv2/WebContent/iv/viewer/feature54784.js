actuate.util.Package.define("actuate.iv.ui.dialog");actuate.iv.ui.dialog.ConditionSelectionView=actuate.Class.create();actuate.iv.ui.dialog.ConditionSelectionView.prototype={initialize:function(G,A,F,D,H,E,C,B){this.conditionColumnId=G;this.operatorId=A;this.value1Id=F;this.value2Id=D;this.changeValueButton1Id=H;this.changeValueButton2Id=E;this.value1Label=C;this.value2Label=B;this._generateConstants();this.operatorMenuType=null;this.operatorMenu={};this.boundColumn={};this.dataType={};this.param_num={};},_generateConstants:function(){var B=[];B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_EQ,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.eq"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.ne"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_LT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.lt"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_LE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.le"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_GE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.ge"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_GT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.gt"),1));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_BETWEEN,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.between"),2));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NOT_BETWEEN,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.notBetween"),2));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NULL,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.null"),0));B.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NOT_NULL,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.notNull"),0));var D=[];D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TRUE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.true"),0));D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_FALSE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.false"),0));D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.topN"),1));D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.bottomN"),1));D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.topPercent"),1));D.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.bottomPercent"),1));this.numberOperators=B.concat(D);var C=[];C.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_LIKE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.like"),1));C.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NOT_LIKE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.notLike"),1));this.stringOperators=B.concat(C);this.dateOperators=B;var A=[];A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TRUE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.true"),0));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_FALSE,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.false"),0));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NULL,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.null"),0));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_NOT_NULL,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.notNull"),0));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TOP_N,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.topN"),1));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_BOTTOM_N,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.bottomN"),1));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_TOP_PERCENT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.topPercent"),1));A.push(new actuate.iv.ui.dialog.ConditionalFormattingOperator(actuate.Constant.DesignChoice.FILTER_OPERATOR_BOTTOM_PERCENT,actuate.util.Utility.getLocalizedString("conditionFormatDialog.text.bottomPercent"),1));this.booleanOperators=A;},getConditionColumnValue:function(){return this.conditionColumnId.getValue();},getConditionColumnDataType:function(){var A=this.conditionColumnId.getValue();if(A&&this.boundColumn[A]){return this.boundColumn[A].dataType;}else{return null;}},_isAvailable:function(B){var A=false;if(B){A=!(B.isSubQuery&&B.isAggregation);}return A;},setConditionColumnOptions:function(C){var D=this.conditionColumnId;var B=[];for(var A=0;A<C.length;A++){if(this._isAvailable(C[A])){B.push([C[A].name,C[A].displayName]);this.boundColumn[C[A].name]=C[A];this.operatorMenu[C[A].name]=this.getOperatorMenu(C[A].dataType);}}D.setStore(B);},getOperatorMenu:function(C){var B=actuate.Constant.DataType;var A;switch(C){case B.INTEGER:case B.FLOAT:case B.DECIMAL:A=1;break;case B.STRING:A=0;break;case B.DATETIME:case B.TIME:case B.DATE:A=2;break;case B.BOOLEAN:A=3;break;default:A=0;}return A;},resetOperatorMenu:function(){this.operatorId.clear();},addOperatorOptions:function(C){var A=this.operatorId;var B=[];for(var D=0;D<C.length;D++){var E=C[D];B.push([E.getValue(),E.getDisplayText()]);this.param_num[E.getValue()]=E.getNumberOfParams();}A.setStore(B);},getOperatorValue:function(){return this.operatorId.getValue();},getOperatorText:function(){return this.operatorId.lastSelectionText;},getNumberOfParams:function(){return this.getParamNum(this.operatorId.getValue());},getParamNum:function(A){var B=this.param_num[A];if(B!=undefined){return parseInt(B);}return 0;},getValue1Value:function(){return this.value1Id.getValue();},setValue1Value:function(A){this.value1Id.setValue(A);this.updateValue1Title();},getValue2Value:function(){return this.value2Id.getValue();},setValue2Value:function(A){this.value2Id.setValue(A);this.updateValue2Title();},updateValue1Title:function(){var A=this.value1Id;A.getEl().dom.setAttribute("title",A.getValue());},updateValue2Title:function(){var A=this.value2Id;A.getEl().dom.setAttribute("title",A.getValue());},resetValues:function(B,A){this.setValue1Value(B);this.setValue2Value(A);},setValues:function(B,D,C,A){this.setListValue(this.conditionColumnId,B);this.setOperatorMenuType();this.setListValue(this.operatorId,D);this.setValue1Value(C);this.setValue2Value(A);this.showOprandBoxes();},setOperatorMenuValue:function(A){this.setListValue(this.operatorId,A);},reset:function(A){this.setValues(A.getConditionColumnValue(),A.getOperator(),A.getValue1(),A.getValue2());},setOperatorMenuType:function(){var B=this.operatorMenu[this.conditionColumnId.getValue()];if(B==this.operatorMenuType){return ;}var A;switch(B){case 0:A=this.stringOperators;break;case 1:A=this.numberOperators;break;case 3:A=this.booleanOperators;break;case 2:A=this.dateOperators;break;default:A=[];break;}this.resetOperatorMenu();this.addOperatorOptions(A);this.operatorMenuType=B;},init:function(){this.reset();},getListValue:function(A){A.getValue();},getListText:function(A){A.getText();},setListValue:function(A,B){A.setValue(B);},showOprandBoxes:function(){var A=this.getNumberOfParams();switch(A){case 2:this.displayOprandBoxes(true,true);break;case 1:this.displayOprandBoxes(true,false);break;default:this.displayOprandBoxes(false,false);}},displayOprandBoxes:function(B,A){this.value1Id.setVisibility(B);this.value2Id.setVisibility(A);document.getElementById(this.value1Label).style.display=B?"block":"none";document.getElementById(this.value2Label).style.display=A?"block":"none";document.getElementById(this.changeValueButton1Id).style.display=B?"block":"none";document.getElementById(this.changeValueButton2Id).style.display=A?"block":"none";}};