actuate.util.Package.define("actuate.iv.ui.dialog.group");actuate.iv.ui.dialog.group.IVHideShowItemDialog=actuate.Class.create();actuate.iv.ui.dialog.group.IVHideShowItemDialog.prototype=actuate.Class.extend(new actuate.iv.ui.dialog.AbstractIVDialog(),{_classname:"actuate.iv.ui.dialog.group.IVHideShowItemDialog",_width:341,_htmlElements:{"_hideShowItemsDiv":null,"_hideShowItemsUL":null,"_hideShowItemsClearAll":null},_checkboxTree:[],_itemsCount:0,initialize:function(){var A=this._getId(this._classname);this._applyHtmlElementsNames(A);actuate.iv.ui.dialog.AbstractIVDialog.prototype.initialize.call(this,A);this.hideShowItemsUI=document.getElementById(this._htmlElements["_hideShowItemsUL"]);this.hideShowItemsClearAll=document.getElementById(this._htmlElements["_hideShowItemsClearAll"]);this.hideShowItemsDiv=document.getElementById(this._htmlElements["_hideShowItemsDiv"]);this.clearAllChecks_c=actuate.Method.bind(this.clearAllChecks,this);actuate.util.Event.observe(this.hideShowItemsClearAll,"href",this.clearAllChecks_c,false);this.operationData=null;this.reportItemVisibleList=null;},_localBind:function(A){if(!A){return ;}this.showItemsTree(A);this.collapseAll(this.hideShowItemsUI);},_okPress:function(){this._viewer.eventDispatcher.broadcastEvent(actuate.iv.core.iVEvent.__E_APPLYHIDESHOW_ITEM,this.htmlId);this._hide();},__getHelpTopic:function(){return"iv_hideshowitem";},_preHide:function(){var A=this.hideShowItemsDiv.getElementsByTagName("input");for(var B=0;B<A.length;B++){if(A[B].id.indexOf("img_")>=0){A[B].style.visibility="hidden";}}},showItemsTree:function(C){var D=document.createElement("span");var B=C[actuate.model.Constant.MetadataType.ELEMENT];while(this.hideShowItemsUI.firstChild){this.hideShowItemsUI.removeChild(this.hideShowItemsUI.firstChild);}this.hideShowItemsUI.appendChild(D);this._checkboxTree={children:this.createListNodes(B,D)};if(this._itemsCount>7){this.hideShowItemsDiv.className="itemsDiv bigHeight";}else{this.hideShowItemsDiv.className="itemsDiv smallHeight";}var A=new actuate.uiadapter.Scroller(this.hideShowItemsUI,{vertical:true,direction:"vertical",bounces:"vertical"});},createListNodes:function(T,A,F){var N=null;if(F){var R=F.iid;R=R.substr(R.indexOf("/")+1);var E=document.createElement("div");N=document.createElement("ul");N.id="ul_"+R;N.className="uLAndLi";E.appendChild(N);A.appendChild(E);}else{N=A;F=T;}var I=[];this._itemsCount=0;for(var S=0;S<F.children.length;S++){var O=F.children[S];var H=T.elements[O];if(H){this._itemsCount++;var L=H.iid.substr(H.iid.indexOf("/")+1);var P=(H.children&&H.children.length>0);var M=document.createElement("li");M.id="li_"+L;M.className="uLAndLi";N.appendChild(M);var V=document.createElement("table");M.appendChild(V);var U=document.createElement("tbody");V.appendChild(U);var B=document.createElement("tr");U.appendChild(B);var G=document.createElement("td");B.appendChild(G);var K=document.createElement("input");K.type="button";K.className="imageUrl actuateCSSSprite_firstload actuateIV_Expand";K.id="img_"+L;K.style.visibility=P?"visible":"hidden";K.onclick=this.__neh_showHide;G.appendChild(K);G=document.createElement("td");B.appendChild(G);var W="chkbox_"+L;var D=document.createElement("SPAN");var J=new actuate.uiadapter.Checkbox({cls:"checkboxAlign "+actuate.iv.constant.CSS_INPUTBOX,checked:H.visible,id:W,boxLabel:H.name,labelAlign:"right",labelWidth:200,valueText:H.name});D.id="SPAN_"+W;G.appendChild(D);J.render(D.id);J.registerEventHandler("check",actuate.Method.bind(this.__neh_checkboxClick,this));var C=null;if(P){C=this.createListNodes(T,M,H);for(var Q=0;Q<C.length;Q++){C[Q].parent=J.config.id;}}I.push({id:J.config.id,object:J,children:C});}}return I;},__neh_checkboxClick:function(A){if(A){this.checkChildren(A);this.checkUnCheckParent(A);}},checkChildren:function(E){var D=this._findCheckboxNode(E.id,this._checkboxTree);if(!D||!D.children){return ;}var B=D.children;for(var A=0;A<B.length;A++){var F=B[A].object;if(F){var C=D.object.isChecked();this._setCheckboxValue(F,C);this.checkChildren(this._getCheckbox(F.config.id),C);}}},checkUnCheckParent:function(D){var C=this._findCheckboxNode(D.id,this._checkboxTree);if(!C||!C.parent){return ;}var B=this._findCheckboxNode(C.parent,this._checkboxTree);if(!B||!B.children||!B.id){return ;}var A=B.object;if(!A){return ;}if(C.object.isChecked()){this._setCheckboxValue(A,true);}this.checkUnCheckParent(this._getCheckbox(A.config.id));},__neh_showHide:function(){var A=this;actuate.iv.ui.dialog.group.ivHideShowItemDialog.__expandCollapse(A);},__expandCollapse:function(C){var A=C.parentNode.parentNode.parentNode.parentNode.parentNode;for(var B=0;B<A.childNodes.length;B++){if(A.childNodes[B].tagName=="DIV"||A.childNodes[B].tagName=="div"){if(A.childNodes[B].style.display=="none"){A.childNodes[B].style.display="block";C.className="imageUrl actuateCSSSprite_firstload actuateIV_Expand";}else{A.childNodes[B].style.display="none";C.className="imageUrl actuateCSSSprite_firstload actuateIV_Collapse";}}}},clearAllChecks:function(){this.recursiveClearAll(this._checkboxTree);},recursiveClearAll:function(C){if(!C){return ;}var D=C.object;if(D){this._setCheckboxValue(D,false);}if(C.children){var B=C.children;for(var A=0;A<B.length;A++){this.recursiveClearAll(B[A]);}}},collapseAll:function(C){for(var B=0;B<C.childNodes.length;B++){if(C.childNodes[B].tagName!="undefined"&&C.childNodes[B].tagName!=null){var A=C.childNodes[B];if(A.tagName.toLowerCase()=="input"&&A.type.toLowerCase()=="button"){this.__expandCollapse(C.childNodes[B]);}}this.collapseAll(C.childNodes[B]);}},createSoapResponse:function(){var A=this.hideShowItemsUI;this.operationData=actuate.util.XmlDom.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);this.reportItemVisibleList=actuate.util.XmlDom.createElement(this.operationData,"ReportItemVisibleList");this.operationData.documentElement.appendChild(this.reportItemVisibleList);this.createReportItemVisibleNode(A,-1);return this.operationData;},createReportItemVisibleNode:function(G,K){for(var I=0;I<G.childNodes.length;I++){var B=G.childNodes[I];if(B.tagName!="undefined"&&B.tagName!=null){var P=B.id;var L=this._getCheckbox(P);if(L&&L.disabled==false){var J=actuate.util.XmlDom.createElement(this.operationData,"ReportItemVisible");var E=actuate.util.XmlDom.createElement(this.operationData,"Id");var C=actuate.util.XmlDom.createElement(this.operationData,"Name");var O=actuate.util.XmlDom.createElement(this.operationData,"Parent");var F=actuate.util.XmlDom.createElement(this.operationData,"visible");var N=this.operationData.createTextNode(P.split("_")[1]);E.appendChild(N);var D=this.operationData.createTextNode(K);O.appendChild(D);var A="";var H=this._findCheckboxNode(P,this._checkboxTree);A=this.operationData.createTextNode(H.object.isChecked()?"true":"false");F.appendChild(A);var M=this.operationData.createTextNode(B.value);C.appendChild(M);J.appendChild(E);J.appendChild(C);J.appendChild(F);J.appendChild(O);this.reportItemVisibleList.appendChild(J);}else{if(B.tagName.toLowerCase()=="ul"){var K=B.id;K=K.split("_")[1];}}}if(B.childNodes.length>0){this.createReportItemVisibleNode(B,K);}}},_findCheckboxNode:function(D,C){if(!C||D==C.id){return C;}if(D&&C.children){var B=C.children;for(var A=0;A<B.length;A++){var C=this._findCheckboxNode(D,B[A]);if(C){return C;}}}return null;},_getCheckbox:function(A){return actuate.uiadapter.ComponentMgr.get(A);},_setCheckboxValue:function(B,A){if(B){B.setCheckedFlag(A,true);}},noComma:""});