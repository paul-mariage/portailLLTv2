actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.Selector=actuate.Class.extendClass(actuate.common.Gadget,{_validEvents:["select","onSessionTimeout"],_designId:null,_dataObjectType:null,_metadata:null,_container:null,_rendered:false,_caption:null,_width:200,_height:100,_panlMargin:26,_service:null,_selection:undefined,_reportContext:null,_defaultValue:null,_searchString:null,_panel:null,_mask:null,initialize:function(A){this._eventHandlers=[];if(A){this._reportContext=A.reportContext;this._designId=A.id;this._dataObjectType=A.dataObjectType;this.setMetadata(A.metadata);}this._rendered=false;this._selection=undefined;this._updateService();this.__doFireValueChangedEvent_c=actuate.Method.bind(this.__doFireValueChangedEvent,this);},getDesignId:function(){return this._designId;},render:function(A){if(!this._rendered){this._beforeRender();this._container=A;var C={width:this._width,height:this._height,layout:"fit",header:false,header_selectable:true,baseCls:"actuate-selector-panel"};var D=this.__createTools();if(D!=null){C.header=true;C.tools=D;}this._panel=new actuate.widget.panel.Panel(C);var B=this._render(A,this._panel);if(B){this._panel.add(B,false);}this._panel.render(A);this._afterRender();this._rendered=true;}this.refresh();},remove:function(){if(this._rendered){this._panel.destroy();this._rendered=false;}},_rerender:function(){var A=this._panel.getEl().parent();this._destroy();this.render(A);},_destroy:function(){this._rendered=false;if(this._panel){this._panel.removeAll();this._panel.destroy();this._panel.getEl().remove();this._panel=null;}},destroy:function(){this._destroy();},_beforeRender:function(){},_afterRender:function(){},isPending:function(){return !this._service.__isChannelAvailable();},setCaption:function(A){this._caption=A;if(this._panel){this._panel.setTitle(A);}},getCaption:function(){return this._caption;},__createTools:function(){return null;},_render:function(A){},refresh:function(B,A){this._updateFormat(B);this._refresh(A);},_getFormatInfo:function(D){if(!D){return null;}var C=D.pubSub.getGadgetMetadata(D.realName);var B=D.gadgetContent;if(C&&B){var A=C.Details[B.selectorId];if(A){if(A.Base&&A.Base.parameterName&&A.Format){A.Format.parameterBased=true;}return A.Format;}}return null;},__refresh:function(){if(!this._rendered){return ;}this._updateData();},_sendRequest:function(C,D,A){var B=new actuate.selector.impl.SelectorRequest(this._service);B.processEvent(this,C,D,A);},_updateService:function(){if(!this._reportContext){return ;}if(!this._service){this._service=new actuate.selector.impl.SelectorService(this._id,this);this._service.documentModel=actuate.model.DocumentModel.getInstance();}this._service.setRequestUrl(this._reportContext.createSoapUrl("iv"));this._service.setBaseUrl(this._reportContext.getIportalUrl());},__getRequestOperands:function(){return[];},_fireFetchDataEvent:function(E,K,C,F,D,I,H){var J=this.__getRequestOperands();if(this._searchString&&this._searchString!=""){J.push({name:"searchString",value:this._searchString});if(this._searchColumnIndex!=null){J.push({name:"searchColumnIndex",value:this._searchColumnIndex});}}if(C&&F){J.push({name:"fetchColumn",value:C});J.push({name:"fetchDisplayColumn",value:F});if(D&&I){J.push({name:"selectedColumn",value:D});J.push({name:"selectedValue",value:I});}}var G=new actuate.common.SoapRequest(this._service);var B=H?H:"FetchData";if(E=="version"){B="QueryDataMartVersions";J.push({name:"source",value:"Selector"});if(this._metadata&&this._metadata.Base){J.push({name:"dataMartName",value:this._metadata.Base.dataMartFileName});}}var A=this._createOperationData(this.gadgetRealName);G.addOperation(this._designId,"Selector",B,[A,J]);this._sendRequest(G,K);},_createOperationData:function(B){var A=actuate.util.XmlDom;var D=A.createXMLDom(actuate.util.Constants.soap.NAMESPACE_ACTUATE10,actuate.Constant.tag.Data);var C=A.createElement(D,actuate.Constant.tag.Json);var E=D.createTextNode(B);C.appendChild(E);D.documentElement.appendChild(C);return D;},_updateData:function(A){this._fireFetchDataEvent(this._dataObjectType);},__clearValue:function(){this.__fireValueChanged(undefined,null);},setReportContext:function(A){this._reportContext=A;if(this._service){this._updateService();}if(this._rendered){this.refresh();}},setSize:function(B,A){this._width=B||this._width;this._width=B-this._panlMargin;this._height=A||this._height;this.__updateSize();},notify:function(A,B){},__updateSize:function(){if(this._panel){this._panel.setSize(this._width,this._height);}},getSelection:function(){return this._selection;},__fireValueChanged:function(H,A,F){if(H!=null&&!actuate.util.Utility.isArray(H)){H=[H.value||H];}var G=this._selection;if(G!=null&&!actuate.util.Utility.isArray(G)){G=[G];}var B=null;var I;this._selection=[];if(H!=null){I=!this._isSame(H,G);for(var C=0;C<H.length;C++){this._selection.push(H[C]);}B=actuate.util.Json.makeArray(this.__getUpdateValues(H,F));}else{I=!this._hasValue(H,G);this._selection=[];}if(G!=null&&!I){return ;}this.setValue(this._selection);if(I){var E=[{name:"values",value:B}];var D=new actuate.common.SoapRequest(this._service);D.addOperation(this._designId,"Selector","UpdateValue",[null,E]);this._sendRequest(D,this.__doFireValueChangedEvent_c);}else{if(I){this.__doFireValueChangedEvent();}}},__getUpdateValues:function(A,C){for(var B=0;B<A.length;B++){if(A[B]&&typeof (A[B])!="string"){A[B]=""+A[B];}}return A;},_isSame:function(F,E){if(F==null&&E==null){return true;}else{if(F==null||E==null||F.length!=E.length){return false;}}for(var D=0;D<F.length;D++){var C=false;for(var B=0;B<E.length;B++){if(this.__isSameValue(F[D],E[B])){C=true;break;}}if(!C){return false;}}for(var A=0;A<E.length;A++){var C=false;for(var G=0;G<F.length;G++){if(this.__isSameValue(E[A],F[G])){C=true;break;}}if(!C){return false;}}return true;},__isSameValue:function(B,A,C){if(C){return B===A;}else{return B==A;}},_hasValue:function(D,B){var A=B;if(!actuate.util.Utility.isArray(A)){A=[A==null?undefined:A];}else{if(A.length<=0){A=[undefined];}}for(var C=0;C<A.length;C++){if(this.__isSameValue(D,A[C],true)){return true;}}return false;},__doFireValueChangedEvent:function(){var D=[];var B=this.getSelection();if(B){for(var A=0;A<B.length;A++){var C={};C.value=this.__getRealValue(B[A],A);C.display=this.__getDisplayValue(B[A],A);D.push(C);}}this.fireEvent("select",D);},__getRealValue:function(A){var B=A;if(B!=null&&actuate.util.Utility.isArray(B)){B=B.length>0?(B[0]!==null?B[0].value||B[0]:B[0]):undefined;}if(B&&typeof (B)!="string"){if(B.value!==undefined){B=B.value;}else{if(B.text!==undefined){B=B.text;}}}return B;},__getDisplayValue:function(C){var B="";if(C!=null){var A=C.value==null?C:C.value;B=A;if(A&&A.displayValue!==undefined){B=A.displayValue;}else{if(A&&A.text!==undefined){B=A.text;}else{if(A&&A.value!==undefined){B=A.value;}}}}return""+B;},__bind:function(D){if(!D){return ;}else{if(!D.selectorData&&this._metadata&&this._metadata.Base){D.selectorData={selectedValue:this._metadata.Base.localeNeutralValues};}}if(D&&D.selectorData){var C=D.selectorData.selectedValue;if(this._dataObjectType=="version"){D.selectorData=null;}if(!D.DataMartVersions){if(C||this._selection===undefined){this._selection=C;this.setValue(this._selection);}}}if(D&&D.DataMartVersions){this._fireFetchDataEvent();D.selectorData={rows:[]};if(this._metadata&&this._metadata.Base){var A=D.DataMartVersions[this._metadata.Base.dataMartFileName];if(A){D.selectorData.rowCount=A.length;for(var B=0;B<A.length;B++){D.selectorData.rows.push(A[B]);}}}this.__updateList(D);}},__updateList:function(A){},setDefaultValue:function(A){this._defaultValue=A;},getDefaultValue:function(){return this._defaultValue;},notifyEvent:function(A,B){},_updateFormat:function(A){var B=this._getFormatInfo(A);if(B){this.setFormatInfo(B);}},setDefaultFormat:function(){},setFormatInfo:function(A){this.setCaption(A.title);this.setDefaultValue(A.defaultValue);},_addCssClassToDiv:function(B,A){if(B.className.indexOf(A)==-1){B.className+=(" "+A);}},_removeCssClassFromDiv:function(B,A){if(B.className.indexOf(A)!=-1){B.className=B.className.replace(A,"");}},showBorder:function(A){},sessionTimeout:function(){this.fireEvent(actuate.selector.impl.EventConstants.ON_SESSION_TIMEOUT);},getDataObjectType:function(){return this._dataObjectType;},setMetadata:function(A){if(this._metadata&&A&&this._metadata.Base&&A.Base){if(!this.hasSameBindings(this._metadata.Base.bindings,A.Base.bindings)){this._selection=undefined;}}this._metadata=A;},hasSameBindings:function(C,B){if(C&&C.length){if(B&&B.length){if(C.length==B.length){for(var A=0;A<C.length;A++){if(C[A].binding&&B[A].binding&&C[A].binding!=B[A].binding){return false;}}return true;}}}else{if(B&&B.length&&B.length>0){return false;}}return true;},__valueIsSame:function(B,A){return((B==A)||((B===null||B===undefined)&&(A===null||A===undefined)));},setMask:function(A){this._mask=A;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorGroup=actuate.Class.extendClass(actuate.selector.impl.Selector,{_bindings:null,__fireValueChanged:function(J,A){if(J!=null&&!actuate.util.Utility.isArray(J)){J=[J.value||J];}var I=this._selection;if(I!=null&&!actuate.util.Utility.isArray(I)){I=[I];}var B=null;var K;this._selection=[];if(J!=null){K=!this._isSame(J,I);for(var D=0;D<J.length;D++){this._selection.push(J[D]);if(J[D]&&typeof (J[D])!="string"){var H=null;var F=0;for(var C in J[D]){if(F>0){H+=",";}if(J[D][C]!=null){H=(H?H:"")+J[D][C].replace(/,/g,"%2C");}F++;}J[D]=H;}}B=actuate.util.Json.makeArray(J);}else{K=!this._hasValue(J,I);this._selection=[];}if(I!=null&&!K){return ;}this.setValue(this._selection);if(K){var G=[{name:"values",value:B}];var E=new actuate.common.SoapRequest(this._service);E.addOperation(this._designId,"Selector","UpdateValue",[null,G]);this._sendRequest(E,this.__doFireValueChangedEvent_c);}},getBindings:function(){return this._bindings;},render:function(A){return actuate.selector.impl.SelectorGroup.superclass.render.call(this,A);}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorException=actuate.Class.create();actuate.selector.impl.SelectorException.prototype=actuate.Class.extend(new actuate.Exception(),{_element:null,initialize:function(A,E,D,B,C){actuate.Exception.prototype.initialize.call(this,A,E,D,B);this._element=C;},getElement:function(){return this._element;},getErrorMessage:function(){return this.getMessage();},_getName:function(){return"actuate.selector.SelectorException";}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorService=actuate.Class.extendClass(actuate.common.Service,{initialize:function(B,A){actuate.selector.impl.SelectorService.superclass.initialize.call(this,B,A);this.maxChannel=1;},processBind:function(A,B,C){A.apiInstance.__bind(B);},showProgressIndicator:function(){var A=this._baseUrl+actuate.util.Constants.LOC_IMG_PROGRESS_ANIMATION;if(this.apiInstance._mask){this.apiInstance._mask.__showMask();}},hideProgressIndicator:function(){if(this.apiInstance._mask){this.apiInstance._mask.__hideMask();}},triggerSessionTimeout:function(){actuate.selector.impl.SelectorService.superclass.triggerSessionTimeout.call(this);this.apiInstance.sessionTimeout();}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorRequest=actuate.Class.extendClass(actuate.common.GenericRequest,{_selector:null,initialize:function(A){actuate.selector.impl.SelectorRequest.superclass.initialize.call(this,A);},processEvent:function(A,C,D,B){if(this._busy){return ;}this._selector=A;this._finishCallback=D;this._errorCallback=B;this._ajaxResponse=null;if(!C.isEmpty()){if(this._service.showProgressIndicator){this._service.showProgressIndicator();}this._setBusy(true);this._connect(C);}this._processResponses();return false;},_processResponses:function(){if(this._ajaxRequestFinished==false){return ;}if(this._service.hideProgressIndicator){this._service.hideProgressIndicator();}this._setBusy(false);try{if(this._ajaxResponse){this._processAjaxResponse();}}catch(A){if(this._errorCallback){this._errorCallback(A);return ;}else{throw A;}}},_getSoapResponse:function(){return new actuate.selector.impl.SelectorSoapResponse(this._service,this._selector);}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorSoapResponse=actuate.Class.create();actuate.selector.impl.SelectorSoapResponse.prototype=actuate.Class.extend(new actuate.common.GenericResponse(),{_selector:null,initialize:function(B,A){this._selector=A;actuate.common.GenericResponse.prototype.initialize.call(this,B);},_getResponseHandler:function(){return new actuate.selector.impl.SelectorSoapResponseHandler(this._service,this._selector);},_getSoapFaultHandler:function(){return new actuate.selector.impl.SelectorSoapFaultHandler(this._service);}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorSoapFaultHandler=actuate.Class.create();actuate.selector.impl.SelectorSoapFaultHandler.prototype=actuate.Class.extend(new actuate.common.SoapResponseHandler(),{initialize:function(A){actuate.common.SoapResponseHandler.prototype.initialize.call(this,A);},process:function(A,D){var B=A.getElementsByTagName("faultstring");if(B[0]&&B[0].firstChild){var C=this._service.apiInstance._getEventHandlers(actuate.selector.impl.EventConstants.ON_EXCEPTION);if(!(C&&C.length>0)){actuate.widget.MessageBox.show({msg:B[0].firstChild.data,buttons:actuate.widget.MessageBox.OK,icon:actuate.widget.MessageBox.ERROR});}}}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.SelectorSoapResponseHandler=actuate.Class.extendClass(actuate.common.SoapResponseHandler,{_selector:null,initialize:function(B,A){this._selector=A;actuate.selector.impl.SelectorSoapResponseHandler.superclass.initialize.call(this,B);},process:function(A,B){this._processUpdateData(A.getElementsByTagName("UpdateData"),B);if(B){B();}},_processUpdateData:function(H,I){if(!H){return ;}for(var D=0;D<H.length;D++){var G=H[D].getElementsByTagName("Target");if(!G||G.length<=0){continue;}var E=H[D].getElementsByTagName("Data");if(!E||E.length<=0){continue;}var F=E[0].getElementsByTagName("RedirectURL");if(F.length>0){this._service.triggerSessionTimeout();continue;}var B=G[0].firstChild.data;if(B=="CommandStack"){var K=E[0];if(K){var A=K.getElementsByTagName("Json");if(A.length>0){K=actuate.util.Utility.parseJson(A[0]);actuate.common.CacheManager.COMMAND_STACK_LENGTH=K.currentRecord;actuate.common.CacheManager.COMMAND_STACK_RECORD=K.stackLength;}}continue;}var J=(B=="Selector")&&this._service;if(!J){continue;}if(J.processBind){var C=E[0];if(C){var A=C.getElementsByTagName("Json");if(A.length>0){C=actuate.util.Utility.parseJson(A[0]);}}J.processBind(this._service,C,I);}}}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.List=actuate.Class.extendClass(actuate.selector.impl.Selector,{_noUpdate:false,_searchDelay:500,_searchEventTimer:null,_limit:null,_multipleSelection:false,_enableSearch:false,_list:null,_firstBind:null,_clientSideSearch:false,_toolsSize:0,gadgetRealName:null,initialize:function(A){actuate.selector.impl.List.superclass.initialize.call(this,A);this._list=null;this._firstBind=true;this._doSearchValueHandler_c=actuate.Method.bind(this._doSearchValueHandler,this);this._toolsSize=0;this._clientSideSearch=false;if(A){this.gadgetRealName=A.gadgetRealName;}},setLimit:function(A){this._limit=A;},setValue:function(A){if(A!==undefined){this.setValues(A);}else{this._selection=[];}},setValues:function(A){var B;if(A&&!actuate.util.Utility.isArray(A)){B=[A];}else{if(A&&!this._multipleSelection){B=[A[0]];}else{if(A){B=A;}else{B=[];}}}if(this._rendered){this._list.setValues(B);}this._selection=B;},_refresh:function(){var A=this;if(!this._enableSearch){this._searchBox.setRawValue("");this._doSearchValueHandler();}this.__refresh();},_beforeRender:function(){},enableMultipleSelection:function(A){if(this._multipleSelection!=A){this._multipleSelection=A;if(this._list){this._list.setMultiSelect(A);}}},enableSearch:function(A,B){this._clientSideSearch=B;if(this._enableSearch!=A){this._enableSearch=A;if(this._searchBox){this._searchBox.setVisibility(A);if(this._panel){this._panel._doLayout();}}}},render:function(A){return actuate.selector.impl.List.superclass.render.call(this,A);},_render:function(B){var A;this._list=new actuate.widget.form.ListBox({multiSelect:this._multipleSelection,header:false,footer:false,region:"center",defaultAutoCreate:{cls:"actuate-selector-list-border",html:'<div class="actuate-selector-list-tl"><div class="actuate-selector-list-tr"><div class="actuate-selector-list-tm"></div></div></div>'+'<div class="actuate-selector-list-ml"><div class="actuate-selector-list-mr"><div class="actuate-selector-list-body"><div class="actuate-selector-list"></div></div></div></div>'+'<div class="actuate-selector-list-bl"><div class="actuate-selector-list-br"><div class="actuate-selector-list-bm">'+"</div></div></div>"}});var C=this._list._initList;this._list._initList=function(D){this._innerEl=this._ele.first().next().first().first().first();C.call(this,{cls:"actuate-list"});this._scrollEl=this._innerEl.first();};this._list._onResize=function(D,E){actuate.widget.form.ListBox.superclass._onResize.apply(this,arguments);if(this._ele&&this._eleWidth===undefined){var F=D;this._ele.setWidth(F+this._ele.getBorderWidth("lr")+this._ele.getPadding("lr"));this.innerList.setWidth(F-this._ele.getFrameWidth("lr")-6);this.innerList.setHeight(E-6);}};this._list.displayField="value";A=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",layout:"border",header:false,footer:false,border:false});this._searchBox=new actuate.widget.form.TextField({header:false,footer:false,cls:"actuate-selector-search-box",region:"north",enableKeyEvents:true});A.add(this._list,false);if(!this._enableSearch){this._searchBox.hide();}this._searchBox.registerEventHandler("keyup",actuate.Method.bind(this._searchValueHandler,this));this._list.registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));return A;},_afterRender:function(){if(this._searchBox){this._searchBox.width=this._width-this._toolsSize-25;this._searchBox.render(this._panel.header);}},__bind:function(A){actuate.selector.impl.List.superclass.__bind.call(this,A);if(A&&A.selectorData&&this._list){this._noUpdate=true;if(this._scroller){this._scroller.clear();this._scroller=null;}this.__updateList(A);if(this._selection){this._list.setValues(this._selection,false);}else{this._list.setSelectedIndex();}this._noUpdate=false;}this.showBorder();},__updateList:function(A){if(A&&A.selectorData&&this._list){if(this._firstBind&&A.selectorData.rows.length>0){delete this._firstBind;if(A.selectorData.rows[0].length>1){this._list.displayField="text";this._list.store.removeAll();this._list.setTemplate();}}this._list.setStore(A.selectorData.rows);}if(this._enableSearch){this._searchBox.focus();}},__updateSize:function(){this._updateSearchBox();actuate.selector.impl.List.superclass.__updateSize.call(this);if(this._scroller){this._scroller.resize();}},_updateSearchBox:function(){if(this._searchBox){this._searchBox.setSize(this._width-this._toolsSize-16);}},__createTools:function(){if(this._dataObjectType!="version"){this._toolsSize=40;var A=[{id:"selector-clear",text:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText"),handler:actuate.Method.bind(this.__clearValueHandler,this),qtip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection")}];return A;}},__clearValueHandler:function(){this.__clearValue();this._valueSelectedHandler(this._list,null);},__clearValue:function(){this._fireSelectionEvent(undefined);if(this._list){this._list.setSelectedIndex();this._list.doQuery(undefined,true);}},_searchValueHandler:function(A){if(this._searchEventTimer){window.clearTimeout(this._searchEventTimer);}this._searchEventTimer=window.setTimeout(this._doSearchValueHandler_c,this._searchDelay);},_doSearchValueHandler:function(){if(this._searchEventTimer){window.clearTimeout(this._searchEventTimer);this._searchEventTimer=null;}this._noUpdate=true;var A=this._searchBox.getRawValue();if(A&&A!=""){if(this._clientSideSearch){this._list.doQuery(A,false);}else{this._searchString=A;}}else{if(this._clientSideSearch){this._list.doQuery(null,true);}else{this._searchString=null;}}if(!this._clientSideSearch){this._updateData();}this._noUpdate=false;},_valueSelectedHandler:function(D,A){if(this._noUpdate){return ;}var C;if(A&&A.length>0){C=[];for(var B=0;B<A.length;B++){C.push(A[B].data.value);}}this._fireSelectionEvent(C);},_fireSelectionEvent:function(B){var C=actuate.selector.impl.Selector.SELECTION_TYPE_SINGLE;var A=this._list.getSelectedIndexes();var D=A.length;var E;if(D>0){E=B;}this.__fireValueChanged(E,C);},setDefaultFormat:function(){this.setLimit(1000);this.enableMultipleSelection(true);this.enableSearch(false);},setFormatInfo:function(A){actuate.selector.impl.List.superclass.setFormatInfo.call(this,A);this.setLimit(A.listLimit);this.enableMultipleSelection(A.allowMulti);this.enableSearch(A.enableSearch,A.parameterBased);},showborder:true,showBorder:function(L){if(L!=null&&L!=undefined){this.showborder=L;}var B=this._list.getEl().dom;var N=B.firstChild;var J=N.firstChild;var F=J.firstChild;var G=N.nextSibling;var C=G.firstChild;var K=C.firstChild;var O=K.firstChild.firstChild;var E=G.nextSibling;var M=E.firstChild;var I=M.firstChild;var D=[N,J,F,G,C,K,O,E,M,I];for(var H=0;H<D.length;H++){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](D[H],"actuate-dashboard-gadget-item-noborder");}for(var A=O.firstChild;A!=null;A=A.nextSibling){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](A,"actuate-dashboard-gadget-item-noborder");}},__getDisplayValue:function(D){var B;if(this._list){var C=this._list.getLength();for(var A=0;A<C;A++){if(this.__valueIsSame(D,this._list.getValueAt(A))){B=this._list.getValueAt(A,this._list.displayField);break;}}}return B||actuate.selector.impl.List.superclass.__getDisplayValue.call(this,D);}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.ComboBox=actuate.Class.extendClass(actuate.selector.impl.Selector,{_limit:null,_editable:false,_autoSuggest:false,_triggerEnabled:true,_list:null,_firstBind:null,_value:null,gadgetRealName:null,initialize:function(A){actuate.selector.impl.ComboBox.superclass.initialize.call(this,A);this._list=null;this._value=null;this._firstBind=true;this.gadgetRealName=A.gadgetRealName;if(A.controlType=="text-box"){this.enableTextInput(true);this.setTriggerEnabled(false);}},setLimit:function(A){this._limit=A;},enableTextInput:function(A){this._editable=A;if(this._list){this._list.setEditable(A);}},setTriggerEnabled:function(A){this._triggerEnabled=A;if(this._list){this._list._trigger.setDisplayed(!A);}},_beforeRender:function(){},setValue:function(A){if(A===undefined){this._value=A;return ;}this._value=A;if(this._rendered){if(A){this._list.setValue(this.__getRealValue(A),true);}else{this._list.setSelectedIndex();}}},_refresh:function(A){var B=this;this.__refresh();},_render:function(B,A){this._comboPanel=new actuate.widget.panel.Panel({header:false,footer:false,border:true,baseCls:"actuate-selector-combo"});this._list=new actuate.widget.form.ComboBox({editable:this._editable,value:this.__getRealValue(this._value),enableKeyEvents:true,maxHeight:128,hideTrigger:!this._triggerEnabled,listClass:"actuate-selector-combo-dataview",style:"margin: 3px 0 3px 0",showTooltip:true});this._list._onResize=function(C,D){actuate.widget.form.ComboBox.prototype._onResize.call(this,C-2-6,D);};this._list.displayField="value";this._list.registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));return this._list;},_afterRender:function(){this._list._ele.on("keyup",actuate.Method.bind2(this._keyUpHandler,this,this._list));},__clearValue:function(){actuate.selector.impl.ComboBox.superclass.__clearValue.apply(this,arguments);this._value=undefined;if(this._list){this._list.setSelectedIndex();}},__bind:function(A){actuate.selector.impl.ComboBox.superclass.__bind.call(this,A);this.__updateList(A);if(A&&A.selectorData&&this._list){if(this._value===undefined||(!this._list.setValue(this.__getRealValue(this._value))&&!this._list.editable)){this._list.setSelectedIndex();this._value=null;}}},__updateList:function(A){if(A&&A.selectorData&&this._list){if(this._firstBind&&A.selectorData.rows.length>0){delete this._firstBind;if(A.selectorData.rows[0].length>1){this._list.displayField="text";if(this._list.store){this._list.store.removeAll();}}}this._list.setStore(A.selectorData.rows);}},__updateSize:function(){actuate.selector.impl.ComboBox.superclass.__updateSize.call(this);if(this._list){this._list.setSize(this._width,22);}},_keyUpHandler:function(B,A){if(A.keyCode==A.ENTER){this._valueSelectedHandler(this._list,{data:this._list.getRawValue()});}},_valueSelectedHandler:function(B,A){this._value=null;if(A&&A.data){this._value=[A.data];}this.__fireValueChanged(this._value);},__getUpdateValues:function(B,E){var A=B;for(var C=0;C<A.length;C++){if(A[C]){if(typeof (A[C])=="string"){var D={};D[E?E:"text"]=A[C];A[C]=D;}}}return A;},__isSameValue:function(E,D,C){var B=E;var A=D;if(B&&B.text){B=B.text;}if(A&&A.text){A=A.text;}if(C){return B===A;}else{return B==A;}},setDefaultFormat:function(){this.setCaption("Combo Box Selector");this.setLimit(1000);this.enableTextInput(!this._triggerEnabled);this.setAutoSuggest(false);},setFormatInfo:function(A){actuate.selector.impl.ComboBox.superclass.setFormatInfo.call(this,A);this.setLimit(A.listLimit);if(this._triggerEnabled){this.enableTextInput(A.autoTyping);this.setAutoSuggest(A.autoSuggest);}else{this.enableTextInput(true);this.setAutoSuggest(false);}},setAutoSuggest:function(A){this._autoSuggest=A;},__getDisplayValue:function(D){var B;if(this._list){var C=this._list.getLength();for(var A=0;A<C;A++){if(this.__valueIsSame(D,this._list.getValueAt(A))){B=this._list.getValueAt(A,this._list.displayField);break;}}}return B||actuate.selector.impl.ComboBox.superclass.__getDisplayValue.call(this,D);}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.RadioBoxes=actuate.Class.extendClass(actuate.selector.impl.Selector,{_limit:null,_count:null,_orientation:null,_data:null,_panel:null,_width:200,_height:100,_autoAdjust:true,_value:null,gadgetRealName:null,initialize:function(A){actuate.selector.impl.RadioBoxes.superclass.initialize.apply(this,arguments);this._value=null;if(A){this.gadgetRealName=A.gadgetRealName;}},_beforeRender:function(){},setValue:function(A){if(A&&!actuate.util.Utility.isArray(A)){this._value=[A];}else{if(A){this._value=A;}else{this._value=null;}}if(this._rendered){this._updateValue(this._value);}},_updateValue:function(D){var F=false;var B=actuate.util.Utility;var A=this._contentPanel.items.items;if(actuate.util.Utility.isArray(D)){for(var C=0;C<A.length;C++){if(D[0]==A[C].valueText){var E=A[C];E.setValue(true,true);F=true;break;}}}else{for(var C=0;C<A.length;C++){A[C].setValue(false,true);}}return F;},_refresh:function(){var A=this;this.__refresh();},__createItemElement:function(B,C){var A=new actuate.widget.form.Radio({boxLabel:C||B,valueText:B,name:this._designId+"_radio",value:this._hasValue(B,this._value),autoDestroy:true});A.registerEventHandler("check",actuate.Method.bind(this._valueSelectedHandler,this));return A;},_valueSelectedHandler:function(B,A){this.__fireSelectEvent([B.getValueText()]);},__fireSelectEvent:function(A){this.__fireValueChanged(A);},__bind:function(A){actuate.selector.impl.RadioBoxes.superclass.__bind.call(this,A);if(A&&A.selectorData&&this._rendered){this._data=A.selectorData;this._refreshData();}},_refreshData:function(){if(!this._rendered){return ;}if(this._scroller){this._scroller.clear();this._scroller=null;}if(this._contentPanel){this._contentPanel.removeAll(true);this._contentPanel.layout.destroy();}if(this._autoAdjust&&this._height>0){this._contentPanel.layout.rows=this._height/40;this._contentPanel.layout.columns=null;}else{if(this._orientation==actuate.selector.impl.CheckBoxes.HORIZONTAL){this._contentPanel.layout.rows=null;this._contentPanel.layout.columns=this._count;}else{this._contentPanel.layout.rows=this._count;this._contentPanel.layout.columns=null;}}if(this._data){for(var B=0;B<this._data.rowCount;B++){var A=this._data.rows[B];var D=A[0];var C=this.__createItemElement(D,A[1]);this._contentPanel.add(C,false);}}this._contentPanel._doLayout(true);this._updateTableWidth();},_updateTableWidth:function(){cpDom=this._contentPanel._ele.dom;if(!cpDom){return ;}tables=cpDom.getElementsByTagName("table");if(!tables||!tables.length){return ;}table=tables[0];table.style.width=(this._width-11)+"px";},__clearValue:function(){actuate.selector.impl.RadioBoxes.superclass.__clearValue.apply(this,arguments);this._value=undefined;if(this._contentPanel){this._contentPanel.items.each(function(A){A.setValue(false,true);});}},_render:function(A){this._contentPanel=new actuate.widget.panel.Panel({header:false,footer:false,layout:"table",autoScroll:true,border:false});this._panel.baseCls="actuate-selector-radio-panel";return this._contentPanel;},setLimit:function(A){this._limit=A;},setAutoAdjust:function(A,B){this._autoAdjust=A;if(A){this.setItemsCount(3,B);}},setOrientation:function(A,B){if(this._orientation!=A){this._orientation=A;}if(B){this._refreshData();}},setItemsCount:function(B,A){if(this._count!=B){this._count=B;}if(A){this._refreshData();}},__updateSize:function(){actuate.selector.impl.RadioBoxes.superclass.__updateSize.call(this);this._refreshData();if(this._scroller){this._scroller.resize();}},setDefaultFormat:function(){this.setCaption("Radio Button Selector");this.setAutoAdjust(true,false);this.setOrientation(actuate.selector.impl.CheckBoxes.HORIZONTAL,false);this.setLimit(1000);this._refreshData();},setFormatInfo:function(A){actuate.selector.impl.RadioBoxes.superclass.setFormatInfo.call(this,A);this.setLimit(A.limit);this.setOrientation(A.orientation,false);if(A.autoAdjust){this.setAutoAdjust(true,false);}else{this.setAutoAdjust(false,false);this.setItemsCount(A.itemCnt,false);}this._refreshData();},__getDisplayValue:function(D){var C;if(this._rendered&&this._contentPanel&&this._contentPanel.items){var A=this._contentPanel.items.items;if(A){for(var B=0;B<A.length;B++){if(this.__valueIsSame(D,A[B]!=null?A[B].valueText:null)){C=A[B].boxLabel;break;}}}}return C||actuate.selector.impl.RadioBoxes.superclass.__getDisplayValue.call(this,D);},setSize:function(B,A){this._width=B||this._width;this._height=A||this._height;this.__updateSize();}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.ListSelectorGroup=actuate.Class.extendClass(actuate.selector.impl.SelectorGroup,{_noUpdate:false,_searchDelay:500,_searchEventTimer:null,_oldSelectedValues:null,_limit:null,_multipleSelection:false,ORIENTATIONS:["horizontal","vertical"],_enableSearch:false,_list:null,_listSeperatorWidth:10,_listSeperatorHeight:2,_listMinWidth:100,_listMinHeight:5,_panlMargin:26,_firstBind:null,_height:150,_clientSideSearch:false,gadgetRealName:null,_panels:null,_additionalWidth:0,_additionalHeight:0,_orientation:0,initialize:function(A){if(actuate.util.browser.isIE9Flag){this._additionalWidth=2;}else{if(actuate.util.browser.isSafari){this._additionalWidth=6;}}actuate.selector.impl.List.superclass.initialize.call(this,A);this._bindings=A.metadata.Base.bindings;this._list=null;this._firstBind=true;this._doSearchValueHandler_c=actuate.Method.bind(this._doSearchValueHandler,this);this._clientSideSearch=false;if(A){this.gadgetRealName=A.gadgetRealName;}},setLimit:function(A){this._limit=A;},setValue:function(A){if(A!==undefined&&A.length!=0){this.setValues(A);}else{this._selection=[];}},setValues:function(A){var B;if(A&&!actuate.util.Utility.isArray(A)){B=[A];}else{if(A){B=A;}else{B=[];}}this._selection=B;},_refresh:function(A){var B=this;this._fireFetchDataEvent(this._dataObjectType,null,null,null,null,null,"FetchSelectorLists");},_beforeRender:function(){},enableMultipleSelection:function(A){if(this._multipleSelection!=A){this._multipleSelection=A;if(this._list&&this._list.length>0){for(var B=0;B<this._list.length;B++){this._list[B].setMultiSelect(A);}}}},enableSearch:function(B,C){this._clientSideSearch=C;if(this._enableSearch!=B){this._enableSearch=B;if(this._searchBox&&this._searchBox.length>0){for(var A=0;A<this._searchBox.length;A++){this._searchBox[A].setVisibility(B);}if(this._panel){this._panel._doLayout();}}}},render:function(A){return actuate.selector.impl.ListSelectorGroup.superclass.render.call(this,A);},_render:function(B){this._panels=[];this._formpanel=new actuate.widget.panel.Panel({layout:"column",style:"overflow:hidden;text-overflow:clip;white-space:nowrap;overflow:hidden;",bodycls:"actuate-list-selector-panel-header",baseCls:"actuate-selector-panel",header:true,footer:true,border:false});if(this._bindings&&this._bindings.length>0){this._list=[];this._searchBox=[];this._columnLabel=[];this._listSeperator=[];for(var C=0;C<this._bindings.length;C++){this._panels[C]=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",baseCls:"actuate-selector-panel",headerCls:"actuate-list-selector-panel-header",header_selectable:true,height:"auto",header:true,footer:false,border:false});this._list[C]=new actuate.widget.form.ListBox({multiSelect:this._multipleSelection,listindex:C,header:false,footer:false,region:"center",width:"auto",height:"auto",defaultAutoCreate:{cls:"actuate-selector-list-border",html:'<div class="actuate-selector-list-tl"><div class="actuate-selector-list-tr"><div class="actuate-selector-list-tm"></div></div></div>'+'<div class="actuate-selector-list-ml"><div class="actuate-selector-list-mr"><div class="actuate-selector-list-body"><div class="actuate-selector-list"></div></div></div></div>'+'<div class="actuate-selector-list-bl"><div class="actuate-selector-list-br"><div class="actuate-selector-list-bm">'+"</div></div></div>"}});var D=this._list[C]._initList;this._list[C]._initList=function(G){this._innerEl=this._ele.first().next().first().first().first();D.call(this,{cls:"actuate-list"});this._scrollEl=this._innerEl.first();};var A=this._list[C]._onResize;var E=this;this._list[C]._onResize=function(H,J){actuate.widget.form.ListBox.superclass._onResize.apply(this,arguments);var I=E._width;if(E._orientation==0){I=(E._width-(E._list.length-1)*(E._listSeperatorWidth))/E._list.length;}I=I>E._listMinWidth?I:E._listMinWidth;I=Math.floor(I-E._additionalWidth);var G=E._height-24;if(E._orientation==0){G=G-(E._enableSearch?21:0)-22;}else{G=(G-E._listSeperatorHeight*(E._list.length-1))/E._list.length-(E._enableSearch?21:0)-22;}G=Math.floor(G-E._additionalHeight);G=Math.floor(G>E._listMinHeight?G:E._listMinHeight);if(this._ele&&this._eleWidth===undefined){var K=H;this._ele.setWidth(I);this._ele.setHeight(G);this.innerList.setWidth(I-6);this.innerList.setHeight(G-6-2);}};this._list[C].displayField="value";this._list[C].registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));this._searchBox[C]=new actuate.widget.form.TextField({header:false,footer:false,cls:"actuate-selector-search-box",style:"margin-bottom:2px",width:(this._width-(this._list.length-1)*10-20)/this._list.length,enableKeyEvents:true});this._searchBox[C]._onResize=function(G,I){actuate.widget.form.TextField.superclass._onResize.apply(this,arguments);var H=E._width;if(E._orientation==0){H=(E._width-(E._list.length-1)*E._listSeperatorWidth)/E._list.length;}H=H>E._listMinWidth?H:E._listMinWidth;H=Math.floor(H-E._additionalWidth);this.setWidth(H-7);};var F=this._bindings[C].displayColumnName?this._bindings[C].displayColumnName:(this._bindings[C].displayColumn?this._bindings[C].displayColumn:this._bindings[C].binding);if(this._dataObjectType=="cube"){F=F.split("/").pop();}this._columnLabel[C]=new actuate.widget.form.Label({width:"auto",style:"text-align:left;color:black;padding-left:0px;font-weight:bold;white-space:nowrap;overflow:hidden;position:absolute;",text:F});this._columnLabel[C]._onResize=function(G,I){actuate.widget.form.Label.superclass._onResize.apply(this,arguments);var H=E._width;if(E._orientation==0){H=(E._width-(E._list.length-1)*E._listSeperatorWidth)/E._list.length;}H=H>E._listMinWidth?H:E._listMinWidth;H=Math.floor(H-E._additionalWidth);this.setWidth(H-6);};this._panels[C].add(this._searchBox[C],false);this._panels[C].add(this._list[C],false);if(!this._enableSearch){this._searchBox[C].hide();}this._searchBox[C].registerEventHandler("keyup",actuate.Method.bind(this._searchValueHandler,this));this._formpanel.add(this._panels[C]);}this._panel.header=false;this._panel.height="auto";this._panel.width="auto";}return this._formpanel;},_afterRender:function(){if(this._columnLabel&&this._columnLabel.length>0){for(var A=0;A<this._columnLabel.length;A++){this._panels[A].header.addClass("actuate-widget-panel-header-nopadding");this._columnLabel[A].render(this._panels[A].header);}}this.__updateSize();},_neh_apply:function(E){var B=this._panel?this._panel._getTool("selector-apply"):null;if(B&&!B.hasClass("actuate_table_builder_up_down_buttons_disabled")){this._disableApply();var A;if(this._list&&this._list.length>0){A=[];for(var C=0;C<this._list.length;C++){var D=this._list[C].getSelectedValues();if(D){A[C]=D;}}}this.__fireValueChanged(A);}},_enableApply:function(){var A=this._panel?this._panel._getTool("selector-apply"):null;if(A){A.removeClass("actuate_table_builder_up_down_buttons_disabled");}},_disableApply:function(){var A=this._panel?this._panel._getTool("selector-apply"):null;if(A){A.addClass("actuate_table_builder_up_down_buttons_disabled");}},__bind:function(D){actuate.selector.impl.ListSelectorGroup.superclass.__bind.call(this,D);if(D.selectorData.columnNames){var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==D.selectorData.columnNames[0]||this._bindings[B].binding==D.selectorData.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&D.selectorData&&this._list){this._noUpdate=true;if(this._firstBind&&D.selectorData.rows.length>0){delete this._firstBind;if(D.selectorData.rows[0].length>1){this._list[A].displayField="text";this._list[A].store.removeAll();this._list[A].setTemplate();}}this._list[A].setStore(D.selectorData.rows);this._list[A].setSelectedIndex();this._list[A].setValues();if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();this._list[B].setValues();}}this._noUpdate=false;if(this._oldSelectedValues&&this._oldSelectedValues[A]){this._list[A].setValues(this._oldSelectedValues[A]);}if(D.selectorData.selectedValue){if(!this._oldSelectedValues){this._oldSelectedValues=[];}this._oldSelectedValues[A]=D.selectorData.selectedValue;this._list[A].setValues(D.selectorData.selectedValue);}}}else{for(var C in D.selectorData){var E=D.selectorData[C];var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==E.columnNames[0]||this._bindings[B].binding==E.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&E&&this._list){this._noUpdate=true;if(this._firstBind&&E.rows.length>0){delete this._firstBind;if(E.rows[0].length>1){this._list[A].displayField="text";this._list[A].store.removeAll();this._list[A].setTemplate();}}this._list[A].setStore(E.rows);this._list[A].setSelectedIndex();this._list[A].setValues();if(E.selectedValue){if(!this._oldSelectedValues){this._oldSelectedValues=[];}this._oldSelectedValues[A]=E.selectedValue;this._list[A].setValues(E.selectedValue);}if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();this._list[B].setValues();}}this._noUpdate=false;}}this._disableApply();}this._searchBox[A].focus();this.showBorder();},__updateSize:function(){actuate.selector.impl.List.superclass.__updateSize.call(this);if(this._list&&this._list.length>0){if(this._formpanel){var B;if(this._orientation==0){B=this._list.length*this._listMinWidth+(this._list.length-1)*this._listSeperatorWidth;}else{B=this._listMinWidth;}this._formpanel.setSize(this._width>B?this._width:B,this._height);}for(var A=0;A<this._list.length;A++){this._list[A]._onResize();this._searchBox[A]._onResize();this._columnLabel[A]._onResize();if(this._listSeperator[A]){this._listSeperator[A]._onResize();}}}},__createTools:function(){var A=[{id:"selector-clear",text:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText"),handler:actuate.Method.bind(this.__clearValueHandler,this),qtip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection")},{id:"selector-apply",text:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection"),handler:actuate.Method.bind(this._neh_apply,this),qtip:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection")}];return A;},__clearValueHandler:function(){this.__clearValue();this._valueSelectedHandler(this._list[0],null);this._disableApply();},__clearValue:function(){this._fireSelectionEvent(undefined);if(this._list[0]){this._list[0].setSelectedIndex();this._list[0].setValues();this._list[0].doQuery(undefined,true);if(this._list.length>1){this._list[0].setSelectedIndex();for(var A=this._list.length-1;A>0;A--){this._list[A].setSelectedIndex();this._list[A].store.removeAll();}}}this._oldSelectedValues=[];this.__fireValueChanged(null);},_searchValueHandler:function(B){this._searchColumnIndex=0;if(this._searchBox&&this._searchBox.length>0){for(var A=0;A<this._searchBox.length;A++){if(this._searchBox[A]==B){this._searchColumnIndex=A;break;}}}if(this._searchEventTimer){window.clearTimeout(this._searchEventTimer);}this._searchEventTimer=window.setTimeout(this._doSearchValueHandler_c,this._searchDelay);},_doSearchValueHandler:function(A){if(this._searchEventTimer){window.clearTimeout(this._searchEventTimer);this._searchEventTimer=null;}var B;this._noUpdate=true;var D=this._searchBox[this._searchColumnIndex].getRawValue();if(D&&D!=""){if(this._clientSideSearch){this._list[this._searchColumnIndex].doQuery(D,false);}else{B=D;}}else{if(this._clientSideSearch){this._list[this._searchColumnIndex].doQuery(null,true);}else{B=null;}}this._searchString=B;if(!this._clientSideSearch){if(this._searchColumnIndex>0){this._fireSelectionEvent(this._list[this._searchColumnIndex-1].getSelectedValues(),this._searchColumnIndex-1);}else{var C=this._bindings[this._searchColumnIndex].binding;var E=this._bindings[this._searchColumnIndex].displayColumn;this._updateData(C,E?E:C);}}this._noUpdate=false;if(this._enableSearch&&this._searchBox){this._searchBox[this._searchColumnIndex].focus();}},_updateData:function(D,A,C,B){this._fireFetchDataEvent(this._dataObjectType,null,D,A,C,B);},_valueSelectedHandler:function(D,A){if(this._noUpdate){return ;}this._enableApply();var C;for(var B=D.listindex+1;B<this._list.length;B++){this._list[B].setSelectedIndex();this._list[B].setValues();this._list[B].store.removeAll();}if(A&&A.length>0){C=[];for(var B=0;B<A.length;B++){C.push(A[B].data.value);}this._fireSelectionEvent(C,D.listindex);}},_fireSelectionEvent:function(I,J){var A=actuate.selector.impl.Selector.SELECTION_TYPE_SINGLE;var G=J==undefined?[]:this._list[J].getSelectedIndexes();var H=G.length;var N;if(H>0){N=I;}var C=this._bindings.length;if(J!=undefined&&C>J+1){this._list[J+1].setSelectedIndex();this._list[J+1].setValues();var D=C<=J+1?null:this._bindings[J+1].binding;var F=C<=J+1?null:this._bindings[J+1].displayColumn;var B=[];var L=[];for(var E=0;E<=J;E++){var M=[];B[E]=this._bindings[E].binding;var K=this._list[E].getSelectedValues();if(K){for(N in K){M.push(K[N]);}}L.push(M);}L=actuate.util.Json.makeArray(L);B=actuate.util.Json.makeArray(B);if(this._searchBox[J+1]){this._searchString=this._searchBox[J+1].getRawValue();this._searchColumnIndex=J+1;}this._fireFetchDataEvent(this._dataObjectType,null,D,F?F:D,B,L);}},setDefaultFormat:function(){this.setLimit(1000);this.enableMultipleSelection(true);this.enableSearch(false);},setFormatInfo:function(B){actuate.selector.impl.List.superclass.setFormatInfo.call(this,B);this.setLimit(B.listLimit);this.enableMultipleSelection(B.allowMulti);this.enableSearch(B.enableSearch,B.parameterBased);for(var A=0;A<this.ORIENTATIONS.length;A++){if(this.ORIENTATIONS[A]==B.orientation){this._orientation=A;}}},enableSearch:function(B,C){this._clientSideSearch=C;if(this._enableSearch!=B){this._enableSearch=B;if(this._searchBox&&this._searchBox.length>0){for(var A=0;A<this._searchBox.length;A++){this._searchBox[A].setVisibility(B);}if(this._panel){this._panel._doLayout();}}}},showborder:true,showBorder:function(L){if(L!=null&&L!=undefined){this.showborder=L;}var B=this._list[0].getEl().dom;var N=B.firstChild;var J=N.firstChild;var F=J.firstChild;var G=N.nextSibling;var C=G.firstChild;var K=C.firstChild;var O=K.firstChild.firstChild;var E=G.nextSibling;var M=N.firstChild;var I=J.firstChild;var D=[N,J,F,G,C,K,O,E,M,I];for(var H=0;H<D.length;H++){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](D[H],"actuate-dashboard-gadget-item-noborder");}for(var A=O.firstChild;A!=null;A=A.nextSibling){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](A,"actuate-dashboard-gadget-item-noborder");}},__getDisplayValue:function(D,A){var C="";if(D!=null){var E=this._list[A].getSelectedTexts(this._list[A].displayField);if(E&&E.length&&E.length>0){C=[];for(var B=0;B<E.length;B++){if(E[B]==null){C[B]="-- "+actuate.util.Utility.getLocalizedString("gadget.display.noValue")+"-- ";}else{C[B]=E[B];}}}else{C=E;}}return C||actuate.selector.impl.List.superclass.__getDisplayValue.call(this,D);},__getRealValue:function(B,A){return B;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.ComboSelectorGroup=actuate.Class.extendClass(actuate.selector.impl.SelectorGroup,{_limit:null,_editable:false,_autoSuggest:false,_triggerEnabled:true,_list:null,_listSeperatorWidth:10,_listSeperatorHeight:20,_firstBind:null,_value:null,gadgetRealName:null,_panels:null,_listMinWidth:100,_applyBtn:null,_orientation:1,_additionalWidth:0,ORIENTATIONS:["horizontal","vertical"],initialize:function(A){if(actuate.util.browser.isIE9Flag){this._additionalWidth=2;}else{if(actuate.util.browser.isSafari){this._additionalWidth=6;}}this._bindings=A.metadata.Base.bindings;if(this._orientation==0){this._height=40+8+15-24;}else{if(this._bindings&&this._bindings.length>0){this._height=40*this._bindings.length+this._listSeperatorHeight*(this._bindings.length-1)+8+15;}}actuate.selector.impl.ComboBox.superclass.initialize.call(this,A);this._list=null;this._value=null;this._firstBind=true;this.gadgetRealName=A.gadgetRealName;if(A.controlType=="text-box"){this.enableTextInput(true);this.setTriggerEnabled(false);}},setLimit:function(A){this._limit=A;},enableTextInput:function(B){this._editable=B;if(this._list){for(var A=0;A<this._list.length;A++){this._list[A].setEditable(B);}}},setTriggerEnabled:function(B){this._triggerEnabled=B;if(this._list&&this._list.length>0){for(var A=0;A<this._list.length;A++){this._list[A]._trigger.setDisplayed(!B);}}},_beforeRender:function(){},setValue:function(A){if(A!==undefined&&A.length!=0){this._value=A;return ;}this._value=A;},_refresh:function(A){var B=this;this._fireFetchDataEvent(this._dataObjectType,null,null,null,null,null,"FetchSelectorLists");},__createTools:function(){return null;},__clearValueHandler:function(){this.__clearValue();this._valueSelectedHandler(this._list[0],null);this._disableApply();},__clearValue:function(){actuate.selector.impl.ComboBox.superclass.__clearValue.apply(this,arguments);this._value=undefined;if(this._list[0]){this._list[0].setSelectedIndex();this._list[0].doQuery(undefined,true);if(this._list.length>1){for(var A=1;A<this._list.length;A++){this._list[A].setSelectedIndex();this._list[A].store.removeAll();}}}this.__fireValueChanged(null);},_render:function(B,A){this._panels=[];this._formpanel=new actuate.widget.panel.Panel({layout:"column",width:"auto",height:"auto",style:"overflow:hidden;text-overflow:clip;white-space:nowrap;overflow:hidden;",bodycls:"actuate-list-selector-panel-header",baseCls:"actuate-selector-panel",header:true,footer:false,border:false});if(this._bindings&&this._bindings.length>0){this._list=[];this._columnLabel=[];for(var C=0;C<this._bindings.length;C++){this._panels[C]=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",baseCls:"actuate-selector-panel",headerCls:"actuate-list-selector-panel-header",header_selectable:true,height:"auto",header:true,footer:false,border:false});this._columnLabel[C]=new actuate.widget.form.Label({width:"auto",style:"text-align:left;color:black;padding-left:6px;font-weight:bold;white-space:nowrap;overflow:hidden;position:absolute;",text:this._bindings[C].displayColumnName?this._bindings[C].displayColumnName:(this._bindings[C].displayColumn?this._bindings[C].displayColumn:this._bindings[C].binding)});this._columnLabel[C]._onResize=function(F,H){actuate.widget.form.Label.superclass._onResize.apply(this,arguments);var G=E._width;if(E._orientation==0){G=(E._width-(E._list.length-1)*E._listSeperatorWidth)/E._list.length;}G=G>E._listMinWidth?G:E._listMinWidth;G=Math.floor(G-E._additionalWidth);this.setWidth(G-6);};this._list[C]=new actuate.widget.form.ComboBox({editable:this._editable,listindex:C,value:this._value,enableKeyEvents:true,maxHeight:128,width:"auto",style:"overflow:auto;",hideTrigger:!this._triggerEnabled,listClass:"actuate-selector-combo-dataview",style:"margin: 0 3px 3px 3px"});var E=this;this._list[C]._onResize=function(F,H){var G=E._width;if(E._orientation==0){G=(E._width-(E._list.length-1)*(E._listSeperatorWidth+7))/E._list.length;}G=G>E._listMinWidth?G:E._listMinWidth;G=G-E._additionalWidth;if(this._ele&&this._eleWidth===undefined){var I=F;actuate.widget.form.ComboBox.prototype._onResize.call(this,G-2-6-1,22);}};this._panels[C].add(this._list[C],false);this._list[C].displayField="value";this._list[C].registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));this._formpanel.add(this._panels[C]);}}this._applyBtn=new actuate.uiadapter.Button({text:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection"),tooltip:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection"),ui:"action"});var D=new actuate.widget.Template(' <div class="selector-button-txt">'+actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText")+"</div>");this._deleteBtn=new actuate.uiadapter.Button({_template:D,tooltip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection"),minWidth:16,ui:"action"});this._panel.header=false;this._panel.height="auto";this._panel.width="auto";return this._formpanel;},_afterRender:function(){if(this._columnLabel&&this._columnLabel.length>0){for(var A=0;A<this._columnLabel.length;A++){this._panels[A].header.addClass("actuate-widget-panel-header-nopadding");this._columnLabel[A].render(this._panels[A].header);}}this._formpanel.header.setStyle("background","none");this._formpanel.header.setStyle("border","none");this._formpanel.header.setStyle("height","16px");this._formpanel.header.setStyle("margin-top","3px");this._formpanel.header.addClass("actuate-widget-panel-btns-center");this._applyBtn.render(this._formpanel.header);this._applyBtn.buttonEl._ele.dom.align="right";if(this._applyBtn){this._applyBtn.registerEventHandler("click",actuate.Method.bind(this._neh_apply,this),false);}this._seperator=new actuate.widget.panel.Panel({width:2,height:17,style:"margin-right:5px;margin-left:5px;"});this._seperator.addClass("actuate-selector-list-ml actuate-selector-float-right");this._seperator.render(this._formpanel.header);this._deleteBtn.render(this._formpanel.header);this._deleteBtn.buttonEl._ele.dom.align="right";if(this._deleteBtn){this._deleteBtn.registerEventHandler("click",actuate.Method.bind(this.__clearValueHandler,this),false);}this._list[0]._ele.on("keyup",actuate.Method.bind2(this._keyUpHandler,this,this._list));this.__updateSize();},_neh_apply:function(C){this._disableApply();var A;if(this._list&&this._list.length>0){A=[];for(var B=0;B<this._list.length;B++){if(this._list[B].getSelectedIndex()!=undefined){A[B]=this._list[B].getValue();}}}this.__fireValueChanged(A);},_enableApply:function(){this._applyBtn.removeCls("actuate_table_builder_up_down_buttons_disabled");this._applyBtn.enabled=true;},_disableApply:function(){this._applyBtn.addCls("actuate_table_builder_up_down_buttons_disabled");this._applyBtn.enabled=false;},__bind:function(D){actuate.selector.impl.ComboBox.superclass.__bind.call(this,D);if(D.selectorData.columnNames){var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==D.selectorData.columnNames[0]||this._bindings[B].binding==D.selectorData.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&D.selectorData&&this._list){if(this._firstBind&&D.selectorData.rows.length>0){delete this._firstBind;if(D.selectorData.rows[0].length>1){this._list[A].displayField="text";if(this._list[A].store){this._list[A].store.removeAll();}}}if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();}}this._list[A].setStore(D.selectorData.rows);if(this._value===undefined||(!this._list[A].setValue(this._value)&&!this._list.editable)){this._list[A].setSelectedIndex();this._value=null;}}}else{for(var C in D.selectorData){var E=D.selectorData[C];var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==E.columnNames[0]||this._bindings[B].binding==E.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&E&&this._list){if(this._firstBind&&E.rows.length>0){delete this._firstBind;if(E.rows[0].length>1){this._list[A].displayField="text";if(this._list[A].store){this._list[A].store.removeAll();}}}if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();}}this._list[A].setStore(E.rows);if(E.selectedValue){this._list[A].setValue(E.selectedValue);}else{this._list[A].setValue(null);}}}this._disableApply();}},__updateSize:function(){actuate.selector.impl.ComboBox.superclass.__updateSize.call(this);if(this._list&&this._list.length>0){if(this._formpanel){var B;if(this._orientation==0){B=this._list.length*this._listMinWidth+(this._list.length-1)*this._listSeperatorWidth;}else{B=this._listMinWidth;}this._formpanel.setSize(this._width>B?this._width:B,this._orientation==0?44+20:44*this._list.length+this._listSeperatorHeight*(this._list.length-1)+20);}for(var A=0;A<this._list.length;A++){this._list[A]._onResize();this._columnLabel[A]._onResize();}}},_keyUpHandler:function(B,A){if(A.keyCode==A.ENTER){this._valueSelectedHandler(this._list[0],this._list[0].getInputValue());}},_changedHandler:function(){this._valueSelectedHandler(this._list[0],this._list[0].getValue()||this._list[0].getInputValue());},_valueSelectedHandler:function(G,D){this._enableApply();var I;if(D){I=[];if(D.data){I.push(D.data.value);}else{if(typeof (D)=="string"){I.push(D);}else{if(actuate.util.Utility.isArray(D)){I.push(D[0]);}}}}this._value=I;var F=G.listindex;if(F!=undefined&&this._bindings.length>F+1){for(var C=G.listindex+1;C<this._list.length;C++){this._list[C].setSelectedIndex();}var A=[];var E=[];for(var B=0;B<=F;B++){var H=[];H.push(this._list[B].getValue());E.push(H);A.push(this._bindings[B].binding);}E=actuate.util.Json.makeArray(E);A=actuate.util.Json.makeArray(A);this._fireFetchDataEvent(this._dataObjectType,null,this._bindings[F+1].binding,this._bindings[F+1].displayColumn?this._bindings[F+1].displayColumn:this._bindings[F+1].binding,A,E);}},_updateData:function(D,A,C,B){this._fireFetchDataEvent(this._dataObjectType,null,D,A,C,B);},setDefaultFormat:function(){this.setCaption("Combo Box Selector");this.setLimit(1000);this.enableTextInput(!this._triggerEnabled);this.setAutoSuggest(false);},setFormatInfo:function(B){actuate.selector.impl.ComboBox.superclass.setFormatInfo.call(this,B);this.setLimit(B.listLimit);if(this._triggerEnabled){this.enableTextInput(B.autoTyping);this.setAutoSuggest(B.autoSuggest);}else{this.enableTextInput(true);this.setAutoSuggest(false);}for(var A=0;A<this.ORIENTATIONS.length;A++){if(this.ORIENTATIONS[A]==B.orientation){this._orientation=A;}}},setAutoSuggest:function(A){this._autoSuggest=A;},__getDisplayValue:function(C,A){if(this._list[A].getSelectedIndex()!=undefined){var B="";var B=this._list[A].getValueAt(this._list[A].getSelectedIndex(),this._list[A].displayField);if(B==null){B[i]="--"+actuate.util.Utility.getLocalizedString("gadget.display.noValue")+"--";}return B||actuate.selector.impl.List.superclass.__getDisplayValue.call(this,C);}return null;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.CheckBoxes=actuate.Class.extendClass(actuate.selector.impl.RadioBoxes,{gadgetRealName:null,initialize:function(A){actuate.selector.impl.CheckBoxes.superclass.initialize.call(this,A);this._contentPanel=null;this._orientation=actuate.selector.impl.CheckBoxes.VERTICAL;this._count=3;this._selection=[];if(A){this.gadgetRealName=A.gadgetRealName;}},setValue:function(A){if(A!==undefined){this.setValues(A);}else{this._selection=[];}},setValues:function(A){if(A&&!actuate.util.Utility.isArray(A)){this._selection=[A];}else{this._selection=A||[];}if(this._rendered){this._updateValues();}},_updateValues:function(){var B=actuate.util.Utility;var A=this._contentPanel.items.items;if(this._selection){for(var C=0;C<A.length;C++){A[C].setValue((B.arrayIndexOf(this._selection,A[C].valueText)>=0),true);}}else{for(var C=0;C<A.length;C++){A[C].setValue(false,true);}}},_refresh:function(){var A=this;this.__refresh();},_beforeRender:function(){},__createItemElement:function(B,C){var A=new actuate.widget.form.Checkbox({boxLabel:C||B,valueText:B,value:(actuate.util.Utility.arrayIndexOf(this._selection,B)>=0),autoDestroy:true});A.registerEventHandler("check",actuate.Method.bind(this._valueSelectedHandler,this));return A;},__createTools:function(){var A=[{id:"selector-clear",text:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText"),handler:actuate.Method.bind(this.__clearValueHandler,this),qtip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection")}];return A;},__clearValueHandler:function(){this.__clearValue();this.__fireSelectEvent(this._selection);},__clearValue:function(){if(this._contentPanel){this._contentPanel.items.each(function(A){A.setValue(false,true);});}this.__fireSelectEvent(undefined);},_valueSelectedHandler:function(E,C){var D=E.getValueText();var A=[];if(this._selection&&this._selection.length>0){for(var B=0;B<this._selection.length;B++){A.push(this._selection[B]);}}if(C){A.push(D);}else{actuate.util.Utility.arrayRemoveValue(A,D);}this.__fireSelectEvent(A);},__fireSelectEvent:function(A){this.__fireValueChanged((A&&A.length>0)?A:null,actuate.selector.impl.Selector.SELECTION_TYPE_MULTIPLE);},setDefaultFormat:function(){actuate.selector.impl.CheckBoxes.superclass.setDefaultFormat.call(this);this.setCaption("Check Box Selector");}});actuate.selector.impl.CheckBoxes.HORIZONTAL="horizontal";actuate.selector.impl.CheckBoxes.VERTICAL="vertical";actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.BaseSlider=actuate.Class.extendClass(actuate.selector.impl.Selector,{_orientation:null,_thumbType:null,_slider:null,_initialValue:undefined,_defaultValue:null,_tickInterval:null,_maxValue:null,_minValue:null,_autoRange:true,_autoTick:true,_showTickMarks:false,gadgetRealName:null,initialize:function(A){actuate.selector.impl.BaseSlider.superclass.initialize.call(this,A);this._list=null;this._orientation=actuate.selector.impl.BaseSlider.HORIZONTAL;this._thumbType=1;this._minValue=null;this._maxValue=null;this._initialValue=undefined;this._tickInterval=1;this._showTickMarks=false;if(A){this.gadgetRealName=A.gadgetRealName;}this._valueSelectedHandler_c=actuate.Method.bind(this._valueSelectedHandler,this);},setOrientation:function(A){if(this._orientation!=A){this._orientation=A;if(this._rendered){this._rerender();}}},getOrientation:function(){return this._orientation;},setThumbType:function(A){var B=null;if(A=="single"){B=1;}else{if(A=="dual"){B=2;}}if(B&&this._thumbType!=B){this._thumbType=B;if(this._slider){this._slider.thumbType=B;this._rerender();}}},getThumbType:function(){return this._thumbType;},getMinValue:function(){return this._minValue;},getMaxValue:function(){return this._maxValue;},setMinValue:function(A){if(A!=null){this._minValue=parseFloat(A);}else{this._minValue=null;}if(this._slider){this._slider.setMinValue(this.__convertToSliderSetting(this._minValue),true);}},setMaxValue:function(A){if(A!=null){this._maxValue=parseFloat(A);}else{this._maxValue=null;}if(this._slider){this._slider.setMaxValue(this.__convertToSliderSetting(this._maxValue),true);}},setInterval:function(A){this._tickInterval=parseFloat(A);if(this._slider){this._slider.setIncrement(this.__convertToSliderSetting(this._tickInterval),true);}},getInterval:function(){return this._tickInterval;},setValue:function(A){this._initialValue=A;},setValues:function(A){this._initialValue=A;},getValue:function(){return this._slider.getValue();},_beforeRender:function(){},_renderSlider:function(B,A,O,K,D){var G=(this._orientation==actuate.selector.impl.BaseSlider.VERTICAL);var H=actuate.widget.form.Slider;var P=false;if(this._thumbType>1){H=actuate.widget.custom.MultiSlider;P=true;}var I=1;var L=1;var M={"vertical-align":"top"};var N=this._computeSliderSize(this._width,this._height,G);var E={};var J={};var F=1;if(!G){M["height"]="35px";if(!P){E["text-align"]="center";E["vertical-align"]="top";}else{F=2;I=2;E["text-align"]="left";E["vertical-align"]="top";E["padding-left"]="10px";J["text-align"]="right";J["vertical-align"]="top";J["padding-right"]="10px";}}else{M["width"]="35px";F=2;if(!P){E["text-align"]="left";E["vertical-align"]="middle";E["padding-top"]="10px";}else{L=2;E["padding-top"]="10px";E["text-align"]="left";E["vertical-align"]="top";J["text-align"]="left";J["vertical-align"]="bottom";}}this._valuesPanel=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",layout:"table",layoutConfig:{columns:F,tableAttr:{style:"width: 100%"}},header:false,footer:false,border:false,style:{"padding":"5px 5px 5px 5px"}});this._initialValue=this._convertValues(this._initialValue);this._slider=new H({vertical:G,minValue:O,maxValue:K,value:this._convertValuesToSlider(this._initialValue),increment:D,showValue:false,thumbCount:this._thumbType,colspan:I,rowspan:L,cellStyle:M,width:N[0],height:N[1],showTickMarks:this._showTickMarks});this._valueLabel1=new actuate.widget.form.Label({cellStyle:E,cls:"actuate-unselectable"});this._valuesPanel.add(this._slider,false);this._valuesPanel.add(this._valueLabel1,false);if(P){this._valueLabel2=new actuate.widget.form.Label({cellStyle:J,cls:"actuate-unselectable"});this._valuesPanel.add(this._valueLabel2,false);if(G){var C=this._valueLabel2;this._valueLabel2=this._valueLabel1;this._valueLabel1=C;}}this._updateValueDisplay(this._initialValue);A.add(this._valuesPanel,false);return null;},_destroy:function(){this._slider.unregisterEventHandler("change",this._valueSelectedHandler_c);this._slider.unregisterEventHandler("changecomplete",this._valueSelectedHandler_c);this._slider.destroy();this._slider._ele.remove();actuate.selector.impl.BaseSlider.superclass._destroy.call(this);},_afterRender:function(){this._slider.registerEventHandler("change",this._valueSelectedHandler_c);this._slider.registerEventHandler("changecomplete",this._valueSelectedHandler_c);},__clearValue:function(){this._slider.setValue(undefined);},_updateValueDisplay:function(A){var C="";var B="";if(A&&A.length>0){var C=A[0];if(typeof (C)=="undefined"||C==null){C="";}if(A.length>1){var B=A[1];if(typeof (B)=="undefined"||B==null){B="";}}}this._valueLabel1.setText(C,true);if(this._valueLabel2){this._valueLabel2.setText(B,true);}},setDefaultFormat:function(){this.setCaption("Slider Selector");this.setOrientation(actuate.selector.impl.BaseSlider.HORIZONTAL);this.setAutoRange(true);this.setAutoTick(true);this.setThumbType("single");this.setShowTickMarks(format.showTicks);},setAutoRange:function(A){this._autoRange=A;},setAutoTick:function(A){this._autoTick=A;if(A){this.setInterval(1);}},setShowTickMarks:function(A){this._showTickMarks=A?true:false;if(this._slider){this._slider.setShowTickMarks(A);}},setDefaultValue:function(A){this._defaultValue=A;},setFormatInfo:function(A){this.setCaption(A.title);this.setDefaultValue([A.defaultValue1,A.defaultValue2]);this.setOrientation(A.orientation);this.setThumbType(A.thumbOption);if(A.autoRange){this.setAutoRange(true);}else{this.setAutoRange(false);this.setMinValue(A.minValue);this.setMaxValue(A.maxValue);}if(A.autoTick){this.setAutoTick(true);}else{this.setAutoTick(false);this.setInterval(A.interval);}this.setShowTickMarks(A.showTicks);},_computeSliderSize:function(C,A,B){if(!B){var C=this._width-25;return[C<0?0:C,50];}else{var A=this._height-25;return[25,A<0?0:A];}},__updateSize:function(){if(this._slider){var B=(this._orientation==actuate.selector.impl.BaseSlider.VERTICAL);var A=this._computeSliderSize(this._width,this._height,B);this._slider.setSize(A[0],A[1]);}actuate.selector.impl.BaseSlider.superclass.__updateSize.call(this);},_valueSelectedHandler:function(E,F,D){var B=this._convertValuesFromSlider(F);this._initialValue=B;var A=[];if(!actuate.util.Utility.isArray(B)){A.push(B);}else{A=B;}var G=[];for(var C=0;C<A.length;C++){G.push(this.__getDisplayValue(A[C]));}this._updateValueDisplay(G);if(!E.dragging){this.__fireValueChanged(B,D==true);}},__convertToSliderSetting:function(A){return A;},_convertValuesFromSlider:function(A){return A;},_convertValues:function(A){if(A===undefined){return A;}var C=null;if(this._thumbType==1){C=actuate.util.Utility.isArray(A)?A[0]:A;}else{if(this._thumbType>1){if(!actuate.util.Utility.isArray(A)){C=[];for(var B=0;B<this._thumbType;B++){C.push(A);}}else{C=A;}}}return C;},_convertValuesToSlider:function(A){return A;}});actuate.selector.impl.BaseSlider.HORIZONTAL="horizontal";actuate.selector.impl.BaseSlider.VERTICAL="vertical";actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.Slider=actuate.Class.extendClass(actuate.selector.impl.BaseSlider,{_precision:1000,_displayValue:"",isStringSlider:function(){return false;},__convertToSliderSetting:function(A){if(A!=null){return A*this._precision;}return null;},setValue:function(B){var A=B;if(!actuate.util.Utility.isArray(B)){A=[B];}this.setValues(A);},setValues:function(A){if(!actuate.util.Utility.isArray(A)){A=[A];}this._initialValue=[];for(var B=0;B<A.length;B++){var C=A[B];if(C!=null){C=parseFloat(C)||0;}this._initialValue.push(C);}if(this._slider){this._slider.setValue(this._convertValuesToSlider(this._initialValue));}this.__fireValueChanged(this._initialValue,null);},getValue:function(){return this._slider.getValue()/this._precision;},_render:function(B,A){var C;var D;if(this._minValue!=null){C=this._minValue*this._precision;}if(this._maxValue!=null){D=this._maxValue*this._precision;}this._renderSlider(B,A,C,D,this._tickInterval*this._precision);return null;},_rerender:function(){actuate.selector.impl.Slider.superclass._rerender.call(this);},__getRequestOperands:function(){return[{name:"fetchMode",value:"minmax"}];},__bind:function(D){if(D&&D.selectorData&&this._slider){if(this._autoRange&&D.selectorData.rows!=null){var A=D.selectorData.rows;if(actuate.util.Utility.isArray(A)&&A.length>0){this.setMinValue(parseFloat(A[0][0]));var E=A[0][A[0].length-1];if(typeof (E)=="string"){var F=actuate.util.Utility.getLocalizedString("contentpane.dataview.maxValueError");actuate.widget.MessageBox.alert(actuate.util.Utility.getLocalizedString("dialog.info.message"),F+" "+E);this.setMaxValue(9999999);}else{this.setMaxValue(parseFloat(E));}}}}actuate.selector.impl.Slider.superclass.__bind.call(this,D);if(D&&D.selectorData&&this._slider){if(D.selectorData.selectedValues){var B;var C=this.getSelection();if(C!=null&&(!actuate.util.Utility.isArray(C)||(C.length>0&&C[0]!=null))){B=D.selectorData.selectedValues;}else{C=undefined;}this.__fireValueChanged(C,null);this._updateValueDisplay(B);}else{if(!this.getSelection()){this._updateValueDisplay(null);}}}},_valueSelectedHandler:function(B,C,A){if(C!==undefined){if(!actuate.util.Utility.isArray(C)){C=[C];}else{if(C.length>1){if(C[0]>C[1]){C=[C[1],C[0]];}}}}actuate.selector.impl.Slider.superclass._valueSelectedHandler.call(this,B,C,A==true);},_convertValuesFromSlider:function(B){if(B==null){return B;}if(!actuate.util.Utility.isArray(B)){return B/this._precision;}var A=[];for(var C=0;C<B.length;C++){var D=B[C];if(D!=null){D=D/this._precision;}A.push(D);}return A;},_convertValuesToSlider:function(B){if(B==null){return B;}if(!actuate.util.Utility.isArray(B)){B=[B];}var A=[];for(var C=0;C<B.length;C++){if(B[C]!=null){A.push(B[C]*this._precision);}}while(A.length<this._thumbType){A.push(A[0]);}return A.sort();},setDefaultValue:function(A){if(!actuate.util.Utility.isArray(A)){A=[A];}this._defaultValue=[];for(var B=0;B<A.length;B++){var C=A[B];if(C!=null){C=parseFloat(C)||null;}else{C=null;}if((!this._firstTime||!this._autoRange)&&C==null){if(B==0){C=this._minValue;}else{C=this._maxValue;}}this._defaultValue.push(C);}if(this._defaultValue.length<this._thumbType){this._defaultValue.push((!this._firstTime||!this._autoRange)?this._maxValue:null);}},_refresh:function(A){this.__refresh();if(this._metadata&&this._metadata.Base){displayValue=this._metadata.Base.formattedValues;if(displayValue!=null){this._updateValueDisplay(displayValue);}}},_updateValueDisplay:function(A){if(this._metadata&&this._metadata.Base&&A!==undefined){this._metadata.Base.formattedValues=A;}var E=(A!=null?A:"");var D="";if(actuate.util.Utility.isArray(A)&&A.length>0){var C=actuate.util.Utility.getLocalizedString("data.nullValue");var E=A[0];if(E==null){E=C;}if(A.length>1){var D=A[1];if(D==null){D=C;}}}var B=""+E;this._displayValue=[B];if(this._valueLabel1){this._valueLabel1.setText(B,true);if(this._valueLabel2){B=""+D;this._valueLabel2.setText(B,true);this._displayValue.push(B);}}},__getDisplayValue:function(D){var B;var C=this.getSelection();if(!actuate.util.Utility.isArray(C)){C=[C];}else{if(C.length<=0){C=[null];}}for(var A=0;A<C.length;A++){if(this.__valueIsSame(D,C[A])&&this._displayValue&&this._displayValue.length>A){B=this._displayValue[A];break;}}return B||actuate.selector.impl.Slider.superclass.__getDisplayValue.call(this,D);},getSelection:function(){if(actuate.util.Utility.isArray(this._selection)&&(this._selection.length<=0||this._selection[0]==null)){return null;}return this._selection;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.StringSlider=actuate.Class.extendClass(actuate.selector.impl.BaseSlider,{isStringSlider:function(){return true;},setValue:function(A){if(actuate.util.Utility.isArray(A)){A=A[0];}this._initialValue=[A];if(this._slider){this._slider.setValue(this._convertValuesToSlider(this._initialValue),true);}},setValues:function(A){if(!actuate.util.Utility.isArray(A)){A=[A];}this._initialValue=A;if(this._slider){this._slider.setValue(this._convertValuesToSlider(this._initialValue),true);}},getValue:function(){return this._convertValuesFromSlider(this._slider.getValue());},_render:function(B,A){this._renderSlider(B,A,this._minValue||0,this._maxValue||100,this._tickInterval);return null;},_rerender:function(){if(this._data.length>0){this._initialValue=this._convertValuesFromSlider(this._slider.getValue());}actuate.selector.impl.StringSlider.superclass._rerender.call(this);},_findValueIndex:function(B){for(var A=0;A<this._data.length;A++){if(this._data[A][0]==B){return A;}}return -1;},__bind:function(C){actuate.selector.impl.StringSlider.superclass.__bind.call(this,C);if(C&&C.selectorData&&this._slider){this._data=C.selectorData.rows;this._slider.setMinValue(0);if(this._data.length>0){this._slider.setMaxValue(this._data.length-1);}else{this._slider.setMaxValue(0);}this._slider.refresh();var B=[];for(var A=0;A<this._data.length;A++){if(this._data[A].length>1){B.push(this._data[A][1]);}else{B.push(this._data[A][0]);}}this._slider.displayTexts=B;this._slider.setValue(this._convertValuesToSlider(this._initialValue),true);this._initialValue=this._convertValuesFromSlider(this._slider.getValue());this._updateValueDisplay(this._initialValue);}},_updateData:function(){if(!this._firstTime&&this._slider){var C=this._slider.getValue();if(this._data.length>0&&C!=null){if(this._thumbType>1){var A=this._slider.getValue();this._initialValue=[];for(var B=0;B<A.length;B++){this._initialValue.push(this._data[A[B]][0]);}}else{this._initialValue=this._data[C][0];}}else{this._initialValue=null;}}actuate.selector.impl.StringSlider.superclass._updateData.call(this);},_convertValuesFromSlider:function(B){if(B==null||this._data.length==0){return null;}var A=[];if(!actuate.util.Utility.isArray(B)){A.push(this._data[B][0]);}else{if(B[0]>B[1]){A.push(this._data[B[1]][0]);A.push(this._data[B[0]][0]);}else{A.push(this._data[B[0]][0]);A.push(this._data[B[1]][0]);}}return A;},_convertValuesToSlider:function(A){if(A==null||A.length==0){return null;}if(!A||A.length==0){A=[0];}while(A.length<this._thumbType){A.push(A[0]);}var B=[];for(var C=0;C<this._thumbType;C++){B.push(this._findValueIndex(A[C]));}if(B[0]<0){B[0]=0;}if(this._thumbType==1){B=B[0];}else{if(this._data&&this._data.length>0&&B[1]>this._data.length-1){B[1]=this._data.length-1;}}return B;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.EventConstants={ON_SESSION_TIMEOUT:"onSessionTimeout",ON_EXCEPTION:"onException",SELECTION_CHANGED:"ON_SELECTOR_GADGET_CHANGED"};actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.DatePicker=actuate.Class.extendClass(actuate.selector.impl.Selector,{_edit:null,_timeField:null,_width:200,_height:20,_startDate:null,_endDate:null,_timeEnabled:false,_autoRange:false,_displayValue:"",gadgetRealName:null,initialize:function(A){actuate.selector.impl.DatePicker.superclass.initialize.call(this,A);this._edit=null;this._value=null;this._timeEnabled=false;this._autoRange=false;this.setTimeEnabled(A.controlType=="date-time");if(A){this.gadgetRealName=A.gadgetRealName;}},_beforeRender:function(){},setTimeEnabled:function(A){if(this._timeEnabled!=A){this._timeEnabled=A;}},setValue:function(B){var A=B;if(actuate.util.Utility.isArray(A)){A=A[0];}if(A&&typeof (A)!="string"){if(A.displayValue){this._displayValue=A.displayValue;}A=A.value;}if(this._metadata&&this._metadata.Base){this._metadata.Base.formattedValues=this._displayValue;}if(typeof (A)=="string"){A=this._parseDate(A);}this._value=A;if(this._rendered){if(A==null){this.__clearValue();return ;}this._edit.setValue({date:this._value,text:this._getDisplayDate(this._displayValue)},true);if(this._timeField){this._timeField.setValue(A);}this._valueSelectedHandler();}},_parseDate:function(A){if(A){if(!this._timeEnabled){A=A.split(" ")[0];}else{var B=A.split("+");A=B[0];if(B!=null&&B.length==0){B=A.split(" ");if(B!=null){A=B[0];if(B.length>1){B=B[1].split("-");A=A+" "+B[0];}}}}return actuate.util.Date.parseDate(A,actuate.util.Constants[this._timeEnabled?"LOCALE_NEUTRAL_DATETIME_FORMAT":"LOCALE_NEUTRAL_DATE_FORMAT"]);}},_render:function(C){var B=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",layout:"column",header:false,footer:false,border:false});var D=actuate.util.Utility.getLocalizedStrings("DatePicker",["okText","cancelText","todayText","minText","maxText","disabledDaysText","disabledDatesText","nextText","prevText","monthYearText"]);var A={enableKeyEvents:true,value:this._value,validateValue:function(){},text:this._getDisplayDate(this._displayValue),minValue:this._startDate||null,maxValue:this._endDate||null,pickerConfig:D,readOnly:true,msgTarget:"qtip",style:"margin: 3px 0 3px 0",width:"100px"};actuate.Class.extend(A,actuate.util.Utility.getLocalizedStrings("DateField",["disabledDaysText","disabledDatesText","minText","maxText","invalidText"]));this._edit=new actuate.widget.form.DateField(A);this._edit.displayField="text";this._edit.registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));this._edit.registerEventHandler("change",actuate.Method.bind(this._valueChangedHandler,this));B.add(this._edit,false);if(this._timeEnabled){var A={enableKeyEvents:true,value:this._value,validateValue:function(){},format:"G:i:s.u",readOnly:false,msgTarget:"qtip",width:100};actuate.Class.extend(A,actuate.util.Utility.getLocalizedStrings("DateField",["invalidText","minText","maxText"]));var E=this;var F=actuate.Class.extendClass(actuate.widget.form.TimeField,{getDate:function(){return this.parseDate(this.value);}});this._timeField=new F(A);this._timeField.setValue(this._value);this._timeField.registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));this._timeField.registerEventHandler("change",actuate.Method.bind(this._valueSelectedHandler,this));B.add(this._timeField,false);}return B;},_refresh:function(){this.__refresh();if(this._metadata&&this._metadata.Base&&this._metadata.Base.localeNeutralValues&&this._metadata.Base.localeNeutralValues.length>0){this.setValue({value:this.__getRealValue(this._metadata.Base.localeNeutralValues[0].value),displayValue:this._getDisplayDate(this._metadata.Base.localeNeutralValues[0].displayValue)});}},__getRequestOperands:function(){return[{name:"fetchMode",value:"minmaxdate"}];},__clearValue:function(){this.__fireValueChanged(undefined,null);this._edit.setValue(undefined);},__bind:function(C){actuate.selector.impl.DatePicker.superclass.__bind.call(this,C);if(C&&C.selectorData&&this._edit){if(C.selectorData.selectedValues){var A=C.selectorData.selectedValues;if(A.length>0){this.setValue(A[0]);}}else{C=C.selectorData.rows;if(C&&C.length>0){var B=this._parseDate(C[0][0])||null;var D=this._parseDate(C[0][C[0].length-1])||null;this.setMinValue(B);this.setMaxValue(D);}else{if(this._endDate){this.setMaxValue(this._endDate);}else{this.setMaxValue(null);}if(this._startDate){this.setMinValue(this._startDate);}else{this.setMinValue(null);}}}}},__updateSize:function(){if(this._edit){var A=this._timeField?this._width-108:(actuate.util.browser.isSafari?this._width-10:this._width-8);this._edit.setSize(A,20);}actuate.selector.impl.DatePicker.superclass.__updateSize.call(this);},_keyUpHandler:function(B,A){if(A.keyCode==A.ENTER){this._valueSelectedHandler(B,{timeValue:B.getRawValue()});}},_valueChangedHandler:function(B,A){if(this._timeField){if(A){this._timeField.enable();}else{this._timeField.setValue(undefined);this._timeField.disable();}}},_valueSelectedHandler:function(E,C){var B=this._edit.getValue();if(B&&!actuate.util.Utility.isDate(B)){B=new actuate.util.Date(B);}var A=C?C.timeValue:null;if(A==null&&this._timeField&&B){var D=this._timeField.getDate();if(D&&actuate.util.Utility.isDate(D)){B.setHours(D.getHours());B.setMinutes(D.getMinutes());B.setSeconds(D.getSeconds());}}var F;this._value=B;if(B){F=B.format(actuate.util.Constants[this._timeEnabled?"LOCALE_NEUTRAL_DATETIME_FORMAT":"LOCALE_NEUTRAL_DATE_FORMAT"]);if(A!=null){F=this._getDisplayDate(F);F=F+" "+A;this._value=this._parseDate(F);}}else{if(B!==undefined){F=null;}}this.__fireValueChanged(F);},setDefaultFormat:function(){this._startDate=null;this._endDate=null;},setFormatInfo:function(A){actuate.selector.impl.DatePicker.superclass.setFormatInfo.call(this,A);if(A.autoRange){this.setAutoRange(true);}else{this.setAutoRange(false);this.setMinValue(A.startDate||null);this.setMaxValue(A.endDate||null);}},setAutoRange:function(A){this._autoRange=A;if(A){this.setMinValue(null);this.setMaxValue(null);}},setMinValue:function(A){if(typeof (A)=="string"){A=this._parseDate(A);}this._startDate=A||null;if(this._edit){this._edit.minValue=A||null;}},setMaxValue:function(A){if(typeof (A)=="string"){A=this._parseDate(A);}this._endDate=A;if(this._edit){this._edit.maxValue=A||null;}},__createTools:function(){this._toolsSize=40;var A=[{id:"selector-clear",text:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText"),handler:actuate.Method.bind(this.__clearValueHandler,this),qtip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection")}];return A;},__clearValueHandler:function(){this.__clearValue();this._valueSelectedHandler();},_afterRender:function(){if(this._edit){this.__updateSize();}if(this._timeField){this._timeField._ele.on("keyup",actuate.Method.bind2(this._keyUpHandler,this,this._timeField));}},__getDisplayValue:function(A){return this._displayValue||actuate.selector.impl.DatePicker.superclass.__getDisplayValue.call(this,A);},_getDisplayDate:function(B){var A=B;if(actuate.util.Utility.isArray(A)){A=A[0];}if(A!=null&&this._timeEnabled){if(A.indexOf(":")>=0){A=A.split(":")[0];A=A.substring(0,A.lastIndexOf(" "));}}return A;},_getDisplayTime:function(B){if(!this._timeEnabled){return"";}var A=B;if(actuate.util.Utility.isArray(A)){A=A[0];}if(A!=null){if(A.split(" ").length>0){A=A.split(" ")[1];}else{A="";}}return A;}});actuate.util.Package.define("actuate.selector.impl");actuate.selector.impl.TreeSelector=actuate.Class.extendClass(actuate.selector.impl.SelectorGroup,{_noUpdate:false,_oldSelectedValues:null,_list:null,_listSeperatorWidth:10,_listSeperatorHeight:20,_listMinWidth:100,_listMinHeight:5,_panlMargin:26,_firstBind:null,_height:150,_toolsSize:0,gadgetRealName:null,_panels:null,_additionalWidth:0,_additionalHeight:0,showborder:true,_applyBtn:null,initialize:function(A){if(actuate.util.browser.isIE9Flag){this._additionalWidth=2;}else{if(actuate.util.browser.isSafari){this._additionalWidth=6;}}actuate.selector.impl.List.superclass.initialize.call(this,A);this._bindings=A.metadata.Base.bindings;this._list=null;this._firstBind=true;this._toolsSize=0;if(A){this.gadgetRealName=A.gadgetRealName;}},setValue:function(A){if(A!==undefined&&A.length!=0){this.setValues(A);}else{this._selection=[];}},setValues:function(A){var B;if(A&&!actuate.util.Utility.isArray(A)){B=[A];}else{if(A){B=A;}else{B=[];}}this._selection=B;},_refresh:function(A){var B=this;this._fireFetchDataEvent(this._dataObjectType,null,null,null,null,null,"FetchSelectorLists");},_beforeRender:function(){},render:function(A){return actuate.selector.impl.ListSelectorGroup.superclass.render.call(this,A);},_render:function(B){this._panels=[];this._formpanel=new actuate.widget.panel.Panel({layout:"column",style:"overflow:hidden;text-overflow:clip;white-space:nowrap;overflow:hidden;",bodycls:"actuate-list-selector-panel-header",baseCls:"actuate-selector-panel",header:true,footer:true,border:false});if(this._bindings&&this._bindings.length>0){this._list=[];this._columnLabel=[];this._listSeperator=[];for(var C=0;C<this._bindings.length;C++){this._panels[C]=new actuate.widget.panel.Panel({cls:"actuate-list-selector-panel",baseCls:"actuate-selector-panel",headerCls:"actuate-list-selector-panel-header",header_selectable:true,height:"auto",header:true,footer:false,border:false});this._list[C]=new actuate.widget.form.ListBox({multiSelect:false,listindex:C,header:false,footer:false,region:"center",width:"auto",height:"auto",defaultAutoCreate:{cls:"actuate-selector-list-border",html:'<div class="actuate-selector-list-tl"><div class="actuate-selector-list-tr"><div class="actuate-selector-list-tm"></div></div></div>'+'<div class="actuate-selector-list-ml"><div class="actuate-selector-list-mr"><div class="actuate-selector-list-body"><div class="actuate-selector-list"></div></div></div></div>'+'<div class="actuate-selector-list-bl"><div class="actuate-selector-list-br"><div class="actuate-selector-list-bm">'+"</div></div></div>"}});var E=this._list[C]._initList;this._list[C]._initList=function(G){this._innerEl=this._ele.first().next().first().first().first();E.call(this,{cls:"actuate-list"});this._scrollEl=this._innerEl.first();};var A=this._list[C]._onResize;var F=this;this._list[C]._onResize=function(H,J){actuate.widget.form.ListBox.superclass._onResize.apply(this,arguments);var I=(F._width-(F._list.length-1)*(F._listSeperatorWidth))/F._list.length;I=I>F._listMinWidth?I:F._listMinWidth;I=Math.floor(I-F._additionalWidth);var G=F._height-24;G=G-25;G=Math.floor(G-F._additionalHeight);G=Math.floor(G>F._listMinHeight?G:F._listMinHeight);if(this._ele&&this._eleWidth===undefined){var K=H;this._ele.setWidth(I);this._ele.setHeight(G);this.innerList.setWidth(I-6);this.innerList.setHeight(G-6-2);}};this._list[C].displayField="value";this._list[C].registerEventHandler("select",actuate.Method.bind(this._valueSelectedHandler,this));this._columnLabel[C]=new actuate.widget.form.Label({width:"auto",style:"text-align:left;color:black;padding-left:0px;font-weight:bold;white-space:nowrap;overflow:hidden;position:absolute;",text:this._bindings[C].displayColumnName?this._bindings[C].displayColumnName:(this._bindings[C].displayColumn?this._bindings[C].displayColumn:this._bindings[C].binding)});this._columnLabel[C]._onResize=function(G,I){actuate.widget.form.Label.superclass._onResize.apply(this,arguments);var H=(F._width-(F._list.length-1)*F._listSeperatorWidth)/F._list.length;H=H>F._listMinWidth?H:F._listMinWidth;H=Math.floor(H-F._additionalWidth);this.setWidth(H-6);};this._panels[C].add(this._list[C],false);this._formpanel.add(this._panels[C]);}this._applyBtn=new actuate.uiadapter.Button({text:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection"),tooltip:actuate.util.Utility.getLocalizedString("gadget.tooltip.applySelection"),ui:"action"});var D=new actuate.widget.Template(' <div class="selector-button-txt">'+actuate.util.Utility.getLocalizedString("gadget.tooltip.clearButtonText")+"</div>");this._deleteBtn=new actuate.uiadapter.Button({_template:D,tooltip:actuate.util.Utility.getLocalizedString("gadget.tooltip.clearSelection"),minWidth:16,ui:"action"});this._panel.header=false;this._panel.height="auto";this._panel.width="auto";}return this._formpanel;},_afterRender:function(){if(this._columnLabel&&this._columnLabel.length>0){for(var A=0;A<this._columnLabel.length;A++){this._panels[A].header.addClass("actuate-widget-panel-header-nopadding");this._columnLabel[A].render(this._panels[A].header);}}this._formpanel.header.setStyle("background","none");this._formpanel.header.setStyle("border","none");this._formpanel.header.setStyle("height","16px");this._formpanel.header.setStyle("margin-top","3px");this._formpanel.header.addClass("actuate-widget-panel-btns-center");this._applyBtn.render(this._formpanel.header);this._applyBtn.buttonEl._ele.dom.align="right";if(this._applyBtn){this._applyBtn.registerEventHandler("click",actuate.Method.bind(this._neh_apply,this),false);}this._seperator=new actuate.widget.panel.Panel({width:2,height:17,style:"margin-right:5px;margin-left:5px;"});this._seperator.addClass("actuate-selector-list-ml actuate-selector-float-right");this._seperator.render(this._formpanel.header);this._deleteBtn.render(this._formpanel.header);this._deleteBtn.buttonEl._ele.dom.align="right";if(this._deleteBtn){this._deleteBtn.registerEventHandler("click",actuate.Method.bind(this.__clearValueHandler,this),false);}this.__updateSize();},_neh_apply:function(){this._disableApply();var A;if(this._list&&this._list.length>0){A=[];for(var B=0;B<this._list.length;B++){var C=this._list[B].getSelectedValues();if(C){A[B]=C;}}}this.__fireValueChanged(A);},_enableApply:function(){this._applyBtn.removeCls("actuate_table_builder_up_down_buttons_disabled");this._applyBtn.enable();},_disableApply:function(){this._applyBtn.addCls("actuate_table_builder_up_down_buttons_disabled");this._applyBtn.disable();},__bind:function(D){actuate.selector.impl.ListSelectorGroup.superclass.__bind.call(this,D);if(D.selectorData.columnNames){var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==D.selectorData.columnNames[0]||this._bindings[B].binding==D.selectorData.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&D.selectorData&&this._list){this._noUpdate=true;if(this._firstBind&&D.selectorData.rows.length>0){delete this._firstBind;if(D.selectorData.rows[0].length>1){this._list[A].displayField="text";this._list[A].store.removeAll();this._list[A].setTemplate();}}this._list[A].setStore(D.selectorData.rows);this._list[A].setSelectedIndex();this._list[A].setValues();if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();this._list[B].setValues();}}this._noUpdate=false;if(this._oldSelectedValues&&this._oldSelectedValues[A]){this._list[A].setValues(this._oldSelectedValues[A]);}if(D.selectorData.selectedValue){if(!this._oldSelectedValues){this._oldSelectedValues=[];}this._oldSelectedValues[A]=D.selectorData.selectedValue;this._list[A].setValues(D.selectorData.selectedValue);}}}else{for(var C in D.selectorData){var E=D.selectorData[C];var A=0;if(this._bindings&&this._bindings.length>0){for(var B=0;B<this._bindings.length;B++){if(this._bindings[B].binding==E.columnNames[0]||this._bindings[B].binding==E.columnNames[0].replace(".","/")){A=B;break;}}}if(D&&E&&this._list){this._noUpdate=true;if(this._firstBind&&E.rows.length>0){delete this._firstBind;if(E.rows[0].length>1){this._list[A].displayField="text";this._list[A].store.removeAll();this._list[A].setTemplate();}}this._list[A].setStore(E.rows);this._list[A].setSelectedIndex();this._list[A].setValues();if(E.selectedValue){if(!this._oldSelectedValues){this._oldSelectedValues=[];}this._oldSelectedValues[A]=E.selectedValue;this._list[A].setValues(E.selectedValue);}if(A+1<this._list.length){for(var B=A+1;B<this._list.length;B++){this._list[B].store.removeAll();this._list[B].setSelectedIndex();this._list[B].setValues();}}this._noUpdate=false;}}this._disableApply();}this.showBorder();},__updateSize:function(){actuate.selector.impl.List.superclass.__updateSize.call(this);if(this._list&&this._list.length>0){if(this._formpanel){var B=this._list.length*this._listMinWidth+(this._list.length-1)*this._listSeperatorWidth;this._formpanel.setSize(this._width>B?this._width:B,this._height);}for(var A=0;A<this._list.length;A++){this._list[A]._onResize();this._columnLabel[A]._onResize();if(this._listSeperator[A]){this._listSeperator[A]._onResize();}}}},__createTools:function(){return null;},__clearValueHandler:function(){this.__clearValue();this._valueSelectedHandler(this._list[0],null);this._disableApply();},__clearValue:function(){this._fireSelectionEvent(undefined);if(this._list[0]){this._list[0].setSelectedIndex();this._list[0].setValues();this._list[0].doQuery(undefined,true);if(this._list.length>1){this._list[0].setSelectedIndex();for(var A=this._list.length-1;A>0;A--){this._list[A].setSelectedIndex();this._list[A].store.removeAll();}}}this._oldSelectedValues=[];this.__fireValueChanged(null);},_updateData:function(D,A,C,B){this._fireFetchDataEvent(this._dataObjectType,null,D,A,C,B);},_valueSelectedHandler:function(D,A){if(this._noUpdate){return ;}this._enableApply();var C;for(var B=D.listindex+1;B<this._list.length;B++){this._list[B].setSelectedIndex();this._list[B].setValues();this._list[B].store.removeAll();}if(A&&A.length>0){C=[];for(var B=0;B<A.length;B++){C.push(A[B].data.value);}this._fireSelectionEvent(C,D.listindex);}},_fireSelectionEvent:function(I,J){var A=actuate.selector.impl.Selector.SELECTION_TYPE_SINGLE;var G=J==undefined?[]:this._list[J].getSelectedIndexes();var H=G.length;var N;if(H>0){N=I;}var C=this._bindings.length;if(J!=undefined&&C>J+1){this._list[J+1].setSelectedIndex();this._list[J+1].setValues();var D=C<=J+1?null:this._bindings[J+1].binding;var F=C<=J+1?null:this._bindings[J+1].displayColumn;var B=[];var L=[];for(var E=0;E<=J;E++){var M=[];B[E]=this._bindings[E].binding;var K=this._list[E].getSelectedValues();if(K){for(N in K){M.push(K[N]);}}L.push(M);}L=actuate.util.Json.makeArray(L);B=actuate.util.Json.makeArray(B);this._fireFetchDataEvent(this._dataObjectType,null,D,F?F:D,B,L);}},setDefaultFormat:function(){},setFormatInfo:function(A){actuate.selector.impl.List.superclass.setFormatInfo.call(this,A);},showBorder:function(L){if(L!=null&&L!=undefined){this.showborder=L;}var B=this._list[0].getEl().dom;var N=B.firstChild;var J=N.firstChild;var F=J.firstChild;var G=N.nextSibling;var C=G.firstChild;var K=C.firstChild;var O=K.firstChild.firstChild;var E=G.nextSibling;var M=N.firstChild;var I=J.firstChild;var D=[N,J,F,G,C,K,O,E,M,I];for(var H=0;H<D.length;H++){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](D[H],"actuate-dashboard-gadget-item-noborder");}for(var A=O.firstChild;A!=null;A=A.nextSibling){this[this.showborder?"_removeCssClassFromDiv":"_addCssClassToDiv"](A,"actuate-dashboard-gadget-item-noborder");}},__getDisplayValue:function(D,A){var C="";if(D!=null){var E=this._list[A].getSelectedTexts(this._list[A].displayField);if(E&&E.length&&E.length>0){C=[];for(var B=0;B<E.length;B++){if(E[B]==null){C[B]="-- "+actuate.util.Utility.getLocalizedString("gadget.display.noValue")+"-- ";}else{C[B]=E[B];}}}else{C=E;}}return C||actuate.selector.impl.List.superclass.__getDisplayValue.call(this,D);},__getRealValue:function(B,A){return B;}});