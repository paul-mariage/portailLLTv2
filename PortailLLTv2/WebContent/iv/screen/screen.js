actuate.util.Package.define("actuate.screen");actuate.screen.ScreenRequest=actuate.Class.create();actuate.screen.ScreenRequest.prototype=actuate.Class.extend(new actuate.common.IportalRequest(),{_appName:null,_screenDesign:null,_screenName:null,initialize:function(){actuate.common.IportalRequest.prototype.initialize.call(this);},_getRequestAttributes:function(){var A=actuate.common.IportalRequest.prototype._getRequestAttributes.call(this);if(this._appName){A.put("__appname",this._appName);}if(this._screenDesign){A.put("__design",this._screenDesign);}if(this._screenName){A.put("__screenname",this._screenName);}return A;},createRequestURL:function(A){this._validate();var B=actuate.util.Utility.makeAbsoluteUrl(this._iportalUrl+A);if(this._requestOptions&&this._requestOptions.__getJsessionId()){B+=";"+"jsessionid="+this._requestOptions.__getJsessionId();}B+=(B.indexOf("?")>0)?"&":"?";B+=this._getRequestAttributes().toURI();return B;},setScreenName:function(A){this._screenName=A;},setScreenDesign:function(A){this._screenDesign=A;},setAppName:function(A){this._appName=A;},getScreenName:function(){return this._screenName;},getScreenDesign:function(){return this._screenDesign;},getAppName:function(){return this._appName;}});actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.Widget=actuate.Class.create();actuate.screen.proxy.Widget.prototype={adapter:null,_type:null,_parent:null,id:null,initialize:function(B,A,C){this._type=B;this._parent=A;this.id=C;},registerEventHandlers:function(){this.adapter.registerEventHandlers();},render:function(){},getInfoApp:function(){var A=this;while(A._parent){A=A._parent;}return A;},getAdapter:function(A){return this.getInfoApp().getProxy(A).adapter;},getDataviewAdapter:function(C){var A=null;var B=this.getInfoApp().getDataviewProxy(C);if(B){A=B.adapter;}return A;},broadcastEvent:function(A,B){this.getInfoApp().broadcastEvent(this,B,A);},notify:function(C,A){var B=true;if(jQuery.type(A)==="function"){B=A(C.adapter,this.adapter);}if(B&&this.adapter.notify){this.adapter.notify(C.adapter,A);}}};actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.Dataview=actuate.Class.create();actuate.screen.proxy.Dataview.prototype=actuate.Class.extend(new actuate.screen.proxy.Widget(),{initialize:function(B,C,A){actuate.screen.proxy.Widget.prototype.initialize.call(this,actuate.screen.proxy.Item.DATAVIEW,B,C);switch(this.getInfoApp().lib){case"jquery mobile":this.adapter=new actuate.screen.data.jquerymobile.Dataview(this,A);break;case"extjs":case"sencha mobile":break;}}});actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.Item=actuate.Class.create();actuate.Class.extend(actuate.screen.proxy.Item,{BUTTON:"acbuttonwidget",TEXTINPUT:"actextinputwidget",TEXTAREA:"textarea",SLIDER:"slider",COMBO:"combo",RADIO:"radio",INPUT:"input",LIST:"aclistwidget",TABLE:"table",SWITCH:"switch",NAVBAR:"acnavbarwidget",CHART:"acchartwidget",CALCULATION:"calculation",LABEL:"aclabelwidget",CUSTOM:"accustomwidget",SCREEN:"screen",DIALOG:"acdialogwidget",PANEL:"acpanelwidget",FORM:"acformwidget",DECK:"acdeckwidget",DATAVIEW:"dataview",getInstance:function(D,E,B){var C=B.type;if(C){C=C.toLowerCase();}delete B.type;var A=null;switch(C){case this.BUTTON:case this.TEXTINPUT:case this.TEXTAREA:case this.SLIDER:case this.RADIO:case this.INPUT:case this.LIST:case this.TABLE:case this.COMBO:case this.SWITCH:case this.NAVBAR:case this.CHART:case this.CALCULATION:case this.LABEL:case this.CUSTOM:A=new actuate.screen.proxy.Item(C,D,E,B);break;case this.SCREEN:A=new actuate.screen.proxy.Screen(D,E,B);break;case this.DIALOG:case this.PANEL:case this.FORM:case this.DECK:A=new actuate.screen.proxy.Container(C,D,E,B);break;case this.DATAVIEW:A=new actuate.screen.proxy.Dataview(D,E,B);break;}return A;}});actuate.screen.proxy.Item.prototype=actuate.Class.extend(new actuate.screen.proxy.Widget(),{initialize:function(C,B,D,A){if(!B){return ;}actuate.screen.proxy.Widget.prototype.initialize.call(this,C,B,D);this._box=A.box;delete A.box;this.adapter=this.__createAdapter(A);},__createAdapter:function(B){var A=null;switch(this.getInfoApp().lib){case"jquery mobile":var C=this._type.slice(2,this._type.indexOf("widget"));C=C.charAt(0).toUpperCase()+C.slice(1);A=new actuate.screen.items.jquerymobile[C](this,B);break;case"extjs":case"sencha mobile":break;}return A;},render:function(){var A=null;if(this._parent&&this._parent.getBoxForChild){A=this._parent.getBoxForChild(this.id);}if(this.adapter){this.adapter.render(A);}}});actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.Container=actuate.Class.create();actuate.screen.proxy.Container.prototype=actuate.Class.extend(new actuate.screen.proxy.Item(),{_children:null,_rendered:false,initialize:function(C,B,E,A){if(!B){return ;}actuate.screen.proxy.Item.prototype.initialize.call(this,C,B,E,A);this._children=A.items;if(this._children){for(var D in this._children){this._children[D]=actuate.screen.proxy.Item.getInstance(this,D,this._children[D]);}}},render:function(){actuate.screen.proxy.Item.prototype.render.call(this);if(this._children){for(var A in this._children){this._children[A].render();}}this._rendered=true;},registerEventHandlers:function(){this.adapter.registerEventHandlers();if(this._children){for(var A in this._children){this._children[A].registerEventHandlers();}}},getProxy:function(D){if(this._children&&this._children[D]){return this._children[D];}else{for(var C in this._children){var B=this._children[C];if(B.getProxy){var A=B.getProxy(D);if(A){return A;}}}}return null;},getBoxForChild:function(A){return this.adapter.getBoxForChild(A);}});actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.Screen=actuate.Class.create();actuate.screen.proxy.Screen.prototype=actuate.Class.extend(new actuate.screen.proxy.Container(),{initialize:function(B,C,A){actuate.screen.proxy.Container.prototype.initialize.call(this,actuate.screen.proxy.Item.SCREEN,B,C,A);},__createAdapter:function(B){var A=null;switch(this.getInfoApp().lib){case"jquery mobile":A=new actuate.screen.items.jquerymobile.Screen(this,B);break;case"extjs":case"sencha mobile":break;}return A;},render:function(){actuate.screen.proxy.Container.prototype.render.call(this);this.registerEventHandlers();}});actuate.util.Package.define("actuate.screen.proxy");actuate.screen.proxy.InfoApp=actuate.Class.create();actuate.screen.proxy.InfoApp.prototype=actuate.Class.extend(new actuate.screen.proxy.Widget(),{lib:"jquery mobile",_appName:null,_designName:"ipad.screendesign",_screenSet:null,_eventmapping:null,_dataviews:null,initialize:function(A,B){actuate.screen.proxy.Widget.prototype.initialize.call(this,null,null,null);this._appName=A;if(B){this._designName=B;}this._screenSet={};this._eventmapping={};this._dataviews={};this.adapter=new actuate.screen.System(this);},_getScreen:function(A,C){var B=new actuate.screen.ScreenRequest();B.setAppName(this._appName);B.setScreenDesign(this._designName);if(A){B.setScreenName(A);}B.setExceptionHandler(function(D){throw D;});B.makeAjaxConnection("get","screen",null,"",actuate.Method.bind2(this._initScreen,this,C));},_initScreen:function(F,B){var C=JSON.parse(B.getResponseText());for(var E in C.items){actuate.Class.extend(this._eventmapping,C.items[E].eventmapping);C.items[E]=new actuate.screen.proxy.Screen(this,E,C.items[E]);}actuate.Class.extend(this._screenSet,C.items);for(var A in C.dataviews){C.dataviews[A]=new actuate.screen.proxy.Dataview(this,A,C.dataviews[A]);}actuate.Class.extend(this._dataviews,C.dataviews);var D=null;for(var E in C.items){if(!D){D=E;}C.items[E].render();}if(F){F();}else{this._screenSet[D].notify(this);}},getBoxForChild:function(A){return document.body;},broadcastEvent:function(D,C,A){var G=null;var B=D.id+(C!=undefined?"."+C:"");if(this._eventmapping[B]){G=this._eventmapping[B][A];}for(var F in G){if(typeof G[F]==="string"){G[F]=new Function("publisher","subscriber",G[F]);}var E=this.getProxy(F);if(E){E.notify(D,G[F]);}else{this._getScreen(F,actuate.Method.bind2(this._resumeEvent,this,D,F,A,G[F]));}}},_resumeEvent:function(C,E,A,B){var D=this.getProxy(E);if(D){D.notify(C,B);}},notify:function(D,C){if(jQuery.type(C)==="object"){var B=[];if(C.parameters){for(var A in C.parameters){B.push(C.parameters[A]);}}this.adapter[C.action].apply(this.adapter,B);}},gotoScreen:function(A){var B=this.getProxy(A);if(!B){this._getScreen(A);}else{B.notify(this);}},getProxy:function(C){if(C==="System"){return this;}var A=this._screenSet[C];if(!A){for(var B in this._screenSet){var A=this._screenSet[B].getProxy(C);if(A){break;}}}return A;},getDataviewProxy:function(A){return this._dataviews[A];}});actuate.util.Package.define("actuate.screen");actuate.Class.extend(actuate.screen,{createInfoApp:function(A,C){var B=new actuate.screen.proxy.InfoApp(A,C);if(!actuate.screen[A]){actuate.screen[A]={};}actuate.screen[A][C?C:"dafault"]=B;return B.adapter;},getApp:function(A,B){return actuate.screen[A][B?B:"dafault"].adapter;}});actuate.screen.System=actuate.Class.create();actuate.screen.System.prototype={_proxy:null,initialize:function(A){this._proxy=A;},getWidget:function(A){return this._proxy.getProxy(A).adapter;},toURL:function(A){window.open(A,"_blank");},toScreen:function(A){this._proxy.gotoScreen(A);}};actuate.util.Package.define("actuate.screen.data.jquerymobile");actuate.screen.data.jquerymobile.Dataview=actuate.Class.create();actuate.screen.data.jquerymobile.Dataview.prototype={_proxy:null,_fields:null,_data:null,_cache:null,_sortCache:null,_filters:null,initialize:function(B,A){this._proxy=B;this._fields=A.fields;this._rawData=A.data;if(A.data){this._cache=this._normalization(A.data);}this._sortCache={},this._filters={};},filter:function(C,B,A){this._filters[C.id()]={"column":B,"value":A};},sort:function(A){this._sortCache[A]=this._applySort(A,this._cache);},notify:function(B,A){this._proxy.broadcastEvent("refresh");},registerEventHandlers:function(){},getIterator:function(){return new actuate.screen.data.jquerymobile.DataIterator(this,this._applyFilter(this._cache));},getGroupedIterator:function(A){if(A){if(!this._sortCache[A]){this._sortCache[A]=this._applySort(A,this._cache);}}return new actuate.screen.data.jquerymobile.GroupedIteratorAdapter(this,A,this._applyFilter(this._sortCache[A]));},getRawData:function(B){if(!B){return this._rawData;}var A=[];for(var E=0;E<this_rawData.length;E++){var F=[];for(var D=0;D<B.length;D++){var C=0;for(;C<this._fields.length;C++){if(B[D]==this._fields[C]){break;}}F.push(this_rawData[E][C]);}A.push(F);}return A;},_applySort:function(B,C){var A=jQuery.extend([],C);if($.inArray(B,this._fields)){A.sort(function(E,D){var F=0;if(D[B]<E[B]){F=1;}else{if(D[B]>E[B]){F=-1;}}return F;});}return A;},_applyFilter:function(C){var A=[];for(var B=0;B<C.length;B++){if(!this._isFiltered(C[B])){A.push(C[B]);}}return A;},_normalization:function(C){var A=[];for(var B=0;B<C.length;B++){A.push(this._convert(C[B]));}return A;},_getData:function(){var A=[];for(var B=0;B<this._cache.length;B++){if(!this._isFiltered(this._cache[B])){A.push(this._cache[B]);}}return A;},_isFiltered:function(D){var B=false;for(var A in this._filters){var C=this._filters[A];if(D[C.column]!==C.value){B=true;break;}}return B;},_convert:function(C){var B={};for(var A=0;A<this._fields.length;A++){for(var D in this._fields[A]){B[D]=C[A];break;}}return B;},refresh:function(A){}};actuate.util.Package.define("actuate.screen.data.jquerymobile");actuate.screen.data.jquerymobile.DataIterator=actuate.Class.create();actuate.screen.data.jquerymobile.DataIterator.prototype={_pageSize:50,_pagePointer:0,_dataview:null,_data:null,_filters:null,initialize:function(B,A){this._dataview=B;this._data=A;this._pagePointer=0;this._filters={};},getRow:function(A){return this._data[A];},getData:function(){return this._applyFilter();},getRow:function(A){return this._data[A];},hasNextPage:function(){return this._pagePointer*this._pageSize<this._data.length();},nextPage:function(){var B=[];if(this._pagePointer<this._data.length){var A=this._pagePointer+this._pageSize;for(var C=this._pagePointer;C<A&&C<this._data.length;C++){B.push(this._data[C]);}this._pagePointer=A;}return B;},previousPage:function(){var B=[];var A=this._pagePointer-this._pageSize;var D=A-this._pageSize;if(D>=0){for(var C=D;C<A;C++){B.push(this._data[C]);}this._pagePointer=A;}return B;},filter:function(C,B,A){this._filters[C.id()]={"column":B,"value":A};},cloneGroupedIterator:function(A){var B=this._dataview.getGroupedIterator(A);B._filters=$.extend(true,{},this._filters);return B;},_applyFilter:function(){var A=[];for(var B=0;B<this._data.length;B++){if(!this._isFiltered(this._data[B])){A.push(this._data[B]);}}return A;},_isFiltered:function(D){var B=false;for(var A in this._filters){var C=this._filters[A];if(D[C.column]!==C.value){B=true;break;}}return B;}};actuate.util.Package.define("actuate.screen.data.jquerymobile");actuate.screen.data.jquerymobile.GroupedIteratorAdapter=actuate.Class.create();actuate.screen.data.jquerymobile.GroupedIteratorAdapter.prototype={_dataItem:null,_groupKey:null,_data:null,_filters:null,initialize:function(B,A,C){this._dataItem=B;this._groupKey=A;this._data=C;this._filters={};},getRow:function(A){return this._data[A];},getData:function(){return this._applyFilter();},_isFiltered:function(D){var B=false;for(var A in this._filters){var C=this._filters[A];if(D[C.column]!==C.value){B=true;break;}}return B;},_applyFilter:function(){var A=[];for(var B=0;B<this._data.length;B++){if(!this._isFiltered(this._data[B])){A.push(this._data[B]);}}return A;}};actuate.util.Package.define("actuate.screen.items.Item");actuate.screen.items.Item=actuate.Class.create();actuate.screen.items.Item.prototype={_proxy:null,_box:null,_instance:null,initialize:function(A){this._proxy=A;},getSystem:function(){return this._proxy.getInfoApp().adapter;},getId:function(){return this._proxy.id;},refresh:function(A){$.extend(true,this.cfg,A);this._instance.remove();this.render(this._box);},registerEventHandlers:function(){},render:function(A){},notify:function(B,A){},getBoxForChild:function(A){}};actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.List=actuate.Class.create();actuate.screen.items.jquerymobile.List.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,_scroll:null,_onSelectClosure:null,_handleClick:true,_selectedIndex:null,_iterator:null,_defaultMarkup:'<table style="width:100%"><tr><td style="font-size:15px">${label}</td></tr></table>',initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;this._onSelectClosure=actuate.Method.bind(this._onselect,this);this._onScrollMoveClosure=actuate.Method.bind(this._onScrollMove,this);this._onScrollEndClosure=actuate.Method.bind(this._onScrollEnd,this);},getSelectedValue:function(){if(jQuery.type(this.cfg.listData)==="string"){return this._iterator.getRow(this._selectedIndex);}return this.cfg.listData[this._selectedIndex];},refresh:function(A){this._selectedIndex=-1;actuate.screen.items.Item.prototype.refresh.call(this,A);},empty:function(){this._selectedIndex=-1;actuate.screen.items.Item.prototype.empty.call(this);},registerEventHandlers:function(){},render:function(A){this._box=A;this._instance=$.tmpl('<div style="position:absolute;left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg).appendTo($(A));if(!this.cfg.staticData){this._instance.append('<div id="scroller"><div id="pullDown"/><div id="pullUp"/></div>');$.tmpl('<ul data-role=listview data-scroll="true" data-inset=true data-split-icon=gear data-split-theme=${theme} data-divider-theme=${theme}'+(this.cfg.enableSearch===true?"data-filter=true":"")+"></ul>",this.cfg).insertAfter(this._instance.find("#scroller>div:first-child"));}else{$.tmpl('<ul data-role=listview data-scroll="true" data-inset=true data-split-icon=gear data-split-theme=${theme} data-divider-theme=${theme}'+(this.cfg.enableSearch===true?"data-filter=true":"")+"></ul>",this.cfg).appendTo(this._instance);}this._instance.css("background-color","#f4f4f4");this._instance.width(this.cfg.width);this._instance.height(this.cfg.height);this._renderRefreshableContent();this._instance.find("ul").listview();setTimeout(actuate.Method.bind(this._scrollize,this),200);},_scrollize:function(){this.pullDownEl=this._instance.find("#scroller>div:first-child");this.pullUpEl=this._instance.find("#scroller>div:last-child");this._scroll=new iScroll(this._instance.get(0),{useTransition:true,topOffset:this.pullDownEl.height(),onBeforeScrollMove:this._onSelectClosure,onScrollMove:this._onScrollMoveClosure,onScrollEnd:this._onScrollEndClosure,onTouchEnd:this._onSelectClosure});},_renderRefreshableContent:function(){if(this.cfg.title){$.tmpl("<li data-role=list-divider>${title}</li>",this.cfg).appendTo(this._instance.find("ul:first"));}if(this.cfg.groupkey){this._iterator=this._proxy.getAdapter(this.cfg.listData).getGroupedIterator(this.cfg.groupkey);var A=this._iterator.getData();var D=[];for(var C=0;C<A.length;C++){var E=A[C];if($.inArray(E[this._iterator._groupKey],D)<0){D.push(E[this._iterator._groupKey]);$.tmpl("<li>"+this.cfg.groupmarkup+"</li>",E).appendTo(this._instance.find("ul:first")).css("background-color","lightblue");}$.tmpl('<li data-icon="false"><a data-rel="dialog" href=#>'+this.cfg.markup+"</a></li>",E).appendTo(this._instance.find("ul:first"));}}else{if(this.cfg.staticData){this._renderStaticList();}else{if(jQuery.type(this.cfg.listData)==="string"){var B=this._proxy.getDataviewAdapter(this.cfg.listData);if(B){this._iterator=B.getIterator();}this._renderDynamicList(false,true);}}}},_renderStaticList:function(){$.tmpl('<li data-icon="check" data-theme='+this.cfg.theme+"><a href=#>"+this._defaultMarkup+"</a></li>",this.cfg.staticData).appendTo(this._instance.find("ul:first"));this._instance.find("ul").listview();},_renderDynamicList:function(C,B){var D=B?this._iterator.nextPage():this._iterator.previousPage();if(D.length>0){this._instance.find("ul:first").empty();var A=this._defaultMarkup.replace(/label/,this.cfg.itemStructure.primaryField).replace(/secondaryLabel/,this.cfg.itemStructure.secondaryField).replace(/description/,this.cfg.itemStructure.description);$.tmpl('<li data-icon="false"><a href=#>'+(this.cfg.markup?this.cfg.markup:A)+"</a></li>",D).appendTo(this._instance.find("ul:first"));this._instance.find("ul").listview(C?"refresh":null);if(C){setTimeout(actuate.Method.bind(this._scroll.refresh(),this._scroll),200);}else{setTimeout(actuate.Method.bind(this._scrollize,this),200);}}},_onScrollEnd:function(A){if(this.pullDownEl.className=="flip"){this.pullDownEl.className="loading";this._renderDynamicList(true,false);}else{if(this.pullUpEl.className=="flip"){this.pullUpEl.className="loading";this._renderDynamicList(true,true);}}},_onScrollMove:function(A){if(this._scroll.y>5&&this.pullDownEl.className!="flip"){this.pullDownEl.className="flip";this._scroll.minScrollY=-this.pullDownEl.height();}else{if(this._scroll.y<5&&this.pullDownEl.className=="flip"){this.pullDownEl.className="";this._scroll.minScrollY=-this.pullDownEl.height();}else{if(this._scroll.y<(this._scroll.maxScrollY-5)&&this.pullUpEl.className!="flip"){this.pullUpEl.className="flip";this._scroll.maxScrollY=this._scroll.maxScrollY+this.pullDownEl.height();}else{if(this._scroll.y>(this._scroll.maxScrollY+5)&&this.pullUpEl.className=="flip"){this.pullUpEl.className="";this._scroll.maxScrollY=this.pullDownEl.height();}}}}},_onselect:function(B){if(B.type=="mousemove"||B.type=="touchmove"){this._handleClick=false;return ;}if(this._handleClick){var A=this._instance.find("a").index($(B.target).closest("a"));if(A>-1){this._selectedIndex=A;this._proxy.broadcastEvent("ITEMSELECT");}}this._handleClick=true;},notify:function(B,A){if($.type(A)===object){switch(A.action){case"refresh":this.refresh();break;}}}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Button=actuate.Class.create();actuate.screen.items.jquerymobile.Button.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},getValue:function(){return this._instance.text();},registerEventHandlers:function(){this._instance.bind("click",actuate.Method.bind(this._onclick,this));},render:function(A){this._box=A;this._instance=$.tmpl('<a href=# data-theme="${theme}" data-icon="${icon}" data-iconpos="${position}" style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));if(this.cfg.enabled===false){this._instance.addClass("ui-disabled");}this._instance.width(this.cfg.width);this._instance.height(this.cfg.height);this._instance.text(this.cfg.label);this._instance.button();},_onclick:function(A){this._proxy.broadcastEvent("SELECT");}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Textinput=actuate.Class.create();actuate.screen.items.jquerymobile.Textinput.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{_instance:null,_proxy:null,cfg:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},render:function(A){if(this.cfg.label){this._instance=$.tmpl('<table style="width:100%" style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"><tr><td>${label}</td><td><input style="float:right" type=text data-theme="${theme}"></td></tr></table>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));}else{this._instance=$.tmpl('<input type=text data-theme="${theme}" style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));}this._instance.textinput();this._instance.width(this.cfg.width);this._instance.textinput((this.cfg.enabled===false?"disable":"enable"));this._instance.val(this.cfg.value);}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Navbar=actuate.Class.create();actuate.screen.items.jquerymobile.Navbar.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,_markup:null,_selectedIndex:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;var C="<li><a href=# data-icon=${icon} "+(this.cfg.theme?"data-theme="+this.cfg.theme:"")+">${label}</a></li>";this._markup=$.template("template",C);},getValue:function(){return this.cfg.items[this._selectedIndex].label;},registerEventHandlers:function(){this._instance.delegate("ul a","vclick",actuate.Method.bind(this._onselect,this));},render:function(A){this._box=A;this._instance=$.tmpl('<div data-role="navbar" data-theme=${theme} '+(this.cfg.position?'data-iconpos="'+this.cfg.position+'"':"")+' style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));this._instance.append("<ul></ul>");if(this.cfg.items){$.tmpl(this._markup,this.cfg.items).appendTo(this._instance.find("ul"));}var B=this._instance.find("li:eq("+this.cfg.activeItem+")");B.find("a").addClass($.mobile.activeBtnClass);B.find("a").addClass("ui-state-persist");this._instance.width(this.cfg.width?this.cfg.width:"100%");this._instance.height(this.cfg.height);this._instance.navbar();},empty:function(){this._selectedIndex=-1;actuate.screen.items.Item.prototype.empty.call(this);},_onselect:function(A){this._selectedIndex=this._instance.find("li").index($(A.target).parents("li"));this._instance.find("a:eq("+this._selectedIndex+")").removeClass($.mobile.activeBtnClass);this._proxy.broadcastEvent("SELECT",this._selectedIndex);}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Chart=actuate.Class.create();actuate.screen.items.jquerymobile.Chart.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,_clientChart:null,_iterator:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},filter:function(C,B,A){this._iterator.filter(C,B,A);this._instance.jqxChart({source:this._iterator.getData()});this._instance.jqxChart("refresh");this._proxy.broadcastEvent("refresh");},refresh:function(){this._iterator=this._proxy.getAdapter(this.cfg.chartData).getIterator();this._instance.jqxChart({source:this._iterator.getData()});this._instance.jqxChart("refresh");this._proxy.broadcastEvent("refresh");},render:function(A){if(this.cfg.chartData){this._iterator=this._proxy.getDataviewAdapter(this.cfg.chartData).getIterator();}this._instance=$.tmpl('<div style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;'+this.cfg.style+'"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));this._instance.width(this.cfg.width);this._instance.height(this.cfg.height);this.cfg.chartModel.options.chart.renderTo=this._instance.get(0);if(this._iterator){this.cfg.chartModel.settings.dataArray=this._iterator.getData();}this._clientChart=new actuate.report.HTML5Chart.ClientChart(this.cfg.chartModel.options,this.cfg.chartModel.settings);},notify:function(B,A){switch(A.action){case"refresh":this.refresh();break;}},getGroupedIterator:function(A){return this._iterator.cloneGroupedIterator(A);}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Label=actuate.Class.create();actuate.screen.items.jquerymobile.Label.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},render:function(A){this._box=A;this._instance=$.tmpl('<label style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));this._instance.width(this.cfg.width);this._instance.height(this.cfg.height);this._instance.text(this.cfg.label);}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Custom=actuate.Class.create();actuate.screen.items.jquerymobile.Custom.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},render:function(A){this._box=A;this._instance=$.tmpl('<div style="${$item.position( )}left:${left}px;top:${top}px;bottom:${bottom}px;"/>',this.cfg,{position:function(){return(this.data.left||this.data.top||this.data.bottom)!==undefined?"position:absolute;":"";}}).appendTo($(A));this._instance.width(this.cfg.width);this._instance.height(this.cfg.height);this._instance.append(this.cfg.code);}});actuate.util.Package.define("actuate.screen.items.jquerymobile");actuate.screen.items.jquerymobile.Screen=actuate.Class.create();actuate.screen.items.jquerymobile.Screen.prototype=actuate.Class.extend(new actuate.screen.items.Item(),{cfg:null,initialize:function(B,A){actuate.screen.items.Item.prototype.initialize.call(this,B);this.cfg=A;},show:function(){$.mobile.changePage(this._instance,{transition:"none"});},registerEventHandlers:function(){this._instance.bind("pagebeforeshow",actuate.Method.bind(this._onPageshow,this));},render:function(A){this._instance=$.tmpl('<div style="position:absolute" data-role=page data-theme="${theme}"/>',this.cfg).appendTo($(A));this._instance.css("width",this.cfg.width);this._instance.css("height",this.cfg.height);this._instance.page();},refresh:function(A){},getBoxForChild:function(A){return this._instance;},notify:function(B,A){this.show();},_onPageshow:function(A){}});